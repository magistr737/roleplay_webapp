import{r as Aj,_ as gw,a as Mj,j as h,N as jj,f as Ca,u as zi,g as Oj,b as Rj,c as Nj,d as Dj,e as vw,h as zj,O as Lj,B as ne,R as qS,i as Ij,k as en,C as $n,A as yw,I as _r,T as z,G as pe,l as Ut,m as ct,n as de,o as _t,p as qe,q as le,s as se,t as nh,v as As,M as Gr,S as bw,w as oe,L as gr,P as yt,x as qn,y as $u,z as xw,D as Kv,E as Pl,F as ke,H as lp,J as Sw,K as Pj,Q as Ew,U as Bj,V as xs,W as wt,X as Mn,Y as Mi,Z as kw,$ as Uj,a0 as Hj,a1 as Yv,a2 as Y0,a3 as yu,a4 as Ff,a5 as qj,a6 as ml,a7 as go,a8 as Fj,a9 as Vj,aa as ww,ab as Wj,ac as Cw,ad as $j,ae as Gj,af as Nl,ag as Xv,ah as X0,ai as Kj,aj as Nu,ak as Yj,al as Xj,am as Dg}from"./vendor-mantine-B9refIwV.js";import{d as cp,e as Jj,g as Tw,r as A,R as Gn,c as du,u as Li,f as _w,h as Qj,i as Aw,j as Zj,k as eO,l as tO}from"./vendor-react-Clb4NWHV.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var zg={exports:{}},$c={},Lg={exports:{}},Ig={};var FS;function nO(){return FS||(FS=1,(function(t){function e(q,te){var ue=q.length;q.push(te);e:for(;0<ue;){var Ce=ue-1>>>1,ae=q[Ce];if(0<i(ae,te))q[Ce]=te,q[ue]=ae,ue=Ce;else break e}}function n(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var te=q[0],ue=q.pop();if(ue!==te){q[0]=ue;e:for(var Ce=0,ae=q.length,Se=ae>>>1;Ce<Se;){var ge=2*(Ce+1)-1,he=q[ge],Le=ge+1,rt=q[Le];if(0>i(he,ue))Le<ae&&0>i(rt,he)?(q[Ce]=rt,q[Le]=ue,Ce=Le):(q[Ce]=he,q[ge]=ue,Ce=ge);else if(Le<ae&&0>i(rt,ue))q[Ce]=rt,q[Le]=ue,Ce=Le;else break e}}return te}function i(q,te){var ue=q.sortIndex-te.sortIndex;return ue!==0?ue:q.id-te.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var l=Date,c=l.now();t.unstable_now=function(){return l.now()-c}}var d=[],p=[],m=1,g=null,v=3,b=!1,S=!1,k=!1,E=!1,w=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;function R(q){for(var te=n(p);te!==null;){if(te.callback===null)r(p);else if(te.startTime<=q)r(p),te.sortIndex=te.expirationTime,e(d,te);else break;te=n(p)}}function O(q){if(k=!1,R(q),!S)if(n(d)!==null)S=!0,D||(D=!0,re());else{var te=n(p);te!==null&&me(O,te.startTime-q)}}var D=!1,I=-1,H=5,V=-1;function K(){return E?!0:!(t.unstable_now()-V<H)}function Q(){if(E=!1,D){var q=t.unstable_now();V=q;var te=!0;try{e:{S=!1,k&&(k=!1,T(I),I=-1),b=!0;var ue=v;try{t:{for(R(q),g=n(d);g!==null&&!(g.expirationTime>q&&K());){var Ce=g.callback;if(typeof Ce=="function"){g.callback=null,v=g.priorityLevel;var ae=Ce(g.expirationTime<=q);if(q=t.unstable_now(),typeof ae=="function"){g.callback=ae,R(q),te=!0;break t}g===n(d)&&r(d),R(q)}else r(d);g=n(d)}if(g!==null)te=!0;else{var Se=n(p);Se!==null&&me(O,Se.startTime-q),te=!1}}break e}finally{g=null,v=ue,b=!1}te=void 0}}finally{te?re():D=!1}}}var re;if(typeof _=="function")re=function(){_(Q)};else if(typeof MessageChannel<"u"){var Re=new MessageChannel,ye=Re.port2;Re.port1.onmessage=Q,re=function(){ye.postMessage(null)}}else re=function(){w(Q,0)};function me(q,te){I=w(function(){q(t.unstable_now())},te)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(q){q.callback=null},t.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):H=0<q?Math.floor(1e3/q):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_next=function(q){switch(v){case 1:case 2:case 3:var te=3;break;default:te=v}var ue=v;v=te;try{return q()}finally{v=ue}},t.unstable_requestPaint=function(){E=!0},t.unstable_runWithPriority=function(q,te){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var ue=v;v=q;try{return te()}finally{v=ue}},t.unstable_scheduleCallback=function(q,te,ue){var Ce=t.unstable_now();switch(typeof ue=="object"&&ue!==null?(ue=ue.delay,ue=typeof ue=="number"&&0<ue?Ce+ue:Ce):ue=Ce,q){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=ue+ae,q={id:m++,callback:te,priorityLevel:q,startTime:ue,expirationTime:ae,sortIndex:-1},ue>Ce?(q.sortIndex=ue,e(p,q),n(d)===null&&q===n(p)&&(k?(T(I),I=-1):k=!0,me(O,ue-Ce))):(q.sortIndex=ae,e(d,q),S||b||(S=!0,D||(D=!0,re()))),q},t.unstable_shouldYield=K,t.unstable_wrapCallback=function(q){var te=v;return function(){var ue=v;v=te;try{return q.apply(this,arguments)}finally{v=ue}}}})(Ig)),Ig}var VS;function rO(){return VS||(VS=1,Lg.exports=nO()),Lg.exports}var WS;function iO(){if(WS)return $c;WS=1;var t=rO(),e=cp(),n=Jj();function r(o){var a="https://react.dev/errors/"+o;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var u=2;u<arguments.length;u++)a+="&args[]="+encodeURIComponent(arguments[u])}return"Minified React error #"+o+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function s(o){var a=o,u=o;if(o.alternate)for(;a.return;)a=a.return;else{o=a;do a=o,(a.flags&4098)!==0&&(u=a.return),o=a.return;while(o)}return a.tag===3?u:null}function l(o){if(o.tag===13){var a=o.memoizedState;if(a===null&&(o=o.alternate,o!==null&&(a=o.memoizedState)),a!==null)return a.dehydrated}return null}function c(o){if(o.tag===31){var a=o.memoizedState;if(a===null&&(o=o.alternate,o!==null&&(a=o.memoizedState)),a!==null)return a.dehydrated}return null}function d(o){if(s(o)!==o)throw Error(r(188))}function p(o){var a=o.alternate;if(!a){if(a=s(o),a===null)throw Error(r(188));return a!==o?null:o}for(var u=o,f=a;;){var y=u.return;if(y===null)break;var x=y.alternate;if(x===null){if(f=y.return,f!==null){u=f;continue}break}if(y.child===x.child){for(x=y.child;x;){if(x===u)return d(y),o;if(x===f)return d(y),a;x=x.sibling}throw Error(r(188))}if(u.return!==f.return)u=y,f=x;else{for(var C=!1,M=y.child;M;){if(M===u){C=!0,u=y,f=x;break}if(M===f){C=!0,f=y,u=x;break}M=M.sibling}if(!C){for(M=x.child;M;){if(M===u){C=!0,u=x,f=y;break}if(M===f){C=!0,f=x,u=y;break}M=M.sibling}if(!C)throw Error(r(189))}}if(u.alternate!==f)throw Error(r(190))}if(u.tag!==3)throw Error(r(188));return u.stateNode.current===u?o:a}function m(o){var a=o.tag;if(a===5||a===26||a===27||a===6)return o;for(o=o.child;o!==null;){if(a=m(o),a!==null)return a;o=o.sibling}return null}var g=Object.assign,v=Symbol.for("react.element"),b=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),_=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),O=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),H=Symbol.for("react.lazy"),V=Symbol.for("react.activity"),K=Symbol.for("react.memo_cache_sentinel"),Q=Symbol.iterator;function re(o){return o===null||typeof o!="object"?null:(o=Q&&o[Q]||o["@@iterator"],typeof o=="function"?o:null)}var Re=Symbol.for("react.client.reference");function ye(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===Re?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case k:return"Fragment";case w:return"Profiler";case E:return"StrictMode";case O:return"Suspense";case D:return"SuspenseList";case V:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case S:return"Portal";case _:return o.displayName||"Context";case T:return(o._context.displayName||"Context")+".Consumer";case R:var a=o.render;return o=o.displayName,o||(o=a.displayName||a.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case I:return a=o.displayName||null,a!==null?a:ye(o.type)||"Memo";case H:a=o._payload,o=o._init;try{return ye(o(a))}catch{}}return null}var me=Array.isArray,q=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,te=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ue={pending:!1,data:null,method:null,action:null},Ce=[],ae=-1;function Se(o){return{current:o}}function ge(o){0>ae||(o.current=Ce[ae],Ce[ae]=null,ae--)}function he(o,a){ae++,Ce[ae]=o.current,o.current=a}var Le=Se(null),rt=Se(null),ve=Se(null),Kt=Se(null);function Ct(o,a){switch(he(ve,a),he(rt,o),he(Le,null),a.nodeType){case 9:case 11:o=(o=a.documentElement)&&(o=o.namespaceURI)?dS(o):0;break;default:if(o=a.tagName,a=a.namespaceURI)a=dS(a),o=fS(a,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}ge(Le),he(Le,o)}function Ae(){ge(Le),ge(rt),ge(ve)}function ie(o){o.memoizedState!==null&&he(Kt,o);var a=Le.current,u=fS(a,o.type);a!==u&&(he(rt,o),he(Le,u))}function He(o){rt.current===o&&(ge(Le),ge(rt)),Kt.current===o&&(ge(Kt),qc._currentValue=ue)}var We,Je;function Ke(o){if(We===void 0)try{throw Error()}catch(u){var a=u.stack.trim().match(/\n( *(at )?)/);We=a&&a[1]||"",Je=-1<u.stack.indexOf(`
    at`)?" (<anonymous>)":-1<u.stack.indexOf("@")?"@unknown:0:0":""}return`
`+We+o+Je}var gt=!1;function Yt(o,a){if(!o||gt)return"";gt=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(a){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch(Y){var $=Y}Reflect.construct(o,[],ee)}else{try{ee.call()}catch(Y){$=Y}o.call(ee.prototype)}}else{try{throw Error()}catch(Y){$=Y}(ee=o())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch(Y){if(Y&&$&&typeof Y.stack=="string")return[Y.stack,$.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var x=f.DetermineComponentFrameRoot(),C=x[0],M=x[1];if(C&&M){var L=C.split(`
`),W=M.split(`
`);for(y=f=0;f<L.length&&!L[f].includes("DetermineComponentFrameRoot");)f++;for(;y<W.length&&!W[y].includes("DetermineComponentFrameRoot");)y++;if(f===L.length||y===W.length)for(f=L.length-1,y=W.length-1;1<=f&&0<=y&&L[f]!==W[y];)y--;for(;1<=f&&0<=y;f--,y--)if(L[f]!==W[y]){if(f!==1||y!==1)do if(f--,y--,0>y||L[f]!==W[y]){var J=`
`+L[f].replace(" at new "," at ");return o.displayName&&J.includes("<anonymous>")&&(J=J.replace("<anonymous>",o.displayName)),J}while(1<=f&&0<=y);break}}}finally{gt=!1,Error.prepareStackTrace=u}return(u=o?o.displayName||o.name:"")?Ke(u):""}function Bi(o,a){switch(o.tag){case 26:case 27:case 5:return Ke(o.type);case 16:return Ke("Lazy");case 13:return o.child!==a&&a!==null?Ke("Suspense Fallback"):Ke("Suspense");case 19:return Ke("SuspenseList");case 0:case 15:return Yt(o.type,!1);case 11:return Yt(o.type.render,!1);case 1:return Yt(o.type,!0);case 31:return Ke("Activity");default:return""}}function jr(o){try{var a="",u=null;do a+=Bi(o,u),u=o,o=o.return;while(o);return a}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}var Xn=Object.prototype.hasOwnProperty,Jr=t.unstable_scheduleCallback,pi=t.unstable_cancelCallback,Ns=t.unstable_shouldYield,ec=t.unstable_requestPaint,Pe=t.unstable_now,Ie=t.unstable_getCurrentPriorityLevel,Ht=t.unstable_ImmediatePriority,ir=t.unstable_UserBlockingPriority,un=t.unstable_NormalPriority,Qr=t.unstable_LowPriority,Jn=t.unstable_IdlePriority,Tn=t.log,Or=t.unstable_setDisableYieldValue,vr=null,rn=null;function Rr(o){if(typeof Tn=="function"&&Or(o),rn&&typeof rn.setStrictMode=="function")try{rn.setStrictMode(vr,o)}catch{}}var _n=Math.clz32?Math.clz32:tc,Ui=Math.log,Ds=Math.LN2;function tc(o){return o>>>=0,o===0?32:31-(Ui(o)/Ds|0)|0}var wo=256,zs=262144,Na=4194304;function mi(o){var a=o&42;if(a!==0)return a;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function Co(o,a,u){var f=o.pendingLanes;if(f===0)return 0;var y=0,x=o.suspendedLanes,C=o.pingedLanes;o=o.warmLanes;var M=f&134217727;return M!==0?(f=M&~x,f!==0?y=mi(f):(C&=M,C!==0?y=mi(C):u||(u=M&~o,u!==0&&(y=mi(u))))):(M=f&~x,M!==0?y=mi(M):C!==0?y=mi(C):u||(u=f&~o,u!==0&&(y=mi(u)))),y===0?0:a!==0&&a!==y&&(a&x)===0&&(x=y&-y,u=a&-a,x>=u||x===32&&(u&4194048)!==0)?a:y}function Zr(o,a){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&a)===0}function Ls(o,a){switch(o){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nd(){var o=Na;return Na<<=1,(Na&62914560)===0&&(Na=4194304),o}function Da(o){for(var a=[],u=0;31>u;u++)a.push(o);return a}function Hi(o,a){o.pendingLanes|=a,a!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function To(o,a,u,f,y,x){var C=o.pendingLanes;o.pendingLanes=u,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=u,o.entangledLanes&=u,o.errorRecoveryDisabledLanes&=u,o.shellSuspendCounter=0;var M=o.entanglements,L=o.expirationTimes,W=o.hiddenUpdates;for(u=C&~u;0<u;){var J=31-_n(u),ee=1<<J;M[J]=0,L[J]=-1;var $=W[J];if($!==null)for(W[J]=null,J=0;J<$.length;J++){var Y=$[J];Y!==null&&(Y.lane&=-536870913)}u&=~ee}f!==0&&rd(o,f,0),x!==0&&y===0&&o.tag!==0&&(o.suspendedLanes|=x&~(C&~a))}function rd(o,a,u){o.pendingLanes|=a,o.suspendedLanes&=~a;var f=31-_n(a);o.entangledLanes|=a,o.entanglements[f]=o.entanglements[f]|1073741824|u&261930}function id(o,a){var u=o.entangledLanes|=a;for(o=o.entanglements;u;){var f=31-_n(u),y=1<<f;y&a|o[f]&a&&(o[f]|=a),u&=~y}}function Xe(o,a){var u=a&-a;return u=(u&42)!==0?1:nc(u),(u&(o.suspendedLanes|a))!==0?0:u}function nc(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function rc(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function Qn(){var o=te.p;return o!==0?o:(o=window.event,o===void 0?32:zS(o.type))}function za(o,a){var u=te.p;try{return te.p=o,a()}finally{te.p=u}}var on=Math.random().toString(36).slice(2),pn="__reactFiber$"+on,Dn="__reactProps$"+on,qi="__reactContainer$"+on,La="__reactEvents$"+on,od="__reactListeners$"+on,Np="__reactHandles$"+on,sd="__reactResources$"+on,_o="__reactMarker$"+on;function ic(o){delete o[pn],delete o[Dn],delete o[La],delete o[od],delete o[Np]}function Ao(o){var a=o[pn];if(a)return a;for(var u=o.parentNode;u;){if(a=u[qi]||u[pn]){if(u=a.alternate,a.child!==null||u!==null&&u.child!==null)for(o=bS(o);o!==null;){if(u=o[pn])return u;o=bS(o)}return a}o=u,u=o.parentNode}return null}function Mo(o){if(o=o[pn]||o[qi]){var a=o.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return o}return null}function Is(o){var a=o.tag;if(a===5||a===26||a===27||a===6)return o.stateNode;throw Error(r(33))}function jo(o){var a=o[sd];return a||(a=o[sd]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function mn(o){o[_o]=!0}var ad=new Set,Oo={};function Fi(o,a){Vn(o,a),Vn(o+"Capture",a)}function Vn(o,a){for(Oo[o]=a,o=0;o<a.length;o++)ad.add(a[o])}var ld=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),gi={},cd={};function Dp(o){return Xn.call(cd,o)?!0:Xn.call(gi,o)?!1:ld.test(o)?cd[o]=!0:(gi[o]=!0,!1)}function Ia(o,a,u){if(Dp(a))if(u===null)o.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":o.removeAttribute(a);return;case"boolean":var f=a.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){o.removeAttribute(a);return}}o.setAttribute(a,""+u)}}function vi(o,a,u){if(u===null)o.removeAttribute(a);else{switch(typeof u){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(a);return}o.setAttribute(a,""+u)}}function ei(o,a,u,f){if(f===null)o.removeAttribute(u);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(u);return}o.setAttributeNS(a,u,""+f)}}function or(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Ro(o){var a=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function zp(o,a,u){var f=Object.getOwnPropertyDescriptor(o.constructor.prototype,a);if(!o.hasOwnProperty(a)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var y=f.get,x=f.set;return Object.defineProperty(o,a,{configurable:!0,get:function(){return y.call(this)},set:function(C){u=""+C,x.call(this,C)}}),Object.defineProperty(o,a,{enumerable:f.enumerable}),{getValue:function(){return u},setValue:function(C){u=""+C},stopTracking:function(){o._valueTracker=null,delete o[a]}}}}function Vi(o){if(!o._valueTracker){var a=Ro(o)?"checked":"value";o._valueTracker=zp(o,a,""+o[a])}}function ud(o){if(!o)return!1;var a=o._valueTracker;if(!a)return!0;var u=a.getValue(),f="";return o&&(f=Ro(o)?o.checked?"true":"false":o.value),o=f,o!==u?(a.setValue(o),!0):!1}function Pa(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var oc=/[\n"\\]/g;function j(o){return o.replace(oc,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function N(o,a,u,f,y,x,C,M){o.name="",C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"?o.type=C:o.removeAttribute("type"),a!=null?C==="number"?(a===0&&o.value===""||o.value!=a)&&(o.value=""+or(a)):o.value!==""+or(a)&&(o.value=""+or(a)):C!=="submit"&&C!=="reset"||o.removeAttribute("value"),a!=null?G(o,C,or(a)):u!=null?G(o,C,or(u)):f!=null&&o.removeAttribute("value"),y==null&&x!=null&&(o.defaultChecked=!!x),y!=null&&(o.checked=y&&typeof y!="function"&&typeof y!="symbol"),M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?o.name=""+or(M):o.removeAttribute("name")}function P(o,a,u,f,y,x,C,M){if(x!=null&&typeof x!="function"&&typeof x!="symbol"&&typeof x!="boolean"&&(o.type=x),a!=null||u!=null){if(!(x!=="submit"&&x!=="reset"||a!=null)){Vi(o);return}u=u!=null?""+or(u):"",a=a!=null?""+or(a):u,M||a===o.value||(o.value=a),o.defaultValue=a}f=f??y,f=typeof f!="function"&&typeof f!="symbol"&&!!f,o.checked=M?o.checked:!!f,o.defaultChecked=!!f,C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(o.name=C),Vi(o)}function G(o,a,u){a==="number"&&Pa(o.ownerDocument)===o||o.defaultValue===""+u||(o.defaultValue=""+u)}function X(o,a,u,f){if(o=o.options,a){a={};for(var y=0;y<u.length;y++)a["$"+u[y]]=!0;for(u=0;u<o.length;u++)y=a.hasOwnProperty("$"+o[u].value),o[u].selected!==y&&(o[u].selected=y),y&&f&&(o[u].defaultSelected=!0)}else{for(u=""+or(u),a=null,y=0;y<o.length;y++){if(o[y].value===u){o[y].selected=!0,f&&(o[y].defaultSelected=!0);return}a!==null||o[y].disabled||(a=o[y])}a!==null&&(a.selected=!0)}}function be(o,a,u){if(a!=null&&(a=""+or(a),a!==o.value&&(o.value=a),u==null)){o.defaultValue!==a&&(o.defaultValue=a);return}o.defaultValue=u!=null?""+or(u):""}function Me(o,a,u,f){if(a==null){if(f!=null){if(u!=null)throw Error(r(92));if(me(f)){if(1<f.length)throw Error(r(93));f=f[0]}u=f}u==null&&(u=""),a=u}u=or(a),o.defaultValue=u,f=o.textContent,f===u&&f!==""&&f!==null&&(o.value=f),Vi(o)}function we(o,a){if(a){var u=o.firstChild;if(u&&u===o.lastChild&&u.nodeType===3){u.nodeValue=a;return}}o.textContent=a}var ut=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ne(o,a,u){var f=a.indexOf("--")===0;u==null||typeof u=="boolean"||u===""?f?o.setProperty(a,""):a==="float"?o.cssFloat="":o[a]="":f?o.setProperty(a,u):typeof u!="number"||u===0||ut.has(a)?a==="float"?o.cssFloat=u:o[a]=(""+u).trim():o[a]=u+"px"}function lt(o,a,u){if(a!=null&&typeof a!="object")throw Error(r(62));if(o=o.style,u!=null){for(var f in u)!u.hasOwnProperty(f)||a!=null&&a.hasOwnProperty(f)||(f.indexOf("--")===0?o.setProperty(f,""):f==="float"?o.cssFloat="":o[f]="");for(var y in a)f=a[y],a.hasOwnProperty(y)&&u[y]!==f&&Ne(o,y,f)}else for(var x in a)a.hasOwnProperty(x)&&Ne(o,x,a[x])}function St(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),xe=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function _e(o){return xe.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}function De(){}var Wt=null;function Oe(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var Rt=null,Ze=null;function Xt(o){var a=Mo(o);if(a&&(o=a.stateNode)){var u=o[Dn]||null;e:switch(o=a.stateNode,a.type){case"input":if(N(o,u.value,u.defaultValue,u.defaultValue,u.checked,u.defaultChecked,u.type,u.name),a=u.name,u.type==="radio"&&a!=null){for(u=o;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll('input[name="'+j(""+a)+'"][type="radio"]'),a=0;a<u.length;a++){var f=u[a];if(f!==o&&f.form===o.form){var y=f[Dn]||null;if(!y)throw Error(r(90));N(f,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(a=0;a<u.length;a++)f=u[a],f.form===o.form&&ud(f)}break e;case"textarea":be(o,u.value,u.defaultValue);break e;case"select":a=u.value,a!=null&&X(o,!!u.multiple,a,!1)}}}var Nr=!1;function sc(o,a,u){if(Nr)return o(a,u);Nr=!0;try{var f=o(a);return f}finally{if(Nr=!1,(Rt!==null||Ze!==null)&&(Yd(),Rt&&(a=Rt,o=Ze,Ze=Rt=null,Xt(a),o)))for(a=0;a<o.length;a++)Xt(o[a])}}function No(o,a){var u=o.stateNode;if(u===null)return null;var f=u[Dn]||null;if(f===null)return null;u=f[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(o=o.type,f=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!f;break e;default:o=!1}if(o)return null;if(u&&typeof u!="function")throw Error(r(231,a,typeof u));return u}var ti=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ps=!1;if(ti)try{var Bs={};Object.defineProperty(Bs,"passive",{get:function(){Ps=!0}}),window.addEventListener("test",Bs,Bs),window.removeEventListener("test",Bs,Bs)}catch{Ps=!1}var yi=null,Ee=null,sr=null;function Wi(){if(sr)return sr;var o,a=Ee,u=a.length,f,y="value"in yi?yi.value:yi.textContent,x=y.length;for(o=0;o<u&&a[o]===y[o];o++);var C=u-o;for(f=1;f<=C&&a[u-f]===y[x-f];f++);return sr=y.slice(o,1<f?1-f:void 0)}function Us(o){var a=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&a===13&&(o=13)):o=a,o===10&&(o=13),32<=o||o===13?o:0}function dd(){return!0}function hb(){return!1}function ar(o){function a(u,f,y,x,C){this._reactName=u,this._targetInst=y,this.type=f,this.nativeEvent=x,this.target=C,this.currentTarget=null;for(var M in o)o.hasOwnProperty(M)&&(u=o[M],this[M]=u?u(x):x[M]);return this.isDefaultPrevented=(x.defaultPrevented!=null?x.defaultPrevented:x.returnValue===!1)?dd:hb,this.isPropagationStopped=hb,this}return g(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=dd)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=dd)},persist:function(){},isPersistent:dd}),a}var Hs={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fd=ar(Hs),ac=g({},Hs,{view:0,detail:0}),TA=ar(ac),Lp,Ip,lc,hd=g({},ac,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Bp,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==lc&&(lc&&o.type==="mousemove"?(Lp=o.screenX-lc.screenX,Ip=o.screenY-lc.screenY):Ip=Lp=0,lc=o),Lp)},movementY:function(o){return"movementY"in o?o.movementY:Ip}}),pb=ar(hd),_A=g({},hd,{dataTransfer:0}),AA=ar(_A),MA=g({},ac,{relatedTarget:0}),Pp=ar(MA),jA=g({},Hs,{animationName:0,elapsedTime:0,pseudoElement:0}),OA=ar(jA),RA=g({},Hs,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),NA=ar(RA),DA=g({},Hs,{data:0}),mb=ar(DA),zA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},LA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},IA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function PA(o){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(o):(o=IA[o])?!!a[o]:!1}function Bp(){return PA}var BA=g({},ac,{key:function(o){if(o.key){var a=zA[o.key]||o.key;if(a!=="Unidentified")return a}return o.type==="keypress"?(o=Us(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?LA[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Bp,charCode:function(o){return o.type==="keypress"?Us(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Us(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),UA=ar(BA),HA=g({},hd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gb=ar(HA),qA=g({},ac,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Bp}),FA=ar(qA),VA=g({},Hs,{propertyName:0,elapsedTime:0,pseudoElement:0}),WA=ar(VA),$A=g({},hd,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),GA=ar($A),KA=g({},Hs,{newState:0,oldState:0}),YA=ar(KA),XA=[9,13,27,32],Up=ti&&"CompositionEvent"in window,cc=null;ti&&"documentMode"in document&&(cc=document.documentMode);var JA=ti&&"TextEvent"in window&&!cc,vb=ti&&(!Up||cc&&8<cc&&11>=cc),yb=" ",bb=!1;function xb(o,a){switch(o){case"keyup":return XA.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Sb(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var Ba=!1;function QA(o,a){switch(o){case"compositionend":return Sb(a);case"keypress":return a.which!==32?null:(bb=!0,yb);case"textInput":return o=a.data,o===yb&&bb?null:o;default:return null}}function ZA(o,a){if(Ba)return o==="compositionend"||!Up&&xb(o,a)?(o=Wi(),sr=Ee=yi=null,Ba=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return vb&&a.locale!=="ko"?null:a.data;default:return null}}var eM={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Eb(o){var a=o&&o.nodeName&&o.nodeName.toLowerCase();return a==="input"?!!eM[o.type]:a==="textarea"}function kb(o,a,u,f){Rt?Ze?Ze.push(f):Ze=[f]:Rt=f,a=nf(a,"onChange"),0<a.length&&(u=new fd("onChange","change",null,u,f),o.push({event:u,listeners:a}))}var uc=null,dc=null;function tM(o){oS(o,0)}function pd(o){var a=Is(o);if(ud(a))return o}function wb(o,a){if(o==="change")return a}var Cb=!1;if(ti){var Hp;if(ti){var qp="oninput"in document;if(!qp){var Tb=document.createElement("div");Tb.setAttribute("oninput","return;"),qp=typeof Tb.oninput=="function"}Hp=qp}else Hp=!1;Cb=Hp&&(!document.documentMode||9<document.documentMode)}function _b(){uc&&(uc.detachEvent("onpropertychange",Ab),dc=uc=null)}function Ab(o){if(o.propertyName==="value"&&pd(dc)){var a=[];kb(a,dc,o,Oe(o)),sc(tM,a)}}function nM(o,a,u){o==="focusin"?(_b(),uc=a,dc=u,uc.attachEvent("onpropertychange",Ab)):o==="focusout"&&_b()}function rM(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return pd(dc)}function iM(o,a){if(o==="click")return pd(a)}function oM(o,a){if(o==="input"||o==="change")return pd(a)}function sM(o,a){return o===a&&(o!==0||1/o===1/a)||o!==o&&a!==a}var yr=typeof Object.is=="function"?Object.is:sM;function fc(o,a){if(yr(o,a))return!0;if(typeof o!="object"||o===null||typeof a!="object"||a===null)return!1;var u=Object.keys(o),f=Object.keys(a);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var y=u[f];if(!Xn.call(a,y)||!yr(o[y],a[y]))return!1}return!0}function Mb(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function jb(o,a){var u=Mb(o);o=0;for(var f;u;){if(u.nodeType===3){if(f=o+u.textContent.length,o<=a&&f>=a)return{node:u,offset:a-o};o=f}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Mb(u)}}function Ob(o,a){return o&&a?o===a?!0:o&&o.nodeType===3?!1:a&&a.nodeType===3?Ob(o,a.parentNode):"contains"in o?o.contains(a):o.compareDocumentPosition?!!(o.compareDocumentPosition(a)&16):!1:!1}function Rb(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var a=Pa(o.document);a instanceof o.HTMLIFrameElement;){try{var u=typeof a.contentWindow.location.href=="string"}catch{u=!1}if(u)o=a.contentWindow;else break;a=Pa(o.document)}return a}function Fp(o){var a=o&&o.nodeName&&o.nodeName.toLowerCase();return a&&(a==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||a==="textarea"||o.contentEditable==="true")}var aM=ti&&"documentMode"in document&&11>=document.documentMode,Ua=null,Vp=null,hc=null,Wp=!1;function Nb(o,a,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;Wp||Ua==null||Ua!==Pa(f)||(f=Ua,"selectionStart"in f&&Fp(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),hc&&fc(hc,f)||(hc=f,f=nf(Vp,"onSelect"),0<f.length&&(a=new fd("onSelect","select",null,a,u),o.push({event:a,listeners:f}),a.target=Ua)))}function qs(o,a){var u={};return u[o.toLowerCase()]=a.toLowerCase(),u["Webkit"+o]="webkit"+a,u["Moz"+o]="moz"+a,u}var Ha={animationend:qs("Animation","AnimationEnd"),animationiteration:qs("Animation","AnimationIteration"),animationstart:qs("Animation","AnimationStart"),transitionrun:qs("Transition","TransitionRun"),transitionstart:qs("Transition","TransitionStart"),transitioncancel:qs("Transition","TransitionCancel"),transitionend:qs("Transition","TransitionEnd")},$p={},Db={};ti&&(Db=document.createElement("div").style,"AnimationEvent"in window||(delete Ha.animationend.animation,delete Ha.animationiteration.animation,delete Ha.animationstart.animation),"TransitionEvent"in window||delete Ha.transitionend.transition);function Fs(o){if($p[o])return $p[o];if(!Ha[o])return o;var a=Ha[o],u;for(u in a)if(a.hasOwnProperty(u)&&u in Db)return $p[o]=a[u];return o}var zb=Fs("animationend"),Lb=Fs("animationiteration"),Ib=Fs("animationstart"),lM=Fs("transitionrun"),cM=Fs("transitionstart"),uM=Fs("transitioncancel"),Pb=Fs("transitionend"),Bb=new Map,Gp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Gp.push("scrollEnd");function ni(o,a){Bb.set(o,a),Fi(a,[o])}var md=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},Dr=[],qa=0,Kp=0;function gd(){for(var o=qa,a=Kp=qa=0;a<o;){var u=Dr[a];Dr[a++]=null;var f=Dr[a];Dr[a++]=null;var y=Dr[a];Dr[a++]=null;var x=Dr[a];if(Dr[a++]=null,f!==null&&y!==null){var C=f.pending;C===null?y.next=y:(y.next=C.next,C.next=y),f.pending=y}x!==0&&Ub(u,y,x)}}function vd(o,a,u,f){Dr[qa++]=o,Dr[qa++]=a,Dr[qa++]=u,Dr[qa++]=f,Kp|=f,o.lanes|=f,o=o.alternate,o!==null&&(o.lanes|=f)}function Yp(o,a,u,f){return vd(o,a,u,f),yd(o)}function Vs(o,a){return vd(o,null,null,a),yd(o)}function Ub(o,a,u){o.lanes|=u;var f=o.alternate;f!==null&&(f.lanes|=u);for(var y=!1,x=o.return;x!==null;)x.childLanes|=u,f=x.alternate,f!==null&&(f.childLanes|=u),x.tag===22&&(o=x.stateNode,o===null||o._visibility&1||(y=!0)),o=x,x=x.return;return o.tag===3?(x=o.stateNode,y&&a!==null&&(y=31-_n(u),o=x.hiddenUpdates,f=o[y],f===null?o[y]=[a]:f.push(a),a.lane=u|536870912),x):null}function yd(o){if(50<zc)throw zc=0,ig=null,Error(r(185));for(var a=o.return;a!==null;)o=a,a=o.return;return o.tag===3?o.stateNode:null}var Fa={};function dM(o,a,u,f){this.tag=o,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function br(o,a,u,f){return new dM(o,a,u,f)}function Xp(o){return o=o.prototype,!(!o||!o.isReactComponent)}function $i(o,a){var u=o.alternate;return u===null?(u=br(o.tag,a,o.key,o.mode),u.elementType=o.elementType,u.type=o.type,u.stateNode=o.stateNode,u.alternate=o,o.alternate=u):(u.pendingProps=a,u.type=o.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=o.flags&65011712,u.childLanes=o.childLanes,u.lanes=o.lanes,u.child=o.child,u.memoizedProps=o.memoizedProps,u.memoizedState=o.memoizedState,u.updateQueue=o.updateQueue,a=o.dependencies,u.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},u.sibling=o.sibling,u.index=o.index,u.ref=o.ref,u.refCleanup=o.refCleanup,u}function Hb(o,a){o.flags&=65011714;var u=o.alternate;return u===null?(o.childLanes=0,o.lanes=a,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=u.childLanes,o.lanes=u.lanes,o.child=u.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=u.memoizedProps,o.memoizedState=u.memoizedState,o.updateQueue=u.updateQueue,o.type=u.type,a=u.dependencies,o.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),o}function bd(o,a,u,f,y,x){var C=0;if(f=o,typeof o=="function")Xp(o)&&(C=1);else if(typeof o=="string")C=gj(o,u,Le.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case V:return o=br(31,u,a,y),o.elementType=V,o.lanes=x,o;case k:return Ws(u.children,y,x,a);case E:C=8,y|=24;break;case w:return o=br(12,u,a,y|2),o.elementType=w,o.lanes=x,o;case O:return o=br(13,u,a,y),o.elementType=O,o.lanes=x,o;case D:return o=br(19,u,a,y),o.elementType=D,o.lanes=x,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case _:C=10;break e;case T:C=9;break e;case R:C=11;break e;case I:C=14;break e;case H:C=16,f=null;break e}C=29,u=Error(r(130,o===null?"null":typeof o,"")),f=null}return a=br(C,u,a,y),a.elementType=o,a.type=f,a.lanes=x,a}function Ws(o,a,u,f){return o=br(7,o,f,a),o.lanes=u,o}function Jp(o,a,u){return o=br(6,o,null,a),o.lanes=u,o}function qb(o){var a=br(18,null,null,0);return a.stateNode=o,a}function Qp(o,a,u){return a=br(4,o.children!==null?o.children:[],o.key,a),a.lanes=u,a.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},a}var Fb=new WeakMap;function zr(o,a){if(typeof o=="object"&&o!==null){var u=Fb.get(o);return u!==void 0?u:(a={value:o,source:a,stack:jr(a)},Fb.set(o,a),a)}return{value:o,source:a,stack:jr(a)}}var Va=[],Wa=0,xd=null,pc=0,Lr=[],Ir=0,Do=null,bi=1,xi="";function Gi(o,a){Va[Wa++]=pc,Va[Wa++]=xd,xd=o,pc=a}function Vb(o,a,u){Lr[Ir++]=bi,Lr[Ir++]=xi,Lr[Ir++]=Do,Do=o;var f=bi;o=xi;var y=32-_n(f)-1;f&=~(1<<y),u+=1;var x=32-_n(a)+y;if(30<x){var C=y-y%5;x=(f&(1<<C)-1).toString(32),f>>=C,y-=C,bi=1<<32-_n(a)+y|u<<y|f,xi=x+o}else bi=1<<x|u<<y|f,xi=o}function Zp(o){o.return!==null&&(Gi(o,1),Vb(o,1,0))}function em(o){for(;o===xd;)xd=Va[--Wa],Va[Wa]=null,pc=Va[--Wa],Va[Wa]=null;for(;o===Do;)Do=Lr[--Ir],Lr[Ir]=null,xi=Lr[--Ir],Lr[Ir]=null,bi=Lr[--Ir],Lr[Ir]=null}function Wb(o,a){Lr[Ir++]=bi,Lr[Ir++]=xi,Lr[Ir++]=Do,bi=a.id,xi=a.overflow,Do=o}var zn=null,qt=null,vt=!1,zo=null,Pr=!1,tm=Error(r(519));function Lo(o){var a=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw mc(zr(a,o)),tm}function $b(o){var a=o.stateNode,u=o.type,f=o.memoizedProps;switch(a[pn]=o,a[Dn]=f,u){case"dialog":ft("cancel",a),ft("close",a);break;case"iframe":case"object":case"embed":ft("load",a);break;case"video":case"audio":for(u=0;u<Ic.length;u++)ft(Ic[u],a);break;case"source":ft("error",a);break;case"img":case"image":case"link":ft("error",a),ft("load",a);break;case"details":ft("toggle",a);break;case"input":ft("invalid",a),P(a,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0);break;case"select":ft("invalid",a);break;case"textarea":ft("invalid",a),Me(a,f.value,f.defaultValue,f.children)}u=f.children,typeof u!="string"&&typeof u!="number"&&typeof u!="bigint"||a.textContent===""+u||f.suppressHydrationWarning===!0||cS(a.textContent,u)?(f.popover!=null&&(ft("beforetoggle",a),ft("toggle",a)),f.onScroll!=null&&ft("scroll",a),f.onScrollEnd!=null&&ft("scrollend",a),f.onClick!=null&&(a.onclick=De),a=!0):a=!1,a||Lo(o,!0)}function Gb(o){for(zn=o.return;zn;)switch(zn.tag){case 5:case 31:case 13:Pr=!1;return;case 27:case 3:Pr=!0;return;default:zn=zn.return}}function $a(o){if(o!==zn)return!1;if(!vt)return Gb(o),vt=!0,!1;var a=o.tag,u;if((u=a!==3&&a!==27)&&((u=a===5)&&(u=o.type,u=!(u!=="form"&&u!=="button")||bg(o.type,o.memoizedProps)),u=!u),u&&qt&&Lo(o),Gb(o),a===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));qt=yS(o)}else if(a===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(317));qt=yS(o)}else a===27?(a=qt,Xo(o.type)?(o=wg,wg=null,qt=o):qt=a):qt=zn?Ur(o.stateNode.nextSibling):null;return!0}function $s(){qt=zn=null,vt=!1}function nm(){var o=zo;return o!==null&&(dr===null?dr=o:dr.push.apply(dr,o),zo=null),o}function mc(o){zo===null?zo=[o]:zo.push(o)}var rm=Se(null),Gs=null,Ki=null;function Io(o,a,u){he(rm,a._currentValue),a._currentValue=u}function Yi(o){o._currentValue=rm.current,ge(rm)}function im(o,a,u){for(;o!==null;){var f=o.alternate;if((o.childLanes&a)!==a?(o.childLanes|=a,f!==null&&(f.childLanes|=a)):f!==null&&(f.childLanes&a)!==a&&(f.childLanes|=a),o===u)break;o=o.return}}function om(o,a,u,f){var y=o.child;for(y!==null&&(y.return=o);y!==null;){var x=y.dependencies;if(x!==null){var C=y.child;x=x.firstContext;e:for(;x!==null;){var M=x;x=y;for(var L=0;L<a.length;L++)if(M.context===a[L]){x.lanes|=u,M=x.alternate,M!==null&&(M.lanes|=u),im(x.return,u,o),f||(C=null);break e}x=M.next}}else if(y.tag===18){if(C=y.return,C===null)throw Error(r(341));C.lanes|=u,x=C.alternate,x!==null&&(x.lanes|=u),im(C,u,o),C=null}else C=y.child;if(C!==null)C.return=y;else for(C=y;C!==null;){if(C===o){C=null;break}if(y=C.sibling,y!==null){y.return=C.return,C=y;break}C=C.return}y=C}}function Ga(o,a,u,f){o=null;for(var y=a,x=!1;y!==null;){if(!x){if((y.flags&524288)!==0)x=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var C=y.alternate;if(C===null)throw Error(r(387));if(C=C.memoizedProps,C!==null){var M=y.type;yr(y.pendingProps.value,C.value)||(o!==null?o.push(M):o=[M])}}else if(y===Kt.current){if(C=y.alternate,C===null)throw Error(r(387));C.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(o!==null?o.push(qc):o=[qc])}y=y.return}o!==null&&om(a,o,u,f),a.flags|=262144}function Sd(o){for(o=o.firstContext;o!==null;){if(!yr(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function Ks(o){Gs=o,Ki=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Ln(o){return Kb(Gs,o)}function Ed(o,a){return Gs===null&&Ks(o),Kb(o,a)}function Kb(o,a){var u=a._currentValue;if(a={context:a,memoizedValue:u,next:null},Ki===null){if(o===null)throw Error(r(308));Ki=a,o.dependencies={lanes:0,firstContext:a},o.flags|=524288}else Ki=Ki.next=a;return u}var fM=typeof AbortController<"u"?AbortController:function(){var o=[],a=this.signal={aborted:!1,addEventListener:function(u,f){o.push(f)}};this.abort=function(){a.aborted=!0,o.forEach(function(u){return u()})}},hM=t.unstable_scheduleCallback,pM=t.unstable_NormalPriority,gn={$$typeof:_,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function sm(){return{controller:new fM,data:new Map,refCount:0}}function gc(o){o.refCount--,o.refCount===0&&hM(pM,function(){o.controller.abort()})}var vc=null,am=0,Ka=0,Xa=null;function mM(o,a){if(vc===null){var u=vc=[];am=0,Ka=ug(),Xa={status:"pending",value:void 0,then:function(f){u.push(f)}}}return am++,a.then(Yb,Yb),a}function Yb(){if(--am===0&&vc!==null){Xa!==null&&(Xa.status="fulfilled");var o=vc;vc=null,Ka=0,Xa=null;for(var a=0;a<o.length;a++)(0,o[a])()}}function gM(o,a){var u=[],f={status:"pending",value:null,reason:null,then:function(y){u.push(y)}};return o.then(function(){f.status="fulfilled",f.value=a;for(var y=0;y<u.length;y++)(0,u[y])(a)},function(y){for(f.status="rejected",f.reason=y,y=0;y<u.length;y++)(0,u[y])(void 0)}),f}var Xb=q.S;q.S=function(o,a){Nx=Pe(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&mM(o,a),Xb!==null&&Xb(o,a)};var Ys=Se(null);function lm(){var o=Ys.current;return o!==null?o:Lt.pooledCache}function kd(o,a){a===null?he(Ys,Ys.current):he(Ys,a.pool)}function Jb(){var o=lm();return o===null?null:{parent:gn._currentValue,pool:o}}var Ja=Error(r(460)),cm=Error(r(474)),wd=Error(r(542)),Cd={then:function(){}};function Qb(o){return o=o.status,o==="fulfilled"||o==="rejected"}function Zb(o,a,u){switch(u=o[u],u===void 0?o.push(a):u!==a&&(a.then(De,De),a=u),a.status){case"fulfilled":return a.value;case"rejected":throw o=a.reason,t1(o),o;default:if(typeof a.status=="string")a.then(De,De);else{if(o=Lt,o!==null&&100<o.shellSuspendCounter)throw Error(r(482));o=a,o.status="pending",o.then(function(f){if(a.status==="pending"){var y=a;y.status="fulfilled",y.value=f}},function(f){if(a.status==="pending"){var y=a;y.status="rejected",y.reason=f}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw o=a.reason,t1(o),o}throw Js=a,Ja}}function Xs(o){try{var a=o._init;return a(o._payload)}catch(u){throw u!==null&&typeof u=="object"&&typeof u.then=="function"?(Js=u,Ja):u}}var Js=null;function e1(){if(Js===null)throw Error(r(459));var o=Js;return Js=null,o}function t1(o){if(o===Ja||o===wd)throw Error(r(483))}var Qa=null,yc=0;function Td(o){var a=yc;return yc+=1,Qa===null&&(Qa=[]),Zb(Qa,o,a)}function bc(o,a){a=a.props.ref,o.ref=a!==void 0?a:null}function _d(o,a){throw a.$$typeof===v?Error(r(525)):(o=Object.prototype.toString.call(a),Error(r(31,o==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":o)))}function n1(o){function a(U,B){if(o){var F=U.deletions;F===null?(U.deletions=[B],U.flags|=16):F.push(B)}}function u(U,B){if(!o)return null;for(;B!==null;)a(U,B),B=B.sibling;return null}function f(U){for(var B=new Map;U!==null;)U.key!==null?B.set(U.key,U):B.set(U.index,U),U=U.sibling;return B}function y(U,B){return U=$i(U,B),U.index=0,U.sibling=null,U}function x(U,B,F){return U.index=F,o?(F=U.alternate,F!==null?(F=F.index,F<B?(U.flags|=67108866,B):F):(U.flags|=67108866,B)):(U.flags|=1048576,B)}function C(U){return o&&U.alternate===null&&(U.flags|=67108866),U}function M(U,B,F,Z){return B===null||B.tag!==6?(B=Jp(F,U.mode,Z),B.return=U,B):(B=y(B,F),B.return=U,B)}function L(U,B,F,Z){var Ue=F.type;return Ue===k?J(U,B,F.props.children,Z,F.key):B!==null&&(B.elementType===Ue||typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===H&&Xs(Ue)===B.type)?(B=y(B,F.props),bc(B,F),B.return=U,B):(B=bd(F.type,F.key,F.props,null,U.mode,Z),bc(B,F),B.return=U,B)}function W(U,B,F,Z){return B===null||B.tag!==4||B.stateNode.containerInfo!==F.containerInfo||B.stateNode.implementation!==F.implementation?(B=Qp(F,U.mode,Z),B.return=U,B):(B=y(B,F.children||[]),B.return=U,B)}function J(U,B,F,Z,Ue){return B===null||B.tag!==7?(B=Ws(F,U.mode,Z,Ue),B.return=U,B):(B=y(B,F),B.return=U,B)}function ee(U,B,F){if(typeof B=="string"&&B!==""||typeof B=="number"||typeof B=="bigint")return B=Jp(""+B,U.mode,F),B.return=U,B;if(typeof B=="object"&&B!==null){switch(B.$$typeof){case b:return F=bd(B.type,B.key,B.props,null,U.mode,F),bc(F,B),F.return=U,F;case S:return B=Qp(B,U.mode,F),B.return=U,B;case H:return B=Xs(B),ee(U,B,F)}if(me(B)||re(B))return B=Ws(B,U.mode,F,null),B.return=U,B;if(typeof B.then=="function")return ee(U,Td(B),F);if(B.$$typeof===_)return ee(U,Ed(U,B),F);_d(U,B)}return null}function $(U,B,F,Z){var Ue=B!==null?B.key:null;if(typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint")return Ue!==null?null:M(U,B,""+F,Z);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case b:return F.key===Ue?L(U,B,F,Z):null;case S:return F.key===Ue?W(U,B,F,Z):null;case H:return F=Xs(F),$(U,B,F,Z)}if(me(F)||re(F))return Ue!==null?null:J(U,B,F,Z,null);if(typeof F.then=="function")return $(U,B,Td(F),Z);if(F.$$typeof===_)return $(U,B,Ed(U,F),Z);_d(U,F)}return null}function Y(U,B,F,Z,Ue){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return U=U.get(F)||null,M(B,U,""+Z,Ue);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case b:return U=U.get(Z.key===null?F:Z.key)||null,L(B,U,Z,Ue);case S:return U=U.get(Z.key===null?F:Z.key)||null,W(B,U,Z,Ue);case H:return Z=Xs(Z),Y(U,B,F,Z,Ue)}if(me(Z)||re(Z))return U=U.get(F)||null,J(B,U,Z,Ue,null);if(typeof Z.then=="function")return Y(U,B,F,Td(Z),Ue);if(Z.$$typeof===_)return Y(U,B,F,Ed(B,Z),Ue);_d(B,Z)}return null}function je(U,B,F,Z){for(var Ue=null,Et=null,ze=B,nt=B=0,mt=null;ze!==null&&nt<F.length;nt++){ze.index>nt?(mt=ze,ze=null):mt=ze.sibling;var kt=$(U,ze,F[nt],Z);if(kt===null){ze===null&&(ze=mt);break}o&&ze&&kt.alternate===null&&a(U,ze),B=x(kt,B,nt),Et===null?Ue=kt:Et.sibling=kt,Et=kt,ze=mt}if(nt===F.length)return u(U,ze),vt&&Gi(U,nt),Ue;if(ze===null){for(;nt<F.length;nt++)ze=ee(U,F[nt],Z),ze!==null&&(B=x(ze,B,nt),Et===null?Ue=ze:Et.sibling=ze,Et=ze);return vt&&Gi(U,nt),Ue}for(ze=f(ze);nt<F.length;nt++)mt=Y(ze,U,nt,F[nt],Z),mt!==null&&(o&&mt.alternate!==null&&ze.delete(mt.key===null?nt:mt.key),B=x(mt,B,nt),Et===null?Ue=mt:Et.sibling=mt,Et=mt);return o&&ze.forEach(function(ts){return a(U,ts)}),vt&&Gi(U,nt),Ue}function Ve(U,B,F,Z){if(F==null)throw Error(r(151));for(var Ue=null,Et=null,ze=B,nt=B=0,mt=null,kt=F.next();ze!==null&&!kt.done;nt++,kt=F.next()){ze.index>nt?(mt=ze,ze=null):mt=ze.sibling;var ts=$(U,ze,kt.value,Z);if(ts===null){ze===null&&(ze=mt);break}o&&ze&&ts.alternate===null&&a(U,ze),B=x(ts,B,nt),Et===null?Ue=ts:Et.sibling=ts,Et=ts,ze=mt}if(kt.done)return u(U,ze),vt&&Gi(U,nt),Ue;if(ze===null){for(;!kt.done;nt++,kt=F.next())kt=ee(U,kt.value,Z),kt!==null&&(B=x(kt,B,nt),Et===null?Ue=kt:Et.sibling=kt,Et=kt);return vt&&Gi(U,nt),Ue}for(ze=f(ze);!kt.done;nt++,kt=F.next())kt=Y(ze,U,nt,kt.value,Z),kt!==null&&(o&&kt.alternate!==null&&ze.delete(kt.key===null?nt:kt.key),B=x(kt,B,nt),Et===null?Ue=kt:Et.sibling=kt,Et=kt);return o&&ze.forEach(function(_j){return a(U,_j)}),vt&&Gi(U,nt),Ue}function zt(U,B,F,Z){if(typeof F=="object"&&F!==null&&F.type===k&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case b:e:{for(var Ue=F.key;B!==null;){if(B.key===Ue){if(Ue=F.type,Ue===k){if(B.tag===7){u(U,B.sibling),Z=y(B,F.props.children),Z.return=U,U=Z;break e}}else if(B.elementType===Ue||typeof Ue=="object"&&Ue!==null&&Ue.$$typeof===H&&Xs(Ue)===B.type){u(U,B.sibling),Z=y(B,F.props),bc(Z,F),Z.return=U,U=Z;break e}u(U,B);break}else a(U,B);B=B.sibling}F.type===k?(Z=Ws(F.props.children,U.mode,Z,F.key),Z.return=U,U=Z):(Z=bd(F.type,F.key,F.props,null,U.mode,Z),bc(Z,F),Z.return=U,U=Z)}return C(U);case S:e:{for(Ue=F.key;B!==null;){if(B.key===Ue)if(B.tag===4&&B.stateNode.containerInfo===F.containerInfo&&B.stateNode.implementation===F.implementation){u(U,B.sibling),Z=y(B,F.children||[]),Z.return=U,U=Z;break e}else{u(U,B);break}else a(U,B);B=B.sibling}Z=Qp(F,U.mode,Z),Z.return=U,U=Z}return C(U);case H:return F=Xs(F),zt(U,B,F,Z)}if(me(F))return je(U,B,F,Z);if(re(F)){if(Ue=re(F),typeof Ue!="function")throw Error(r(150));return F=Ue.call(F),Ve(U,B,F,Z)}if(typeof F.then=="function")return zt(U,B,Td(F),Z);if(F.$$typeof===_)return zt(U,B,Ed(U,F),Z);_d(U,F)}return typeof F=="string"&&F!==""||typeof F=="number"||typeof F=="bigint"?(F=""+F,B!==null&&B.tag===6?(u(U,B.sibling),Z=y(B,F),Z.return=U,U=Z):(u(U,B),Z=Jp(F,U.mode,Z),Z.return=U,U=Z),C(U)):u(U,B)}return function(U,B,F,Z){try{yc=0;var Ue=zt(U,B,F,Z);return Qa=null,Ue}catch(ze){if(ze===Ja||ze===wd)throw ze;var Et=br(29,ze,null,U.mode);return Et.lanes=Z,Et.return=U,Et}finally{}}}var Qs=n1(!0),r1=n1(!1),Po=!1;function um(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function dm(o,a){o=o.updateQueue,a.updateQueue===o&&(a.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function Bo(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function Uo(o,a,u){var f=o.updateQueue;if(f===null)return null;if(f=f.shared,(Tt&2)!==0){var y=f.pending;return y===null?a.next=a:(a.next=y.next,y.next=a),f.pending=a,a=yd(o),Ub(o,null,u),a}return vd(o,f,a,u),yd(o)}function xc(o,a,u){if(a=a.updateQueue,a!==null&&(a=a.shared,(u&4194048)!==0)){var f=a.lanes;f&=o.pendingLanes,u|=f,a.lanes=u,id(o,u)}}function fm(o,a){var u=o.updateQueue,f=o.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var y=null,x=null;if(u=u.firstBaseUpdate,u!==null){do{var C={lane:u.lane,tag:u.tag,payload:u.payload,callback:null,next:null};x===null?y=x=C:x=x.next=C,u=u.next}while(u!==null);x===null?y=x=a:x=x.next=a}else y=x=a;u={baseState:f.baseState,firstBaseUpdate:y,lastBaseUpdate:x,shared:f.shared,callbacks:f.callbacks},o.updateQueue=u;return}o=u.lastBaseUpdate,o===null?u.firstBaseUpdate=a:o.next=a,u.lastBaseUpdate=a}var hm=!1;function Sc(){if(hm){var o=Xa;if(o!==null)throw o}}function Ec(o,a,u,f){hm=!1;var y=o.updateQueue;Po=!1;var x=y.firstBaseUpdate,C=y.lastBaseUpdate,M=y.shared.pending;if(M!==null){y.shared.pending=null;var L=M,W=L.next;L.next=null,C===null?x=W:C.next=W,C=L;var J=o.alternate;J!==null&&(J=J.updateQueue,M=J.lastBaseUpdate,M!==C&&(M===null?J.firstBaseUpdate=W:M.next=W,J.lastBaseUpdate=L))}if(x!==null){var ee=y.baseState;C=0,J=W=L=null,M=x;do{var $=M.lane&-536870913,Y=$!==M.lane;if(Y?(pt&$)===$:(f&$)===$){$!==0&&$===Ka&&(hm=!0),J!==null&&(J=J.next={lane:0,tag:M.tag,payload:M.payload,callback:null,next:null});e:{var je=o,Ve=M;$=a;var zt=u;switch(Ve.tag){case 1:if(je=Ve.payload,typeof je=="function"){ee=je.call(zt,ee,$);break e}ee=je;break e;case 3:je.flags=je.flags&-65537|128;case 0:if(je=Ve.payload,$=typeof je=="function"?je.call(zt,ee,$):je,$==null)break e;ee=g({},ee,$);break e;case 2:Po=!0}}$=M.callback,$!==null&&(o.flags|=64,Y&&(o.flags|=8192),Y=y.callbacks,Y===null?y.callbacks=[$]:Y.push($))}else Y={lane:$,tag:M.tag,payload:M.payload,callback:M.callback,next:null},J===null?(W=J=Y,L=ee):J=J.next=Y,C|=$;if(M=M.next,M===null){if(M=y.shared.pending,M===null)break;Y=M,M=Y.next,Y.next=null,y.lastBaseUpdate=Y,y.shared.pending=null}}while(!0);J===null&&(L=ee),y.baseState=L,y.firstBaseUpdate=W,y.lastBaseUpdate=J,x===null&&(y.shared.lanes=0),Wo|=C,o.lanes=C,o.memoizedState=ee}}function i1(o,a){if(typeof o!="function")throw Error(r(191,o));o.call(a)}function o1(o,a){var u=o.callbacks;if(u!==null)for(o.callbacks=null,o=0;o<u.length;o++)i1(u[o],a)}var Za=Se(null),Ad=Se(0);function s1(o,a){o=io,he(Ad,o),he(Za,a),io=o|a.baseLanes}function pm(){he(Ad,io),he(Za,Za.current)}function mm(){io=Ad.current,ge(Za),ge(Ad)}var xr=Se(null),Br=null;function Ho(o){var a=o.alternate;he(dn,dn.current&1),he(xr,o),Br===null&&(a===null||Za.current!==null||a.memoizedState!==null)&&(Br=o)}function gm(o){he(dn,dn.current),he(xr,o),Br===null&&(Br=o)}function a1(o){o.tag===22?(he(dn,dn.current),he(xr,o),Br===null&&(Br=o)):qo()}function qo(){he(dn,dn.current),he(xr,xr.current)}function Sr(o){ge(xr),Br===o&&(Br=null),ge(dn)}var dn=Se(0);function Md(o){for(var a=o;a!==null;){if(a.tag===13){var u=a.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||Eg(u)||kg(u)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break;for(;a.sibling===null;){if(a.return===null||a.return===o)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var Xi=0,et=null,Nt=null,vn=null,jd=!1,el=!1,Zs=!1,Od=0,kc=0,tl=null,vM=0;function sn(){throw Error(r(321))}function vm(o,a){if(a===null)return!1;for(var u=0;u<a.length&&u<o.length;u++)if(!yr(o[u],a[u]))return!1;return!0}function ym(o,a,u,f,y,x){return Xi=x,et=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,q.H=o===null||o.memoizedState===null?V1:Nm,Zs=!1,x=u(f,y),Zs=!1,el&&(x=c1(a,u,f,y)),l1(o),x}function l1(o){q.H=Tc;var a=Nt!==null&&Nt.next!==null;if(Xi=0,vn=Nt=et=null,jd=!1,kc=0,tl=null,a)throw Error(r(300));o===null||yn||(o=o.dependencies,o!==null&&Sd(o)&&(yn=!0))}function c1(o,a,u,f){et=o;var y=0;do{if(el&&(tl=null),kc=0,el=!1,25<=y)throw Error(r(301));if(y+=1,vn=Nt=null,o.updateQueue!=null){var x=o.updateQueue;x.lastEffect=null,x.events=null,x.stores=null,x.memoCache!=null&&(x.memoCache.index=0)}q.H=W1,x=a(u,f)}while(el);return x}function yM(){var o=q.H,a=o.useState()[0];return a=typeof a.then=="function"?wc(a):a,o=o.useState()[0],(Nt!==null?Nt.memoizedState:null)!==o&&(et.flags|=1024),a}function bm(){var o=Od!==0;return Od=0,o}function xm(o,a,u){a.updateQueue=o.updateQueue,a.flags&=-2053,o.lanes&=~u}function Sm(o){if(jd){for(o=o.memoizedState;o!==null;){var a=o.queue;a!==null&&(a.pending=null),o=o.next}jd=!1}Xi=0,vn=Nt=et=null,el=!1,kc=Od=0,tl=null}function Zn(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return vn===null?et.memoizedState=vn=o:vn=vn.next=o,vn}function fn(){if(Nt===null){var o=et.alternate;o=o!==null?o.memoizedState:null}else o=Nt.next;var a=vn===null?et.memoizedState:vn.next;if(a!==null)vn=a,Nt=o;else{if(o===null)throw et.alternate===null?Error(r(467)):Error(r(310));Nt=o,o={memoizedState:Nt.memoizedState,baseState:Nt.baseState,baseQueue:Nt.baseQueue,queue:Nt.queue,next:null},vn===null?et.memoizedState=vn=o:vn=vn.next=o}return vn}function Rd(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function wc(o){var a=kc;return kc+=1,tl===null&&(tl=[]),o=Zb(tl,o,a),a=et,(vn===null?a.memoizedState:vn.next)===null&&(a=a.alternate,q.H=a===null||a.memoizedState===null?V1:Nm),o}function Nd(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return wc(o);if(o.$$typeof===_)return Ln(o)}throw Error(r(438,String(o)))}function Em(o){var a=null,u=et.updateQueue;if(u!==null&&(a=u.memoCache),a==null){var f=et.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(a={data:f.data.map(function(y){return y.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),u===null&&(u=Rd(),et.updateQueue=u),u.memoCache=a,u=a.data[a.index],u===void 0)for(u=a.data[a.index]=Array(o),f=0;f<o;f++)u[f]=K;return a.index++,u}function Ji(o,a){return typeof a=="function"?a(o):a}function Dd(o){var a=fn();return km(a,Nt,o)}function km(o,a,u){var f=o.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=u;var y=o.baseQueue,x=f.pending;if(x!==null){if(y!==null){var C=y.next;y.next=x.next,x.next=C}a.baseQueue=y=x,f.pending=null}if(x=o.baseState,y===null)o.memoizedState=x;else{a=y.next;var M=C=null,L=null,W=a,J=!1;do{var ee=W.lane&-536870913;if(ee!==W.lane?(pt&ee)===ee:(Xi&ee)===ee){var $=W.revertLane;if($===0)L!==null&&(L=L.next={lane:0,revertLane:0,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null}),ee===Ka&&(J=!0);else if((Xi&$)===$){W=W.next,$===Ka&&(J=!0);continue}else ee={lane:0,revertLane:W.revertLane,gesture:null,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},L===null?(M=L=ee,C=x):L=L.next=ee,et.lanes|=$,Wo|=$;ee=W.action,Zs&&u(x,ee),x=W.hasEagerState?W.eagerState:u(x,ee)}else $={lane:ee,revertLane:W.revertLane,gesture:W.gesture,action:W.action,hasEagerState:W.hasEagerState,eagerState:W.eagerState,next:null},L===null?(M=L=$,C=x):L=L.next=$,et.lanes|=ee,Wo|=ee;W=W.next}while(W!==null&&W!==a);if(L===null?C=x:L.next=M,!yr(x,o.memoizedState)&&(yn=!0,J&&(u=Xa,u!==null)))throw u;o.memoizedState=x,o.baseState=C,o.baseQueue=L,f.lastRenderedState=x}return y===null&&(f.lanes=0),[o.memoizedState,f.dispatch]}function wm(o){var a=fn(),u=a.queue;if(u===null)throw Error(r(311));u.lastRenderedReducer=o;var f=u.dispatch,y=u.pending,x=a.memoizedState;if(y!==null){u.pending=null;var C=y=y.next;do x=o(x,C.action),C=C.next;while(C!==y);yr(x,a.memoizedState)||(yn=!0),a.memoizedState=x,a.baseQueue===null&&(a.baseState=x),u.lastRenderedState=x}return[x,f]}function u1(o,a,u){var f=et,y=fn(),x=vt;if(x){if(u===void 0)throw Error(r(407));u=u()}else u=a();var C=!yr((Nt||y).memoizedState,u);if(C&&(y.memoizedState=u,yn=!0),y=y.queue,_m(h1.bind(null,f,y,o),[o]),y.getSnapshot!==a||C||vn!==null&&vn.memoizedState.tag&1){if(f.flags|=2048,nl(9,{destroy:void 0},f1.bind(null,f,y,u,a),null),Lt===null)throw Error(r(349));x||(Xi&127)!==0||d1(f,a,u)}return u}function d1(o,a,u){o.flags|=16384,o={getSnapshot:a,value:u},a=et.updateQueue,a===null?(a=Rd(),et.updateQueue=a,a.stores=[o]):(u=a.stores,u===null?a.stores=[o]:u.push(o))}function f1(o,a,u,f){a.value=u,a.getSnapshot=f,p1(a)&&m1(o)}function h1(o,a,u){return u(function(){p1(a)&&m1(o)})}function p1(o){var a=o.getSnapshot;o=o.value;try{var u=a();return!yr(o,u)}catch{return!0}}function m1(o){var a=Vs(o,2);a!==null&&fr(a,o,2)}function Cm(o){var a=Zn();if(typeof o=="function"){var u=o;if(o=u(),Zs){Rr(!0);try{u()}finally{Rr(!1)}}}return a.memoizedState=a.baseState=o,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ji,lastRenderedState:o},a}function g1(o,a,u,f){return o.baseState=u,km(o,Nt,typeof f=="function"?f:Ji)}function bM(o,a,u,f,y){if(Id(o))throw Error(r(485));if(o=a.action,o!==null){var x={payload:y,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(C){x.listeners.push(C)}};q.T!==null?u(!0):x.isTransition=!1,f(x),u=a.pending,u===null?(x.next=a.pending=x,v1(a,x)):(x.next=u.next,a.pending=u.next=x)}}function v1(o,a){var u=a.action,f=a.payload,y=o.state;if(a.isTransition){var x=q.T,C={};q.T=C;try{var M=u(y,f),L=q.S;L!==null&&L(C,M),y1(o,a,M)}catch(W){Tm(o,a,W)}finally{x!==null&&C.types!==null&&(x.types=C.types),q.T=x}}else try{x=u(y,f),y1(o,a,x)}catch(W){Tm(o,a,W)}}function y1(o,a,u){u!==null&&typeof u=="object"&&typeof u.then=="function"?u.then(function(f){b1(o,a,f)},function(f){return Tm(o,a,f)}):b1(o,a,u)}function b1(o,a,u){a.status="fulfilled",a.value=u,x1(a),o.state=u,a=o.pending,a!==null&&(u=a.next,u===a?o.pending=null:(u=u.next,a.next=u,v1(o,u)))}function Tm(o,a,u){var f=o.pending;if(o.pending=null,f!==null){f=f.next;do a.status="rejected",a.reason=u,x1(a),a=a.next;while(a!==f)}o.action=null}function x1(o){o=o.listeners;for(var a=0;a<o.length;a++)(0,o[a])()}function S1(o,a){return a}function E1(o,a){if(vt){var u=Lt.formState;if(u!==null){e:{var f=et;if(vt){if(qt){t:{for(var y=qt,x=Pr;y.nodeType!==8;){if(!x){y=null;break t}if(y=Ur(y.nextSibling),y===null){y=null;break t}}x=y.data,y=x==="F!"||x==="F"?y:null}if(y){qt=Ur(y.nextSibling),f=y.data==="F!";break e}}Lo(f)}f=!1}f&&(a=u[0])}}return u=Zn(),u.memoizedState=u.baseState=a,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:S1,lastRenderedState:a},u.queue=f,u=H1.bind(null,et,f),f.dispatch=u,f=Cm(!1),x=Rm.bind(null,et,!1,f.queue),f=Zn(),y={state:a,dispatch:null,action:o,pending:null},f.queue=y,u=bM.bind(null,et,y,x,u),y.dispatch=u,f.memoizedState=o,[a,u,!1]}function k1(o){var a=fn();return w1(a,Nt,o)}function w1(o,a,u){if(a=km(o,a,S1)[0],o=Dd(Ji)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var f=wc(a)}catch(C){throw C===Ja?wd:C}else f=a;a=fn();var y=a.queue,x=y.dispatch;return u!==a.memoizedState&&(et.flags|=2048,nl(9,{destroy:void 0},xM.bind(null,y,u),null)),[f,x,o]}function xM(o,a){o.action=a}function C1(o){var a=fn(),u=Nt;if(u!==null)return w1(a,u,o);fn(),a=a.memoizedState,u=fn();var f=u.queue.dispatch;return u.memoizedState=o,[a,f,!1]}function nl(o,a,u,f){return o={tag:o,create:u,deps:f,inst:a,next:null},a=et.updateQueue,a===null&&(a=Rd(),et.updateQueue=a),u=a.lastEffect,u===null?a.lastEffect=o.next=o:(f=u.next,u.next=o,o.next=f,a.lastEffect=o),o}function T1(){return fn().memoizedState}function zd(o,a,u,f){var y=Zn();et.flags|=o,y.memoizedState=nl(1|a,{destroy:void 0},u,f===void 0?null:f)}function Ld(o,a,u,f){var y=fn();f=f===void 0?null:f;var x=y.memoizedState.inst;Nt!==null&&f!==null&&vm(f,Nt.memoizedState.deps)?y.memoizedState=nl(a,x,u,f):(et.flags|=o,y.memoizedState=nl(1|a,x,u,f))}function _1(o,a){zd(8390656,8,o,a)}function _m(o,a){Ld(2048,8,o,a)}function SM(o){et.flags|=4;var a=et.updateQueue;if(a===null)a=Rd(),et.updateQueue=a,a.events=[o];else{var u=a.events;u===null?a.events=[o]:u.push(o)}}function A1(o){var a=fn().memoizedState;return SM({ref:a,nextImpl:o}),function(){if((Tt&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}function M1(o,a){return Ld(4,2,o,a)}function j1(o,a){return Ld(4,4,o,a)}function O1(o,a){if(typeof a=="function"){o=o();var u=a(o);return function(){typeof u=="function"?u():a(null)}}if(a!=null)return o=o(),a.current=o,function(){a.current=null}}function R1(o,a,u){u=u!=null?u.concat([o]):null,Ld(4,4,O1.bind(null,a,o),u)}function Am(){}function N1(o,a){var u=fn();a=a===void 0?null:a;var f=u.memoizedState;return a!==null&&vm(a,f[1])?f[0]:(u.memoizedState=[o,a],o)}function D1(o,a){var u=fn();a=a===void 0?null:a;var f=u.memoizedState;if(a!==null&&vm(a,f[1]))return f[0];if(f=o(),Zs){Rr(!0);try{o()}finally{Rr(!1)}}return u.memoizedState=[f,a],f}function Mm(o,a,u){return u===void 0||(Xi&1073741824)!==0&&(pt&261930)===0?o.memoizedState=a:(o.memoizedState=u,o=zx(),et.lanes|=o,Wo|=o,u)}function z1(o,a,u,f){return yr(u,a)?u:Za.current!==null?(o=Mm(o,u,f),yr(o,a)||(yn=!0),o):(Xi&42)===0||(Xi&1073741824)!==0&&(pt&261930)===0?(yn=!0,o.memoizedState=u):(o=zx(),et.lanes|=o,Wo|=o,a)}function L1(o,a,u,f,y){var x=te.p;te.p=x!==0&&8>x?x:8;var C=q.T,M={};q.T=M,Rm(o,!1,a,u);try{var L=y(),W=q.S;if(W!==null&&W(M,L),L!==null&&typeof L=="object"&&typeof L.then=="function"){var J=gM(L,f);Cc(o,a,J,wr(o))}else Cc(o,a,f,wr(o))}catch(ee){Cc(o,a,{then:function(){},status:"rejected",reason:ee},wr())}finally{te.p=x,C!==null&&M.types!==null&&(C.types=M.types),q.T=C}}function EM(){}function jm(o,a,u,f){if(o.tag!==5)throw Error(r(476));var y=I1(o).queue;L1(o,y,a,ue,u===null?EM:function(){return P1(o),u(f)})}function I1(o){var a=o.memoizedState;if(a!==null)return a;a={memoizedState:ue,baseState:ue,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ji,lastRenderedState:ue},next:null};var u={};return a.next={memoizedState:u,baseState:u,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ji,lastRenderedState:u},next:null},o.memoizedState=a,o=o.alternate,o!==null&&(o.memoizedState=a),a}function P1(o){var a=I1(o);a.next===null&&(a=o.alternate.memoizedState),Cc(o,a.next.queue,{},wr())}function Om(){return Ln(qc)}function B1(){return fn().memoizedState}function U1(){return fn().memoizedState}function kM(o){for(var a=o.return;a!==null;){switch(a.tag){case 24:case 3:var u=wr();o=Bo(u);var f=Uo(a,o,u);f!==null&&(fr(f,a,u),xc(f,a,u)),a={cache:sm()},o.payload=a;return}a=a.return}}function wM(o,a,u){var f=wr();u={lane:f,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null},Id(o)?q1(a,u):(u=Yp(o,a,u,f),u!==null&&(fr(u,o,f),F1(u,a,f)))}function H1(o,a,u){var f=wr();Cc(o,a,u,f)}function Cc(o,a,u,f){var y={lane:f,revertLane:0,gesture:null,action:u,hasEagerState:!1,eagerState:null,next:null};if(Id(o))q1(a,y);else{var x=o.alternate;if(o.lanes===0&&(x===null||x.lanes===0)&&(x=a.lastRenderedReducer,x!==null))try{var C=a.lastRenderedState,M=x(C,u);if(y.hasEagerState=!0,y.eagerState=M,yr(M,C))return vd(o,a,y,0),Lt===null&&gd(),!1}catch{}finally{}if(u=Yp(o,a,y,f),u!==null)return fr(u,o,f),F1(u,a,f),!0}return!1}function Rm(o,a,u,f){if(f={lane:2,revertLane:ug(),gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},Id(o)){if(a)throw Error(r(479))}else a=Yp(o,u,f,2),a!==null&&fr(a,o,2)}function Id(o){var a=o.alternate;return o===et||a!==null&&a===et}function q1(o,a){el=jd=!0;var u=o.pending;u===null?a.next=a:(a.next=u.next,u.next=a),o.pending=a}function F1(o,a,u){if((u&4194048)!==0){var f=a.lanes;f&=o.pendingLanes,u|=f,a.lanes=u,id(o,u)}}var Tc={readContext:Ln,use:Nd,useCallback:sn,useContext:sn,useEffect:sn,useImperativeHandle:sn,useLayoutEffect:sn,useInsertionEffect:sn,useMemo:sn,useReducer:sn,useRef:sn,useState:sn,useDebugValue:sn,useDeferredValue:sn,useTransition:sn,useSyncExternalStore:sn,useId:sn,useHostTransitionStatus:sn,useFormState:sn,useActionState:sn,useOptimistic:sn,useMemoCache:sn,useCacheRefresh:sn};Tc.useEffectEvent=sn;var V1={readContext:Ln,use:Nd,useCallback:function(o,a){return Zn().memoizedState=[o,a===void 0?null:a],o},useContext:Ln,useEffect:_1,useImperativeHandle:function(o,a,u){u=u!=null?u.concat([o]):null,zd(4194308,4,O1.bind(null,a,o),u)},useLayoutEffect:function(o,a){return zd(4194308,4,o,a)},useInsertionEffect:function(o,a){zd(4,2,o,a)},useMemo:function(o,a){var u=Zn();a=a===void 0?null:a;var f=o();if(Zs){Rr(!0);try{o()}finally{Rr(!1)}}return u.memoizedState=[f,a],f},useReducer:function(o,a,u){var f=Zn();if(u!==void 0){var y=u(a);if(Zs){Rr(!0);try{u(a)}finally{Rr(!1)}}}else y=a;return f.memoizedState=f.baseState=y,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:y},f.queue=o,o=o.dispatch=wM.bind(null,et,o),[f.memoizedState,o]},useRef:function(o){var a=Zn();return o={current:o},a.memoizedState=o},useState:function(o){o=Cm(o);var a=o.queue,u=H1.bind(null,et,a);return a.dispatch=u,[o.memoizedState,u]},useDebugValue:Am,useDeferredValue:function(o,a){var u=Zn();return Mm(u,o,a)},useTransition:function(){var o=Cm(!1);return o=L1.bind(null,et,o.queue,!0,!1),Zn().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,a,u){var f=et,y=Zn();if(vt){if(u===void 0)throw Error(r(407));u=u()}else{if(u=a(),Lt===null)throw Error(r(349));(pt&127)!==0||d1(f,a,u)}y.memoizedState=u;var x={value:u,getSnapshot:a};return y.queue=x,_1(h1.bind(null,f,x,o),[o]),f.flags|=2048,nl(9,{destroy:void 0},f1.bind(null,f,x,u,a),null),u},useId:function(){var o=Zn(),a=Lt.identifierPrefix;if(vt){var u=xi,f=bi;u=(f&~(1<<32-_n(f)-1)).toString(32)+u,a="_"+a+"R_"+u,u=Od++,0<u&&(a+="H"+u.toString(32)),a+="_"}else u=vM++,a="_"+a+"r_"+u.toString(32)+"_";return o.memoizedState=a},useHostTransitionStatus:Om,useFormState:E1,useActionState:E1,useOptimistic:function(o){var a=Zn();a.memoizedState=a.baseState=o;var u={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=u,a=Rm.bind(null,et,!0,u),u.dispatch=a,[o,a]},useMemoCache:Em,useCacheRefresh:function(){return Zn().memoizedState=kM.bind(null,et)},useEffectEvent:function(o){var a=Zn(),u={impl:o};return a.memoizedState=u,function(){if((Tt&2)!==0)throw Error(r(440));return u.impl.apply(void 0,arguments)}}},Nm={readContext:Ln,use:Nd,useCallback:N1,useContext:Ln,useEffect:_m,useImperativeHandle:R1,useInsertionEffect:M1,useLayoutEffect:j1,useMemo:D1,useReducer:Dd,useRef:T1,useState:function(){return Dd(Ji)},useDebugValue:Am,useDeferredValue:function(o,a){var u=fn();return z1(u,Nt.memoizedState,o,a)},useTransition:function(){var o=Dd(Ji)[0],a=fn().memoizedState;return[typeof o=="boolean"?o:wc(o),a]},useSyncExternalStore:u1,useId:B1,useHostTransitionStatus:Om,useFormState:k1,useActionState:k1,useOptimistic:function(o,a){var u=fn();return g1(u,Nt,o,a)},useMemoCache:Em,useCacheRefresh:U1};Nm.useEffectEvent=A1;var W1={readContext:Ln,use:Nd,useCallback:N1,useContext:Ln,useEffect:_m,useImperativeHandle:R1,useInsertionEffect:M1,useLayoutEffect:j1,useMemo:D1,useReducer:wm,useRef:T1,useState:function(){return wm(Ji)},useDebugValue:Am,useDeferredValue:function(o,a){var u=fn();return Nt===null?Mm(u,o,a):z1(u,Nt.memoizedState,o,a)},useTransition:function(){var o=wm(Ji)[0],a=fn().memoizedState;return[typeof o=="boolean"?o:wc(o),a]},useSyncExternalStore:u1,useId:B1,useHostTransitionStatus:Om,useFormState:C1,useActionState:C1,useOptimistic:function(o,a){var u=fn();return Nt!==null?g1(u,Nt,o,a):(u.baseState=o,[o,u.queue.dispatch])},useMemoCache:Em,useCacheRefresh:U1};W1.useEffectEvent=A1;function Dm(o,a,u,f){a=o.memoizedState,u=u(f,a),u=u==null?a:g({},a,u),o.memoizedState=u,o.lanes===0&&(o.updateQueue.baseState=u)}var zm={enqueueSetState:function(o,a,u){o=o._reactInternals;var f=wr(),y=Bo(f);y.payload=a,u!=null&&(y.callback=u),a=Uo(o,y,f),a!==null&&(fr(a,o,f),xc(a,o,f))},enqueueReplaceState:function(o,a,u){o=o._reactInternals;var f=wr(),y=Bo(f);y.tag=1,y.payload=a,u!=null&&(y.callback=u),a=Uo(o,y,f),a!==null&&(fr(a,o,f),xc(a,o,f))},enqueueForceUpdate:function(o,a){o=o._reactInternals;var u=wr(),f=Bo(u);f.tag=2,a!=null&&(f.callback=a),a=Uo(o,f,u),a!==null&&(fr(a,o,u),xc(a,o,u))}};function $1(o,a,u,f,y,x,C){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(f,x,C):a.prototype&&a.prototype.isPureReactComponent?!fc(u,f)||!fc(y,x):!0}function G1(o,a,u,f){o=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(u,f),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(u,f),a.state!==o&&zm.enqueueReplaceState(a,a.state,null)}function ea(o,a){var u=a;if("ref"in a){u={};for(var f in a)f!=="ref"&&(u[f]=a[f])}if(o=o.defaultProps){u===a&&(u=g({},u));for(var y in o)u[y]===void 0&&(u[y]=o[y])}return u}function K1(o){md(o)}function Y1(o){console.error(o)}function X1(o){md(o)}function Pd(o,a){try{var u=o.onUncaughtError;u(a.value,{componentStack:a.stack})}catch(f){setTimeout(function(){throw f})}}function J1(o,a,u){try{var f=o.onCaughtError;f(u.value,{componentStack:u.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Lm(o,a,u){return u=Bo(u),u.tag=3,u.payload={element:null},u.callback=function(){Pd(o,a)},u}function Q1(o){return o=Bo(o),o.tag=3,o}function Z1(o,a,u,f){var y=u.type.getDerivedStateFromError;if(typeof y=="function"){var x=f.value;o.payload=function(){return y(x)},o.callback=function(){J1(a,u,f)}}var C=u.stateNode;C!==null&&typeof C.componentDidCatch=="function"&&(o.callback=function(){J1(a,u,f),typeof y!="function"&&($o===null?$o=new Set([this]):$o.add(this));var M=f.stack;this.componentDidCatch(f.value,{componentStack:M!==null?M:""})})}function CM(o,a,u,f,y){if(u.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(a=u.alternate,a!==null&&Ga(a,u,y,!0),u=xr.current,u!==null){switch(u.tag){case 31:case 13:return Br===null?Xd():u.alternate===null&&an===0&&(an=3),u.flags&=-257,u.flags|=65536,u.lanes=y,f===Cd?u.flags|=16384:(a=u.updateQueue,a===null?u.updateQueue=new Set([f]):a.add(f),ag(o,f,y)),!1;case 22:return u.flags|=65536,f===Cd?u.flags|=16384:(a=u.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([f])},u.updateQueue=a):(u=a.retryQueue,u===null?a.retryQueue=new Set([f]):u.add(f)),ag(o,f,y)),!1}throw Error(r(435,u.tag))}return ag(o,f,y),Xd(),!1}if(vt)return a=xr.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=y,f!==tm&&(o=Error(r(422),{cause:f}),mc(zr(o,u)))):(f!==tm&&(a=Error(r(423),{cause:f}),mc(zr(a,u))),o=o.current.alternate,o.flags|=65536,y&=-y,o.lanes|=y,f=zr(f,u),y=Lm(o.stateNode,f,y),fm(o,y),an!==4&&(an=2)),!1;var x=Error(r(520),{cause:f});if(x=zr(x,u),Dc===null?Dc=[x]:Dc.push(x),an!==4&&(an=2),a===null)return!0;f=zr(f,u),u=a;do{switch(u.tag){case 3:return u.flags|=65536,o=y&-y,u.lanes|=o,o=Lm(u.stateNode,f,o),fm(u,o),!1;case 1:if(a=u.type,x=u.stateNode,(u.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&($o===null||!$o.has(x))))return u.flags|=65536,y&=-y,u.lanes|=y,y=Q1(y),Z1(y,o,u,f),fm(u,y),!1}u=u.return}while(u!==null);return!1}var Im=Error(r(461)),yn=!1;function In(o,a,u,f){a.child=o===null?r1(a,null,u,f):Qs(a,o.child,u,f)}function ex(o,a,u,f,y){u=u.render;var x=a.ref;if("ref"in f){var C={};for(var M in f)M!=="ref"&&(C[M]=f[M])}else C=f;return Ks(a),f=ym(o,a,u,C,x,y),M=bm(),o!==null&&!yn?(xm(o,a,y),Qi(o,a,y)):(vt&&M&&Zp(a),a.flags|=1,In(o,a,f,y),a.child)}function tx(o,a,u,f,y){if(o===null){var x=u.type;return typeof x=="function"&&!Xp(x)&&x.defaultProps===void 0&&u.compare===null?(a.tag=15,a.type=x,nx(o,a,x,f,y)):(o=bd(u.type,null,f,a,a.mode,y),o.ref=a.ref,o.return=a,a.child=o)}if(x=o.child,!Wm(o,y)){var C=x.memoizedProps;if(u=u.compare,u=u!==null?u:fc,u(C,f)&&o.ref===a.ref)return Qi(o,a,y)}return a.flags|=1,o=$i(x,f),o.ref=a.ref,o.return=a,a.child=o}function nx(o,a,u,f,y){if(o!==null){var x=o.memoizedProps;if(fc(x,f)&&o.ref===a.ref)if(yn=!1,a.pendingProps=f=x,Wm(o,y))(o.flags&131072)!==0&&(yn=!0);else return a.lanes=o.lanes,Qi(o,a,y)}return Pm(o,a,u,f,y)}function rx(o,a,u,f){var y=f.children,x=o!==null?o.memoizedState:null;if(o===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.mode==="hidden"){if((a.flags&128)!==0){if(x=x!==null?x.baseLanes|u:u,o!==null){for(f=a.child=o.child,y=0;f!==null;)y=y|f.lanes|f.childLanes,f=f.sibling;f=y&~x}else f=0,a.child=null;return ix(o,a,x,u,f)}if((u&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},o!==null&&kd(a,x!==null?x.cachePool:null),x!==null?s1(a,x):pm(),a1(a);else return f=a.lanes=536870912,ix(o,a,x!==null?x.baseLanes|u:u,u,f)}else x!==null?(kd(a,x.cachePool),s1(a,x),qo(),a.memoizedState=null):(o!==null&&kd(a,null),pm(),qo());return In(o,a,y,u),a.child}function _c(o,a){return o!==null&&o.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function ix(o,a,u,f,y){var x=lm();return x=x===null?null:{parent:gn._currentValue,pool:x},a.memoizedState={baseLanes:u,cachePool:x},o!==null&&kd(a,null),pm(),a1(a),o!==null&&Ga(o,a,f,!0),a.childLanes=y,null}function Bd(o,a){return a=Hd({mode:a.mode,children:a.children},o.mode),a.ref=o.ref,o.child=a,a.return=o,a}function ox(o,a,u){return Qs(a,o.child,null,u),o=Bd(a,a.pendingProps),o.flags|=2,Sr(a),a.memoizedState=null,o}function TM(o,a,u){var f=a.pendingProps,y=(a.flags&128)!==0;if(a.flags&=-129,o===null){if(vt){if(f.mode==="hidden")return o=Bd(a,f),a.lanes=536870912,_c(null,o);if(gm(a),(o=qt)?(o=vS(o,Pr),o=o!==null&&o.data==="&"?o:null,o!==null&&(a.memoizedState={dehydrated:o,treeContext:Do!==null?{id:bi,overflow:xi}:null,retryLane:536870912,hydrationErrors:null},u=qb(o),u.return=a,a.child=u,zn=a,qt=null)):o=null,o===null)throw Lo(a);return a.lanes=536870912,null}return Bd(a,f)}var x=o.memoizedState;if(x!==null){var C=x.dehydrated;if(gm(a),y)if(a.flags&256)a.flags&=-257,a=ox(o,a,u);else if(a.memoizedState!==null)a.child=o.child,a.flags|=128,a=null;else throw Error(r(558));else if(yn||Ga(o,a,u,!1),y=(u&o.childLanes)!==0,yn||y){if(f=Lt,f!==null&&(C=Xe(f,u),C!==0&&C!==x.retryLane))throw x.retryLane=C,Vs(o,C),fr(f,o,C),Im;Xd(),a=ox(o,a,u)}else o=x.treeContext,qt=Ur(C.nextSibling),zn=a,vt=!0,zo=null,Pr=!1,o!==null&&Wb(a,o),a=Bd(a,f),a.flags|=4096;return a}return o=$i(o.child,{mode:f.mode,children:f.children}),o.ref=a.ref,a.child=o,o.return=a,o}function Ud(o,a){var u=a.ref;if(u===null)o!==null&&o.ref!==null&&(a.flags|=4194816);else{if(typeof u!="function"&&typeof u!="object")throw Error(r(284));(o===null||o.ref!==u)&&(a.flags|=4194816)}}function Pm(o,a,u,f,y){return Ks(a),u=ym(o,a,u,f,void 0,y),f=bm(),o!==null&&!yn?(xm(o,a,y),Qi(o,a,y)):(vt&&f&&Zp(a),a.flags|=1,In(o,a,u,y),a.child)}function sx(o,a,u,f,y,x){return Ks(a),a.updateQueue=null,u=c1(a,f,u,y),l1(o),f=bm(),o!==null&&!yn?(xm(o,a,x),Qi(o,a,x)):(vt&&f&&Zp(a),a.flags|=1,In(o,a,u,x),a.child)}function ax(o,a,u,f,y){if(Ks(a),a.stateNode===null){var x=Fa,C=u.contextType;typeof C=="object"&&C!==null&&(x=Ln(C)),x=new u(f,x),a.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=zm,a.stateNode=x,x._reactInternals=a,x=a.stateNode,x.props=f,x.state=a.memoizedState,x.refs={},um(a),C=u.contextType,x.context=typeof C=="object"&&C!==null?Ln(C):Fa,x.state=a.memoizedState,C=u.getDerivedStateFromProps,typeof C=="function"&&(Dm(a,u,C,f),x.state=a.memoizedState),typeof u.getDerivedStateFromProps=="function"||typeof x.getSnapshotBeforeUpdate=="function"||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(C=x.state,typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount(),C!==x.state&&zm.enqueueReplaceState(x,x.state,null),Ec(a,f,x,y),Sc(),x.state=a.memoizedState),typeof x.componentDidMount=="function"&&(a.flags|=4194308),f=!0}else if(o===null){x=a.stateNode;var M=a.memoizedProps,L=ea(u,M);x.props=L;var W=x.context,J=u.contextType;C=Fa,typeof J=="object"&&J!==null&&(C=Ln(J));var ee=u.getDerivedStateFromProps;J=typeof ee=="function"||typeof x.getSnapshotBeforeUpdate=="function",M=a.pendingProps!==M,J||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(M||W!==C)&&G1(a,x,f,C),Po=!1;var $=a.memoizedState;x.state=$,Ec(a,f,x,y),Sc(),W=a.memoizedState,M||$!==W||Po?(typeof ee=="function"&&(Dm(a,u,ee,f),W=a.memoizedState),(L=Po||$1(a,u,L,f,$,W,C))?(J||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(a.flags|=4194308)):(typeof x.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=f,a.memoizedState=W),x.props=f,x.state=W,x.context=C,f=L):(typeof x.componentDidMount=="function"&&(a.flags|=4194308),f=!1)}else{x=a.stateNode,dm(o,a),C=a.memoizedProps,J=ea(u,C),x.props=J,ee=a.pendingProps,$=x.context,W=u.contextType,L=Fa,typeof W=="object"&&W!==null&&(L=Ln(W)),M=u.getDerivedStateFromProps,(W=typeof M=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(C!==ee||$!==L)&&G1(a,x,f,L),Po=!1,$=a.memoizedState,x.state=$,Ec(a,f,x,y),Sc();var Y=a.memoizedState;C!==ee||$!==Y||Po||o!==null&&o.dependencies!==null&&Sd(o.dependencies)?(typeof M=="function"&&(Dm(a,u,M,f),Y=a.memoizedState),(J=Po||$1(a,u,J,f,$,Y,L)||o!==null&&o.dependencies!==null&&Sd(o.dependencies))?(W||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(f,Y,L),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(f,Y,L)),typeof x.componentDidUpdate=="function"&&(a.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof x.componentDidUpdate!="function"||C===o.memoizedProps&&$===o.memoizedState||(a.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||C===o.memoizedProps&&$===o.memoizedState||(a.flags|=1024),a.memoizedProps=f,a.memoizedState=Y),x.props=f,x.state=Y,x.context=L,f=J):(typeof x.componentDidUpdate!="function"||C===o.memoizedProps&&$===o.memoizedState||(a.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||C===o.memoizedProps&&$===o.memoizedState||(a.flags|=1024),f=!1)}return x=f,Ud(o,a),f=(a.flags&128)!==0,x||f?(x=a.stateNode,u=f&&typeof u.getDerivedStateFromError!="function"?null:x.render(),a.flags|=1,o!==null&&f?(a.child=Qs(a,o.child,null,y),a.child=Qs(a,null,u,y)):In(o,a,u,y),a.memoizedState=x.state,o=a.child):o=Qi(o,a,y),o}function lx(o,a,u,f){return $s(),a.flags|=256,In(o,a,u,f),a.child}var Bm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Um(o){return{baseLanes:o,cachePool:Jb()}}function Hm(o,a,u){return o=o!==null?o.childLanes&~u:0,a&&(o|=kr),o}function cx(o,a,u){var f=a.pendingProps,y=!1,x=(a.flags&128)!==0,C;if((C=x)||(C=o!==null&&o.memoizedState===null?!1:(dn.current&2)!==0),C&&(y=!0,a.flags&=-129),C=(a.flags&32)!==0,a.flags&=-33,o===null){if(vt){if(y?Ho(a):qo(),(o=qt)?(o=vS(o,Pr),o=o!==null&&o.data!=="&"?o:null,o!==null&&(a.memoizedState={dehydrated:o,treeContext:Do!==null?{id:bi,overflow:xi}:null,retryLane:536870912,hydrationErrors:null},u=qb(o),u.return=a,a.child=u,zn=a,qt=null)):o=null,o===null)throw Lo(a);return kg(o)?a.lanes=32:a.lanes=536870912,null}var M=f.children;return f=f.fallback,y?(qo(),y=a.mode,M=Hd({mode:"hidden",children:M},y),f=Ws(f,y,u,null),M.return=a,f.return=a,M.sibling=f,a.child=M,f=a.child,f.memoizedState=Um(u),f.childLanes=Hm(o,C,u),a.memoizedState=Bm,_c(null,f)):(Ho(a),qm(a,M))}var L=o.memoizedState;if(L!==null&&(M=L.dehydrated,M!==null)){if(x)a.flags&256?(Ho(a),a.flags&=-257,a=Fm(o,a,u)):a.memoizedState!==null?(qo(),a.child=o.child,a.flags|=128,a=null):(qo(),M=f.fallback,y=a.mode,f=Hd({mode:"visible",children:f.children},y),M=Ws(M,y,u,null),M.flags|=2,f.return=a,M.return=a,f.sibling=M,a.child=f,Qs(a,o.child,null,u),f=a.child,f.memoizedState=Um(u),f.childLanes=Hm(o,C,u),a.memoizedState=Bm,a=_c(null,f));else if(Ho(a),kg(M)){if(C=M.nextSibling&&M.nextSibling.dataset,C)var W=C.dgst;C=W,f=Error(r(419)),f.stack="",f.digest=C,mc({value:f,source:null,stack:null}),a=Fm(o,a,u)}else if(yn||Ga(o,a,u,!1),C=(u&o.childLanes)!==0,yn||C){if(C=Lt,C!==null&&(f=Xe(C,u),f!==0&&f!==L.retryLane))throw L.retryLane=f,Vs(o,f),fr(C,o,f),Im;Eg(M)||Xd(),a=Fm(o,a,u)}else Eg(M)?(a.flags|=192,a.child=o.child,a=null):(o=L.treeContext,qt=Ur(M.nextSibling),zn=a,vt=!0,zo=null,Pr=!1,o!==null&&Wb(a,o),a=qm(a,f.children),a.flags|=4096);return a}return y?(qo(),M=f.fallback,y=a.mode,L=o.child,W=L.sibling,f=$i(L,{mode:"hidden",children:f.children}),f.subtreeFlags=L.subtreeFlags&65011712,W!==null?M=$i(W,M):(M=Ws(M,y,u,null),M.flags|=2),M.return=a,f.return=a,f.sibling=M,a.child=f,_c(null,f),f=a.child,M=o.child.memoizedState,M===null?M=Um(u):(y=M.cachePool,y!==null?(L=gn._currentValue,y=y.parent!==L?{parent:L,pool:L}:y):y=Jb(),M={baseLanes:M.baseLanes|u,cachePool:y}),f.memoizedState=M,f.childLanes=Hm(o,C,u),a.memoizedState=Bm,_c(o.child,f)):(Ho(a),u=o.child,o=u.sibling,u=$i(u,{mode:"visible",children:f.children}),u.return=a,u.sibling=null,o!==null&&(C=a.deletions,C===null?(a.deletions=[o],a.flags|=16):C.push(o)),a.child=u,a.memoizedState=null,u)}function qm(o,a){return a=Hd({mode:"visible",children:a},o.mode),a.return=o,o.child=a}function Hd(o,a){return o=br(22,o,null,a),o.lanes=0,o}function Fm(o,a,u){return Qs(a,o.child,null,u),o=qm(a,a.pendingProps.children),o.flags|=2,a.memoizedState=null,o}function ux(o,a,u){o.lanes|=a;var f=o.alternate;f!==null&&(f.lanes|=a),im(o.return,a,u)}function Vm(o,a,u,f,y,x){var C=o.memoizedState;C===null?o.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:y,treeForkCount:x}:(C.isBackwards=a,C.rendering=null,C.renderingStartTime=0,C.last=f,C.tail=u,C.tailMode=y,C.treeForkCount=x)}function dx(o,a,u){var f=a.pendingProps,y=f.revealOrder,x=f.tail;f=f.children;var C=dn.current,M=(C&2)!==0;if(M?(C=C&1|2,a.flags|=128):C&=1,he(dn,C),In(o,a,f,u),f=vt?pc:0,!M&&o!==null&&(o.flags&128)!==0)e:for(o=a.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&ux(o,u,a);else if(o.tag===19)ux(o,u,a);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===a)break e;for(;o.sibling===null;){if(o.return===null||o.return===a)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(y){case"forwards":for(u=a.child,y=null;u!==null;)o=u.alternate,o!==null&&Md(o)===null&&(y=u),u=u.sibling;u=y,u===null?(y=a.child,a.child=null):(y=u.sibling,u.sibling=null),Vm(a,!1,y,u,x,f);break;case"backwards":case"unstable_legacy-backwards":for(u=null,y=a.child,a.child=null;y!==null;){if(o=y.alternate,o!==null&&Md(o)===null){a.child=y;break}o=y.sibling,y.sibling=u,u=y,y=o}Vm(a,!0,u,null,x,f);break;case"together":Vm(a,!1,null,null,void 0,f);break;default:a.memoizedState=null}return a.child}function Qi(o,a,u){if(o!==null&&(a.dependencies=o.dependencies),Wo|=a.lanes,(u&a.childLanes)===0)if(o!==null){if(Ga(o,a,u,!1),(u&a.childLanes)===0)return null}else return null;if(o!==null&&a.child!==o.child)throw Error(r(153));if(a.child!==null){for(o=a.child,u=$i(o,o.pendingProps),a.child=u,u.return=a;o.sibling!==null;)o=o.sibling,u=u.sibling=$i(o,o.pendingProps),u.return=a;u.sibling=null}return a.child}function Wm(o,a){return(o.lanes&a)!==0?!0:(o=o.dependencies,!!(o!==null&&Sd(o)))}function _M(o,a,u){switch(a.tag){case 3:Ct(a,a.stateNode.containerInfo),Io(a,gn,o.memoizedState.cache),$s();break;case 27:case 5:ie(a);break;case 4:Ct(a,a.stateNode.containerInfo);break;case 10:Io(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,gm(a),null;break;case 13:var f=a.memoizedState;if(f!==null)return f.dehydrated!==null?(Ho(a),a.flags|=128,null):(u&a.child.childLanes)!==0?cx(o,a,u):(Ho(a),o=Qi(o,a,u),o!==null?o.sibling:null);Ho(a);break;case 19:var y=(o.flags&128)!==0;if(f=(u&a.childLanes)!==0,f||(Ga(o,a,u,!1),f=(u&a.childLanes)!==0),y){if(f)return dx(o,a,u);a.flags|=128}if(y=a.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),he(dn,dn.current),f)break;return null;case 22:return a.lanes=0,rx(o,a,u,a.pendingProps);case 24:Io(a,gn,o.memoizedState.cache)}return Qi(o,a,u)}function fx(o,a,u){if(o!==null)if(o.memoizedProps!==a.pendingProps)yn=!0;else{if(!Wm(o,u)&&(a.flags&128)===0)return yn=!1,_M(o,a,u);yn=(o.flags&131072)!==0}else yn=!1,vt&&(a.flags&1048576)!==0&&Vb(a,pc,a.index);switch(a.lanes=0,a.tag){case 16:e:{var f=a.pendingProps;if(o=Xs(a.elementType),a.type=o,typeof o=="function")Xp(o)?(f=ea(o,f),a.tag=1,a=ax(null,a,o,f,u)):(a.tag=0,a=Pm(null,a,o,f,u));else{if(o!=null){var y=o.$$typeof;if(y===R){a.tag=11,a=ex(null,a,o,f,u);break e}else if(y===I){a.tag=14,a=tx(null,a,o,f,u);break e}}throw a=ye(o)||o,Error(r(306,a,""))}}return a;case 0:return Pm(o,a,a.type,a.pendingProps,u);case 1:return f=a.type,y=ea(f,a.pendingProps),ax(o,a,f,y,u);case 3:e:{if(Ct(a,a.stateNode.containerInfo),o===null)throw Error(r(387));f=a.pendingProps;var x=a.memoizedState;y=x.element,dm(o,a),Ec(a,f,null,u);var C=a.memoizedState;if(f=C.cache,Io(a,gn,f),f!==x.cache&&om(a,[gn],u,!0),Sc(),f=C.element,x.isDehydrated)if(x={element:f,isDehydrated:!1,cache:C.cache},a.updateQueue.baseState=x,a.memoizedState=x,a.flags&256){a=lx(o,a,f,u);break e}else if(f!==y){y=zr(Error(r(424)),a),mc(y),a=lx(o,a,f,u);break e}else{switch(o=a.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(qt=Ur(o.firstChild),zn=a,vt=!0,zo=null,Pr=!0,u=r1(a,null,f,u),a.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling}else{if($s(),f===y){a=Qi(o,a,u);break e}In(o,a,f,u)}a=a.child}return a;case 26:return Ud(o,a),o===null?(u=kS(a.type,null,a.pendingProps,null))?a.memoizedState=u:vt||(u=a.type,o=a.pendingProps,f=rf(ve.current).createElement(u),f[pn]=a,f[Dn]=o,Pn(f,u,o),mn(f),a.stateNode=f):a.memoizedState=kS(a.type,o.memoizedProps,a.pendingProps,o.memoizedState),null;case 27:return ie(a),o===null&&vt&&(f=a.stateNode=xS(a.type,a.pendingProps,ve.current),zn=a,Pr=!0,y=qt,Xo(a.type)?(wg=y,qt=Ur(f.firstChild)):qt=y),In(o,a,a.pendingProps.children,u),Ud(o,a),o===null&&(a.flags|=4194304),a.child;case 5:return o===null&&vt&&((y=f=qt)&&(f=rj(f,a.type,a.pendingProps,Pr),f!==null?(a.stateNode=f,zn=a,qt=Ur(f.firstChild),Pr=!1,y=!0):y=!1),y||Lo(a)),ie(a),y=a.type,x=a.pendingProps,C=o!==null?o.memoizedProps:null,f=x.children,bg(y,x)?f=null:C!==null&&bg(y,C)&&(a.flags|=32),a.memoizedState!==null&&(y=ym(o,a,yM,null,null,u),qc._currentValue=y),Ud(o,a),In(o,a,f,u),a.child;case 6:return o===null&&vt&&((o=u=qt)&&(u=ij(u,a.pendingProps,Pr),u!==null?(a.stateNode=u,zn=a,qt=null,o=!0):o=!1),o||Lo(a)),null;case 13:return cx(o,a,u);case 4:return Ct(a,a.stateNode.containerInfo),f=a.pendingProps,o===null?a.child=Qs(a,null,f,u):In(o,a,f,u),a.child;case 11:return ex(o,a,a.type,a.pendingProps,u);case 7:return In(o,a,a.pendingProps,u),a.child;case 8:return In(o,a,a.pendingProps.children,u),a.child;case 12:return In(o,a,a.pendingProps.children,u),a.child;case 10:return f=a.pendingProps,Io(a,a.type,f.value),In(o,a,f.children,u),a.child;case 9:return y=a.type._context,f=a.pendingProps.children,Ks(a),y=Ln(y),f=f(y),a.flags|=1,In(o,a,f,u),a.child;case 14:return tx(o,a,a.type,a.pendingProps,u);case 15:return nx(o,a,a.type,a.pendingProps,u);case 19:return dx(o,a,u);case 31:return TM(o,a,u);case 22:return rx(o,a,u,a.pendingProps);case 24:return Ks(a),f=Ln(gn),o===null?(y=lm(),y===null&&(y=Lt,x=sm(),y.pooledCache=x,x.refCount++,x!==null&&(y.pooledCacheLanes|=u),y=x),a.memoizedState={parent:f,cache:y},um(a),Io(a,gn,y)):((o.lanes&u)!==0&&(dm(o,a),Ec(a,null,null,u),Sc()),y=o.memoizedState,x=a.memoizedState,y.parent!==f?(y={parent:f,cache:f},a.memoizedState=y,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=y),Io(a,gn,f)):(f=x.cache,Io(a,gn,f),f!==y.cache&&om(a,[gn],u,!0))),In(o,a,a.pendingProps.children,u),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function Zi(o){o.flags|=4}function $m(o,a,u,f,y){if((a=(o.mode&32)!==0)&&(a=!1),a){if(o.flags|=16777216,(y&335544128)===y)if(o.stateNode.complete)o.flags|=8192;else if(Bx())o.flags|=8192;else throw Js=Cd,cm}else o.flags&=-16777217}function hx(o,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!AS(a))if(Bx())o.flags|=8192;else throw Js=Cd,cm}function qd(o,a){a!==null&&(o.flags|=4),o.flags&16384&&(a=o.tag!==22?nd():536870912,o.lanes|=a,sl|=a)}function Ac(o,a){if(!vt)switch(o.tailMode){case"hidden":a=o.tail;for(var u=null;a!==null;)a.alternate!==null&&(u=a),a=a.sibling;u===null?o.tail=null:u.sibling=null;break;case"collapsed":u=o.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?a||o.tail===null?o.tail=null:o.tail.sibling=null:f.sibling=null}}function Ft(o){var a=o.alternate!==null&&o.alternate.child===o.child,u=0,f=0;if(a)for(var y=o.child;y!==null;)u|=y.lanes|y.childLanes,f|=y.subtreeFlags&65011712,f|=y.flags&65011712,y.return=o,y=y.sibling;else for(y=o.child;y!==null;)u|=y.lanes|y.childLanes,f|=y.subtreeFlags,f|=y.flags,y.return=o,y=y.sibling;return o.subtreeFlags|=f,o.childLanes=u,a}function AM(o,a,u){var f=a.pendingProps;switch(em(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ft(a),null;case 1:return Ft(a),null;case 3:return u=a.stateNode,f=null,o!==null&&(f=o.memoizedState.cache),a.memoizedState.cache!==f&&(a.flags|=2048),Yi(gn),Ae(),u.pendingContext&&(u.context=u.pendingContext,u.pendingContext=null),(o===null||o.child===null)&&($a(a)?Zi(a):o===null||o.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,nm())),Ft(a),null;case 26:var y=a.type,x=a.memoizedState;return o===null?(Zi(a),x!==null?(Ft(a),hx(a,x)):(Ft(a),$m(a,y,null,f,u))):x?x!==o.memoizedState?(Zi(a),Ft(a),hx(a,x)):(Ft(a),a.flags&=-16777217):(o=o.memoizedProps,o!==f&&Zi(a),Ft(a),$m(a,y,o,f,u)),null;case 27:if(He(a),u=ve.current,y=a.type,o!==null&&a.stateNode!=null)o.memoizedProps!==f&&Zi(a);else{if(!f){if(a.stateNode===null)throw Error(r(166));return Ft(a),null}o=Le.current,$a(a)?$b(a):(o=xS(y,f,u),a.stateNode=o,Zi(a))}return Ft(a),null;case 5:if(He(a),y=a.type,o!==null&&a.stateNode!=null)o.memoizedProps!==f&&Zi(a);else{if(!f){if(a.stateNode===null)throw Error(r(166));return Ft(a),null}if(x=Le.current,$a(a))$b(a);else{var C=rf(ve.current);switch(x){case 1:x=C.createElementNS("http://www.w3.org/2000/svg",y);break;case 2:x=C.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;default:switch(y){case"svg":x=C.createElementNS("http://www.w3.org/2000/svg",y);break;case"math":x=C.createElementNS("http://www.w3.org/1998/Math/MathML",y);break;case"script":x=C.createElement("div"),x.innerHTML="<script><\/script>",x=x.removeChild(x.firstChild);break;case"select":x=typeof f.is=="string"?C.createElement("select",{is:f.is}):C.createElement("select"),f.multiple?x.multiple=!0:f.size&&(x.size=f.size);break;default:x=typeof f.is=="string"?C.createElement(y,{is:f.is}):C.createElement(y)}}x[pn]=a,x[Dn]=f;e:for(C=a.child;C!==null;){if(C.tag===5||C.tag===6)x.appendChild(C.stateNode);else if(C.tag!==4&&C.tag!==27&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===a)break e;for(;C.sibling===null;){if(C.return===null||C.return===a)break e;C=C.return}C.sibling.return=C.return,C=C.sibling}a.stateNode=x;e:switch(Pn(x,y,f),y){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}f&&Zi(a)}}return Ft(a),$m(a,a.type,o===null?null:o.memoizedProps,a.pendingProps,u),null;case 6:if(o&&a.stateNode!=null)o.memoizedProps!==f&&Zi(a);else{if(typeof f!="string"&&a.stateNode===null)throw Error(r(166));if(o=ve.current,$a(a)){if(o=a.stateNode,u=a.memoizedProps,f=null,y=zn,y!==null)switch(y.tag){case 27:case 5:f=y.memoizedProps}o[pn]=a,o=!!(o.nodeValue===u||f!==null&&f.suppressHydrationWarning===!0||cS(o.nodeValue,u)),o||Lo(a,!0)}else o=rf(o).createTextNode(f),o[pn]=a,a.stateNode=o}return Ft(a),null;case 31:if(u=a.memoizedState,o===null||o.memoizedState!==null){if(f=$a(a),u!==null){if(o===null){if(!f)throw Error(r(318));if(o=a.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(r(557));o[pn]=a}else $s(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Ft(a),o=!1}else u=nm(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=u),o=!0;if(!o)return a.flags&256?(Sr(a),a):(Sr(a),null);if((a.flags&128)!==0)throw Error(r(558))}return Ft(a),null;case 13:if(f=a.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(y=$a(a),f!==null&&f.dehydrated!==null){if(o===null){if(!y)throw Error(r(318));if(y=a.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(r(317));y[pn]=a}else $s(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Ft(a),y=!1}else y=nm(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=y),y=!0;if(!y)return a.flags&256?(Sr(a),a):(Sr(a),null)}return Sr(a),(a.flags&128)!==0?(a.lanes=u,a):(u=f!==null,o=o!==null&&o.memoizedState!==null,u&&(f=a.child,y=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(y=f.alternate.memoizedState.cachePool.pool),x=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(x=f.memoizedState.cachePool.pool),x!==y&&(f.flags|=2048)),u!==o&&u&&(a.child.flags|=8192),qd(a,a.updateQueue),Ft(a),null);case 4:return Ae(),o===null&&pg(a.stateNode.containerInfo),Ft(a),null;case 10:return Yi(a.type),Ft(a),null;case 19:if(ge(dn),f=a.memoizedState,f===null)return Ft(a),null;if(y=(a.flags&128)!==0,x=f.rendering,x===null)if(y)Ac(f,!1);else{if(an!==0||o!==null&&(o.flags&128)!==0)for(o=a.child;o!==null;){if(x=Md(o),x!==null){for(a.flags|=128,Ac(f,!1),o=x.updateQueue,a.updateQueue=o,qd(a,o),a.subtreeFlags=0,o=u,u=a.child;u!==null;)Hb(u,o),u=u.sibling;return he(dn,dn.current&1|2),vt&&Gi(a,f.treeForkCount),a.child}o=o.sibling}f.tail!==null&&Pe()>Gd&&(a.flags|=128,y=!0,Ac(f,!1),a.lanes=4194304)}else{if(!y)if(o=Md(x),o!==null){if(a.flags|=128,y=!0,o=o.updateQueue,a.updateQueue=o,qd(a,o),Ac(f,!0),f.tail===null&&f.tailMode==="hidden"&&!x.alternate&&!vt)return Ft(a),null}else 2*Pe()-f.renderingStartTime>Gd&&u!==536870912&&(a.flags|=128,y=!0,Ac(f,!1),a.lanes=4194304);f.isBackwards?(x.sibling=a.child,a.child=x):(o=f.last,o!==null?o.sibling=x:a.child=x,f.last=x)}return f.tail!==null?(o=f.tail,f.rendering=o,f.tail=o.sibling,f.renderingStartTime=Pe(),o.sibling=null,u=dn.current,he(dn,y?u&1|2:u&1),vt&&Gi(a,f.treeForkCount),o):(Ft(a),null);case 22:case 23:return Sr(a),mm(),f=a.memoizedState!==null,o!==null?o.memoizedState!==null!==f&&(a.flags|=8192):f&&(a.flags|=8192),f?(u&536870912)!==0&&(a.flags&128)===0&&(Ft(a),a.subtreeFlags&6&&(a.flags|=8192)):Ft(a),u=a.updateQueue,u!==null&&qd(a,u.retryQueue),u=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(u=o.memoizedState.cachePool.pool),f=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),f!==u&&(a.flags|=2048),o!==null&&ge(Ys),null;case 24:return u=null,o!==null&&(u=o.memoizedState.cache),a.memoizedState.cache!==u&&(a.flags|=2048),Yi(gn),Ft(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function MM(o,a){switch(em(a),a.tag){case 1:return o=a.flags,o&65536?(a.flags=o&-65537|128,a):null;case 3:return Yi(gn),Ae(),o=a.flags,(o&65536)!==0&&(o&128)===0?(a.flags=o&-65537|128,a):null;case 26:case 27:case 5:return He(a),null;case 31:if(a.memoizedState!==null){if(Sr(a),a.alternate===null)throw Error(r(340));$s()}return o=a.flags,o&65536?(a.flags=o&-65537|128,a):null;case 13:if(Sr(a),o=a.memoizedState,o!==null&&o.dehydrated!==null){if(a.alternate===null)throw Error(r(340));$s()}return o=a.flags,o&65536?(a.flags=o&-65537|128,a):null;case 19:return ge(dn),null;case 4:return Ae(),null;case 10:return Yi(a.type),null;case 22:case 23:return Sr(a),mm(),o!==null&&ge(Ys),o=a.flags,o&65536?(a.flags=o&-65537|128,a):null;case 24:return Yi(gn),null;case 25:return null;default:return null}}function px(o,a){switch(em(a),a.tag){case 3:Yi(gn),Ae();break;case 26:case 27:case 5:He(a);break;case 4:Ae();break;case 31:a.memoizedState!==null&&Sr(a);break;case 13:Sr(a);break;case 19:ge(dn);break;case 10:Yi(a.type);break;case 22:case 23:Sr(a),mm(),o!==null&&ge(Ys);break;case 24:Yi(gn)}}function Mc(o,a){try{var u=a.updateQueue,f=u!==null?u.lastEffect:null;if(f!==null){var y=f.next;u=y;do{if((u.tag&o)===o){f=void 0;var x=u.create,C=u.inst;f=x(),C.destroy=f}u=u.next}while(u!==y)}}catch(M){jt(a,a.return,M)}}function Fo(o,a,u){try{var f=a.updateQueue,y=f!==null?f.lastEffect:null;if(y!==null){var x=y.next;f=x;do{if((f.tag&o)===o){var C=f.inst,M=C.destroy;if(M!==void 0){C.destroy=void 0,y=a;var L=u,W=M;try{W()}catch(J){jt(y,L,J)}}}f=f.next}while(f!==x)}}catch(J){jt(a,a.return,J)}}function mx(o){var a=o.updateQueue;if(a!==null){var u=o.stateNode;try{o1(a,u)}catch(f){jt(o,o.return,f)}}}function gx(o,a,u){u.props=ea(o.type,o.memoizedProps),u.state=o.memoizedState;try{u.componentWillUnmount()}catch(f){jt(o,a,f)}}function jc(o,a){try{var u=o.ref;if(u!==null){switch(o.tag){case 26:case 27:case 5:var f=o.stateNode;break;case 30:f=o.stateNode;break;default:f=o.stateNode}typeof u=="function"?o.refCleanup=u(f):u.current=f}}catch(y){jt(o,a,y)}}function Si(o,a){var u=o.ref,f=o.refCleanup;if(u!==null)if(typeof f=="function")try{f()}catch(y){jt(o,a,y)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof u=="function")try{u(null)}catch(y){jt(o,a,y)}else u.current=null}function vx(o){var a=o.type,u=o.memoizedProps,f=o.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":u.autoFocus&&f.focus();break e;case"img":u.src?f.src=u.src:u.srcSet&&(f.srcset=u.srcSet)}}catch(y){jt(o,o.return,y)}}function Gm(o,a,u){try{var f=o.stateNode;JM(f,o.type,u,a),f[Dn]=a}catch(y){jt(o,o.return,y)}}function yx(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Xo(o.type)||o.tag===4}function Km(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||yx(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Xo(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Ym(o,a,u){var f=o.tag;if(f===5||f===6)o=o.stateNode,a?(u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u).insertBefore(o,a):(a=u.nodeType===9?u.body:u.nodeName==="HTML"?u.ownerDocument.body:u,a.appendChild(o),u=u._reactRootContainer,u!=null||a.onclick!==null||(a.onclick=De));else if(f!==4&&(f===27&&Xo(o.type)&&(u=o.stateNode,a=null),o=o.child,o!==null))for(Ym(o,a,u),o=o.sibling;o!==null;)Ym(o,a,u),o=o.sibling}function Fd(o,a,u){var f=o.tag;if(f===5||f===6)o=o.stateNode,a?u.insertBefore(o,a):u.appendChild(o);else if(f!==4&&(f===27&&Xo(o.type)&&(u=o.stateNode),o=o.child,o!==null))for(Fd(o,a,u),o=o.sibling;o!==null;)Fd(o,a,u),o=o.sibling}function bx(o){var a=o.stateNode,u=o.memoizedProps;try{for(var f=o.type,y=a.attributes;y.length;)a.removeAttributeNode(y[0]);Pn(a,f,u),a[pn]=o,a[Dn]=u}catch(x){jt(o,o.return,x)}}var eo=!1,bn=!1,Xm=!1,xx=typeof WeakSet=="function"?WeakSet:Set,An=null;function jM(o,a){if(o=o.containerInfo,vg=df,o=Rb(o),Fp(o)){if("selectionStart"in o)var u={start:o.selectionStart,end:o.selectionEnd};else e:{u=(u=o.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var y=f.anchorOffset,x=f.focusNode;f=f.focusOffset;try{u.nodeType,x.nodeType}catch{u=null;break e}var C=0,M=-1,L=-1,W=0,J=0,ee=o,$=null;t:for(;;){for(var Y;ee!==u||y!==0&&ee.nodeType!==3||(M=C+y),ee!==x||f!==0&&ee.nodeType!==3||(L=C+f),ee.nodeType===3&&(C+=ee.nodeValue.length),(Y=ee.firstChild)!==null;)$=ee,ee=Y;for(;;){if(ee===o)break t;if($===u&&++W===y&&(M=C),$===x&&++J===f&&(L=C),(Y=ee.nextSibling)!==null)break;ee=$,$=ee.parentNode}ee=Y}u=M===-1||L===-1?null:{start:M,end:L}}else u=null}u=u||{start:0,end:0}}else u=null;for(yg={focusedElem:o,selectionRange:u},df=!1,An=a;An!==null;)if(a=An,o=a.child,(a.subtreeFlags&1028)!==0&&o!==null)o.return=a,An=o;else for(;An!==null;){switch(a=An,x=a.alternate,o=a.flags,a.tag){case 0:if((o&4)!==0&&(o=a.updateQueue,o=o!==null?o.events:null,o!==null))for(u=0;u<o.length;u++)y=o[u],y.ref.impl=y.nextImpl;break;case 11:case 15:break;case 1:if((o&1024)!==0&&x!==null){o=void 0,u=a,y=x.memoizedProps,x=x.memoizedState,f=u.stateNode;try{var je=ea(u.type,y);o=f.getSnapshotBeforeUpdate(je,x),f.__reactInternalSnapshotBeforeUpdate=o}catch(Ve){jt(u,u.return,Ve)}}break;case 3:if((o&1024)!==0){if(o=a.stateNode.containerInfo,u=o.nodeType,u===9)Sg(o);else if(u===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":Sg(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(r(163))}if(o=a.sibling,o!==null){o.return=a.return,An=o;break}An=a.return}}function Sx(o,a,u){var f=u.flags;switch(u.tag){case 0:case 11:case 15:no(o,u),f&4&&Mc(5,u);break;case 1:if(no(o,u),f&4)if(o=u.stateNode,a===null)try{o.componentDidMount()}catch(C){jt(u,u.return,C)}else{var y=ea(u.type,a.memoizedProps);a=a.memoizedState;try{o.componentDidUpdate(y,a,o.__reactInternalSnapshotBeforeUpdate)}catch(C){jt(u,u.return,C)}}f&64&&mx(u),f&512&&jc(u,u.return);break;case 3:if(no(o,u),f&64&&(o=u.updateQueue,o!==null)){if(a=null,u.child!==null)switch(u.child.tag){case 27:case 5:a=u.child.stateNode;break;case 1:a=u.child.stateNode}try{o1(o,a)}catch(C){jt(u,u.return,C)}}break;case 27:a===null&&f&4&&bx(u);case 26:case 5:no(o,u),a===null&&f&4&&vx(u),f&512&&jc(u,u.return);break;case 12:no(o,u);break;case 31:no(o,u),f&4&&wx(o,u);break;case 13:no(o,u),f&4&&Cx(o,u),f&64&&(o=u.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(u=BM.bind(null,u),oj(o,u))));break;case 22:if(f=u.memoizedState!==null||eo,!f){a=a!==null&&a.memoizedState!==null||bn,y=eo;var x=bn;eo=f,(bn=a)&&!x?ro(o,u,(u.subtreeFlags&8772)!==0):no(o,u),eo=y,bn=x}break;case 30:break;default:no(o,u)}}function Ex(o){var a=o.alternate;a!==null&&(o.alternate=null,Ex(a)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(a=o.stateNode,a!==null&&ic(a)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var $t=null,lr=!1;function to(o,a,u){for(u=u.child;u!==null;)kx(o,a,u),u=u.sibling}function kx(o,a,u){if(rn&&typeof rn.onCommitFiberUnmount=="function")try{rn.onCommitFiberUnmount(vr,u)}catch{}switch(u.tag){case 26:bn||Si(u,a),to(o,a,u),u.memoizedState?u.memoizedState.count--:u.stateNode&&(u=u.stateNode,u.parentNode.removeChild(u));break;case 27:bn||Si(u,a);var f=$t,y=lr;Xo(u.type)&&($t=u.stateNode,lr=!1),to(o,a,u),Bc(u.stateNode),$t=f,lr=y;break;case 5:bn||Si(u,a);case 6:if(f=$t,y=lr,$t=null,to(o,a,u),$t=f,lr=y,$t!==null)if(lr)try{($t.nodeType===9?$t.body:$t.nodeName==="HTML"?$t.ownerDocument.body:$t).removeChild(u.stateNode)}catch(x){jt(u,a,x)}else try{$t.removeChild(u.stateNode)}catch(x){jt(u,a,x)}break;case 18:$t!==null&&(lr?(o=$t,mS(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,u.stateNode),pl(o)):mS($t,u.stateNode));break;case 4:f=$t,y=lr,$t=u.stateNode.containerInfo,lr=!0,to(o,a,u),$t=f,lr=y;break;case 0:case 11:case 14:case 15:Fo(2,u,a),bn||Fo(4,u,a),to(o,a,u);break;case 1:bn||(Si(u,a),f=u.stateNode,typeof f.componentWillUnmount=="function"&&gx(u,a,f)),to(o,a,u);break;case 21:to(o,a,u);break;case 22:bn=(f=bn)||u.memoizedState!==null,to(o,a,u),bn=f;break;default:to(o,a,u)}}function wx(o,a){if(a.memoizedState===null&&(o=a.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{pl(o)}catch(u){jt(a,a.return,u)}}}function Cx(o,a){if(a.memoizedState===null&&(o=a.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{pl(o)}catch(u){jt(a,a.return,u)}}function OM(o){switch(o.tag){case 31:case 13:case 19:var a=o.stateNode;return a===null&&(a=o.stateNode=new xx),a;case 22:return o=o.stateNode,a=o._retryCache,a===null&&(a=o._retryCache=new xx),a;default:throw Error(r(435,o.tag))}}function Vd(o,a){var u=OM(o);a.forEach(function(f){if(!u.has(f)){u.add(f);var y=UM.bind(null,o,f);f.then(y,y)}})}function cr(o,a){var u=a.deletions;if(u!==null)for(var f=0;f<u.length;f++){var y=u[f],x=o,C=a,M=C;e:for(;M!==null;){switch(M.tag){case 27:if(Xo(M.type)){$t=M.stateNode,lr=!1;break e}break;case 5:$t=M.stateNode,lr=!1;break e;case 3:case 4:$t=M.stateNode.containerInfo,lr=!0;break e}M=M.return}if($t===null)throw Error(r(160));kx(x,C,y),$t=null,lr=!1,x=y.alternate,x!==null&&(x.return=null),y.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)Tx(a,o),a=a.sibling}var ri=null;function Tx(o,a){var u=o.alternate,f=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:cr(a,o),ur(o),f&4&&(Fo(3,o,o.return),Mc(3,o),Fo(5,o,o.return));break;case 1:cr(a,o),ur(o),f&512&&(bn||u===null||Si(u,u.return)),f&64&&eo&&(o=o.updateQueue,o!==null&&(f=o.callbacks,f!==null&&(u=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=u===null?f:u.concat(f))));break;case 26:var y=ri;if(cr(a,o),ur(o),f&512&&(bn||u===null||Si(u,u.return)),f&4){var x=u!==null?u.memoizedState:null;if(f=o.memoizedState,u===null)if(f===null)if(o.stateNode===null){e:{f=o.type,u=o.memoizedProps,y=y.ownerDocument||y;t:switch(f){case"title":x=y.getElementsByTagName("title")[0],(!x||x[_o]||x[pn]||x.namespaceURI==="http://www.w3.org/2000/svg"||x.hasAttribute("itemprop"))&&(x=y.createElement(f),y.head.insertBefore(x,y.querySelector("head > title"))),Pn(x,f,u),x[pn]=o,mn(x),f=x;break e;case"link":var C=TS("link","href",y).get(f+(u.href||""));if(C){for(var M=0;M<C.length;M++)if(x=C[M],x.getAttribute("href")===(u.href==null||u.href===""?null:u.href)&&x.getAttribute("rel")===(u.rel==null?null:u.rel)&&x.getAttribute("title")===(u.title==null?null:u.title)&&x.getAttribute("crossorigin")===(u.crossOrigin==null?null:u.crossOrigin)){C.splice(M,1);break t}}x=y.createElement(f),Pn(x,f,u),y.head.appendChild(x);break;case"meta":if(C=TS("meta","content",y).get(f+(u.content||""))){for(M=0;M<C.length;M++)if(x=C[M],x.getAttribute("content")===(u.content==null?null:""+u.content)&&x.getAttribute("name")===(u.name==null?null:u.name)&&x.getAttribute("property")===(u.property==null?null:u.property)&&x.getAttribute("http-equiv")===(u.httpEquiv==null?null:u.httpEquiv)&&x.getAttribute("charset")===(u.charSet==null?null:u.charSet)){C.splice(M,1);break t}}x=y.createElement(f),Pn(x,f,u),y.head.appendChild(x);break;default:throw Error(r(468,f))}x[pn]=o,mn(x),f=x}o.stateNode=f}else _S(y,o.type,o.stateNode);else o.stateNode=CS(y,f,o.memoizedProps);else x!==f?(x===null?u.stateNode!==null&&(u=u.stateNode,u.parentNode.removeChild(u)):x.count--,f===null?_S(y,o.type,o.stateNode):CS(y,f,o.memoizedProps)):f===null&&o.stateNode!==null&&Gm(o,o.memoizedProps,u.memoizedProps)}break;case 27:cr(a,o),ur(o),f&512&&(bn||u===null||Si(u,u.return)),u!==null&&f&4&&Gm(o,o.memoizedProps,u.memoizedProps);break;case 5:if(cr(a,o),ur(o),f&512&&(bn||u===null||Si(u,u.return)),o.flags&32){y=o.stateNode;try{we(y,"")}catch(je){jt(o,o.return,je)}}f&4&&o.stateNode!=null&&(y=o.memoizedProps,Gm(o,y,u!==null?u.memoizedProps:y)),f&1024&&(Xm=!0);break;case 6:if(cr(a,o),ur(o),f&4){if(o.stateNode===null)throw Error(r(162));f=o.memoizedProps,u=o.stateNode;try{u.nodeValue=f}catch(je){jt(o,o.return,je)}}break;case 3:if(af=null,y=ri,ri=of(a.containerInfo),cr(a,o),ri=y,ur(o),f&4&&u!==null&&u.memoizedState.isDehydrated)try{pl(a.containerInfo)}catch(je){jt(o,o.return,je)}Xm&&(Xm=!1,_x(o));break;case 4:f=ri,ri=of(o.stateNode.containerInfo),cr(a,o),ur(o),ri=f;break;case 12:cr(a,o),ur(o);break;case 31:cr(a,o),ur(o),f&4&&(f=o.updateQueue,f!==null&&(o.updateQueue=null,Vd(o,f)));break;case 13:cr(a,o),ur(o),o.child.flags&8192&&o.memoizedState!==null!=(u!==null&&u.memoizedState!==null)&&($d=Pe()),f&4&&(f=o.updateQueue,f!==null&&(o.updateQueue=null,Vd(o,f)));break;case 22:y=o.memoizedState!==null;var L=u!==null&&u.memoizedState!==null,W=eo,J=bn;if(eo=W||y,bn=J||L,cr(a,o),bn=J,eo=W,ur(o),f&8192)e:for(a=o.stateNode,a._visibility=y?a._visibility&-2:a._visibility|1,y&&(u===null||L||eo||bn||ta(o)),u=null,a=o;;){if(a.tag===5||a.tag===26){if(u===null){L=u=a;try{if(x=L.stateNode,y)C=x.style,typeof C.setProperty=="function"?C.setProperty("display","none","important"):C.display="none";else{M=L.stateNode;var ee=L.memoizedProps.style,$=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;M.style.display=$==null||typeof $=="boolean"?"":(""+$).trim()}}catch(je){jt(L,L.return,je)}}}else if(a.tag===6){if(u===null){L=a;try{L.stateNode.nodeValue=y?"":L.memoizedProps}catch(je){jt(L,L.return,je)}}}else if(a.tag===18){if(u===null){L=a;try{var Y=L.stateNode;y?gS(Y,!0):gS(L.stateNode,!1)}catch(je){jt(L,L.return,je)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===o)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===o)break e;for(;a.sibling===null;){if(a.return===null||a.return===o)break e;u===a&&(u=null),a=a.return}u===a&&(u=null),a.sibling.return=a.return,a=a.sibling}f&4&&(f=o.updateQueue,f!==null&&(u=f.retryQueue,u!==null&&(f.retryQueue=null,Vd(o,u))));break;case 19:cr(a,o),ur(o),f&4&&(f=o.updateQueue,f!==null&&(o.updateQueue=null,Vd(o,f)));break;case 30:break;case 21:break;default:cr(a,o),ur(o)}}function ur(o){var a=o.flags;if(a&2){try{for(var u,f=o.return;f!==null;){if(yx(f)){u=f;break}f=f.return}if(u==null)throw Error(r(160));switch(u.tag){case 27:var y=u.stateNode,x=Km(o);Fd(o,x,y);break;case 5:var C=u.stateNode;u.flags&32&&(we(C,""),u.flags&=-33);var M=Km(o);Fd(o,M,C);break;case 3:case 4:var L=u.stateNode.containerInfo,W=Km(o);Ym(o,W,L);break;default:throw Error(r(161))}}catch(J){jt(o,o.return,J)}o.flags&=-3}a&4096&&(o.flags&=-4097)}function _x(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var a=o;_x(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),o=o.sibling}}function no(o,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)Sx(o,a.alternate,a),a=a.sibling}function ta(o){for(o=o.child;o!==null;){var a=o;switch(a.tag){case 0:case 11:case 14:case 15:Fo(4,a,a.return),ta(a);break;case 1:Si(a,a.return);var u=a.stateNode;typeof u.componentWillUnmount=="function"&&gx(a,a.return,u),ta(a);break;case 27:Bc(a.stateNode);case 26:case 5:Si(a,a.return),ta(a);break;case 22:a.memoizedState===null&&ta(a);break;case 30:ta(a);break;default:ta(a)}o=o.sibling}}function ro(o,a,u){for(u=u&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var f=a.alternate,y=o,x=a,C=x.flags;switch(x.tag){case 0:case 11:case 15:ro(y,x,u),Mc(4,x);break;case 1:if(ro(y,x,u),f=x,y=f.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(W){jt(f,f.return,W)}if(f=x,y=f.updateQueue,y!==null){var M=f.stateNode;try{var L=y.shared.hiddenCallbacks;if(L!==null)for(y.shared.hiddenCallbacks=null,y=0;y<L.length;y++)i1(L[y],M)}catch(W){jt(f,f.return,W)}}u&&C&64&&mx(x),jc(x,x.return);break;case 27:bx(x);case 26:case 5:ro(y,x,u),u&&f===null&&C&4&&vx(x),jc(x,x.return);break;case 12:ro(y,x,u);break;case 31:ro(y,x,u),u&&C&4&&wx(y,x);break;case 13:ro(y,x,u),u&&C&4&&Cx(y,x);break;case 22:x.memoizedState===null&&ro(y,x,u),jc(x,x.return);break;case 30:break;default:ro(y,x,u)}a=a.sibling}}function Jm(o,a){var u=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(u=o.memoizedState.cachePool.pool),o=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(o=a.memoizedState.cachePool.pool),o!==u&&(o!=null&&o.refCount++,u!=null&&gc(u))}function Qm(o,a){o=null,a.alternate!==null&&(o=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==o&&(a.refCount++,o!=null&&gc(o))}function ii(o,a,u,f){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)Ax(o,a,u,f),a=a.sibling}function Ax(o,a,u,f){var y=a.flags;switch(a.tag){case 0:case 11:case 15:ii(o,a,u,f),y&2048&&Mc(9,a);break;case 1:ii(o,a,u,f);break;case 3:ii(o,a,u,f),y&2048&&(o=null,a.alternate!==null&&(o=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==o&&(a.refCount++,o!=null&&gc(o)));break;case 12:if(y&2048){ii(o,a,u,f),o=a.stateNode;try{var x=a.memoizedProps,C=x.id,M=x.onPostCommit;typeof M=="function"&&M(C,a.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(L){jt(a,a.return,L)}}else ii(o,a,u,f);break;case 31:ii(o,a,u,f);break;case 13:ii(o,a,u,f);break;case 23:break;case 22:x=a.stateNode,C=a.alternate,a.memoizedState!==null?x._visibility&2?ii(o,a,u,f):Oc(o,a):x._visibility&2?ii(o,a,u,f):(x._visibility|=2,rl(o,a,u,f,(a.subtreeFlags&10256)!==0||!1)),y&2048&&Jm(C,a);break;case 24:ii(o,a,u,f),y&2048&&Qm(a.alternate,a);break;default:ii(o,a,u,f)}}function rl(o,a,u,f,y){for(y=y&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var x=o,C=a,M=u,L=f,W=C.flags;switch(C.tag){case 0:case 11:case 15:rl(x,C,M,L,y),Mc(8,C);break;case 23:break;case 22:var J=C.stateNode;C.memoizedState!==null?J._visibility&2?rl(x,C,M,L,y):Oc(x,C):(J._visibility|=2,rl(x,C,M,L,y)),y&&W&2048&&Jm(C.alternate,C);break;case 24:rl(x,C,M,L,y),y&&W&2048&&Qm(C.alternate,C);break;default:rl(x,C,M,L,y)}a=a.sibling}}function Oc(o,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var u=o,f=a,y=f.flags;switch(f.tag){case 22:Oc(u,f),y&2048&&Jm(f.alternate,f);break;case 24:Oc(u,f),y&2048&&Qm(f.alternate,f);break;default:Oc(u,f)}a=a.sibling}}var Rc=8192;function il(o,a,u){if(o.subtreeFlags&Rc)for(o=o.child;o!==null;)Mx(o,a,u),o=o.sibling}function Mx(o,a,u){switch(o.tag){case 26:il(o,a,u),o.flags&Rc&&o.memoizedState!==null&&vj(u,ri,o.memoizedState,o.memoizedProps);break;case 5:il(o,a,u);break;case 3:case 4:var f=ri;ri=of(o.stateNode.containerInfo),il(o,a,u),ri=f;break;case 22:o.memoizedState===null&&(f=o.alternate,f!==null&&f.memoizedState!==null?(f=Rc,Rc=16777216,il(o,a,u),Rc=f):il(o,a,u));break;default:il(o,a,u)}}function jx(o){var a=o.alternate;if(a!==null&&(o=a.child,o!==null)){a.child=null;do a=o.sibling,o.sibling=null,o=a;while(o!==null)}}function Nc(o){var a=o.deletions;if((o.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var f=a[u];An=f,Rx(f,o)}jx(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Ox(o),o=o.sibling}function Ox(o){switch(o.tag){case 0:case 11:case 15:Nc(o),o.flags&2048&&Fo(9,o,o.return);break;case 3:Nc(o);break;case 12:Nc(o);break;case 22:var a=o.stateNode;o.memoizedState!==null&&a._visibility&2&&(o.return===null||o.return.tag!==13)?(a._visibility&=-3,Wd(o)):Nc(o);break;default:Nc(o)}}function Wd(o){var a=o.deletions;if((o.flags&16)!==0){if(a!==null)for(var u=0;u<a.length;u++){var f=a[u];An=f,Rx(f,o)}jx(o)}for(o=o.child;o!==null;){switch(a=o,a.tag){case 0:case 11:case 15:Fo(8,a,a.return),Wd(a);break;case 22:u=a.stateNode,u._visibility&2&&(u._visibility&=-3,Wd(a));break;default:Wd(a)}o=o.sibling}}function Rx(o,a){for(;An!==null;){var u=An;switch(u.tag){case 0:case 11:case 15:Fo(8,u,a);break;case 23:case 22:if(u.memoizedState!==null&&u.memoizedState.cachePool!==null){var f=u.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:gc(u.memoizedState.cache)}if(f=u.child,f!==null)f.return=u,An=f;else e:for(u=o;An!==null;){f=An;var y=f.sibling,x=f.return;if(Ex(f),f===u){An=null;break e}if(y!==null){y.return=x,An=y;break e}An=x}}}var RM={getCacheForType:function(o){var a=Ln(gn),u=a.data.get(o);return u===void 0&&(u=o(),a.data.set(o,u)),u},cacheSignal:function(){return Ln(gn).controller.signal}},NM=typeof WeakMap=="function"?WeakMap:Map,Tt=0,Lt=null,dt=null,pt=0,Mt=0,Er=null,Vo=!1,ol=!1,Zm=!1,io=0,an=0,Wo=0,na=0,eg=0,kr=0,sl=0,Dc=null,dr=null,tg=!1,$d=0,Nx=0,Gd=1/0,Kd=null,$o=null,wn=0,Go=null,al=null,oo=0,ng=0,rg=null,Dx=null,zc=0,ig=null;function wr(){return(Tt&2)!==0&&pt!==0?pt&-pt:q.T!==null?ug():Qn()}function zx(){if(kr===0)if((pt&536870912)===0||vt){var o=zs;zs<<=1,(zs&3932160)===0&&(zs=262144),kr=o}else kr=536870912;return o=xr.current,o!==null&&(o.flags|=32),kr}function fr(o,a,u){(o===Lt&&(Mt===2||Mt===9)||o.cancelPendingCommit!==null)&&(ll(o,0),Ko(o,pt,kr,!1)),Hi(o,u),((Tt&2)===0||o!==Lt)&&(o===Lt&&((Tt&2)===0&&(na|=u),an===4&&Ko(o,pt,kr,!1)),Ei(o))}function Lx(o,a,u){if((Tt&6)!==0)throw Error(r(327));var f=!u&&(a&127)===0&&(a&o.expiredLanes)===0||Zr(o,a),y=f?LM(o,a):sg(o,a,!0),x=f;do{if(y===0){ol&&!f&&Ko(o,a,0,!1);break}else{if(u=o.current.alternate,x&&!DM(u)){y=sg(o,a,!1),x=!1;continue}if(y===2){if(x=a,o.errorRecoveryDisabledLanes&x)var C=0;else C=o.pendingLanes&-536870913,C=C!==0?C:C&536870912?536870912:0;if(C!==0){a=C;e:{var M=o;y=Dc;var L=M.current.memoizedState.isDehydrated;if(L&&(ll(M,C).flags|=256),C=sg(M,C,!1),C!==2){if(Zm&&!L){M.errorRecoveryDisabledLanes|=x,na|=x,y=4;break e}x=dr,dr=y,x!==null&&(dr===null?dr=x:dr.push.apply(dr,x))}y=C}if(x=!1,y!==2)continue}}if(y===1){ll(o,0),Ko(o,a,0,!0);break}e:{switch(f=o,x=y,x){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:Ko(f,a,kr,!Vo);break e;case 2:dr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(y=$d+300-Pe(),10<y)){if(Ko(f,a,kr,!Vo),Co(f,0,!0)!==0)break e;oo=a,f.timeoutHandle=hS(Ix.bind(null,f,u,dr,Kd,tg,a,kr,na,sl,Vo,x,"Throttled",-0,0),y);break e}Ix(f,u,dr,Kd,tg,a,kr,na,sl,Vo,x,null,-0,0)}}break}while(!0);Ei(o)}function Ix(o,a,u,f,y,x,C,M,L,W,J,ee,$,Y){if(o.timeoutHandle=-1,ee=a.subtreeFlags,ee&8192||(ee&16785408)===16785408){ee={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:De},Mx(a,x,ee);var je=(x&62914560)===x?$d-Pe():(x&4194048)===x?Nx-Pe():0;if(je=yj(ee,je),je!==null){oo=x,o.cancelPendingCommit=je(Wx.bind(null,o,a,x,u,f,y,C,M,L,J,ee,null,$,Y)),Ko(o,x,C,!W);return}}Wx(o,a,x,u,f,y,C,M,L)}function DM(o){for(var a=o;;){var u=a.tag;if((u===0||u===11||u===15)&&a.flags&16384&&(u=a.updateQueue,u!==null&&(u=u.stores,u!==null)))for(var f=0;f<u.length;f++){var y=u[f],x=y.getSnapshot;y=y.value;try{if(!yr(x(),y))return!1}catch{return!1}}if(u=a.child,a.subtreeFlags&16384&&u!==null)u.return=a,a=u;else{if(a===o)break;for(;a.sibling===null;){if(a.return===null||a.return===o)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Ko(o,a,u,f){a&=~eg,a&=~na,o.suspendedLanes|=a,o.pingedLanes&=~a,f&&(o.warmLanes|=a),f=o.expirationTimes;for(var y=a;0<y;){var x=31-_n(y),C=1<<x;f[x]=-1,y&=~C}u!==0&&rd(o,u,a)}function Yd(){return(Tt&6)===0?(Lc(0),!1):!0}function og(){if(dt!==null){if(Mt===0)var o=dt.return;else o=dt,Ki=Gs=null,Sm(o),Qa=null,yc=0,o=dt;for(;o!==null;)px(o.alternate,o),o=o.return;dt=null}}function ll(o,a){var u=o.timeoutHandle;u!==-1&&(o.timeoutHandle=-1,ej(u)),u=o.cancelPendingCommit,u!==null&&(o.cancelPendingCommit=null,u()),oo=0,og(),Lt=o,dt=u=$i(o.current,null),pt=a,Mt=0,Er=null,Vo=!1,ol=Zr(o,a),Zm=!1,sl=kr=eg=na=Wo=an=0,dr=Dc=null,tg=!1,(a&8)!==0&&(a|=a&32);var f=o.entangledLanes;if(f!==0)for(o=o.entanglements,f&=a;0<f;){var y=31-_n(f),x=1<<y;a|=o[y],f&=~x}return io=a,gd(),u}function Px(o,a){et=null,q.H=Tc,a===Ja||a===wd?(a=e1(),Mt=3):a===cm?(a=e1(),Mt=4):Mt=a===Im?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,Er=a,dt===null&&(an=1,Pd(o,zr(a,o.current)))}function Bx(){var o=xr.current;return o===null?!0:(pt&4194048)===pt?Br===null:(pt&62914560)===pt||(pt&536870912)!==0?o===Br:!1}function Ux(){var o=q.H;return q.H=Tc,o===null?Tc:o}function Hx(){var o=q.A;return q.A=RM,o}function Xd(){an=4,Vo||(pt&4194048)!==pt&&xr.current!==null||(ol=!0),(Wo&134217727)===0&&(na&134217727)===0||Lt===null||Ko(Lt,pt,kr,!1)}function sg(o,a,u){var f=Tt;Tt|=2;var y=Ux(),x=Hx();(Lt!==o||pt!==a)&&(Kd=null,ll(o,a)),a=!1;var C=an;e:do try{if(Mt!==0&&dt!==null){var M=dt,L=Er;switch(Mt){case 8:og(),C=6;break e;case 3:case 2:case 9:case 6:xr.current===null&&(a=!0);var W=Mt;if(Mt=0,Er=null,cl(o,M,L,W),u&&ol){C=0;break e}break;default:W=Mt,Mt=0,Er=null,cl(o,M,L,W)}}zM(),C=an;break}catch(J){Px(o,J)}while(!0);return a&&o.shellSuspendCounter++,Ki=Gs=null,Tt=f,q.H=y,q.A=x,dt===null&&(Lt=null,pt=0,gd()),C}function zM(){for(;dt!==null;)qx(dt)}function LM(o,a){var u=Tt;Tt|=2;var f=Ux(),y=Hx();Lt!==o||pt!==a?(Kd=null,Gd=Pe()+500,ll(o,a)):ol=Zr(o,a);e:do try{if(Mt!==0&&dt!==null){a=dt;var x=Er;t:switch(Mt){case 1:Mt=0,Er=null,cl(o,a,x,1);break;case 2:case 9:if(Qb(x)){Mt=0,Er=null,Fx(a);break}a=function(){Mt!==2&&Mt!==9||Lt!==o||(Mt=7),Ei(o)},x.then(a,a);break e;case 3:Mt=7;break e;case 4:Mt=5;break e;case 7:Qb(x)?(Mt=0,Er=null,Fx(a)):(Mt=0,Er=null,cl(o,a,x,7));break;case 5:var C=null;switch(dt.tag){case 26:C=dt.memoizedState;case 5:case 27:var M=dt;if(C?AS(C):M.stateNode.complete){Mt=0,Er=null;var L=M.sibling;if(L!==null)dt=L;else{var W=M.return;W!==null?(dt=W,Jd(W)):dt=null}break t}}Mt=0,Er=null,cl(o,a,x,5);break;case 6:Mt=0,Er=null,cl(o,a,x,6);break;case 8:og(),an=6;break e;default:throw Error(r(462))}}IM();break}catch(J){Px(o,J)}while(!0);return Ki=Gs=null,q.H=f,q.A=y,Tt=u,dt!==null?0:(Lt=null,pt=0,gd(),an)}function IM(){for(;dt!==null&&!Ns();)qx(dt)}function qx(o){var a=fx(o.alternate,o,io);o.memoizedProps=o.pendingProps,a===null?Jd(o):dt=a}function Fx(o){var a=o,u=a.alternate;switch(a.tag){case 15:case 0:a=sx(u,a,a.pendingProps,a.type,void 0,pt);break;case 11:a=sx(u,a,a.pendingProps,a.type.render,a.ref,pt);break;case 5:Sm(a);default:px(u,a),a=dt=Hb(a,io),a=fx(u,a,io)}o.memoizedProps=o.pendingProps,a===null?Jd(o):dt=a}function cl(o,a,u,f){Ki=Gs=null,Sm(a),Qa=null,yc=0;var y=a.return;try{if(CM(o,y,a,u,pt)){an=1,Pd(o,zr(u,o.current)),dt=null;return}}catch(x){if(y!==null)throw dt=y,x;an=1,Pd(o,zr(u,o.current)),dt=null;return}a.flags&32768?(vt||f===1?o=!0:ol||(pt&536870912)!==0?o=!1:(Vo=o=!0,(f===2||f===9||f===3||f===6)&&(f=xr.current,f!==null&&f.tag===13&&(f.flags|=16384))),Vx(a,o)):Jd(a)}function Jd(o){var a=o;do{if((a.flags&32768)!==0){Vx(a,Vo);return}o=a.return;var u=AM(a.alternate,a,io);if(u!==null){dt=u;return}if(a=a.sibling,a!==null){dt=a;return}dt=a=o}while(a!==null);an===0&&(an=5)}function Vx(o,a){do{var u=MM(o.alternate,o);if(u!==null){u.flags&=32767,dt=u;return}if(u=o.return,u!==null&&(u.flags|=32768,u.subtreeFlags=0,u.deletions=null),!a&&(o=o.sibling,o!==null)){dt=o;return}dt=o=u}while(o!==null);an=6,dt=null}function Wx(o,a,u,f,y,x,C,M,L){o.cancelPendingCommit=null;do Qd();while(wn!==0);if((Tt&6)!==0)throw Error(r(327));if(a!==null){if(a===o.current)throw Error(r(177));if(x=a.lanes|a.childLanes,x|=Kp,To(o,u,x,C,M,L),o===Lt&&(dt=Lt=null,pt=0),al=a,Go=o,oo=u,ng=x,rg=y,Dx=f,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,HM(un,function(){return Xx(),null})):(o.callbackNode=null,o.callbackPriority=0),f=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||f){f=q.T,q.T=null,y=te.p,te.p=2,C=Tt,Tt|=4;try{jM(o,a,u)}finally{Tt=C,te.p=y,q.T=f}}wn=1,$x(),Gx(),Kx()}}function $x(){if(wn===1){wn=0;var o=Go,a=al,u=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||u){u=q.T,q.T=null;var f=te.p;te.p=2;var y=Tt;Tt|=4;try{Tx(a,o);var x=yg,C=Rb(o.containerInfo),M=x.focusedElem,L=x.selectionRange;if(C!==M&&M&&M.ownerDocument&&Ob(M.ownerDocument.documentElement,M)){if(L!==null&&Fp(M)){var W=L.start,J=L.end;if(J===void 0&&(J=W),"selectionStart"in M)M.selectionStart=W,M.selectionEnd=Math.min(J,M.value.length);else{var ee=M.ownerDocument||document,$=ee&&ee.defaultView||window;if($.getSelection){var Y=$.getSelection(),je=M.textContent.length,Ve=Math.min(L.start,je),zt=L.end===void 0?Ve:Math.min(L.end,je);!Y.extend&&Ve>zt&&(C=zt,zt=Ve,Ve=C);var U=jb(M,Ve),B=jb(M,zt);if(U&&B&&(Y.rangeCount!==1||Y.anchorNode!==U.node||Y.anchorOffset!==U.offset||Y.focusNode!==B.node||Y.focusOffset!==B.offset)){var F=ee.createRange();F.setStart(U.node,U.offset),Y.removeAllRanges(),Ve>zt?(Y.addRange(F),Y.extend(B.node,B.offset)):(F.setEnd(B.node,B.offset),Y.addRange(F))}}}}for(ee=[],Y=M;Y=Y.parentNode;)Y.nodeType===1&&ee.push({element:Y,left:Y.scrollLeft,top:Y.scrollTop});for(typeof M.focus=="function"&&M.focus(),M=0;M<ee.length;M++){var Z=ee[M];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}df=!!vg,yg=vg=null}finally{Tt=y,te.p=f,q.T=u}}o.current=a,wn=2}}function Gx(){if(wn===2){wn=0;var o=Go,a=al,u=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||u){u=q.T,q.T=null;var f=te.p;te.p=2;var y=Tt;Tt|=4;try{Sx(o,a.alternate,a)}finally{Tt=y,te.p=f,q.T=u}}wn=3}}function Kx(){if(wn===4||wn===3){wn=0,ec();var o=Go,a=al,u=oo,f=Dx;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?wn=5:(wn=0,al=Go=null,Yx(o,o.pendingLanes));var y=o.pendingLanes;if(y===0&&($o=null),rc(u),a=a.stateNode,rn&&typeof rn.onCommitFiberRoot=="function")try{rn.onCommitFiberRoot(vr,a,void 0,(a.current.flags&128)===128)}catch{}if(f!==null){a=q.T,y=te.p,te.p=2,q.T=null;try{for(var x=o.onRecoverableError,C=0;C<f.length;C++){var M=f[C];x(M.value,{componentStack:M.stack})}}finally{q.T=a,te.p=y}}(oo&3)!==0&&Qd(),Ei(o),y=o.pendingLanes,(u&261930)!==0&&(y&42)!==0?o===ig?zc++:(zc=0,ig=o):zc=0,Lc(0)}}function Yx(o,a){(o.pooledCacheLanes&=a)===0&&(a=o.pooledCache,a!=null&&(o.pooledCache=null,gc(a)))}function Qd(){return $x(),Gx(),Kx(),Xx()}function Xx(){if(wn!==5)return!1;var o=Go,a=ng;ng=0;var u=rc(oo),f=q.T,y=te.p;try{te.p=32>u?32:u,q.T=null,u=rg,rg=null;var x=Go,C=oo;if(wn=0,al=Go=null,oo=0,(Tt&6)!==0)throw Error(r(331));var M=Tt;if(Tt|=4,Ox(x.current),Ax(x,x.current,C,u),Tt=M,Lc(0,!1),rn&&typeof rn.onPostCommitFiberRoot=="function")try{rn.onPostCommitFiberRoot(vr,x)}catch{}return!0}finally{te.p=y,q.T=f,Yx(o,a)}}function Jx(o,a,u){a=zr(u,a),a=Lm(o.stateNode,a,2),o=Uo(o,a,2),o!==null&&(Hi(o,2),Ei(o))}function jt(o,a,u){if(o.tag===3)Jx(o,o,u);else for(;a!==null;){if(a.tag===3){Jx(a,o,u);break}else if(a.tag===1){var f=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&($o===null||!$o.has(f))){o=zr(u,o),u=Q1(2),f=Uo(a,u,2),f!==null&&(Z1(u,f,a,o),Hi(f,2),Ei(f));break}}a=a.return}}function ag(o,a,u){var f=o.pingCache;if(f===null){f=o.pingCache=new NM;var y=new Set;f.set(a,y)}else y=f.get(a),y===void 0&&(y=new Set,f.set(a,y));y.has(u)||(Zm=!0,y.add(u),o=PM.bind(null,o,a,u),a.then(o,o))}function PM(o,a,u){var f=o.pingCache;f!==null&&f.delete(a),o.pingedLanes|=o.suspendedLanes&u,o.warmLanes&=~u,Lt===o&&(pt&u)===u&&(an===4||an===3&&(pt&62914560)===pt&&300>Pe()-$d?(Tt&2)===0&&ll(o,0):eg|=u,sl===pt&&(sl=0)),Ei(o)}function Qx(o,a){a===0&&(a=nd()),o=Vs(o,a),o!==null&&(Hi(o,a),Ei(o))}function BM(o){var a=o.memoizedState,u=0;a!==null&&(u=a.retryLane),Qx(o,u)}function UM(o,a){var u=0;switch(o.tag){case 31:case 13:var f=o.stateNode,y=o.memoizedState;y!==null&&(u=y.retryLane);break;case 19:f=o.stateNode;break;case 22:f=o.stateNode._retryCache;break;default:throw Error(r(314))}f!==null&&f.delete(a),Qx(o,u)}function HM(o,a){return Jr(o,a)}var Zd=null,ul=null,lg=!1,ef=!1,cg=!1,Yo=0;function Ei(o){o!==ul&&o.next===null&&(ul===null?Zd=ul=o:ul=ul.next=o),ef=!0,lg||(lg=!0,FM())}function Lc(o,a){if(!cg&&ef){cg=!0;do for(var u=!1,f=Zd;f!==null;){if(o!==0){var y=f.pendingLanes;if(y===0)var x=0;else{var C=f.suspendedLanes,M=f.pingedLanes;x=(1<<31-_n(42|o)+1)-1,x&=y&~(C&~M),x=x&201326741?x&201326741|1:x?x|2:0}x!==0&&(u=!0,nS(f,x))}else x=pt,x=Co(f,f===Lt?x:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(x&3)===0||Zr(f,x)||(u=!0,nS(f,x));f=f.next}while(u);cg=!1}}function qM(){Zx()}function Zx(){ef=lg=!1;var o=0;Yo!==0&&ZM()&&(o=Yo);for(var a=Pe(),u=null,f=Zd;f!==null;){var y=f.next,x=eS(f,a);x===0?(f.next=null,u===null?Zd=y:u.next=y,y===null&&(ul=u)):(u=f,(o!==0||(x&3)!==0)&&(ef=!0)),f=y}wn!==0&&wn!==5||Lc(o),Yo!==0&&(Yo=0)}function eS(o,a){for(var u=o.suspendedLanes,f=o.pingedLanes,y=o.expirationTimes,x=o.pendingLanes&-62914561;0<x;){var C=31-_n(x),M=1<<C,L=y[C];L===-1?((M&u)===0||(M&f)!==0)&&(y[C]=Ls(M,a)):L<=a&&(o.expiredLanes|=M),x&=~M}if(a=Lt,u=pt,u=Co(o,o===a?u:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),f=o.callbackNode,u===0||o===a&&(Mt===2||Mt===9)||o.cancelPendingCommit!==null)return f!==null&&f!==null&&pi(f),o.callbackNode=null,o.callbackPriority=0;if((u&3)===0||Zr(o,u)){if(a=u&-u,a===o.callbackPriority)return a;switch(f!==null&&pi(f),rc(u)){case 2:case 8:u=ir;break;case 32:u=un;break;case 268435456:u=Jn;break;default:u=un}return f=tS.bind(null,o),u=Jr(u,f),o.callbackPriority=a,o.callbackNode=u,a}return f!==null&&f!==null&&pi(f),o.callbackPriority=2,o.callbackNode=null,2}function tS(o,a){if(wn!==0&&wn!==5)return o.callbackNode=null,o.callbackPriority=0,null;var u=o.callbackNode;if(Qd()&&o.callbackNode!==u)return null;var f=pt;return f=Co(o,o===Lt?f:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),f===0?null:(Lx(o,f,a),eS(o,Pe()),o.callbackNode!=null&&o.callbackNode===u?tS.bind(null,o):null)}function nS(o,a){if(Qd())return null;Lx(o,a,!0)}function FM(){tj(function(){(Tt&6)!==0?Jr(Ht,qM):Zx()})}function ug(){if(Yo===0){var o=Ka;o===0&&(o=wo,wo<<=1,(wo&261888)===0&&(wo=256)),Yo=o}return Yo}function rS(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:_e(""+o)}function iS(o,a){var u=a.ownerDocument.createElement("input");return u.name=a.name,u.value=a.value,o.id&&u.setAttribute("form",o.id),a.parentNode.insertBefore(u,a),o=new FormData(o),u.parentNode.removeChild(u),o}function VM(o,a,u,f,y){if(a==="submit"&&u&&u.stateNode===y){var x=rS((y[Dn]||null).action),C=f.submitter;C&&(a=(a=C[Dn]||null)?rS(a.formAction):C.getAttribute("formAction"),a!==null&&(x=a,C=null));var M=new fd("action","action",null,f,y);o.push({event:M,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(Yo!==0){var L=C?iS(y,C):new FormData(y);jm(u,{pending:!0,data:L,method:y.method,action:x},null,L)}}else typeof x=="function"&&(M.preventDefault(),L=C?iS(y,C):new FormData(y),jm(u,{pending:!0,data:L,method:y.method,action:x},x,L))},currentTarget:y}]})}}for(var dg=0;dg<Gp.length;dg++){var fg=Gp[dg],WM=fg.toLowerCase(),$M=fg[0].toUpperCase()+fg.slice(1);ni(WM,"on"+$M)}ni(zb,"onAnimationEnd"),ni(Lb,"onAnimationIteration"),ni(Ib,"onAnimationStart"),ni("dblclick","onDoubleClick"),ni("focusin","onFocus"),ni("focusout","onBlur"),ni(lM,"onTransitionRun"),ni(cM,"onTransitionStart"),ni(uM,"onTransitionCancel"),ni(Pb,"onTransitionEnd"),Vn("onMouseEnter",["mouseout","mouseover"]),Vn("onMouseLeave",["mouseout","mouseover"]),Vn("onPointerEnter",["pointerout","pointerover"]),Vn("onPointerLeave",["pointerout","pointerover"]),Fi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Fi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Fi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Fi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Fi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Fi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ic="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),GM=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ic));function oS(o,a){a=(a&4)!==0;for(var u=0;u<o.length;u++){var f=o[u],y=f.event;f=f.listeners;e:{var x=void 0;if(a)for(var C=f.length-1;0<=C;C--){var M=f[C],L=M.instance,W=M.currentTarget;if(M=M.listener,L!==x&&y.isPropagationStopped())break e;x=M,y.currentTarget=W;try{x(y)}catch(J){md(J)}y.currentTarget=null,x=L}else for(C=0;C<f.length;C++){if(M=f[C],L=M.instance,W=M.currentTarget,M=M.listener,L!==x&&y.isPropagationStopped())break e;x=M,y.currentTarget=W;try{x(y)}catch(J){md(J)}y.currentTarget=null,x=L}}}}function ft(o,a){var u=a[La];u===void 0&&(u=a[La]=new Set);var f=o+"__bubble";u.has(f)||(sS(a,o,2,!1),u.add(f))}function hg(o,a,u){var f=0;a&&(f|=4),sS(u,o,f,a)}var tf="_reactListening"+Math.random().toString(36).slice(2);function pg(o){if(!o[tf]){o[tf]=!0,ad.forEach(function(u){u!=="selectionchange"&&(GM.has(u)||hg(u,!1,o),hg(u,!0,o))});var a=o.nodeType===9?o:o.ownerDocument;a===null||a[tf]||(a[tf]=!0,hg("selectionchange",!1,a))}}function sS(o,a,u,f){switch(zS(a)){case 2:var y=Sj;break;case 8:y=Ej;break;default:y=Mg}u=y.bind(null,a,u,o),y=void 0,!Ps||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(y=!0),f?y!==void 0?o.addEventListener(a,u,{capture:!0,passive:y}):o.addEventListener(a,u,!0):y!==void 0?o.addEventListener(a,u,{passive:y}):o.addEventListener(a,u,!1)}function mg(o,a,u,f,y){var x=f;if((a&1)===0&&(a&2)===0&&f!==null)e:for(;;){if(f===null)return;var C=f.tag;if(C===3||C===4){var M=f.stateNode.containerInfo;if(M===y)break;if(C===4)for(C=f.return;C!==null;){var L=C.tag;if((L===3||L===4)&&C.stateNode.containerInfo===y)return;C=C.return}for(;M!==null;){if(C=Ao(M),C===null)return;if(L=C.tag,L===5||L===6||L===26||L===27){f=x=C;continue e}M=M.parentNode}}f=f.return}sc(function(){var W=x,J=Oe(u),ee=[];e:{var $=Bb.get(o);if($!==void 0){var Y=fd,je=o;switch(o){case"keypress":if(Us(u)===0)break e;case"keydown":case"keyup":Y=UA;break;case"focusin":je="focus",Y=Pp;break;case"focusout":je="blur",Y=Pp;break;case"beforeblur":case"afterblur":Y=Pp;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Y=pb;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Y=AA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Y=FA;break;case zb:case Lb:case Ib:Y=OA;break;case Pb:Y=WA;break;case"scroll":case"scrollend":Y=TA;break;case"wheel":Y=GA;break;case"copy":case"cut":case"paste":Y=NA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Y=gb;break;case"toggle":case"beforetoggle":Y=YA}var Ve=(a&4)!==0,zt=!Ve&&(o==="scroll"||o==="scrollend"),U=Ve?$!==null?$+"Capture":null:$;Ve=[];for(var B=W,F;B!==null;){var Z=B;if(F=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||F===null||U===null||(Z=No(B,U),Z!=null&&Ve.push(Pc(B,Z,F))),zt)break;B=B.return}0<Ve.length&&($=new Y($,je,null,u,J),ee.push({event:$,listeners:Ve}))}}if((a&7)===0){e:{if($=o==="mouseover"||o==="pointerover",Y=o==="mouseout"||o==="pointerout",$&&u!==Wt&&(je=u.relatedTarget||u.fromElement)&&(Ao(je)||je[qi]))break e;if((Y||$)&&($=J.window===J?J:($=J.ownerDocument)?$.defaultView||$.parentWindow:window,Y?(je=u.relatedTarget||u.toElement,Y=W,je=je?Ao(je):null,je!==null&&(zt=s(je),Ve=je.tag,je!==zt||Ve!==5&&Ve!==27&&Ve!==6)&&(je=null)):(Y=null,je=W),Y!==je)){if(Ve=pb,Z="onMouseLeave",U="onMouseEnter",B="mouse",(o==="pointerout"||o==="pointerover")&&(Ve=gb,Z="onPointerLeave",U="onPointerEnter",B="pointer"),zt=Y==null?$:Is(Y),F=je==null?$:Is(je),$=new Ve(Z,B+"leave",Y,u,J),$.target=zt,$.relatedTarget=F,Z=null,Ao(J)===W&&(Ve=new Ve(U,B+"enter",je,u,J),Ve.target=F,Ve.relatedTarget=zt,Z=Ve),zt=Z,Y&&je)t:{for(Ve=KM,U=Y,B=je,F=0,Z=U;Z;Z=Ve(Z))F++;Z=0;for(var Ue=B;Ue;Ue=Ve(Ue))Z++;for(;0<F-Z;)U=Ve(U),F--;for(;0<Z-F;)B=Ve(B),Z--;for(;F--;){if(U===B||B!==null&&U===B.alternate){Ve=U;break t}U=Ve(U),B=Ve(B)}Ve=null}else Ve=null;Y!==null&&aS(ee,$,Y,Ve,!1),je!==null&&zt!==null&&aS(ee,zt,je,Ve,!0)}}e:{if($=W?Is(W):window,Y=$.nodeName&&$.nodeName.toLowerCase(),Y==="select"||Y==="input"&&$.type==="file")var Et=wb;else if(Eb($))if(Cb)Et=oM;else{Et=rM;var ze=nM}else Y=$.nodeName,!Y||Y.toLowerCase()!=="input"||$.type!=="checkbox"&&$.type!=="radio"?W&&St(W.elementType)&&(Et=wb):Et=iM;if(Et&&(Et=Et(o,W))){kb(ee,Et,u,J);break e}ze&&ze(o,$,W),o==="focusout"&&W&&$.type==="number"&&W.memoizedProps.value!=null&&G($,"number",$.value)}switch(ze=W?Is(W):window,o){case"focusin":(Eb(ze)||ze.contentEditable==="true")&&(Ua=ze,Vp=W,hc=null);break;case"focusout":hc=Vp=Ua=null;break;case"mousedown":Wp=!0;break;case"contextmenu":case"mouseup":case"dragend":Wp=!1,Nb(ee,u,J);break;case"selectionchange":if(aM)break;case"keydown":case"keyup":Nb(ee,u,J)}var nt;if(Up)e:{switch(o){case"compositionstart":var mt="onCompositionStart";break e;case"compositionend":mt="onCompositionEnd";break e;case"compositionupdate":mt="onCompositionUpdate";break e}mt=void 0}else Ba?xb(o,u)&&(mt="onCompositionEnd"):o==="keydown"&&u.keyCode===229&&(mt="onCompositionStart");mt&&(vb&&u.locale!=="ko"&&(Ba||mt!=="onCompositionStart"?mt==="onCompositionEnd"&&Ba&&(nt=Wi()):(yi=J,Ee="value"in yi?yi.value:yi.textContent,Ba=!0)),ze=nf(W,mt),0<ze.length&&(mt=new mb(mt,o,null,u,J),ee.push({event:mt,listeners:ze}),nt?mt.data=nt:(nt=Sb(u),nt!==null&&(mt.data=nt)))),(nt=JA?QA(o,u):ZA(o,u))&&(mt=nf(W,"onBeforeInput"),0<mt.length&&(ze=new mb("onBeforeInput","beforeinput",null,u,J),ee.push({event:ze,listeners:mt}),ze.data=nt)),VM(ee,o,W,u,J)}oS(ee,a)})}function Pc(o,a,u){return{instance:o,listener:a,currentTarget:u}}function nf(o,a){for(var u=a+"Capture",f=[];o!==null;){var y=o,x=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||x===null||(y=No(o,u),y!=null&&f.unshift(Pc(o,y,x)),y=No(o,a),y!=null&&f.push(Pc(o,y,x))),o.tag===3)return f;o=o.return}return[]}function KM(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function aS(o,a,u,f,y){for(var x=a._reactName,C=[];u!==null&&u!==f;){var M=u,L=M.alternate,W=M.stateNode;if(M=M.tag,L!==null&&L===f)break;M!==5&&M!==26&&M!==27||W===null||(L=W,y?(W=No(u,x),W!=null&&C.unshift(Pc(u,W,L))):y||(W=No(u,x),W!=null&&C.push(Pc(u,W,L)))),u=u.return}C.length!==0&&o.push({event:a,listeners:C})}var YM=/\r\n?/g,XM=/\u0000|\uFFFD/g;function lS(o){return(typeof o=="string"?o:""+o).replace(YM,`
`).replace(XM,"")}function cS(o,a){return a=lS(a),lS(o)===a}function Dt(o,a,u,f,y,x){switch(u){case"children":typeof f=="string"?a==="body"||a==="textarea"&&f===""||we(o,f):(typeof f=="number"||typeof f=="bigint")&&a!=="body"&&we(o,""+f);break;case"className":vi(o,"class",f);break;case"tabIndex":vi(o,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":vi(o,u,f);break;case"style":lt(o,f,x);break;case"data":if(a!=="object"){vi(o,"data",f);break}case"src":case"href":if(f===""&&(a!=="a"||u!=="href")){o.removeAttribute(u);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){o.removeAttribute(u);break}f=_e(""+f),o.setAttribute(u,f);break;case"action":case"formAction":if(typeof f=="function"){o.setAttribute(u,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof x=="function"&&(u==="formAction"?(a!=="input"&&Dt(o,a,"name",y.name,y,null),Dt(o,a,"formEncType",y.formEncType,y,null),Dt(o,a,"formMethod",y.formMethod,y,null),Dt(o,a,"formTarget",y.formTarget,y,null)):(Dt(o,a,"encType",y.encType,y,null),Dt(o,a,"method",y.method,y,null),Dt(o,a,"target",y.target,y,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){o.removeAttribute(u);break}f=_e(""+f),o.setAttribute(u,f);break;case"onClick":f!=null&&(o.onclick=De);break;case"onScroll":f!=null&&ft("scroll",o);break;case"onScrollEnd":f!=null&&ft("scrollend",o);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(r(61));if(u=f.__html,u!=null){if(y.children!=null)throw Error(r(60));o.innerHTML=u}}break;case"multiple":o.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":o.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){o.removeAttribute("xlink:href");break}u=_e(""+f),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",u);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?o.setAttribute(u,""+f):o.removeAttribute(u);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?o.setAttribute(u,""):o.removeAttribute(u);break;case"capture":case"download":f===!0?o.setAttribute(u,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?o.setAttribute(u,f):o.removeAttribute(u);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?o.setAttribute(u,f):o.removeAttribute(u);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?o.removeAttribute(u):o.setAttribute(u,f);break;case"popover":ft("beforetoggle",o),ft("toggle",o),Ia(o,"popover",f);break;case"xlinkActuate":ei(o,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":ei(o,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":ei(o,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":ei(o,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":ei(o,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":ei(o,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":ei(o,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":ei(o,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":ei(o,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":Ia(o,"is",f);break;case"innerText":case"textContent":break;default:(!(2<u.length)||u[0]!=="o"&&u[0]!=="O"||u[1]!=="n"&&u[1]!=="N")&&(u=tt.get(u)||u,Ia(o,u,f))}}function gg(o,a,u,f,y,x){switch(u){case"style":lt(o,f,x);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(r(61));if(u=f.__html,u!=null){if(y.children!=null)throw Error(r(60));o.innerHTML=u}}break;case"children":typeof f=="string"?we(o,f):(typeof f=="number"||typeof f=="bigint")&&we(o,""+f);break;case"onScroll":f!=null&&ft("scroll",o);break;case"onScrollEnd":f!=null&&ft("scrollend",o);break;case"onClick":f!=null&&(o.onclick=De);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Oo.hasOwnProperty(u))e:{if(u[0]==="o"&&u[1]==="n"&&(y=u.endsWith("Capture"),a=u.slice(2,y?u.length-7:void 0),x=o[Dn]||null,x=x!=null?x[u]:null,typeof x=="function"&&o.removeEventListener(a,x,y),typeof f=="function")){typeof x!="function"&&x!==null&&(u in o?o[u]=null:o.hasAttribute(u)&&o.removeAttribute(u)),o.addEventListener(a,f,y);break e}u in o?o[u]=f:f===!0?o.setAttribute(u,""):Ia(o,u,f)}}}function Pn(o,a,u){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ft("error",o),ft("load",o);var f=!1,y=!1,x;for(x in u)if(u.hasOwnProperty(x)){var C=u[x];if(C!=null)switch(x){case"src":f=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Dt(o,a,x,C,u,null)}}y&&Dt(o,a,"srcSet",u.srcSet,u,null),f&&Dt(o,a,"src",u.src,u,null);return;case"input":ft("invalid",o);var M=x=C=y=null,L=null,W=null;for(f in u)if(u.hasOwnProperty(f)){var J=u[f];if(J!=null)switch(f){case"name":y=J;break;case"type":C=J;break;case"checked":L=J;break;case"defaultChecked":W=J;break;case"value":x=J;break;case"defaultValue":M=J;break;case"children":case"dangerouslySetInnerHTML":if(J!=null)throw Error(r(137,a));break;default:Dt(o,a,f,J,u,null)}}P(o,x,M,L,W,C,y,!1);return;case"select":ft("invalid",o),f=C=x=null;for(y in u)if(u.hasOwnProperty(y)&&(M=u[y],M!=null))switch(y){case"value":x=M;break;case"defaultValue":C=M;break;case"multiple":f=M;default:Dt(o,a,y,M,u,null)}a=x,u=C,o.multiple=!!f,a!=null?X(o,!!f,a,!1):u!=null&&X(o,!!f,u,!0);return;case"textarea":ft("invalid",o),x=y=f=null;for(C in u)if(u.hasOwnProperty(C)&&(M=u[C],M!=null))switch(C){case"value":f=M;break;case"defaultValue":y=M;break;case"children":x=M;break;case"dangerouslySetInnerHTML":if(M!=null)throw Error(r(91));break;default:Dt(o,a,C,M,u,null)}Me(o,f,y,x);return;case"option":for(L in u)if(u.hasOwnProperty(L)&&(f=u[L],f!=null))switch(L){case"selected":o.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:Dt(o,a,L,f,u,null)}return;case"dialog":ft("beforetoggle",o),ft("toggle",o),ft("cancel",o),ft("close",o);break;case"iframe":case"object":ft("load",o);break;case"video":case"audio":for(f=0;f<Ic.length;f++)ft(Ic[f],o);break;case"image":ft("error",o),ft("load",o);break;case"details":ft("toggle",o);break;case"embed":case"source":case"link":ft("error",o),ft("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(W in u)if(u.hasOwnProperty(W)&&(f=u[W],f!=null))switch(W){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Dt(o,a,W,f,u,null)}return;default:if(St(a)){for(J in u)u.hasOwnProperty(J)&&(f=u[J],f!==void 0&&gg(o,a,J,f,u,void 0));return}}for(M in u)u.hasOwnProperty(M)&&(f=u[M],f!=null&&Dt(o,a,M,f,u,null))}function JM(o,a,u,f){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,x=null,C=null,M=null,L=null,W=null,J=null;for(Y in u){var ee=u[Y];if(u.hasOwnProperty(Y)&&ee!=null)switch(Y){case"checked":break;case"value":break;case"defaultValue":L=ee;default:f.hasOwnProperty(Y)||Dt(o,a,Y,null,f,ee)}}for(var $ in f){var Y=f[$];if(ee=u[$],f.hasOwnProperty($)&&(Y!=null||ee!=null))switch($){case"type":x=Y;break;case"name":y=Y;break;case"checked":W=Y;break;case"defaultChecked":J=Y;break;case"value":C=Y;break;case"defaultValue":M=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(r(137,a));break;default:Y!==ee&&Dt(o,a,$,Y,f,ee)}}N(o,C,M,L,W,J,x,y);return;case"select":Y=C=M=$=null;for(x in u)if(L=u[x],u.hasOwnProperty(x)&&L!=null)switch(x){case"value":break;case"multiple":Y=L;default:f.hasOwnProperty(x)||Dt(o,a,x,null,f,L)}for(y in f)if(x=f[y],L=u[y],f.hasOwnProperty(y)&&(x!=null||L!=null))switch(y){case"value":$=x;break;case"defaultValue":M=x;break;case"multiple":C=x;default:x!==L&&Dt(o,a,y,x,f,L)}a=M,u=C,f=Y,$!=null?X(o,!!u,$,!1):!!f!=!!u&&(a!=null?X(o,!!u,a,!0):X(o,!!u,u?[]:"",!1));return;case"textarea":Y=$=null;for(M in u)if(y=u[M],u.hasOwnProperty(M)&&y!=null&&!f.hasOwnProperty(M))switch(M){case"value":break;case"children":break;default:Dt(o,a,M,null,f,y)}for(C in f)if(y=f[C],x=u[C],f.hasOwnProperty(C)&&(y!=null||x!=null))switch(C){case"value":$=y;break;case"defaultValue":Y=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(r(91));break;default:y!==x&&Dt(o,a,C,y,f,x)}be(o,$,Y);return;case"option":for(var je in u)if($=u[je],u.hasOwnProperty(je)&&$!=null&&!f.hasOwnProperty(je))switch(je){case"selected":o.selected=!1;break;default:Dt(o,a,je,null,f,$)}for(L in f)if($=f[L],Y=u[L],f.hasOwnProperty(L)&&$!==Y&&($!=null||Y!=null))switch(L){case"selected":o.selected=$&&typeof $!="function"&&typeof $!="symbol";break;default:Dt(o,a,L,$,f,Y)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ve in u)$=u[Ve],u.hasOwnProperty(Ve)&&$!=null&&!f.hasOwnProperty(Ve)&&Dt(o,a,Ve,null,f,$);for(W in f)if($=f[W],Y=u[W],f.hasOwnProperty(W)&&$!==Y&&($!=null||Y!=null))switch(W){case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(r(137,a));break;default:Dt(o,a,W,$,f,Y)}return;default:if(St(a)){for(var zt in u)$=u[zt],u.hasOwnProperty(zt)&&$!==void 0&&!f.hasOwnProperty(zt)&&gg(o,a,zt,void 0,f,$);for(J in f)$=f[J],Y=u[J],!f.hasOwnProperty(J)||$===Y||$===void 0&&Y===void 0||gg(o,a,J,$,f,Y);return}}for(var U in u)$=u[U],u.hasOwnProperty(U)&&$!=null&&!f.hasOwnProperty(U)&&Dt(o,a,U,null,f,$);for(ee in f)$=f[ee],Y=u[ee],!f.hasOwnProperty(ee)||$===Y||$==null&&Y==null||Dt(o,a,ee,$,f,Y)}function uS(o){switch(o){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function QM(){if(typeof performance.getEntriesByType=="function"){for(var o=0,a=0,u=performance.getEntriesByType("resource"),f=0;f<u.length;f++){var y=u[f],x=y.transferSize,C=y.initiatorType,M=y.duration;if(x&&M&&uS(C)){for(C=0,M=y.responseEnd,f+=1;f<u.length;f++){var L=u[f],W=L.startTime;if(W>M)break;var J=L.transferSize,ee=L.initiatorType;J&&uS(ee)&&(L=L.responseEnd,C+=J*(L<M?1:(M-W)/(L-W)))}if(--f,a+=8*(x+C)/(y.duration/1e3),o++,10<o)break}}if(0<o)return a/o/1e6}return navigator.connection&&(o=navigator.connection.downlink,typeof o=="number")?o:5}var vg=null,yg=null;function rf(o){return o.nodeType===9?o:o.ownerDocument}function dS(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function fS(o,a){if(o===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&a==="foreignObject"?0:o}function bg(o,a){return o==="textarea"||o==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var xg=null;function ZM(){var o=window.event;return o&&o.type==="popstate"?o===xg?!1:(xg=o,!0):(xg=null,!1)}var hS=typeof setTimeout=="function"?setTimeout:void 0,ej=typeof clearTimeout=="function"?clearTimeout:void 0,pS=typeof Promise=="function"?Promise:void 0,tj=typeof queueMicrotask=="function"?queueMicrotask:typeof pS<"u"?function(o){return pS.resolve(null).then(o).catch(nj)}:hS;function nj(o){setTimeout(function(){throw o})}function Xo(o){return o==="head"}function mS(o,a){var u=a,f=0;do{var y=u.nextSibling;if(o.removeChild(u),y&&y.nodeType===8)if(u=y.data,u==="/$"||u==="/&"){if(f===0){o.removeChild(y),pl(a);return}f--}else if(u==="$"||u==="$?"||u==="$~"||u==="$!"||u==="&")f++;else if(u==="html")Bc(o.ownerDocument.documentElement);else if(u==="head"){u=o.ownerDocument.head,Bc(u);for(var x=u.firstChild;x;){var C=x.nextSibling,M=x.nodeName;x[_o]||M==="SCRIPT"||M==="STYLE"||M==="LINK"&&x.rel.toLowerCase()==="stylesheet"||u.removeChild(x),x=C}}else u==="body"&&Bc(o.ownerDocument.body);u=y}while(u);pl(a)}function gS(o,a){var u=o;o=0;do{var f=u.nextSibling;if(u.nodeType===1?a?(u._stashedDisplay=u.style.display,u.style.display="none"):(u.style.display=u._stashedDisplay||"",u.getAttribute("style")===""&&u.removeAttribute("style")):u.nodeType===3&&(a?(u._stashedText=u.nodeValue,u.nodeValue=""):u.nodeValue=u._stashedText||""),f&&f.nodeType===8)if(u=f.data,u==="/$"){if(o===0)break;o--}else u!=="$"&&u!=="$?"&&u!=="$~"&&u!=="$!"||o++;u=f}while(u)}function Sg(o){var a=o.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var u=a;switch(a=a.nextSibling,u.nodeName){case"HTML":case"HEAD":case"BODY":Sg(u),ic(u);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(u.rel.toLowerCase()==="stylesheet")continue}o.removeChild(u)}}function rj(o,a,u,f){for(;o.nodeType===1;){var y=u;if(o.nodeName.toLowerCase()!==a.toLowerCase()){if(!f&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(f){if(!o[_o])switch(a){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(x=o.getAttribute("rel"),x==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(x!==y.rel||o.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||o.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||o.getAttribute("title")!==(y.title==null?null:y.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(x=o.getAttribute("src"),(x!==(y.src==null?null:y.src)||o.getAttribute("type")!==(y.type==null?null:y.type)||o.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&x&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(a==="input"&&o.type==="hidden"){var x=y.name==null?null:""+y.name;if(y.type==="hidden"&&o.getAttribute("name")===x)return o}else return o;if(o=Ur(o.nextSibling),o===null)break}return null}function ij(o,a,u){if(a==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!u||(o=Ur(o.nextSibling),o===null))return null;return o}function vS(o,a){for(;o.nodeType!==8;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!a||(o=Ur(o.nextSibling),o===null))return null;return o}function Eg(o){return o.data==="$?"||o.data==="$~"}function kg(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState!=="loading"}function oj(o,a){var u=o.ownerDocument;if(o.data==="$~")o._reactRetry=a;else if(o.data!=="$?"||u.readyState!=="loading")a();else{var f=function(){a(),u.removeEventListener("DOMContentLoaded",f)};u.addEventListener("DOMContentLoaded",f),o._reactRetry=f}}function Ur(o){for(;o!=null;o=o.nextSibling){var a=o.nodeType;if(a===1||a===3)break;if(a===8){if(a=o.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return o}var wg=null;function yS(o){o=o.nextSibling;for(var a=0;o;){if(o.nodeType===8){var u=o.data;if(u==="/$"||u==="/&"){if(a===0)return Ur(o.nextSibling);a--}else u!=="$"&&u!=="$!"&&u!=="$?"&&u!=="$~"&&u!=="&"||a++}o=o.nextSibling}return null}function bS(o){o=o.previousSibling;for(var a=0;o;){if(o.nodeType===8){var u=o.data;if(u==="$"||u==="$!"||u==="$?"||u==="$~"||u==="&"){if(a===0)return o;a--}else u!=="/$"&&u!=="/&"||a++}o=o.previousSibling}return null}function xS(o,a,u){switch(a=rf(u),o){case"html":if(o=a.documentElement,!o)throw Error(r(452));return o;case"head":if(o=a.head,!o)throw Error(r(453));return o;case"body":if(o=a.body,!o)throw Error(r(454));return o;default:throw Error(r(451))}}function Bc(o){for(var a=o.attributes;a.length;)o.removeAttributeNode(a[0]);ic(o)}var Hr=new Map,SS=new Set;function of(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var so=te.d;te.d={f:sj,r:aj,D:lj,C:cj,L:uj,m:dj,X:hj,S:fj,M:pj};function sj(){var o=so.f(),a=Yd();return o||a}function aj(o){var a=Mo(o);a!==null&&a.tag===5&&a.type==="form"?P1(a):so.r(o)}var dl=typeof document>"u"?null:document;function ES(o,a,u){var f=dl;if(f&&typeof a=="string"&&a){var y=j(a);y='link[rel="'+o+'"][href="'+y+'"]',typeof u=="string"&&(y+='[crossorigin="'+u+'"]'),SS.has(y)||(SS.add(y),o={rel:o,crossOrigin:u,href:a},f.querySelector(y)===null&&(a=f.createElement("link"),Pn(a,"link",o),mn(a),f.head.appendChild(a)))}}function lj(o){so.D(o),ES("dns-prefetch",o,null)}function cj(o,a){so.C(o,a),ES("preconnect",o,a)}function uj(o,a,u){so.L(o,a,u);var f=dl;if(f&&o&&a){var y='link[rel="preload"][as="'+j(a)+'"]';a==="image"&&u&&u.imageSrcSet?(y+='[imagesrcset="'+j(u.imageSrcSet)+'"]',typeof u.imageSizes=="string"&&(y+='[imagesizes="'+j(u.imageSizes)+'"]')):y+='[href="'+j(o)+'"]';var x=y;switch(a){case"style":x=fl(o);break;case"script":x=hl(o)}Hr.has(x)||(o=g({rel:"preload",href:a==="image"&&u&&u.imageSrcSet?void 0:o,as:a},u),Hr.set(x,o),f.querySelector(y)!==null||a==="style"&&f.querySelector(Uc(x))||a==="script"&&f.querySelector(Hc(x))||(a=f.createElement("link"),Pn(a,"link",o),mn(a),f.head.appendChild(a)))}}function dj(o,a){so.m(o,a);var u=dl;if(u&&o){var f=a&&typeof a.as=="string"?a.as:"script",y='link[rel="modulepreload"][as="'+j(f)+'"][href="'+j(o)+'"]',x=y;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":x=hl(o)}if(!Hr.has(x)&&(o=g({rel:"modulepreload",href:o},a),Hr.set(x,o),u.querySelector(y)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(u.querySelector(Hc(x)))return}f=u.createElement("link"),Pn(f,"link",o),mn(f),u.head.appendChild(f)}}}function fj(o,a,u){so.S(o,a,u);var f=dl;if(f&&o){var y=jo(f).hoistableStyles,x=fl(o);a=a||"default";var C=y.get(x);if(!C){var M={loading:0,preload:null};if(C=f.querySelector(Uc(x)))M.loading=5;else{o=g({rel:"stylesheet",href:o,"data-precedence":a},u),(u=Hr.get(x))&&Cg(o,u);var L=C=f.createElement("link");mn(L),Pn(L,"link",o),L._p=new Promise(function(W,J){L.onload=W,L.onerror=J}),L.addEventListener("load",function(){M.loading|=1}),L.addEventListener("error",function(){M.loading|=2}),M.loading|=4,sf(C,a,f)}C={type:"stylesheet",instance:C,count:1,state:M},y.set(x,C)}}}function hj(o,a){so.X(o,a);var u=dl;if(u&&o){var f=jo(u).hoistableScripts,y=hl(o),x=f.get(y);x||(x=u.querySelector(Hc(y)),x||(o=g({src:o,async:!0},a),(a=Hr.get(y))&&Tg(o,a),x=u.createElement("script"),mn(x),Pn(x,"link",o),u.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},f.set(y,x))}}function pj(o,a){so.M(o,a);var u=dl;if(u&&o){var f=jo(u).hoistableScripts,y=hl(o),x=f.get(y);x||(x=u.querySelector(Hc(y)),x||(o=g({src:o,async:!0,type:"module"},a),(a=Hr.get(y))&&Tg(o,a),x=u.createElement("script"),mn(x),Pn(x,"link",o),u.head.appendChild(x)),x={type:"script",instance:x,count:1,state:null},f.set(y,x))}}function kS(o,a,u,f){var y=(y=ve.current)?of(y):null;if(!y)throw Error(r(446));switch(o){case"meta":case"title":return null;case"style":return typeof u.precedence=="string"&&typeof u.href=="string"?(a=fl(u.href),u=jo(y).hoistableStyles,f=u.get(a),f||(f={type:"style",instance:null,count:0,state:null},u.set(a,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(u.rel==="stylesheet"&&typeof u.href=="string"&&typeof u.precedence=="string"){o=fl(u.href);var x=jo(y).hoistableStyles,C=x.get(o);if(C||(y=y.ownerDocument||y,C={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},x.set(o,C),(x=y.querySelector(Uc(o)))&&!x._p&&(C.instance=x,C.state.loading=5),Hr.has(o)||(u={rel:"preload",as:"style",href:u.href,crossOrigin:u.crossOrigin,integrity:u.integrity,media:u.media,hrefLang:u.hrefLang,referrerPolicy:u.referrerPolicy},Hr.set(o,u),x||mj(y,o,u,C.state))),a&&f===null)throw Error(r(528,""));return C}if(a&&f!==null)throw Error(r(529,""));return null;case"script":return a=u.async,u=u.src,typeof u=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=hl(u),u=jo(y).hoistableScripts,f=u.get(a),f||(f={type:"script",instance:null,count:0,state:null},u.set(a,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,o))}}function fl(o){return'href="'+j(o)+'"'}function Uc(o){return'link[rel="stylesheet"]['+o+"]"}function wS(o){return g({},o,{"data-precedence":o.precedence,precedence:null})}function mj(o,a,u,f){o.querySelector('link[rel="preload"][as="style"]['+a+"]")?f.loading=1:(a=o.createElement("link"),f.preload=a,a.addEventListener("load",function(){return f.loading|=1}),a.addEventListener("error",function(){return f.loading|=2}),Pn(a,"link",u),mn(a),o.head.appendChild(a))}function hl(o){return'[src="'+j(o)+'"]'}function Hc(o){return"script[async]"+o}function CS(o,a,u){if(a.count++,a.instance===null)switch(a.type){case"style":var f=o.querySelector('style[data-href~="'+j(u.href)+'"]');if(f)return a.instance=f,mn(f),f;var y=g({},u,{"data-href":u.href,"data-precedence":u.precedence,href:null,precedence:null});return f=(o.ownerDocument||o).createElement("style"),mn(f),Pn(f,"style",y),sf(f,u.precedence,o),a.instance=f;case"stylesheet":y=fl(u.href);var x=o.querySelector(Uc(y));if(x)return a.state.loading|=4,a.instance=x,mn(x),x;f=wS(u),(y=Hr.get(y))&&Cg(f,y),x=(o.ownerDocument||o).createElement("link"),mn(x);var C=x;return C._p=new Promise(function(M,L){C.onload=M,C.onerror=L}),Pn(x,"link",f),a.state.loading|=4,sf(x,u.precedence,o),a.instance=x;case"script":return x=hl(u.src),(y=o.querySelector(Hc(x)))?(a.instance=y,mn(y),y):(f=u,(y=Hr.get(x))&&(f=g({},u),Tg(f,y)),o=o.ownerDocument||o,y=o.createElement("script"),mn(y),Pn(y,"link",f),o.head.appendChild(y),a.instance=y);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(f=a.instance,a.state.loading|=4,sf(f,u.precedence,o));return a.instance}function sf(o,a,u){for(var f=u.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=f.length?f[f.length-1]:null,x=y,C=0;C<f.length;C++){var M=f[C];if(M.dataset.precedence===a)x=M;else if(x!==y)break}x?x.parentNode.insertBefore(o,x.nextSibling):(a=u.nodeType===9?u.head:u,a.insertBefore(o,a.firstChild))}function Cg(o,a){o.crossOrigin==null&&(o.crossOrigin=a.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=a.referrerPolicy),o.title==null&&(o.title=a.title)}function Tg(o,a){o.crossOrigin==null&&(o.crossOrigin=a.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=a.referrerPolicy),o.integrity==null&&(o.integrity=a.integrity)}var af=null;function TS(o,a,u){if(af===null){var f=new Map,y=af=new Map;y.set(u,f)}else y=af,f=y.get(u),f||(f=new Map,y.set(u,f));if(f.has(o))return f;for(f.set(o,null),u=u.getElementsByTagName(o),y=0;y<u.length;y++){var x=u[y];if(!(x[_o]||x[pn]||o==="link"&&x.getAttribute("rel")==="stylesheet")&&x.namespaceURI!=="http://www.w3.org/2000/svg"){var C=x.getAttribute(a)||"";C=o+C;var M=f.get(C);M?M.push(x):f.set(C,[x])}}return f}function _S(o,a,u){o=o.ownerDocument||o,o.head.insertBefore(u,a==="title"?o.querySelector("head > title"):null)}function gj(o,a,u){if(u===1||a.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return o=a.disabled,typeof a.precedence=="string"&&o==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function AS(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}function vj(o,a,u,f){if(u.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var y=fl(f.href),x=a.querySelector(Uc(y));if(x){a=x._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(o.count++,o=lf.bind(o),a.then(o,o)),u.state.loading|=4,u.instance=x,mn(x);return}x=a.ownerDocument||a,f=wS(f),(y=Hr.get(y))&&Cg(f,y),x=x.createElement("link"),mn(x);var C=x;C._p=new Promise(function(M,L){C.onload=M,C.onerror=L}),Pn(x,"link",f),u.instance=x}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(u,a),(a=u.state.preload)&&(u.state.loading&3)===0&&(o.count++,u=lf.bind(o),a.addEventListener("load",u),a.addEventListener("error",u))}}var _g=0;function yj(o,a){return o.stylesheets&&o.count===0&&uf(o,o.stylesheets),0<o.count||0<o.imgCount?function(u){var f=setTimeout(function(){if(o.stylesheets&&uf(o,o.stylesheets),o.unsuspend){var x=o.unsuspend;o.unsuspend=null,x()}},6e4+a);0<o.imgBytes&&_g===0&&(_g=62500*QM());var y=setTimeout(function(){if(o.waitingForImages=!1,o.count===0&&(o.stylesheets&&uf(o,o.stylesheets),o.unsuspend)){var x=o.unsuspend;o.unsuspend=null,x()}},(o.imgBytes>_g?50:800)+a);return o.unsuspend=u,function(){o.unsuspend=null,clearTimeout(f),clearTimeout(y)}}:null}function lf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)uf(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var cf=null;function uf(o,a){o.stylesheets=null,o.unsuspend!==null&&(o.count++,cf=new Map,a.forEach(bj,o),cf=null,lf.call(o))}function bj(o,a){if(!(a.state.loading&4)){var u=cf.get(o);if(u)var f=u.get(null);else{u=new Map,cf.set(o,u);for(var y=o.querySelectorAll("link[data-precedence],style[data-precedence]"),x=0;x<y.length;x++){var C=y[x];(C.nodeName==="LINK"||C.getAttribute("media")!=="not all")&&(u.set(C.dataset.precedence,C),f=C)}f&&u.set(null,f)}y=a.instance,C=y.getAttribute("data-precedence"),x=u.get(C)||f,x===f&&u.set(null,y),u.set(C,y),this.count++,f=lf.bind(this),y.addEventListener("load",f),y.addEventListener("error",f),x?x.parentNode.insertBefore(y,x.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(y,o.firstChild)),a.state.loading|=4}}var qc={$$typeof:_,Provider:null,Consumer:null,_currentValue:ue,_currentValue2:ue,_threadCount:0};function xj(o,a,u,f,y,x,C,M,L){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Da(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Da(0),this.hiddenUpdates=Da(null),this.identifierPrefix=f,this.onUncaughtError=y,this.onCaughtError=x,this.onRecoverableError=C,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=L,this.incompleteTransitions=new Map}function MS(o,a,u,f,y,x,C,M,L,W,J,ee){return o=new xj(o,a,u,C,L,W,J,ee,M),a=1,x===!0&&(a|=24),x=br(3,null,null,a),o.current=x,x.stateNode=o,a=sm(),a.refCount++,o.pooledCache=a,a.refCount++,x.memoizedState={element:f,isDehydrated:u,cache:a},um(x),o}function jS(o){return o?(o=Fa,o):Fa}function OS(o,a,u,f,y,x){y=jS(y),f.context===null?f.context=y:f.pendingContext=y,f=Bo(a),f.payload={element:u},x=x===void 0?null:x,x!==null&&(f.callback=x),u=Uo(o,f,a),u!==null&&(fr(u,o,a),xc(u,o,a))}function RS(o,a){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var u=o.retryLane;o.retryLane=u!==0&&u<a?u:a}}function Ag(o,a){RS(o,a),(o=o.alternate)&&RS(o,a)}function NS(o){if(o.tag===13||o.tag===31){var a=Vs(o,67108864);a!==null&&fr(a,o,67108864),Ag(o,67108864)}}function DS(o){if(o.tag===13||o.tag===31){var a=wr();a=nc(a);var u=Vs(o,a);u!==null&&fr(u,o,a),Ag(o,a)}}var df=!0;function Sj(o,a,u,f){var y=q.T;q.T=null;var x=te.p;try{te.p=2,Mg(o,a,u,f)}finally{te.p=x,q.T=y}}function Ej(o,a,u,f){var y=q.T;q.T=null;var x=te.p;try{te.p=8,Mg(o,a,u,f)}finally{te.p=x,q.T=y}}function Mg(o,a,u,f){if(df){var y=jg(f);if(y===null)mg(o,a,f,ff,u),LS(o,f);else if(wj(y,o,a,u,f))f.stopPropagation();else if(LS(o,f),a&4&&-1<kj.indexOf(o)){for(;y!==null;){var x=Mo(y);if(x!==null)switch(x.tag){case 3:if(x=x.stateNode,x.current.memoizedState.isDehydrated){var C=mi(x.pendingLanes);if(C!==0){var M=x;for(M.pendingLanes|=2,M.entangledLanes|=2;C;){var L=1<<31-_n(C);M.entanglements[1]|=L,C&=~L}Ei(x),(Tt&6)===0&&(Gd=Pe()+500,Lc(0))}}break;case 31:case 13:M=Vs(x,2),M!==null&&fr(M,x,2),Yd(),Ag(x,2)}if(x=jg(f),x===null&&mg(o,a,f,ff,u),x===y)break;y=x}y!==null&&f.stopPropagation()}else mg(o,a,f,null,u)}}function jg(o){return o=Oe(o),Og(o)}var ff=null;function Og(o){if(ff=null,o=Ao(o),o!==null){var a=s(o);if(a===null)o=null;else{var u=a.tag;if(u===13){if(o=l(a),o!==null)return o;o=null}else if(u===31){if(o=c(a),o!==null)return o;o=null}else if(u===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;o=null}else a!==o&&(o=null)}}return ff=o,null}function zS(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ie()){case Ht:return 2;case ir:return 8;case un:case Qr:return 32;case Jn:return 268435456;default:return 32}default:return 32}}var Rg=!1,Jo=null,Qo=null,Zo=null,Fc=new Map,Vc=new Map,es=[],kj="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function LS(o,a){switch(o){case"focusin":case"focusout":Jo=null;break;case"dragenter":case"dragleave":Qo=null;break;case"mouseover":case"mouseout":Zo=null;break;case"pointerover":case"pointerout":Fc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vc.delete(a.pointerId)}}function Wc(o,a,u,f,y,x){return o===null||o.nativeEvent!==x?(o={blockedOn:a,domEventName:u,eventSystemFlags:f,nativeEvent:x,targetContainers:[y]},a!==null&&(a=Mo(a),a!==null&&NS(a)),o):(o.eventSystemFlags|=f,a=o.targetContainers,y!==null&&a.indexOf(y)===-1&&a.push(y),o)}function wj(o,a,u,f,y){switch(a){case"focusin":return Jo=Wc(Jo,o,a,u,f,y),!0;case"dragenter":return Qo=Wc(Qo,o,a,u,f,y),!0;case"mouseover":return Zo=Wc(Zo,o,a,u,f,y),!0;case"pointerover":var x=y.pointerId;return Fc.set(x,Wc(Fc.get(x)||null,o,a,u,f,y)),!0;case"gotpointercapture":return x=y.pointerId,Vc.set(x,Wc(Vc.get(x)||null,o,a,u,f,y)),!0}return!1}function IS(o){var a=Ao(o.target);if(a!==null){var u=s(a);if(u!==null){if(a=u.tag,a===13){if(a=l(u),a!==null){o.blockedOn=a,za(o.priority,function(){DS(u)});return}}else if(a===31){if(a=c(u),a!==null){o.blockedOn=a,za(o.priority,function(){DS(u)});return}}else if(a===3&&u.stateNode.current.memoizedState.isDehydrated){o.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}o.blockedOn=null}function hf(o){if(o.blockedOn!==null)return!1;for(var a=o.targetContainers;0<a.length;){var u=jg(o.nativeEvent);if(u===null){u=o.nativeEvent;var f=new u.constructor(u.type,u);Wt=f,u.target.dispatchEvent(f),Wt=null}else return a=Mo(u),a!==null&&NS(a),o.blockedOn=u,!1;a.shift()}return!0}function PS(o,a,u){hf(o)&&u.delete(a)}function Cj(){Rg=!1,Jo!==null&&hf(Jo)&&(Jo=null),Qo!==null&&hf(Qo)&&(Qo=null),Zo!==null&&hf(Zo)&&(Zo=null),Fc.forEach(PS),Vc.forEach(PS)}function pf(o,a){o.blockedOn===a&&(o.blockedOn=null,Rg||(Rg=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,Cj)))}var mf=null;function BS(o){mf!==o&&(mf=o,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){mf===o&&(mf=null);for(var a=0;a<o.length;a+=3){var u=o[a],f=o[a+1],y=o[a+2];if(typeof f!="function"){if(Og(f||u)===null)continue;break}var x=Mo(u);x!==null&&(o.splice(a,3),a-=3,jm(x,{pending:!0,data:y,method:u.method,action:f},f,y))}}))}function pl(o){function a(L){return pf(L,o)}Jo!==null&&pf(Jo,o),Qo!==null&&pf(Qo,o),Zo!==null&&pf(Zo,o),Fc.forEach(a),Vc.forEach(a);for(var u=0;u<es.length;u++){var f=es[u];f.blockedOn===o&&(f.blockedOn=null)}for(;0<es.length&&(u=es[0],u.blockedOn===null);)IS(u),u.blockedOn===null&&es.shift();if(u=(o.ownerDocument||o).$$reactFormReplay,u!=null)for(f=0;f<u.length;f+=3){var y=u[f],x=u[f+1],C=y[Dn]||null;if(typeof x=="function")C||BS(u);else if(C){var M=null;if(x&&x.hasAttribute("formAction")){if(y=x,C=x[Dn]||null)M=C.formAction;else if(Og(y)!==null)continue}else M=C.action;typeof M=="function"?u[f+1]=M:(u.splice(f,3),f-=3),BS(u)}}}function US(){function o(x){x.canIntercept&&x.info==="react-transition"&&x.intercept({handler:function(){return new Promise(function(C){return y=C})},focusReset:"manual",scroll:"manual"})}function a(){y!==null&&(y(),y=null),f||setTimeout(u,20)}function u(){if(!f&&!navigation.transition){var x=navigation.currentEntry;x&&x.url!=null&&navigation.navigate(x.url,{state:x.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var f=!1,y=null;return navigation.addEventListener("navigate",o),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(u,100),function(){f=!0,navigation.removeEventListener("navigate",o),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),y!==null&&(y(),y=null)}}}function Ng(o){this._internalRoot=o}gf.prototype.render=Ng.prototype.render=function(o){var a=this._internalRoot;if(a===null)throw Error(r(409));var u=a.current,f=wr();OS(u,f,o,a,null,null)},gf.prototype.unmount=Ng.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var a=o.containerInfo;OS(o.current,2,null,o,null,null),Yd(),a[qi]=null}};function gf(o){this._internalRoot=o}gf.prototype.unstable_scheduleHydration=function(o){if(o){var a=Qn();o={blockedOn:null,target:o,priority:a};for(var u=0;u<es.length&&a!==0&&a<es[u].priority;u++);es.splice(u,0,o),u===0&&IS(o)}};var HS=e.version;if(HS!=="19.2.0")throw Error(r(527,HS,"19.2.0"));te.findDOMNode=function(o){var a=o._reactInternals;if(a===void 0)throw typeof o.render=="function"?Error(r(188)):(o=Object.keys(o).join(","),Error(r(268,o)));return o=p(a),o=o!==null?m(o):null,o=o===null?null:o.stateNode,o};var Tj={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var vf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!vf.isDisabled&&vf.supportsFiber)try{vr=vf.inject(Tj),rn=vf}catch{}}return $c.createRoot=function(o,a){if(!i(o))throw Error(r(299));var u=!1,f="",y=K1,x=Y1,C=X1;return a!=null&&(a.unstable_strictMode===!0&&(u=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(y=a.onUncaughtError),a.onCaughtError!==void 0&&(x=a.onCaughtError),a.onRecoverableError!==void 0&&(C=a.onRecoverableError)),a=MS(o,1,!1,null,null,u,f,null,y,x,C,US),o[qi]=a.current,pg(o),new Ng(a)},$c.hydrateRoot=function(o,a,u){if(!i(o))throw Error(r(299));var f=!1,y="",x=K1,C=Y1,M=X1,L=null;return u!=null&&(u.unstable_strictMode===!0&&(f=!0),u.identifierPrefix!==void 0&&(y=u.identifierPrefix),u.onUncaughtError!==void 0&&(x=u.onUncaughtError),u.onCaughtError!==void 0&&(C=u.onCaughtError),u.onRecoverableError!==void 0&&(M=u.onRecoverableError),u.formState!==void 0&&(L=u.formState)),a=MS(o,1,!0,a,u??null,f,y,L,x,C,M,US),a.context=jS(null),u=a.current,f=wr(),f=nc(f),y=Bo(f),y.callback=null,Uo(u,y,f),u=f,a.current.lanes=u,Hi(a,u),Ei(a),o[qi]=a.current,pg(o),new gf(a)},$c.version="19.2.0",$c}var $S;function oO(){if($S)return zg.exports;$S=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),zg.exports=iO(),zg.exports}var sO=oO(),yf={},Gc={},GS={},KS;function aO(){return KS||(KS=1,(function(){var t={},e="";try{e=location.hash.toString()}catch{}var n=d(e),r=w("initParams");if(r)for(var i in r)typeof n[i]>"u"&&(n[i]=r[i]);E("initParams",n);var s=!1,l;try{if(s=window.parent!=null&&window!=window.parent,s){window.addEventListener("message",function(T){if(T.source===window.parent){try{var _=JSON.parse(T.data)}catch{return}if(!(!_||!_.eventType))if(_.eventType=="set_custom_style")T.origin==="https://web.telegram.org"&&(l.innerHTML=_.eventData);else if(_.eventType=="reload_iframe"){try{window.parent.postMessage(JSON.stringify({eventType:"iframe_will_reload"}),"*")}catch{}location.reload()}else v(_.eventType,_.eventData)}}),l=document.createElement("style"),document.head.appendChild(l);try{window.parent.postMessage(JSON.stringify({eventType:"iframe_ready",eventData:{reload_supported:!0}}),"*")}catch{}}}catch{}function c(T){try{return T=T.replace(/\+/g,"%20"),decodeURIComponent(T)}catch{return T}}function d(T){T=T.replace(/^#/,"");var _={};if(!T.length)return _;if(T.indexOf("=")<0&&T.indexOf("?")<0)return _._path=c(T),_;var R=T.indexOf("?");if(R>=0){var O=T.substr(0,R);_._path=c(O),T=T.substr(R+1)}var D=p(T);for(var I in D)_[I]=D[I];return _}function p(T){var _={};if(!T.length)return _;var R=T.split("&"),O,D,I,H;for(O=0;O<R.length;O++)D=R[O].split("="),I=c(D[0]),H=D[1]==null?null:c(D[1]),_[I]=H;return _}function m(T,_){var R=T.indexOf("#");if(R<0)return T+"#"+_;var O=T.substr(R+1);return O.indexOf("=")>=0||O.indexOf("?")>=0?T+"&"+_:O.length>0?T+"?"+_:T+_}function g(T,_,R){if(_||(_=function(){}),R===void 0&&(R=""),console.log("[Telegram.WebView] > postEvent",T,R),window.TelegramWebviewProxy!==void 0)TelegramWebviewProxy.postEvent(T,JSON.stringify(R)),_();else if(window.external&&"notify"in window.external)window.external.notify(JSON.stringify({eventType:T,eventData:R})),_();else if(s)try{var O="https://web.telegram.org";O="*",window.parent.postMessage(JSON.stringify({eventType:T,eventData:R}),O),_()}catch(D){_(D)}else _({notAvailable:!0})}function v(T,_){console.log("[Telegram.WebView] < receiveEvent",T,_),b(T,function(R){R(T,_)})}function b(T,_){var R=t[T];if(!(R===void 0||!R.length))for(var O=0;O<R.length;O++)try{_(R[O])}catch{}}function S(T,_){t[T]===void 0&&(t[T]=[]);var R=t[T].indexOf(_);R===-1&&t[T].push(_)}function k(T,_){if(t[T]!==void 0){var R=t[T].indexOf(_);R!==-1&&t[T].splice(R,1)}}function E(T,_){try{return window.sessionStorage.setItem("__telegram__"+T,JSON.stringify(_)),!0}catch{}return!1}function w(T){try{return JSON.parse(window.sessionStorage.getItem("__telegram__"+T))}catch{}return null}window.Telegram||(window.Telegram={}),window.Telegram.WebView={initParams:n,isIframe:s,onEvent:S,offEvent:k,postEvent:g,receiveEvent:v,callEventCallbacks:b},window.Telegram.Utils={urlSafeDecode:c,urlParseQueryString:p,urlParseHashParams:d,urlAppendHashParams:m,sessionStorageSet:E,sessionStorageGet:w},window.TelegramGameProxy_receiveEvent=v,window.TelegramGameProxy={receiveEvent:v}})(),(function(){var t=window.Telegram.Utils,e=window.Telegram.WebView,n=e.initParams,r=e.isIframe,i={},s="",l={},c={},d="light",p="6.0",m="unknown",g=!0,v=!1,b=!1,S="bg_color",k="bg_color",E=null;if(n.tgWebAppData&&n.tgWebAppData.length){s=n.tgWebAppData,l=t.urlParseQueryString(s);for(var w in l){var T=l[w];try{(T.substr(0,1)=="{"&&T.substr(-1)=="}"||T.substr(0,1)=="["&&T.substr(-1)=="]")&&(l[w]=JSON.parse(T))}catch{}}}var _=t.sessionStorageGet("themeParams");if(n.tgWebAppThemeParams&&n.tgWebAppThemeParams.length){var R=n.tgWebAppThemeParams;try{var O=JSON.parse(R);O&&ve(O)}catch{}}_&&ve(_);var D=t.sessionStorageGet("defaultColors");if(n.tgWebAppDefaultColors&&n.tgWebAppDefaultColors.length){var I=n.tgWebAppDefaultColors;try{var H=JSON.parse(I);H&&Kt(H)}catch{}}D&&Kt(D),n.tgWebAppVersion&&(p=n.tgWebAppVersion),n.tgWebAppPlatform&&(m=n.tgWebAppPlatform);var V=t.sessionStorageGet("isFullscreen");n.tgWebAppFullscreen&&Le(!0),V&&Le(V=="yes");var K=t.sessionStorageGet("isOrientationLocked");K&&rt(K=="yes");function Q(j,N){N.theme_params&&(ve(N.theme_params),window.Telegram.WebApp.MainButton.setParams({}),window.Telegram.WebApp.SecondaryButton.setParams({}),wo(),Co(),Hi(),ae("themeChanged"))}var re=window.innerHeight;function Re(j,N){N.height&&(window.removeEventListener("resize",ye),Je(N))}function ye(j){re!=window.innerHeight&&(re=window.innerHeight,ae("viewportChanged",{isStateStable:!0}))}function me(j,N){N&&gt(N)}function q(j,N){N&&Bi(N)}function te(j,N){N.is_visible?(g=!0,ae("activated")):(g=!1,ae("deactivated"))}function ue(j){if(!(j.metaKey||j.ctrlKey)){for(var N=j.target;N.tagName!="A"&&N.parentNode;)N=N.parentNode;N.tagName=="A"&&N.target!="_blank"&&(N.protocol=="http:"||N.protocol=="https:")&&N.hostname=="t.me"&&(i.openTgLink(N.href),j.preventDefault())}}function Ce(j){return j.toString().replace(/^\s+|\s+$/g,"")}function ae(j){var N=Array.prototype.slice.call(arguments);j=N.shift(),e.callEventCallbacks("webview:"+j,function(P){P.apply(i,N)})}function Se(j,N){e.onEvent("webview:"+j,N)}function ge(j,N){e.offEvent("webview:"+j,N)}function he(j,N){var P=document.documentElement;P&&P.style&&P.style.setProperty&&P.style.setProperty("--tg-"+j,N)}function Le(j){v=!!j,t.sessionStorageSet("isFullscreen",v?"yes":"no")}function rt(j){b=!!j,t.sessionStorageSet("isOrientationLocked",b?"yes":"no")}function ve(j){j.bg_color=="#1c1c1d"&&j.bg_color==j.secondary_bg_color&&(j.secondary_bg_color="#2c2c2e");var N;for(var P in j)(N=To(j[P]))&&(c[P]=N,P=="bg_color"&&(d=rd(N)?"dark":"light",he("color-scheme",d)),P="theme-"+P.split("_").join("-"),he(P,N));t.sessionStorageSet("themeParams",c)}function Kt(j){d=="dark"?(j.bg_dark_color&&(S=j.bg_dark_color),j.header_dark_color&&(k=null,E=j.header_dark_color)):(j.bg_color&&(S=j.bg_color),j.header_color&&(k=null,E=j.header_color)),t.sessionStorageSet("defaultColors",j)}var Ct={};function Ae(j){for(var N=100;--N;){for(var P="",G="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",X=G.length,be=0;be<j;be++)P+=G[Math.floor(Math.random()*X)];if(!Ct[P])return Ct[P]={},P}throw Error("WebAppCallbackIdGenerateFailed")}var ie=!1,He=!1,We=!0;function Je(j){typeof j<"u"&&(We=!!j.is_expanded,ie=j.height,j.is_state_stable&&(He=j.height),ae("viewportChanged",{isStateStable:!!j.is_state_stable}));var N,P;ie!==!1?N=ie-on+"px":N=on?"calc(100vh - "+on+"px)":"100vh",He!==!1?P=He-on+"px":P=on?"calc(100vh - "+on+"px)":"100vh",he("viewport-height",N),he("viewport-stable-height",P)}var Ke={top:0,bottom:0,left:0,right:0};function gt(j){typeof j<"u"&&(typeof j.top<"u"&&(Ke.top=j.top),typeof j.bottom<"u"&&(Ke.bottom=j.bottom),typeof j.left<"u"&&(Ke.left=j.left),typeof j.right<"u"&&(Ke.right=j.right),ae("safeAreaChanged")),he("safe-area-inset-top",Ke.top+"px"),he("safe-area-inset-bottom",Ke.bottom+"px"),he("safe-area-inset-left",Ke.left+"px"),he("safe-area-inset-right",Ke.right+"px")}var Yt={top:0,bottom:0,left:0,right:0};function Bi(j){typeof j<"u"&&(typeof j.top<"u"&&(Yt.top=j.top),typeof j.bottom<"u"&&(Yt.bottom=j.bottom),typeof j.left<"u"&&(Yt.left=j.left),typeof j.right<"u"&&(Yt.right=j.right),ae("contentSafeAreaChanged")),he("content-safe-area-inset-top",Yt.top+"px"),he("content-safe-area-inset-bottom",Yt.bottom+"px"),he("content-safe-area-inset-left",Yt.left+"px"),he("content-safe-area-inset-right",Yt.right+"px")}var jr=!1;function Xn(j){if(!Xe("6.2")){console.warn("[Telegram.WebApp] Closing confirmation is not supported in version "+p);return}jr=!!j,e.postEvent("web_app_setup_closing_behavior",!1,{need_confirmation:jr})}var Jr=!0;function pi(j){if(!Xe("7.7")){console.warn("[Telegram.WebApp] Changing swipes behavior is not supported in version "+p);return}Jr=!!j,e.postEvent("web_app_setup_swipe_behavior",!1,{allow_vertical_swipe:Jr})}function Ns(j,N){Le(N.is_fullscreen),ae("fullscreenChanged")}function ec(j,N){N.error=="ALREADY_FULLSCREEN"&&!v&&Le(!0),ae("fullscreenFailed",{error:N.error})}function Pe(j){if(!Xe("8.0")){console.warn("[Telegram.WebApp] Orientation locking is not supported in version "+p);return}rt(j),e.postEvent("web_app_toggle_orientation_lock",!1,{locked:b})}var Ie=[];function Ht(j,N){ae("homeScreenAdded")}function ir(j,N){var P=N.status||"unknown";if(Ie.length>0){for(var G=0;G<Ie.length;G++){var X=Ie[G];X(P)}Ie=[]}ae("homeScreenChecked",{status:P})}var un=!1;function Qr(j,N){if(un){var P=un;un=!1,P.callback&&P.callback(!0),ae("shareMessageSent")}}function Jn(j,N){if(un){var P=un;un=!1,P.callback&&P.callback(!1),ae("shareMessageFailed",{error:N.error})}}var Tn=!1;function Or(j,N){if(Tn){var P=Tn;Tn=!1,P.callback&&P.callback(!0),ae("emojiStatusSet")}}function vr(j,N){if(Tn){var P=Tn;Tn=!1,P.callback&&P.callback(!1),ae("emojiStatusFailed",{error:N.error})}}var rn=!1;function Rr(j,N){if(rn){var P=rn;rn=!1,P.callback&&P.callback(N.status=="allowed"),ae("emojiStatusAccessRequested",{status:N.status})}}var Vn=!1;function _n(){return k=="secondary_bg_color"?c.secondary_bg_color:k=="bg_color"?c.bg_color:E}function Ui(j){if(!Xe("6.1")){console.warn("[Telegram.WebApp] Header color is not supported in version "+p);return}Xe("6.9")||(c.bg_color&&c.bg_color==j?j="bg_color":c.secondary_bg_color&&c.secondary_bg_color==j&&(j="secondary_bg_color"));var N=null,P=null;if(j=="bg_color"||j=="secondary_bg_color")P=j;else if(Xe("6.9")&&(N=To(j),!N))throw console.error("[Telegram.WebApp] Header color format is invalid",j),Error("WebAppHeaderColorInvalid");if(!Xe("6.9")&&P!="bg_color"&&P!="secondary_bg_color")throw console.error("[Telegram.WebApp] Header color key should be one of Telegram.WebApp.themeParams.bg_color, Telegram.WebApp.themeParams.secondary_bg_color, 'bg_color', 'secondary_bg_color'",j),Error("WebAppHeaderColorKeyInvalid");k=P,E=N,wo()}var Ds=null,tc=null;function wo(){(Ds!=k||tc!=E)&&(Ds=k,tc=E,tc?e.postEvent("web_app_set_header_color",!1,{color:E}):e.postEvent("web_app_set_header_color",!1,{color_key:k}))}function zs(){return S=="secondary_bg_color"?c.secondary_bg_color:S=="bg_color"?c.bg_color:S}function Na(j){if(!Xe("6.1")){console.warn("[Telegram.WebApp] Background color is not supported in version "+p);return}var N;if(j=="bg_color"||j=="secondary_bg_color")N=j;else if(N=To(j),!N)throw console.error("[Telegram.WebApp] Background color format is invalid",j),Error("WebAppBackgroundColorInvalid");S=N,Co()}var mi=null;function Co(){var j=zs();mi!=j&&(mi=j,e.postEvent("web_app_set_background_color",!1,{color:j}))}var Zr="bottom_bar_bg_color";function Ls(){return Zr=="bottom_bar_bg_color"?c.bottom_bar_bg_color||c.secondary_bg_color||"#ffffff":Zr=="secondary_bg_color"?c.secondary_bg_color:Zr=="bg_color"?c.bg_color:Zr}function nd(j){if(!Xe("7.10")){console.warn("[Telegram.WebApp] Bottom bar color is not supported in version "+p);return}var N;if(j=="bg_color"||j=="secondary_bg_color"||j=="bottom_bar_bg_color")N=j;else if(N=To(j),!N)throw console.error("[Telegram.WebApp] Bottom bar color format is invalid",j),Error("WebAppBottomBarColorInvalid");Zr=N,Hi(),window.Telegram.WebApp.SecondaryButton.setParams({})}var Da=null;function Hi(){var j=Ls();Da!=j&&(Da=j,e.postEvent("web_app_set_bottom_bar_color",!1,{color:j})),n.tgWebAppDebug&&La()}function To(j){j+="";var N;if(N=/^\s*#([0-9a-f]{6})\s*$/i.exec(j))return"#"+N[1].toLowerCase();if(N=/^\s*#([0-9a-f])([0-9a-f])([0-9a-f])\s*$/i.exec(j))return("#"+N[1]+N[1]+N[2]+N[2]+N[3]+N[3]).toLowerCase();if(N=/^\s*rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+\.{0,1}\d*))?\)\s*$/.exec(j)){var P=parseInt(N[1]),G=parseInt(N[2]),X=parseInt(N[3]);return P=(P<16?"0":"")+P.toString(16),G=(G<16?"0":"")+G.toString(16),X=(X<16?"0":"")+X.toString(16),"#"+P+G+X}return!1}function rd(j){j=j.replace(/[\s#]/g,""),j.length==3&&(j=j[0]+j[0]+j[1]+j[1]+j[2]+j[2]);var N=parseInt(j.substr(0,2),16),P=parseInt(j.substr(2,2),16),G=parseInt(j.substr(4,2),16),X=Math.sqrt(.299*(N*N)+.587*(P*P)+.114*(G*G));return X<120}function id(j,N){typeof j!="string"&&(j=""),typeof N!="string"&&(N=""),j=j.replace(/^\s+|\s+$/g,"").split("."),N=N.replace(/^\s+|\s+$/g,"").split(".");var P=Math.max(j.length,N.length),G,X,be;for(G=0;G<P;G++)if(X=parseInt(j[G])||0,be=parseInt(N[G])||0,X!=be)return X>be?1:-1;return 0}function Xe(j){return id(p,j)>=0}function nc(j){if(window.Blob)try{return new Blob([j]).size}catch{}for(var N=j.length,P=j.length-1;P>=0;P--){var G=j.charCodeAt(P);G>127&&G<=2047?N++:G>2047&&G<=65535&&(N+=2),G>=56320&&G<=57343&&P--}return N}var rc=(function(){var j=!1,N={};Object.defineProperty(N,"isVisible",{set:function(Ne){ut({is_visible:Ne})},get:function(){return j},enumerable:!0});var P=null;e.onEvent("back_button_pressed",G);function G(){ae("backButtonClicked")}function X(){return{is_visible:j}}function be(Ne){return typeof Ne>"u"&&(Ne=X()),JSON.stringify(Ne)}function Me(){return Xe("6.1")?!0:(console.warn("[Telegram.WebApp] BackButton is not supported in version "+p),!1)}function we(){var Ne=X(),lt=be(Ne);P!==lt&&(P=lt,e.postEvent("web_app_setup_back_button",!1,Ne))}function ut(Ne){return Me()&&(typeof Ne.is_visible<"u"&&(j=!!Ne.is_visible),we()),N}return N.onClick=function(Ne){return Me()&&Se("backButtonClicked",Ne),N},N.offClick=function(Ne){return Me()&&ge("backButtonClicked",Ne),N},N.show=function(){return ut({is_visible:!0})},N.hide=function(){return ut({is_visible:!1})},N})(),Qn=null,za={},on=0;if(n.tgWebAppDebug){Qn=document.createElement("tg-bottom-bar");var pn={display:"flex",gap:"7px",font:"600 14px/18px sans-serif",width:"100%",background:Ls(),position:"fixed",left:"0",right:"0",bottom:"0",margin:"0",padding:"7px",textAlign:"center",boxSizing:"border-box",zIndex:"10000"};for(var Dn in pn)Qn.style[Dn]=pn[Dn];document.addEventListener("DOMContentLoaded",function j(N){document.removeEventListener("DOMContentLoaded",j),document.body.appendChild(Qn)});var qi=document.createElement("style");qi.innerHTML='tg-bottom-button.shine { position: relative; overflow: hidden; } tg-bottom-button.shine:before { content:""; position: absolute; top: 0; width: 100%; height: 100%; background: linear-gradient(120deg, transparent, rgba(255, 255, 255, .2), transparent); animation: tg-bottom-button-shine 5s ease-in-out infinite; } @-webkit-keyframes tg-bottom-button-shine { 0% {left: -100%;} 12%,100% {left: 100%}} @keyframes tg-bottom-button-shine { 0% {left: -100%;} 12%,100% {left: 100%}}',Qn.appendChild(qi)}function La(){var j=za.main._bottomButton,N=za.secondary._bottomButton;j.isVisible||N.isVisible?(Qn.style.display="flex",on=58,j.isVisible&&N.isVisible&&(N.position=="top"?(Qn.style.flexDirection="column-reverse",on+=51):N.position=="bottom"?(Qn.style.flexDirection="column",on+=51):N.position=="left"?Qn.style.flexDirection="row-reverse":N.position=="right"&&(Qn.style.flexDirection="row"))):(Qn.style.display="none",on=0),Qn.style.background=Ls(),document.documentElement&&(document.documentElement.style.boxSizing="border-box",document.documentElement.style.paddingBottom=on+"px"),Je()}var od=function(j){var N=j=="main";if(N)var P="web_app_setup_main_button",G="main_button_pressed",X="mainButtonClicked",be="Continue",Me=function(){return c.button_color||"#2481cc"},we=function(){return c.button_text_color||"#ffffff"};else var P="web_app_setup_secondary_button",G="secondary_button_pressed",X="secondaryButtonClicked",be="Cancel",Me=function(){return Ls()},we=function(){return c.button_color||"#2481cc"};var ut=!1,Ne=!0,lt=!1,St=!1,tt=j,xe=be,_e=!1,De=!1,Wt="left",Oe={};Object.defineProperty(Oe,"type",{get:function(){return tt},enumerable:!0}),Object.defineProperty(Oe,"text",{set:function(Ee){Oe.setParams({text:Ee})},get:function(){return xe},enumerable:!0}),Object.defineProperty(Oe,"color",{set:function(Ee){Oe.setParams({color:Ee})},get:function(){return _e||Me()},enumerable:!0}),Object.defineProperty(Oe,"textColor",{set:function(Ee){Oe.setParams({text_color:Ee})},get:function(){return De||we()},enumerable:!0}),Object.defineProperty(Oe,"isVisible",{set:function(Ee){Oe.setParams({is_visible:Ee})},get:function(){return ut},enumerable:!0}),Object.defineProperty(Oe,"isProgressVisible",{get:function(){return St},enumerable:!0}),Object.defineProperty(Oe,"isActive",{set:function(Ee){Oe.setParams({is_active:Ee})},get:function(){return Ne},enumerable:!0}),Object.defineProperty(Oe,"hasShineEffect",{set:function(Ee){Oe.setParams({has_shine_effect:Ee})},get:function(){return lt},enumerable:!0}),N||Object.defineProperty(Oe,"position",{set:function(Ee){Oe.setParams({position:Ee})},get:function(){return Wt},enumerable:!0});var Rt=null;e.onEvent(G,sc);var Ze=null;if(n.tgWebAppDebug){Ze=document.createElement("tg-bottom-button");var Xt={display:"none",width:"100%",height:"44px",borderRadius:"0",background:"no-repeat right center",padding:"13px 15px",textAlign:"center",boxSizing:"border-box"};for(var Nr in Xt)Ze.style[Nr]=Xt[Nr];Qn.appendChild(Ze),Ze.addEventListener("click",sc,!1),Ze._bottomButton=Oe,za[j]=Ze}function sc(){Ne&&ae(X)}function No(){var Ee=Oe.color,sr=Oe.textColor;if(ut){var Wi={is_visible:!0,is_active:Ne,is_progress_visible:St,text:xe,color:Ee,text_color:sr,has_shine_effect:lt&&Ne&&!St};N||(Wi.position=Wt)}else var Wi={is_visible:!1};return Wi}function ti(Ee){return typeof Ee>"u"&&(Ee=No()),JSON.stringify(Ee)}function Ps(){var Ee=No(),sr=ti(Ee);Rt!==sr&&(Rt=sr,e.postEvent(P,!1,Ee),n.tgWebAppDebug&&Bs(Ee))}function Bs(Ee){Ee.is_visible?(Ze.style.display="block",Ze.style.opacity=Ee.is_active?"1":"0.8",Ze.style.cursor=Ee.is_active?"pointer":"auto",Ze.disabled=!Ee.is_active,Ze.innerText=Ee.text,Ze.className=Ee.has_shine_effect?"shine":"",Ze.style.backgroundImage=Ee.is_progress_visible?"url('data:image/svg+xml,"+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewport="0 0 48 48" width="48px" height="48px"><circle cx="50%" cy="50%" stroke="'+Ee.text_color+'" stroke-width="2.25" stroke-linecap="round" fill="none" stroke-dashoffset="106" r="9" stroke-dasharray="56.52" rotate="-90"><animate attributeName="stroke-dashoffset" attributeType="XML" dur="360s" from="0" to="12500" repeatCount="indefinite"></animate><animateTransform attributeName="transform" attributeType="XML" type="rotate" dur="1s" from="-90 24 24" to="630 24 24" repeatCount="indefinite"></animateTransform></circle></svg>')+"')":"none",Ze.style.backgroundColor=Ee.color,Ze.style.color=Ee.text_color):Ze.style.display="none",La()}function yi(Ee){if(typeof Ee.text<"u"){var sr=Ce(Ee.text);if(!sr.length)throw console.error("[Telegram.WebApp] Bottom button text is required",Ee.text),Error("WebAppBottomButtonParamInvalid");if(sr.length>64)throw console.error("[Telegram.WebApp] Bottom button text is too long",sr),Error("WebAppBottomButtonParamInvalid");xe=sr}if(typeof Ee.color<"u")if(Ee.color===!1||Ee.color===null)_e=!1;else{var Wi=To(Ee.color);if(!Wi)throw console.error("[Telegram.WebApp] Bottom button color format is invalid",Ee.color),Error("WebAppBottomButtonParamInvalid");_e=Wi}if(typeof Ee.text_color<"u")if(Ee.text_color===!1||Ee.text_color===null)De=!1;else{var Us=To(Ee.text_color);if(!Us)throw console.error("[Telegram.WebApp] Bottom button text color format is invalid",Ee.text_color),Error("WebAppBottomButtonParamInvalid");De=Us}if(typeof Ee.is_visible<"u"){if(Ee.is_visible&&!Oe.text.length)throw console.error("[Telegram.WebApp] Bottom button text is required"),Error("WebAppBottomButtonParamInvalid");ut=!!Ee.is_visible}if(typeof Ee.has_shine_effect<"u"&&(lt=!!Ee.has_shine_effect),!N&&typeof Ee.position<"u"){if(Ee.position!="left"&&Ee.position!="right"&&Ee.position!="top"&&Ee.position!="bottom")throw console.error("[Telegram.WebApp] Bottom button posiition is invalid",Ee.position),Error("WebAppBottomButtonParamInvalid");Wt=Ee.position}return typeof Ee.is_active<"u"&&(Ne=!!Ee.is_active),Ps(),Oe}return Oe.setText=function(Ee){return Oe.setParams({text:Ee})},Oe.onClick=function(Ee){return Se(X,Ee),Oe},Oe.offClick=function(Ee){return ge(X,Ee),Oe},Oe.show=function(){return Oe.setParams({is_visible:!0})},Oe.hide=function(){return Oe.setParams({is_visible:!1})},Oe.enable=function(){return Oe.setParams({is_active:!0})},Oe.disable=function(){return Oe.setParams({is_active:!1})},Oe.showProgress=function(Ee){return Ne=!!Ee,St=!0,Ps(),Oe},Oe.hideProgress=function(){return Oe.isActive||(Ne=!0),St=!1,Ps(),Oe},Oe.setParams=yi,Oe},Np=od("main"),sd=od("secondary"),_o=(function(){var j=!1,N={};Object.defineProperty(N,"isVisible",{set:function(Ne){ut({is_visible:Ne})},get:function(){return j},enumerable:!0});var P=null;e.onEvent("settings_button_pressed",G);function G(){ae("settingsButtonClicked")}function X(){return{is_visible:j}}function be(Ne){return typeof Ne>"u"&&(Ne=X()),JSON.stringify(Ne)}function Me(){return Xe("6.10")?!0:(console.warn("[Telegram.WebApp] SettingsButton is not supported in version "+p),!1)}function we(){var Ne=X(),lt=be(Ne);P!==lt&&(P=lt,e.postEvent("web_app_setup_settings_button",!1,Ne))}function ut(Ne){return Me()&&(typeof Ne.is_visible<"u"&&(j=!!Ne.is_visible),we()),N}return N.onClick=function(Ne){return Me()&&Se("settingsButtonClicked",Ne),N},N.offClick=function(Ne){return Me()&&ge("settingsButtonClicked",Ne),N},N.show=function(){return ut({is_visible:!0})},N.hide=function(){return ut({is_visible:!1})},N})(),ic=(function(){var j={};function N(P){if(!Xe("6.1"))return console.warn("[Telegram.WebApp] HapticFeedback is not supported in version "+p),j;if(P.type=="impact"){if(P.impact_style!="light"&&P.impact_style!="medium"&&P.impact_style!="heavy"&&P.impact_style!="rigid"&&P.impact_style!="soft")throw console.error("[Telegram.WebApp] Haptic impact style is invalid",P.impact_style),Error("WebAppHapticImpactStyleInvalid")}else if(P.type=="notification"){if(P.notification_type!="error"&&P.notification_type!="success"&&P.notification_type!="warning")throw console.error("[Telegram.WebApp] Haptic notification type is invalid",P.notification_type),Error("WebAppHapticNotificationTypeInvalid")}else if(P.type!="selection_change")throw console.error("[Telegram.WebApp] Haptic feedback type is invalid",P.type),Error("WebAppHapticFeedbackTypeInvalid");return e.postEvent("web_app_trigger_haptic_feedback",!1,P),j}return j.impactOccurred=function(P){return N({type:"impact",impact_style:P})},j.notificationOccurred=function(P){return N({type:"notification",notification_type:P})},j.selectionChanged=function(){return N({type:"selection_change"})},j})(),Ao=(function(){var j={};function N(P,G,X){if(!Xe("6.9"))throw console.error("[Telegram.WebApp] CloudStorage is not supported in version "+p),Error("WebAppMethodUnsupported");return oc(P,G,X),j}return j.setItem=function(P,G,X){return N("saveStorageValue",{key:P,value:G},X)},j.getItem=function(P,G){return j.getItems([P],G?function(X,be){X?G(X):G(null,be[P])}:null)},j.getItems=function(P,G){return N("getStorageValues",{keys:P},G)},j.removeItem=function(P,G){return j.removeItems([P],G)},j.removeItems=function(P,G){return N("deleteStorageValues",{keys:P},G)},j.getKeys=function(P){return N("getStorageKeys",{},P)},j})(),Mo=(function(){var j=!1,N=!1,P="unknown",G=!1,X=!1,be=!1,Me="",we={};Object.defineProperty(we,"isInited",{get:function(){return j},enumerable:!0}),Object.defineProperty(we,"isBiometricAvailable",{get:function(){return j&&N},enumerable:!0}),Object.defineProperty(we,"biometricType",{get:function(){return P||"unknown"},enumerable:!0}),Object.defineProperty(we,"isAccessRequested",{get:function(){return G},enumerable:!0}),Object.defineProperty(we,"isAccessGranted",{get:function(){return G&&X},enumerable:!0}),Object.defineProperty(we,"isBiometricTokenSaved",{get:function(){return be},enumerable:!0}),Object.defineProperty(we,"deviceId",{get:function(){return Me||""},enumerable:!0});var ut={callbacks:[]},Ne=!1,lt=!1,St=!1;e.onEvent("biometry_info_received",tt),e.onEvent("biometry_auth_requested",xe),e.onEvent("biometry_token_updated",_e);function tt(Oe,Rt){if(j=!0,Rt.available?(N=!0,P=Rt.type||"unknown",Rt.access_requested?(G=!0,X=!!Rt.access_granted,be=!!Rt.token_saved):(G=!1,X=!1,be=!1)):(N=!1,P="unknown",G=!1,X=!1,be=!1),Me=Rt.device_id||"",ut.callbacks.length>0){for(var Ze=0;Ze<ut.callbacks.length;Ze++){var Xt=ut.callbacks[Ze];Xt()}ut.callbacks=[]}if(Ne){var Nr=Ne;Ne=!1,Nr.callback&&Nr.callback(X)}ae("biometricManagerUpdated")}function xe(Oe,Rt){var Ze=Rt.status=="authorized",Xt=Rt.token||"";if(lt){var Nr=lt;lt=!1,Nr.callback&&Nr.callback(Ze,Ze?Xt:null)}ae("biometricAuthRequested",Ze?{isAuthenticated:!0,biometricToken:Xt}:{isAuthenticated:!1})}function _e(Oe,Rt){var Ze=!1;if(N&&G&&(Rt.status=="updated"?(be=!0,Ze=!0):Rt.status=="removed"&&(be=!1,Ze=!0)),St){var Xt=St;St=!1,Xt.callback&&Xt.callback(Ze)}ae("biometricTokenUpdated",{isUpdated:Ze})}function De(){return Xe("7.2")?!0:(console.warn("[Telegram.WebApp] BiometricManager is not supported in version "+p),!1)}function Wt(){if(!j)throw console.error("[Telegram.WebApp] BiometricManager should be inited before using."),Error("WebAppBiometricManagerNotInited");return!0}return we.init=function(Oe){return!De()||j||(Oe&&ut.callbacks.push(Oe),e.postEvent("web_app_biometry_get_info",!1)),we},we.requestAccess=function(Oe,Rt){if(!De())return we;if(Wt(),!N)throw console.error("[Telegram.WebApp] Biometrics is not available on this device."),Error("WebAppBiometricManagerBiometricsNotAvailable");if(Ne)throw console.error("[Telegram.WebApp] Access is already requested"),Error("WebAppBiometricManagerAccessRequested");var Ze={};if(typeof Oe.reason<"u"){var Xt=Ce(Oe.reason);if(Xt.length>128)throw console.error("[Telegram.WebApp] Biometric reason is too long",Xt),Error("WebAppBiometricRequestAccessParamInvalid");Xt.length>0&&(Ze.reason=Xt)}return Ne={callback:Rt},e.postEvent("web_app_biometry_request_access",!1,Ze),we},we.authenticate=function(Oe,Rt){if(!De())return we;if(Wt(),!N)throw console.error("[Telegram.WebApp] Biometrics is not available on this device."),Error("WebAppBiometricManagerBiometricsNotAvailable");if(!X)throw console.error("[Telegram.WebApp] Biometric access was not granted by the user."),Error("WebAppBiometricManagerBiometricAccessNotGranted");if(lt)throw console.error("[Telegram.WebApp] Authentication request is already in progress."),Error("WebAppBiometricManagerAuthenticationRequested");var Ze={};if(typeof Oe.reason<"u"){var Xt=Ce(Oe.reason);if(Xt.length>128)throw console.error("[Telegram.WebApp] Biometric reason is too long",Xt),Error("WebAppBiometricRequestAccessParamInvalid");Xt.length>0&&(Ze.reason=Xt)}return lt={callback:Rt},e.postEvent("web_app_biometry_request_auth",!1,Ze),we},we.updateBiometricToken=function(Oe,Rt){if(!De())return we;if(Oe=Oe||"",Oe.length>1024)throw console.error("[Telegram.WebApp] Token is too long",Oe),Error("WebAppBiometricManagerTokenInvalid");if(Wt(),!N)throw console.error("[Telegram.WebApp] Biometrics is not available on this device."),Error("WebAppBiometricManagerBiometricsNotAvailable");if(!X)throw console.error("[Telegram.WebApp] Biometric access was not granted by the user."),Error("WebAppBiometricManagerBiometricAccessNotGranted");if(St)throw console.error("[Telegram.WebApp] Token request is already in progress."),Error("WebAppBiometricManagerTokenUpdateRequested");return St={callback:Rt},e.postEvent("web_app_biometry_update_token",!1,{token:Oe}),we},we.openSettings=function(){if(!De())return we;if(Wt(),!N)throw console.error("[Telegram.WebApp] Biometrics is not available on this device."),Error("WebAppBiometricManagerBiometricsNotAvailable");if(!G)throw console.error("[Telegram.WebApp] Biometric access was not requested yet."),Error("WebAppBiometricManagerBiometricsAccessNotRequested");return X?(console.warn("[Telegram.WebApp] Biometric access was granted by the user, no need to go to settings."),we):(e.postEvent("web_app_biometry_open_settings",!1),we)},we})(),Is=(function(){var j=!1,N=!1,P=!1,G=!1,X={};Object.defineProperty(X,"isInited",{get:function(){return j},enumerable:!0}),Object.defineProperty(X,"isLocationAvailable",{get:function(){return j&&N},enumerable:!0}),Object.defineProperty(X,"isAccessRequested",{get:function(){return P},enumerable:!0}),Object.defineProperty(X,"isAccessGranted",{get:function(){return P&&G},enumerable:!0});var be={callbacks:[]},Me={callbacks:[]};e.onEvent("location_checked",we),e.onEvent("location_requested",ut);function we(tt,xe){if(j=!0,xe.available?(N=!0,xe.access_requested?(P=!0,G=!!xe.access_granted):(P=!1,G=!1)):(N=!1,P=!1,G=!1),be.callbacks.length>0){for(var _e=0;_e<be.callbacks.length;_e++){var De=be.callbacks[_e];De()}be.callbacks=[]}ae("locationManagerUpdated")}function ut(tt,xe){if(!xe.available)_e=null;else{var _e={latitude:xe.latitude,longitude:xe.longitude,altitude:null,course:null,speed:null,horizontal_accuracy:null,vertical_accuracy:null,course_accuracy:null,speed_accuracy:null};typeof xe.altitude<"u"&&xe.altitude!==null&&(_e.altitude=xe.altitude),typeof xe.course<"u"&&xe.course!==null&&(_e.course=xe.course%360),typeof xe.speed<"u"&&xe.speed!==null&&(_e.speed=xe.speed),typeof xe.horizontal_accuracy<"u"&&xe.horizontal_accuracy!==null&&(_e.horizontal_accuracy=xe.horizontal_accuracy),typeof xe.vertical_accuracy<"u"&&xe.vertical_accuracy!==null&&(_e.vertical_accuracy=xe.vertical_accuracy),typeof xe.course_accuracy<"u"&&xe.course_accuracy!==null&&(_e.course_accuracy=xe.course_accuracy),typeof xe.speed_accuracy<"u"&&xe.speed_accuracy!==null&&(_e.speed_accuracy=xe.speed_accuracy)}!xe.available||!N||!P||!G?(be.callbacks.push(function(){Ne(_e)}),e.postEvent("web_app_check_location",!1)):Ne(_e)}function Ne(tt){if(Me.callbacks.length>0){for(var xe=0;xe<Me.callbacks.length;xe++){var _e=Me.callbacks[xe];_e(tt)}Me.callbacks=[]}tt!==null&&ae("locationRequested",{locationData:tt})}function lt(){return Xe("8.0")?!0:(console.warn("[Telegram.WebApp] LocationManager is not supported in version "+p),!1)}function St(){if(!j)throw console.error("[Telegram.WebApp] LocationManager should be inited before using."),Error("WebAppLocationManagerNotInited");return!0}return X.init=function(tt){return!lt()||j||(tt&&be.callbacks.push(tt),e.postEvent("web_app_check_location",!1)),X},X.getLocation=function(tt){if(!lt())return X;if(St(),!N)throw console.error("[Telegram.WebApp] Location is not available on this device."),Error("WebAppLocationManagerLocationNotAvailable");return Me.callbacks.push(tt),e.postEvent("web_app_request_location"),X},X.openSettings=function(){if(!lt())return X;if(St(),!N)throw console.error("[Telegram.WebApp] Location is not available on this device."),Error("WebAppLocationManagerLocationNotAvailable");if(!P)throw console.error("[Telegram.WebApp] Location access was not requested yet."),Error("WebAppLocationManagerLocationAccessNotRequested");return G?(console.warn("[Telegram.WebApp] Location access was granted by the user, no need to go to settings."),X):(e.postEvent("web_app_open_location_settings",!1),X)},X})(),jo=(function(){var j=!1,N=null,P=null,G=null,X=[],be=[],Me={};Object.defineProperty(Me,"isStarted",{get:function(){return j},enumerable:!0}),Object.defineProperty(Me,"x",{get:function(){return N},enumerable:!0}),Object.defineProperty(Me,"y",{get:function(){return P},enumerable:!0}),Object.defineProperty(Me,"z",{get:function(){return G},enumerable:!0}),e.onEvent("accelerometer_started",we),e.onEvent("accelerometer_stopped",ut),e.onEvent("accelerometer_changed",Ne),e.onEvent("accelerometer_failed",lt);function we(tt,xe){if(j=!0,X.length>0){for(var _e=0;_e<X.length;_e++){var De=X[_e];De(!0)}X=[]}ae("accelerometerStarted")}function ut(tt,xe){if(j=!1,be.length>0){for(var _e=0;_e<be.length;_e++){var De=be[_e];De(!0)}be=[]}ae("accelerometerStopped")}function Ne(tt,xe){N=xe.x,P=xe.y,G=xe.z,ae("accelerometerChanged")}function lt(tt,xe){if(X.length>0){for(var _e=0;_e<X.length;_e++){var De=X[_e];De(!1)}X=[]}ae("accelerometerFailed",{error:xe.error})}function St(){return Xe("8.0")?!0:(console.warn("[Telegram.WebApp] Accelerometer is not supported in version "+p),!1)}return Me.start=function(tt,xe){if(tt=tt||{},!St())return Me;var _e={},De=parseInt(tt.refresh_rate||1e3);return isNaN(De)||De<20||De>1e3?console.warn("[Telegram.WebApp] Accelerometer refresh_rate is invalid",De):_e.refresh_rate=De,xe&&X.push(xe),e.postEvent("web_app_start_accelerometer",!1,_e),Me},Me.stop=function(tt){return St()&&(tt&&be.push(tt),e.postEvent("web_app_stop_accelerometer")),Me},Me})(),mn=(function(){var j=!1,N=null,P=null,G=null,X=!1,be=[],Me=[],we={};Object.defineProperty(we,"isStarted",{get:function(){return j},enumerable:!0}),Object.defineProperty(we,"absolute",{get:function(){return X},enumerable:!0}),Object.defineProperty(we,"alpha",{get:function(){return N},enumerable:!0}),Object.defineProperty(we,"beta",{get:function(){return P},enumerable:!0}),Object.defineProperty(we,"gamma",{get:function(){return G},enumerable:!0}),e.onEvent("device_orientation_started",ut),e.onEvent("device_orientation_stopped",Ne),e.onEvent("device_orientation_changed",lt),e.onEvent("device_orientation_failed",St);function ut(xe,_e){if(j=!0,be.length>0){for(var De=0;De<be.length;De++){var Wt=be[De];Wt(!0)}be=[]}ae("deviceOrientationStarted")}function Ne(xe,_e){if(j=!1,Me.length>0){for(var De=0;De<Me.length;De++){var Wt=Me[De];Wt(!0)}Me=[]}ae("deviceOrientationStopped")}function lt(xe,_e){X=!!_e.absolute,N=_e.alpha,P=_e.beta,G=_e.gamma,ae("deviceOrientationChanged")}function St(xe,_e){if(be.length>0){for(var De=0;De<be.length;De++){var Wt=be[De];Wt(!1)}be=[]}ae("deviceOrientationFailed",{error:_e.error})}function tt(){return Xe("8.0")?!0:(console.warn("[Telegram.WebApp] DeviceOrientation is not supported in version "+p),!1)}return we.start=function(xe,_e){if(xe=xe||{},!tt())return we;var De={},Wt=parseInt(xe.refresh_rate||1e3);return isNaN(Wt)||Wt<20||Wt>1e3?console.warn("[Telegram.WebApp] DeviceOrientation refresh_rate is invalid",Wt):De.refresh_rate=Wt,De.need_absolute=!!xe.need_absolute,_e&&be.push(_e),e.postEvent("web_app_start_device_orientation",!1,De),we},we.stop=function(xe){return tt()&&(xe&&Me.push(xe),e.postEvent("web_app_stop_device_orientation")),we},we})(),ad=(function(){var j=!1,N=null,P=null,G=null,X=[],be=[],Me={};Object.defineProperty(Me,"isStarted",{get:function(){return j},enumerable:!0}),Object.defineProperty(Me,"x",{get:function(){return N},enumerable:!0}),Object.defineProperty(Me,"y",{get:function(){return P},enumerable:!0}),Object.defineProperty(Me,"z",{get:function(){return G},enumerable:!0}),e.onEvent("gyroscope_started",we),e.onEvent("gyroscope_stopped",ut),e.onEvent("gyroscope_changed",Ne),e.onEvent("gyroscope_failed",lt);function we(tt,xe){if(j=!0,X.length>0){for(var _e=0;_e<X.length;_e++){var De=X[_e];De(!0)}X=[]}ae("gyroscopeStarted")}function ut(tt,xe){if(j=!1,be.length>0){for(var _e=0;_e<be.length;_e++){var De=be[_e];De(!0)}be=[]}ae("gyroscopeStopped")}function Ne(tt,xe){N=xe.x,P=xe.y,G=xe.z,ae("gyroscopeChanged")}function lt(tt,xe){if(X.length>0){for(var _e=0;_e<X.length;_e++){var De=X[_e];De(!1)}X=[]}ae("gyroscopeFailed",{error:xe.error})}function St(){return Xe("8.0")?!0:(console.warn("[Telegram.WebApp] Gyroscope is not supported in version "+p),!1)}return Me.start=function(tt,xe){if(tt=tt||{},!St())return Me;var _e={},De=parseInt(tt.refresh_rate||1e3);return isNaN(De)||De<20||De>1e3?console.warn("[Telegram.WebApp] Gyroscope refresh_rate is invalid",De):_e.refresh_rate=De,xe&&X.push(xe),e.postEvent("web_app_start_gyroscope",!1,_e),Me},Me.stop=function(tt){return St()&&(tt&&be.push(tt),e.postEvent("web_app_stop_gyroscope")),Me},Me})(),Oo={};function Fi(j,N){if(N.slug&&Oo[N.slug]){var P=Oo[N.slug];delete Oo[N.slug],P.callback&&P.callback(N.status),ae("invoiceClosed",{url:P.url,status:N.status})}}var Vn=!1;function ld(j,N){if(Vn){var P=Vn;Vn=!1;var G=null;typeof N.button_id<"u"&&(G=N.button_id),P.callback&&P.callback(G),ae("popupClosed",{button_id:G})}}var gi=!1;function cd(j,N){if(gi){var P=gi,G=null;typeof N.data<"u"&&(G=N.data),P.callback&&P.callback(G)&&(gi=!1,e.postEvent("web_app_close_scan_qr_popup",!1)),ae("qrTextReceived",{data:G})}}function Dp(j,N){gi=!1,ae("scanQrPopupClosed")}function Ia(j,N){if(N.req_id&&Ct[N.req_id]){var P=Ct[N.req_id];delete Ct[N.req_id];var G=null;typeof N.data<"u"&&(G=N.data),P.callback&&P.callback(G),ae("clipboardTextReceived",{data:G})}}var vi=!1;function ei(j,N){if(vi){var P=vi;vi=!1,P.callback&&P.callback(N.status=="allowed"),ae("writeAccessRequested",{status:N.status})}}function or(j,N){var P,G,X=0,be=function(){oc("getRequestedContact",{},function(we,ut){ut&&ut.length?(clearTimeout(G),j(ut)):(X+=50,P=setTimeout(be,X))})},Me=function(){clearTimeout(P),j("")};G=setTimeout(Me,N),be()}var Ro=!1;function zp(j,N){if(Ro){var P=Ro;Ro=!1;var G=N.status=="sent",X={status:N.status};G?or(function(be){if(be&&be.length){X.response=be,X.responseUnsafe=t.urlParseQueryString(be);for(var Me in X.responseUnsafe){var we=X.responseUnsafe[Me];try{(we.substr(0,1)=="{"&&we.substr(-1)=="}"||we.substr(0,1)=="["&&we.substr(-1)=="]")&&(X.responseUnsafe[Me]=JSON.parse(we))}catch{}}}P.callback&&P.callback(G,X),ae("contactRequested",X)},3e3):(P.callback&&P.callback(G,X),ae("contactRequested",X))}}var Vi=!1;function ud(j,N){if(Vi){var P=Vi;Vi=!1;var G=N.status=="downloading";P.callback&&P.callback(G),ae("fileDownloadRequested",{status:G?"downloading":"cancelled"})}}function Pa(j,N){if(N.req_id&&Ct[N.req_id]){var P=Ct[N.req_id];delete Ct[N.req_id];var G=null,X=null;typeof N.result<"u"&&(G=N.result),typeof N.error<"u"&&(X=N.error),P.callback&&P.callback(X,G)}}function oc(j,N,P){if(!Xe("6.9"))throw console.error("[Telegram.WebApp] Method invokeCustomMethod is not supported in version "+p),Error("WebAppMethodUnsupported");var G=Ae(16),X={req_id:G,method:j,params:N||{}};Ct[G]={callback:P},e.postEvent("web_app_invoke_custom_method",!1,X)}window.Telegram||(window.Telegram={}),Object.defineProperty(i,"initData",{get:function(){return s},enumerable:!0}),Object.defineProperty(i,"initDataUnsafe",{get:function(){return l},enumerable:!0}),Object.defineProperty(i,"version",{get:function(){return p},enumerable:!0}),Object.defineProperty(i,"platform",{get:function(){return m},enumerable:!0}),Object.defineProperty(i,"colorScheme",{get:function(){return d},enumerable:!0}),Object.defineProperty(i,"themeParams",{get:function(){return c},enumerable:!0}),Object.defineProperty(i,"isExpanded",{get:function(){return We},enumerable:!0}),Object.defineProperty(i,"viewportHeight",{get:function(){return(ie===!1?window.innerHeight:ie)-on},enumerable:!0}),Object.defineProperty(i,"viewportStableHeight",{get:function(){return(He===!1?window.innerHeight:He)-on},enumerable:!0}),Object.defineProperty(i,"safeAreaInset",{get:function(){return Ke},enumerable:!0}),Object.defineProperty(i,"contentSafeAreaInset",{get:function(){return Yt},enumerable:!0}),Object.defineProperty(i,"isClosingConfirmationEnabled",{set:function(j){Xn(j)},get:function(){return jr},enumerable:!0}),Object.defineProperty(i,"isVerticalSwipesEnabled",{set:function(j){pi(j)},get:function(){return Jr},enumerable:!0}),Object.defineProperty(i,"isFullscreen",{get:function(){return v},enumerable:!0}),Object.defineProperty(i,"isOrientationLocked",{set:function(j){Pe(j)},get:function(){return b},enumerable:!0}),Object.defineProperty(i,"isActive",{get:function(){return g},enumerable:!0}),Object.defineProperty(i,"headerColor",{set:function(j){Ui(j)},get:function(){return _n()},enumerable:!0}),Object.defineProperty(i,"backgroundColor",{set:function(j){Na(j)},get:function(){return zs()},enumerable:!0}),Object.defineProperty(i,"bottomBarColor",{set:function(j){nd(j)},get:function(){return Ls()},enumerable:!0}),Object.defineProperty(i,"BackButton",{value:rc,enumerable:!0}),Object.defineProperty(i,"MainButton",{value:Np,enumerable:!0}),Object.defineProperty(i,"SecondaryButton",{value:sd,enumerable:!0}),Object.defineProperty(i,"SettingsButton",{value:_o,enumerable:!0}),Object.defineProperty(i,"HapticFeedback",{value:ic,enumerable:!0}),Object.defineProperty(i,"CloudStorage",{value:Ao,enumerable:!0}),Object.defineProperty(i,"BiometricManager",{value:Mo,enumerable:!0}),Object.defineProperty(i,"Accelerometer",{value:jo,enumerable:!0}),Object.defineProperty(i,"DeviceOrientation",{value:mn,enumerable:!0}),Object.defineProperty(i,"Gyroscope",{value:ad,enumerable:!0}),Object.defineProperty(i,"LocationManager",{value:Is,enumerable:!0}),i.isVersionAtLeast=function(j){return Xe(j)},i.setHeaderColor=function(j){i.headerColor=j},i.setBackgroundColor=function(j){i.backgroundColor=j},i.setBottomBarColor=function(j){i.bottomBarColor=j},i.enableClosingConfirmation=function(){i.isClosingConfirmationEnabled=!0},i.disableClosingConfirmation=function(){i.isClosingConfirmationEnabled=!1},i.enableVerticalSwipes=function(){i.isVerticalSwipesEnabled=!0},i.disableVerticalSwipes=function(){i.isVerticalSwipesEnabled=!1},i.lockOrientation=function(){i.isOrientationLocked=!0},i.unlockOrientation=function(){i.isOrientationLocked=!1},i.requestFullscreen=function(){if(!Xe("8.0"))throw console.error("[Telegram.WebApp] Method requestFullscreen is not supported in version "+p),Error("WebAppMethodUnsupported");e.postEvent("web_app_request_fullscreen")},i.exitFullscreen=function(){if(!Xe("8.0"))throw console.error("[Telegram.WebApp] Method exitFullscreen is not supported in version "+p),Error("WebAppMethodUnsupported");e.postEvent("web_app_exit_fullscreen")},i.addToHomeScreen=function(){if(!Xe("8.0"))throw console.error("[Telegram.WebApp] Method addToHomeScreen is not supported in version "+p),Error("WebAppMethodUnsupported");e.postEvent("web_app_add_to_home_screen")},i.checkHomeScreenStatus=function(j){if(!Xe("8.0"))throw console.error("[Telegram.WebApp] Method checkHomeScreenStatus is not supported in version "+p),Error("WebAppMethodUnsupported");j&&Ie.push(j),e.postEvent("web_app_check_home_screen")},i.onEvent=function(j,N){Se(j,N)},i.offEvent=function(j,N){ge(j,N)},i.sendData=function(j){if(!j||!j.length)throw console.error("[Telegram.WebApp] Data is required",j),Error("WebAppDataInvalid");if(nc(j)>4096)throw console.error("[Telegram.WebApp] Data is too long",j),Error("WebAppDataInvalid");e.postEvent("web_app_data_send",!1,{data:j})},i.switchInlineQuery=function(j,N){if(!Xe("6.6"))throw console.error("[Telegram.WebApp] Method switchInlineQuery is not supported in version "+p),Error("WebAppMethodUnsupported");if(!n.tgWebAppBotInline)throw console.error("[Telegram.WebApp] Inline mode is disabled for this bot. Read more about inline mode: https://core.telegram.org/bots/inline"),Error("WebAppInlineModeDisabled");if(j=j||"",j.length>256)throw console.error("[Telegram.WebApp] Inline query is too long",j),Error("WebAppInlineQueryInvalid");var P=[];if(N){if(!Array.isArray(N))throw console.error("[Telegram.WebApp] Choose chat types should be an array",N),Error("WebAppInlineChooseChatTypesInvalid");for(var G={users:1,bots:1,groups:1,channels:1},X=0;X<N.length;X++){var be=N[X];if(!G[be])throw console.error("[Telegram.WebApp] Choose chat type is invalid",be),Error("WebAppInlineChooseChatTypeInvalid");G[be]!=2&&(G[be]=2,P.push(be))}}e.postEvent("web_app_switch_inline_query",!1,{query:j,chat_types:P})},i.openLink=function(G,N){var P=document.createElement("A");if(P.href=G,P.protocol!="http:"&&P.protocol!="https:")throw console.error("[Telegram.WebApp] Url protocol is not supported",G),Error("WebAppTgUrlInvalid");var G=P.href;if(N=N||{},Xe("6.1")){var X={url:G};Xe("6.4")&&N.try_instant_view&&(X.try_instant_view=!0),Xe("7.6")&&N.try_browser&&(X.try_browser=N.try_browser),e.postEvent("web_app_open_link",!1,X)}else window.open(G,"_blank")},i.openTelegramLink=function(j,N){var P=document.createElement("A");if(P.href=j,P.protocol!="http:"&&P.protocol!="https:")throw console.error("[Telegram.WebApp] Url protocol is not supported",j),Error("WebAppTgUrlInvalid");if(P.hostname!="t.me")throw console.error("[Telegram.WebApp] Url host is not supported",j),Error("WebAppTgUrlInvalid");var G=P.pathname+P.search;if(N=N||{},r||Xe("6.1")){var X={path_full:G};N.force_request&&(X.force_request=!0),e.postEvent("web_app_open_tg_link",!1,X)}else location.href="https://t.me"+G},i.openInvoice=function(j,N){var P=document.createElement("A"),G,X;if(P.href=j,P.protocol!="http:"&&P.protocol!="https:"||P.hostname!="t.me"||!(G=P.pathname.match(/^\/(\$|invoice\/)([A-Za-z0-9\-_=]+)$/))||!(X=G[2]))throw console.error("[Telegram.WebApp] Invoice url is invalid",j),Error("WebAppInvoiceUrlInvalid");if(!Xe("6.1"))throw console.error("[Telegram.WebApp] Method openInvoice is not supported in version "+p),Error("WebAppMethodUnsupported");if(Oo[X])throw console.error("[Telegram.WebApp] Invoice is already opened"),Error("WebAppInvoiceOpened");Oo[X]={url:j,callback:N},e.postEvent("web_app_open_invoice",!1,{slug:X})},i.showPopup=function(j,N){if(!Xe("6.2"))throw console.error("[Telegram.WebApp] Method showPopup is not supported in version "+p),Error("WebAppMethodUnsupported");if(Vn)throw console.error("[Telegram.WebApp] Popup is already opened"),Error("WebAppPopupOpened");var P="",G="",X=[],be={};if(typeof j.title<"u"){if(P=Ce(j.title),P.length>64)throw console.error("[Telegram.WebApp] Popup title is too long",P),Error("WebAppPopupParamInvalid");P.length>0&&(be.title=P)}if(typeof j.message<"u"&&(G=Ce(j.message)),!G.length)throw console.error("[Telegram.WebApp] Popup message is required",j.message),Error("WebAppPopupParamInvalid");if(G.length>256)throw console.error("[Telegram.WebApp] Popup message is too long",G),Error("WebAppPopupParamInvalid");if(be.message=G,typeof j.buttons<"u"){if(!Array.isArray(j.buttons))throw console.error("[Telegram.WebApp] Popup buttons should be an array",j.buttons),Error("WebAppPopupParamInvalid");for(var Me=0;Me<j.buttons.length;Me++){var we=j.buttons[Me],ut={},Ne="";if(typeof we.id<"u"&&(Ne=we.id.toString(),Ne.length>64))throw console.error("[Telegram.WebApp] Popup button id is too long",Ne),Error("WebAppPopupParamInvalid");ut.id=Ne;var lt=we.type;if(typeof lt>"u"&&(lt="default"),ut.type=lt,!(lt=="ok"||lt=="close"||lt=="cancel"))if(lt=="default"||lt=="destructive"){var St="";if(typeof we.text<"u"&&(St=Ce(we.text)),!St.length)throw console.error("[Telegram.WebApp] Popup button text is required for type "+lt,we.text),Error("WebAppPopupParamInvalid");if(St.length>64)throw console.error("[Telegram.WebApp] Popup button text is too long",St),Error("WebAppPopupParamInvalid");ut.text=St}else throw console.error("[Telegram.WebApp] Popup button type is invalid",lt),Error("WebAppPopupParamInvalid");X.push(ut)}}else X.push({id:"",type:"close"});if(X.length<1)throw console.error("[Telegram.WebApp] Popup should have at least one button"),Error("WebAppPopupParamInvalid");if(X.length>3)throw console.error("[Telegram.WebApp] Popup should not have more than 3 buttons"),Error("WebAppPopupParamInvalid");be.buttons=X,Vn={callback:N},e.postEvent("web_app_open_popup",!1,be)},i.showAlert=function(j,N){i.showPopup({message:j},N?function(){N()}:null)},i.showConfirm=function(j,N){i.showPopup({message:j,buttons:[{type:"ok",id:"ok"},{type:"cancel"}]},N?function(P){N(P=="ok")}:null)},i.showScanQrPopup=function(j,N){if(!Xe("6.4"))throw console.error("[Telegram.WebApp] Method showScanQrPopup is not supported in version "+p),Error("WebAppMethodUnsupported");if(gi)throw console.error("[Telegram.WebApp] Popup is already opened"),Error("WebAppScanQrPopupOpened");var P="",G={};if(typeof j.text<"u"){if(P=Ce(j.text),P.length>64)throw console.error("[Telegram.WebApp] Scan QR popup text is too long",P),Error("WebAppScanQrPopupParamInvalid");P.length>0&&(G.text=P)}gi={callback:N},e.postEvent("web_app_open_scan_qr_popup",!1,G)},i.closeScanQrPopup=function(){if(!Xe("6.4"))throw console.error("[Telegram.WebApp] Method closeScanQrPopup is not supported in version "+p),Error("WebAppMethodUnsupported");gi=!1,e.postEvent("web_app_close_scan_qr_popup",!1)},i.readTextFromClipboard=function(j){if(!Xe("6.4"))throw console.error("[Telegram.WebApp] Method readTextFromClipboard is not supported in version "+p),Error("WebAppMethodUnsupported");var N=Ae(16),P={req_id:N};Ct[N]={callback:j},e.postEvent("web_app_read_text_from_clipboard",!1,P)},i.requestWriteAccess=function(j){if(!Xe("6.9"))throw console.error("[Telegram.WebApp] Method requestWriteAccess is not supported in version "+p),Error("WebAppMethodUnsupported");if(vi)throw console.error("[Telegram.WebApp] Write access is already requested"),Error("WebAppWriteAccessRequested");vi={callback:j},e.postEvent("web_app_request_write_access")},i.requestContact=function(j){if(!Xe("6.9"))throw console.error("[Telegram.WebApp] Method requestContact is not supported in version "+p),Error("WebAppMethodUnsupported");if(Ro)throw console.error("[Telegram.WebApp] Contact is already requested"),Error("WebAppContactRequested");Ro={callback:j},e.postEvent("web_app_request_phone")},i.downloadFile=function(j,N){if(!Xe("8.0"))throw console.error("[Telegram.WebApp] Method downloadFile is not supported in version "+p),Error("WebAppMethodUnsupported");if(Vi)throw console.error("[Telegram.WebApp] Popup is already opened"),Error("WebAppDownloadFilePopupOpened");var P=document.createElement("A"),G={};if(!j||!j.url||!j.url.length)throw console.error("[Telegram.WebApp] Url is required"),Error("WebAppDownloadFileParamInvalid");if(P.href=j.url,P.protocol!="https:")throw console.error("[Telegram.WebApp] Url protocol is not supported",url),Error("WebAppDownloadFileParamInvalid");if(G.url=P.href,!j||!j.file_name||!j.file_name.length)throw console.error("[Telegram.WebApp] File name is required"),Error("WebAppDownloadFileParamInvalid");G.file_name=j.file_name,Vi={callback:N},e.postEvent("web_app_request_file_download",!1,G)},i.shareToStory=function(j,N){if(N=N||{},!Xe("7.8"))throw console.error("[Telegram.WebApp] Method shareToStory is not supported in version "+p),Error("WebAppMethodUnsupported");var P=document.createElement("A");if(P.href=j,P.protocol!="http:"&&P.protocol!="https:")throw console.error("[Telegram.WebApp] Media url protocol is not supported",url),Error("WebAppMediaUrlInvalid");var G={};if(G.media_url=P.href,typeof N.text<"u"){var X=Ce(N.text);if(X.length>2048)throw console.error("[Telegram.WebApp] Text is too long",X),Error("WebAppShareToStoryParamInvalid");X.length>0&&(G.text=X)}if(typeof N.widget_link<"u"){if(N.widget_link=N.widget_link||{},P.href=N.widget_link.url,P.protocol!="http:"&&P.protocol!="https:")throw console.error("[Telegram.WebApp] Link protocol is not supported",url),Error("WebAppShareToStoryParamInvalid");var be={url:P.href};if(typeof N.widget_link.name<"u"){var Me=Ce(N.widget_link.name);if(Me.length>48)throw console.error("[Telegram.WebApp] Link name is too long",Me),Error("WebAppShareToStoryParamInvalid");Me.length>0&&(be.name=Me)}G.widget_link=be}e.postEvent("web_app_share_to_story",!1,G)},i.shareMessage=function(j,N){if(!Xe("8.0"))throw console.error("[Telegram.WebApp] Method shareMessage is not supported in version "+p),Error("WebAppMethodUnsupported");if(un)throw console.error("[Telegram.WebApp] Share message is already opened"),Error("WebAppShareMessageOpened");un={callback:N},e.postEvent("web_app_send_prepared_message",!1,{id:j})},i.setEmojiStatus=function(j,N,P){if(N=N||{},!Xe("8.0"))throw console.error("[Telegram.WebApp] Method setEmojiStatus is not supported in version "+p),Error("WebAppMethodUnsupported");var G={};if(G.custom_emoji_id=j,typeof N.duration<"u"&&(G.duration=N.duration),Tn)throw console.error("[Telegram.WebApp] Emoji status is already requested"),Error("WebAppEmojiStatusRequested");Tn={callback:P},e.postEvent("web_app_set_emoji_status",!1,G)},i.requestEmojiStatusAccess=function(j){if(!Xe("8.0"))throw console.error("[Telegram.WebApp] Method requestEmojiStatusAccess is not supported in version "+p),Error("WebAppMethodUnsupported");if(rn)throw console.error("[Telegram.WebApp] Emoji status permission is already requested"),Error("WebAppEmojiStatusAccessRequested");rn={callback:j},e.postEvent("web_app_request_emoji_status_access")},i.invokeCustomMethod=function(j,N,P){oc(j,N,P)},i.ready=function(){e.postEvent("web_app_ready")},i.expand=function(){e.postEvent("web_app_expand")},i.close=function(j){j=j||{};var N={};Xe("7.6")&&j.return_back&&(N.return_back=!0),e.postEvent("web_app_close",!1,N)},window.Telegram.WebApp=i,wo(),Co(),Hi(),Je(),n.tgWebAppShowSettings&&_o.show(),window.addEventListener("resize",ye),r&&document.addEventListener("click",ue),e.onEvent("theme_changed",Q),e.onEvent("viewport_changed",Re),e.onEvent("safe_area_changed",me),e.onEvent("content_safe_area_changed",q),e.onEvent("visibility_changed",te),e.onEvent("invoice_closed",Fi),e.onEvent("popup_closed",ld),e.onEvent("qr_text_received",cd),e.onEvent("scan_qr_popup_closed",Dp),e.onEvent("clipboard_text_received",Ia),e.onEvent("write_access_requested",ei),e.onEvent("phone_requested",zp),e.onEvent("file_download_requested",ud),e.onEvent("custom_method_invoked",Pa),e.onEvent("fullscreen_changed",Ns),e.onEvent("fullscreen_failed",ec),e.onEvent("home_screen_added",Ht),e.onEvent("home_screen_checked",ir),e.onEvent("prepared_message_sent",Qr),e.onEvent("prepared_message_failed",Jn),e.onEvent("emoji_status_set",Or),e.onEvent("emoji_status_failed",vr),e.onEvent("emoji_status_access_requested",Rr),e.postEvent("web_app_request_theme"),e.postEvent("web_app_request_viewport"),e.postEvent("web_app_request_safe_area"),e.postEvent("web_app_request_content_safe_area")})()),GS}var YS;function lO(){if(YS)return Gc;YS=1,Object.defineProperty(Gc,"__esModule",{value:!0}),Gc.WebApp=void 0,aO();var t=window;return Gc.WebApp=t.Telegram.WebApp,Gc}var XS;function cO(){if(XS)return yf;XS=1,Object.defineProperty(yf,"__esModule",{value:!0});var t=lO();return yf.default=t.WebApp,yf}var uO=cO();const ot=Tw(uO);function dO(t){let e=t,n=!1;const r=new Set;return{getState(){return e},updateState(i){e=typeof i=="function"?i(e):i},setState(i){this.updateState(i),r.forEach(s=>s(e))},initialize(i){n||(e=i,n=!0)},subscribe(i){return r.add(i),()=>r.delete(i)}}}function fO(t){return A.useSyncExternalStore(t.subscribe,()=>t.getState(),()=>t.getState())}function hO(t,e,n){const r=[],i=[],s={};for(const l of t){const c=l.position||e;s[c]=s[c]||0,s[c]+=1,s[c]<=n?i.push(l):r.push(l)}return{notifications:i,queue:r}}const pO=()=>dO({notifications:[],queue:[],defaultPosition:"bottom-right",limit:5}),Ta=pO(),mO=(t=Ta)=>fO(t);function Yl(t,e){const n=t.getState(),r=e([...n.notifications,...n.queue]),i=hO(r,n.defaultPosition,n.limit);t.setState({notifications:i.notifications,queue:i.queue,limit:n.limit,defaultPosition:n.defaultPosition})}function gO(t,e=Ta){const n=t.id||Aj();return Yl(e,r=>t.id&&r.some(i=>i.id===t.id)?r:[...r,{...t,id:n}]),n}function Mw(t,e=Ta){return Yl(e,n=>n.filter(r=>r.id===t?(r.onClose?.(r),!1):!0)),t}function vO(t,e=Ta){return Yl(e,n=>n.map(r=>r.id===t.id?{...r,...t}:r)),t.id}function yO(t=Ta){Yl(t,()=>[])}function bO(t=Ta){Yl(t,e=>e.slice(0,t.getState().limit))}const Gt={show:gO,hide:Mw,update:vO,clean:yO,cleanQueue:bO,updateState:Yl};function J0(t,e){return J0=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},J0(t,e)}function jw(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,J0(t,e)}var Pg={exports:{}},Bg,JS;function xO(){if(JS)return Bg;JS=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Bg=t,Bg}var Ug,QS;function SO(){if(QS)return Ug;QS=1;var t=xO();function e(){}function n(){}return n.resetWarningCache=e,Ug=function(){function r(l,c,d,p,m,g){if(g!==t){var v=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw v.name="Invariant Violation",v}}r.isRequired=r;function i(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:i,element:r,elementType:r,instanceOf:i,node:r,objectOf:i,oneOf:i,oneOfType:i,shape:i,exact:i,checkPropTypes:n,resetWarningCache:e};return s.PropTypes=s,s},Ug}var ZS;function EO(){return ZS||(ZS=1,Pg.exports=SO()()),Pg.exports}const e2={disabled:!1},rh=Gn.createContext(null);var kO=function(e){return e.scrollTop},fu="unmounted",ia="exited",oa="entering",Cl="entered",Q0="exiting",So=(function(t){jw(e,t);function e(r,i){var s;s=t.call(this,r,i)||this;var l=i,c=l&&!l.isMounting?r.enter:r.appear,d;return s.appearStatus=null,r.in?c?(d=ia,s.appearStatus=oa):d=Cl:r.unmountOnExit||r.mountOnEnter?d=fu:d=ia,s.state={status:d},s.nextCallback=null,s}e.getDerivedStateFromProps=function(i,s){var l=i.in;return l&&s.status===fu?{status:ia}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var l=this.state.status;this.props.in?l!==oa&&l!==Cl&&(s=oa):(l===oa||l===Cl)&&(s=Q0)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,l,c;return s=l=c=i,i!=null&&typeof i!="number"&&(s=i.exit,l=i.enter,c=i.appear!==void 0?i.appear:l),{exit:s,enter:l,appear:c}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===oa){if(this.props.unmountOnExit||this.props.mountOnEnter){var l=this.props.nodeRef?this.props.nodeRef.current:du.findDOMNode(this);l&&kO(l)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===ia&&this.setState({status:fu})},n.performEnter=function(i){var s=this,l=this.props.enter,c=this.context?this.context.isMounting:i,d=this.props.nodeRef?[c]:[du.findDOMNode(this),c],p=d[0],m=d[1],g=this.getTimeouts(),v=c?g.appear:g.enter;if(!i&&!l||e2.disabled){this.safeSetState({status:Cl},function(){s.props.onEntered(p)});return}this.props.onEnter(p,m),this.safeSetState({status:oa},function(){s.props.onEntering(p,m),s.onTransitionEnd(v,function(){s.safeSetState({status:Cl},function(){s.props.onEntered(p,m)})})})},n.performExit=function(){var i=this,s=this.props.exit,l=this.getTimeouts(),c=this.props.nodeRef?void 0:du.findDOMNode(this);if(!s||e2.disabled){this.safeSetState({status:ia},function(){i.props.onExited(c)});return}this.props.onExit(c),this.safeSetState({status:Q0},function(){i.props.onExiting(c),i.onTransitionEnd(l.exit,function(){i.safeSetState({status:ia},function(){i.props.onExited(c)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,l=!0;return this.nextCallback=function(c){l&&(l=!1,s.nextCallback=null,i(c))},this.nextCallback.cancel=function(){l=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var l=this.props.nodeRef?this.props.nodeRef.current:du.findDOMNode(this),c=i==null&&!this.props.addEndListener;if(!l||c){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var d=this.props.nodeRef?[this.nextCallback]:[l,this.nextCallback],p=d[0],m=d[1];this.props.addEndListener(p,m)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===fu)return null;var s=this.props,l=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var c=gw(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return Gn.createElement(rh.Provider,{value:null},typeof l=="function"?l(i,c):Gn.cloneElement(Gn.Children.only(l),c))},e})(Gn.Component);So.contextType=rh;So.propTypes={};function gl(){}So.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:gl,onEntering:gl,onEntered:gl,onExit:gl,onExiting:gl,onExited:gl};So.UNMOUNTED=fu;So.EXITED=ia;So.ENTERING=oa;So.ENTERED=Cl;So.EXITING=Q0;function wO(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Jv(t,e){var n=function(s){return e&&A.isValidElement(s)?e(s):s},r=Object.create(null);return t&&A.Children.map(t,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function CO(t,e){t=t||{},e=e||{};function n(m){return m in e?e[m]:t[m]}var r=Object.create(null),i=[];for(var s in t)s in e?i.length&&(r[s]=i,i=[]):i.push(s);var l,c={};for(var d in e){if(r[d])for(l=0;l<r[d].length;l++){var p=r[d][l];c[r[d][l]]=n(p)}c[d]=n(d)}for(l=0;l<i.length;l++)c[i[l]]=n(i[l]);return c}function la(t,e,n){return n[e]!=null?n[e]:t.props[e]}function TO(t,e){return Jv(t.children,function(n){return A.cloneElement(n,{onExited:e.bind(null,n),in:!0,appear:la(n,"appear",t),enter:la(n,"enter",t),exit:la(n,"exit",t)})})}function _O(t,e,n){var r=Jv(t.children),i=CO(e,r);return Object.keys(i).forEach(function(s){var l=i[s];if(A.isValidElement(l)){var c=s in e,d=s in r,p=e[s],m=A.isValidElement(p)&&!p.props.in;d&&(!c||m)?i[s]=A.cloneElement(l,{onExited:n.bind(null,l),in:!0,exit:la(l,"exit",t),enter:la(l,"enter",t)}):!d&&c&&!m?i[s]=A.cloneElement(l,{in:!1}):d&&c&&A.isValidElement(p)&&(i[s]=A.cloneElement(l,{onExited:n.bind(null,l),in:p.props.in,exit:la(l,"exit",t),enter:la(l,"enter",t)}))}}),i}var AO=Object.values||function(t){return Object.keys(t).map(function(e){return t[e]})},MO={component:"div",childFactory:function(e){return e}},is=(function(t){jw(e,t);function e(r,i){var s;s=t.call(this,r,i)||this;var l=s.handleExited.bind(wO(s));return s.state={contextValue:{isMounting:!0},handleExited:l,firstRender:!0},s}var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(i,s){var l=s.children,c=s.handleExited,d=s.firstRender;return{children:d?TO(i,c):_O(i,l,c),firstRender:!1}},n.handleExited=function(i,s){var l=Jv(this.props.children);i.key in l||(i.props.onExited&&i.props.onExited(s),this.mounted&&this.setState(function(c){var d=Mj({},c.children);return delete d[i.key],{children:d}}))},n.render=function(){var i=this.props,s=i.component,l=i.childFactory,c=gw(i,["component","childFactory"]),d=this.state.contextValue,p=AO(this.state.children).map(l);return delete c.appear,delete c.enter,delete c.exit,s===null?Gn.createElement(rh.Provider,{value:d},p):Gn.createElement(rh.Provider,{value:d},Gn.createElement(s,c,p))},e})(Gn.Component);is.propTypes={};is.defaultProps=MO;const Ow=["bottom-center","bottom-left","bottom-right","top-center","top-left","top-right"];function jO(t,e){return t.reduce((n,r)=>(n[r.position||e].push(r),n),Ow.reduce((n,r)=>(n[r]=[],n),{}))}const t2={left:"translateX(-100%)",right:"translateX(100%)","top-center":"translateY(-100%)","bottom-center":"translateY(100%)"},OO={left:"translateX(0)",right:"translateX(0)","top-center":"translateY(0)","bottom-center":"translateY(0)"};function RO({state:t,maxHeight:e,position:n,transitionDuration:r}){const[i,s]=n.split("-"),l=s==="center"?`${i}-center`:s,c={opacity:0,maxHeight:e,transform:t2[l],transitionDuration:`${r}ms, ${r}ms, ${r}ms`,transitionTimingFunction:"cubic-bezier(.51,.3,0,1.21), cubic-bezier(.51,.3,0,1.21), linear",transitionProperty:"opacity, transform, max-height"},d={opacity:1,transform:OO[l]},p={opacity:0,maxHeight:0,transform:t2[l]};return{...c,...{entering:d,entered:d,exiting:p,exited:p}[t]}}function NO(t,e){return typeof e=="number"?e:e===!1||t===!1?!1:t}const Rw=A.forwardRef(({data:t,onHide:e,autoClose:n,...r},i)=>{const{autoClose:s,message:l,...c}=t,d=NO(n,t.autoClose),p=A.useRef(-1),m=()=>window.clearTimeout(p.current),g=()=>{e(t.id),m()},v=()=>{typeof d=="number"&&(p.current=window.setTimeout(g,d))};return A.useEffect(()=>{t.onOpen?.(t)},[]),A.useEffect(()=>(v(),m),[d]),h.jsx(jj,{...r,...c,onClose:g,ref:i,onMouseEnter:m,onMouseLeave:v,children:l})});Rw.displayName="@mantine/notifications/NotificationContainer";var Nw={root:"m_b37d9ac7",notification:"m_5ed0edd0"};const DO=So,zO={position:"bottom-right",autoClose:4e3,transitionDuration:250,containerWidth:440,notificationMaxHeight:200,limit:5,zIndex:Oj("overlay"),store:Ta,withinPortal:!0},LO=Ij((t,{zIndex:e,containerWidth:n})=>({root:{"--notifications-z-index":e?.toString(),"--notifications-container-width":en(n)}})),Eo=Ca((t,e)=>{const n=zi("Notifications",zO,t),{classNames:r,className:i,style:s,styles:l,unstyled:c,vars:d,position:p,autoClose:m,transitionDuration:g,containerWidth:v,notificationMaxHeight:b,limit:S,zIndex:k,store:E,portalProps:w,withinPortal:T,..._}=n,R=Rj(),O=mO(E),D=Nj(),I=Dj(),H=A.useRef({}),V=A.useRef(0),Q=(R.respectReducedMotion?I:!1)?1:g,re=vw({name:"Notifications",classes:Nw,props:n,className:i,style:s,classNames:r,styles:l,unstyled:c,vars:d,varsResolver:LO});A.useEffect(()=>{E?.updateState(me=>({...me,limit:S||5,defaultPosition:p}))},[S,p]),zj(()=>{O.notifications.length>V.current&&setTimeout(()=>D(),0),V.current=O.notifications.length},[O.notifications]);const Re=jO(O.notifications,p),ye=Ow.reduce((me,q)=>(me[q]=Re[q].map(({style:te,...ue})=>h.jsx(DO,{timeout:Q,onEnter:()=>H.current[ue.id].offsetHeight,nodeRef:{current:H.current[ue.id]},children:Ce=>h.jsx(Rw,{ref:ae=>{ae&&(H.current[ue.id]=ae)},data:ue,onHide:ae=>Mw(ae,E),autoClose:m,...re("notification",{style:{...RO({state:Ce,position:q,transitionDuration:Q,maxHeight:b}),...te}})})},ue.id)),me),{});return h.jsxs(Lj,{withinPortal:T,...w,children:[h.jsx(ne,{...re("root"),"data-position":"top-center",ref:e,..._,children:h.jsx(is,{children:ye["top-center"]})}),h.jsx(ne,{...re("root"),"data-position":"top-left",..._,children:h.jsx(is,{children:ye["top-left"]})}),h.jsx(ne,{...re("root",{className:qS.classNames.fullWidth}),"data-position":"top-right",..._,children:h.jsx(is,{children:ye["top-right"]})}),h.jsx(ne,{...re("root",{className:qS.classNames.fullWidth}),"data-position":"bottom-right",..._,children:h.jsx(is,{children:ye["bottom-right"]})}),h.jsx(ne,{...re("root"),"data-position":"bottom-left",..._,children:h.jsx(is,{children:ye["bottom-left"]})}),h.jsx(ne,{...re("root"),"data-position":"bottom-center",..._,children:h.jsx(is,{children:ye["bottom-center"]})})]})});Eo.classes=Nw;Eo.displayName="@mantine/notifications/Notifications";Eo.show=Gt.show;Eo.hide=Gt.hide;Eo.update=Gt.update;Eo.clean=Gt.clean;Eo.cleanQueue=Gt.cleanQueue;Eo.updateState=Gt.updateState;var Z0=new Map,bf=new WeakMap,n2=0,IO;function PO(t){return t?(bf.has(t)||(n2+=1,bf.set(t,n2.toString())),bf.get(t)):"0"}function BO(t){return Object.keys(t).sort().filter(e=>t[e]!==void 0).map(e=>`${e}_${e==="root"?PO(t.root):t[e]}`).toString()}function UO(t){const e=BO(t);let n=Z0.get(e);if(!n){const r=new Map;let i;const s=new IntersectionObserver(l=>{l.forEach(c=>{var d;const p=c.isIntersecting&&i.some(m=>c.intersectionRatio>=m);t.trackVisibility&&typeof c.isVisible>"u"&&(c.isVisible=p),(d=r.get(c.target))==null||d.forEach(m=>{m(p,c)})})},t);i=s.thresholds||(Array.isArray(t.threshold)?t.threshold:[t.threshold||0]),n={id:e,observer:s,elements:r},Z0.set(e,n)}return n}function HO(t,e,n={},r=IO){if(typeof window.IntersectionObserver>"u"&&r!==void 0){const d=t.getBoundingClientRect();return e(r,{isIntersecting:r,target:t,intersectionRatio:typeof n.threshold=="number"?n.threshold:0,time:0,boundingClientRect:d,intersectionRect:d,rootBounds:d}),()=>{}}const{id:i,observer:s,elements:l}=UO(n),c=l.get(t)||[];return l.has(t)||l.set(t,c),c.push(e),s.observe(t),function(){c.splice(c.indexOf(e),1),c.length===0&&(l.delete(t),s.unobserve(t)),l.size===0&&(s.disconnect(),Z0.delete(i))}}function qO({threshold:t,delay:e,trackVisibility:n,rootMargin:r,root:i,triggerOnce:s,skip:l,initialInView:c,fallbackInView:d,onChange:p}={}){var m;const[g,v]=A.useState(null),b=A.useRef(p),S=A.useRef(c),[k,E]=A.useState({inView:!!c,entry:void 0});b.current=p,A.useEffect(()=>{if(S.current===void 0&&(S.current=c),l||!g)return;let R;return R=HO(g,(O,D)=>{const I=S.current;S.current=O,!(I===void 0&&!O)&&(E({inView:O,entry:D}),b.current&&b.current(O,D),D.isIntersecting&&s&&R&&(R(),R=void 0))},{root:i,rootMargin:r,threshold:t,trackVisibility:n,delay:e},d),()=>{R&&R()}},[Array.isArray(t)?t.toString():t,g,i,r,s,l,n,d,e]);const w=(m=k.entry)==null?void 0:m.target,T=A.useRef(void 0);!g&&w&&!s&&!l&&T.current!==w&&(T.current=w,E({inView:!!c,entry:void 0}),S.current=c);const _=[v,k.inView,k.entry];return _.ref=_[0],_.inView=_[1],_.entry=_[2],_}const Qv="https://apiroleplay.capyhub.su",Zv=()=>ot.initData||"";async function st(t,e={}){const n={"Content-Type":"application/json","X-Telegram-Init-Data":Zv()},r={...e,headers:{...n,...e.headers}},i=await fetch(`${Qv}${t}`,r);if(!i.ok)throw new Error(`API Error: ${i.status} ${i.statusText}`);return i.json()}async function FO(t,e){const n=await fetch(`${Qv}${t}`,{method:"POST",headers:{"X-Telegram-Init-Data":Zv()},body:e});if(!n.ok){const r=await n.json().catch(()=>({}));throw new Error(r.message||` : ${n.status}`)}return n.json()}var VO={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};const Qe=(t,e,n,r)=>{const i=A.forwardRef(({color:s="currentColor",size:l=24,stroke:c=2,title:d,className:p,children:m,...g},v)=>A.createElement("svg",{ref:v,...VO[t],width:l,height:l,className:["tabler-icon",`tabler-icon-${e}`,p].join(" "),...t==="filled"?{fill:s}:{strokeWidth:c,stroke:s},...g},[d&&A.createElement("title",{key:"svg-title"},d),...r.map(([b,S])=>A.createElement(b,S)),...Array.isArray(m)?m:[m]]));return i.displayName=`${n}`,i};const WO=[["path",{d:"M14 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M4 6l8 0",key:"svg-1"}],["path",{d:"M16 6l4 0",key:"svg-2"}],["path",{d:"M8 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-3"}],["path",{d:"M4 12l2 0",key:"svg-4"}],["path",{d:"M10 12l10 0",key:"svg-5"}],["path",{d:"M17 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-6"}],["path",{d:"M4 18l11 0",key:"svg-7"}],["path",{d:"M19 18l1 0",key:"svg-8"}]],$O=Qe("outline","adjustments-horizontal","AdjustmentsHorizontal",WO);const GO=[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]],ih=Qe("outline","alert-circle","AlertCircle",GO);const KO=[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]],oh=Qe("outline","alert-triangle","AlertTriangle",KO);const YO=[["path",{d:"M12 5l0 14",key:"svg-0"}],["path",{d:"M18 11l-6 -6",key:"svg-1"}],["path",{d:"M6 11l6 -6",key:"svg-2"}]],XO=Qe("outline","arrow-up","ArrowUp",YO);const JO=[["path",{d:"M3 9l4 -4l4 4m-4 -4v14",key:"svg-0"}],["path",{d:"M21 15l-4 4l-4 -4m4 4v-14",key:"svg-1"}]],QO=Qe("outline","arrows-sort","ArrowsSort",JO);const ZO=[["path",{d:"M7 5h6a3.5 3.5 0 0 1 0 7h-6z",key:"svg-0"}],["path",{d:"M13 12h1a3.5 3.5 0 0 1 0 7h-7v-7",key:"svg-1"}]],e5=Qe("outline","bold","Bold",ZO);const t5=[["path",{d:"M13 3l0 7l6 0l-8 11l0 -7l-6 0l8 -11",key:"svg-0"}]],ji=Qe("outline","bolt","Bolt",t5);const n5=[["path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8",key:"svg-0"}],["path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8",key:"svg-1"}],["path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5",key:"svg-2"}],["path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0",key:"svg-3"}],["path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5",key:"svg-4"}],["path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10",key:"svg-5"}]],r5=Qe("outline","brain","Brain",n5);const i5=[["path",{d:"M15 10l-4 4l6 6l4 -16l-18 7l4 2l2 6l3 -4",key:"svg-0"}]],hu=Qe("outline","brand-telegram","BrandTelegram",i5);const o5=[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]],Xr=Qe("outline","check","Check",o5);const s5=[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]],Gu=Qe("outline","chevron-down","ChevronDown",s5);const a5=[["path",{d:"M9 6l6 6l-6 6",key:"svg-0"}]],l5=Qe("outline","chevron-right","ChevronRight",a5);const c5=[["path",{d:"M6 15l6 -6l6 6",key:"svg-0"}]],up=Qe("outline","chevron-up","ChevronUp",c5);const u5=[["path",{d:"M12 6l4 6l5 -4l-2 10h-14l-2 -10l5 4z",key:"svg-0"}]],ev=Qe("outline","crown","Crown",u5);const d5=[["path",{d:"M8 19v-14h6a3 3 0 0 1 0 6h-8",key:"svg-0"}],["path",{d:"M14 15h-8",key:"svg-1"}]],Dw=Qe("outline","currency-rubel","CurrencyRubel",d5);const f5=[["path",{d:"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]],h5=Qe("outline","dots","Dots",f5);const p5=[["path",{d:"M19 20h-10.5l-4.21 -4.3a1 1 0 0 1 0 -1.41l10 -10a1 1 0 0 1 1.41 0l5 5a1 1 0 0 1 0 1.41l-9.2 9.3",key:"svg-0"}],["path",{d:"M18 13.3l-6.3 -6.3",key:"svg-1"}]],r2=Qe("outline","eraser","Eraser",p5);const m5=[["path",{d:"M12 10.941c2.333 -3.308 .167 -7.823 -1 -8.941c0 3.395 -2.235 5.299 -3.667 6.706c-1.43 1.408 -2.333 3.621 -2.333 5.588c0 3.704 3.134 6.706 7 6.706s7 -3.002 7 -6.706c0 -1.712 -1.232 -4.403 -2.333 -5.588c-2.084 3.353 -3.257 3.353 -4.667 2.235",key:"svg-0"}]],g5=Qe("outline","flame","Flame",m5);const v5=[["path",{d:"M11 11m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M19 3l-5 5",key:"svg-1"}],["path",{d:"M15 3h4v4",key:"svg-2"}],["path",{d:"M11 16v6",key:"svg-3"}],["path",{d:"M8 19h6",key:"svg-4"}]],y5=Qe("outline","gender-bigender","GenderBigender",v5);const b5=[["path",{d:"M5 12l-2 0l9 -9l9 9l-2 0",key:"svg-0"}],["path",{d:"M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7",key:"svg-1"}],["path",{d:"M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6",key:"svg-2"}]],ey=Qe("outline","home","Home",b5);const x5=[["path",{d:"M9.828 9.172a4 4 0 1 0 0 5.656a10 10 0 0 0 2.172 -2.828a10 10 0 0 1 2.172 -2.828a4 4 0 1 1 0 5.656a10 10 0 0 1 -2.172 -2.828a10 10 0 0 0 -2.172 -2.828",key:"svg-0"}]],S5=Qe("outline","infinity","Infinity",x5);const E5=[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]],dp=Qe("outline","info-circle","InfoCircle",E5);const k5=[["path",{d:"M11 5l6 0",key:"svg-0"}],["path",{d:"M7 19l6 0",key:"svg-1"}],["path",{d:"M14 5l-4 14",key:"svg-2"}]],w5=Qe("outline","italic","Italic",k5);const C5=[["path",{d:"M3 20l1.3 -3.9c-2.324 -3.437 -1.426 -7.872 2.1 -10.374c3.526 -2.501 8.59 -2.296 11.845 .48c3.255 2.777 3.695 7.266 1.029 10.501c-2.666 3.235 -7.615 4.215 -11.574 2.293l-4.7 1",key:"svg-0"}]],Cs=Qe("outline","message-circle","MessageCircle",C5);const T5=[["path",{d:"M8 9h8",key:"svg-0"}],["path",{d:"M8 13h6",key:"svg-1"}],["path",{d:"M18 4a3 3 0 0 1 3 3v8a3 3 0 0 1 -3 3h-5l-5 3v-3h-2a3 3 0 0 1 -3 -3v-8a3 3 0 0 1 3 -3h12z",key:"svg-2"}]],zw=Qe("outline","message","Message",T5);const _5=[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M9 10l.01 0",key:"svg-1"}],["path",{d:"M15 10l.01 0",key:"svg-2"}],["path",{d:"M9 15l6 0",key:"svg-3"}]],A5=Qe("outline","mood-empty","MoodEmpty",_5);const M5=[["path",{d:"M15 8h.01",key:"svg-0"}],["path",{d:"M3 6a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v12a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3v-12z",key:"svg-1"}],["path",{d:"M3 16l5 -5c.928 -.893 2.072 -.893 3 0l5 5",key:"svg-2"}],["path",{d:"M14 14l1 -1c.928 -.893 2.072 -.893 3 0l3 3",key:"svg-3"}]],Lw=Qe("outline","photo","Photo",M5);const j5=[["path",{d:"M12 5l0 14",key:"svg-0"}],["path",{d:"M5 12l14 0",key:"svg-1"}]],Iw=Qe("outline","plus","Plus",j5);const O5=[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]],sh=Qe("outline","refresh","Refresh",O5);const R5=[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]],N5=Qe("outline","search","Search",R5);const D5=[["path",{d:"M6 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0",key:"svg-0"}],["path",{d:"M18 6m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0",key:"svg-1"}],["path",{d:"M18 18m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0",key:"svg-2"}],["path",{d:"M8.7 10.7l6.6 -3.4",key:"svg-3"}],["path",{d:"M8.7 13.3l6.6 3.4",key:"svg-4"}]],z5=Qe("outline","share","Share",D5);const L5=[["path",{d:"M16 18a2 2 0 0 1 2 2a2 2 0 0 1 2 -2a2 2 0 0 1 -2 -2a2 2 0 0 1 -2 2zm0 -12a2 2 0 0 1 2 2a2 2 0 0 1 2 -2a2 2 0 0 1 -2 -2a2 2 0 0 1 -2 2zm-7 12a6 6 0 0 1 6 -6a6 6 0 0 1 -6 -6a6 6 0 0 1 -6 6a6 6 0 0 1 6 6z",key:"svg-0"}]],I5=Qe("outline","sparkles","Sparkles",L5);const P5=[["path",{d:"M12 17.75l-6.172 3.245l1.179 -6.873l-5 -4.867l6.9 -1l3.086 -6.253l3.086 6.253l6.9 1l-5 4.867l1.179 6.873z",key:"svg-0"}]],tv=Qe("outline","star","Star",P5);const B5=[["path",{d:"M3 8v4.172a2 2 0 0 0 .586 1.414l5.71 5.71a2.41 2.41 0 0 0 3.408 0l3.592 -3.592a2.41 2.41 0 0 0 0 -3.408l-5.71 -5.71a2 2 0 0 0 -1.414 -.586h-4.172a2 2 0 0 0 -2 2z",key:"svg-0"}],["path",{d:"M18 19l1.592 -1.592a4.82 4.82 0 0 0 0 -6.816l-4.592 -4.592",key:"svg-1"}],["path",{d:"M7 10h-.01",key:"svg-2"}]],U5=Qe("outline","tags","Tags",B5);const H5=[["path",{d:"M7 13v-8a1 1 0 0 0 -1 -1h-2a1 1 0 0 0 -1 1v7a1 1 0 0 0 1 1h3a4 4 0 0 1 4 4v1a2 2 0 0 0 4 0v-5h3a2 2 0 0 0 2 -2l-1 -5a2 3 0 0 0 -2 -2h-7a3 3 0 0 0 -3 3",key:"svg-0"}]],nv=Qe("outline","thumb-down","ThumbDown",H5);const q5=[["path",{d:"M7 11v8a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1v-7a1 1 0 0 1 1 -1h3a4 4 0 0 0 4 -4v-1a2 2 0 0 1 4 0v5h3a2 2 0 0 1 2 2l-1 5a2 3 0 0 1 -2 2h-7a3 3 0 0 1 -3 -3",key:"svg-0"}]],rv=Qe("outline","thumb-up","ThumbUp",q5);const F5=[["path",{d:"M4 7l16 0",key:"svg-0"}],["path",{d:"M10 11l0 6",key:"svg-1"}],["path",{d:"M14 11l0 6",key:"svg-2"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-3"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-4"}]],ah=Qe("outline","trash","Trash",F5);const V5=[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2",key:"svg-1"}]],Pw=Qe("outline","user","User",V5);const W5=[["path",{d:"M9 7m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2",key:"svg-1"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"svg-2"}],["path",{d:"M21 21v-2a4 4 0 0 0 -3 -3.85",key:"svg-3"}]],$5=Qe("outline","users","Users",W5);const G5=[["path",{d:"M6 21l15 -15l-3 -3l-15 15l3 3",key:"svg-0"}],["path",{d:"M15 6l3 3",key:"svg-1"}],["path",{d:"M9 3a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2",key:"svg-2"}],["path",{d:"M19 13a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2",key:"svg-3"}]],i2=Qe("outline","wand","Wand",G5);const K5=[["path",{d:"M12 18l.01 0",key:"svg-0"}],["path",{d:"M9.172 15.172a4 4 0 0 1 5.656 0",key:"svg-1"}],["path",{d:"M6.343 12.343a8 8 0 0 1 11.314 0",key:"svg-2"}],["path",{d:"M3.515 9.515c4.686 -4.687 12.284 -4.687 17 0",key:"svg-3"}]],Y5=Qe("outline","wifi","Wifi",K5);const X5=[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]],ty=Qe("outline","x","X",X5);const J5=[["path",{d:"M8.243 7.34l-6.38 .925l-.113 .023a1 1 0 0 0 -.44 1.684l4.622 4.499l-1.09 6.355l-.013 .11a1 1 0 0 0 1.464 .944l5.706 -3l5.693 3l.1 .046a1 1 0 0 0 1.352 -1.1l-1.091 -6.355l4.624 -4.5l.078 -.085a1 1 0 0 0 -.633 -1.62l-6.38 -.926l-2.852 -5.78a1 1 0 0 0 -1.794 0l-2.853 5.78z",key:"svg-0"}]],lh=Qe("filled","star-filled","StarFilled",J5);const Q5=[["path",{d:"M13 3a3 3 0 0 1 2.995 2.824l.005 .176v4h2a3 3 0 0 1 2.98 2.65l.015 .174l.005 .176l-.02 .196l-1.006 5.032c-.381 1.626 -1.502 2.796 -2.81 2.78l-.164 -.008h-8a1 1 0 0 1 -.993 -.883l-.007 -.117l.001 -9.536a1 1 0 0 1 .5 -.865a2.998 2.998 0 0 0 1.492 -2.397l.007 -.202v-1a3 3 0 0 1 3 -3z",key:"svg-0"}],["path",{d:"M5 10a1 1 0 0 1 .993 .883l.007 .117v9a1 1 0 0 1 -.883 .993l-.117 .007h-1a2 2 0 0 1 -1.995 -1.85l-.005 -.15v-7a2 2 0 0 1 1.85 -1.995l.15 -.005h1z",key:"svg-1"}]],Z5=Qe("filled","thumb-up-filled","ThumbUpFilled",Q5),Hg=t=>t?t>=1e3?(t/1e3).toFixed(1)+"k":t.toString():"0",e3={backgroundColor:"rgba(18, 18, 22, 0.5)",border:"1px solid rgba(39, 39, 42, 0.4)",cursor:"pointer",transition:"transform 0.25s cubic-bezier(0.165, 0.84, 0.44, 1), box-shadow 0.25s ease, background-color 0.25s ease",height:"100%",display:"flex",flexDirection:"column",overflow:"hidden",backdropFilter:"blur(8px)",fontFamily:'"Roboto", sans-serif'},t3={position:"absolute",bottom:0,left:0,right:0,height:"20%",background:"linear-gradient(to top, rgba(9, 9, 11, 0.9), transparent)",pointerEvents:"none"},n3={position:"absolute",inset:0,zIndex:1,background:"linear-gradient(90deg, #27272a 0%, #3f3f46 50%, #27272a 100%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"},r3={root:{textTransform:"none",backgroundColor:"rgba(255, 167, 38, 0.25)",color:"#ffcc80",fontWeight:500,padding:"0 12px",height:"26px",fontSize:"14px",fontFamily:"Roboto, sans-serif"}};if(typeof document<"u"&&!document.getElementById("shimmer-styles")){const t=document.createElement("style");t.id="shimmer-styles",t.textContent="@keyframes shimmer { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }",document.head.appendChild(t)}if(typeof document<"u"&&!document.getElementById("roboto-font")){const t=document.createElement("link");t.id="roboto-font",t.rel="stylesheet",t.href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;600;700&display=swap",document.head.appendChild(t)}const i3=A.memo(function({character:e,onOpen:n}){const[r,i]=A.useState(e.image),[s,l]=A.useState(!0),c=A.useRef(!1),d=A.useRef(!1),[p,m]=A.useState(e.likes??0),[g,v]=A.useState(e.favorites_count??0),[b,S]=A.useState(e.chats_count??0),{ref:k,inView:E}=qO({triggerOnce:!0,threshold:.1,rootMargin:"200px"});A.useEffect(()=>{if(!(!E||c.current)&&e.file_id&&(!r||!r.startsWith("http"))){c.current=!0;let O=!0;return l(!0),st(`/v1/characters/photo?file_id=${e.file_id}`).then(D=>{if(O&&D.path){const I=D.path.startsWith("http")?D.path:`https://apiroleplay.capyhub.su/${D.path}`;i(I),e.image=I}}).catch(D=>console.error(`Failed to load photo for ${e.name}`,D)),()=>{O=!1}}},[E,e.file_id,e.name,e.image,r]),A.useEffect(()=>{if(!E||d.current)return;d.current=!0;let O=!0;const D=e.id,I=Math.random()*500,H=setTimeout(()=>{st(`/v1/characters/stats?public_id=${D}`).then(V=>{O&&(v(V.favorites_count),S(V.selected_count))}).catch(()=>{}),st(`/v1/characters/reactions/count/${D}`).then(V=>{O&&m(V.likes_count)}).catch(()=>{})},I);return()=>{O=!1,clearTimeout(H)}},[E,e.id]),A.useEffect(()=>{m(O=>e.likes??O),v(O=>e.favorites_count??O),S(O=>e.chats_count??O)},[e.likes,e.favorites_count,e.chats_count]);const w=A.useCallback(()=>l(!1),[]),T=A.useCallback(O=>{Object.assign(O.currentTarget.style,{transform:"translateY(-4px)",boxShadow:"0 10px 30px -10px rgba(0, 0, 0, 0.5)",borderColor:"rgba(63, 63, 70, 0.6)",backgroundColor:"rgba(24, 24, 28, 0.7)"})},[]),_=A.useCallback(O=>{Object.assign(O.currentTarget.style,{transform:"translateY(0)",boxShadow:"none",borderColor:"rgba(39, 39, 42, 0.4)",backgroundColor:"rgba(18, 18, 22, 0.5)"})},[]),R=A.useCallback(()=>{n()},[n]);return h.jsxs($n,{ref:k,onClick:R,padding:"0",radius:"lg",style:e3,onMouseEnter:T,onMouseLeave:_,children:[h.jsxs(ne,{style:{position:"relative",backgroundColor:"#18181b"},children:[s&&h.jsx(ne,{style:n3}),h.jsx(yw,{ratio:1/1,children:h.jsx(_r,{src:r,alt:e.name,loading:"lazy",onLoad:w,style:{objectFit:"contain",width:"100%",height:"100%",opacity:s?0:1,transition:"opacity 0.2s ease"}})}),h.jsx(ne,{style:t3})]}),h.jsxs(ne,{p:"sm",style:{display:"flex",flexDirection:"column",flex:1},children:[h.jsx(z,{fw:700,size:"lg",c:"#ffffff",lineClamp:1,mb:4,title:e.name,style:{fontFamily:"Roboto, sans-serif"},children:e.name}),h.jsx(z,{size:"md",c:"#e4e4e7",lineClamp:2,mb:"xs",style:{lineHeight:1.4,flex:1,fontFamily:"Roboto, sans-serif"},children:e.description||" "}),h.jsxs(ne,{mt:"auto",children:[h.jsxs(pe,{gap:"sm",mb:8,style:{color:"#d4d4d8",fontFamily:"Roboto, sans-serif"},children:[h.jsxs(pe,{gap:5,align:"center",title:"",children:[h.jsx(Cs,{size:18,stroke:1.5,style:{color:"#42a5f5"}}),h.jsx(z,{size:"md",fw:600,children:Hg(b)})]}),h.jsxs(pe,{gap:5,align:"center",title:"",children:[h.jsx(Z5,{size:16,style:{color:"#66bb6a"}}),h.jsx(z,{size:"md",fw:600,children:Hg(p)})]}),h.jsxs(pe,{gap:5,align:"center",title:" ",children:[h.jsx(lh,{size:16,style:{color:"#fdd835"}}),h.jsx(z,{size:"md",fw:600,children:Hg(g)})]})]}),h.jsx(pe,{gap:6,style:{flexWrap:"wrap"},children:e.tags?.map((O,D)=>h.jsx(Ut,{variant:"filled",radius:"sm",size:"sm",styles:r3,children:O},D))})]})]})]})});async function Bw(){return st("/v1/user-profiles/")}async function Uw(t){return st("/v1/user-profiles/",{method:"POST",body:JSON.stringify(t)})}async function o3(){return st("/v1/user-profiles/exists")}async function Hw(t){return st(`/v1/user-profiles/${t}/select`,{method:"POST"})}async function s3(t){await st(`/v1/user-profiles/${t}`,{method:"DELETE"})}var hs;(function(t){t.SET="$set",t.SET_ONCE="$setOnce",t.ADD="$add",t.APPEND="$append",t.PREPEND="$prepend",t.REMOVE="$remove",t.PREINSERT="$preInsert",t.POSTINSERT="$postInsert",t.UNSET="$unset",t.CLEAR_ALL="$clearAll"})(hs||(hs={}));var di;(function(t){t.IDENTIFY="$identify",t.GROUP_IDENTIFY="$groupidentify",t.REVENUE="revenue_amount"})(di||(di={}));var o2="-",fp="AMP",a3="".concat(fp,"_unsent"),qw="$default_instance",Fw="https://api2.amplitude.com/2/httpapi",l3="https://api.eu.amplitude.com/2/httpapi",c3="https://api2.amplitude.com/batch",u3="https://api.eu.amplitude.com/batch",d3="utm_campaign",f3="utm_content",h3="utm_id",p3="utm_medium",m3="utm_source",g3="utm_term",s2="dclid",a2="fbclid",l2="gbraid",c2="gclid",u2="ko_click_id",d2="li_fat_id",f2="msclkid",h2="rdt_cid",p2="ttclid",m2="twclid",g2="wbraid",hp={utm_campaign:void 0,utm_content:void 0,utm_id:void 0,utm_medium:void 0,utm_source:void 0,utm_term:void 0,referrer:void 0,referring_domain:void 0,dclid:void 0,gbraid:void 0,gclid:void 0,fbclid:void 0,ko_click_id:void 0,li_fat_id:void 0,msclkid:void 0,rdt_cid:void 0,ttclid:void 0,twclid:void 0,wbraid:void 0},ch=["access-control-allow-origin","access-control-allow-credentials","access-control-expose-headers","access-control-max-age","access-control-allow-methods","access-control-allow-headers","accept-patch","accept-ranges","age","allow","alt-svc","cache-control","connection","content-disposition","content-encoding","content-language","content-length","content-location","content-md5","content-range","content-type","date","delta-base","etag","expires","im","last-modified","link","location","permanent","p3p","pragma","proxy-authenticate","public-key-pins","retry-after","server","status","strict-transport-security","trailer","transfer-encoding","tk","upgrade","vary","via","warning","www-authenticate","x-b3-traceid","x-frame-options"],v3=["authorization","cookie","set-cookie"],y3=1e3,iv=function(t){if(Object.keys(t).length>y3)return!1;for(var e in t){var n=t[e];if(!Vw(e,n))return!1}return!0},Vw=function(t,e){var n,r;if(typeof t!="string")return!1;if(Array.isArray(e)){var i=!0;try{for(var s=ct(e),l=s.next();!l.done;l=s.next()){var c=l.value;if(Array.isArray(c))return!1;if(typeof c=="object")i=i&&iv(c);else if(!["number","string"].includes(typeof c))return!1;if(!i)return!1}}catch(d){n={error:d}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}else{if(e==null)return!1;if(typeof e=="object")return iv(e);if(!["number","string","boolean"].includes(typeof e))return!1}return!0},uh=(function(){function t(){this._propertySet=new Set,this._properties={}}return t.prototype.getUserProperties=function(){return de({},this._properties)},t.prototype.set=function(e,n){return this._safeSet(Bt.SET,e,n),this},t.prototype.setOnce=function(e,n){return this._safeSet(Bt.SET_ONCE,e,n),this},t.prototype.append=function(e,n){return this._safeSet(Bt.APPEND,e,n),this},t.prototype.prepend=function(e,n){return this._safeSet(Bt.PREPEND,e,n),this},t.prototype.postInsert=function(e,n){return this._safeSet(Bt.POSTINSERT,e,n),this},t.prototype.preInsert=function(e,n){return this._safeSet(Bt.PREINSERT,e,n),this},t.prototype.remove=function(e,n){return this._safeSet(Bt.REMOVE,e,n),this},t.prototype.add=function(e,n){return this._safeSet(Bt.ADD,e,n),this},t.prototype.unset=function(e){return this._safeSet(Bt.UNSET,e,o2),this},t.prototype.clearAll=function(){return this._properties={},this._properties[Bt.CLEAR_ALL]=o2,this},t.prototype._safeSet=function(e,n,r){if(this._validate(e,n,r)){var i=this._properties[e];return i===void 0&&(i={},this._properties[e]=i),i[n]=r,this._propertySet.add(n),!0}return!1},t.prototype._validate=function(e,n,r){return this._properties[Bt.CLEAR_ALL]!==void 0||this._propertySet.has(n)?!1:e===Bt.ADD?typeof r=="number":e!==Bt.UNSET&&e!==Bt.REMOVE?Vw(n,r):!0},t})(),Bt;(function(t){t.SET="$set",t.SET_ONCE="$setOnce",t.ADD="$add",t.APPEND="$append",t.PREPEND="$prepend",t.REMOVE="$remove",t.PREINSERT="$preInsert",t.POSTINSERT="$postInsert",t.UNSET="$unset",t.CLEAR_ALL="$clearAll"})(Bt||(Bt={}));var b3=[Bt.CLEAR_ALL,Bt.UNSET,Bt.SET,Bt.SET_ONCE,Bt.ADD,Bt.APPEND,Bt.PREPEND,Bt.PREINSERT,Bt.POSTINSERT,Bt.REMOVE],x3="Event tracked successfully",S3="Unexpected error occurred",E3="Event rejected due to exceeded retry count",k3="Event skipped due to optOut config",w3="Event rejected due to missing API key",C3="Invalid API key",T3="Client not initialized",xn;(function(t){t.Unknown="unknown",t.Skipped="skipped",t.Success="success",t.RateLimit="rate_limit",t.PayloadTooLarge="payload_too_large",t.Invalid="invalid",t.Failed="failed",t.Timeout="Timeout",t.SystemError="SystemError"})(xn||(xn={}));var Dl=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=xn.Unknown),{event:t,code:e,message:n}},Pt=function(){var t="ampIntegrationContext";if(typeof globalThis<"u"&&typeof globalThis[t]<"u")return globalThis[t];if(typeof globalThis<"u")return globalThis;if(typeof window<"u")return window;if(typeof self<"u")return self;if(typeof global<"u")return global},_3=function(t){return t?(t^Math.random()*16>>t/4).toString(16):(String(1e7)+String(-1e3)+String(-4e3)+String(-8e3)+String(-1e11)).replace(/[018]/g,Ii)},v2=_t([],qe(Array(256).keys()),!1).map(function(t){return t.toString(16).padStart(2,"0")}),Ii=function(t){var e,n=Pt();if(!(!((e=n?.crypto)===null||e===void 0)&&e.getRandomValues))return _3(t);var r=n.crypto.getRandomValues(new Uint8Array(16));return r[6]=r[6]&15|64,r[8]=r[8]&63|128,_t([],qe(r.entries()),!1).map(function(i){var s=qe(i,2),l=s[0],c=s[1];return[4,6,8,10].includes(l)?"-".concat(v2[c]):v2[c]}).join("")},A3=(function(){function t(e){this.client=e,this.queue=[],this.applying=!1,this.plugins=[]}return t.prototype.register=function(e,n){var r,i;return le(this,void 0,void 0,function(){return se(this,function(s){switch(s.label){case 0:return this.plugins.some(function(l){return l.name===e.name})?(this.loggerProvider.warn("Plugin with name ".concat(e.name," already exists, skipping registration")),[2]):(e.name===void 0&&(e.name=Ii(),this.loggerProvider.warn(`Plugin name is undefined. 
      Generating a random UUID for plugin name: `.concat(e.name,`. 
      Set a name for the plugin to prevent it from being added multiple times.`))),e.type=(r=e.type)!==null&&r!==void 0?r:"enrichment",[4,(i=e.setup)===null||i===void 0?void 0:i.call(e,n,this.client)]);case 1:return s.sent(),this.plugins.push(e),[2]}})})},t.prototype.deregister=function(e,n){var r;return le(this,void 0,void 0,function(){var i,s;return se(this,function(l){switch(l.label){case 0:return i=this.plugins.findIndex(function(c){return c.name===e}),i===-1?(n.loggerProvider.warn("Plugin with name ".concat(e," does not exist, skipping deregistration")),[2]):(s=this.plugins[i],this.plugins.splice(i,1),[4,(r=s.teardown)===null||r===void 0?void 0:r.call(s)]);case 1:return l.sent(),[2]}})})},t.prototype.reset=function(e){this.applying=!1;var n=this.plugins;n.map(function(r){var i;return(i=r.teardown)===null||i===void 0?void 0:i.call(r)}),this.plugins=[],this.client=e},t.prototype.push=function(e){var n=this;return new Promise(function(r){n.queue.push([e,r]),n.scheduleApply(0)})},t.prototype.scheduleApply=function(e){var n=this;this.applying||(this.applying=!0,setTimeout(function(){n.apply(n.queue.shift()).then(function(){n.applying=!1,n.queue.length>0&&n.scheduleApply(0)})},e))},t.prototype.apply=function(e){return le(this,void 0,void 0,function(){var n,r,i,s,l,c,d,b,S,p,m,g,v,b,S,k,E,w,T,_,R,O;return se(this,function(D){switch(D.label){case 0:if(!e)return[2];n=qe(e,1),r=n[0],i=qe(e,2),s=i[1],this.loggerProvider.log("Timeline.apply: Initial event",r),l=this.plugins.filter(function(I){return I.type==="before"}),D.label=1;case 1:D.trys.push([1,6,7,8]),c=ct(l),d=c.next(),D.label=2;case 2:return d.done?[3,5]:(b=d.value,b.execute?[4,b.execute(de({},r))]:[3,4]);case 3:if(S=D.sent(),S===null)return this.loggerProvider.log("Timeline.apply: Event filtered out by before plugin '".concat(String(b.name),"', event: ").concat(JSON.stringify(r))),s({event:r,code:0,message:""}),[2];r=S,this.loggerProvider.log("Timeline.apply: Event after before plugin '".concat(String(b.name),"', event: ").concat(JSON.stringify(r))),D.label=4;case 4:return d=c.next(),[3,2];case 5:return[3,8];case 6:return p=D.sent(),T={error:p},[3,8];case 7:try{d&&!d.done&&(_=c.return)&&_.call(c)}finally{if(T)throw T.error}return[7];case 8:m=this.plugins.filter(function(I){return I.type==="enrichment"||I.type===void 0}),D.label=9;case 9:D.trys.push([9,14,15,16]),g=ct(m),v=g.next(),D.label=10;case 10:return v.done?[3,13]:(b=v.value,b.execute?[4,b.execute(de({},r))]:[3,12]);case 11:if(S=D.sent(),S===null)return this.loggerProvider.log("Timeline.apply: Event filtered out by enrichment plugin '".concat(String(b.name),"', event: ").concat(JSON.stringify(r))),s({event:r,code:0,message:""}),[2];r=S,this.loggerProvider.log("Timeline.apply: Event after enrichment plugin '".concat(String(b.name),"', event: ").concat(JSON.stringify(r))),D.label=12;case 12:return v=g.next(),[3,10];case 13:return[3,16];case 14:return k=D.sent(),R={error:k},[3,16];case 15:try{v&&!v.done&&(O=g.return)&&O.call(g)}finally{if(R)throw R.error}return[7];case 16:return E=this.plugins.filter(function(I){return I.type==="destination"}),this.loggerProvider.log("Timeline.apply: Final event before destinations, event: ".concat(JSON.stringify(r))),w=E.map(function(I){var H=de({},r);return I.execute(H).catch(function(V){return Dl(H,0,String(V))})}),Promise.all(w).then(function(I){var H=qe(I,1),V=H[0],K=V||Dl(r,100,"Event not tracked, no destination plugins on the instance");s(K)}),[2]}})})},t.prototype.flush=function(){return le(this,void 0,void 0,function(){var e,n,r,i=this;return se(this,function(s){switch(s.label){case 0:return e=this.queue,this.queue=[],[4,Promise.all(e.map(function(l){return i.apply(l)}))];case 1:return s.sent(),n=this.plugins.filter(function(l){return l.type==="destination"}),r=n.map(function(l){return l.flush&&l.flush()}),[4,Promise.all(r)];case 2:return s.sent(),[2]}})})},t.prototype.onIdentityChanged=function(e){this.plugins.forEach(function(n){var r;(r=n.onIdentityChanged)===null||r===void 0||r.call(n,e)})},t.prototype.onSessionIdChanged=function(e){this.plugins.forEach(function(n){var r;(r=n.onSessionIdChanged)===null||r===void 0||r.call(n,e)})},t.prototype.onOptOutChanged=function(e){this.plugins.forEach(function(n){var r;(r=n.onOptOutChanged)===null||r===void 0||r.call(n,e)})},t.prototype.onReset=function(){this.plugins.forEach(function(e){var n;(n=e.onReset)===null||n===void 0||n.call(e)})},t})(),M3=function(t,e,n){var r=typeof t=="string"?{event_type:t}:t;return de(de(de({},r),n),e&&{event_properties:e})},ny=function(t,e){var n=de(de({},e),{event_type:di.IDENTIFY,user_properties:t.getUserProperties()});return n},j3=function(t,e,n,r){var i,s=de(de({},r),{event_type:di.GROUP_IDENTIFY,group_properties:n.getUserProperties(),groups:(i={},i[t]=e,i)});return s},O3=function(t,e,n){var r,i=new uh;i.set(t,e);var s=de(de({},n),{event_type:di.IDENTIFY,user_properties:i.getUserProperties(),groups:(r={},r[t]=e,r)});return s},R3=function(t,e){return de(de({},e),{event_type:di.REVENUE,event_properties:t.getEventProperties()})},hr=function(t){return{promise:t||Promise.resolve()}},N3=(function(){function t(e){e===void 0&&(e="$default"),this.initializing=!1,this.isReady=!1,this.q=[],this.dispatchQ=[],this.logEvent=this.track.bind(this),this.timeline=new A3(this),this.name=e}return t.prototype._init=function(e){return le(this,void 0,void 0,function(){return se(this,function(n){switch(n.label){case 0:return this.config=e,this.timeline.reset(this),this.timeline.loggerProvider=this.config.loggerProvider,[4,this.runQueuedFunctions("q")];case 1:return n.sent(),this.isReady=!0,[2]}})})},t.prototype.runQueuedFunctions=function(e){return le(this,void 0,void 0,function(){var n,r,i,s,l,c,d,p;return se(this,function(m){switch(m.label){case 0:n=this[e],this[e]=[],m.label=1;case 1:m.trys.push([1,8,9,10]),r=ct(n),i=r.next(),m.label=2;case 2:return i.done?[3,7]:(s=i.value,l=s(),l&&"promise"in l?[4,l.promise]:[3,4]);case 3:return m.sent(),[3,6];case 4:return[4,l];case 5:m.sent(),m.label=6;case 6:return i=r.next(),[3,2];case 7:return[3,10];case 8:return c=m.sent(),d={error:c},[3,10];case 9:try{i&&!i.done&&(p=r.return)&&p.call(r)}finally{if(d)throw d.error}return[7];case 10:return this[e].length?[4,this.runQueuedFunctions(e)]:[3,12];case 11:m.sent(),m.label=12;case 12:return[2]}})})},t.prototype.track=function(e,n,r){var i=M3(e,n,r);return hr(this.dispatch(i))},t.prototype.identify=function(e,n){var r=ny(e,n);return hr(this.dispatch(r))},t.prototype.groupIdentify=function(e,n,r,i){var s=j3(e,n,r,i);return hr(this.dispatch(s))},t.prototype.setGroup=function(e,n,r){var i=O3(e,n,r);return hr(this.dispatch(i))},t.prototype.revenue=function(e,n){var r=R3(e,n);return hr(this.dispatch(r))},t.prototype.add=function(e){return this.isReady?this._addPlugin(e):(this.q.push(this._addPlugin.bind(this,e)),hr())},t.prototype._addPlugin=function(e){return hr(this.timeline.register(e,this.config))},t.prototype.remove=function(e){return this.isReady?this._removePlugin(e):(this.q.push(this._removePlugin.bind(this,e)),hr())},t.prototype._removePlugin=function(e){return hr(this.timeline.deregister(e,this.config))},t.prototype.dispatchWithCallback=function(e,n){if(!this.isReady)return n(Dl(e,0,T3));this.process(e).then(n)},t.prototype.dispatch=function(e){return le(this,void 0,void 0,function(){var n=this;return se(this,function(r){return this.isReady?[2,this.process(e)]:[2,new Promise(function(i){n.dispatchQ.push(n.dispatchWithCallback.bind(n,e,i))})]})})},t.prototype.getOperationAppliedUserProperties=function(e){var n={};if(e===void 0)return n;var r={};return Object.keys(e).forEach(function(i){Object.values(hs).includes(i)||(r[i]=e[i])}),b3.forEach(function(i){if(Object.keys(e).includes(i)){var s=e[i];switch(i){case hs.CLEAR_ALL:Object.keys(n).forEach(function(l){delete n[l]});break;case hs.UNSET:Object.keys(s).forEach(function(l){delete n[l]});break;case hs.SET:Object.assign(n,s);break}}}),Object.assign(n,r),n},t.prototype.process=function(e){return le(this,void 0,void 0,function(){var n,s,r,i,s;return se(this,function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),this.config.optOut?[2,Dl(e,0,k3)]:(e.event_type===di.IDENTIFY&&(n=this.getOperationAppliedUserProperties(e.user_properties),this.timeline.onIdentityChanged({userProperties:n})),[4,this.timeline.push(e)]);case 1:return s=l.sent(),s.code===200?this.config.loggerProvider.log(s.message):s.code===100?this.config.loggerProvider.warn(s.message):this.config.loggerProvider.error(s.message),[2,s];case 2:return r=l.sent(),i=String(r),this.config.loggerProvider.error(i),s=Dl(e,0,i),[2,s];case 3:return[2]}})})},t.prototype.setOptOut=function(e){if(!this.isReady){this.q.push(this._setOptOut.bind(this,!!e));return}this._setOptOut(e)},t.prototype._setOptOut=function(e){this.config.optOut!==e&&(this.timeline.onOptOutChanged(e),this.config.optOut=!!e)},t.prototype.flush=function(){return hr(this.timeline.flush())},t.prototype.plugin=function(e){var n=this.timeline.plugins.find(function(r){return r.name===e});if(n===void 0){this.config.loggerProvider.debug("Cannot find plugin with name ".concat(e));return}return n},t.prototype.plugins=function(e){return this.timeline.plugins.filter(function(n){return n instanceof e})},t})(),D3=(function(){function t(){this.productId="",this.quantity=1,this.price=0}return t.prototype.setProductId=function(e){return this.productId=e,this},t.prototype.setQuantity=function(e){return e>0&&(this.quantity=e),this},t.prototype.setPrice=function(e){return this.price=e,this},t.prototype.setRevenueType=function(e){return this.revenueType=e,this},t.prototype.setCurrency=function(e){return this.currency=e,this},t.prototype.setRevenue=function(e){return this.revenue=e,this},t.prototype.setReceipt=function(e){return this.receipt=e,this},t.prototype.setReceiptSig=function(e){return this.receiptSig=e,this},t.prototype.setEventProperties=function(e){return iv(e)&&(this.properties=e),this},t.prototype.getEventProperties=function(){var e=this.properties?de({},this.properties):{};return e[wi.REVENUE_PRODUCT_ID]=this.productId,e[wi.REVENUE_QUANTITY]=this.quantity,e[wi.REVENUE_PRICE]=this.price,e[wi.REVENUE_TYPE]=this.revenueType,e[wi.REVENUE_CURRENCY]=this.currency,e[wi.REVENUE]=this.revenue,e[wi.RECEIPT]=this.receipt,e[wi.RECEIPT_SIG]=this.receiptSig,e},t})(),wi;(function(t){t.REVENUE_PRODUCT_ID="$productId",t.REVENUE_QUANTITY="$quantity",t.REVENUE_PRICE="$price",t.REVENUE_TYPE="$revenueType",t.REVENUE_CURRENCY="$currency",t.REVENUE="$revenue",t.RECEIPT="$receipt",t.RECEIPT_SIG="$receiptSig"})(wi||(wi={}));var z3=function(t,e){var n=Math.max(e,1);return t.reduce(function(r,i,s){var l=Math.floor(s/n);return r[l]||(r[l]=[]),r[l].push(i),r},[])},Cr;(function(t){t[t.None=0]="None",t[t.Error=1]="Error",t[t.Warn=2]="Warn",t[t.Verbose=3]="Verbose",t[t.Debug=4]="Debug"})(Cr||(Cr={}));var xf="Amplitude Logger ",ry=(function(){function t(){this.logLevel=Cr.None}return t.prototype.disable=function(){this.logLevel=Cr.None},t.prototype.enable=function(e){e===void 0&&(e=Cr.Warn),this.logLevel=e},t.prototype.log=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.logLevel<Cr.Verbose||console.log("".concat(xf,"[Log]: ").concat(e.join(" ")))},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.logLevel<Cr.Warn||console.warn("".concat(xf,"[Warn]: ").concat(e.join(" ")))},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.logLevel<Cr.Error||console.error("".concat(xf,"[Error]: ").concat(e.join(" ")))},t.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.logLevel<Cr.Debug||console.log("".concat(xf,"[Debug]: ").concat(e.join(" ")))},t})(),Vf=function(){return{flushMaxRetries:12,flushQueueSize:200,flushIntervalMillis:1e4,instanceName:qw,logLevel:Cr.Warn,loggerProvider:new ry,offline:!1,optOut:!1,serverUrl:Fw,serverZone:"US",useBatch:!1}},L3=(function(){function t(e){var n,r,i,s;this._optOut=!1;var l=Vf();this.apiKey=e.apiKey,this.flushIntervalMillis=(n=e.flushIntervalMillis)!==null&&n!==void 0?n:l.flushIntervalMillis,this.flushMaxRetries=e.flushMaxRetries||l.flushMaxRetries,this.flushQueueSize=e.flushQueueSize||l.flushQueueSize,this.instanceName=e.instanceName||l.instanceName,this.loggerProvider=e.loggerProvider||l.loggerProvider,this.logLevel=(r=e.logLevel)!==null&&r!==void 0?r:l.logLevel,this.minIdLength=e.minIdLength,this.plan=e.plan,this.ingestionMetadata=e.ingestionMetadata,this.offline=e.offline!==void 0?e.offline:l.offline,this.optOut=(i=e.optOut)!==null&&i!==void 0?i:l.optOut,this.serverUrl=e.serverUrl,this.serverZone=e.serverZone||l.serverZone,this.storageProvider=e.storageProvider,this.transportProvider=e.transportProvider,this.useBatch=(s=e.useBatch)!==null&&s!==void 0?s:l.useBatch,this.loggerProvider.enable(this.logLevel);var c=Ww(e.serverUrl,e.serverZone,e.useBatch);this.serverZone=c.serverZone,this.serverUrl=c.serverUrl}return Object.defineProperty(t.prototype,"optOut",{get:function(){return this._optOut},set:function(e){this._optOut=e},enumerable:!1,configurable:!0}),t})(),I3=function(t,e){return t==="EU"?e?u3:l3:e?c3:Fw},Ww=function(t,e,n){if(t===void 0&&(t=""),e===void 0&&(e=Vf().serverZone),n===void 0&&(n=Vf().useBatch),t)return{serverUrl:t,serverZone:void 0};var r=["US","EU"].includes(e)?e:Vf().serverZone;return{serverZone:r,serverUrl:I3(r,n)}},P3=(function(){function t(){this.sdk={metrics:{histogram:{}}}}return t.prototype.recordHistogram=function(e,n){this.sdk.metrics.histogram[e]=n},t})();function ov(t){return t>=200&&t<300}var Wf=function(t){t===void 0&&(t=0);var e=new Error().stack||"";return e.split(`
`).slice(2+t).map(function(n){return n.trim()})},Jt=function(t){return function(){var e=de({},t.config),n=e.loggerProvider,r=e.logLevel;return{logger:n,logLevel:r}}},B3=function(t,e){var n,r;e=e.replace(/\[(\w+)\]/g,".$1"),e=e.replace(/^\./,"");try{for(var i=ct(e.split(".")),s=i.next();!s.done;s=i.next()){var l=s.value;if(l in t)t=t[l];else return}}catch(c){n={error:c}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}return t},Qt=function(t,e){return function(){var n,r,i={};try{for(var s=ct(e),l=s.next();!l.done;l=s.next()){var c=l.value;i[c]=B3(t,c)}}catch(d){n={error:d}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i}},Zt=function(t,e,n,r,i){return i===void 0&&(i=null),function(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];var c=n(),d=c.logger,p=c.logLevel;if(p&&p<Cr.Debug||!p||!d)return t.apply(i,s);var m={type:"invoke public method",name:e,args:s,stacktrace:Wf(1),time:{start:new Date().toISOString()},states:{}};r&&m.states&&(m.states.before=r());var g=t.apply(i,s);return g&&g.promise?g.promise.then(function(){r&&m.states&&(m.states.after=r()),m.time&&(m.time.end=new Date().toISOString()),d.debug(JSON.stringify(m,null,2))}):(r&&m.states&&(m.states.after=r()),m.time&&(m.time.end=new Date().toISOString()),d.debug(JSON.stringify(m,null,2))),g}};function U3(t){return t instanceof Error?t.message:String(t)}function Kc(t){var e="";try{"body"in t&&(e=JSON.stringify(t.body,null,2))}catch{}return e}var H3=(function(){function t(e){this.name="amplitude",this.type="destination",this.retryTimeout=1e3,this.throttleTimeout=3e4,this.storageKey="",this.scheduleId=null,this.scheduledTimeout=0,this.flushId=null,this.queue=[],this.diagnosticsClient=e?.diagnosticsClient}return t.prototype.setup=function(e){var n;return le(this,void 0,void 0,function(){var r,i=this;return se(this,function(s){switch(s.label){case 0:return this.config=e,this.storageKey="".concat(a3,"_").concat(this.config.apiKey.substring(0,10)),[4,(n=this.config.storageProvider)===null||n===void 0?void 0:n.get(this.storageKey)];case 1:return r=s.sent(),r&&r.length>0&&Promise.all(r.map(function(l){return i.execute(l)})).catch(),[2,Promise.resolve(void 0)]}})})},t.prototype.execute=function(e){var n=this;return e.insert_id||(e.insert_id=Ii()),new Promise(function(r){var i={event:e,attempts:0,callback:function(s){return r(s)},timeout:0};n.queue.push(i),n.schedule(n.config.flushIntervalMillis),n.saveEvents()})},t.prototype.removeEventsExceedFlushMaxRetries=function(e){var n=this;return e.filter(function(r){return r.attempts+=1,r.attempts<n.config.flushMaxRetries?!0:(n.fulfillRequest([r],500,E3),!1)})},t.prototype.scheduleEvents=function(e){var n=this;e.forEach(function(r){n.schedule(r.timeout===0?n.config.flushIntervalMillis:r.timeout)})},t.prototype.schedule=function(e){var n=this;if(!this.config.offline&&(this.scheduleId===null||this.scheduleId&&e>this.scheduledTimeout)){this.scheduleId&&clearTimeout(this.scheduleId),this.scheduledTimeout=e,this.scheduleId=setTimeout(function(){n.queue=n.queue.map(function(r){return r.timeout=0,r}),n.flush(!0)},e);return}},t.prototype.resetSchedule=function(){this.scheduleId=null,this.scheduledTimeout=0},t.prototype.flush=function(e){return e===void 0&&(e=!1),le(this,void 0,void 0,function(){var n,r,i,s=this;return se(this,function(l){switch(l.label){case 0:return this.config.offline?(this.resetSchedule(),this.config.loggerProvider.debug("Skipping flush while offline."),[2]):this.flushId?(this.resetSchedule(),this.config.loggerProvider.debug("Skipping flush because previous flush has not resolved."),[2]):(this.flushId=this.scheduleId,this.resetSchedule(),n=[],r=[],this.queue.forEach(function(c){return c.timeout===0?n.push(c):r.push(c)}),i=z3(n,this.config.flushQueueSize),[4,i.reduce(function(c,d){return le(s,void 0,void 0,function(){return se(this,function(p){switch(p.label){case 0:return[4,c];case 1:return p.sent(),[4,this.send(d,e)];case 2:return[2,p.sent()]}})})},Promise.resolve())]);case 1:return l.sent(),this.flushId=null,this.scheduleEvents(this.queue),[2]}})})},t.prototype.send=function(e,n){var r;return n===void 0&&(n=!0),le(this,void 0,void 0,function(){var i,s,l,c,d;return se(this,function(p){switch(p.label){case 0:if(!this.config.apiKey)return[2,this.fulfillRequest(e,400,w3)];i={api_key:this.config.apiKey,events:e.map(function(m){var g=m.event;g.extra;var v=nh(g,["extra"]);return v}),options:{min_id_length:this.config.minIdLength},client_upload_time:new Date().toISOString(),request_metadata:this.config.requestMetadata},this.config.requestMetadata=new P3,p.label=1;case 1:return p.trys.push([1,3,,4]),s=Ww(this.config.serverUrl,this.config.serverZone,this.config.useBatch).serverUrl,[4,this.config.transportProvider.send(s,i)];case 2:return l=p.sent(),l===null?(this.fulfillRequest(e,0,S3),[2]):n?(this.handleResponse(l,e),[3,4]):("body"in l?this.fulfillRequest(e,l.statusCode,"".concat(l.status,": ").concat(Kc(l))):this.fulfillRequest(e,l.statusCode,l.status),[2]);case 3:return c=p.sent(),d=U3(c),this.config.loggerProvider.error(d),(r=this.diagnosticsClient)===null||r===void 0||r.recordEvent("analytics.events.unsuccessful.from.catch.error",{events:e.map(function(m){return m.event.event_type}),message:d,stack_trace:Wf()}),this.handleResponse({status:xn.Failed,statusCode:0},e),[3,4];case 4:return[2]}})})},t.prototype.handleResponse=function(e,n){var r;ov(e.statusCode)||(r=this.diagnosticsClient)===null||r===void 0||r.recordEvent("analytics.events.unsuccessful",{events:n.map(function(s){return s.event.event_type}),code:e.statusCode,status:e.status,body:Kc(e),stack_trace:Wf()});var i=e.status;switch(i){case xn.Success:{this.handleSuccessResponse(e,n);break}case xn.Invalid:{this.handleInvalidResponse(e,n);break}case xn.PayloadTooLarge:{this.handlePayloadTooLargeResponse(e,n);break}case xn.RateLimit:{this.handleRateLimitResponse(e,n);break}default:{this.config.loggerProvider.warn(`{code: 0, error: "Status '`.concat(i,"' provided for ").concat(n.length,' events"}')),this.handleOtherResponse(n);break}}},t.prototype.handleSuccessResponse=function(e,n){this.fulfillRequest(n,e.statusCode,x3)},t.prototype.handleInvalidResponse=function(e,n){var r=this;if(e.body.missingField||e.body.error.startsWith(C3)){this.fulfillRequest(n,e.statusCode,e.body.error);return}var i=_t(_t(_t(_t([],qe(Object.values(e.body.eventsWithInvalidFields)),!1),qe(Object.values(e.body.eventsWithMissingFields)),!1),qe(Object.values(e.body.eventsWithInvalidIdLengths)),!1),qe(e.body.silencedEvents),!1).flat(),s=new Set(i),l=n.filter(function(d,p){if(s.has(p)){r.fulfillRequest([d],e.statusCode,e.body.error);return}return!0});l.length>0&&this.config.loggerProvider.warn(Kc(e));var c=this.removeEventsExceedFlushMaxRetries(l);this.scheduleEvents(c)},t.prototype.handlePayloadTooLargeResponse=function(e,n){if(n.length===1){this.fulfillRequest(n,e.statusCode,e.body.error);return}this.config.loggerProvider.warn(Kc(e)),this.config.flushQueueSize/=2;var r=this.removeEventsExceedFlushMaxRetries(n);this.scheduleEvents(r)},t.prototype.handleRateLimitResponse=function(e,n){var r=this,i=Object.keys(e.body.exceededDailyQuotaUsers),s=Object.keys(e.body.exceededDailyQuotaDevices),l=e.body.throttledEvents,c=new Set(i),d=new Set(s),p=new Set(l),m=n.filter(function(v,b){if(v.event.user_id&&c.has(v.event.user_id)||v.event.device_id&&d.has(v.event.device_id)){r.fulfillRequest([v],e.statusCode,e.body.error);return}return p.has(b)&&(v.timeout=r.throttleTimeout),!0});m.length>0&&this.config.loggerProvider.warn(Kc(e));var g=this.removeEventsExceedFlushMaxRetries(m);this.scheduleEvents(g)},t.prototype.handleOtherResponse=function(e){var n=this,r=e.map(function(s){return s.timeout=s.attempts*n.retryTimeout,s}),i=this.removeEventsExceedFlushMaxRetries(r);this.scheduleEvents(i)},t.prototype.fulfillRequest=function(e,n,r){var i,s,l;ov(n)?(l=this.diagnosticsClient)===null||l===void 0||l.increment("analytics.events.sent",e.length):((i=this.diagnosticsClient)===null||i===void 0||i.increment("analytics.events.dropped",e.length),(s=this.diagnosticsClient)===null||s===void 0||s.recordEvent("analytics.events.dropped",{events:e.map(function(c){return c.event.event_type}),code:n,message:r,stack_trace:Wf()})),this.removeEvents(e),e.forEach(function(c){return c.callback(Dl(c.event,n,r))})},t.prototype.saveEvents=function(){if(this.config.storageProvider){var e=this.queue.map(function(n){return n.event});this.config.storageProvider.set(this.storageKey,e)}},t.prototype.removeEvents=function(e){this.queue=this.queue.filter(function(n){return!e.some(function(r){return r.event.insert_id===n.event.insert_id})}),this.saveEvents()},t})(),q3=(function(){function t(){}return t.prototype.getApplicationContext=function(){return{versionName:this.versionName,language:F3(),platform:"Web",os:void 0,deviceModel:void 0}},t})(),F3=function(){return typeof navigator<"u"&&(navigator.languages&&navigator.languages[0]||navigator.language)||""},V3=(function(){function t(){this.queue=[]}return t.prototype.logEvent=function(e){this.receiver?this.receiver(e):this.queue.length<512&&this.queue.push(e)},t.prototype.setEventReceiver=function(e){this.receiver=e,this.queue.length>0&&(this.queue.forEach(function(n){e(n)}),this.queue=[])},t})(),ss=function(){return ss=Object.assign||function(e){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ss.apply(this,arguments)};function $f(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function y2(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],l;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(c){l={error:c}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(l)throw l.error}}return s}var Gf=function(t,e){var n,r,i=["string","number","boolean","undefined"],s=typeof t,l=typeof e;if(s!==l)return!1;try{for(var c=$f(i),d=c.next();!d.done;d=c.next()){var p=d.value;if(p===s)return t===e}}catch(E){n={error:E}}finally{try{d&&!d.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}if(t==null&&e==null)return!0;if(t==null||e==null||t.length!==e.length)return!1;var m=Array.isArray(t),g=Array.isArray(e);if(m!==g)return!1;if(m&&g){for(var v=0;v<t.length;v++)if(!Gf(t[v],e[v]))return!1}else{var b=Object.keys(t).sort(),S=Object.keys(e).sort();if(!Gf(b,S))return!1;var k=!0;return Object.keys(t).forEach(function(E){Gf(t[E],e[E])||(k=!1)}),k}return!0},W3="$set",$3="$unset",G3="$clearAll";Object.entries||(Object.entries=function(t){for(var e=Object.keys(t),n=e.length,r=new Array(n);n--;)r[n]=[e[n],t[e[n]]];return r});var K3=(function(){function t(){this.identity={userProperties:{}},this.listeners=new Set}return t.prototype.editIdentity=function(){var e=this,n=ss({},this.identity.userProperties),r=ss(ss({},this.identity),{userProperties:n});return{setUserId:function(i){return r.userId=i,this},setDeviceId:function(i){return r.deviceId=i,this},setUserProperties:function(i){return r.userProperties=i,this},setOptOut:function(i){return r.optOut=i,this},updateUserProperties:function(i){var s,l,c,d,p,m,g=r.userProperties||{};try{for(var v=$f(Object.entries(i)),b=v.next();!b.done;b=v.next()){var S=y2(b.value,2),k=S[0],E=S[1];switch(k){case W3:try{for(var w=(c=void 0,$f(Object.entries(E))),T=w.next();!T.done;T=w.next()){var _=y2(T.value,2),R=_[0],O=_[1];g[R]=O}}catch(H){c={error:H}}finally{try{T&&!T.done&&(d=w.return)&&d.call(w)}finally{if(c)throw c.error}}break;case $3:try{for(var D=(p=void 0,$f(Object.keys(E))),I=D.next();!I.done;I=D.next()){var R=I.value;delete g[R]}}catch(H){p={error:H}}finally{try{I&&!I.done&&(m=D.return)&&m.call(D)}finally{if(p)throw p.error}}break;case G3:g={};break}}}catch(H){s={error:H}}finally{try{b&&!b.done&&(l=v.return)&&l.call(v)}finally{if(s)throw s.error}}return r.userProperties=g,this},commit:function(){return e.setIdentity(r),this}}},t.prototype.getIdentity=function(){return ss({},this.identity)},t.prototype.setIdentity=function(e){var n=ss({},this.identity);this.identity=ss({},e),Gf(n,this.identity)||this.listeners.forEach(function(r){r(e)})},t.prototype.addIdentityListener=function(e){this.listeners.add(e)},t.prototype.removeIdentityListener=function(e){this.listeners.delete(e)},t})(),Yc=typeof globalThis<"u"?globalThis:typeof global<"u"?global:self,Y3=(function(){function t(){this.identityStore=new K3,this.eventBridge=new V3,this.applicationContextProvider=new q3}return t.getInstance=function(e){return Yc.analyticsConnectorInstances||(Yc.analyticsConnectorInstances={}),Yc.analyticsConnectorInstances[e]||(Yc.analyticsConnectorInstances[e]=new t),Yc.analyticsConnectorInstances[e]},t})(),Du=function(t){return t===void 0&&(t=qw),Y3.getInstance(t)},X3=function(t,e){Du(e).identityStore.editIdentity().setUserId(t).commit()},J3=function(t,e){Du(e).identityStore.editIdentity().setDeviceId(t).commit()},Q3=(function(){function t(){this.name="identity",this.type="before",this.identityStore=Du().identityStore}return t.prototype.execute=function(e){return le(this,void 0,void 0,function(){var n;return se(this,function(r){return n=e.user_properties,n&&this.identityStore.editIdentity().updateUserProperties(n).commit(),[2,e]})})},t.prototype.setup=function(e){return le(this,void 0,void 0,function(){return se(this,function(n){return e.instanceName&&(this.identityStore=Du(e.instanceName).identityStore),[2]})})},t})(),$w=function(t,e){e===void 0&&(e=Date.now());var n=Date.now(),r=n-e;return r>t},Gw=function(t,e,n){return e===void 0&&(e=""),n===void 0&&(n=10),[fp,e,t.substring(0,n)].filter(Boolean).join("_")},Z3=function(t){return"".concat(fp.toLowerCase(),"_").concat(t.substring(0,6))},eR=function(){var t,e,n,r;if(typeof navigator>"u")return"";var i=navigator.userLanguage;return(r=(n=(e=(t=navigator.languages)===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:navigator.language)!==null&&n!==void 0?n:i)!==null&&r!==void 0?r:""},dh=function(){var t,e=Pt();if(!(!((t=e?.location)===null||t===void 0)&&t.search))return{};var n=e.location.search.substring(1).split("&").filter(Boolean),r=n.reduce(function(i,s){var l=s.split("=",2),c=b2(l[0]),d=b2(l[1]);return d&&(i[c]=d),i},{});return r},b2=function(t){t===void 0&&(t="");try{return decodeURIComponent(t)}catch{return""}},sv=function(t,e){return!e||!e.length?!0:e.some(function(n){return typeof n=="string"?t===n:t.match(n)})},ps=function(t,e){var n=t;try{n=decodeURI(t)}catch(r){e?.error("Malformed URI sequence: ",r)}return n},tR=function(t){var e=0;if(t.length===0)return e;for(var n=0;n<t.length;n++){var r=t.charCodeAt(n);e=(e<<5)-e+r,e|=0}return e},x2=function(t,e){var n=tR(t.toString()),r=Math.abs(n),i=r*31,s=i%1e5;return s/1e5<e},iy=(function(){function t(){this.memoryStorage=new Map}return t.prototype.isEnabled=function(){return le(this,void 0,void 0,function(){return se(this,function(e){return[2,!0]})})},t.prototype.get=function(e){return le(this,void 0,void 0,function(){return se(this,function(n){return[2,this.memoryStorage.get(e)]})})},t.prototype.getRaw=function(e){return le(this,void 0,void 0,function(){var n;return se(this,function(r){switch(r.label){case 0:return[4,this.get(e)];case 1:return n=r.sent(),[2,n?JSON.stringify(n):void 0]}})})},t.prototype.set=function(e,n){return le(this,void 0,void 0,function(){return se(this,function(r){return this.memoryStorage.set(e,n),[2]})})},t.prototype.remove=function(e){return le(this,void 0,void 0,function(){return se(this,function(n){return this.memoryStorage.delete(e),[2]})})},t.prototype.reset=function(){return le(this,void 0,void 0,function(){return se(this,function(e){return this.memoryStorage.clear(),[2]})})},t})(),fh=(function(){function t(e,n){n===void 0&&(n={}),this.options=de({},e),this.config=n}return t.prototype.isEnabled=function(){return le(this,void 0,void 0,function(){var e,n,r,i;return se(this,function(s){switch(s.label){case 0:if(!Pt())return[2,!1];t.testValue=String(Date.now()),e=de(de({},this.options),{expirationDays:.003}),n=new t(e),r="AMP_TEST_".concat(Ii().substring(0,8)),s.label=1;case 1:return s.trys.push([1,4,5,7]),[4,n.set(r,t.testValue)];case 2:return s.sent(),[4,n.get(r)];case 3:return i=s.sent(),[2,i===t.testValue];case 4:return s.sent(),[2,!1];case 5:return[4,n.remove(r)];case 6:return s.sent(),[7];case 7:return[2]}})})},t.prototype.get=function(e){return le(this,void 0,void 0,function(){var n,r;return se(this,function(i){switch(i.label){case 0:return[4,this.getRaw(e)];case 1:if(n=i.sent(),!n)return[2,void 0];try{return r=Kw(n),r===void 0?(console.error("Amplitude Logger [Error]: Failed to decode cookie value for key: ".concat(e,", value: ").concat(n)),[2,void 0]):[2,JSON.parse(r)]}catch{return console.error("Amplitude Logger [Error]: Failed to parse cookie value for key: ".concat(e,", value: ").concat(n)),[2,void 0]}return[2]}})})},t.prototype.getRaw=function(e){var n,r,i,s;return le(this,void 0,void 0,function(){var l,c,d,p,m,g,v,b,S,k,E,w,T=this;return se(this,function(_){switch(_.label){case 0:l=Pt(),c=l,_.label=1;case 1:return _.trys.push([1,4,,5]),d=c?.cookieStore,d?[4,d.getAll(e)]:[3,3];case 2:if(p=_.sent(),p){p.length>1&&((n=this.config.diagnosticsClient)===null||n===void 0||n.recordEvent("cookies.duplicate",{cookies:p.map(function(R){return R.domain})}),(r=this.config.diagnosticsClient)===null||r===void 0||r.increment("cookies.duplicate.occurrence.cookieStore"));try{for(m=ct(p),g=m.next();!g.done;g=m.next())if(v=g.value,Yw(v.domain,this.options.domain))return[2,v.value]}catch(R){E={error:R}}finally{try{g&&!g.done&&(w=m.return)&&w.call(m)}finally{if(E)throw E.error}}}_.label=3;case 3:return[3,5];case 4:return _.sent(),[3,5];case 5:return b=((s=(i=l?.document)===null||i===void 0?void 0:i.cookie.split("; "))!==null&&s!==void 0?s:[]).filter(function(R){return R.indexOf(e+"=")===0}),S=void 0,k=this.config.duplicateResolverFn,typeof k=="function"&&b.length>1&&(S=b.find(function(R){var O;try{var D=k(R.substring(e.length+1));return D||(O=T.config.diagnosticsClient)===null||O===void 0||O.increment("cookies.duplicate.occurrence.document.cookie"),D}catch{return!1}})),S||(S=b[0]),S?[2,S.substring(e.length+1)]:[2,void 0]}})})},t.prototype.set=function(e,n){var r;return le(this,void 0,void 0,function(){var i,s,l,c,d,p,m;return se(this,function(g){try{i=(r=this.options.expirationDays)!==null&&r!==void 0?r:0,s=n!==null?i:-1,l=void 0,s&&(c=new Date,c.setTime(c.getTime()+s*24*60*60*1e3),l=c),d="".concat(e,"=").concat(btoa(encodeURIComponent(JSON.stringify(n)))),l&&(d+="; expires=".concat(l.toUTCString())),d+="; path=/",this.options.domain&&(d+="; domain=".concat(this.options.domain)),this.options.secure&&(d+="; Secure"),this.options.sameSite&&(d+="; SameSite=".concat(this.options.sameSite)),p=Pt(),p&&(p.document.cookie=d)}catch(v){m=v instanceof Error?v.message:String(v),console.error("Amplitude Logger [Error]: Failed to set cookie for key: ".concat(e,". Error: ").concat(m))}return[2]})})},t.prototype.remove=function(e){return le(this,void 0,void 0,function(){return se(this,function(n){switch(n.label){case 0:return[4,this.set(e,null)];case 1:return n.sent(),[2]}})})},t.prototype.reset=function(){return le(this,void 0,void 0,function(){return se(this,function(e){return[2]})})},t})(),nR=function(t){try{return decodeURIComponent(atob(t))}catch{return}},rR=function(t){try{return decodeURIComponent(atob(decodeURIComponent(t)))}catch{return}},Kw=function(t){var e;return(e=nR(t))!==null&&e!==void 0?e:rR(t)},Yw=function(t,e){if(!t||!e)return!1;var n=t.startsWith(".")?t.substring(1):t,r=e.startsWith(".")?e.substring(1):e;return n.toLowerCase()===r.toLowerCase()},S2=function(t,e,n){return e===void 0&&(e=""),n===void 0&&(n=10),[fp,e,t.substring(0,n)].filter(Boolean).join("_")},oy=(function(){function t(e){this.storage=e}return t.prototype.isEnabled=function(){return le(this,void 0,void 0,function(){var e,n,r,i;return se(this,function(s){switch(s.label){case 0:if(!this.storage)return[2,!1];e=String(Date.now()),n=new t(this.storage),r="AMP_TEST",s.label=1;case 1:return s.trys.push([1,4,5,7]),[4,n.set(r,e)];case 2:return s.sent(),[4,n.get(r)];case 3:return i=s.sent(),[2,i===e];case 4:return s.sent(),[2,!1];case 5:return[4,n.remove(r)];case 6:return s.sent(),[7];case 7:return[2]}})})},t.prototype.get=function(e){return le(this,void 0,void 0,function(){var n;return se(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.getRaw(e)];case 1:return n=r.sent(),n?[2,JSON.parse(n)]:[2,void 0];case 2:return r.sent(),console.error("[Amplitude] Error: Could not get value from storage"),[2,void 0];case 3:return[2]}})})},t.prototype.getRaw=function(e){var n;return le(this,void 0,void 0,function(){return se(this,function(r){return[2,((n=this.storage)===null||n===void 0?void 0:n.getItem(e))||void 0]})})},t.prototype.set=function(e,n){var r;return le(this,void 0,void 0,function(){return se(this,function(i){try{(r=this.storage)===null||r===void 0||r.setItem(e,JSON.stringify(n))}catch{}return[2]})})},t.prototype.remove=function(e){var n;return le(this,void 0,void 0,function(){return se(this,function(r){try{(n=this.storage)===null||n===void 0||n.removeItem(e)}catch{}return[2]})})},t.prototype.reset=function(){var e;return le(this,void 0,void 0,function(){return se(this,function(n){try{(e=this.storage)===null||e===void 0||e.clear()}catch{}return[2]})})},t})(),iR=10,oR=1,bt={TAGS:"tags",COUNTERS:"counters",HISTOGRAMS:"histograms",EVENTS:"events",INTERNAL:"internal"},E2={LAST_FLUSH_TIMESTAMP:"last_flush_timestamp"},k2=(function(){function t(e,n){this.dbPromise=null,this.logger=n,this.dbName="AMP_diagnostics_".concat(e.substring(0,10))}return t.isSupported=function(){var e;return((e=Pt())===null||e===void 0?void 0:e.indexedDB)!==void 0},t.prototype.getDB=function(){return le(this,void 0,void 0,function(){return se(this,function(e){return this.dbPromise||(this.dbPromise=this.openDB()),[2,this.dbPromise]})})},t.prototype.openDB=function(){var e=this;return new Promise(function(n,r){var i=indexedDB.open(e.dbName,oR);i.onerror=function(){e.dbPromise=null,r(new Error("Failed to open IndexedDB"))},i.onsuccess=function(){var s=i.result;s.onclose=function(){e.dbPromise=null,e.logger.debug("DiagnosticsStorage: DB connection closed.")},s.onerror=function(l){e.logger.debug("DiagnosticsStorage: A global database error occurred.",l),s.close()},n(s)},i.onupgradeneeded=function(s){var l=s.target.result;e.createTables(l)}})},t.prototype.createTables=function(e){if(e.objectStoreNames.contains(bt.TAGS)||e.createObjectStore(bt.TAGS,{keyPath:"key"}),e.objectStoreNames.contains(bt.COUNTERS)||e.createObjectStore(bt.COUNTERS,{keyPath:"key"}),e.objectStoreNames.contains(bt.HISTOGRAMS)||e.createObjectStore(bt.HISTOGRAMS,{keyPath:"key"}),!e.objectStoreNames.contains(bt.EVENTS)){var n=e.createObjectStore(bt.EVENTS,{keyPath:"id",autoIncrement:!0});n.createIndex("time_idx","time",{unique:!1})}e.objectStoreNames.contains(bt.INTERNAL)||e.createObjectStore(bt.INTERNAL,{keyPath:"key"})},t.prototype.setTags=function(e){return le(this,void 0,void 0,function(){var n,r,i,s,l=this;return se(this,function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),Object.entries(e).length===0?[2]:[4,this.getDB()];case 1:return n=c.sent(),r=n.transaction([bt.TAGS],"readwrite"),i=r.objectStore(bt.TAGS),[2,new Promise(function(d){var p=Object.entries(e);r.oncomplete=function(){d()},r.onabort=function(m){l.logger.debug("DiagnosticsStorage: Failed to set tags",m),d()},p.forEach(function(m){var g=qe(m,2),v=g[0],b=g[1],S=i.put({key:v,value:b});S.onerror=function(k){l.logger.debug("DiagnosticsStorage: Failed to set tag",v,b,k)}})})];case 2:return s=c.sent(),this.logger.debug("DiagnosticsStorage: Failed to set tags",s),[3,3];case 3:return[2]}})})},t.prototype.incrementCounters=function(e){return le(this,void 0,void 0,function(){var n,r,i,s,l=this;return se(this,function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),Object.entries(e).length===0?[2]:[4,this.getDB()];case 1:return n=c.sent(),r=n.transaction([bt.COUNTERS],"readwrite"),i=r.objectStore(bt.COUNTERS),[2,new Promise(function(d){var p=Object.entries(e);r.oncomplete=function(){d()},r.onabort=function(m){l.logger.debug("DiagnosticsStorage: Failed to increment counters",m),d()},p.forEach(function(m){var g=qe(m,2),v=g[0],b=g[1],S=i.get(v);S.onsuccess=function(){var k=S.result,E=k?k.value:0,w=i.put({key:v,value:E+b});w.onerror=function(T){l.logger.debug("DiagnosticsStorage: Failed to update counter",v,T)}},S.onerror=function(k){l.logger.debug("DiagnosticsStorage: Failed to read existing counter",v,k)}})})];case 2:return s=c.sent(),this.logger.debug("DiagnosticsStorage: Failed to increment counters",s),[3,3];case 3:return[2]}})})},t.prototype.setHistogramStats=function(e){return le(this,void 0,void 0,function(){var n,r,i,s,l=this;return se(this,function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),Object.entries(e).length===0?[2]:[4,this.getDB()];case 1:return n=c.sent(),r=n.transaction([bt.HISTOGRAMS],"readwrite"),i=r.objectStore(bt.HISTOGRAMS),[2,new Promise(function(d){var p=Object.entries(e);r.oncomplete=function(){d()},r.onabort=function(m){l.logger.debug("DiagnosticsStorage: Failed to set histogram stats",m),d()},p.forEach(function(m){var g=qe(m,2),v=g[0],b=g[1],S=i.get(v);S.onsuccess=function(){var k=S.result,E;k?E={key:v,count:k.count+b.count,min:Math.min(k.min,b.min),max:Math.max(k.max,b.max),sum:k.sum+b.sum}:E={key:v,count:b.count,min:b.min,max:b.max,sum:b.sum};var w=i.put(E);w.onerror=function(T){l.logger.debug("DiagnosticsStorage: Failed to set histogram stats",v,T)}},S.onerror=function(k){l.logger.debug("DiagnosticsStorage: Failed to read existing histogram stats",v,k)}})})];case 2:return s=c.sent(),this.logger.debug("DiagnosticsStorage: Failed to set histogram stats",s),[3,3];case 3:return[2]}})})},t.prototype.addEventRecords=function(e){return le(this,void 0,void 0,function(){var n,r,i,s,l=this;return se(this,function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),e.length===0?[2]:[4,this.getDB()];case 1:return n=c.sent(),r=n.transaction([bt.EVENTS],"readwrite"),i=r.objectStore(bt.EVENTS),[2,new Promise(function(d){r.oncomplete=function(){d()},r.onabort=function(m){l.logger.debug("DiagnosticsStorage: Failed to add event records",m),d()};var p=i.count();p.onsuccess=function(){var m=p.result,g=Math.max(0,iR-m);g<e.length&&l.logger.debug("DiagnosticsStorage: Only added ".concat(g," of ").concat(e.length," events due to storage limit")),e.slice(0,g).forEach(function(v){var b=i.add(v);b.onerror=function(S){l.logger.debug("DiagnosticsStorage: Failed to add event record",S)}})},p.onerror=function(m){l.logger.debug("DiagnosticsStorage: Failed to count existing events",m)}})];case 2:return s=c.sent(),this.logger.debug("DiagnosticsStorage: Failed to add event records",s),[3,3];case 3:return[2]}})})},t.prototype.setInternal=function(e,n){return le(this,void 0,void 0,function(){var r,i,s,l;return se(this,function(c){switch(c.label){case 0:return c.trys.push([0,2,,3]),[4,this.getDB()];case 1:return r=c.sent(),i=r.transaction([bt.INTERNAL],"readwrite"),s=i.objectStore(bt.INTERNAL),[2,new Promise(function(d,p){i.onabort=function(){return p(new Error("Failed to set internal value"))};var m=s.put({key:e,value:n});m.onsuccess=function(){return d()},m.onerror=function(){return p(new Error("Failed to set internal value"))}})];case 2:return l=c.sent(),this.logger.debug("DiagnosticsStorage: Failed to set internal value",l),[3,3];case 3:return[2]}})})},t.prototype.getInternal=function(e){return le(this,void 0,void 0,function(){var n,r,i,s;return se(this,function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,this.getDB()];case 1:return n=l.sent(),r=n.transaction([bt.INTERNAL],"readonly"),i=r.objectStore(bt.INTERNAL),[2,new Promise(function(c,d){r.onabort=function(){return d(new Error("Failed to get internal value"))};var p=i.get(e);p.onsuccess=function(){return c(p.result)},p.onerror=function(){return d(new Error("Failed to get internal value"))}})];case 2:return s=l.sent(),this.logger.debug("DiagnosticsStorage: Failed to get internal value",s),[2,void 0];case 3:return[2]}})})},t.prototype.getLastFlushTimestamp=function(){return le(this,void 0,void 0,function(){var e,n;return se(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.getInternal(E2.LAST_FLUSH_TIMESTAMP)];case 1:return e=r.sent(),[2,e?parseInt(e.value,10):void 0];case 2:return n=r.sent(),this.logger.debug("DiagnosticsStorage: Failed to get last flush timestamp",n),[2,void 0];case 3:return[2]}})})},t.prototype.setLastFlushTimestamp=function(e){return le(this,void 0,void 0,function(){var n;return se(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.setInternal(E2.LAST_FLUSH_TIMESTAMP,e.toString())];case 1:return r.sent(),[3,3];case 2:return n=r.sent(),this.logger.debug("DiagnosticsStorage: Failed to set last flush timestamp",n),[3,3];case 3:return[2]}})})},t.prototype.clearTable=function(e,n){return new Promise(function(r,i){var s=e.objectStore(n),l=s.clear();l.onsuccess=function(){return r()},l.onerror=function(){return i(new Error("Failed to clear table ".concat(n)))}})},t.prototype.getAllAndClear=function(){return le(this,void 0,void 0,function(){var e,n,r,i,s,l,c,d;return se(this,function(p){switch(p.label){case 0:return p.trys.push([0,4,,5]),[4,this.getDB()];case 1:return e=p.sent(),n=e.transaction([bt.TAGS,bt.COUNTERS,bt.HISTOGRAMS,bt.EVENTS],"readwrite"),[4,Promise.all([this.getAllFromStore(n,bt.TAGS),this.getAllFromStore(n,bt.COUNTERS),this.getAllFromStore(n,bt.HISTOGRAMS),this.getAllFromStore(n,bt.EVENTS)])];case 2:return r=qe.apply(void 0,[p.sent(),4]),i=r[0],s=r[1],l=r[2],c=r[3],[4,Promise.all([this.clearTable(n,bt.COUNTERS),this.clearTable(n,bt.HISTOGRAMS),this.clearTable(n,bt.EVENTS)])];case 3:return p.sent(),[2,{tags:i,counters:s,histogramStats:l,events:c}];case 4:return d=p.sent(),this.logger.debug("DiagnosticsStorage: Failed to get all and clear data",d),[2,{tags:[],counters:[],histogramStats:[],events:[]}];case 5:return[2]}})})},t.prototype.getAllFromStore=function(e,n){return new Promise(function(r,i){var s=e.objectStore(n),l=s.getAll();l.onsuccess=function(){return r(l.result)},l.onerror=function(){return i(new Error("Failed to get all from ".concat(n)))}})},t})(),sR="__AMPLITUDE_SCRIPT_URL__",aR="sdk.error.uncaught",lR=function(){var t=Pt();return t?.[sR]},cR=function(t){var e=Pt();if(!(!e||typeof e.addEventListener!="function")){var n=function(s){var l=s.error instanceof Error?s.error:void 0,c=l?.stack,d=w2({filename:s.filename,stack:c});d&&i({type:"error",message:s.message,stack:c,filename:s.filename,errorName:l?.name,metadata:{colno:s.colno,lineno:s.lineno,isTrusted:s.isTrusted,matchReason:d}})},r=function(s){var l,c=s.reason instanceof Error?s.reason:void 0,d=c?.stack,p=uR(d),m=w2({filename:p,stack:d});m&&i({type:"unhandledrejection",message:(l=c?.message)!==null&&l!==void 0?l:dR(s.reason),stack:d,filename:p,errorName:c?.name,metadata:{isTrusted:s.isTrusted,matchReason:m}})},i=function(s){t.recordEvent(aR,de({type:s.type,message:s.message,filename:s.filename,error_name:s.errorName,stack:s.stack},s.metadata))};e.addEventListener("error",n,!0),e.addEventListener("unhandledrejection",r,!0)}},w2=function(t){var e=lR();if(e){if(t.filename&&t.filename.includes(e))return"filename";if(t.stack&&t.stack.includes(e))return"stack"}},uR=function(t){if(t){var e=t.match(/(https?:\/\/\S+?)(?=[)\s]|$)/);return e?e[1]:void 0}},dR=function(t){if(typeof t=="string")return t;try{return JSON.stringify(t)}catch{return"[object Object]"}},fR=1e3,Sf=300*1e3,hR="https://diagnostics.prod.us-west-2.amplitude.com/v1/capture",pR="https://diagnostics.prod.eu-central-1.amplitude.com/v1/capture",qg=1e4,mR=10,gR=(function(){function t(e,n,r,i){r===void 0&&(r="US"),this.inMemoryTags={},this.inMemoryCounters={},this.inMemoryHistograms={},this.inMemoryEvents=[],this.saveTimer=null,this.flushTimer=null,this.apiKey=e,this.logger=n,this.serverUrl=r==="US"?hR:pR,this.logger.debug("DiagnosticsClient: Initializing with options",JSON.stringify(i,null,2)),this.config=de({enabled:!0,sampleRate:0},i),this.startTimestamp=Date.now(),this.shouldTrack=x2(this.startTimestamp,this.config.sampleRate)&&this.config.enabled,k2.isSupported()?this.storage=new k2(e,n):this.logger.debug("DiagnosticsClient: IndexedDB is not supported"),this.initializeFlushInterval(),this.shouldTrack&&(this.increment("sdk.diagnostics.sampled.in.and.enabled"),cR(this))}return t.prototype.isStorageAndTrackEnabled=function(){return!!this.storage&&!!this.shouldTrack},t.prototype.setTag=function(e,n){if(this.isStorageAndTrackEnabled()){if(Object.keys(this.inMemoryTags).length>=qg){this.logger.debug("DiagnosticsClient: Early return setTags as reaching memory limit");return}this.inMemoryTags[e]=n,this.startTimersIfNeeded()}},t.prototype.increment=function(e,n){if(n===void 0&&(n=1),!!this.isStorageAndTrackEnabled()){if(Object.keys(this.inMemoryCounters).length>=qg){this.logger.debug("DiagnosticsClient: Early return increment as reaching memory limit");return}this.inMemoryCounters[e]=(this.inMemoryCounters[e]||0)+n,this.startTimersIfNeeded()}},t.prototype.recordHistogram=function(e,n){if(this.isStorageAndTrackEnabled()){if(Object.keys(this.inMemoryHistograms).length>=qg){this.logger.debug("DiagnosticsClient: Early return recordHistogram as reaching memory limit");return}var r=this.inMemoryHistograms[e];r?(r.count+=1,r.min=Math.min(r.min,n),r.max=Math.max(r.max,n),r.sum+=n):this.inMemoryHistograms[e]={count:1,min:n,max:n,sum:n},this.startTimersIfNeeded()}},t.prototype.recordEvent=function(e,n){if(this.isStorageAndTrackEnabled()){if(this.inMemoryEvents.length>=mR){this.logger.debug("DiagnosticsClient: Early return recordEvent as reaching memory limit");return}this.inMemoryEvents.push({event_name:e,time:Date.now(),event_properties:n}),this.startTimersIfNeeded()}},t.prototype.startTimersIfNeeded=function(){var e=this;this.saveTimer||(this.saveTimer=setTimeout(function(){e.saveAllDataToStorage().catch(function(n){e.logger.debug("DiagnosticsClient: Failed to save all data to storage",n)}).finally(function(){e.saveTimer=null})},fR)),this.flushTimer||(this.flushTimer=setTimeout(function(){e._flush().catch(function(n){e.logger.debug("DiagnosticsClient: Failed to flush",n)}).finally(function(){e.flushTimer=null})},Sf))},t.prototype.saveAllDataToStorage=function(){return le(this,void 0,void 0,function(){var e,n,r,i;return se(this,function(s){switch(s.label){case 0:return this.storage?(e=de({},this.inMemoryTags),n=de({},this.inMemoryCounters),r=de({},this.inMemoryHistograms),i=_t([],qe(this.inMemoryEvents),!1),this.inMemoryEvents=[],this.inMemoryTags={},this.inMemoryCounters={},this.inMemoryHistograms={},[4,Promise.all([this.storage.setTags(e),this.storage.incrementCounters(n),this.storage.setHistogramStats(r),this.storage.addEventRecords(i)])]):[2];case 1:return s.sent(),[2]}})})},t.prototype._flush=function(){return le(this,void 0,void 0,function(){var e,n,r,i,s,l,c,d,p,m;return se(this,function(g){switch(g.label){case 0:return this.storage?[4,this.saveAllDataToStorage()]:[2];case 1:return g.sent(),this.saveTimer=null,this.flushTimer=null,[4,this.storage.getAllAndClear()];case 2:return e=g.sent(),n=e.tags,r=e.counters,i=e.histogramStats,s=e.events,this.storage.setLastFlushTimestamp(Date.now()),l={},n.forEach(function(v){l[v.key]=v.value}),c={},r.forEach(function(v){c[v.key]=v.value}),d={},i.forEach(function(v){d[v.key]={count:v.count,min:v.min,max:v.max,avg:Math.round(v.sum/v.count*100)/100}}),p=s.map(function(v){return{event_name:v.event_name,time:v.time,event_properties:v.event_properties}}),Object.keys(c).length===0&&Object.keys(d).length===0&&p.length===0?[2]:(m={tags:l,histogram:d,counters:c,events:p},this.fetch(m),[2])}})})},t.prototype.fetch=function(e){return le(this,void 0,void 0,function(){var n,r;return se(this,function(i){switch(i.label){case 0:if(i.trys.push([0,2,,3]),!Pt())throw new Error("DiagnosticsClient: Fetch is not supported");return[4,fetch(this.serverUrl,{method:"POST",headers:{"X-ApiKey":this.apiKey,"Content-Type":"application/json"},body:JSON.stringify(e)})];case 1:return n=i.sent(),n.ok?(this.logger.debug("DiagnosticsClient: Successfully sent diagnostics data"),[3,3]):(this.logger.debug("DiagnosticsClient: Failed to send diagnostics data."),[2]);case 2:return r=i.sent(),this.logger.debug("DiagnosticsClient: Failed to send diagnostics data. ",r),[3,3];case 3:return[2]}})})},t.prototype.initializeFlushInterval=function(){return le(this,void 0,void 0,function(){var e,n,r;return se(this,function(i){switch(i.label){case 0:return this.storage?(e=Date.now(),[4,this.storage.getLastFlushTimestamp()]):[2];case 1:return n=i.sent()||-1,n===-1?(this.storage.setLastFlushTimestamp(e),this._setFlushTimer(Sf),[2]):(r=e-n,r>=Sf?(this._flush(),[2]):(this._setFlushTimer(Sf-r),[2]))}})})},t.prototype._setFlushTimer=function(e){var n=this;this.flushTimer=setTimeout(function(){n._flush().catch(function(r){n.logger.debug("DiagnosticsClient: Failed to flush",r)}).finally(function(){n.flushTimer=null})},e)},t.prototype._setSampleRate=function(e){this.logger.debug("DiagnosticsClient: Setting sample rate to",e),this.config.sampleRate=e,this.shouldTrack=x2(this.startTimestamp,this.config.sampleRate)&&this.config.enabled,this.logger.debug("DiagnosticsClient: Should track is",this.shouldTrack)},t})(),sy=(function(){function t(){}return t.prototype.send=function(e,n){return Promise.resolve(null)},t.prototype.buildResponse=function(e){var n,r,i,s,l,c,d,p,m,g,v,b,S,k,E,w,T,_,R,O,D,I;if(typeof e!="object")return null;var H=e.code||0,V=this.buildStatus(H);switch(V){case xn.Success:return{status:V,statusCode:H,body:{eventsIngested:(n=e.events_ingested)!==null&&n!==void 0?n:0,payloadSizeBytes:(r=e.payload_size_bytes)!==null&&r!==void 0?r:0,serverUploadTime:(i=e.server_upload_time)!==null&&i!==void 0?i:0}};case xn.Invalid:return{status:V,statusCode:H,body:{error:(s=e.error)!==null&&s!==void 0?s:"",missingField:(l=e.missing_field)!==null&&l!==void 0?l:"",eventsWithInvalidFields:(c=e.events_with_invalid_fields)!==null&&c!==void 0?c:{},eventsWithMissingFields:(d=e.events_with_missing_fields)!==null&&d!==void 0?d:{},eventsWithInvalidIdLengths:(p=e.events_with_invalid_id_lengths)!==null&&p!==void 0?p:{},epsThreshold:(m=e.eps_threshold)!==null&&m!==void 0?m:0,exceededDailyQuotaDevices:(g=e.exceeded_daily_quota_devices)!==null&&g!==void 0?g:{},silencedDevices:(v=e.silenced_devices)!==null&&v!==void 0?v:[],silencedEvents:(b=e.silenced_events)!==null&&b!==void 0?b:[],throttledDevices:(S=e.throttled_devices)!==null&&S!==void 0?S:{},throttledEvents:(k=e.throttled_events)!==null&&k!==void 0?k:[]}};case xn.PayloadTooLarge:return{status:V,statusCode:H,body:{error:(E=e.error)!==null&&E!==void 0?E:""}};case xn.RateLimit:return{status:V,statusCode:H,body:{error:(w=e.error)!==null&&w!==void 0?w:"",epsThreshold:(T=e.eps_threshold)!==null&&T!==void 0?T:0,throttledDevices:(_=e.throttled_devices)!==null&&_!==void 0?_:{},throttledUsers:(R=e.throttled_users)!==null&&R!==void 0?R:{},exceededDailyQuotaDevices:(O=e.exceeded_daily_quota_devices)!==null&&O!==void 0?O:{},exceededDailyQuotaUsers:(D=e.exceeded_daily_quota_users)!==null&&D!==void 0?D:{},throttledEvents:(I=e.throttled_events)!==null&&I!==void 0?I:[]}};case xn.Timeout:default:return{status:V,statusCode:H}}},t.prototype.buildStatus=function(e){return ov(e)?xn.Success:e===429?xn.RateLimit:e===413?xn.PayloadTooLarge:e===408?xn.Timeout:e>=400&&e<500?xn.Invalid:e>=500?xn.Failed:xn.Unknown},t})(),vR=(function(t){As(e,t);function e(n){n===void 0&&(n={});var r=t.call(this)||this;return r.customHeaders=n,r}return e.prototype.send=function(n,r){return le(this,void 0,void 0,function(){var i,s,l;return se(this,function(c){switch(c.label){case 0:if(typeof fetch>"u")throw new Error("FetchTransport is not supported");return i={headers:de({"Content-Type":"application/json",Accept:"*/*"},this.customHeaders),body:JSON.stringify(r),method:"POST"},[4,fetch(n,i)];case 1:return s=c.sent(),[4,s.text()];case 2:l=c.sent();try{return[2,this.buildResponse(JSON.parse(l))]}catch{return[2,this.buildResponse({code:s.status})]}return[2]}})})},e})(sy),yR=(function(){function t(e,n){this.key="AMP_remote_config_".concat(e.substring(0,10)),this.logger=n}return t.prototype.fetchConfig=function(){var e=null,n={remoteConfig:null,lastFetch:new Date};try{e=localStorage.getItem(this.key)}catch(i){return this.logger.debug("Remote config localstorage failed to access: ",i),Promise.resolve(n)}if(e===null)return this.logger.debug("Remote config localstorage gets null because the key does not exist"),Promise.resolve(n);try{var r=JSON.parse(e);return this.logger.debug("Remote config localstorage parsed successfully: ".concat(JSON.stringify(r))),Promise.resolve({remoteConfig:r.remoteConfig,lastFetch:new Date(r.lastFetch)})}catch(i){return this.logger.debug("Remote config localstorage failed to parse: ",i),localStorage.removeItem(this.key),Promise.resolve(n)}},t.prototype.setConfig=function(e){try{return localStorage.setItem(this.key,JSON.stringify(e)),this.logger.debug("Remote config localstorage set successfully."),Promise.resolve(!0)}catch(n){this.logger.debug("Remote config localstorage failed to set: ",n)}return Promise.resolve(!1)},t})(),bR="https://sr-client-cfg.amplitude.com/config",xR="https://sr-client-cfg.eu.amplitude.com/config",SR=3,ER=1e3,kR=300*1e3,wR=(function(){function t(e,n,r,i){r===void 0&&(r="US"),this.callbackInfos=[],this.lastSuccessfulFetch=null,this.fetchPromise=null,this.apiKey=e,this.serverUrl=i||(r==="US"?bR:xR),this.logger=n,this.storage=new yR(e,n)}return t.prototype.subscribe=function(e,n,r){var i=Ii(),s={id:i,key:e,deliveryMode:n,callback:r};return this.callbackInfos.push(s),n==="all"?this.subscribeAll(s):this.subscribeWaitForRemote(s,n.timeout),i},t.prototype.unsubscribe=function(e){var n=this.callbackInfos.findIndex(function(r){return r.id===e});return n===-1?(this.logger.debug("Remote config client unsubscribe failed because callback with id ".concat(e," doesn't exist.")),!1):(this.callbackInfos.splice(n,1),this.logger.debug("Remote config client unsubscribe succeeded removing callback with id ".concat(e,".")),!0)},t.prototype.updateConfigs=function(){return le(this,void 0,void 0,function(){var e,n,r=this;return se(this,function(i){switch(i.label){case 0:return this.lastSuccessfulFetch&&(e=Date.now()-this.lastSuccessfulFetch,e<kR)?(this.logger.debug("Remote config client skipping updateConfigs: Too recent"),[2]):[4,this.getOrCreateFetchPromise()];case 1:return n=i.sent(),this.storage.setConfig(n),this.callbackInfos.forEach(function(s){r.sendCallback(s,n,"remote")}),[2]}})})},t.prototype.getOrCreateFetchPromise=function(){var e=this;return this.fetchPromise?this.fetchPromise:(this.fetchPromise=this.fetch().then(function(n){return n.remoteConfig!==null&&(e.lastSuccessfulFetch=Date.now()),n}).finally(function(){e.fetchPromise=null}),this.fetchPromise)},t.prototype.subscribeAll=function(e){return le(this,void 0,void 0,function(){var n,r,i,s=this;return se(this,function(l){switch(l.label){case 0:return n=this.getOrCreateFetchPromise().then(function(c){s.logger.debug("Remote config client subscription all mode fetched from remote: ".concat(JSON.stringify(c))),s.sendCallback(e,c,"remote"),s.storage.setConfig(c)}),r=this.storage.fetchConfig().then(function(c){return c}),[4,Promise.race([n,r])];case 1:return i=l.sent(),i!==void 0&&(this.logger.debug("Remote config client subscription all mode fetched from cache: ".concat(JSON.stringify(i))),i.remoteConfig!==null?this.sendCallback(e,i,"cache"):this.logger.debug("Remote config client skips sending callback because cache is empty (first time user).")),[4,n];case 2:return l.sent(),[2]}})})},t.prototype.subscribeWaitForRemote=function(e,n){return le(this,void 0,void 0,function(){var r,i,i;return se(this,function(s){switch(s.label){case 0:r=new Promise(function(l,c){setTimeout(function(){c("Timeout exceeded")},n)}),s.label=1;case 1:return s.trys.push([1,3,,5]),[4,Promise.race([this.getOrCreateFetchPromise(),r])];case 2:return i=s.sent(),this.logger.debug("Remote config client subscription wait for remote mode returns from remote."),this.sendCallback(e,i,"remote"),this.storage.setConfig(i),[3,5];case 3:return s.sent(),this.logger.debug("Remote config client subscription wait for remote mode exceeded timeout. Try to fetch from cache."),[4,this.storage.fetchConfig()];case 4:return i=s.sent(),i.remoteConfig!==null?(this.logger.debug("Remote config client subscription wait for remote mode returns a cached copy."),this.sendCallback(e,i,"cache")):(this.logger.debug("Remote config client subscription wait for remote mode failed to fetch cache."),this.sendCallback(e,i,"remote")),[3,5];case 5:return[2]}})})},t.prototype.sendCallback=function(e,n,r){e.lastCallback=new Date;var i;e.key?i=e.key.split(".").reduce(function(s,l){return s===null?s:l in s?s[l]:null},n.remoteConfig):i=n.remoteConfig,e.callback(i,r,n.lastFetch)},t.prototype.fetch=function(e,n){return e===void 0&&(e=SR),n===void 0&&(n=ER),le(this,void 0,void 0,function(){var r,i,s,l,c,d,p=this;return se(this,function(m){switch(m.label){case 0:r=n/e,i={remoteConfig:null,lastFetch:new Date},s=function(g){var v,b,S,k,E,w;return se(this,function(T){switch(T.label){case 0:v=new AbortController,b=setTimeout(function(){return v.abort()},n),T.label=1;case 1:return T.trys.push([1,7,8,9]),[4,fetch(l.getUrlParams(),{method:"GET",headers:{Accept:"*/*"},signal:v.signal})];case 2:return S=T.sent(),S.ok?[3,4]:[4,S.text()];case 3:return k=T.sent(),l.logger.debug("Remote config client fetch with retry time ".concat(e," failed with ").concat(S.status,": ").concat(k)),[3,6];case 4:return[4,S.json()];case 5:return E=T.sent(),[2,{value:{remoteConfig:E,lastFetch:new Date}}];case 6:return[3,9];case 7:return w=T.sent(),w instanceof Error&&w.name==="AbortError"?l.logger.debug("Remote config client fetch with retry time ".concat(e," timed out after ").concat(n,"ms")):l.logger.debug("Remote config client fetch with retry time ".concat(e," is rejected because: "),w),[3,9];case 8:return clearTimeout(b),[7];case 9:return g<e-1?[4,new Promise(function(_){return setTimeout(_,p.getJitterDelay(r))})]:[3,11];case 10:T.sent(),T.label=11;case 11:return[2]}})},l=this,c=0,m.label=1;case 1:return c<e?[5,s(c)]:[3,4];case 2:if(d=m.sent(),typeof d=="object")return[2,d.value];m.label=3;case 3:return c++,[3,1];case 4:return[2,i]}})})},t.prototype.getJitterDelay=function(e){return Math.floor(Math.random()*e)},t.prototype.getUrlParams=function(){var e=encodeURIComponent(this.apiKey),n=new URLSearchParams;return n.append("config_group",t.CONFIG_GROUP),"".concat(this.serverUrl,"/").concat(e,"?").concat(n.toString())},t.CONFIG_GROUP="browser",t})(),Fg=Pt(),Tl=Fg?.console,ha={},bu={},Vg=!1;function CR(t){if(!Tl||typeof Tl[t]!="function")return!1;if(bu[t])return!0;var e=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];try{if(ha[t]&&!Vg){Vg=!0;var i=ha[t];i&&i.forEach(function(s){try{s(t,n)}catch{}})}}catch{}return Vg=!1,bu[t].apply(Tl,n)};return bu[t]=Tl[t],Tl[t]=e,!0}function TR(t,e){var n=CR(t);if(!n)return new Error("Console override failed");ha[t]?ha[t].push(e):ha[t]=[e]}function _R(t){var e,n;try{for(var r=ct(Object.values(ha)),i=r.next();!i.done;i=r.next())for(var s=i.value,l=s.length-1;l>=0;l--)if(s[l]===t){s.splice(l,1);break}}catch(c){e={error:c}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}function AR(){var t,e;try{for(var n=ct(Object.entries(bu)),r=n.next();!r.done;r=n.next()){var i=qe(r.value,2),s=i[0],l=i[1];l&&(Tl[s]=l)}}catch(c){t={error:c}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}bu={},ha={}}var C2={addListener:TR,removeListener:_R,_restoreConsole:AR},MR=null,jR=["a","button","input","select","textarea","label","video","audio",'[contenteditable="true" i]',"[data-amp-default-track]",".amp-default-track"],Xw="data-amp-track-",OR=["div","span","h1","h2","h3","h4","h5","h6"],RR=["a","button",'[role="button"]','[role="link"]','[role="menuitem"]','[role="menuitemcheckbox"]','[role="menuitemradio"]','[role="option"]','[role="tab"]','[role="treeitem"]','[contenteditable="true" i]'],Jw=_t(['input[type="button"]','input[type="submit"]','input[type="reset"]','input[type="image"]','input[type="file"]'],qe(RR),!1),NR=Jw,DR=Jw,zR=["*"],LR=1e3,IR=4,PR=50;function BR(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||t===null||t===void 0}function Qw(t,e,n){if(t){var r=e.map(T2),i=n.map(T2);Zw({json:t,allowlist:r,excludelist:i,ancestors:[]})}}function Zw(t){var e,n,r=t.json,i=t.targetObject,s=t.allowlist,l=t.excludelist,c=t.ancestors,d=t.parentObject,p=t.targetKey;i||(i=r);var m=Object.keys(i);try{for(var g=ct(m),v=g.next();!v.done;v=g.next()){var b=v.value,S=_t(_t([],qe(c),!1),[b],!1);BR(i[b])?(!_2(S,s)||_2(S,l))&&delete i[b]:Zw({json:r,targetObject:i[b],allowlist:s,excludelist:l,ancestors:S,parentObject:i,targetKey:b})}}catch(k){e={error:k}}finally{try{v&&!v.done&&(n=g.return)&&n.call(g)}finally{if(e)throw e.error}}Object.keys(i).length===0&&d&&p&&delete d[p]}function T2(t){return t.startsWith("/")&&(t=t.slice(1)),t.split("/").map(function(e){return e.replace(/~0/g,"~").replace(/~1/g,"/")})}function av(t,e,n,r){if(n===void 0&&(n=0),r===void 0&&(r=0),r===e.length)return n===t.length;if(n===t.length){for(;r<e.length&&e[r]==="**";)r++;return r===e.length}var i=e[r];if(i==="**"){if(r+1===e.length)return!0;for(var s=n;s<=t.length;s++)if(av(t,e,s,r+1))return!0;return!1}else return i==="*"||i===t[n]?av(t,e,n+1,r+1):!1}function _2(t,e){return e.some(function(n){return av(t,n)})}var UR=500,eC=100,HR=(function(){function t(e){this.request=e}return t.prototype.headers=function(e){var n,r;e===void 0&&(e=[]);var i=this.request.headers,s={};if(Array.isArray(i))i.forEach(function(g){var v=qe(g,2),b=v[0],S=v[1];s[b]=S});else if(i instanceof Headers)i.forEach(function(g,v){s[v]=g});else if(typeof i=="object"&&i!==null)try{for(var l=ct(Object.entries(i)),c=l.next();!c.done;c=l.next()){var d=qe(c.value,2),p=d[0],m=d[1];s[p]=m}}catch(g){n={error:g}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}return pp(s,{allow:e})},Object.defineProperty(t.prototype,"bodySize",{get:function(){if(typeof this._bodySize=="number")return this._bodySize;var e=Pt();if(e?.TextEncoder){var n=this.request.body;return this._bodySize=tC(n,eC),this._bodySize}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"method",{get:function(){return this.request.method},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"body",{get:function(){return typeof this.request.body=="string"?this.request.body:null},enumerable:!1,configurable:!0}),t.prototype.json=function(e,n){return e===void 0&&(e=[]),n===void 0&&(n=[]),le(this,void 0,void 0,function(){var r;return se(this,function(i){return e.length===0?[2,null]:(r=this.body,[2,ay(r,e,n)])})})},t})(),qR=(function(){function t(e,n){this.bodyRaw=e,this.requestHeaders=n}return t.prototype.headers=function(e){return e===void 0&&(e=[]),pp(this.requestHeaders,{allow:e})},Object.defineProperty(t.prototype,"bodySize",{get:function(){return tC(this.bodyRaw,eC)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"body",{get:function(){return typeof this.bodyRaw=="string"?this.bodyRaw:null},enumerable:!1,configurable:!0}),t.prototype.json=function(e,n){return e===void 0&&(e=[]),n===void 0&&(n=[]),le(this,void 0,void 0,function(){var r;return se(this,function(i){return e.length===0?[2,null]:(r=this.body,[2,ay(r,e,n)])})})},t})();function tC(t,e){var n,r,i,s=Pt(),l=s?.TextEncoder;if(l){var c;if(typeof t=="string")c=t,i=new l().encode(c).length;else if(t instanceof Blob)c=t,i=c.size;else if(t instanceof URLSearchParams)c=t,i=new l().encode(c.toString()).length;else if(ArrayBuffer.isView(t))c=t,i=c.byteLength;else if(t instanceof ArrayBuffer)c=t,i=c.byteLength;else if(t instanceof FormData){var d=t,p=0,m=0;try{for(var g=ct(d.entries()),v=g.next();!v.done;v=g.next()){var b=qe(v.value,2),S=b[0],k=b[1];if(p+=S.length,typeof k=="string")p+=new l().encode(k).length;else if(k instanceof Blob)p+=k.size;else return;if(++m>=e)return}}catch(E){n={error:E}}finally{try{v&&!v.done&&(r=g.return)&&r.call(g)}finally{if(n)throw n.error}}i=p}else if(t instanceof ReadableStream){c=t;return}return i}}var FR=(function(){function t(e){this.response=e}return t.prototype.headers=function(e){var n;if(e===void 0&&(e=[]),this.response.headers instanceof Headers){var r=this.response.headers,i={};return(n=r?.forEach)===null||n===void 0||n.call(r,function(s,l){i[l]=s}),pp(i,{allow:e})}},Object.defineProperty(t.prototype,"bodySize",{get:function(){var e,n;if(this._bodySize!==void 0)return this._bodySize;var r=(n=(e=this.response.headers)===null||e===void 0?void 0:e.get)===null||n===void 0?void 0:n.call(e,"content-length"),i=r?parseInt(r,10):void 0;return this._bodySize=i,i},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"status",{get:function(){return this.response.status},enumerable:!1,configurable:!0}),t.prototype.text=function(){return le(this,void 0,void 0,function(){var e,n,r;return se(this,function(i){switch(i.label){case 0:this.clonedResponse||(this.clonedResponse=this.response.clone()),i.label=1;case 1:return i.trys.push([1,3,,4]),e=this.clonedResponse.text(),n=new Promise(function(s){return setTimeout(function(){return s(null)},UR)}),[4,Promise.race([e,n])];case 2:return r=i.sent(),[2,r];case 3:return i.sent(),[2,null];case 4:return[2]}})})},t.prototype.json=function(e,n){return e===void 0&&(e=[]),n===void 0&&(n=[]),le(this,void 0,void 0,function(){var r;return se(this,function(i){switch(i.label){case 0:return e.length===0?[2,null]:[4,this.text()];case 1:return r=i.sent(),[2,ay(r,e,n)]}})})},t})(),VR=(function(){function t(e,n,r,i){this.statusCode=e,this.headersString=n,this.size=r,this.getJson=i}return Object.defineProperty(t.prototype,"bodySize",{get:function(){return this.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"status",{get:function(){return this.statusCode},enumerable:!1,configurable:!0}),t.prototype.headers=function(e){var n,r;if(e===void 0&&(e=[]),!this.headersString)return{};var i={},s=this.headersString.split(`\r
`);try{for(var l=ct(s),c=l.next();!c.done;c=l.next()){var d=c.value,p=qe(d.split(": "),2),m=p[0],g=p[1];m&&g&&(i[m]=g)}}catch(v){n={error:v}}finally{try{c&&!c.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}return pp(i,{allow:e})},t.prototype.json=function(e,n){return e===void 0&&(e=[]),n===void 0&&(n=[]),le(this,void 0,void 0,function(){var r;return se(this,function(i){return e.length===0?[2,null]:(r=this.getJson(),r?(Qw(r,e,n),[2,r]):[2,null])})})},t})();function ay(t,e,n){if(!t)return null;try{var r=JSON.parse(t);return Qw(r,e,n),r}catch{return null}}var xu;(function(t){t.REDACT="redact",t.REMOVE="remove"})(xu||(xu={}));var A2="[REDACTED]",pp=function(t,e){var n,r,i=e.allow,s=i===void 0?[]:i,l=e.strategy,c=l===void 0?xu.REMOVE:l,d=_t([],qe(v3),!1),p={},m=function(S){var k=S.toLowerCase();d.find(function(E){return E.toLowerCase()===k})?c===xu.REDACT&&(p[S]=A2):s.find(function(E){return E.toLowerCase()===k})?p[S]=t[S]:c===xu.REDACT&&(p[S]=A2)};try{for(var g=ct(Object.keys(t)),v=g.next();!v.done;v=g.next()){var b=v.value;m(b)}}catch(S){n={error:S}}finally{try{v&&!v.done&&(r=g.return)&&r.call(g)}finally{if(n)throw n.error}}return p},WR=(function(){function t(e,n,r,i,s,l,c,d,p,m,g){c===void 0&&(c=0),this.type=e,this.method=n,this.timestamp=r,this.startTime=i,this.url=s,this.requestWrapper=l,this.status=c,this.duration=d,this.responseWrapper=p,this.error=m,this.endTime=g}return t.prototype.toSerializable=function(){var e,n,r,i,s={type:this.type,method:this.method,url:this.url,timestamp:this.timestamp,status:this.status,duration:this.duration,error:this.error,startTime:this.startTime,endTime:this.endTime,requestHeaders:(e=this.requestWrapper)===null||e===void 0?void 0:e.headers(_t([],qe(ch),!1)),requestBodySize:(n=this.requestWrapper)===null||n===void 0?void 0:n.bodySize,responseHeaders:(r=this.responseWrapper)===null||r===void 0?void 0:r.headers(_t([],qe(ch),!1)),responseBodySize:(i=this.responseWrapper)===null||i===void 0?void 0:i.bodySize};return Object.fromEntries(Object.entries(s).filter(function(l){var c=qe(l,2);c[0];var d=c[1];return d!==void 0}))},t})();function $R(t){return typeof t=="object"&&t!==null&&"url"in t&&"method"in t}var GR=(function(){function t(e,n){n===void 0&&(n=Ii()),this.callback=e,this.id=n}return t})(),KR=(function(){function t(e){this.eventCallbacks=new Map,this.isObserving=!1,this.logger=e;var n=Pt();t.isSupported()&&(this.globalScope=n)}return t.isSupported=function(){var e=Pt();return!!e&&!!e.fetch},t.prototype.subscribe=function(e,n){var r,i,s,l,c,d,p,m,g,v;if(this.logger||(this.logger=n),this.eventCallbacks.set(e.id,e),!this.isObserving){var b=(s=(i=(r=this.globalScope)===null||r===void 0?void 0:r.XMLHttpRequest)===null||i===void 0?void 0:i.prototype)===null||s===void 0?void 0:s.open,S=(d=(c=(l=this.globalScope)===null||l===void 0?void 0:l.XMLHttpRequest)===null||c===void 0?void 0:c.prototype)===null||d===void 0?void 0:d.send,k=(g=(m=(p=this.globalScope)===null||p===void 0?void 0:p.XMLHttpRequest)===null||m===void 0?void 0:m.prototype)===null||g===void 0?void 0:g.setRequestHeader;b&&S&&k&&this.observeXhr(b,S,k);var E=(v=this.globalScope)===null||v===void 0?void 0:v.fetch;E&&this.observeFetch(E),this.isObserving=!0}},t.prototype.unsubscribe=function(e){this.eventCallbacks.delete(e.id)},t.prototype.triggerEventCallbacks=function(e){var n=this;this.eventCallbacks.forEach(function(r){var i;try{r.callback(e)}catch(s){(i=n.logger)===null||i===void 0||i.debug("an unexpected error occurred while triggering event callbacks",s)}})},t.prototype.handleNetworkRequestEvent=function(e,n,r,i,s,l,c){var d;if(!(l===void 0||c===void 0)){var p,m="GET";if($R(n)?(p=n.url,m=n.method):p=(d=n?.toString)===null||d===void 0?void 0:d.call(n),p)try{var g=new URL(p);p="".concat(g.protocol,"//").concat(g.host).concat(g.pathname).concat(g.search).concat(g.hash)}catch{}m=r?.method||m;var v,b;i&&(v=i.status),s&&(b={name:s.name||"UnknownError",message:s.message||"An unknown error occurred"},v=0);var S=Math.floor(performance.now()-c),k=Math.floor(l+S),E=new WR(e,m,l,l,p,r,v,S,i,b,k);this.triggerEventCallbacks(E)}},t.prototype.getTimestamps=function(){var e,n;return{startTime:(e=Date.now)===null||e===void 0?void 0:e.call(Date),durationStart:(n=performance?.now)===null||n===void 0?void 0:n.call(performance)}},t.prototype.observeFetch=function(e){var n=this;!this.globalScope||!e||(this.globalScope.fetch=function(r,i){return le(n,void 0,void 0,function(){var s,l,c,d,p,m;return se(this,function(g){switch(g.label){case 0:try{s=this.getTimestamps()}catch(v){(p=this.logger)===null||p===void 0||p.debug("an unexpected error occurred while retrieving timestamps",v)}g.label=1;case 1:return g.trys.push([1,3,,4]),[4,e(r,i)];case 2:return l=g.sent(),[3,4];case 3:return d=g.sent(),c=d,[3,4];case 4:try{this.handleNetworkRequestEvent("fetch",r,i?new HR(i):void 0,l?new FR(l):void 0,c,s?.startTime,s?.durationStart)}catch(v){(m=this.logger)===null||m===void 0||m.debug("an unexpected error occurred while handling fetch",v)}if(l)return[2,l];throw c}})})})},t.createXhrJsonParser=function(e,n){return function(){var r,i;try{if(e.responseType==="json"){if(!((r=n.globalScope)===null||r===void 0)&&r.structuredClone)return n.globalScope.structuredClone(e.response)}else if(["text",""].includes(e.responseType))return JSON.parse(e.responseText)}catch(s){return s instanceof Error&&s.name==="InvalidStateError"&&((i=n.logger)===null||i===void 0||i.error("unexpected error when retrieving responseText. responseType='".concat(e.responseType,"'"))),null}return null}},t.prototype.observeXhr=function(e,n,r){if(!(!this.globalScope||!e||!n)){var i=this.globalScope.XMLHttpRequest.prototype,s=this;i.open=function(){for(var l,c,d=[],p=0;p<arguments.length;p++)d[p]=arguments[p];var m=this,g=qe(d,2),v=g[0],b=g[1];try{m.$$AmplitudeAnalyticsEvent=de({method:v,url:(l=b?.toString)===null||l===void 0?void 0:l.call(b),headers:{}},s.getTimestamps())}catch(S){(c=s.logger)===null||c===void 0||c.error("an unexpected error occurred while calling xhr open",S)}return e.apply(m,d)},i.send=function(){for(var l=[],c=0;c<arguments.length;c++)l[c]=arguments[c];var d=this,p=d,m=t.createXhrJsonParser(d,s),g=l[0],v=p.$$AmplitudeAnalyticsEvent;return p.addEventListener("loadend",function(){var b;try{var S=p.getAllResponseHeaders(),k=p.getResponseHeader("content-length"),E=new VR(p.status,S,k?parseInt(k,10):void 0,m),w=p.$$AmplitudeAnalyticsEvent.headers,T=new qR(g,w);v.status=p.status,s.handleNetworkRequestEvent("xhr",{url:v.url,method:v.method},T,E,void 0,v.startTime,v.durationStart)}catch(_){(b=s.logger)===null||b===void 0||b.error("an unexpected error occurred while handling xhr send",_)}}),n.apply(p,l)},i.setRequestHeader=function(l,c){var d,p=this;try{p.$$AmplitudeAnalyticsEvent.headers[l]=c}catch(m){(d=s.logger)===null||d===void 0||d.error("an unexpected error occurred while calling xhr setRequestHeader",m)}r.apply(p,[l,c])}}},t})(),M2=new KR,nC=(function(){function t(){}return t.prototype.parse=function(){return le(this,void 0,void 0,function(){return se(this,function(e){return[2,de(de(de(de({},hp),this.getUtmParam()),this.getReferrer()),this.getClickIds())]})})},t.prototype.getUtmParam=function(){var e=dh(),n=e[d3],r=e[f3],i=e[h3],s=e[p3],l=e[m3],c=e[g3];return{utm_campaign:n,utm_content:r,utm_id:i,utm_medium:s,utm_source:l,utm_term:c}},t.prototype.getReferrer=function(){var e,n,r={referrer:void 0,referring_domain:void 0};try{r.referrer=document.referrer||void 0,r.referring_domain=(n=(e=r.referrer)===null||e===void 0?void 0:e.split("/")[2])!==null&&n!==void 0?n:void 0}catch{}return r},t.prototype.getClickIds=function(){var e,n=dh();return e={},e[s2]=n[s2],e[a2]=n[a2],e[l2]=n[l2],e[c2]=n[c2],e[u2]=n[u2],e[d2]=n[d2],e[f2]=n[f2],e[h2]=n[h2],e[p2]=n[p2],e[m2]=n[m2],e[g2]=n[g2],e},t})(),Su="data-amp-mask",ms="*****",YR=/\b(?:\d[ -]*?){13,16}\b/,XR=/(\d{3}-?\d{2}-?\d{4})/g,JR=/[^\s@]+@[^\s@.]+\.[^\s@]+/g,ly=function(t,e){var n,r;if(e===void 0&&(e=[]),typeof t!="string")return"";var i=t;i=i.replace(YR,ms),i=i.replace(XR,ms),i=i.replace(JR,ms);try{for(var s=ct(e),l=s.next();!l.done;l=s.next()){var c=l.value;try{i=i.replace(c,ms)}catch{}}}catch(d){n={error:d}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i},cy=function(t){if(typeof document>"u"||!document.title)return"";var e=document.querySelector("title");return e&&e.hasAttribute(Su)?ms:t?t(document.title):document.title};function QR(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=ZR(t))||e){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ZR(t,e){if(t){if(typeof t=="string")return j2(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j2(t,e)}}function j2(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function O2(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function uy(t,e,n){return e&&O2(t.prototype,e),n&&O2(t,n),t}var dy=function(){return typeof Symbol=="function"},fy=function(t){return dy()&&!!Symbol[t]},hy=function(t){return fy(t)?Symbol[t]:"@@"+t};dy()&&!fy("observable")&&(Symbol.observable=Symbol("observable"));var e4=hy("iterator"),lv=hy("observable"),rC=hy("species");function hh(t,e){var n=t[e];if(n!=null){if(typeof n!="function")throw new TypeError(n+" is not a function");return n}}function Xc(t){var e=t.constructor;return e!==void 0&&(e=e[rC],e===null&&(e=void 0)),e!==void 0?e:Kn}function t4(t){return t instanceof Kn}function Bl(t){Bl.log?Bl.log(t):setTimeout(function(){throw t})}function Kf(t){Promise.resolve().then(function(){try{t()}catch(e){Bl(e)}})}function iC(t){var e=t._cleanup;if(e!==void 0&&(t._cleanup=void 0,!!e))try{if(typeof e=="function")e();else{var n=hh(e,"unsubscribe");n&&n.call(e)}}catch(r){Bl(r)}}function cv(t){t._observer=void 0,t._queue=void 0,t._state="closed"}function n4(t){var e=t._queue;if(e){t._queue=void 0,t._state="ready";for(var n=0;n<e.length&&(oC(t,e[n].type,e[n].value),t._state!=="closed");++n);}}function oC(t,e,n){t._state="running";var r=t._observer;try{var i=hh(r,e);switch(e){case"next":i&&i.call(r,n);break;case"error":if(cv(t),i)i.call(r,n);else throw n;break;case"complete":cv(t),i&&i.call(r);break}}catch(s){Bl(s)}t._state==="closed"?iC(t):t._state==="running"&&(t._state="ready")}function Wg(t,e,n){if(t._state!=="closed"){if(t._state==="buffering"){t._queue.push({type:e,value:n});return}if(t._state!=="ready"){t._state="buffering",t._queue=[{type:e,value:n}],Kf(function(){return n4(t)});return}oC(t,e,n)}}var r4=(function(){function t(n,r){this._cleanup=void 0,this._observer=n,this._queue=void 0,this._state="initializing";var i=new i4(this);try{this._cleanup=r.call(void 0,i)}catch(s){i.error(s)}this._state==="initializing"&&(this._state="ready")}var e=t.prototype;return e.unsubscribe=function(){this._state!=="closed"&&(cv(this),iC(this))},uy(t,[{key:"closed",get:function(){return this._state==="closed"}}]),t})(),i4=(function(){function t(n){this._subscription=n}var e=t.prototype;return e.next=function(r){Wg(this._subscription,"next",r)},e.error=function(r){Wg(this._subscription,"error",r)},e.complete=function(){Wg(this._subscription,"complete")},uy(t,[{key:"closed",get:function(){return this._subscription._state==="closed"}}]),t})(),Kn=(function(){function t(n){if(!(this instanceof t))throw new TypeError("Observable cannot be called as a function");if(typeof n!="function")throw new TypeError("Observable initializer must be a function");this._subscriber=n}var e=t.prototype;return e.subscribe=function(r){return(typeof r!="object"||r===null)&&(r={next:r,error:arguments[1],complete:arguments[2]}),new r4(r,this._subscriber)},e.forEach=function(r){var i=this;return new Promise(function(s,l){if(typeof r!="function"){l(new TypeError(r+" is not a function"));return}function c(){d.unsubscribe(),s()}var d=i.subscribe({next:function(p){try{r(p,c)}catch(m){l(m),d.unsubscribe()}},error:l,complete:s})})},e.map=function(r){var i=this;if(typeof r!="function")throw new TypeError(r+" is not a function");var s=Xc(this);return new s(function(l){return i.subscribe({next:function(c){try{c=r(c)}catch(d){return l.error(d)}l.next(c)},error:function(c){l.error(c)},complete:function(){l.complete()}})})},e.filter=function(r){var i=this;if(typeof r!="function")throw new TypeError(r+" is not a function");var s=Xc(this);return new s(function(l){return i.subscribe({next:function(c){try{if(!r(c))return}catch(d){return l.error(d)}l.next(c)},error:function(c){l.error(c)},complete:function(){l.complete()}})})},e.reduce=function(r){var i=this;if(typeof r!="function")throw new TypeError(r+" is not a function");var s=Xc(this),l=arguments.length>1,c=!1,d=arguments[1],p=d;return new s(function(m){return i.subscribe({next:function(g){var v=!c;if(c=!0,!v||l)try{p=r(p,g)}catch(b){return m.error(b)}else p=g},error:function(g){m.error(g)},complete:function(){if(!c&&!l)return m.error(new TypeError("Cannot reduce an empty sequence"));m.next(p),m.complete()}})})},e.concat=function(){for(var r=this,i=arguments.length,s=new Array(i),l=0;l<i;l++)s[l]=arguments[l];var c=Xc(this);return new c(function(d){var p,m=0;function g(v){p=v.subscribe({next:function(b){d.next(b)},error:function(b){d.error(b)},complete:function(){m===s.length?(p=void 0,d.complete()):g(c.from(s[m++]))}})}return g(r),function(){p&&(p.unsubscribe(),p=void 0)}})},e.flatMap=function(r){var i=this;if(typeof r!="function")throw new TypeError(r+" is not a function");var s=Xc(this);return new s(function(l){var c=[],d=i.subscribe({next:function(m){if(r)try{m=r(m)}catch(v){return l.error(v)}var g=s.from(m).subscribe({next:function(v){l.next(v)},error:function(v){l.error(v)},complete:function(){var v=c.indexOf(g);v>=0&&c.splice(v,1),p()}});c.push(g)},error:function(m){l.error(m)},complete:function(){p()}});function p(){d.closed&&c.length===0&&l.complete()}return function(){c.forEach(function(m){return m.unsubscribe()}),d.unsubscribe()}})},e[lv]=function(){return this},t.from=function(r){var i=typeof this=="function"?this:t;if(r==null)throw new TypeError(r+" is not an object");var s=hh(r,lv);if(s){var l=s.call(r);if(Object(l)!==l)throw new TypeError(l+" is not an object");return t4(l)&&l.constructor===i?l:new i(function(c){return l.subscribe(c)})}if(fy("iterator")&&(s=hh(r,e4),s))return new i(function(c){Kf(function(){if(!c.closed){for(var d=QR(s.call(r)),p;!(p=d()).done;){var m=p.value;if(c.next(m),c.closed)return}c.complete()}})});if(Array.isArray(r))return new i(function(c){Kf(function(){if(!c.closed){for(var d=0;d<r.length;++d)if(c.next(r[d]),c.closed)return;c.complete()}})});throw new TypeError(r+" is not observable")},t.of=function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];var l=typeof this=="function"?this:t;return new l(function(c){Kf(function(){if(!c.closed){for(var d=0;d<i.length;++d)if(c.next(i[d]),c.closed)return;c.complete()}})})},uy(t,null,[{key:rC,get:function(){return this}}]),t})();dy()&&Object.defineProperty(Kn,Symbol("extensions"),{value:{symbol:lv,hostReportError:Bl},configurable:!0});function py(t,e){return new Kn(function(n){t.subscribe({next:function(r){e(r).then(function(i){return n.next(i)}).catch(function(i){return n.error(i)})},error:function(r){n.error(r)},complete:function(){n.complete()}})})}function ba(t,e){return new Kn(function(n){var r=!1,i=new Set,s=function(){var c,d;r=!0;try{for(var p=ct(i),m=p.next();!m.done;m=p.next()){var g=m.value;try{g.unsubscribe()}catch{}}}catch(v){c={error:v}}finally{try{m&&!m.done&&(d=p.return)&&d.call(p)}finally{if(c)throw c.error}}i.clear()},l=function(c){var d=c.subscribe({next:function(p){r||n.next(p)},error:function(p){r||(r=!0,n.error(p),s())},complete:function(){i.delete(d),!r&&i.size===0&&(n.complete(),s(),r=!0)}});i.add(d)};return l(t),l(e),s})}function vo(t){var e=new Set,n=null;function r(){n?.unsubscribe(),n=null,e.clear()}return new Kn(function(i){return e.add(i),n===null&&(n=t.subscribe({next:function(s){var l,c,d;try{for(var p=ct(e),m=p.next();!m.done;m=p.next()){var g=m.value;(d=g.next)===null||d===void 0||d.call(g,s)}}catch(v){l={error:v}}finally{try{m&&!m.done&&(c=p.return)&&c.call(p)}finally{if(l)throw l.error}}},error:function(s){var l,c,d;try{for(var p=ct(e),m=p.next();!m.done;m=p.next()){var g=m.value;(d=g.error)===null||d===void 0||d.call(g,s)}}catch(v){l={error:v}}finally{try{m&&!m.done&&(c=p.return)&&c.call(p)}finally{if(l)throw l.error}}r()},complete:function(){var s,l,c;try{for(var d=ct(e),p=d.next();!p.done;p=d.next()){var m=p.value;(c=m.complete)===null||c===void 0||c.call(m)}}catch(g){s={error:g}}finally{try{p&&!p.done&&(l=d.return)&&l.call(d)}finally{if(s)throw s.error}}r()}})),function(){e.delete(i),e.size===0&&n&&(n.unsubscribe(),n=null)}})}var Xl=function(t,e){return typeof t=="boolean"?t:t?.[e]!==!1},sC=function(t){return Xl(t,"attribution")},o4=function(t){return Xl(t,"fileDownloads")},aC=function(t){return Xl(t,"formInteractions")},lC=function(t){return Xl(t,"pageViews")},R2=function(t){return Xl(t,"sessions")},s4=function(t){return Xl(t,"pageUrlEnrichment")},cC=function(t){return typeof t=="boolean"?t:typeof t=="object"&&(t.networkTracking===!0||typeof t.networkTracking=="object")},uC=function(t){return typeof t=="boolean"?t:typeof t=="object"&&(t.elementInteractions===!0||typeof t.elementInteractions=="object")},a4=function(t){return typeof t=="boolean"?t:typeof t=="object"&&t.webVitals===!0},dC=function(t){return typeof t=="boolean"?t:typeof t=="object"&&(t.frustrationInteractions===!0||typeof t.frustrationInteractions=="object")},l4=function(t){if(uC(t.autocapture)&&typeof t.autocapture=="object"&&typeof t.autocapture.elementInteractions=="object")return t.autocapture.elementInteractions},c4=function(t){if(dC(t.autocapture)&&typeof t.autocapture=="object"&&typeof t.autocapture.frustrationInteractions=="object")return t.autocapture.frustrationInteractions},u4=function(t){var e;if(cC(t.autocapture)){var n=void 0;return typeof t.autocapture=="object"&&typeof t.autocapture.networkTracking=="object"?n=t.autocapture.networkTracking:t.networkTrackingOptions&&(n=t.networkTrackingOptions),de(de({},n),{captureRules:(e=n?.captureRules)===null||e===void 0?void 0:e.map(function(r){var i,s,l;if(!((i=r.urls)===null||i===void 0)&&i.length&&(!((s=r.hosts)===null||s===void 0)&&s.length)){var c=JSON.stringify(r.hosts),d=JSON.stringify(r.urls);return(l=t.loggerProvider)===null||l===void 0||l.warn("Found network capture rule with both urls='".concat(d,"' and hosts='").concat(c,"' set. ")+"Definition of urls takes precedence over hosts, so ignoring hosts."),de(de({},r),{hosts:void 0})}return r})})}},d4=function(t){var e=function(){return!1},n=void 0,r,i=t.pageCounter,s=lC(t.defaultTracking);return s&&(e=void 0,r=void 0,t.defaultTracking&&typeof t.defaultTracking=="object"&&t.defaultTracking.pageViews&&typeof t.defaultTracking.pageViews=="object"&&("trackOn"in t.defaultTracking.pageViews&&(e=t.defaultTracking.pageViews.trackOn),"trackHistoryChanges"in t.defaultTracking.pageViews&&(n=t.defaultTracking.pageViews.trackHistoryChanges),"eventType"in t.defaultTracking.pageViews&&t.defaultTracking.pageViews.eventType&&(r=t.defaultTracking.pageViews.eventType))),{trackOn:e,trackHistoryChanges:n,eventType:r,pageCounter:i}},f4=function(t){return sC(t.defaultTracking)&&t.defaultTracking&&typeof t.defaultTracking=="object"&&t.defaultTracking.attribution&&typeof t.defaultTracking.attribution=="object"?de({},t.defaultTracking.attribution):{}},h4=function(t){if(aC(t.defaultTracking)&&t.defaultTracking&&typeof t.defaultTracking=="object"&&typeof t.defaultTracking.formInteractions=="object")return t.defaultTracking.formInteractions},$g=function(t,e){for(var n=0;n<e.length;n++){var r=e[n],i=r.name,s=r.args,l=r.resolve,c=t&&t[i];if(typeof c=="function"){var d=c.apply(t,s);typeof l=="function"&&l(d?.promise)}}return t},Gg=function(t){var e=t;return e&&e._q!==void 0},my="2.34.0",fC="amplitude-ts",p4="Web",m4="$remote",g4=(function(){function t(){this.name="@amplitude/plugin-context-browser",this.type="before",this.library="".concat(fC,"/").concat(my),typeof navigator<"u"&&(this.userAgent=navigator.userAgent)}return t.prototype.setup=function(e){return this.config=e,Promise.resolve(void 0)},t.prototype.execute=function(e){var n,r;return le(this,void 0,void 0,function(){var i,s,l,c;return se(this,function(d){return i=new Date().getTime(),s=(n=this.config.lastEventId)!==null&&n!==void 0?n:-1,l=(r=e.event_id)!==null&&r!==void 0?r:s+1,this.config.lastEventId=l,e.time||(this.config.lastEventTime=i),c=de(de(de(de(de(de(de(de({user_id:this.config.userId,device_id:this.config.deviceId,session_id:this.config.sessionId,time:i},this.config.appVersion&&{app_version:this.config.appVersion}),this.config.trackingOptions.platform&&{platform:p4}),this.config.trackingOptions.language&&{language:eR()}),this.config.trackingOptions.ipAddress&&{ip:m4}),{insert_id:Ii(),partner_id:this.config.partnerId,plan:this.config.plan}),this.config.ingestionMetadata&&{ingestion_metadata:{source_name:this.config.ingestionMetadata.sourceName,source_version:this.config.ingestionMetadata.sourceVersion}}),e),{event_id:l,library:this.library,user_agent:this.userAgent}),[2,c]})})},t})(),Ef=1e3,hC=(function(t){As(e,t);function e(n){var r=this,i,s,l;try{l=(i=Pt())===null||i===void 0?void 0:i.localStorage}catch(c){(s=n?.loggerProvider)===null||s===void 0||s.debug("Failed to access localStorage. error=".concat(JSON.stringify(c))),l=void 0}return r=t.call(this,l)||this,r.loggerProvider=n?.loggerProvider,r}return e.prototype.set=function(n,r){var i;return le(this,void 0,void 0,function(){var s;return se(this,function(l){switch(l.label){case 0:return Array.isArray(r)&&r.length>Ef?(s=r.length-Ef,[4,t.prototype.set.call(this,n,r.slice(0,Ef))]):[3,2];case 1:return l.sent(),(i=this.loggerProvider)===null||i===void 0||i.error("Failed to save ".concat(s," events because the queue length exceeded ").concat(Ef,".")),[3,4];case 2:return[4,t.prototype.set.call(this,n,r)];case 3:l.sent(),l.label=4;case 4:return[2]}})})},e})(oy),v4=(function(t){As(e,t);function e(){var n;return t.call(this,(n=Pt())===null||n===void 0?void 0:n.sessionStorage)||this}return e})(oy),y4=(function(t){As(e,t);function e(n){n===void 0&&(n={});var r=t.call(this)||this;return r.state={done:4},r.customHeaders=n,r}return e.prototype.send=function(n,r){return le(this,void 0,void 0,function(){var i=this;return se(this,function(s){return[2,new Promise(function(l,c){var d,p;typeof XMLHttpRequest>"u"&&c(new Error("XHRTransport is not supported."));var m=new XMLHttpRequest;m.open("POST",n,!0),m.onreadystatechange=function(){if(m.readyState===i.state.done){var w=m.responseText;try{l(i.buildResponse(JSON.parse(w)))}catch{l(i.buildResponse({code:m.status}))}}};var g=de({"Content-Type":"application/json",Accept:"*/*"},i.customHeaders);try{for(var v=ct(Object.entries(g)),b=v.next();!b.done;b=v.next()){var S=qe(b.value,2),k=S[0],E=S[1];m.setRequestHeader(k,E)}}catch(w){d={error:w}}finally{try{b&&!b.done&&(p=v.return)&&p.call(v)}finally{if(d)throw d.error}}m.send(JSON.stringify(r))})]})})},e})(sy),b4=(function(t){As(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.send=function(n,r){return le(this,void 0,void 0,function(){var i=this;return se(this,function(s){return[2,new Promise(function(l,c){var d=Pt();if(!d?.navigator.sendBeacon)throw new Error("SendBeaconTransport is not supported");try{var p=JSON.stringify(r),m=d.navigator.sendBeacon(n,JSON.stringify(r));return l(m?i.buildResponse({code:200,events_ingested:r.events.length,payload_size_bytes:p.length,server_upload_time:Date.now()}):i.buildResponse({code:500}))}catch(g){c(g)}})]})})},e})(sy),x4=function(t,e,n){return n===void 0&&(n=!0),le(void 0,void 0,void 0,function(){var r,i,s,l,c,d,p,m,g;return se(this,function(v){switch(v.label){case 0:return r=Z3(t),[4,e.getRaw(r)];case 1:return i=v.sent(),i?n?[4,e.remove(r)]:[3,3]:[2,{optOut:!1}];case 2:v.sent(),v.label=3;case 3:return s=qe(i.split("."),6),l=s[0],c=s[1],d=s[2],p=s[3],m=s[4],g=s[5],[2,{deviceId:l,userId:S4(c),sessionId:Kg(p),lastEventId:Kg(g),lastEventTime:Kg(m),optOut:!!d}]}})})},Kg=function(t){var e=parseInt(t,32);if(!isNaN(e))return e},S4=function(t){if(!(!atob||!escape||!t))try{return decodeURIComponent(escape(atob(t)))}catch{return}},hi="[Amplitude]",N2="".concat(hi," Form Started"),E4="".concat(hi," Form Submitted"),k4="".concat(hi," File Downloaded"),D2="session_start",z2="session_end",w4="".concat(hi," File Extension"),C4="".concat(hi," File Name"),T4="".concat(hi," Link ID"),_4="".concat(hi," Link Text"),A4="".concat(hi," Link URL"),Yg="".concat(hi," Form ID"),Xg="".concat(hi," Form Name"),Jg="".concat(hi," Form Destination"),ph="cookie",pC="US",M4=(function(t){As(e,t);function e(n,r,i,s,l,c,d,p,m,g,v,b,S,k,E,w,T,_,R,O,D,I,H,V,K,Q,re,Re,ye,me,q,te,ue,Ce,ae,Se,ge,he,Le,rt){i===void 0&&(i=new iy),s===void 0&&(s={domain:"",expiration:365,sameSite:"Lax",secure:!1,upgrade:!0}),p===void 0&&(p=1e3),m===void 0&&(m=5),g===void 0&&(g=30),v===void 0&&(v=ph),w===void 0&&(w=new ry),T===void 0&&(T=Cr.Warn),R===void 0&&(R=!1),O===void 0&&(O=!1),H===void 0&&(H=""),V===void 0&&(V=pC),Q===void 0&&(Q=1800*1e3),re===void 0&&(re=new hC({loggerProvider:w})),Re===void 0&&(Re={ipAddress:!0,language:!0,platform:!0}),ye===void 0&&(ye="fetch"),me===void 0&&(me=!1),q===void 0&&(q=!0),ge===void 0&&(ge=!0),he===void 0&&(he=0);var ve=this,Kt;ve=t.call(this,{apiKey:n,storageProvider:re,transportProvider:mC(ye)})||this,ve.apiKey=n,ve.appVersion=r,ve.cookieOptions=s,ve.defaultTracking=l,ve.autocapture=c,ve.flushIntervalMillis=p,ve.flushMaxRetries=m,ve.flushQueueSize=g,ve.identityStorage=v,ve.ingestionMetadata=b,ve.instanceName=S,ve.loggerProvider=w,ve.logLevel=T,ve.minIdLength=_,ve.offline=R,ve.partnerId=D,ve.plan=I,ve.serverUrl=H,ve.serverZone=V,ve.sessionTimeout=Q,ve.storageProvider=re,ve.trackingOptions=Re,ve.transport=ye,ve.useBatch=me,ve.fetchRemoteConfig=q,ve.networkTrackingOptions=ae,ve.identify=Se,ve.enableDiagnostics=ge,ve.diagnosticsSampleRate=he,ve.diagnosticsClient=Le,ve.remoteConfig=rt,ve.version=my,ve._optOut=!1,ve._cookieStorage=i,ve.deviceId=d,ve.lastEventId=k,ve.lastEventTime=E,ve.optOut=O,ve.sessionId=K,ve.pageCounter=ue,ve.userId=te,ve.debugLogsEnabled=Ce,ve.loggerProvider.enable(Ce?Cr.Debug:ve.logLevel),ve.networkTrackingOptions=ae,ve.identify=Se,ve.enableDiagnostics=ge,ve.diagnosticsSampleRate=he,ve.diagnosticsClient=Le;var Ct=(Kt=rt?.fetchRemoteConfig)!==null&&Kt!==void 0?Kt:q;return ve.remoteConfig=ve.remoteConfig||{},ve.remoteConfig.fetchRemoteConfig=Ct,ve.fetchRemoteConfig=Ct,ve}return Object.defineProperty(e.prototype,"cookieStorage",{get:function(){return this._cookieStorage},set:function(n){this._cookieStorage!==n&&(this._cookieStorage=n,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"deviceId",{get:function(){return this._deviceId},set:function(n){this._deviceId!==n&&(this._deviceId=n,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userId",{get:function(){return this._userId},set:function(n){this._userId!==n&&(this._userId=n,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sessionId",{get:function(){return this._sessionId},set:function(n){this._sessionId!==n&&(this._sessionId=n,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"optOut",{get:function(){return this._optOut},set:function(n){this._optOut!==n&&(this._optOut=n,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastEventTime",{get:function(){return this._lastEventTime},set:function(n){this._lastEventTime!==n&&(this._lastEventTime=n,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastEventId",{get:function(){return this._lastEventId},set:function(n){this._lastEventId!==n&&(this._lastEventId=n,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageCounter",{get:function(){return this._pageCounter},set:function(n){this._pageCounter!==n&&(this._pageCounter=n,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"debugLogsEnabled",{set:function(n){this._debugLogsEnabled!==n&&(this._debugLogsEnabled=n,this.updateStorage())},enumerable:!1,configurable:!0}),e.prototype.updateStorage=function(){var n={deviceId:this._deviceId,userId:this._userId,sessionId:this._sessionId,optOut:this._optOut,lastEventTime:this._lastEventTime,lastEventId:this._lastEventId,pageCounter:this._pageCounter,debugLogsEnabled:this._debugLogsEnabled,cookieDomain:void 0};this.cookieStorage instanceof fh&&(n.cookieDomain=this.cookieStorage.options.domain),this.cookieStorage.set(Gw(this.apiKey),n)},e})(L3),j4=function(t,e,n,r,i){return e===void 0&&(e={}),le(void 0,void 0,void 0,function(){var s,l,c,d,p,m,g,v,b,S,k,E,w,T,_,R,O,D,I,H,V,K,Q,re,Re,ye,me,q,te,ue,Ce,ae,Se,ge,he,Le,rt,ve,Kt,Ct,Ae,ie,He,We,Je,Ke,gt,Yt,Bi,jr;return se(this,function(Xn){switch(Xn.label){case 0:return s=e.identityStorage||ph,K={},s===ph?[3,1]:(c="",[3,5]);case 1:return(re=(Q=e.cookieOptions)===null||Q===void 0?void 0:Q.domain)!==null&&re!==void 0?(d=re,[3,4]):[3,2];case 2:return[4,N4()];case 3:d=Xn.sent(),Xn.label=4;case 4:c=d,Xn.label=5;case 5:return l=de.apply(void 0,[(K.domain=c,K.expiration=365,K.sameSite="Lax",K.secure=!1,K.upgrade=!0,K),e.cookieOptions]),p={duplicateResolverFn:function(Jr){var pi=Kw(Jr);if(!pi)return!1;var Ns=JSON.parse(pi);return Yw(Ns.cookieDomain,l.domain)},diagnosticsClient:r},m=O4(e.identityStorage,l,p),[4,x4(t,m,(ye=(Re=e.cookieOptions)===null||Re===void 0?void 0:Re.upgrade)!==null&&ye!==void 0?ye:!0)];case 6:return g=Xn.sent(),[4,m.get(Gw(t))];case 7:return v=Xn.sent(),b=dh(),S=b.ampTimestamp?Number(b.ampTimestamp):void 0,k=S?Date.now()<S:!0,E=(Ce=(ue=(te=(me=e.deviceId)!==null&&me!==void 0?me:k?(q=b.ampDeviceId)!==null&&q!==void 0?q:b.deviceId:void 0)!==null&&te!==void 0?te:v?.deviceId)!==null&&ue!==void 0?ue:g.deviceId)!==null&&Ce!==void 0?Ce:Ii(),w=(ae=v?.lastEventId)!==null&&ae!==void 0?ae:g.lastEventId,T=(Se=v?.lastEventTime)!==null&&Se!==void 0?Se:g.lastEventTime,_=(he=(ge=e.optOut)!==null&&ge!==void 0?ge:v?.optOut)!==null&&he!==void 0?he:g.optOut,R=(Le=v?.sessionId)!==null&&Le!==void 0?Le:g.sessionId,O=(ve=(rt=e.userId)!==null&&rt!==void 0?rt:v?.userId)!==null&&ve!==void 0?ve:g.userId,n.previousSessionDeviceId=(Kt=v?.deviceId)!==null&&Kt!==void 0?Kt:g.deviceId,n.previousSessionUserId=(Ct=v?.userId)!==null&&Ct!==void 0?Ct:g.userId,D={ipAddress:(ie=(Ae=e.trackingOptions)===null||Ae===void 0?void 0:Ae.ipAddress)!==null&&ie!==void 0?ie:!0,language:(We=(He=e.trackingOptions)===null||He===void 0?void 0:He.language)!==null&&We!==void 0?We:!0,platform:(Ke=(Je=e.trackingOptions)===null||Je===void 0?void 0:Je.platform)!==null&&Ke!==void 0?Ke:!0},I=v?.pageCounter,H=v?.debugLogsEnabled,e.autocapture!==void 0&&(e.defaultTracking=e.autocapture),V=new M4(t,e.appVersion,m,l,e.defaultTracking,e.autocapture,E,e.flushIntervalMillis,e.flushMaxRetries,e.flushQueueSize,s,e.ingestionMetadata,e.instanceName,w,T,(gt=i?.loggerProvider)!==null&&gt!==void 0?gt:e.loggerProvider,e.logLevel,e.minIdLength,e.offline,_,e.partnerId,e.plan,e.serverUrl,(Yt=i?.serverZone)!==null&&Yt!==void 0?Yt:e.serverZone,R,e.sessionTimeout,e.storageProvider,D,e.transport,e.useBatch,e.fetchRemoteConfig,O,I,H,e.networkTrackingOptions,e.identify,(Bi=i?.enableDiagnostics)!==null&&Bi!==void 0?Bi:e.enableDiagnostics,(jr=i?.diagnosticsSampleRate)!==null&&jr!==void 0?jr:n._diagnosticsSampleRate,r,e.remoteConfig),[4,V.storageProvider.isEnabled()];case 8:return Xn.sent()||(V.loggerProvider.warn("Storage provider ".concat(V.storageProvider.constructor.name," is not enabled. Falling back to MemoryStorage.")),V.storageProvider=new iy),[2,V]}})})},O4=function(t,e,n){switch(t===void 0&&(t=ph),e===void 0&&(e={}),t){case"localStorage":return new hC;case"sessionStorage":return new v4;case"none":return new iy;case"cookie":default:return new fh(de(de({},e),{expirationDays:e.expiration}),n)}},R4=function(t){var e,n;return t===void 0&&(t={}),((e=t.remoteConfig)===null||e===void 0?void 0:e.fetchRemoteConfig)===!0?!0:!(((n=t.remoteConfig)===null||n===void 0?void 0:n.fetchRemoteConfig)===!1||t.fetchRemoteConfig===!1)},mC=function(t){var e=typeof t=="object"?t.type:t,n=typeof t=="object"?t.headers:void 0;return e==="xhr"?new y4(n):e==="beacon"?new b4:new vR(n)},N4=function(t){return le(void 0,void 0,void 0,function(){var e,n,r,i,s,l,l,c,d,p,m;return se(this,function(g){switch(g.label){case 0:return[4,new fh().isEnabled()];case 1:if(!g.sent()||typeof location>"u"||!location.hostname)return[2,""];for(e=location.hostname,n=e.split("."),r=[],i=Ii(),s="AMP_TLDTEST_".concat(i.substring(0,8)),l=n.length-2;l>=0;--l)r.push(n.slice(l).join("."));l=0,g.label=2;case 2:return l<r.length?(c=r[l],d={domain:"."+c,expirationDays:.003},p=new fh(d),[4,p.set(s,1)]):[3,7];case 3:return g.sent(),[4,p.get(s)];case 4:return m=g.sent(),m?[4,p.remove(s)]:[3,6];case 5:return g.sent(),[2,"."+c];case 6:return l++,[3,2];case 7:return[2,""]}})})},D4=function(t){var e={};for(var n in t){var r=t[n];r&&(e[n]=r)}return e},z4="[Amplitude] Page Viewed",L4=function(t){t===void 0&&(t={});var e,n=Pt(),r=void 0,i=!1,s,l=t.trackOn,c=t.trackHistoryChanges,d=t.eventType,p=d===void 0?z4:d,m=function(w){var T=w;try{T=decodeURI(w)}catch(_){r?.error("Malformed URI sequence: ",_)}return T},g=function(){return le(void 0,void 0,void 0,function(){var w,T,_;return se(this,function(R){switch(R.label){case 0:return w=m(typeof location<"u"&&location.href||""),_={event_type:p},T=[{}],[4,I4()];case 1:return[2,(_.event_properties=de.apply(void 0,[de.apply(void 0,T.concat([R.sent()])),{"[Amplitude] Page Domain":typeof location<"u"&&location.hostname||"","[Amplitude] Page Location":w,"[Amplitude] Page Path":typeof location<"u"&&m(location.pathname)||"","[Amplitude] Page Title":cy(ly),"[Amplitude] Page URL":w.split("?")[0]}]),_)]}})})},v=function(){return typeof l>"u"||typeof l=="function"&&l()},b=typeof location<"u"?location.href:null,S=function(){return le(void 0,void 0,void 0,function(){var w,T,_,R;return se(this,function(O){switch(O.label){case 0:return w=location.href,T=B4(c,w,b||"")&&v(),b=w,T?(r?.log("Tracking page view event"),e!=null?[3,1]:[3,3]):[3,4];case 1:return R=(_=e).track,[4,g()];case 2:R.apply(_,[O.sent()]),O.label=3;case 3:O.label=4;case 4:return[2]}})})},k=function(){S()},E={name:"@amplitude/plugin-page-view-tracking-browser",type:"enrichment",setup:function(w,T){return le(void 0,void 0,void 0,function(){var _,R;return se(this,function(O){switch(O.label){case 0:return e=T,s=w,r=w.loggerProvider,r.log("Installing @amplitude/plugin-page-view-tracking-browser"),i=!0,n&&(n.addEventListener("popstate",k),n.history.pushState=new Proxy(n.history.pushState,{apply:function(D,I,H){var V=qe(H,3),K=V[0],Q=V[1],re=V[2];D.apply(I,[K,Q,re]),i&&S()}})),v()?(r.log("Tracking page view event"),R=(_=e).track,[4,g()]):[3,2];case 1:R.apply(_,[O.sent()]),O.label=2;case 2:return[2]}})})},execute:function(w){return le(void 0,void 0,void 0,function(){var T;return se(this,function(_){switch(_.label){case 0:return l==="attribution"&&P4(w)?(r?.log("Enriching campaign event to page view event with campaign parameters"),[4,g()]):[3,2];case 1:T=_.sent(),w.event_type=T.event_type,w.event_properties=de(de({},w.event_properties),T.event_properties),_.label=2;case 2:return s&&w.event_type===p&&(s.pageCounter=s.pageCounter?s.pageCounter+1:1,w.event_properties=de(de({},w.event_properties),{"[Amplitude] Page Counter":s.pageCounter})),[2,w]}})})},teardown:function(){return le(void 0,void 0,void 0,function(){return se(this,function(w){return n&&(n.removeEventListener("popstate",k),i=!1),[2]})})}};return E},I4=function(){return le(void 0,void 0,void 0,function(){var t;return se(this,function(e){switch(e.label){case 0:return t=D4,[4,new nC().parse()];case 1:return[2,t.apply(void 0,[e.sent()])]}})})},P4=function(t){if(t.event_type==="$identify"&&t.user_properties){var e=t.user_properties,n=e[hs.SET]||{},r=e[hs.UNSET]||{},i=_t(_t([],qe(Object.keys(n)),!1),qe(Object.keys(r)),!1);return Object.keys(hp).every(function(s){return i.includes(s)})}return!1},B4=function(t,e,n){switch(t){case"pathOnly":{if(n=="")return!0;var r=new URL(e),i=new URL(n),s=r.origin+r.pathname,l=i.origin+i.pathname;return s!==l}default:return e!==n}},U4=function(){var t,e=[],n=function(m,g,v){m.addEventListener(g,v),e.push({element:m,type:g,handler:v})},r=function(){e.forEach(function(m){var g=m.element,v=m.type,b=m.handler;g?.removeEventListener(v,b)}),e=[]},i,s="@amplitude/plugin-form-interaction-tracking-browser",l="enrichment",c=function(m,g){return le(void 0,void 0,void 0,function(){var v,b;return se(this,function(S){return i=h4(m),v=function(){if(!g){m.loggerProvider.warn("Form interaction tracking requires a later version of @amplitude/analytics-browser. Form interaction events are not tracked.");return}if(!(typeof document>"u")){var k=function(w){var T=!1;n(w,"change",function(){var _,R=L2(w);T||g.track(N2,(_={},_[Yg]=vl(w.id),_[Xg]=vl(w.name),_[Jg]=R,_)),T=!0}),n(w,"submit",function(_){var R,O,D=L2(w);if(T||g.track(N2,(R={},R[Yg]=vl(w.id),R[Xg]=vl(w.name),R[Jg]=D,R)),T=!0,i?.shouldTrackSubmit!==void 0)if(typeof i.shouldTrackSubmit=="function"&&typeof SubmitEvent<"u"&&_ instanceof SubmitEvent)try{var I=i.shouldTrackSubmit(_);if(!I)return}catch{m.loggerProvider.warn("shouldTrackSubmit callback threw an error, proceeding with tracking.")}else m.loggerProvider.warn("shouldTrackSubmit is ignored because it is not a function or event is not a SubmitEvent.");g.track(E4,(O={},O[Yg]=vl(w.id),O[Xg]=vl(w.name),O[Jg]=D,O)),T=!1})},E=Array.from(document.getElementsByTagName("form"));E.forEach(k),typeof MutationObserver<"u"&&(t=new MutationObserver(function(w){w.forEach(function(T){T.addedNodes.forEach(function(_){_.nodeName==="FORM"&&k(_),"querySelectorAll"in _&&typeof _.querySelectorAll=="function"&&Array.from(_.querySelectorAll("form")).map(k)})})}),t.observe(document.body,{subtree:!0,childList:!0}))}},document.readyState==="complete"?v():(b=Pt(),b?b.addEventListener("load",v):m.loggerProvider.debug("Form interaction tracking is not installed because global is undefined.")),[2]})})},d=function(m){return le(void 0,void 0,void 0,function(){return se(this,function(g){return[2,m]})})},p=function(){return le(void 0,void 0,void 0,function(){return se(this,function(m){return t?.disconnect(),r(),[2]})})};return{name:s,type:l,setup:c,execute:d,teardown:p}},vl=function(t){if(typeof t=="string")return t},L2=function(t){var e=t.getAttribute("action");try{e=new URL(encodeURI(e??""),window.location.href).href}catch{}return e},H4=function(){var t,e=[],n=function(p,m,g){p.addEventListener(m,g),e.push({element:p,type:m,handler:g})},r=function(){e.forEach(function(p){var m=p.element,g=p.type,v=p.handler;m?.removeEventListener(g,v)}),e=[]},i="@amplitude/plugin-file-download-tracking-browser",s="enrichment",l=function(p,m){return le(void 0,void 0,void 0,function(){var g,v;return se(this,function(b){return g=function(){if(!m){p.loggerProvider.warn("File download tracking requires a later version of @amplitude/analytics-browser. File download events are not tracked.");return}if(!(typeof document>"u")){var S=function(w){var T;try{T=new URL(w.href,window.location.href)}catch{return}var _=k.exec(T.href),R=_?.[1];R&&n(w,"click",function(){var O;R&&m.track(k4,(O={},O[w4]=R,O[C4]=T.pathname,O[T4]=w.id,O[_4]=w.text,O[A4]=w.href,O))})},k=/\.(pdf|xlsx?|docx?|txt|rtf|csv|exe|key|pp(s|t|tx)|7z|pkg|rar|gz|zip|avi|mov|mp4|mpe?g|wmv|midi?|mp3|wav|wma)(\?.+)?$/,E=Array.from(document.getElementsByTagName("a"));E.forEach(S),typeof MutationObserver<"u"&&(t=new MutationObserver(function(w){w.forEach(function(T){T.addedNodes.forEach(function(_){_.nodeName==="A"&&S(_),"querySelectorAll"in _&&typeof _.querySelectorAll=="function"&&Array.from(_.querySelectorAll("a")).map(S)})})}),t.observe(document.body,{subtree:!0,childList:!0}))}},document.readyState==="complete"?g():(v=Pt(),v?v.addEventListener("load",g):p.loggerProvider.debug("File download tracking is not installed because global is undefined.")),[2]})})},c=function(p){return le(void 0,void 0,void 0,function(){return se(this,function(m){return[2,p]})})},d=function(){return le(void 0,void 0,void 0,function(){return se(this,function(p){return t?.disconnect(),r(),[2]})})};return{name:i,type:s,setup:l,execute:c,teardown:d}},I2=!1,q4=function(t){if(!(I2||t.defaultTracking!==void 0)){var e=`\`options.defaultTracking\` is set to undefined. This implicitly configures your Amplitude instance to track Page Views, Sessions, File Downloads, and Form Interactions. You can suppress this warning by explicitly setting a value to \`options.defaultTracking\`. The value must either be a boolean, to enable and disable all default events, or an object, for advanced configuration. For example:

amplitude.init(<YOUR_API_KEY>, {
  defaultTracking: true,
});

Visit https://www.docs.developers.amplitude.com/data/sdks/browser-2/#tracking-default-events for more details.`;t.loggerProvider.warn(e),I2=!0}},F4=function(){var t="@amplitude/plugin-network-checker-browser",e="before",n=Pt(),r=[],i=function(d,p){n?.addEventListener&&(n?.addEventListener(d,p),r.push({type:d,handler:p}))},s=function(){r.forEach(function(d){var p=d.type,m=d.handler;n?.removeEventListener(p,m)}),r=[]},l=function(d,p){return le(void 0,void 0,void 0,function(){return se(this,function(m){return typeof navigator>"u"?(d.loggerProvider.debug("Network connectivity checker plugin is disabled because navigator is not available."),d.offline=!1,[2]):(d.offline=!navigator.onLine,i("online",function(){d.loggerProvider.debug("Network connectivity changed to online."),d.offline=!1,setTimeout(function(){p.flush()},d.flushIntervalMillis)}),i("offline",function(){d.loggerProvider.debug("Network connectivity changed to offline."),d.offline=!0}),[2])})})},c=function(){return le(void 0,void 0,void 0,function(){return se(this,function(d){return s(),[2]})})};return{name:t,type:e,setup:l,teardown:c}};function gC(t){var e,n,r,i,s,l,c,d,p,m,g;if(!(typeof t!="object"||t===null)&&!Array.isArray(t)){var v=Object.keys(t);try{for(var b=ct(v),S=b.next();!S.done;S=b.next()){var k=S.value;try{var E=t[k];typeof E?.enabled=="boolean"&&(E.enabled?(delete E.enabled,Object.keys(E).length===0&&(t[k]=!0)):t[k]=!1),gC(E)}catch{}}}catch(Q){e={error:Q}}finally{try{S&&!S.done&&(n=b.return)&&n.call(b)}finally{if(e)throw e.error}}try{if(!((p=(d=(c=t.autocapture)===null||c===void 0?void 0:c.networkTracking)===null||d===void 0?void 0:d.captureRules)===null||p===void 0)&&p.length)try{for(var w=ct(t.autocapture.networkTracking.captureRules),T=w.next();!T.done;T=w.next()){var _=T.value;try{for(var R=(s=void 0,ct(["responseHeaders","requestHeaders"])),O=R.next();!O.done;O=R.next()){var D=O.value,I=(m=_[D])!==null&&m!==void 0?m:{},H=I.captureSafeHeaders,V=I.allowlist;if(!(!H&&!V)){if(V!==void 0&&!Array.isArray(V)){delete _[D];continue}_[D]=_t(_t([],qe(H?ch:[]),!1),qe(V??[]),!1)}}}catch(Q){s={error:Q}}finally{try{O&&!O.done&&(l=R.return)&&l.call(R)}finally{if(s)throw s.error}}}}catch(Q){r={error:Q}}finally{try{T&&!T.done&&(i=w.return)&&i.call(w)}finally{if(r)throw r.error}}}catch{}var K=(g=t.autocapture)===null||g===void 0?void 0:g.frustrationInteractions;K&&(K.rageClick&&(K.rageClicks=K.rageClick,delete K.rageClick),K.deadClick&&(K.deadClicks=K.deadClick,delete K.deadClick))}}function P2(t,e,n){var r,i,s=[];try{for(var l=ct(e??[]),c=l.next();!c.done;c=l.next()){var d=c.value;try{s.push(new RegExp(d))}catch(p){n.loggerProvider.warn("Invalid regex pattern: ".concat(d),p)}}}catch(p){r={error:p}}finally{try{c&&!c.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}return t.concat(s)}function V4(t,e){var n,r,i,s,l,c,d;if(t){gC(t);try{e.loggerProvider.debug("Update browser config with remote configuration:",JSON.stringify(t));var p=t;if(p&&"autocapture"in p){if(typeof p.autocapture=="boolean"&&(e.autocapture=p.autocapture),typeof p.autocapture=="object"&&p.autocapture!==null){var m=de({},p.autocapture);if(e.autocapture===void 0&&(e.autocapture=p.autocapture),typeof p.autocapture.elementInteractions=="object"&&p.autocapture.elementInteractions!==null&&(!((i=p.autocapture.elementInteractions.pageUrlAllowlistRegex)===null||i===void 0)&&i.length)){m.elementInteractions=de({},p.autocapture.elementInteractions);var g=m.elementInteractions,v=(s=g.pageUrlAllowlist)!==null&&s!==void 0?s:[],b=p.autocapture.elementInteractions.pageUrlAllowlistRegex;g.pageUrlAllowlist=P2(v,b,e),delete g.pageUrlAllowlistRegex}if(typeof p.autocapture.networkTracking=="object"&&p.autocapture.networkTracking!==null&&(!((l=p.autocapture.networkTracking.captureRules)===null||l===void 0)&&l.length)){m.networkTracking=de({},p.autocapture.networkTracking);var S=m.networkTracking,k=(c=S.captureRules)!==null&&c!==void 0?c:[];try{for(var E=ct(k),w=E.next();!w.done;w=E.next()){var T=w.value;T.urls=P2((d=T.urls)!==null&&d!==void 0?d:[],T.urlsRegex,e),delete T.urlsRegex}}catch(_){n={error:_}}finally{try{w&&!w.done&&(r=E.return)&&r.call(E)}finally{if(n)throw n.error}}}typeof e.autocapture=="boolean"&&(e.autocapture=de({attribution:e.autocapture,fileDownloads:e.autocapture,formInteractions:e.autocapture,pageViews:e.autocapture,sessions:e.autocapture,elementInteractions:e.autocapture,webVitals:e.autocapture,frustrationInteractions:e.autocapture},m)),typeof e.autocapture=="object"&&(e.autocapture=de(de({},e.autocapture),m))}e.defaultTracking=e.autocapture}e.loggerProvider.debug("Browser config after remote config update:",JSON.stringify(e))}catch(_){e.loggerProvider.error("Failed to apply remote configuration because of error: ",_)}}}var vC="1.19.0",W4="@amplitude/plugin-autocapture-browser",$4="@amplitude/plugin-frustration-browser",yC="[Amplitude] Element Clicked",G4="[Amplitude] Dead Click",K4="[Amplitude] Rage Click",Y4="[Amplitude] Error Click",X4="[Amplitude] Element Changed",J4="[Amplitude] Element ID",Q4="[Amplitude] Element Class",B2="[Amplitude] Element Tag",U2="[Amplitude] Element Text",Z4="[Amplitude] Element Hierarchy",eN="[Amplitude] Element Href",tN="[Amplitude] Element Position Left",nN="[Amplitude] Element Position Top",rN="[Amplitude] Element Aria Label",iN="[Amplitude] Element Attributes",oN="[Amplitude] Element Parent Label",H2="[Amplitude] Page URL",sN="[Amplitude] Page Title",aN="[Amplitude] Viewport Height",lN="[Amplitude] Viewport Width",Yf="https://app.amplitude.com",cN="https://app.eu.amplitude.com",uN="https://apps.stag2.amplitude.com",dN={US:Yf,EU:cN,STAGING:uN},fN="https://cdn.amplitude.com/libs/visual-tagging-selector-1.0.0-alpha.js.gz",hN="amp-visual-tagging-selector-highlight",bC="data-amp-mask-attributes",pN=25,xC=128,mN=["input","select","textarea"],SC=function(t,e){var n,r=(n=window?.getComputedStyle)===null||n===void 0?void 0:n.call(window,t);return r?.getPropertyValue("cursor")==="pointer"&&e==="click"},zl=function(t,e,n){return n===void 0&&(n=!1),function(r,i){var s,l,c=t.pageUrlAllowlist,d=t.pageUrlExcludelist,p=t.shouldTrackEventResolver,m=(l=(s=i?.tagName)===null||s===void 0?void 0:s.toLowerCase)===null||l===void 0?void 0:l.call(s);if(!m)return!1;if(p)return p(r,i);if(!sv(window.location.href,c)||d&&d.length>0&&sv(window.location.href,d))return!1;var g=String(i?.getAttribute("type"))||"";if(typeof g=="string")switch(g.toLowerCase()){case"hidden":return!1;case"password":return!1}var v=SC(i,r);if(n&&v)return!0;if(e){var b=e.some(function(S){var k;return!!(!((k=i?.matches)===null||k===void 0)&&k.call(i,S))});if(!b)return!1}switch(m){case"input":case"select":case"textarea":return r==="change"||r==="click";default:return v?!0:r==="click"}}},gN=function(t){var e,n,r,i=(n=(e=t?.tagName)===null||e===void 0?void 0:e.toLowerCase)===null||n===void 0?void 0:n.call(e),s=t instanceof HTMLElement?((r=t.getAttribute("contenteditable"))===null||r===void 0?void 0:r.toLowerCase())==="true":!1;return!mN.includes(i)&&!s},vN=function(t){return t?t.split(",").map(function(e){return e.trim()}).filter(function(e){return e.length>0&&e!=="id"&&e!=="class"}):[]},yN=function(t,e){return Object.entries(t).reduce(function(n,r){var i=qe(r,2),s=i[0],l=i[1];if(s.startsWith(e)){var c=s.replace(e,"");c&&(n[c]=l||"")}return n},{})},bN=function(t){return t==null||typeof t=="object"&&Object.keys(t).length===0||typeof t=="string"&&t.trim().length===0},q2=function(t){return Object.keys(t).reduce(function(e,n){var r=t[n];return bN(r)||(e[n]=r),e},{})},gy=function(t,e){return t?e.some(function(n){var r;return(r=t?.matches)===null||r===void 0?void 0:r.call(t,n)})?t:gy(t?.parentElement,e):null},xN=function(t){return new Promise(function(e,n){var r;try{var i=document.createElement("script");i.type="text/javascript",i.async=!0,i.src=t,i.addEventListener("load",function(){e({status:!0})},{once:!0}),i.addEventListener("error",function(){n({status:!1,message:"Failed to load the script ".concat(t)})}),(r=document.head)===null||r===void 0||r.appendChild(i)}catch(s){n(s)}})};function SN(){return"".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9))}var Ku=function(t){return!(t.event.target===null||!t.closestTrackedAncestor)};function EN(t){return t.type==="click"||t.type==="change"}var mh;(function(t){t[t.LEFT_OR_TOUCH_CONTACT=0]="LEFT_OR_TOUCH_CONTACT",t[t.MIDDLE=1]="MIDDLE",t[t.RIGHT=2]="RIGHT"})(mh||(mh={}));var kN=new Set(["id","class","style","value","onclick","onchange","oninput","onblur","onsubmit","onfocus","onkeydown","onkeyup","onkeypress","data-reactid","data-react-checksum","data-reactroot",bC,Su]),wN=["type"],CN=["svg","path","g"],TN=["password","hidden"];function _N(t,e){var n,r,i,s,l,c;if(t===null)return null;var d=String(t.tagName).toLowerCase(),p={tag:d},m=Array.from((s=(i=t.parentElement)===null||i===void 0?void 0:i.children)!==null&&s!==void 0?s:[]);m.length&&(p.index=m.indexOf(t),p.indexOfType=m.filter(function(O){return O.tagName===t.tagName}).indexOf(t));var g=(c=(l=t.previousElementSibling)===null||l===void 0?void 0:l.tagName)===null||c===void 0?void 0:c.toLowerCase();g&&(p.prevSib=String(g));var v=t.getAttribute("id");v&&(p.id=String(v));var b=Array.from(t.classList);b.length&&(p.classes=b);var S={},k=Array.from(t.attributes),E=k.filter(function(O){return!kN.has(O.name)}),w=!gN(t);if(!TN.includes(String(t.getAttribute("type")))&&!CN.includes(d))try{for(var T=ct(E),_=T.next();!_.done;_=T.next()){var R=_.value;if(!(w&&!wN.includes(R.name))){if(e.has(R.name)){S[R.name]=ms;continue}S[R.name]=String(R.value).substring(0,xC)}}}catch(O){n={error:O}}finally{try{_&&!_.done&&(r=T.return)&&r.call(T)}finally{if(n)throw n.error}}return Object.keys(S).length&&(p.attrs=S),p}function AN(t){var e=[];if(!t)return e;e.push(t);for(var n=t.parentElement;n&&n.tagName!=="HTML";)e.push(n),n=n.parentElement;return e}var MN=function(t,e){try{if(t.sourceType==="DOM_ELEMENT"){var n=document.documentElement;return t.scope&&e&&(n=e.closest(t.scope)),n&&t.selector?n.querySelector(t.selector):n}}catch{return}},jN=function(t,e,n){t.forEach(function(r){if(typeof r!="string"&&r.actionType==="ATTACH_EVENT_PROPERTY"){var i=n.extractDataFromDataSource(r.dataSource,e.closestTrackedAncestor);e.targetElementProperties[r.destinationKey]=i}})},vy=(function(){function t(e,n){var r,i,s=this,l;this.replaceSensitiveString=function(v){return ly(v,s.additionalMaskTextPatterns)},this.getHierarchy=function(v){var b,S,k,E,w=performance.now(),T=[];if(!v)return[];for(var _=AN(v),R=new Map,O=_.length-1;O>=0;O--){var D=_[O];if(D){var I=vN(D.getAttribute(bC)),H=O===_.length-1?[]:(k=R.get(_[O+1]))!==null&&k!==void 0?k:new Set,V=new Set(_t(_t([],qe(H),!1),qe(I),!1));R.set(D,V)}}T=_.map(function(me){var q;return _N(me,(q=R.get(me))!==null&&q!==void 0?q:new Set)});var K=function(me){me?.attrs&&Object.entries(me.attrs).forEach(function(q){var te=qe(q,2),ue=te[0],Ce=te[1];me.attrs&&(me.attrs[ue]=s.replaceSensitiveString(Ce))})};try{for(var Q=ct(T),re=Q.next();!re.done;re=Q.next()){var Re=re.value;K(Re)}}catch(me){b={error:me}}finally{try{re&&!re.done&&(S=Q.return)&&S.call(Q)}finally{if(b)throw b.error}}var ye=performance.now();return(E=s.diagnosticsClient)===null||E===void 0||E.recordHistogram("autocapturePlugin.getHierarchy",ye-w),T},this.getNearestLabel=function(v){var b=v.parentElement;if(!b)return"";var S;try{S=b.querySelector(":scope>span,h1,h2,h3,h4,h5,h6")}catch{S=null}return S?s.getText(S):s.getNearestLabel(b)},this.getEventProperties=function(v,b,S){var k,E,w,T,_=(w=(E=b?.tagName)===null||E===void 0?void 0:E.toLowerCase)===null||w===void 0?void 0:w.call(E),R=typeof b.getBoundingClientRect=="function"?b.getBoundingClientRect():{left:null,top:null},O=s.getHierarchy(b),D=(T=O[0])===null||T===void 0?void 0:T.attrs,I=s.getNearestLabel(b),H=yN(D??{},S),V=(k={},k[Z4]=O,k[B2]=_,k[U2]=s.getText(b),k[tN]=R.left==null?null:Math.round(R.left),k[nN]=R.top==null?null:Math.round(R.top),k[iN]=H,k[oN]=I,k[H2]=ps(window.location.href.split("?")[0]),k[sN]=cy(s.replaceSensitiveString),k[aN]=window.innerHeight,k[lN]=window.innerWidth,k);if(V[J4]=b.getAttribute("id")||"",V[Q4]=b.getAttribute("class"),V[rN]=D?.["aria-label"],_==="a"&&v==="click"&&b instanceof HTMLAnchorElement){var K=b.href.substring(0,xC);V[eN]=s.replaceSensitiveString(K)}return q2(V)},this.addTypeAndTimestamp=function(v,b){return{event:v,timestamp:Date.now(),type:b}},this.addAdditionalEventProperties=function(v,b,S,k,E){E===void 0&&(E=!1);var w=s.addTypeAndTimestamp(v,b);if(EN(w)&&w.event.target!==null){if(E){var T=SC(w.event.target,w.type);if(T)return w.closestTrackedAncestor=w.event.target,w.targetElementProperties=s.getEventProperties(w.type,w.closestTrackedAncestor,k),w}var _=gy(w.event.target,S);return _&&(w.closestTrackedAncestor=_,w.targetElementProperties=s.getEventProperties(w.type,_,k)),w}return w},this.extractDataFromDataSource=function(v,b){if(v.sourceType==="DOM_ELEMENT"){var S=MN(v,b);return S?v.elementExtractType==="TEXT"?s.getText(S):v.elementExtractType==="ATTRIBUTE"&&v.attribute?S.getAttribute(v.attribute):void 0:void 0}},this.getText=function(v){var b=v.closest("[".concat(Su,"]"))!==null;if(b)return ms;var S="";if(!v.querySelector("[".concat(Su,"], [contenteditable]")))S=v.innerText||"";else{var k=v.cloneNode(!0);k.querySelectorAll("[".concat(Su,"], [contenteditable]")).forEach(function(E){E.innerText=ms}),S=k.innerText||""}return s.replaceSensitiveString(S.substring(0,255)).replace(/\s+/g," ").trim()},this.getEventTagProps=function(v){var b,S,k;if(!v)return{};var E=(k=(S=v?.tagName)===null||S===void 0?void 0:S.toLowerCase)===null||k===void 0?void 0:k.call(S),w=(b={},b[B2]=E,b[U2]=s.getText(v),b[H2]=window.location.href.split("?")[0],b);return q2(w)},this.diagnosticsClient=n?.diagnosticsClient;var c=(l=e.maskTextRegex)!==null&&l!==void 0?l:[],d=[];try{for(var p=ct(c),m=p.next();!m.done;m=p.next()){var g=m.value;if(d.length>=pN)break;if(g instanceof RegExp)d.push(g);else if("pattern"in g&&typeof g.pattern=="string")try{d.push(new RegExp(g.pattern,"i"))}catch{}}}catch(v){r={error:v}}finally{try{m&&!m.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}this.additionalMaskTextPatterns=d}return t})(),ON=(function(){function t(e){var n=e===void 0?{}:e,r=n.origin,i=r===void 0?Yf:r,s=this;this.endpoint=Yf,this.requestCallbacks={},this.onSelect=function(l){s.notify({action:"element-selected",data:l})},this.onTrack=function(l,c){l==="selector-mode-changed"?s.notify({action:"track-selector-mode-changed",data:c}):l==="selector-moved"&&s.notify({action:"track-selector-moved",data:c})},this.endpoint=i}return t.prototype.notify=function(e){var n,r,i,s;(r=(n=this.logger)===null||n===void 0?void 0:n.debug)===null||r===void 0||r.call(n,"Message sent: ",JSON.stringify(e)),(s=(i=window.opener)===null||i===void 0?void 0:i.postMessage)===null||s===void 0||s.call(i,e,this.endpoint)},t.prototype.sendRequest=function(e,n,r){var i=this;r===void 0&&(r={timeout:15e3});var s=SN(),l={id:s,action:e,args:n},c=new Promise(function(d,p){i.requestCallbacks[s]={resolve:d,reject:p},i.notify(l),r?.timeout>0&&setTimeout(function(){p(new Error("".concat(e," timed out (id: ").concat(s,")"))),delete i.requestCallbacks[s]},r.timeout)});return c},t.prototype.handleResponse=function(e){var n;if(!this.requestCallbacks[e.id]){(n=this.logger)===null||n===void 0||n.warn("No callback found for request id: ".concat(e.id));return}this.requestCallbacks[e.id].resolve(e.responseData),delete this.requestCallbacks[e.id]},t.prototype.setup=function(e){var n=this,r=e===void 0?{dataExtractor:new vy({})}:e,i=r.logger,s=r.endpoint,l=r.isElementSelectable,c=r.cssSelectorAllowlist,d=r.actionClickAllowlist,p=r.dataExtractor;this.logger=i,s&&this.endpoint===Yf&&(this.endpoint=s);var m=null;window.addEventListener("message",function(g){var v,b,S,k,E;if((b=(v=n.logger)===null||v===void 0?void 0:v.debug)===null||b===void 0||b.call(v,"Message received: ",JSON.stringify(g)),n.endpoint===g.origin){var w=g?.data,T=w?.action;if(T)if("id"in w)(k=(S=n.logger)===null||S===void 0?void 0:S.debug)===null||k===void 0||k.call(S,"Received Response to previous request: ",JSON.stringify(g)),n.handleResponse(w);else if(T==="ping")n.notify({action:"pong"});else if(T==="initialize-visual-tagging-selector"){var _=w?.data;xN(fN).then(function(){var R;m=(R=window?.amplitudeVisualTaggingSelector)===null||R===void 0?void 0:R.call(window,{getEventTagProps:p.getEventTagProps,isElementSelectable:function(O){return l?l(_?.actionType||"click",O):!0},onTrack:n.onTrack,onSelect:n.onSelect,visualHighlightClass:hN,messenger:n,cssSelectorAllowlist:c,actionClickAllowlist:d,extractDataFromDataSource:p.extractDataFromDataSource,dataExtractor:p,diagnostics:{autocapture:{version:vC}}}),n.notify({action:"selector-loaded"})}).catch(function(){var R;(R=n.logger)===null||R===void 0||R.warn("Failed to initialize visual tagging selector")})}else T==="close-visual-tagging-selector"&&((E=m?.close)===null||E===void 0||E.call(m))}}),this.notify({action:"page-loaded"})},t})();function RN(t){var e=t.amplitude,n=t.allObservables,r=t.shouldTrackEvent,i=t.evaluateTriggers,s=n.clickObservable,l=s.filter(Ku).filter(function(d){return r("click",d.closestTrackedAncestor)}).map(function(d){return i(d)}),c=l;return c.subscribe(function(d){e?.track(yC,d.targetElementProperties)})}function NN(t){var e=t.amplitude,n=t.allObservables,r=t.getEventProperties,i=t.shouldTrackEvent,s=t.evaluateTriggers,l=n.changeObservable,c=l.filter(Ku).filter(function(d){return i("change",d.closestTrackedAncestor)}).map(function(d){return s(d)});return c.subscribe(function(d){e?.track(X4,r("change",d.closestTrackedAncestor))})}function DN(t){var e=t.amplitude,n=t.allObservables,r=t.options,i=t.getEventProperties,s=t.shouldTrackEvent,l=t.shouldTrackActionClick,c=n.clickObservable,d=n.mutationObservable,p=n.navigateObservable,m=c.filter(function(E){return!s("click",E.closestTrackedAncestor)}).map(function(E){var w=gy(E.event.target,r.actionClickAllowlist);return E.closestTrackedAncestor=w,E.closestTrackedAncestor!==null&&(E.targetElementProperties=i(E.type,E.closestTrackedAncestor)),E}).filter(Ku).filter(function(E){return l("click",E.closestTrackedAncestor)}),g=p?ba(d,p):d,v=ba(m,g),b=null,S=null,k=py(v,function(E){if(b&&(clearTimeout(b),b=null),E.type==="click")return S=E,b=setTimeout(function(){b=null,S=null},500),Promise.resolve(null);if(S){var w=S;return S=null,Promise.resolve(w)}return Promise.resolve(null)});return k.subscribe(function(E){E&&e?.track(yC,i("click",E.closestTrackedAncestor))})}var Ul=Pt(),EC=function(){return new Kn(function(t){var e=new MutationObserver(function(n){t.next(n)});return document.body&&e.observe(document.body,{childList:!0,attributes:!0,characterData:!0,subtree:!0}),function(){return e.disconnect()}})},kC=function(t){return t===void 0&&(t="click"),new Kn(function(e){var n=function(r){e.next(r)};return Ul.document.addEventListener(t,n,{capture:!0}),function(){Ul.document.removeEventListener(t,n,{capture:!0})}})},zN=function(){return new Kn(function(t){var e=function(n){for(var r=[],i=1;i<arguments.length;i++)r[i-1]=arguments[i];var s=void 0;Array.isArray(r[0])&&typeof r[0][0]=="string"&&(s=r[0][0]),t.next({kind:"console",message:s})};return C2.addListener("error",e),function(){C2.removeListener(e)}})},LN=function(){return new Kn(function(t){var e=function(n){var r={kind:"error"};n.error instanceof Error?r=de(de({},r),{message:n.error.message,stack:n.error.stack,filename:n.filename,lineNumber:n.lineno,columnNumber:n.colno}):typeof n.error=="string"&&(r.message=n.error),t.next(r)};return Ul.addEventListener("error",e),function(){Ul.removeEventListener("error",e)}})},IN=function(){return new Kn(function(t){var e=function(n){var r={kind:"unhandledrejection"};n.reason instanceof Error?(r.message=n.reason.message,r.stack=n.reason.stack):typeof n.reason=="string"&&(r.message=n.reason),t.next(r)};return Ul.addEventListener("unhandledrejection",e),function(){Ul.removeEventListener("unhandledrejection",e)}})},PN=function(){var t=ba(LN(),IN());return ba(t,zN())},BN=function(t,e){try{if(e.subprop_key==="[Amplitude] Element Text")return e.subprop_op==="is"&&e.subprop_value.includes(t.targetElementProperties["[Amplitude] Element Text"]);if(e.subprop_key==="[Amplitude] Element Hierarchy")return e.subprop_op==="autotrack css match"&&!!t.closestTrackedAncestor.closest(e.subprop_value.toString())}catch(n){return console.error("Error matching event to filter",n),!1}return!1},uv={"[Amplitude] Element Clicked":"click","[Amplitude] Element Changed":"change"},F2=function(t){var e,n,r,i,s=Object.values(uv).reduce(function(b,S){return b[S]=new Set,b},{});if(!t)return s;try{for(var l=ct(t),c=l.next();!c.done;c=l.next()){var d=c.value;try{try{for(var p=(r=void 0,ct(d.definition)),m=p.next();!m.done;m=p.next()){var g=m.value,v=uv[g.event_type];v&&s[v].add(d.id)}}catch(b){r={error:b}}finally{try{m&&!m.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}}catch(b){console.warn("Skipping Labeled Event due to malformed definition",d?.id,b)}}}catch(b){e={error:b}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return s},V2=function(t){var e,n,r,i,s=new Map;try{for(var l=ct(t),c=l.next();!c.done;c=l.next()){var d=c.value;try{for(var p=(r=void 0,ct(d.conditions)),m=p.next();!m.done;m=p.next()){var g=m.value;if(g.type==="LABELED_EVENT"){var v=g.match.eventId,b=s.get(v);b||(b=[],s.set(v,b)),b.push(d)}}}catch(S){r={error:S}}finally{try{m&&!m.done&&(i=p.return)&&i.call(p)}finally{if(r)throw r.error}}}}catch(S){e={error:S}}finally{try{c&&!c.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return s},UN=function(t,e){return e.filter(function(n){return n.definition.some(function(r){return uv[r.event_type]===t.type&&r.filters.every(function(i){return BN(t,i)})})})},HN=function(t,e){var n,r,i,s,l=new Set;try{for(var c=ct(t),d=c.next();!d.done;d=c.next()){var p=d.value,m=e.get(p.id);if(m)try{for(var g=(i=void 0,ct(m)),v=g.next();!v.done;v=g.next()){var b=v.value;l.add(b)}}catch(S){i={error:S}}finally{try{v&&!v.done&&(s=g.return)&&s.call(g)}finally{if(i)throw i.error}}}}catch(S){n={error:S}}finally{try{d&&!d.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}return Array.from(l)},qN=(function(){function t(e,n,r,i){this.groupedLabeledEvents=e,this.labeledEventToTriggerMap=n,this.dataExtractor=r,this.options=i}return t.prototype.evaluate=function(e){var n,r,i=this.options.pageActions;if(!i)return e;var s=UN(e,Array.from(this.groupedLabeledEvents[e.type]).map(function(m){return i.labeledEvents[m]})),l=HN(s,this.labeledEventToTriggerMap);try{for(var c=ct(l),d=c.next();!d.done;d=c.next()){var p=d.value;jN(p.actions,e,this.dataExtractor)}}catch(m){n={error:m}}finally{try{d&&!d.done&&(r=c.return)&&r.call(c)}finally{if(n)throw n.error}}return e},t.prototype.update=function(e,n,r){this.groupedLabeledEvents=e,this.labeledEventToTriggerMap=n,this.options=r},t})(),FN=function(t,e,n,r){return new qN(t,e,n,r)},li;(function(t){t.ClickObservable="clickObservable",t.ChangeObservable="changeObservable",t.NavigateObservable="navigateObservable",t.MutationObservable="mutationObservable",t.BrowserErrorObservable="browserErrorObservable",t.SelectionObservable="selectionObservable"})(li||(li={}));var VN=function(t,e){var n,r,i,s,l,c,d,p;t===void 0&&(t={}),e?.diagnosticsClient.setTag("plugin.autocapture.version",vC);var m=t.dataAttributePrefix,g=m===void 0?Xw:m,v=t.visualTaggingOptions,b=v===void 0?{enabled:!0,messenger:new ON}:v;t.cssSelectorAllowlist=(n=t.cssSelectorAllowlist)!==null&&n!==void 0?n:jR,t.actionClickAllowlist=(r=t.actionClickAllowlist)!==null&&r!==void 0?r:OR,t.debounceTime=(i=t.debounceTime)!==null&&i!==void 0?i:0,t.pageUrlExcludelist=(s=t.pageUrlExcludelist)===null||s===void 0?void 0:s.reduce(function(K,Q){if(typeof Q=="string"&&K.push(Q),Q instanceof RegExp&&K.push(Q),typeof Q=="object"&&Q!==null&&"pattern"in Q)try{K.push(new RegExp(Q.pattern))}catch(re){return console.warn("Invalid regex pattern: ".concat(Q.pattern),re),K}return K},[]);var S=W4,k="enrichment",E=[],w=new vy(t,e),T=function(){var K,Q=vo(kC().map(function(me){return w.addAdditionalEventProperties(me,"click",t.cssSelectorAllowlist,g)})),re=vo(new Kn(function(me){var q,te=function(ue){var Ce=w.addAdditionalEventProperties(ue,"change",t.cssSelectorAllowlist,g);me.next(Ce)};return(q=Pt())===null||q===void 0||q.document.addEventListener("change",te,{capture:!0}),function(){var ue;return(ue=Pt())===null||ue===void 0?void 0:ue.document.removeEventListener("change",te)}})),Re;window.navigation&&(Re=vo(new Kn(function(me){var q=function(te){var ue=w.addAdditionalEventProperties(te,"navigate",t.cssSelectorAllowlist,g);me.next(ue)};return window.navigation.addEventListener("navigate",q),function(){window.navigation.removeEventListener("navigate",q)}})));var ye=vo(EC().map(function(me){return w.addAdditionalEventProperties(me,"mutation",t.cssSelectorAllowlist,g)}));return K={},K[li.ChangeObservable]=re,K[li.ClickObservable]=Q,K[li.MutationObservable]=ye,K[li.NavigateObservable]=Re,K},_=F2(Object.values((c=(l=t.pageActions)===null||l===void 0?void 0:l.labeledEvents)!==null&&c!==void 0?c:{})),R=V2((p=(d=t.pageActions)===null||d===void 0?void 0:d.triggers)!==null&&p!==void 0?p:[]),O=FN(_,R,w,t),D=function(K){var Q,re;K&&(t.pageActions=de(de({},t.pageActions),K),_=F2(Object.values((Q=t.pageActions.labeledEvents)!==null&&Q!==void 0?Q:{})),R=V2((re=t.pageActions.triggers)!==null&&re!==void 0?re:[]),O.update(_,R,t))},I=function(K,Q){return le(void 0,void 0,void 0,function(){var re,Re,ye,me,q,te,ue,Ce,ae,Se;return se(this,function(ge){return typeof document>"u"?[2]:(K.fetchRemoteConfig&&(K.remoteConfigClient?K.remoteConfigClient.subscribe("configs.analyticsSDK.pageActions","all",function(he){D(he)}):K.loggerProvider.debug("Remote config client is not provided, skipping remote config fetch")),re=zl(t,t.cssSelectorAllowlist),Re=zl(t,t.actionClickAllowlist),ye=T(),me=RN({allObservables:ye,amplitude:Q,shouldTrackEvent:re,evaluateTriggers:O.evaluate.bind(O)}),E.push(me),q=NN({allObservables:ye,getEventProperties:function(){for(var he=[],Le=0;Le<arguments.length;Le++)he[Le]=arguments[Le];return w.getEventProperties.apply(w,_t(_t([],qe(he),!1),[g],!1))},amplitude:Q,shouldTrackEvent:re,evaluateTriggers:O.evaluate.bind(O)}),E.push(q),te=DN({allObservables:ye,options:t,getEventProperties:function(){for(var he=[],Le=0;Le<arguments.length;Le++)he[Le]=arguments[Le];return w.getEventProperties.apply(w,_t(_t([],qe(he),!1),[g],!1))},amplitude:Q,shouldTrackEvent:re,shouldTrackActionClick:Re}),te&&E.push(te),(ae=K?.loggerProvider)===null||ae===void 0||ae.log("".concat(S," has been successfully added.")),window.opener&&b.enabled&&(ue=t.cssSelectorAllowlist,Ce=t.actionClickAllowlist,(Se=b.messenger)===null||Se===void 0||Se.setup(de(de({dataExtractor:w,logger:K?.loggerProvider},K?.serverZone&&{endpoint:dN[K.serverZone]}),{isElementSelectable:zl(t,_t(_t([],qe(ue),!1),qe(Ce),!1)),cssSelectorAllowlist:ue,actionClickAllowlist:Ce}))),[2])})})},H=function(K){return le(void 0,void 0,void 0,function(){return se(this,function(Q){return[2,K]})})},V=function(){return le(void 0,void 0,void 0,function(){var K,Q,re,Re,ye;return se(this,function(me){try{for(K=ct(E),Q=K.next();!Q.done;Q=K.next())re=Q.value,re.unsubscribe()}catch(q){Re={error:q}}finally{try{Q&&!Q.done&&(ye=K.return)&&ye.call(K)}finally{if(Re)throw Re.error}}return[2]})})};return{name:S,type:k,setup:I,execute:H,teardown:V}},WN=3e3,$N=["mutation","navigate"];function GN(t){var e=t.amplitude,n=t.allObservables,r=t.getEventProperties,i=t.shouldTrackDeadClick,s=n.clickObservable,l=n.mutationObservable,c=n.navigateObservable,d=s.filter(function(b){return Ku(b)&&i("click",b.closestTrackedAncestor)&&b.event.target instanceof Element&&b.event.target.closest('a[target="_blank"]')===null&&b.event.button===mh.LEFT_OR_TOUCH_CONTACT}),p=c?ba(l,c):l,m=ba(d,p),g=null,v=py(m,function(b){return g&&$N.includes(b.type)?(clearTimeout(g),g=null,Promise.resolve(null)):b.type==="click"?g?Promise.resolve(null):new Promise(function(S){g=setTimeout(function(){S(b),g=null},WN)}):Promise.resolve(null)});return v.subscribe(function(b){if(b){var S={"[Amplitude] X":b.event.clientX,"[Amplitude] Y":b.event.clientY};e.track(G4,de(de({},r("click",b.closestTrackedAncestor)),S),{time:b.timestamp})}})}var wC=IR,CC=LR,W2=PR;function $2(t,e){var n,r,i,s,l=e.event,c=l.pageX,d=l.pageY;t.yMin=Math.min((n=t.yMin)!==null&&n!==void 0?n:d,d),t.yMax=Math.max((r=t.yMax)!==null&&r!==void 0?r:d,d),t.xMin=Math.min((i=t.xMin)!==null&&i!==void 0?i:c,c),t.xMax=Math.max((s=t.xMax)!==null&&s!==void 0?s:c,c),t.isOutOfBounds=t.yMax-t.yMin>W2||t.xMax-t.xMin>W2}function G2(t){if(t.length===0)return null;var e=t[0],n=t[t.length-1],r=de({"[Amplitude] Begin Time":new Date(e.timestamp).toISOString(),"[Amplitude] End Time":new Date(n.timestamp).toISOString(),"[Amplitude] Duration":n.timestamp-e.timestamp,"[Amplitude] Clicks":t.map(function(i){return{X:i.event.pageX,Y:i.event.pageY,Time:i.timestamp}}),"[Amplitude] Click Count":t.length},e.targetElementProperties);return{rageClickEvent:r,time:e.timestamp}}function KN(t,e){var n=Math.max(0,t.length-wC+1),r=t[n];return e.timestamp-r.timestamp>=CC}function YN(t,e){return t.length>0&&t[t.length-1].closestTrackedAncestor!==e.closestTrackedAncestor}function XN(t){var e=this,n=t.amplitude,r=t.allObservables,i=t.shouldTrackRageClick,s=r.clickObservable,l=r.selectionObservable,c=[],d={},p=null;function m(S){c=[],d={},S&&($2(d,S),c.push(S))}var g=py(s.filter(function(S){return i("click",S.closestTrackedAncestor)}),function(S){return le(e,void 0,void 0,function(){var k;return se(this,function(E){return $2(d,S),k=null,c.length===0||YN(c,S)||KN(c,S)||d.isOutOfBounds?(p&&(k=G2(c)),m(S)):c.push(S),p&&(clearTimeout(p.timerId),p.resolve(k),p=null),c.length>=wC?[2,new Promise(function(w){p={resolve:w,timerId:setTimeout(function(){w(G2(c))},CC)}})]:[2,null]})})}),v=l?.subscribe(function(){m()}),b=g.subscribe(function(S){S!==null&&n.track(K4,S.rageClickEvent,{time:S.time})});return{unsubscribe:function(){b.unsubscribe(),v?.unsubscribe()}}}var JN=2e3;function QN(t){var e=t.amplitude,n=t.allObservables,r=t.shouldTrackErrorClick,i=n.clickObservable,s=n.browserErrorObservable,l=i.filter(function(m){return Ku(m)&&r("click",m.closestTrackedAncestor)&&m.event.target instanceof Element&&m.event.target.closest('a[target="_blank"]')===null&&m.event.button===mh.LEFT_OR_TOUCH_CONTACT}),c=null,d=null,p=function(){c!==null&&(clearTimeout(c),c=null),d=null};return ba(l,s).subscribe(function(m){var g;if(m.type==="click"){p(),d=m,c=setTimeout(p,JN);return}m.type==="error"&&d&&(e.track(Y4,de((g={},g["[Amplitude] Kind"]=m.event.kind,g["[Amplitude] Message"]=m.event.message,g["[Amplitude] Stack"]=m.event.stack,g["[Amplitude] Filename"]=m.event.filename,g["[Amplitude] Line Number"]=m.event.lineNumber,g["[Amplitude] Column Number"]=m.event.columnNumber,g),d.targetElementProperties)),p())})}function Qg(t,e,n,r){if(!r)return[];var i=t[e];return typeof i=="object"&&i!==null&&"cssSelectorAllowlist"in i&&Array.isArray(i.cssSelectorAllowlist)?i.cssSelectorAllowlist:n}var ZN=function(t){var e;t===void 0&&(t={});var n=$4,r="enrichment",i=[],s=t.errorClicks!==!1;t.errorClicks||(s=!1);var l=t.deadClicks!==!1&&t.deadClicks!==null,c=t.rageClicks!==!1&&t.rageClicks!==null,d=Qg(t,"rageClicks",zR,c),p=Qg(t,"deadClicks",NR,l),m=Qg(t,"errorClicks",DR,s),g=(e=t.dataAttributePrefix)!==null&&e!==void 0?e:Xw,v=new vy(t),b=_t([],qe(new Set(_t(_t(_t([],qe(d),!1),qe(p),!1),qe(m),!1))),!1),S=function(){var T,_=vo(kC("pointerdown").map(function(V){return v.addAdditionalEventProperties(V,"click",b,g,!0)})),R=vo(PN().map(function(V){return v.addTypeAndTimestamp(V,"error")})),O=vo(EC().map(function(V){return v.addAdditionalEventProperties(V,"mutation",b,g)})),D;if(window.navigation){var I=new Kn(function(V){var K=function(Q){V.next(de(de({},Q),{type:"navigate"}))};return window.navigation.addEventListener("navigate",K),function(){window.navigation.removeEventListener("navigate",K)}});D=vo(I.map(function(V){return v.addAdditionalEventProperties(V,"navigate",b,g)}))}var H=vo(new Kn(function(V){var K=function(){var Q=document.activeElement;if(Q&&(Q.tagName==="TEXTAREA"||Q.tagName==="INPUT")){var re=void 0,Re=void 0;try{if(re=Q.selectionStart,Re=Q.selectionEnd,re===Re)return}catch{return}return V.next()}var ye=window.getSelection();if(!(!ye||ye.isCollapsed))return V.next()};return window.document.addEventListener("selectionchange",K),function(){window.document.removeEventListener("selectionchange",K)}}));return T={},T[li.ClickObservable]=_,T[li.MutationObservable]=O,T[li.NavigateObservable]=D,T[li.BrowserErrorObservable]=R,T[li.SelectionObservable]=H,T},k=function(T,_){return le(void 0,void 0,void 0,function(){var R,O,D,I,H,V,K,Q;return se(this,function(re){return typeof document>"u"?[2]:(R=S(),c&&(O=zl(t,d),D=XN({allObservables:R,amplitude:_,shouldTrackRageClick:O}),i.push(D)),l&&(I=zl(t,p),H=GN({amplitude:_,allObservables:R,getEventProperties:function(Re,ye){return v.getEventProperties(Re,ye,g)},shouldTrackDeadClick:I}),i.push(H)),s&&(V=zl(t,m),K=QN({amplitude:_,allObservables:R,shouldTrackErrorClick:V}),i.push(K)),(Q=T?.loggerProvider)===null||Q===void 0||Q.log("".concat(n," has been successfully added.")),[2])})})},E=function(T){return le(void 0,void 0,void 0,function(){return se(this,function(_){return[2,T]})})},w=function(){return le(void 0,void 0,void 0,function(){var T,_,R,O,D;return se(this,function(I){try{for(T=ct(i),_=T.next();!_.done;_=T.next())R=_.value,R.unsubscribe()}catch(H){O={error:H}}finally{try{_&&!_.done&&(D=T.return)&&D.call(T)}finally{if(O)throw O.error}}return[2]})})};return{name:n,type:r,setup:k,execute:E,teardown:w}},eD="@amplitude/plugin-network-capture-browser",TC="[Amplitude] Network Request",_C="500-599";function Xf(t,e){var n=e.replace(/[-[\]{}()+?.,\\^$|#\s]/g,"\\$&"),r="^"+n.replace(/\*/g,".*")+"$",i=new RegExp(r);return i.test(t)}function AC(t,e){var n,r,i=e.split(",");try{for(var s=ct(i),l=s.next();!l.done;l=s.next()){var c=l.value,d=qe(c.split("-").map(Number),2),p=d[0],m=d[1];if(t===p&&m===void 0||t>=p&&t<=m)return!0}}catch(g){n={error:g}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return!1}function tD(t,e,n,r,i){if(!(t.hosts&&!t.hosts.find(function(l){return Xf(e,l)}))&&!(r&&t.urls&&!sv(r,t.urls))&&!(i&&t.methods&&!t.methods.find(function(l){return i.toLowerCase()===l.toLowerCase()||l==="*"}))){if(n||n===0){var s=t.statusCodeRange||_C;if(!AC(n,s))return!1}return!0}}function MC(t){var e;if(t)try{var n=(e=Pt())===null||e===void 0?void 0:e.location.href,r=new URL(t,n),i=r.searchParams.toString(),s=r.hash.replace("#",""),l=r.href,c=r.host;r.hash="",r.search="";var d=r.href;return{query:i,fragment:s,href:l,hrefWithoutQueryOrHash:d,host:c}}catch{return}}function nD(t,e){if(t.includes("amplitude.com"))try{var n=e.body;if(typeof n!="string")return!1;var r=JSON.parse(n),i=r.events;if(i.find(function(s){return s.event_type===TC}))return!0}catch{}return!1}function K2(t){if(typeof t!="object"||t===null){if(t)return _t([],qe(ch),!1);if(t===void 0){var e=void 0;return e}return}if(t.length!==0)return t}function Y2(t){var e,n;return!(!((e=t?.allowlist)===null||e===void 0)&&e.length)&&!(!((n=t?.blocklist)===null||n===void 0)&&n.length)}function rD(t,e){var n;e===void 0&&(e={});var r=MC(t.url);if(!r)return!1;var i=r.host;if(e.ignoreAmplitudeRequests!==!1&&(Xf(i,"*.amplitude.com")||Xf(i,"amplitude.com"))||!((n=e.ignoreHosts)===null||n===void 0)&&n.find(function(l){return Xf(i,l)})||!e.captureRules&&t.status!==void 0&&!AC(t.status,_C))return!1;if(e.captureRules){var s;if(_t([],qe(e.captureRules),!1).reverse().find(function(l){if(s=tD(l,i,t.status,t.url,t.method),s){var c=K2(l.responseHeaders);if(t.responseWrapper&&c){var d=t.responseWrapper.headers(c);d&&(t.responseHeaders=d)}var p=K2(l.requestHeaders);if(t.requestWrapper&&p){var m=t.requestWrapper.headers(p);m&&(t.requestHeaders=m)}t.responseWrapper&&l.responseBody&&!Y2(l.responseBody)&&(t.responseBodyJson=t.responseWrapper.json(l.responseBody.allowlist,l.responseBody.blocklist)),t.requestWrapper&&l.requestBody&&!Y2(l.requestBody)&&(t.requestBodyJson=t.requestWrapper.json(l.requestBody.allowlist,l.requestBody.blocklist))}return s!==void 0}),!s)return!1}return!(t.requestWrapper&&nD(i,t.requestWrapper))}function iD(t,e,n,r){return le(this,void 0,void 0,function(){var i,s,l;return se(this,function(c){switch(c.label){case 0:return e.requestBodyJson||e.responseBodyJson?[4,Promise.all([e.requestBodyJson,e.responseBodyJson])]:[3,2];case 1:if(i=qe.apply(void 0,[c.sent(),2]),s=i[0],l=i[1],s)try{t["[Amplitude] Request Body"]=JSON.stringify(s)}catch(d){r?.debug("Failed to stringify request body",d)}if(l)try{t["[Amplitude] Response Body"]=JSON.stringify(l)}catch{r?.debug("Failed to stringify response body")}c.label=2;case 2:return n?.track(TC,t),[2]}})})}function oD(t){var e=t.allObservables,n=t.networkTrackingOptions,r=t.amplitude,i=t.loggerProvider,s=e.networkObservable,l=s.filter(function(c){return rD(c.event,n)});return l.subscribe(function(c){var d,p,m,g=c.event,v=MC(g.url);if(v){var b=(p=g.responseWrapper)===null||p===void 0?void 0:p.bodySize,S=(m=g.requestWrapper)===null||m===void 0?void 0:m.bodySize,k=(d={},d["[Amplitude] URL"]=v.hrefWithoutQueryOrHash,d["[Amplitude] URL Query"]=v.query,d["[Amplitude] URL Fragment"]=v.fragment,d["[Amplitude] Request Method"]=g.method,d["[Amplitude] Status Code"]=g.status,d["[Amplitude] Start Time"]=g.startTime,d["[Amplitude] Completion Time"]=g.endTime,d["[Amplitude] Duration"]=g.duration,d["[Amplitude] Request Body Size"]=S,d["[Amplitude] Response Body Size"]=b,d["[Amplitude] Request Type"]=g.type,d["[Amplitude] Request Headers"]=g.requestHeaders,d["[Amplitude] Response Headers"]=g.responseHeaders,d);iD(k,g,r,i)}})}var dv;(function(t){t.NetworkObservable="networkObservable"})(dv||(dv={}));var X2,sD=function(t){t===void 0&&(t={});var e=eD,n="enrichment",r,i=function(p,m){var g={event:p,timestamp:Date.now(),type:m};return g},s=function(){var p,m=new Kn(function(g){var v=new GR(function(b){var S=i(b,"network");g.next(S)});return M2.subscribe(v,r),function(){M2.unsubscribe(v)}});return p={},p[dv.NetworkObservable]=m,p},l=function(p,m){return le(void 0,void 0,void 0,function(){var g;return se(this,function(v){return typeof document>"u"?[2]:(g=s(),r=p?.loggerProvider,X2=oD({allObservables:g,networkTrackingOptions:t,amplitude:m,loggerProvider:r}),r?.log("".concat(e," has been successfully added.")),[2])})})},c=function(p){return le(void 0,void 0,void 0,function(){return se(this,function(m){return[2,p]})})},d=function(){return le(void 0,void 0,void 0,function(){return se(this,function(p){return X2.unsubscribe(),[2]})})};return{name:e,type:n,setup:l,execute:c,teardown:d}},aD="web-vitals-browser",lD="[Amplitude] Web Vitals";let jC=-1;const Jl=t=>{addEventListener("pageshow",(e=>{e.persisted&&(jC=e.timeStamp,t(e))}),!0)},Oi=(t,e,n,r)=>{let i,s;return l=>{e.value>=0&&(l||r)&&(s=e.value-(i??0),(s||i===void 0)&&(i=e.value,e.delta=s,e.rating=((c,d)=>c>d[1]?"poor":c>d[0]?"needs-improvement":"good")(e.value,n),t(e)))}},yy=t=>{requestAnimationFrame((()=>requestAnimationFrame((()=>t()))))},by=()=>{const t=performance.getEntriesByType("navigation")[0];if(t&&t.responseStart>0&&t.responseStart<performance.now())return t},Yu=()=>by()?.activationStart??0,Ri=(t,e=-1)=>{const n=by();let r="navigate";return jC>=0?r="back-forward-cache":n&&(document.prerendering||Yu()>0?r="prerender":document.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:t,value:e,rating:"good",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:r}},Zg=new WeakMap;function xy(t,e){return Zg.get(t)||Zg.set(t,new e),Zg.get(t)}class cD{t;i=0;o=[];h(e){if(e.hadRecentInput)return;const n=this.o[0],r=this.o.at(-1);this.i&&n&&r&&e.startTime-r.startTime<1e3&&e.startTime-n.startTime<5e3?(this.i+=e.value,this.o.push(e)):(this.i=e.value,this.o=[e]),this.t?.(e)}}const Xu=(t,e,n={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(t)){const r=new PerformanceObserver((i=>{Promise.resolve().then((()=>{e(i.getEntries())}))}));return r.observe({type:t,buffered:!0,...n}),r}}catch{}},Sy=t=>{let e=!1;return()=>{e||(t(),e=!0)}};let Ol=-1;const OC=new Set,J2=()=>document.visibilityState!=="hidden"||document.prerendering?1/0:0,fv=t=>{if(document.visibilityState==="hidden"){if(t.type==="visibilitychange")for(const e of OC)e();isFinite(Ol)||(Ol=t.type==="visibilitychange"?t.timeStamp:0,removeEventListener("prerenderingchange",fv,!0))}},mp=()=>{if(Ol<0){const t=Yu();Ol=(document.prerendering?void 0:globalThis.performance.getEntriesByType("visibility-state").filter((n=>n.name==="hidden"&&n.startTime>t))[0]?.startTime)??J2(),addEventListener("visibilitychange",fv,!0),addEventListener("prerenderingchange",fv,!0),Jl((()=>{setTimeout((()=>{Ol=J2()}))}))}return{get firstHiddenTime(){return Ol},onHidden(t){OC.add(t)}}},gp=t=>{document.prerendering?addEventListener("prerenderingchange",(()=>t()),!0):t()},Q2=[1800,3e3],RC=(t,e={})=>{gp((()=>{const n=mp();let r,i=Ri("FCP");const s=Xu("paint",(l=>{for(const c of l)c.name==="first-contentful-paint"&&(s.disconnect(),c.startTime<n.firstHiddenTime&&(i.value=Math.max(c.startTime-Yu(),0),i.entries.push(c),r(!0)))}));s&&(r=Oi(t,i,Q2,e.reportAllChanges),Jl((l=>{i=Ri("FCP"),r=Oi(t,i,Q2,e.reportAllChanges),yy((()=>{i.value=performance.now()-l.timeStamp,r(!0)}))})))}))},Z2=[.1,.25],uD=(t,e={})=>{const n=mp();RC(Sy((()=>{let r,i=Ri("CLS",0);const s=xy(e,cD),l=d=>{for(const p of d)s.h(p);s.i>i.value&&(i.value=s.i,i.entries=s.o,r())},c=Xu("layout-shift",l);c&&(r=Oi(t,i,Z2,e.reportAllChanges),n.onHidden((()=>{l(c.takeRecords()),r(!0)})),Jl((()=>{s.i=0,i=Ri("CLS",0),r=Oi(t,i,Z2,e.reportAllChanges),yy((()=>r()))})),setTimeout(r))})))};let NC=0,e0=1/0,kf=0;const dD=t=>{for(const e of t)e.interactionId&&(e0=Math.min(e0,e.interactionId),kf=Math.max(kf,e.interactionId),NC=kf?(kf-e0)/7+1:0)};let hv;const eE=()=>hv?NC:performance.interactionCount??0,fD=()=>{"interactionCount"in performance||hv||(hv=Xu("event",dD,{type:"event",buffered:!0,durationThreshold:0}))};let tE=0;class hD{u=[];l=new Map;m;p;v(){tE=eE(),this.u.length=0,this.l.clear()}L(){const e=Math.min(this.u.length-1,Math.floor((eE()-tE)/50));return this.u[e]}h(e){if(this.m?.(e),!e.interactionId&&e.entryType!=="first-input")return;const n=this.u.at(-1);let r=this.l.get(e.interactionId);if(r||this.u.length<10||e.duration>n.P){if(r?e.duration>r.P?(r.entries=[e],r.P=e.duration):e.duration===r.P&&e.startTime===r.entries[0].startTime&&r.entries.push(e):(r={id:e.interactionId,entries:[e],P:e.duration},this.l.set(r.id,r),this.u.push(r)),this.u.sort(((i,s)=>s.P-i.P)),this.u.length>10){const i=this.u.splice(10);for(const s of i)this.l.delete(s.id)}this.p?.(r)}}}const DC=t=>{const e=globalThis.requestIdleCallback||setTimeout;document.visibilityState==="hidden"?t():(t=Sy(t),addEventListener("visibilitychange",t,{once:!0,capture:!0}),e((()=>{t(),removeEventListener("visibilitychange",t,{capture:!0})})))},nE=[200,500],pD=(t,e={})=>{if(!globalThis.PerformanceEventTiming||!("interactionId"in PerformanceEventTiming.prototype))return;const n=mp();gp((()=>{fD();let r,i=Ri("INP");const s=xy(e,hD),l=d=>{DC((()=>{for(const m of d)s.h(m);const p=s.L();p&&p.P!==i.value&&(i.value=p.P,i.entries=p.entries,r())}))},c=Xu("event",l,{durationThreshold:e.durationThreshold??40});r=Oi(t,i,nE,e.reportAllChanges),c&&(c.observe({type:"first-input",buffered:!0}),n.onHidden((()=>{l(c.takeRecords()),r(!0)})),Jl((()=>{s.v(),i=Ri("INP"),r=Oi(t,i,nE,e.reportAllChanges)})))}))};class mD{m;h(e){this.m?.(e)}}const rE=[2500,4e3],gD=(t,e={})=>{gp((()=>{const n=mp();let r,i=Ri("LCP");const s=xy(e,mD),l=d=>{e.reportAllChanges||(d=d.slice(-1));for(const p of d)s.h(p),p.startTime<n.firstHiddenTime&&(i.value=Math.max(p.startTime-Yu(),0),i.entries=[p],r())},c=Xu("largest-contentful-paint",l);if(c){r=Oi(t,i,rE,e.reportAllChanges);const d=Sy((()=>{l(c.takeRecords()),c.disconnect(),r(!0)})),p=m=>{m.isTrusted&&(DC(d),removeEventListener(m.type,p,{capture:!0}))};for(const m of["keydown","click","visibilitychange"])addEventListener(m,p,{capture:!0});Jl((m=>{i=Ri("LCP"),r=Oi(t,i,rE,e.reportAllChanges),yy((()=>{i.value=performance.now()-m.timeStamp,r(!0)}))}))}}))},iE=[800,1800],pv=t=>{document.prerendering?gp((()=>pv(t))):document.readyState!=="complete"?addEventListener("load",(()=>pv(t)),!0):setTimeout(t)},vD=(t,e={})=>{let n=Ri("TTFB"),r=Oi(t,n,iE,e.reportAllChanges);pv((()=>{const i=by();i&&(n.value=Math.max(i.responseStart-Yu(),0),n.entries=[i],r(!0),Jl((()=>{n=Ri("TTFB",0),r=Oi(t,n,iE,e.reportAllChanges),r(!0)})))}))};function yD(t){var e,n=((e=t.entries[0])===null||e===void 0?void 0:e.startTime)||0;return performance.timeOrigin+n}function Jc(t){return{value:t.value,rating:t.rating,delta:t.delta,navigationType:t.navigationType,id:t.id,timestamp:Math.floor(yD(t)),navigationStart:Math.floor(performance.timeOrigin)}}var bD=function(){var t=null,e=Pt(),n=e?.document,r=e?.location,i=function(c,d){return le(void 0,void 0,void 0,function(){var p,m;return se(this,function(g){return n===void 0?[2]:(p=ps(r?.href||"",c.loggerProvider),m={"[Amplitude] Page Domain":r?.hostname||"","[Amplitude] Page Location":p,"[Amplitude] Page Path":ps(r?.pathname||"",c.loggerProvider),"[Amplitude] Page Title":typeof document<"u"&&document.title||"","[Amplitude] Page URL":ps(p.split("?")[0],c.loggerProvider)},gD(function(v){m["[Amplitude] LCP"]=Jc(v)}),RC(function(v){m["[Amplitude] FCP"]=Jc(v)}),pD(function(v){m["[Amplitude] INP"]=Jc(v)}),uD(function(v){m["[Amplitude] CLS"]=Jc(v)}),vD(function(v){m["[Amplitude] TTFB"]=Jc(v)}),t=function(){n.visibilityState==="hidden"&&t&&(d.track(lD,m),n.removeEventListener("visibilitychange",t),t=null)},n.addEventListener("visibilitychange",t),[2])})})},s=function(c){return le(void 0,void 0,void 0,function(){return se(this,function(d){return[2,c]})})},l=function(){return le(void 0,void 0,void 0,function(){return se(this,function(c){return t&&n?.removeEventListener("visibilitychange",t),[2]})})};return{name:aD,type:"enrichment",setup:i,execute:s,teardown:l}},oE=function(t){var e=t.split(".");return e.length<=2?t:e.slice(e.length-2,e.length).join(".")},xD=function(t){return Object.values(t).every(function(e){return!e})},SD=function(t,e,n,r,i){i===void 0&&(i=!0),t.referrer;var s=t.referring_domain,l=nh(t,["referrer","referring_domain"]),c=e||{};c.referrer;var d=c.referring_domain,p=nh(c,["referrer","referring_domain"]);if(ED(n.excludeReferrers,t.referring_domain))return r.debug("This is not a new campaign because ".concat(t.referring_domain," is in the exclude referrer list.")),!1;if(!i&&xD(t)&&e)return r.debug("This is not a new campaign because this is a direct traffic in the same session."),!1;var m=JSON.stringify(l)!==JSON.stringify(p),g=oE(s||"")!==oE(d||""),v=!e||m||g;return v?r.debug("This is a new campaign. An $identify event will be sent."):r.debug("This is not a new campaign because it's the same as the previous one."),v},ED=function(t,e){return t===void 0&&(t=[]),e===void 0&&(e=""),t.some(function(n){return n instanceof RegExp?n.test(e):n===e})},kD=function(t,e){var n=de(de({},hp),t),r=Object.entries(n).reduce(function(i,s){var l,c=qe(s,2),d=c[0],p=c[1];return i.setOnce("initial_".concat(d),(l=p??e.initialEmptyValue)!==null&&l!==void 0?l:"EMPTY"),p?i.set(d,p):i.unset(d)},new uh);return ny(r)},wD=function(t){var e=t;return e?(e.startsWith(".")&&(e=e.substring(1)),[new RegExp("".concat(e.replace(".","\\."),"$"))]):[]},CD=(function(){function t(e,n){var r;this.shouldTrackNewCampaign=!1,this.options=de({initialEmptyValue:"EMPTY",resetSessionOnNewCampaign:!1,excludeReferrers:wD((r=n.cookieOptions)===null||r===void 0?void 0:r.domain)},e),this.storage=n.cookieStorage,this.storageKey=S2(n.apiKey,"MKTG"),this.webExpStorageKey=S2(n.apiKey,"MKTG_ORIGINAL"),this.currentCampaign=hp,this.sessionTimeout=n.sessionTimeout,this.lastEventTime=n.lastEventTime,this.logger=n.loggerProvider,n.loggerProvider.log("Installing web attribution tracking.")}return t.prototype.init=function(){return le(this,void 0,void 0,function(){var e,n;return se(this,function(r){switch(r.label){case 0:return[4,this.fetchCampaign()];case 1:return n=qe.apply(void 0,[r.sent(),2]),this.currentCampaign=n[0],this.previousCampaign=n[1],e=this.lastEventTime?$w(this.sessionTimeout,this.lastEventTime):!0,SD(this.currentCampaign,this.previousCampaign,this.options,this.logger,e)?(this.shouldTrackNewCampaign=!0,[4,this.storage.set(this.storageKey,this.currentCampaign)]):[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}})})},t.prototype.fetchCampaign=function(){return le(this,void 0,void 0,function(){var e;return se(this,function(n){switch(n.label){case 0:return[4,this.storage.get(this.webExpStorageKey)];case 1:return e=n.sent(),e?[4,this.storage.remove(this.webExpStorageKey)]:[3,3];case 2:n.sent(),n.label=3;case 3:return[4,Promise.all([e||new nC().parse(),this.storage.get(this.storageKey)])];case 4:return[2,n.sent()]}})})},t.prototype.generateCampaignEvent=function(e){this.shouldTrackNewCampaign=!1;var n=kD(this.currentCampaign,this.options);return e&&(n.event_id=e),n},t.prototype.shouldSetSessionIdOnNewCampaign=function(){return this.shouldTrackNewCampaign&&!!this.options.resetSessionOnNewCampaign},t})(),wf="AMP_CURRENT_PAGE",Cf="AMP_PREVIOUS_PAGE",yl="AMP_URL_INFO",Eu;(function(t){t.Direct="direct",t.Internal="internal",t.External="external"})(Eu||(Eu={}));var TD=new Set([di.IDENTIFY,di.GROUP_IDENTIFY,di.REVENUE]),_D=function(t){var e={},n=e.internalDomains,r=n===void 0?[]:n,i=Pt(),s=void 0,l=!1,c=void 0,d=!1,p=!1,m=function(k){var E;try{var w=ps(k,c);E=new URL(w).hostname}catch(T){c?.error("Could not parse URL: ",T)}return E},g=function(k){var E=typeof location<"u"&&location.hostname||"",w=k?m(k):void 0;if(!w)return Eu.Direct;var T=r.some(function(R){return E.indexOf(R)!==-1}),_=r.some(function(R){return w.indexOf(R)!==-1});return E===w||_&&T?Eu.Internal:Eu.External},v=function(){return le(void 0,void 0,void 0,function(){var k,E,w,T,_;return se(this,function(R){switch(R.label){case 0:return s&&l?[4,s.get(yl)]:[3,3];case 1:return k=R.sent(),E=ps(typeof location<"u"&&location.href||""),w=k?.[wf]||"",T=void 0,E===w?T=k?.[Cf]||"":w?T=w:T=document.referrer||"",[4,s.set(yl,(_={},_[wf]=E,_[Cf]=T,_))];case 2:R.sent(),R.label=3;case 3:return[2]}})})},b=function(){v()},S={name:"@amplitude/plugin-page-url-enrichment-browser",type:"enrichment",setup:function(k,E){return le(void 0,void 0,void 0,function(){return se(this,function(w){switch(w.label){case 0:return c=k.loggerProvider,c.log("Installing @amplitude/plugin-page-url-enrichment-browser"),p=!0,i?(s=new oy(i.sessionStorage),[4,s.isEnabled()]):[3,2];case 1:l=w.sent(),i.addEventListener("popstate",b),d||(i.history.pushState=new Proxy(i.history.pushState,{apply:function(T,_,R){var O=qe(R,3),D=O[0],I=O[1],H=O[2];T.apply(_,[D,I,H]),p&&b()}}),i.history.replaceState=new Proxy(i.history.replaceState,{apply:function(T,_,R){var O=qe(R,3),D=O[0],I=O[1],H=O[2];T.apply(_,[D,I,H]),p&&b()}}),d=!0),w.label=2;case 2:return[2]}})})},execute:function(k){return le(void 0,void 0,void 0,function(){var E,w,T,_,R;return se(this,function(O){switch(O.label){case 0:return E=ps(typeof location<"u"&&location.href||""),s&&l?[4,s.get(yl)]:[3,5];case 1:return w=O.sent(),w?.[wf]?[3,3]:[4,s.set(yl,(R={},R[wf]=E,R[Cf]=document.referrer||"",R))];case 2:O.sent(),O.label=3;case 3:return[4,s.get(yl)];case 4:if(T=O.sent(),_="",T&&(_=T[Cf]||""),TD.has(k.event_type))return[2,k];k.event_properties=de(de({},k.event_properties||{}),{"[Amplitude] Page Domain":Qc(k,"[Amplitude] Page Domain",typeof location<"u"&&location.hostname||""),"[Amplitude] Page Location":Qc(k,"[Amplitude] Page Location",E),"[Amplitude] Page Path":Qc(k,"[Amplitude] Page Path",typeof location<"u"&&ps(location.pathname)||""),"[Amplitude] Page Title":Qc(k,"[Amplitude] Page Title",cy(ly)),"[Amplitude] Page URL":Qc(k,"[Amplitude] Page URL",E.split("?")[0]),"[Amplitude] Previous Page Location":_,"[Amplitude] Previous Page Type":g(_)}),O.label=5;case 5:return[2,k]}})})},teardown:function(){return le(void 0,void 0,void 0,function(){return se(this,function(k){switch(k.label){case 0:return i&&(i.removeEventListener("popstate",b),p=!1),s&&l?[4,s.set(yl,{})]:[3,2];case 1:k.sent(),k.label=2;case 2:return[2]}})})}};return S};function Qc(t,e,n){return t.event_properties||(t.event_properties={}),t.event_properties[e]===void 0?n:t.event_properties[e]}var AD=(function(t){As(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n._diagnosticsSampleRate=0,n}return e.prototype.init=function(n,r,i){n===void 0&&(n="");var s,l;return arguments.length>2?(s=r,l=i):typeof r=="string"?(s=r,l=void 0):(s=r?.userId,l=r),hr(this._init(de(de({},l),{userId:s,apiKey:n})))},e.prototype._init=function(n){var r,i,s,l,c,d,p;return le(this,void 0,void 0,function(){var m,g,v,b,S,k,E,w,T,_,R,O,D,I,H=this;return se(this,function(V){switch(V.label){case 0:return this.initializing?[2]:(this.initializing=!0,m=R4(n),g=(r=n.loggerProvider)!==null&&r!==void 0?r:new ry,v=(i=n.serverZone)!==null&&i!==void 0?i:pC,S=this._diagnosticsSampleRate,k=(s=n.enableDiagnostics)!==null&&s!==void 0?s:!0,m?(b=new wR(n.apiKey,g,v,(l=n.remoteConfig)===null||l===void 0?void 0:l.serverUrl),[4,new Promise(function(K){b?.subscribe("configs.diagnostics.browserSDK","all",function(Q,re,Re){if(g.debug("Diagnostics remote configuration received:",JSON.stringify({remoteConfig:Q,source:re,lastFetch:Re},null,2)),Q){var ye=Q.sampleRate;typeof ye=="number"&&!isNaN(ye)&&(S=ye);var me=Q.enabled;typeof me=="boolean"&&(k=me)}K()})})]):[3,2]);case 1:V.sent(),V.label=2;case 2:return E=new gR(n.apiKey,g,v,{enabled:k,sampleRate:S}),E.setTag("library","".concat(fC,"/").concat(my)),typeof navigator<"u"&&E.setTag("user_agent",navigator.userAgent),[4,j4(n.apiKey,n,this,E,{loggerProvider:g,serverZone:v,enableDiagnostics:k,diagnosticsSampleRate:S})];case 3:return w=V.sent(),m&&b?[4,new Promise(function(K){b?.subscribe("configs.analyticsSDK.browserSDK","all",function(Q,re,Re){w.loggerProvider.debug("Remote configuration received:",JSON.stringify({remoteConfig:Q,source:re,lastFetch:Re},null,2)),Q&&V4(Q,w),K()})})]:[3,5];case 4:V.sent(),V.label=5;case 5:return[4,t.prototype._init.call(this,w)];case 6:return V.sent(),this.logBrowserOptions(w),this.config.remoteConfigClient=b,sC(this.config.defaultTracking)?(T=f4(this.config),this.webAttribution=new CD(T,this.config),[4,this.webAttribution.init()]):[3,8];case 7:V.sent(),V.label=8;case 8:return _=dh(),R=_.ampTimestamp?Number(_.ampTimestamp):void 0,O=R?Date.now()<R:!0,D=O&&!Number.isNaN(Number(_.ampSessionId))?Number(_.ampSessionId):void 0,this.setSessionId((p=(d=(c=n.sessionId)!==null&&c!==void 0?c:D)!==null&&d!==void 0?d:this.config.sessionId)!==null&&p!==void 0?p:Date.now()),I=Du(n.instanceName),I.identityStore.setIdentity({userId:this.config.userId,deviceId:this.config.deviceId}),this.config.offline===MR?[3,10]:[4,this.add(F4()).promise];case 9:V.sent(),V.label=10;case 10:return[4,this.add(new H3({diagnosticsClient:E})).promise];case 11:return V.sent(),[4,this.add(new g4).promise];case 12:return V.sent(),[4,this.add(new Q3).promise];case 13:return V.sent(),q4(this.config),o4(this.config.defaultTracking)?(this.config.loggerProvider.debug("Adding file download tracking plugin"),[4,this.add(H4()).promise]):[3,15];case 14:V.sent(),V.label=15;case 15:return aC(this.config.defaultTracking)?(this.config.loggerProvider.debug("Adding form interaction plugin"),[4,this.add(U4()).promise]):[3,17];case 16:V.sent(),V.label=17;case 17:return lC(this.config.defaultTracking)?(this.config.loggerProvider.debug("Adding page view tracking plugin"),[4,this.add(L4(d4(this.config))).promise]):[3,19];case 18:V.sent(),V.label=19;case 19:return uC(this.config.autocapture)?(this.config.loggerProvider.debug("Adding user interactions plugin (autocapture plugin)"),[4,this.add(VN(l4(this.config),{diagnosticsClient:E})).promise]):[3,21];case 20:V.sent(),V.label=21;case 21:return dC(this.config.autocapture)?(this.config.loggerProvider.debug("Adding frustration interactions plugin"),[4,this.add(ZN(c4(this.config))).promise]):[3,23];case 22:V.sent(),V.label=23;case 23:return cC(this.config.autocapture)?(this.config.loggerProvider.debug("Adding network tracking plugin"),[4,this.add(sD(u4(this.config))).promise]):[3,25];case 24:V.sent(),V.label=25;case 25:return a4(this.config.autocapture)?(this.config.loggerProvider.debug("Adding web vitals plugin"),[4,this.add(bD()).promise]):[3,27];case 26:V.sent(),V.label=27;case 27:return s4(this.config.autocapture)?(this.config.loggerProvider.debug("Adding referrer page url plugin"),[4,this.add(_D()).promise]):[3,29];case 28:V.sent(),V.label=29;case 29:return this.initializing=!1,[4,this.runQueuedFunctions("dispatchQ")];case 30:return V.sent(),I.eventBridge.setEventReceiver(function(K){var Q=K.eventProperties||{},re=Q.time,Re=nh(Q,["time"]),ye=typeof re=="number"?{time:re}:void 0;H.track(K.eventType,Re,ye)}),[2]}})})},e.prototype.getUserId=function(){var n;return(n=this.config)===null||n===void 0?void 0:n.userId},e.prototype.setUserId=function(n){if(!this.config){this.q.push(this.setUserId.bind(this,n));return}this.config.loggerProvider.debug("function setUserId: ",n),(n!==this.config.userId||n===void 0)&&(this.config.userId=n,this.timeline.onIdentityChanged({userId:n}),X3(n,this.config.instanceName))},e.prototype.getDeviceId=function(){var n;return(n=this.config)===null||n===void 0?void 0:n.deviceId},e.prototype.setDeviceId=function(n){if(!this.config){this.q.push(this.setDeviceId.bind(this,n));return}this.config.loggerProvider.debug("function setDeviceId: ",n),n!==this.config.deviceId&&(this.config.deviceId=n,this.timeline.onIdentityChanged({deviceId:n}),J3(n,this.config.instanceName))},e.prototype.reset=function(){this.setDeviceId(Ii()),this.setUserId(void 0),this.timeline.onReset()},e.prototype.getIdentity=function(){var n,r;return{deviceId:(n=this.config)===null||n===void 0?void 0:n.deviceId,userId:(r=this.config)===null||r===void 0?void 0:r.userId,userProperties:this.userProperties}},e.prototype.getOptOut=function(){var n;return(n=this.config)===null||n===void 0?void 0:n.optOut},e.prototype.getSessionId=function(){var n;return(n=this.config)===null||n===void 0?void 0:n.sessionId},e.prototype.setSessionId=function(n){var r,i=[];if(!this.config)return this.q.push(this.setSessionId.bind(this,n)),hr(Promise.resolve());if(n===this.config.sessionId)return hr(Promise.resolve());this.config.loggerProvider.debug("function setSessionId: ",n);var s=this.getSessionId();s!==n&&this.timeline.onSessionIdChanged(n);var l=this.config.lastEventTime,c=(r=this.config.lastEventId)!==null&&r!==void 0?r:-1;this.config.sessionId=n,this.config.lastEventTime=void 0,this.config.pageCounter=0,R2(this.config.defaultTracking)&&(s&&l&&i.push(this.track(z2,void 0,{device_id:this.previousSessionDeviceId,event_id:++c,session_id:s,time:l+1,user_id:this.previousSessionUserId}).promise),this.config.lastEventTime=this.config.sessionId);var d=this.trackCampaignEventIfNeeded(++c,i);return this.config.identify&&i.push(this.track(ny(this.config.identify)).promise),R2(this.config.defaultTracking)&&i.push(this.track(D2,void 0,{event_id:d?++c:c,session_id:this.config.sessionId,time:this.config.lastEventTime}).promise),this.previousSessionDeviceId=this.config.deviceId,this.previousSessionUserId=this.config.userId,hr(Promise.all(i))},e.prototype.extendSession=function(){if(!this.config){this.q.push(this.extendSession.bind(this));return}this.config.lastEventTime=Date.now()},e.prototype.setTransport=function(n){if(!this.config){this.q.push(this.setTransport.bind(this,n));return}this.config.transportProvider=mC(n)},e.prototype.identify=function(n,r){if(Gg(n)){var i=n._q;n._q=[],n=$g(new uh,i)}return r?.user_id&&this.setUserId(r.user_id),r?.device_id&&this.setDeviceId(r.device_id),t.prototype.identify.call(this,n,r)},e.prototype.groupIdentify=function(n,r,i,s){if(Gg(i)){var l=i._q;i._q=[],i=$g(new uh,l)}return t.prototype.groupIdentify.call(this,n,r,i,s)},e.prototype.revenue=function(n,r){if(Gg(n)){var i=n._q;n._q=[],n=$g(new D3,i)}return t.prototype.revenue.call(this,n,r)},e.prototype.trackCampaignEventIfNeeded=function(n,r){if(!this.webAttribution||!this.webAttribution.shouldTrackNewCampaign)return!1;var i=this.webAttribution.generateCampaignEvent(n);return r?r.push(this.track(i).promise):this.track(i),this.config.loggerProvider.log("Tracking attribution."),!0},e.prototype.process=function(n){return le(this,void 0,void 0,function(){var r,i,s;return se(this,function(l){return r=Date.now(),i=$w(this.config.sessionTimeout,this.config.lastEventTime),s=this.webAttribution&&this.webAttribution.shouldSetSessionIdOnNewCampaign(),n.event_type!==D2&&n.event_type!==z2&&(!n.session_id||n.session_id===this.getSessionId())&&(i||s?(this.setSessionId(r),s&&this.config.loggerProvider.log("Created a new session for new campaign.")):i||this.trackCampaignEventIfNeeded()),n.event_type===di.IDENTIFY&&n.user_properties&&(this.userProperties=this.getOperationAppliedUserProperties(n.user_properties)),[2,t.prototype.process.call(this,n)]})})},e.prototype.logBrowserOptions=function(n){try{var r=de(de({},n),{apiKey:n.apiKey.substring(0,10)+"********"});this.config.loggerProvider.debug("Initialized Amplitude with BrowserConfig:",JSON.stringify(r))}catch(i){this.config.loggerProvider.error("Error logging browser config",i)}},e.prototype._setDiagnosticsSampleRate=function(n){if(!(n>1||n<0)&&!this.config){this._diagnosticsSampleRate=n;return}},e})(N3),MD=function(){var t=new AD;return{init:Zt(t.init.bind(t),"init",Jt(t),Qt(t,["config"])),add:Zt(t.add.bind(t),"add",Jt(t),Qt(t,["config.apiKey","timeline.plugins"])),remove:Zt(t.remove.bind(t),"remove",Jt(t),Qt(t,["config.apiKey","timeline.plugins"])),track:Zt(t.track.bind(t),"track",Jt(t),Qt(t,["config.apiKey","timeline.queue.length"])),logEvent:Zt(t.logEvent.bind(t),"logEvent",Jt(t),Qt(t,["config.apiKey","timeline.queue.length"])),identify:Zt(t.identify.bind(t),"identify",Jt(t),Qt(t,["config.apiKey","timeline.queue.length"])),groupIdentify:Zt(t.groupIdentify.bind(t),"groupIdentify",Jt(t),Qt(t,["config.apiKey","timeline.queue.length"])),setGroup:Zt(t.setGroup.bind(t),"setGroup",Jt(t),Qt(t,["config.apiKey","timeline.queue.length"])),revenue:Zt(t.revenue.bind(t),"revenue",Jt(t),Qt(t,["config.apiKey","timeline.queue.length"])),flush:Zt(t.flush.bind(t),"flush",Jt(t),Qt(t,["config.apiKey","timeline.queue.length"])),getUserId:Zt(t.getUserId.bind(t),"getUserId",Jt(t),Qt(t,["config","config.userId"])),setUserId:Zt(t.setUserId.bind(t),"setUserId",Jt(t),Qt(t,["config","config.userId"])),getDeviceId:Zt(t.getDeviceId.bind(t),"getDeviceId",Jt(t),Qt(t,["config","config.deviceId"])),setDeviceId:Zt(t.setDeviceId.bind(t),"setDeviceId",Jt(t),Qt(t,["config","config.deviceId"])),reset:Zt(t.reset.bind(t),"reset",Jt(t),Qt(t,["config","config.userId","config.deviceId"])),getSessionId:Zt(t.getSessionId.bind(t),"getSessionId",Jt(t),Qt(t,["config"])),setSessionId:Zt(t.setSessionId.bind(t),"setSessionId",Jt(t),Qt(t,["config"])),extendSession:Zt(t.extendSession.bind(t),"extendSession",Jt(t),Qt(t,["config"])),setOptOut:Zt(t.setOptOut.bind(t),"setOptOut",Jt(t),Qt(t,["config"])),setTransport:Zt(t.setTransport.bind(t),"setTransport",Jt(t),Qt(t,["config"])),getIdentity:Zt(t.getIdentity.bind(t),"getIdentity",Jt(t),Qt(t,["config"])),getOptOut:Zt(t.getOptOut.bind(t),"getOptOut",Jt(t),Qt(t,["config"])),_setDiagnosticsSampleRate:Zt(t._setDiagnosticsSampleRate.bind(t),"_setDiagnosticsSampleRate",Jt(t),Qt(t,["config"]))}};const zC=MD();var jD=zC.init,OD=zC.track;const sE="679a0d081795b9183fe4b60c339d8a41";let mv=!1;function RD(){if(mv||!sE)return;const t=ot.initDataUnsafe?.user?.id?.toString();jD(sE,t,{defaultTracking:!1}),mv=!0}function $e(t,e){if(!mv)return;const n=`WebApp_${t}`,r=ot.initDataUnsafe?.user?.id;OD(n,{...e,user_id:r,platform:"webapp"})}function ND(t){$e("Registration",{referrer:t||"direct"})}function aE(){$e("Registration_Success")}function DD(t){$e("Registration_Error",{error:t})}function zD(){$e("Energy_Page_View")}function LD(t,e,n,r){$e("Energy_Package_View",{package_id:t,package_name:e,price_rub:n,energy_amount:r})}function ID(t,e,n){$e("Energy_Purchase_Start",{package_id:t,package_name:e,price_rub:n})}function PD(t,e,n){$e("Energy_Purchase_Fail",{package_id:t,package_name:e,price_rub:n})}function BD(){$e("Profile_Page_View")}function UD(){$e("Tariffs_Page_View")}function HD(t,e,n,r){$e("Tariff_View",{tariff_id:t,tariff_name:e,price_rub:n,price_stars:r})}function qD(t,e,n,r){$e("Tariff_Purchase_Start",{tariff_id:t,tariff_name:e,payment_type:n,price:r})}function FD(t,e,n){$e("Tariff_Purchase_Success",{tariff_id:t,tariff_name:e,payment_type:n})}function t0(t,e,n){$e("Tariff_Purchase_Fail",{tariff_id:t,tariff_name:e,payment_type:n})}function VD(t,e){$e("Character_View",{character_id:t,character_name:e})}function WD(t,e){$e("Character_Add_To_Favorites",{character_id:t,character_name:e})}function $D(t,e){$e("Character_Remove_From_Favorites",{character_id:t,character_name:e})}function GD(t,e){$e("Character_Start_Chat",{character_id:t,character_name:e})}function KD(t,e){$e("Character_Like",{character_id:t,character_name:e})}function YD(t,e){$e("Character_Dislike",{character_id:t,character_name:e})}function XD(t,e){$e("DeepLink_Open",{character_id:t,referrer:e||"direct"})}function JD(t,e){$e("DeepLink_Character_Found",{character_id:t,character_name:e})}function QD(t){$e("DeepLink_Character_Not_Found",{character_id:t})}function ZD(t,e,n){$e("Character_Share",{character_id:t,character_name:e,share_method:n})}function n0(t){$e("Sort_Change",{sort_type:t})}function r0(t){$e("Gender_Filter_Change",{gender:t||"all"})}function ez(){$e("Tags_Modal_Open")}function lE(t,e){$e("Tag_Select",{tag:t,action:e})}function Tf(t){$e("Filter_Type_Change",{filter_type:t})}function i0(t){$e("NSFW_Toggle",{enabled:t})}function tz(t){$e("Search",{query:t,query_length:t.length})}function nz(){$e("Search_Clear")}function rz(){$e("Menu_Open")}function Zc(t){$e("Menu_Navigation",{destination:t})}function iz(){$e("Capybara_View")}function oz(){$e("Hall_Of_Fame_Open")}function sz(){$e("Telegram_Channel_Click")}function az(t){$e("Ad_Banner_Interaction",{action:t})}function lz(t,e){$e("User_Profile_Prompt_Shown",{character_id:t,character_name:e})}function LC(){$e("User_Profile_Create_Start")}function IC(t){$e("User_Profile_Create_Success",{profile_id:t})}function PC(t){$e("User_Profile_Create_Error",{error:t})}function cz(t,e){$e("User_Profile_Skipped",{character_id:t,character_name:e})}function BC(t,e){$e("User_Profile_Selected",{profile_id:t,profile_name:e})}function uz(t){$e("User_Profile_Deleted",{profile_id:t})}function dz(t){$e("User_Profiles_List_View",{profiles_count:t})}function fz(){$e("Feedback_Page_View")}function cE(t){$e("Feedback_Reaction",{reaction:t})}function hz(t){$e("Feedback_Submit_Success",{reaction:t})}function pz(t){$e("Feedback_Submit_Error",{error:t})}const mz=5,o0=2,bl=50,s0=10,xl=1e3,eu=1,tu=120,gz={root:{zIndex:1e3},inner:{zIndex:1e3},content:{backgroundColor:"#2b2b2b",borderRadius:"16px",overflow:"hidden"},body:{padding:0,overflow:"auto"},header:{backgroundColor:"#2b2b2b",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},title:{color:"white",fontWeight:600},overlay:{zIndex:999}},gv={background:"linear-gradient(135deg, #3a3a3a 0%, #323232 100%)",border:"1px solid rgba(255, 255, 255, 0.08)",cursor:"pointer",transition:"all 0.2s ease"},vz={...gv,border:"2px solid #667eea",boxShadow:"0 0 20px rgba(102, 126, 234, 0.3)"},yz={background:"linear-gradient(135deg, rgba(102, 126, 234, 0.15) 0%, rgba(118, 75, 162, 0.1) 100%)",border:"1px solid rgba(102, 126, 234, 0.3)",borderRadius:"12px"};function bz({opened:t,onClose:e,onSkip:n,onProfileSelected:r,characterId:i,characterName:s}){const[l,c]=A.useState([]),[d,p]=A.useState(!0),[m,g]=A.useState(!1),[v,b]=A.useState(!1),[S,k]=A.useState(!1),[E,w]=A.useState(mz),[T,_]=A.useState(""),[R,O]=A.useState(18),[D,I]=A.useState("male"),[H,V]=A.useState(""),[K,Q]=A.useState(null),[re,Re]=A.useState(null),[ye,me]=A.useState(null),[q,te]=A.useState(null),ue=A.useCallback(async()=>{try{p(!0);const Ae=await Bw();c(Ae.profiles),w(Ae.max_profiles)}catch(Ae){console.error("Failed to load profiles:",Ae)}finally{p(!1)}},[]);A.useEffect(()=>{t&&(ue(),k(!1),_(""),O(18),I("male"),V(""),Q(null),Re(null),me(null),te(null))},[t,ue]);const Ce=A.useCallback(Ae=>{const ie=Ae.trim();return ie?ie.length<o0?` ${o0} `:ie.length>bl?` ${bl} `:/^[\p{L}\s\-']+$/u.test(ie)?null:" ,   ":" "},[]),ae=A.useCallback(Ae=>{if(Ae===""||Ae===null||Ae===void 0)return" ";const ie=Number(Ae);return isNaN(ie)||!Number.isInteger(ie)?"  ":ie<eu?` ${eu}`:ie>tu?` ${tu}`:null},[]),Se=A.useCallback(Ae=>{const ie=Ae.trim();return ie?ie.length<s0?` ${s0} `:ie.length>xl?` ${xl} `:null:" "},[]),ge=A.useCallback(Ae=>{const ie=Ae.slice(0,bl);_(ie),Re(null)},[]),he=A.useCallback(Ae=>{if(Ae===""||Ae===null||Ae===void 0){O(""),me(null);return}const ie=Number(Ae);if(!isNaN(ie)){const He=Math.min(Math.max(Math.floor(ie),eu),tu);O(He),me(null)}},[]),Le=A.useCallback(Ae=>{const ie=Ae.slice(0,xl);V(ie),te(null)},[]),rt=A.useCallback(async()=>{const Ae=Ce(T),ie=ae(R),He=Se(H);if(Re(Ae),me(ie),te(He),Ae||ie||He){Q("   ");return}LC(),g(!0),Q(null);const We={name:T.trim(),age:Number(R),is_female:D==="female",is_male:D==="male",description:H.trim()};try{const Je=await Uw(We);IC(Je.id),await ue(),k(!1),await ve(Je)}catch(Je){const Ke=Je?.message||"   ";PC(Ke),Q(Ke)}finally{g(!1)}},[T,R,D,H,ue,Ce,ae,Se]),ve=A.useCallback(async Ae=>{b(!0);try{await Hw(Ae.id),BC(Ae.id,Ae.name),r(Ae)}catch(ie){console.error("Failed to select profile:",ie)}finally{b(!1)}},[r]),Kt=A.useCallback(()=>{cz(i,s),n()},[i,s,n]),Ct=l.length<E;return h.jsx(Gr,{opened:t,onClose:e,title:"   ",size:"lg",centered:!0,zIndex:1e3,styles:gz,children:h.jsx(bw,{type:"always",offsetScrollbars:!0,style:{maxHeight:"calc(80vh - 100px)",overflowY:"auto"},children:h.jsxs(oe,{gap:"md",p:"lg",children:[h.jsx(ne,{p:"md",style:yz,children:h.jsxs(pe,{gap:"sm",align:"flex-start",children:[h.jsx(dp,{size:20,color:"#667eea",style:{flexShrink:0,marginTop:2}}),h.jsxs(oe,{gap:"xs",children:[h.jsx(z,{c:"white",size:"sm",fw:500,children:"  ?"}),h.jsx(z,{c:"dimmed",size:"xs",children:'  -    .   ""  "",            : , , , ,    .'}),h.jsxs(z,{c:"dimmed",size:"xs",children:["   ",E,"       ."]})]})]})}),d?h.jsxs(ne,{ta:"center",py:"xl",children:[h.jsx(gr,{color:"violet"}),h.jsx(z,{c:"dimmed",size:"sm",mt:"md",children:" ..."})]}):S?h.jsx(yt,{p:"lg",radius:"lg",style:gv,children:h.jsxs(oe,{gap:"md",children:[h.jsxs(pe,{justify:"space-between",children:[h.jsx(z,{c:"white",size:"md",fw:600,children:" "}),h.jsx(qn,{variant:"subtle",color:"gray",onClick:()=>k(!1),children:h.jsx(ty,{size:18})})]}),h.jsx($u,{label:` (${o0}-${bl} )`,placeholder:"  ?",value:T,onChange:Ae=>ge(Ae.target.value),maxLength:bl,required:!0,error:re,styles:{label:{color:"#9ca3af",marginBottom:4},input:{backgroundColor:"#1a1a1a",border:"1px solid rgba(255,255,255,0.1)",color:"white"}}}),h.jsxs(z,{c:"dimmed",size:"xs",ta:"right",mt:-8,children:[T.length,"/",bl]}),h.jsx(xw,{label:` (${eu}-${tu})`,placeholder:" ",value:R,onChange:he,min:eu,max:tu,allowDecimal:!1,allowNegative:!1,hideControls:!0,required:!0,error:ye,styles:{label:{color:"#9ca3af",marginBottom:4},input:{backgroundColor:"#1a1a1a",border:"1px solid rgba(255,255,255,0.1)",color:"white"}}}),h.jsxs(ne,{children:[h.jsx(z,{size:"sm",c:"#9ca3af",mb:4,children:""}),h.jsx(Kv,{value:D,onChange:Ae=>I(Ae),fullWidth:!0,data:[{label:"",value:"male"},{label:"",value:"female"}],styles:{root:{backgroundColor:"#1a1a1a"},label:{color:"white"},indicator:{backgroundColor:"#667eea"}}})]}),h.jsx(Pl,{label:` (${s0}-${xl} )`,placeholder:" : , , ,           ...",value:H,onChange:Ae=>Le(Ae.target.value),minRows:4,maxRows:8,maxLength:xl,required:!0,error:q,styles:{label:{color:"#9ca3af",marginBottom:4},input:{backgroundColor:"#1a1a1a",border:"1px solid rgba(255,255,255,0.1)",color:"white"}}}),h.jsxs(z,{c:"dimmed",size:"xs",ta:"right",mt:-8,children:[H.length,"/",xl]}),K&&h.jsx(z,{c:"red",size:"sm",children:K}),h.jsx(ke,{fullWidth:!0,variant:"gradient",gradient:{from:"#667eea",to:"#764ba2"},onClick:rt,loading:m,leftSection:h.jsx(Xr,{size:18}),children:"  "})]})}):h.jsxs(oe,{gap:"sm",children:[l.length>0&&h.jsxs(h.Fragment,{children:[h.jsxs(z,{c:"dimmed",size:"sm",children:["     ",s,":"]}),l.map(Ae=>h.jsx(yt,{p:"md",radius:"lg",style:Ae.is_selected?vz:gv,onClick:()=>!v&&ve(Ae),children:h.jsxs(pe,{justify:"space-between",align:"flex-start",children:[h.jsxs(oe,{gap:4,style:{flex:1},children:[h.jsxs(pe,{gap:"sm",children:[h.jsx(Pw,{size:18,color:"#667eea"}),h.jsx(z,{c:"white",fw:600,children:Ae.name}),Ae.is_selected&&h.jsx(Ut,{size:"sm",color:"violet",variant:"light",children:""})]}),h.jsxs(z,{c:"dimmed",size:"xs",children:[Ae.age," , ",Ae.is_female?"":""," "]}),h.jsx(z,{c:"#9ca3af",size:"xs",lineClamp:2,children:Ae.description})]}),v?h.jsx(gr,{size:"sm",color:"violet"}):h.jsx(Xr,{size:20,color:Ae.is_selected?"#667eea":"transparent"})]})},Ae.id))]}),Ct&&h.jsxs(ke,{fullWidth:!0,variant:"light",color:"violet",leftSection:h.jsx(Iw,{size:18}),onClick:()=>k(!0),style:{marginTop:l.length>0?8:0},children:["   (",l.length,"/",E,")"]}),l.length===0&&!Ct&&h.jsx(z,{c:"dimmed",size:"sm",ta:"center",children:"  "})]}),!S&&h.jsx(ke,{fullWidth:!0,variant:"subtle",color:"gray",onClick:Kt,disabled:v,children:" (  )"})]})})})}const xz="https://t.me/RolePlayToPbot/WebApp",Sz={content:{backgroundColor:"#2b2b2b",borderRadius:"16px",overflow:"hidden"},body:{padding:0,display:"flex",flexDirection:"column"}},Ez={position:"absolute",bottom:0,left:0,right:0,height:"80px",background:"linear-gradient(to bottom, transparent, rgba(43, 43, 43, 0.98))",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-end",paddingBottom:"12px",pointerEvents:"none",zIndex:10,gap:"4px"},kz={animation:"bounceDown 1.5s ease-in-out infinite",color:"rgba(255, 255, 255, 0.9)"},wz={fontSize:"12px",color:"rgba(255, 255, 255, 0.6)",fontWeight:500},Cz={backgroundColor:"#2b2b2b",padding:"12px 24px 16px",borderTop:"1px solid rgba(255, 255, 255, 0.1)",flexShrink:0},Tz={backgroundColor:"rgba(0, 0, 0, 0.5)",color:"white",padding:"8px",minWidth:"auto",height:"auto"},_z={radius:"sm",blur:2,backgroundOpacity:.5,color:"#2b2b2b"},Az={borderTopLeftRadius:"16px",borderTopRightRadius:"16px",overflow:"hidden",backgroundColor:"#1a1a1a"},Mz={objectFit:"contain",width:"100%",height:"100%"},jz={backgroundColor:"rgba(255, 255, 255, 0.06)",borderRadius:"14px",border:"1px solid rgba(255, 255, 255, 0.08)",boxShadow:"inset 0 1px 0 rgba(255, 255, 255, 0.05)"},Oz={backgroundColor:"rgba(255, 255, 255, 0.04)",borderRadius:"12px",padding:"12px 16px"},Rz={fontFamily:'"Roboto", sans-serif',letterSpacing:"-0.01em"},Nz={backgroundColor:"rgba(239, 68, 68, 0.1)",borderRadius:"12px",border:"1px solid rgba(239, 68, 68, 0.3)",padding:"16px"},Dz="https://apiroleplay.capyhub.su/",_f=A.memo(({icon:t,count:e,label:n})=>h.jsxs(ne,{ta:"center",children:[h.jsxs(pe,{gap:4,justify:"center",children:[t,h.jsx(z,{c:"white",size:"sm",fw:600,children:e})]}),h.jsx(z,{c:"dimmed",size:"xs",children:n})]})),zz=A.memo(function({character:e,opened:n,onClose:r,onCharacterUpdate:i,onStartChat:s,onCharacterDelete:l,filterType:c,isAdmin:d=!1}){const[p,m]=A.useState(""),[g,v]=A.useState(!1),[b,S]=A.useState(0),[k,E]=A.useState(null),[w,T]=A.useState(0),[_,R]=A.useState(0),[O,D]=A.useState(0),[I,H]=A.useState(!1),[V,K]=A.useState(!1),[Q,re]=A.useState(!1),[Re,ye]=A.useState(!1),[me,q]=A.useState(!1),[te,ue]=A.useState(null),[Ce,ae]=A.useState(!0),[Se,ge]=A.useState(!1),[he,Le]=A.useState(!1),rt=A.useRef(e),ve=A.useRef(null),Kt=A.useRef(null),Ct=c==="created"||d;A.useEffect(()=>{rt.current=e},[e]),A.useEffect(()=>{if(!e||!n||ve.current===e.id)return;ve.current=e.id,VD(e.id,e.name),re(!1),ye(!1),q(!1),ue(null),H(e.is_favorited||!1),D(e.favorites_count||0),S(e.chats_count||0),E(null),T(e.likes||0),R(e.dislikes||0),e.image?.startsWith("http")?m(e.image):e.file_id?(v(!0),st(`/v1/characters/photo?file_id=${e.file_id}`).then(Ie=>{const Ht=Ie.path.startsWith("http")?Ie.path:`${Dz}/${Ie.path}`;m(Ht)}).catch(Ie=>console.error("Error loading modal photo",Ie)).finally(()=>v(!1))):m(e.image||"");const Pe=e.id;st(`/v1/characters/stats?public_id=${Pe}`).then(Ie=>{D(Ie.favorites_count),S(Ie.selected_count)}).catch(Ie=>console.error("Error loading character stats",Ie)),st(`/v1/characters/reactions/status/${Pe}`).then(E).catch(Ie=>console.error("Error loading reaction status",Ie)),st(`/v1/characters/reactions/count/${Pe}`).then(Ie=>{T(Ie.likes_count),R(Ie.dislikes_count)}).catch(Ie=>console.error("Error loading likes count",Ie))},[e?.id,n]),A.useEffect(()=>{n||(ve.current=null,q(!1),ue(null),ae(!0),Le(!1),ge(!1))},[n]);const Ae=A.useCallback(Pe=>{Pe.y>50&&ae(!1)},[]),ie=A.useCallback((Pe={})=>{const Ie=rt.current;return Ie?{...Ie,likes:w,dislikes:_,favorites_count:O,chats_count:b,is_favorited:I,is_liked:k?.is_liked||!1,...Pe}:null},[w,_,O,b,I,k]),He=A.useCallback(async Pe=>{const Ie=rt.current;if(!Ie)return;Pe==="like"?KD(Ie.id,Ie.name):YD(Ie.id,Ie.name);const Ht=Pe==="like",ir=k,un=w,Qr=_,Jn=Ht?k?.is_liked:k?.is_disliked,Tn=Ht?k?.is_disliked:k?.is_liked;let Or=w,vr=_;Jn?Ht?Or-=1:vr-=1:(Ht?Or+=1:vr+=1,Tn&&(Ht?vr-=1:Or-=1)),T(Or),R(vr);const rn=Ht?!Jn:!1,Rr=Ht?!1:!Jn;E({public_id:Ie.id,is_liked:rn,is_disliked:Rr});const _n=ie({likes:Or,dislikes:vr,is_liked:rn});_n&&i?.(_n);try{const Ui=await st(`/v1/characters/reactions/${Pe}`,{method:"POST",body:JSON.stringify({public_id:Ie.id})});E({public_id:Ui.public_id,is_liked:Ui.is_liked,is_disliked:Ui.is_disliked})}catch(Ui){console.error(`Failed to set ${Pe}:`,Ui),T(un),R(Qr),E(ir);const Ds=ie({likes:un,dislikes:Qr,is_liked:ir?.is_liked||!1});Ds&&i?.(Ds)}},[k,w,_,i,ie]),We=A.useCallback(()=>He("like"),[He]),Je=A.useCallback(()=>He("dislike"),[He]),Ke=A.useCallback(async()=>{const Pe=rt.current;if(!Pe)return;const Ie=I,Ht=O,ir=!I,un=ir?O+1:O-1;ir?WD(Pe.id,Pe.name):$D(Pe.id,Pe.name),H(ir),D(un),K(!0);const Qr=ie({is_favorited:ir,favorites_count:un});Qr&&i?.(Qr);try{const Jn=await st(`/v1/characters/favorite/${Pe.id}`,{method:"POST"});if(Jn.success){H(Jn.is_favorite);const Tn=Jn.is_favorite?Ht+1:Ht-1;D(Tn);const Or=ie({is_favorited:Jn.is_favorite,favorites_count:Tn});Or&&i?.(Or)}}catch(Jn){console.error("Failed to toggle favorite:",Jn),H(Ie),D(Ht);const Tn=ie({is_favorited:Ie,favorites_count:Ht});Tn&&i?.(Tn)}finally{K(!1)}},[I,O,i,ie]),gt=A.useCallback(async()=>{const Pe=rt.current;if(Pe){GD(Pe.id,Pe.name),re(!0);try{const Ie=await st(`/v1/characters/${Pe.id}/select`,{method:"POST"});if(Ie.detail==="BOT_BLOCKED"){ot.showAlert(",  ?   ...     ,      ? "),re(!1);return}if(Ie.detail==="MESSAGE_SEND_PERMISSION"){ot.showAlert("   ,     !  :) "),ot.requestWriteAccess(Ht=>{Ht?gt():(ot.showAlert(" ....      "),re(!1))}),re(!1);return}if(Ie.detail==="CHAT_NOT_FOUND"){ot.showAlert(",   !     ?"),ot.requestWriteAccess(Ht=>{Ht?gt():(ot.showAlert("      "),re(!1))}),re(!1);return}s?.(Pe.id),ot.close()}catch(Ie){console.error("Failed to start chat with character:",Ie),ot.showAlert("-        .   ")}finally{re(!1)}}},[s]),Yt=A.useCallback(async()=>{const Pe=rt.current;if(Pe){if(he){gt();return}re(!0);try{if(!(await o3()).exists){lz(Pe.id,Pe.name),ge(!0),re(!1);return}Le(!0),gt()}catch(Ie){console.error("Failed to check user profiles:",Ie),Le(!0),gt()}}},[he,gt]),Bi=A.useCallback(()=>{ge(!1)},[]),jr=A.useCallback(()=>{ge(!1),Le(!0),gt()},[gt]),Xn=A.useCallback(()=>{ge(!1),Le(!0),gt()},[gt]),Jr=A.useCallback(()=>{q(!0),ue(null)},[]),pi=A.useCallback(()=>{q(!1),ue(null)},[]),Ns=A.useCallback(async()=>{const Pe=rt.current;if(Pe){ye(!0),ue(null);try{await st(`/v1/characters/${Pe.id}`,{method:"DELETE"}),l?.(Pe.id),r()}catch(Ie){console.error("Failed to delete character:",Ie),Ie?.status===403||Ie?.message?.includes("403")?Ie?.message?.includes("users are using it")||Ie?.detail?.includes("users are using it")?ue("   :    50  .   ."):ue("       ."):ue("   .  .")}finally{ye(!1)}}},[l,r]),ec=A.useCallback(()=>{const Pe=rt.current;if(!Pe)return;const Ie=ot.initDataUnsafe?.user?.id,Ht=Ie?`ref_share_${Ie}_char_${Pe.id}`:`char_${Pe.id}`,ir=`${xz}?startapp=${Ht}`,un=`  ${Pe.name}! `;ZD(Pe.id,Pe.name,"telegram");const Qr=`https://t.me/share/url?url=${encodeURIComponent(ir)}&text=${encodeURIComponent(un)}`;ot.openTelegramLink(Qr)},[]);return e?h.jsxs(h.Fragment,{children:[h.jsx(bz,{opened:Se,onClose:Bi,onSkip:jr,onProfileSelected:Xn,characterId:e.id,characterName:e.name}),h.jsxs(Gr,{opened:n,onClose:r,size:"lg",centered:!0,withCloseButton:!1,styles:Sz,children:[h.jsx("style",{children:`
          @keyframes bounceDown {
            0%, 100% { transform: translateY(0); opacity: 0.7; }
            50% { transform: translateY(6px); opacity: 1; }
          }
        `}),h.jsxs(ne,{pos:"relative",style:{display:"flex",flexDirection:"column",maxHeight:"80vh",height:"80vh"},children:[h.jsx(bw,{type:"auto",viewportRef:Kt,onScrollPositionChange:Ae,style:{flex:1,minHeight:0},children:h.jsxs(ne,{pos:"relative",children:[h.jsx(ne,{style:{position:"absolute",top:16,right:16,zIndex:10},children:h.jsx(ke,{variant:"subtle",color:"gray",size:"sm",onClick:r,style:Tz,children:""})}),h.jsxs(ne,{pos:"relative",style:{minHeight:200,...Az},children:[h.jsx(lp,{visible:g,zIndex:5,overlayProps:_z}),h.jsx(yw,{ratio:1/1,children:h.jsx(_r,{src:p,alt:e.name,fallbackSrc:"https://placehold.co/600x600/1a1a1a/666?text=No+Image",style:Mz})}),Ce&&h.jsxs(ne,{style:Ez,children:[h.jsx(z,{style:wz,children:" "}),h.jsx(Gu,{size:24,style:kz})]})]}),h.jsxs(oe,{gap:"md",p:"xl",pb:"md",children:[h.jsx(z,{c:"white",size:"xl",fw:700,ta:"center",style:Rz,children:e.name}),h.jsx(ne,{style:Oz,children:h.jsxs(pe,{justify:"space-around",children:[h.jsx(_f,{icon:h.jsx(rv,{size:18,color:"#66bb6a"}),count:w,label:""}),h.jsx(_f,{icon:h.jsx(nv,{size:18,color:"#ef5350"}),count:_,label:""}),h.jsx(_f,{icon:h.jsx(tv,{size:18,color:"#fdd835"}),count:O,label:" "}),h.jsx(_f,{icon:h.jsx(Cs,{size:18,color:"#42a5f5"}),count:b,label:""})]})}),h.jsxs(pe,{justify:"center",gap:"sm",children:[h.jsx(ke,{leftSection:h.jsx(rv,{size:18}),variant:k?.is_liked?"filled":"light",color:"green",onClick:We,loading:!k,radius:"md",children:""}),h.jsx(ke,{leftSection:h.jsx(nv,{size:18}),variant:k?.is_disliked?"filled":"light",color:"red",onClick:Je,loading:!k,radius:"md",children:""})]}),h.jsxs(ne,{p:"md",style:jz,children:[h.jsx(z,{c:"dimmed",size:"xs",tt:"uppercase",fw:600,mb:"xs",style:{letterSpacing:"0.05em"},children:" "}),h.jsx(z,{c:"#e4e4e7",size:"sm",style:{lineHeight:1.7},children:e.description||" ."})]}),me&&h.jsxs(ne,{style:Nz,children:[h.jsxs(z,{c:"white",size:"sm",fw:500,mb:"sm",children:[' ,     "',e.name,'"?']}),h.jsx(z,{c:"dimmed",size:"xs",mb:"md",children:"   .     ."}),te&&h.jsx(z,{c:"red.4",size:"sm",mb:"md",children:te}),h.jsxs(pe,{gap:"sm",children:[h.jsx(ke,{variant:"filled",color:"red",size:"sm",onClick:Ns,loading:Re,children:", "}),h.jsx(ke,{variant:"light",color:"gray",size:"sm",onClick:pi,disabled:Re,children:""})]})]}),h.jsxs(oe,{gap:"sm",children:[h.jsx(ke,{leftSection:I?h.jsx(lh,{size:20}):h.jsx(tv,{size:20}),size:"md",variant:I?"filled":"light",color:"yellow",fullWidth:!0,radius:"md",onClick:Ke,loading:V,children:I?"  ":" "}),h.jsx(ke,{leftSection:h.jsx(z5,{size:20}),size:"md",variant:"light",color:"grape",fullWidth:!0,radius:"md",onClick:ec,children:""}),Ct&&!me&&h.jsx(ke,{leftSection:h.jsx(ah,{size:20}),size:"md",variant:"outline",color:"red",fullWidth:!0,radius:"md",onClick:Jr,children:" "})]})]})]})}),h.jsx(ne,{style:Cz,children:h.jsx(ke,{leftSection:h.jsx(Cs,{size:20}),size:"md",variant:"filled",color:"blue",fullWidth:!0,radius:"md",onClick:Yt,loading:Q,styles:{root:{fontWeight:600,boxShadow:"0 -2px 12px rgba(28, 126, 214, 0.35)"}},children:" "})})]})]})]}):null});function Lz({onSearch:t,onFocusChange:e}){const n=[": walter white",": genshin impact",":  ",": "],[r,i]=A.useState(n[Math.floor(Math.random()*n.length)]),[s,l]=A.useState(""),[c,d]=A.useState(!1),p=/^[a-zA-Z--0-9\s]*$/;A.useEffect(()=>{const S=setInterval(()=>{i(n[Math.floor(Math.random()*n.length)])},3e3);return()=>clearInterval(S)},[]);const m=S=>{const k=S.currentTarget.value;k.length<=20&&p.test(k)&&l(k)},g=()=>{const S=s.trim();t(S),S&&tz(S)},v=S=>{S.key==="Enter"&&g()},b=()=>{l(""),t(""),nz()};return h.jsxs(pe,{gap:"xs",style:{flexWrap:"nowrap"},children:[h.jsx($u,{value:s,onChange:m,onKeyDown:v,onFocus:()=>{d(!0),e?.(!0)},onBlur:()=>{d(!1),e?.(!1)},placeholder:r,size:"md",style:{flex:1},rightSection:s?h.jsx(Sw,{size:"sm",onClick:b}):void 0,styles:{input:{backgroundColor:"#2d2d2d",color:"white",borderColor:c?"#228be6":"#444",borderRadius:en(24),paddingLeft:en(20),paddingRight:en(20),transition:"border-color 0.25s ease","&::placeholder":{color:"white",opacity:.7}}}}),h.jsx(qn,{size:42,radius:"xl",variant:"filled",color:"blue",onClick:g,style:{flexShrink:0},children:h.jsx(N5,{style:{width:en(20),height:en(20)},stroke:1.5})})]})}const Iz="/assets/logo2_32-DjhnG_Z6.webp";function Ms({onSearch:t,nsfwEnabled:e=!1,onNsfwChange:n}){const r=Li(),[i,s]=A.useState(!1),l=new Date().getFullYear(),[c,d]=A.useState(!1),[p,m]=A.useState(!1),g=()=>{n&&(e?(n(!1),i0(!1)):localStorage.getItem("nsfw_accepted")==="true"?(n(!0),i0(!0)):m(!0))},v=()=>{localStorage.setItem("nsfw_accepted","true"),n?.(!0),i0(!0),m(!1)},[b,S]=A.useState(!1),[k,E]=A.useState(""),w=["https://testapi.capyhub.su/photo/capy/1.jpg","https://testapi.capyhub.su/photo/capy/2.jpeg","https://testapi.capyhub.su/photo/capy/3.jpeg","https://testapi.capyhub.su/photo/capy/4.jpeg","https://testapi.capyhub.su/photo/capy/5.jpeg","https://testapi.capyhub.su/photo/capy/6.webp"],T=()=>{const K=Math.floor(Math.random()*w.length);return w[K]},[_,R]=A.useState(!1),[O,D]=A.useState(!1);A.useEffect(()=>(()=>{const re=localStorage.getItem("tg_ad_viewed_at"),Re=4320*60*1e3;let ye=!1;if(!re)ye=!0;else{const{timestamp:me}=JSON.parse(re);new Date().getTime()-me>Re&&(ye=!0)}if(ye){const me=setTimeout(()=>{D(!0)},2e4);return()=>clearTimeout(me)}})(),[]);const I=(K="close")=>{D(!1),localStorage.setItem("tg_ad_viewed_at",JSON.stringify({timestamp:new Date().getTime()})),az(K),K==="subscribe"&&ot.openTelegramLink("https://t.me/AI_RolePlay_TG")},H={backgroundColor:"rgb(41, 41, 41)",borderRadius:"12px",padding:"12px 16px",cursor:"pointer",transition:"background-color 0.2s ease"},V={background:"linear-gradient(90deg, #2AABEE 0%, #229ED9 100%)",borderRadius:"12px",padding:"12px 16px",cursor:"pointer",boxShadow:"0 4px 15px rgba(34, 158, 217, 0.4)",transition:"transform 0.1s ease"};return h.jsxs(h.Fragment,{children:[h.jsx(ne,{style:{backgroundColor:"rgb(22, 22, 22)",borderBottom:"1px solid rgb(40, 40, 40)",padding:"8px 12px",position:"sticky",top:0,zIndex:100},children:h.jsxs(ne,{style:{maxWidth:"560px",margin:"0 auto",display:"flex",alignItems:"center",gap:"8px"},children:[h.jsx(ne,{style:{width:c?0:"40px",overflow:"hidden",flexShrink:0,transition:"width 0.25s ease"},children:h.jsx("img",{src:Iz,width:36,height:36,alt:"logo",style:{display:"block",borderRadius:"6px"}})}),n&&h.jsx(ne,{style:{width:c?0:"auto",overflow:"hidden",flexShrink:0,transition:"width 0.25s ease"},children:h.jsxs("div",{onClick:g,style:{display:"flex",alignItems:"center",gap:"6px",borderRadius:"22px",padding:"0 10px 0 9px",height:"38px",cursor:"pointer",whiteSpace:"nowrap",userSelect:"none",flexShrink:0,background:e?"linear-gradient(135deg, #ff5f5f 0%, #d90429 100%)":"rgba(255,255,255,0.06)",border:e?"1px solid rgba(255,100,100,0.6)":"1px solid rgba(255,255,255,0.1)",boxShadow:e?"0 0 14px rgba(217, 4, 41, 0.55), inset 0 1px 0 rgba(255,255,255,0.15)":"none",transition:"background 0.25s ease, box-shadow 0.25s ease, border-color 0.25s ease"},children:[h.jsx(g5,{size:15,color:e?"#fff":"#888",style:{transition:"color 0.25s ease",flexShrink:0}}),h.jsx("span",{style:{color:e?"#fff":"#aaa",fontSize:"13px",fontWeight:700,letterSpacing:"0.5px",transition:"color 0.25s ease"},children:"18+"}),h.jsx("div",{style:{width:"32px",height:"18px",backgroundColor:e?"rgba(255,255,255,0.3)":"#3a3a3a",borderRadius:"9px",position:"relative",flexShrink:0,transition:"background-color 0.25s ease",boxShadow:"inset 0 1px 3px rgba(0,0,0,0.4)"},children:h.jsx("div",{style:{width:"13px",height:"13px",backgroundColor:e?"#fff":"#777",borderRadius:"50%",position:"absolute",top:"2.5px",left:e?"17px":"2px",transition:"left 0.25s ease, background-color 0.25s ease",boxShadow:e?"0 1px 4px rgba(0,0,0,0.35)":"0 1px 2px rgba(0,0,0,0.5)"}})})]})}),t&&h.jsx(ne,{style:{flex:1,minWidth:0},children:h.jsx(Lz,{onSearch:t,onFocusChange:d})})]})}),h.jsx(Pj,{opened:i,onClose:()=>s(!1),position:"right",padding:"md",size:"300px",styles:{content:{backgroundColor:"rgb(28, 28, 28)"},header:{backgroundColor:"rgb(28, 28, 28)"},close:{color:"white"}},children:h.jsxs(oe,{justify:"space-between",h:"calc(100vh - 80px)",children:[h.jsxs(oe,{gap:"md",children:[h.jsx(ne,{style:H,onClick:()=>{s(!1),r("/"),Zc("home")},children:h.jsx(z,{c:"white",size:"lg",children:" "})}),h.jsx(ne,{style:H,onClick:()=>{s(!1),r("/create"),Zc("create")},children:h.jsx(z,{c:"white",size:"lg",children:"  "})}),h.jsx(ne,{style:H,onClick:()=>{s(!1),r("/profile"),Zc("profile")},children:h.jsx(z,{c:"white",size:"lg",children:" "})}),h.jsx(ne,{style:H,onClick:()=>{s(!1),r("/tariffs"),Zc("tariffs")},children:h.jsx(z,{c:"white",size:"lg",children:" "})}),h.jsx(ne,{style:H,onClick:()=>{s(!1),r("/feedback"),Zc("feedback")},children:h.jsx(z,{c:"white",size:"lg",children:"  "})}),h.jsx(ne,{style:H,onClick:()=>{E(T()),S(!0),iz()},children:h.jsx(z,{c:"white",size:"lg",children:"  ?"})}),h.jsx(ne,{style:H,onClick:()=>{s(!1),R(!0),oz()},children:h.jsx(z,{c:"white",size:"lg",children:"  "})}),h.jsxs(ne,{style:V,onClick:()=>{s(!1),ot.openTelegramLink("https://t.me/AI_RolePlay_TG"),sz()},children:[h.jsxs(pe,{justify:"space-between",children:[h.jsx(z,{c:"white",size:"lg",fw:700,children:"  Telegram"}),h.jsx(z,{size:"xl",children:""})]}),h.jsx(z,{c:"white",size:"xs",opacity:.9,mt:4,children:"  "})]})]}),h.jsxs(oe,{gap:"xs",align:"center",children:[h.jsx(Ew,{href:"https://t.me/aiogram_tgbots",c:"white",size:"sm",underline:"hover",target:"_blank",children:""}),h.jsxs(z,{size:"xs",c:"dimmed",ta:"center",children:[" ",l,"   "]})]})]})}),h.jsxs(ne,{style:{position:"fixed",bottom:0,left:0,right:0,zIndex:200,backgroundColor:"rgb(18, 18, 18)",borderTop:"1px solid rgb(40, 40, 40)",padding:"10px 0 18px",display:"flex",alignItems:"center",justifyContent:"center",gap:"clamp(20px, 12vw, 56px)"},children:[h.jsx(qn,{size:44,radius:"xl",variant:"subtle",onClick:()=>r("/chats"),style:{color:"rgba(255,255,255,0.65)"},children:h.jsx(Cs,{size:24,stroke:1.5})}),h.jsx(qn,{size:54,radius:"xl",variant:"filled",color:"blue",onClick:()=>r("/"),style:{boxShadow:"0 4px 15px rgba(34, 139, 230, 0.35)"},children:h.jsx(ey,{size:26,stroke:1.5})}),h.jsx(Bj,{opened:i,onClick:()=>{i||rz(),s(!i)},color:"white",size:"md"})]}),h.jsx(Gr,{opened:b,onClose:()=>S(!1),centered:!0,size:"lg",styles:{content:{backgroundColor:"rgb(28, 28, 28)"},header:{backgroundColor:"rgb(28, 28, 28)"},close:{color:"white"}},children:h.jsxs(oe,{align:"center",gap:"md",children:[h.jsx(_r,{src:k,alt:"",radius:"md",style:{maxWidth:"100%"}}),h.jsx(z,{c:"white",ta:"center",children:"      .     :)"})]})}),h.jsx(Gr,{opened:_,onClose:()=>R(!1),centered:!0,size:"lg",title:h.jsx(z,{c:"white",size:"xl",fw:700,children:"  "}),styles:{content:{backgroundColor:"rgb(28, 28, 28)"},header:{backgroundColor:"rgb(28, 28, 28)"},close:{color:"white"},title:{color:"white"}},children:h.jsxs(oe,{gap:"xl",children:[h.jsx(z,{c:"white",size:"lg",ta:"center",fw:600,children:" "}),h.jsxs(pe,{justify:"center",gap:"xl",children:[h.jsxs(oe,{align:"center",gap:"md",style:{maxWidth:"200px"},children:[h.jsx(_r,{src:"https://testapi.capyhub.su/photo/father/1.jpg",alt:" ",radius:"50%",w:150,h:150,fit:"cover"}),h.jsx(z,{c:"white",size:"lg",fw:600,ta:"center",children:" "}),h.jsx(z,{c:"dimmed",size:"sm",ta:"center",children:"    ,  ."})]}),h.jsxs(oe,{align:"center",gap:"md",style:{maxWidth:"200px"},children:[h.jsx(_r,{src:"https://testapi.capyhub.su/photo/father/2.jpg",alt:"",radius:"50%",w:150,h:150,fit:"cover"}),h.jsx(z,{c:"white",size:"lg",fw:600,ta:"center",children:""}),h.jsx(z,{c:"dimmed",size:"sm",ta:"center",children:"    ,   ."})]})]})]})}),h.jsx(Gr,{opened:O,onClose:()=>I("close"),centered:!0,withCloseButton:!1,size:"sm",padding:"0",radius:"xl",styles:{content:{backgroundColor:"rgb(32, 32, 32)",border:"1px solid rgb(45, 45, 45)",overflow:"visible"},overlay:{backgroundColor:"rgba(0, 0, 0, 0.7)",backdropFilter:"blur(3px)"}},children:h.jsxs(ne,{pos:"relative",children:[h.jsx(ne,{h:110,style:{background:"radial-gradient(circle at top right, #2AABEE 0%, #0077B5 100%)",borderRadius:"var(--mantine-radius-xl) var(--mantine-radius-xl) 0 0"}}),h.jsx(ne,{style:{position:"absolute",top:50,left:"50%",transform:"translateX(-50%)",borderRadius:"50%",padding:"6px",backgroundColor:"rgb(32, 32, 32)",boxShadow:"0 -4px 12px rgba(0,0,0,0.2)"},children:h.jsx(xs,{size:80,radius:"50%",variant:"gradient",gradient:{from:"#2AABEE",to:"#229ED9",deg:135},style:{boxShadow:"0 8px 20px rgba(42, 171, 238, 0.4)"},children:h.jsx(z,{size:en(42),children:""})})}),h.jsxs(oe,{px:"xl",pt:60,pb:"lg",align:"center",gap:"xs",children:[h.jsxs(z,{ta:"center",fw:900,size:en(24),c:"white",style:{lineHeight:1.1},children:["! ",h.jsx("br",{}),h.jsx(z,{span:!0,variant:"gradient",gradient:{from:"yellow",to:"orange",deg:45},children:" ?"})]}),h.jsxs(z,{c:"dimmed",ta:"center",size:"sm",mt:"xs",lh:1.4,children:["  ,      . ",h.jsx("br",{}),h.jsx("b",{children:",    !"})]}),h.jsxs(oe,{w:"100%",mt:"lg",gap:"sm",children:[h.jsx(ke,{fullWidth:!0,size:"md",variant:"gradient",gradient:{from:"#2AABEE",to:"#0088cc",deg:90},radius:"xl",onClick:()=>I("subscribe"),styles:{root:{boxShadow:"0 4px 12px rgba(42, 171, 238, 0.3)"}},children:"   "}),h.jsx(ke,{variant:"subtle",color:"gray",size:"sm",radius:"xl",onClick:()=>I("close"),children:"  "})]})]})]})}),h.jsxs(Gr,{opened:p,onClose:()=>m(!1),title:" ",centered:!0,styles:{content:{backgroundColor:"#2a2a2a",color:"white"},header:{backgroundColor:"#2a2a2a",color:"white"}},children:[h.jsx(z,{size:"sm",mb:"lg",children:"   18 ?     ,    ?"}),h.jsxs(pe,{justify:"flex-end",children:[h.jsx(ke,{variant:"default",onClick:()=>m(!1),children:""}),h.jsx(ke,{color:"red",onClick:v,children:",   18"})]})]})]})}function Pz({selectedTags:t,onTagsChange:e,currentFilterType:n,onFilterTypeChange:r,sortBy:i,onSortChange:s,selectedGender:l,onGenderChange:c}){const[d,p]=A.useState(!1),[m,g]=A.useState([]),[v,b]=A.useState(!1),[S,k]=A.useState(!1);A.useEffect(()=>{(async()=>{b(!0),k(!1);try{const D=await st("/v1/characters/tags");g(D.tags)}catch(D){console.error("   :",D),k(!0)}finally{b(!1)}})()},[]);const E=O=>{if(t.includes(O))e(t.filter(D=>D!==O)),lE(O,"remove");else{if(t.length>=5)return;e([...t,O]),lE(O,"add")}},w=()=>{switch(n){case"favorite":return"";case"created":return" ";case"selected":return" ";case"all":default:return" "}},T=()=>{switch(i){case"top_liked":return" ()";case"top_disliked":return"";case"none":default:return" "}},_=()=>{switch(l){case"":return"";case"":return"";default:return""}},R={root:{backgroundColor:"#2a2a2a",color:"#e0e0e0",borderRadius:"15px",padding:"2px 12px",height:"32px",fontSize:"13px",border:"1px solid #3a3a3a",transition:"all 0.15s ease","&:hover":{backgroundColor:"#3a3a3a",borderColor:"#4a4a4a",transform:"translateY(-1px)"}}};return h.jsxs(h.Fragment,{children:[h.jsx("style",{children:`
                    .dark-menu-item {
                        color: white !important;
                        background-color: transparent !important;
                    }
                    .dark-menu-item:hover,
                    .dark-menu-item[data-hovered] {
                        background-color: #1c7ed6 !important;
                    }
                `}),h.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"0px 5px"},children:h.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",backgroundColor:"#1a1a1a",padding:"8px 15px",borderRadius:"20px",alignItems:"center",justifyContent:"center"},children:[h.jsx("div",{style:{display:"flex",alignItems:"center",color:"#888",marginRight:"4px"},children:h.jsx($O,{size:18,stroke:1.5})}),h.jsxs(wt,{shadow:"md",width:200,children:[h.jsx(wt.Target,{children:h.jsxs(ke,{styles:R,leftSection:h.jsx(QO,{size:14}),children:[T()," ",h.jsx("span",{style:{marginLeft:"4px",fontSize:"10px"},children:""})]})}),h.jsxs(wt.Dropdown,{styles:{dropdown:{backgroundColor:"#2a2a2a",border:"1px solid #3a3a3a"}},children:[h.jsx(wt.Item,{onClick:()=>{s("none"),n0("none")},className:"dark-menu-item",children:" "}),h.jsx(wt.Divider,{style:{borderColor:"#3a3a3a"}}),h.jsx(wt.Item,{onClick:()=>{s("top_liked"),n0("top_liked")},className:"dark-menu-item",children:" ( )"}),h.jsx(wt.Divider,{style:{borderColor:"#3a3a3a"}}),h.jsx(wt.Item,{onClick:()=>{s("top_disliked"),n0("top_disliked")},className:"dark-menu-item",children:" ( )"})]})]}),h.jsxs(wt,{shadow:"md",width:200,children:[h.jsx(wt.Target,{children:h.jsxs(ke,{leftSection:h.jsx(y5,{size:14}),styles:{root:{backgroundColor:l?"#1c7ed6":"#2a2a2a",color:l?"white":"#e0e0e0",borderRadius:"15px",padding:"2px 12px",height:"32px",fontSize:"13px",border:l?"1px solid #1c7ed6":"1px solid #3a3a3a",transition:"all 0.15s ease","&:hover":{backgroundColor:l?"#1864ab":"#3a3a3a",borderColor:l?"#1864ab":"#4a4a4a",transform:"translateY(-1px)"}}},children:[_()," ",h.jsx("span",{style:{marginLeft:"4px",fontSize:"10px"},children:""})]})}),h.jsxs(wt.Dropdown,{styles:{dropdown:{backgroundColor:"#2a2a2a",border:"1px solid #3a3a3a"}},children:[h.jsx(wt.Item,{onClick:()=>{c(null),r0(null)},className:"dark-menu-item",children:""}),h.jsx(wt.Divider,{style:{borderColor:"#3a3a3a"}}),h.jsx(wt.Item,{onClick:()=>{c(""),r0("")},className:"dark-menu-item",children:""}),h.jsx(wt.Divider,{style:{borderColor:"#3a3a3a"}}),h.jsx(wt.Item,{onClick:()=>{c(""),r0("")},className:"dark-menu-item",children:""})]})]}),!S&&h.jsxs(h.Fragment,{children:[h.jsx(ke,{onClick:()=>{p(!0),ez()},leftSection:h.jsx(U5,{size:14}),styles:{root:{backgroundColor:t.length>0?"#1c7ed6":"#2a2a2a",color:t.length>0?"white":"#e0e0e0",borderRadius:"15px",padding:"2px 12px",height:"32px",fontSize:"13px",border:t.length>0?"1px solid #1c7ed6":"1px solid #3a3a3a",transition:"all 0.15s ease","&:hover":{backgroundColor:t.length>0?"#1864ab":"#3a3a3a",borderColor:t.length>0?"#1864ab":"#4a4a4a",transform:"translateY(-1px)"}}},children:t.length>0?` (${t.length})`:""}),h.jsx(Gr,{opened:d,onClose:()=>p(!1),title:`  (${t.length}/5)`,centered:!0,styles:{content:{backgroundColor:"#2a2a2a"},header:{backgroundColor:"#2a2a2a",color:"white"},body:{backgroundColor:"#2a2a2a"}},children:v?h.jsx(ne,{style:{display:"flex",justifyContent:"center",padding:"20px"},children:h.jsx(gr,{color:"blue"})}):h.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"10px"},children:[m.map(O=>{const D=t.includes(O),I=!D&&t.length>=5;return h.jsx(ke,{onClick:()=>E(O),disabled:I,styles:{root:{backgroundColor:D?"#1c7ed6":"#3a3a3a",color:I?"#666":"white",borderRadius:"20px",border:"none",opacity:I?.5:1,cursor:I?"not-allowed":"pointer","&:hover":{backgroundColor:D?"#1864ab":I?"#3a3a3a":"#4a4a4a"}}},children:O},O)}),m.length===0&&h.jsx(z,{c:"dimmed",children:"  "})]})})]}),h.jsxs(wt,{shadow:"md",width:200,children:[h.jsx(wt.Target,{children:h.jsxs(ke,{leftSection:h.jsx($5,{size:14}),styles:{root:{backgroundColor:n!=="all"?"#1c7ed6":"#2a2a2a",color:n!=="all"?"white":"#e0e0e0",borderRadius:"15px",padding:"2px 12px",height:"32px",fontSize:"13px",border:n!=="all"?"1px solid #1c7ed6":"1px solid #3a3a3a",transition:"all 0.15s ease","&:hover":{backgroundColor:n!=="all"?"#1864ab":"#3a3a3a",borderColor:n!=="all"?"#1864ab":"#4a4a4a",transform:"translateY(-1px)"}}},children:[w()," ",h.jsx("span",{style:{marginLeft:"4px",fontSize:"10px"},children:""})]})}),h.jsxs(wt.Dropdown,{styles:{dropdown:{backgroundColor:"#2a2a2a",border:"1px solid #3a3a3a"}},children:[h.jsx(wt.Item,{onClick:()=>{r("all"),Tf("all")},className:"dark-menu-item",children:" "}),h.jsx(wt.Divider,{style:{borderColor:"#3a3a3a"}}),h.jsx(wt.Item,{onClick:()=>{r("favorite"),Tf("favorite")},className:"dark-menu-item",children:" "}),h.jsx(wt.Divider,{style:{borderColor:"#3a3a3a"}}),h.jsx(wt.Item,{onClick:()=>{r("created"),Tf("created")},className:"dark-menu-item",children:"  "}),h.jsx(wt.Divider,{style:{borderColor:"#3a3a3a"}}),h.jsx(wt.Item,{onClick:()=>{r("selected"),Tf("selected")},className:"dark-menu-item",children:"  "})]})]})]})})]})}async function Bz(){return(await st("/v1/promotions/list")).promotions}function Uz({promotion:t,opened:e,onClose:n}){if(!t)return null;const r=()=>{t.action_url&&window.open(t.action_url,"_blank"),n()};return h.jsxs(Gr,{opened:e,onClose:n,centered:!0,withCloseButton:!1,size:"sm",padding:0,radius:"xl",styles:{content:{backgroundColor:"rgb(28, 28, 30)",border:"1px solid rgba(255, 255, 255, 0.08)",maxHeight:"85vh",overflow:"hidden",display:"flex",flexDirection:"column"},body:{padding:0,flex:1,overflow:"hidden",display:"flex",flexDirection:"column"},overlay:{backgroundColor:"rgba(0, 0, 0, 0.75)",backdropFilter:"blur(4px)",zIndex:1e3},inner:{zIndex:1001,padding:"16px"}},children:[h.jsx(Sw,{onClick:n,pos:"absolute",top:12,right:12,size:"md",radius:"xl",style:{zIndex:10,backgroundColor:"rgba(0, 0, 0, 0.5)",color:"white",border:"1px solid rgba(255, 255, 255, 0.15)",backdropFilter:"blur(8px)"}}),t.photo_url&&h.jsx(_r,{src:t.photo_url,alt:t.title,h:180,fit:"cover",style:{flexShrink:0}}),h.jsx(ne,{style:{flex:1,overflowY:"auto",minHeight:0},children:h.jsxs(oe,{px:"xl",py:"lg",align:"center",gap:"sm",children:[h.jsx(z,{ta:"center",fw:800,size:"xl",c:"white",style:{lineHeight:1.3},children:t.title}),h.jsx(ne,{mt:4,style:{color:"#a1a1aa",textAlign:"left",fontSize:"var(--mantine-font-size-sm)",lineHeight:1.6,whiteSpace:"pre-line",width:"100%",wordBreak:"break-word"},dangerouslySetInnerHTML:{__html:t.description}}),h.jsxs(oe,{w:"100%",mt:"md",gap:"sm",children:[t.action_url&&t.action_text&&h.jsx(ke,{fullWidth:!0,size:"md",variant:"gradient",gradient:{from:"#667eea",to:"#764ba2",deg:90},radius:"xl",onClick:r,styles:{root:{boxShadow:"0 4px 15px rgba(102, 126, 234, 0.3)"}},children:t.action_text}),h.jsx(ke,{variant:"subtle",color:"gray",size:"sm",radius:"xl",fullWidth:!0,onClick:n,children:""})]})]})})]})}const Hz=20,qz={backgroundColor:"#111113",minHeight:"100vh",color:"#e4e4e7",paddingBottom:"90px"},Fz=`
  .custom-pagination .mantine-Pagination-control {
    background-color: #000000;
    border: 1px solid #3f3f46;
    color: #e4e4e7;
    transition: all 0.2s;
  }
  .custom-pagination .mantine-Pagination-control:not([data-active]):not([data-disabled]):hover {
    background-color: #18181b;
  }
  .custom-pagination .mantine-Pagination-control[data-active] {
    background-color: #228be6 !important;
    border-color: #228be6 !important;
    color: #ffffff !important;
  }
  .custom-pagination .mantine-Pagination-control[data-active]:hover {
    background-color: #1c7ed6 !important;
  }
  .custom-pagination .mantine-Pagination-control[data-disabled] {
    background-color: #000000 !important;
    border: 1px solid #3f3f46 !important;
    color: #52525b !important;
    opacity: 0.5;
    cursor: not-allowed;
  }
`,uE=t=>({id:t.public_id,name:t.name,description:t.description,image:null,file_id:t.file_id,tags:t.tags??[],is_favorited:t.is_favorite,is_liked:!1,likes:t.likes_count??0,dislikes:t.dislikes_count??0,favorites_count:t.favorites_count??0,chats_count:t.chats_count??0});function dE(){const[t,e]=_w(),[n,r]=A.useState(1),[i,s]=A.useState([]),[l,c]=A.useState(!1),[d,p]=A.useState(null),[m,g]=A.useState(1),[v,b]=A.useState([]),[S,k]=A.useState(null),[E,w]=A.useState(""),[T,_]=A.useState("none"),[R,O]=A.useState(null),[D,I]=A.useState(!1),[H,V]=A.useState(()=>localStorage.getItem("nsfw_accepted")==="true"),[K,Q]=A.useState(()=>t.get("filter")||"all"),[re,Re]=A.useState(!1),[ye,me]=A.useState(!1),[q,te]=A.useState([]),[ue,Ce]=A.useState(0),[ae,Se]=A.useState(!1),ge=A.useRef(!1);A.useEffect(()=>{(async()=>{try{const Je=await st("/v1/user/is-admin");me(Je.is_admin)}catch(Je){console.error("Failed to check admin status:",Je),me(!1)}})()},[]),A.useEffect(()=>{const We=setTimeout(async()=>{try{const Ke=(await Bz()).filter(gt=>!(gt.show_once&&localStorage.getItem(`promo_viewed_${gt.id}`)==="true"));Ke.sort((gt,Yt)=>Yt.priority-gt.priority),Ke.length>0&&(te(Ke),Ce(0),Se(!0))}catch(Je){console.error("Failed to fetch promotions:",Je)}},5e3);return()=>clearTimeout(We)},[]);const he=A.useCallback(()=>{const We=q[ue];We?.show_once&&localStorage.setItem(`promo_viewed_${We.id}`,"true");const Je=ue+1;Je<q.length?Ce(Je):Se(!1)},[q,ue]);A.useEffect(()=>{(async()=>{if(ge.current)return;const Je=sessionStorage.getItem("deeplink_character_id");if(Je){ge.current=!0,sessionStorage.removeItem("deeplink_character_id");try{const Ke=await st(`/v1/characters/${Je}`),gt=uE(Ke);JD(gt.id,gt.name),O(gt),I(!0)}catch(Ke){console.error("Failed to load character from deep link:",Ke),QD(Je)}}})()},[]),A.useEffect(()=>{const We=()=>{Re(window.scrollY>300)};return window.addEventListener("scroll",We),()=>window.removeEventListener("scroll",We)},[]);const Le=A.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]),rt=A.useCallback(We=>{Q(We),We==="all"?t.delete("filter"):t.set("filter",We),e(t)},[t,e]);A.useEffect(()=>{r(1)},[v,S,K,E,T,H]),A.useEffect(()=>{(async()=>{c(!0),p(null);try{const Je=new URLSearchParams({filter_type:K,page:n.toString(),page_size:Hz.toString(),sort_by:T,show_nsfw:H.toString()});v.forEach(Yt=>Je.append("tags",Yt)),S&&Je.append("tags",S);const Ke=E.trim();Ke&&Je.append("search_query",Ke);const gt=await st(`/v1/characters/list?${Je}`);g(gt.total_pages),s(gt.characters.map(uE))}catch(Je){console.error("Failed to fetch characters:",Je),p("   .")}finally{c(!1)}})(),window.scrollTo({top:0,behavior:"smooth"})},[n,v,S,K,E,T,H]);const ve=A.useCallback(We=>{O(We),I(!0)},[]),Kt=A.useCallback(()=>I(!1),[]),Ct=A.useCallback(We=>w(We),[]),Ae=A.useCallback(We=>{s(Je=>Je.map(Ke=>Ke.id===We.id?We:Ke)),O(We)},[]),ie=A.useCallback(We=>{s(Je=>Je.filter(Ke=>Ke.id!==We)),O(null)},[]),He=A.useMemo(()=>E?`  "${E}"   `:"  ",[E]);return h.jsxs(ne,{style:qz,children:[h.jsx("style",{children:Fz}),h.jsx(Ms,{onSearch:Ct,nsfwEnabled:H,onNsfwChange:V}),h.jsx(Mn,{size:"xl",pt:"md",children:h.jsx(ne,{mb:"xl",children:h.jsx(Pz,{selectedTags:v,onTagsChange:b,currentFilterType:K,onFilterTypeChange:rt,sortBy:T,onSortChange:_,selectedGender:S,onGenderChange:k})})}),h.jsxs(Mn,{size:"xl",style:{position:"relative",minHeight:"50vh"},children:[h.jsx(lp,{visible:l,zIndex:1e3,overlayProps:{radius:"sm",blur:2,backgroundOpacity:.5,color:"#000"},loaderProps:{type:"bars",color:"blue"}}),d&&h.jsx(Mi,{h:200,children:h.jsx(z,{c:"red.4",size:"lg",fw:500,children:d})}),!l&&!d&&i.length===0&&h.jsxs(Mi,{h:300,style:{flexDirection:"column"},children:[h.jsx(A5,{size:48,stroke:1.5,color:"#52525b"}),h.jsx(z,{c:"dimmed",mt:"md",size:"lg",children:He})]}),h.jsx(kw,{cols:{base:1,xs:2,sm:2,md:3,lg:4,xl:5},spacing:{base:"md",sm:"lg"},verticalSpacing:{base:"md",sm:"xl"},children:i.map(We=>h.jsx(i3,{character:We,onOpen:()=>ve(We)},We.id))}),m>1&&h.jsx(Mi,{mt:50,children:h.jsx(Uj,{total:m,value:n,onChange:r,size:"lg",radius:"md",withEdges:!0,withControls:!1,className:"custom-pagination"})}),h.jsx(zz,{character:R,opened:D,onClose:Kt,onCharacterUpdate:Ae,onCharacterDelete:ie,filterType:K,isAdmin:ye})]}),h.jsx(Uz,{promotion:q[ue]??null,opened:ae,onClose:he}),h.jsx(Hj,{mounted:re,transition:"slide-up",duration:300,children:We=>h.jsx(qn,{style:{...We,position:"fixed",bottom:84,right:24,zIndex:1e3},size:48,radius:"xl",variant:"filled",color:"blue",onClick:Le,"aria-label":" ",children:h.jsx(XO,{size:24})})})]})}const a0=2,nu=50,l0=10,Sl=1e3,ru=1,iu=120,Vz={background:"linear-gradient(135deg, #2d2d2d 0%, #252525 100%)",border:"1px solid rgba(255, 255, 255, 0.08)",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.25)"},vv={background:"linear-gradient(135deg, #3a3a3a 0%, #323232 100%)",border:"1px solid rgba(255, 255, 255, 0.05)"},Wz={...vv,border:"2px solid #667eea",boxShadow:"0 0 20px rgba(102, 126, 234, 0.2)"},$z={background:"linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.05) 100%)",border:"1px solid rgba(102, 126, 234, 0.2)",borderRadius:"12px"};function Gz(){const[t,e]=A.useState([]),[n,r]=A.useState(!0),[i,s]=A.useState(5),[l,c]=A.useState(!1),[d,p]=A.useState(!1),[m,g]=A.useState(!1),[v,b]=A.useState(null),[S,k]=A.useState(null),[E,w]=A.useState(null),[T,_]=A.useState(""),[R,O]=A.useState(18),[D,I]=A.useState("male"),[H,V]=A.useState(""),[K,Q]=A.useState(null),[re,Re]=A.useState(null),[ye,me]=A.useState(null),[q,te]=A.useState(null),ue=A.useCallback(ie=>{const He=ie.trim();return He?He.length<a0?` ${a0} `:He.length>nu?` ${nu} `:/^[\p{L}\s\-']+$/u.test(He)?null:" ,   ":" "},[]),Ce=A.useCallback(ie=>{if(ie===""||ie===null||ie===void 0)return" ";const He=Number(ie);return isNaN(He)||!Number.isInteger(He)?"  ":He<ru?` ${ru}`:He>iu?` ${iu}`:null},[]),ae=A.useCallback(ie=>{const He=ie.trim();return He?He.length<l0?` ${l0} `:He.length>Sl?` ${Sl} `:null:" "},[]),Se=A.useCallback(ie=>{const He=ie.slice(0,nu);_(He),Re(null)},[]),ge=A.useCallback(ie=>{if(ie===""||ie===null||ie===void 0){O(""),me(null);return}const He=Number(ie);if(!isNaN(He)){const We=Math.min(Math.max(Math.floor(He),ru),iu);O(We),me(null)}},[]),he=A.useCallback(ie=>{const He=ie.slice(0,Sl);V(He),te(null)},[]),Le=A.useCallback(async()=>{try{r(!0);const ie=await Bw();e(ie.profiles),s(ie.max_profiles),dz(ie.count)}catch(ie){console.error("Failed to load profiles:",ie)}finally{r(!1)}},[]);A.useEffect(()=>{Le()},[Le]);const rt=A.useCallback(()=>{_(""),O(18),I("male"),V(""),Q(null),Re(null),me(null),te(null)},[]),ve=A.useCallback(async()=>{const ie=ue(T),He=Ce(R),We=ae(H);if(Re(ie),me(He),te(We),ie||He||We){Q("   ");return}LC(),g(!0),Q(null);const Je={name:T.trim(),age:Number(R),is_female:D==="female",is_male:D==="male",description:H.trim()};try{const Ke=await Uw(Je);IC(Ke.id),await Le(),p(!1),rt()}catch(Ke){const gt=Ke?.message||"   ";PC(gt),Q(gt)}finally{g(!1)}},[T,R,D,H,Le,rt,ue,Ce,ae]),Kt=A.useCallback(async ie=>{if(!ie.is_selected){b(ie.id);try{await Hw(ie.id),BC(ie.id,ie.name),await Le()}catch(He){console.error("Failed to select profile:",He)}finally{b(null)}}},[Le]),Ct=A.useCallback(async ie=>{k(ie);try{await s3(ie),uz(ie),w(null),await Le()}catch(He){console.error("Failed to delete profile:",He)}finally{k(null)}},[Le]),Ae=t.length<i;return h.jsxs(yt,{p:"lg",radius:"xl",style:Vz,children:[h.jsxs(oe,{gap:"md",children:[h.jsxs(pe,{justify:"space-between",align:"center",style:{cursor:"pointer"},onClick:()=>c(!l),children:[h.jsxs(pe,{gap:"sm",children:[h.jsx(Pw,{size:24,color:"#667eea"}),h.jsx(z,{size:"lg",fw:600,c:"#ffffff",style:{fontFamily:"Roboto, sans-serif"},children:" "}),h.jsxs(Ut,{size:"sm",color:"violet",variant:"light",children:[t.length,"/",i]})]}),h.jsx(qn,{variant:"subtle",color:"gray",children:l?h.jsx(up,{size:20}):h.jsx(Gu,{size:20})})]}),h.jsx(Yv,{in:l,children:h.jsxs(oe,{gap:"md",mt:"sm",children:[h.jsx(ne,{p:"md",style:$z,children:h.jsxs(pe,{gap:"sm",align:"flex-start",children:[h.jsx(dp,{size:18,color:"#667eea",style:{flexShrink:0,marginTop:2}}),h.jsxs(oe,{gap:4,children:[h.jsx(z,{c:"#e4e4e7",size:"sm",children:"  -    .           , ,      ."}),h.jsxs(z,{c:"dimmed",size:"xs",children:["   ",i,"       ."]})]})]})}),n?h.jsx(ne,{ta:"center",py:"lg",children:h.jsx(gr,{color:"violet",size:"sm"})}):h.jsxs(h.Fragment,{children:[t.map(ie=>h.jsx(yt,{p:"md",radius:"lg",style:ie.is_selected?Wz:vv,children:h.jsx(oe,{gap:"sm",children:h.jsxs(pe,{justify:"space-between",align:"flex-start",children:[h.jsxs(oe,{gap:4,style:{flex:1},children:[h.jsxs(pe,{gap:"sm",children:[h.jsx(z,{c:"white",fw:600,children:ie.name}),ie.is_selected&&h.jsx(Ut,{size:"xs",color:"violet",variant:"filled",children:""})]}),h.jsxs(z,{c:"dimmed",size:"xs",children:[ie.age," , ",ie.is_female?"":""," "]}),h.jsx(z,{c:"#9ca3af",size:"xs",lineClamp:2,children:ie.description})]}),h.jsxs(pe,{gap:"xs",children:[!ie.is_selected&&h.jsx(ke,{size:"xs",variant:"light",color:"violet",leftSection:v===ie.id?h.jsx(gr,{size:12,color:"violet"}):h.jsx(Xr,{size:14}),onClick:()=>Kt(ie),disabled:v!==null,children:""}),h.jsx(qn,{variant:"subtle",color:"red",onClick:()=>w(ie.id),disabled:S!==null,children:h.jsx(ah,{size:16})})]})]})})},ie.id)),Ae&&!d&&h.jsx(ke,{fullWidth:!0,variant:"light",color:"violet",leftSection:h.jsx(Iw,{size:18}),onClick:()=>{p(!0),rt()},children:" "}),d&&h.jsx(yt,{p:"md",radius:"lg",style:vv,children:h.jsxs(oe,{gap:"md",children:[h.jsxs(pe,{justify:"space-between",children:[h.jsx(z,{c:"white",size:"sm",fw:600,children:" "}),h.jsx(qn,{variant:"subtle",color:"gray",onClick:()=>{p(!1),rt()},children:h.jsx(ty,{size:16})})]}),h.jsx($u,{label:` (${a0}-${nu} .)`,placeholder:"  ?",value:T,onChange:ie=>Se(ie.target.value),maxLength:nu,required:!0,size:"sm",error:re,styles:{label:{color:"#9ca3af",marginBottom:4,fontSize:12},input:{backgroundColor:"#1a1a1a",border:"1px solid rgba(255,255,255,0.1)",color:"white"}}}),h.jsx(xw,{label:` (${ru}-${iu})`,placeholder:" ",value:R,onChange:ge,min:ru,max:iu,allowDecimal:!1,allowNegative:!1,hideControls:!0,required:!0,size:"sm",error:ye,styles:{label:{color:"#9ca3af",marginBottom:4,fontSize:12},input:{backgroundColor:"#1a1a1a",border:"1px solid rgba(255,255,255,0.1)",color:"white"}}}),h.jsxs(ne,{children:[h.jsx(z,{size:"xs",c:"#9ca3af",mb:4,children:""}),h.jsx(Kv,{value:D,onChange:ie=>I(ie),fullWidth:!0,size:"sm",data:[{label:"",value:"male"},{label:"",value:"female"}],styles:{root:{backgroundColor:"#1a1a1a"},label:{color:"white",fontSize:12},indicator:{backgroundColor:"#667eea"}}})]}),h.jsx(Pl,{label:` (${l0}-${Sl} .)`,placeholder:" : , , ...",value:H,onChange:ie=>he(ie.target.value),minRows:3,maxLength:Sl,required:!0,size:"sm",error:q,styles:{label:{color:"#9ca3af",marginBottom:4,fontSize:12},input:{backgroundColor:"#1a1a1a",border:"1px solid rgba(255,255,255,0.1)",color:"white"}}}),h.jsxs(z,{c:"dimmed",size:"xs",ta:"right",mt:-8,children:[H.length,"/",Sl]}),K&&h.jsx(z,{c:"red",size:"xs",children:K}),h.jsx(ke,{fullWidth:!0,variant:"gradient",gradient:{from:"#667eea",to:"#764ba2"},onClick:ve,loading:m,leftSection:h.jsx(Xr,{size:16}),size:"sm",children:""})]})}),t.length===0&&!d&&h.jsx(z,{c:"dimmed",size:"sm",ta:"center",py:"md",children:"    .  !"})]})]})})]}),h.jsx(Gr,{opened:E!==null,onClose:()=>w(null),title:" ?",centered:!0,size:"sm",styles:{content:{backgroundColor:"#2b2b2b",borderRadius:"16px"},header:{backgroundColor:"#2b2b2b",borderBottom:"1px solid rgba(255, 255, 255, 0.1)"},title:{color:"white",fontWeight:600}},children:h.jsxs(oe,{gap:"md",children:[h.jsx(z,{c:"dimmed",size:"sm",children:" ,     ?    ."}),h.jsxs(pe,{justify:"flex-end",gap:"sm",children:[h.jsx(ke,{variant:"subtle",color:"gray",onClick:()=>w(null),children:""}),h.jsx(ke,{color:"red",onClick:()=>E&&Ct(E),loading:S===E,children:""})]})]})})]})}async function Kz(){return st("/v1/ai-settings/")}async function Yz(t){return st("/v1/ai-settings/",{method:"PUT",body:JSON.stringify(t)})}const Xz={background:"linear-gradient(135deg, #2d2d2d 0%, #252525 100%)",border:"1px solid rgba(255, 255, 255, 0.08)",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.25)"},Jz={background:"linear-gradient(135deg, rgba(102, 126, 234, 0.1) 0%, rgba(118, 75, 162, 0.05) 100%)",border:"1px solid rgba(102, 126, 234, 0.2)",borderRadius:"12px"},c0={background:"linear-gradient(135deg, #3a3a3a 0%, #323232 100%)",border:"1px solid rgba(255, 255, 255, 0.05)"};function Qz(t){return t<=.3?{label:"  ",description:"  ,  .  .",color:"#60a5fa",badgeColor:"blue"}:t<=.7?{label:"",description:"     .  .",color:"#34d399",badgeColor:"green"}:t<=1.2?{label:"",description:"    .   .",color:"#fbbf24",badgeColor:"yellow"}:t<=1.6?{label:" ",description:" ,      .",color:"#f97316",badgeColor:"orange"}:{label:" ",description:"      . !",color:"#ef4444",badgeColor:"red"}}function Zz(t){return t<=.3?{label:"",description:"     .    .",color:"#60a5fa",badgeColor:"blue"}:t<=.6?{label:"",description:"  .   .",color:"#34d399",badgeColor:"green"}:t<=.9?{label:"",description:"       .  .",color:"#34d399",badgeColor:"green"}:{label:"",description:"  .   ,   .",color:"#f97316",badgeColor:"orange"}}const fE=1.1,hE=.9,pE="medium",eL={short:"      , 1-3 .",medium:"       .",long:",      ."};function tL(){const[t,e]=A.useState(!1),[n,r]=A.useState(!0),[i,s]=A.useState(!1),[l,c]=A.useState(!1),[d,p]=A.useState(null),[m,g]=A.useState(1),[v,b]=A.useState(.9),[S,k]=A.useState("medium"),E=A.useCallback(async()=>{try{r(!0);const H=await Kz();p(H),g(H.temperature),b(H.top_p),k(H.response_length),c(!1)}catch(H){console.error("Failed to load AI settings:",H)}finally{r(!1)}},[]);A.useEffect(()=>{t&&!d&&E()},[t,d,E]),A.useEffect(()=>{if(!d)return;const H=m!==d.temperature||v!==d.top_p||S!==d.response_length;c(H)},[m,v,S,d]);const w=A.useCallback(async()=>{s(!0);try{const H=await Yz({temperature:m,top_p:v,response_length:S});p(H),c(!1),Gt.show({title:"",message:"  ",color:"green",icon:h.jsx(Xr,{size:18}),autoClose:3e3})}catch(H){console.error("Failed to save AI settings:",H),Gt.show({title:"",message:"   ",color:"red",autoClose:4e3})}finally{s(!1)}},[m,v,S]),T=A.useCallback(()=>{g(fE),b(hE),k(pE)},[]),_=m===fE&&v===hE&&S===pE,R=A.useMemo(()=>Qz(m),[m]),O=A.useMemo(()=>Zz(v),[v]),D=m>1.6||m<.1,I=v>.95||v<.2;return h.jsx(yt,{p:"lg",radius:"xl",style:Xz,children:h.jsxs(oe,{gap:"md",children:[h.jsxs(pe,{justify:"space-between",align:"center",style:{cursor:"pointer"},onClick:()=>e(!t),children:[h.jsxs(pe,{gap:"sm",children:[h.jsx(r5,{size:24,color:"#667eea"}),h.jsx(z,{size:"lg",fw:600,c:"#ffffff",style:{fontFamily:"Roboto, sans-serif"},children:" "})]}),h.jsx(qn,{variant:"subtle",color:"gray",children:t?h.jsx(up,{size:20}):h.jsx(Gu,{size:20})})]}),h.jsx(Yv,{in:t,children:h.jsxs(oe,{gap:"md",mt:"sm",children:[h.jsx(ne,{p:"md",style:Jz,children:h.jsxs(pe,{gap:"sm",align:"flex-start",children:[h.jsx(dp,{size:18,color:"#667eea",style:{flexShrink:0,marginTop:2}}),h.jsx(z,{c:"#e4e4e7",size:"sm",children:"  -   .     ,    .     ."})]})}),n?h.jsx(ne,{ta:"center",py:"lg",children:h.jsx(gr,{color:"violet",size:"sm"})}):h.jsxs(h.Fragment,{children:[h.jsx(yt,{p:"md",radius:"lg",style:c0,children:h.jsxs(oe,{gap:"sm",children:[h.jsxs(pe,{justify:"space-between",align:"center",children:[h.jsx(z,{c:"white",fw:600,size:"sm",style:{fontFamily:"Roboto, sans-serif"},children:" "}),h.jsx(Ut,{size:"sm",color:R.badgeColor,variant:"light",children:R.label})]}),h.jsx(z,{c:"#9ca3af",size:"xs",children:"  ,        .        ."}),h.jsx(ne,{px:"xs",pt:"md",pb:"xs",children:h.jsx(Y0,{value:m,onChange:g,min:0,max:2,step:.1,precision:1,color:R.badgeColor,marks:[{value:0,label:"0"},{value:.5,label:"0.5"},{value:1,label:"1.0"},{value:1.5,label:"1.5"},{value:2,label:"2.0"}],styles:{track:{backgroundColor:"#1a1a1a"},mark:{borderColor:"#555"},markLabel:{color:"#6b7280",fontSize:10},thumb:{borderColor:R.color,backgroundColor:R.color}}})}),h.jsx(yt,{p:"sm",radius:"md",style:{background:`linear-gradient(135deg, ${R.color}15 0%, ${R.color}08 100%)`,border:`1px solid ${R.color}30`},children:h.jsxs(pe,{gap:"xs",align:"flex-start",children:[D&&h.jsx(oh,{size:16,color:R.color,style:{flexShrink:0,marginTop:2}}),h.jsxs(oe,{gap:2,children:[h.jsxs(z,{c:"#e4e4e7",size:"xs",fw:500,children:[m.toFixed(1),"  ",R.label]}),h.jsx(z,{c:"#9ca3af",size:"xs",children:R.description})]})]})})]})}),h.jsx(yt,{p:"md",radius:"lg",style:c0,children:h.jsxs(oe,{gap:"sm",children:[h.jsxs(pe,{justify:"space-between",align:"center",children:[h.jsx(z,{c:"white",fw:600,size:"sm",style:{fontFamily:"Roboto, sans-serif"},children:" "}),h.jsx(Ut,{size:"sm",color:O.badgeColor,variant:"light",children:O.label})]}),h.jsx(z,{c:"#9ca3af",size:"xs",children:"        .          ."}),h.jsx(ne,{px:"xs",pt:"md",pb:"xs",children:h.jsx(Y0,{value:v,onChange:b,min:0,max:1,step:.05,precision:2,color:O.badgeColor,marks:[{value:0,label:"0"},{value:.25,label:"0.25"},{value:.5,label:"0.5"},{value:.75,label:"0.75"},{value:1,label:"1.0"}],styles:{track:{backgroundColor:"#1a1a1a"},mark:{borderColor:"#555"},markLabel:{color:"#6b7280",fontSize:10},thumb:{borderColor:O.color,backgroundColor:O.color}}})}),h.jsx(yt,{p:"sm",radius:"md",style:{background:`linear-gradient(135deg, ${O.color}15 0%, ${O.color}08 100%)`,border:`1px solid ${O.color}30`},children:h.jsxs(pe,{gap:"xs",align:"flex-start",children:[I&&h.jsx(oh,{size:16,color:O.color,style:{flexShrink:0,marginTop:2}}),h.jsxs(oe,{gap:2,children:[h.jsxs(z,{c:"#e4e4e7",size:"xs",fw:500,children:[v.toFixed(2),"  ",O.label]}),h.jsx(z,{c:"#9ca3af",size:"xs",children:O.description})]})]})})]})}),h.jsx(yt,{p:"md",radius:"lg",style:c0,children:h.jsxs(oe,{gap:"sm",children:[h.jsx(z,{c:"white",fw:600,size:"sm",style:{fontFamily:"Roboto, sans-serif"},children:" "}),h.jsx(z,{c:"#9ca3af",size:"xs",children:"       ."}),h.jsx(Kv,{value:S,onChange:H=>k(H),fullWidth:!0,size:"sm",data:[{label:"",value:"short"},{label:"",value:"medium"},{label:"",value:"long"}],styles:{root:{backgroundColor:"#1a1a1a"},label:{color:"white",fontSize:12},indicator:{backgroundColor:"#667eea"}}}),h.jsx(z,{c:"#9ca3af",size:"xs",style:{minHeight:32},children:eL[S]})]})}),h.jsxs(pe,{gap:"sm",children:[h.jsx(ke,{variant:"light",color:"gray",onClick:T,disabled:_||i,leftSection:h.jsx(sh,{size:16}),size:"sm",radius:"md",children:" "}),h.jsx(ke,{style:{flex:1},variant:"gradient",gradient:{from:"#667eea",to:"#764ba2"},onClick:w,loading:i,disabled:!l,leftSection:h.jsx(Xr,{size:16}),size:"sm",radius:"md",children:l?" ":" "})]})]})]})})]})})}function nL(){const t=Li(),[e,n]=A.useState(null),[r,i]=A.useState(!0);if(A.useEffect(()=>(BD(),ot.BackButton.show(),ot.BackButton.onClick(()=>t("/")),(async()=>{try{const d=await st("/v1/profile/");n(d)}catch(d){console.error("  :",d)}finally{i(!1)}})(),()=>{ot.BackButton.hide()}),[t]),r)return h.jsx(Mi,{style:{height:"100vh",background:"#1a1a1a"},children:h.jsx(gr,{size:"lg",color:"violet"})});if(!e)return h.jsx(Mn,{size:"sm",py:"xl",style:{background:"#1a1a1a",minHeight:"100vh"},children:h.jsx(z,{c:"red",ta:"center",size:"lg",fw:600,style:{fontFamily:"Roboto, sans-serif"},children:"   "})});const s=ot.initDataUnsafe.user,l=e.requests_used_today/e.daily_requests_limit*100;return h.jsxs(h.Fragment,{children:[h.jsx(Ms,{}),h.jsx(Mn,{size:"sm",py:"lg",style:{background:"#1a1a1a",minHeight:"100vh",fontFamily:"Roboto, sans-serif"},children:h.jsxs(oe,{gap:"lg",children:[h.jsx(yt,{p:"xl",radius:"xl",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",boxShadow:"0 8px 32px rgba(102, 126, 234, 0.3)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:h.jsxs(oe,{align:"center",gap:"md",children:[h.jsx(yu,{src:s?.photo_url,size:90,radius:"50%",style:{border:"3px solid rgba(255, 255, 255, 0.9)",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.2)"},children:s?.first_name?.[0]}),h.jsxs(z,{size:"xl",fw:600,c:"white",ta:"center",style:{fontFamily:"Roboto, sans-serif"},children:[s?.first_name," ",s?.last_name]}),s?.username&&h.jsxs(z,{size:"md",c:"rgba(255,255,255,0.85)",ta:"center",fw:500,style:{fontFamily:"Roboto, sans-serif"},children:["@",s.username]}),h.jsxs(z,{size:"sm",c:"rgba(255,255,255,0.7)",ta:"center",fw:400,style:{fontFamily:"Roboto, sans-serif"},children:["ID: ",s?.id]})]})}),h.jsxs(yt,{p:"md",radius:"xl",style:{background:"linear-gradient(135deg, #2d2d2d 0%, #252525 100%)",border:"1px solid rgba(255, 255, 255, 0.08)",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.25)"},children:[h.jsx(z,{size:"sm",c:"#9ca3af",ta:"center",mb:"md",fw:500,style:{fontFamily:"Roboto, sans-serif"},children:"   "}),h.jsxs(pe,{justify:"center",gap:"sm",children:[h.jsx(ke,{variant:"gradient",gradient:{from:"#f59e0b",to:"#d97706"},radius:"xl",size:"md",leftSection:h.jsx(tv,{size:18}),onClick:()=>t("/?filter=favorite"),style:{fontFamily:"Roboto, sans-serif",fontWeight:600,boxShadow:"0 4px 15px rgba(245, 158, 11, 0.3)",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:c=>{c.currentTarget.style.transform="translateY(-2px)",c.currentTarget.style.boxShadow="0 6px 20px rgba(245, 158, 11, 0.4)"},onMouseLeave:c=>{c.currentTarget.style.transform="translateY(0)",c.currentTarget.style.boxShadow="0 4px 15px rgba(245, 158, 11, 0.3)"},children:""}),h.jsx(ke,{variant:"gradient",gradient:{from:"#8b5cf6",to:"#7c3aed"},radius:"xl",size:"md",leftSection:h.jsx(I5,{size:18}),onClick:()=>t("/?filter=created"),style:{fontFamily:"Roboto, sans-serif",fontWeight:600,boxShadow:"0 4px 15px rgba(139, 92, 246, 0.3)",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:c=>{c.currentTarget.style.transform="translateY(-2px)",c.currentTarget.style.boxShadow="0 6px 20px rgba(139, 92, 246, 0.4)"},onMouseLeave:c=>{c.currentTarget.style.transform="translateY(0)",c.currentTarget.style.boxShadow="0 4px 15px rgba(139, 92, 246, 0.3)"},children:""}),h.jsx(ke,{variant:"gradient",gradient:{from:"#06b6d4",to:"#0891b2"},radius:"xl",size:"md",leftSection:h.jsx(Cs,{size:18}),onClick:()=>t("/?filter=selected"),style:{fontFamily:"Roboto, sans-serif",fontWeight:600,boxShadow:"0 4px 15px rgba(6, 182, 212, 0.3)",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:c=>{c.currentTarget.style.transform="translateY(-2px)",c.currentTarget.style.boxShadow="0 6px 20px rgba(6, 182, 212, 0.4)"},onMouseLeave:c=>{c.currentTarget.style.transform="translateY(0)",c.currentTarget.style.boxShadow="0 4px 15px rgba(6, 182, 212, 0.3)"},children:""})]})]}),h.jsx(Gz,{}),h.jsx(tL,{}),h.jsxs(yt,{p:"md",radius:"xl",style:{background:"linear-gradient(135deg, #2d2d2d 0%, #252525 100%)",border:"1px solid rgba(255, 255, 255, 0.08)",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.25)"},children:[h.jsx(z,{size:"sm",c:"#9ca3af",ta:"center",mb:"md",fw:500,style:{fontFamily:"Roboto, sans-serif"},children:" "}),h.jsxs(pe,{justify:"center",gap:"sm",children:[h.jsx(ke,{variant:"gradient",gradient:{from:"#a855f7",to:"#7c3aed"},radius:"xl",size:"md",leftSection:h.jsx(ev,{size:18}),onClick:()=>t("/tariffs"),style:{fontFamily:"Roboto, sans-serif",fontWeight:600,boxShadow:"0 4px 15px rgba(168, 85, 247, 0.3)",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:c=>{c.currentTarget.style.transform="translateY(-2px)",c.currentTarget.style.boxShadow="0 6px 20px rgba(168, 85, 247, 0.4)"},onMouseLeave:c=>{c.currentTarget.style.transform="translateY(0)",c.currentTarget.style.boxShadow="0 4px 15px rgba(168, 85, 247, 0.3)"},children:""}),h.jsx(ke,{variant:"gradient",gradient:{from:"#f59f00",to:"#fab005"},radius:"xl",size:"md",leftSection:h.jsx(ji,{size:18}),onClick:()=>t("/energy"),style:{fontFamily:"Roboto, sans-serif",fontWeight:600,boxShadow:"0 4px 15px rgba(245, 159, 0, 0.3)",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:c=>{c.currentTarget.style.transform="translateY(-2px)",c.currentTarget.style.boxShadow="0 6px 20px rgba(245, 159, 0, 0.4)"},onMouseLeave:c=>{c.currentTarget.style.transform="translateY(0)",c.currentTarget.style.boxShadow="0 4px 15px rgba(245, 159, 0, 0.3)"},children:""})]})]}),h.jsx(yt,{p:"lg",radius:"xl",style:{background:"linear-gradient(135deg, #2d2d2d 0%, #252525 100%)",border:"1px solid rgba(255, 255, 255, 0.08)",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.25)"},children:h.jsxs(oe,{gap:"md",children:[h.jsxs(pe,{justify:"space-between",align:"center",children:[h.jsx(z,{size:"lg",fw:600,c:"#ffffff",style:{fontFamily:"Roboto, sans-serif"},children:""}),h.jsx(Ut,{size:"lg",variant:"gradient",gradient:e.is_premium?{from:"yellow",to:"orange"}:{from:"gray",to:"dark"},style:{fontFamily:"Roboto, sans-serif",fontWeight:600,padding:"10px 16px",fontSize:"14px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.2)"},children:e.tariff_name})]}),e.is_premium&&e.subscription_end_date&&h.jsxs(ne,{pt:"xs",children:[h.jsx(z,{size:"sm",c:"#9ca3af",fw:500,mb:6,style:{fontFamily:"Roboto, sans-serif"},children:" "}),h.jsx(z,{size:"md",fw:600,c:"#e5e7eb",style:{fontFamily:"Roboto, sans-serif"},children:new Date(e.subscription_end_date).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})})]})]})}),h.jsx(yt,{p:"lg",radius:"xl",style:{background:e.energy_available>0?"linear-gradient(135deg, #1a1a2e 0%, #16213e 100%)":"linear-gradient(135deg, #2d2d2d 0%, #252525 100%)",border:e.energy_available>0?"1px solid rgba(245, 159, 0, 0.3)":"1px solid rgba(255, 255, 255, 0.08)",boxShadow:e.energy_available>0?"0 4px 20px rgba(245, 159, 0, 0.15)":"0 4px 20px rgba(0, 0, 0, 0.25)"},children:h.jsxs(oe,{gap:"md",children:[h.jsxs(pe,{justify:"space-between",align:"center",children:[h.jsxs(pe,{gap:"sm",children:[h.jsx(ji,{size:24,color:e.energy_available>0?"#f59f00":"#6b7280"}),h.jsx(z,{size:"lg",fw:600,c:"#ffffff",style:{fontFamily:"Roboto, sans-serif"},children:""})]}),e.energy_available>0&&h.jsxs(Ut,{size:"lg",variant:"gradient",gradient:{from:"#f59f00",to:"#fab005"},style:{fontFamily:"Roboto, sans-serif",fontWeight:600,padding:"10px 16px",fontSize:"14px",boxShadow:"0 2px 8px rgba(245, 159, 0, 0.3)"},children:[e.energy_available," ."]})]}),e.energy_available>0?h.jsx(yt,{p:"md",radius:"lg",style:{background:"linear-gradient(135deg, rgba(245, 159, 0, 0.1) 0%, rgba(250, 176, 5, 0.05) 100%)",border:"1px solid rgba(245, 159, 0, 0.2)"},children:h.jsxs(oe,{gap:"xs",children:[h.jsxs(z,{size:"md",fw:600,c:"#f59f00",style:{fontFamily:"Roboto, sans-serif"},children:[": ",e.energy_available,"  "]}),h.jsx(z,{size:"sm",c:"#9ca3af",style:{fontFamily:"Roboto, sans-serif"},children:"        "})]})}):h.jsx(yt,{p:"md",radius:"lg",style:{background:"linear-gradient(135deg, #3a3a3a 0%, #323232 100%)",border:"1px solid rgba(255, 255, 255, 0.05)",cursor:"pointer"},onClick:()=>t("/energy"),children:h.jsxs(oe,{gap:"sm",align:"center",children:[h.jsx(z,{size:"md",fw:500,c:"#9ca3af",ta:"center",style:{fontFamily:"Roboto, sans-serif"},children:"   "}),h.jsx(z,{size:"sm",c:"#6b7280",ta:"center",style:{fontFamily:"Roboto, sans-serif"},children:"  !  ,    -      "}),h.jsx(ke,{variant:"gradient",gradient:{from:"#f59f00",to:"#fab005"},radius:"xl",size:"sm",leftSection:h.jsx(ji,{size:16}),onClick:c=>{c.stopPropagation(),t("/energy")},style:{fontFamily:"Roboto, sans-serif",fontWeight:600,marginTop:"4px"},children:"   49 ."})]})})]})}),h.jsx(yt,{p:"lg",radius:"xl",style:{background:"linear-gradient(135deg, #2d2d2d 0%, #252525 100%)",border:"1px solid rgba(255, 255, 255, 0.08)",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.25)"},children:h.jsxs(oe,{gap:"lg",children:[h.jsxs(pe,{justify:"space-between",align:"center",children:[h.jsx(z,{size:"lg",fw:600,c:"#ffffff",style:{fontFamily:"Roboto, sans-serif"},children:"  "}),h.jsxs(Ut,{size:"lg",variant:"light",color:l>80?"red":l>50?"orange":"green",style:{fontFamily:"Roboto, sans-serif",fontWeight:600,padding:"8px 14px",fontSize:"13px"},children:[Math.round(100-l),"% "]})]}),h.jsx(yt,{p:"lg",radius:"lg",style:{background:"linear-gradient(135deg, #3a3a3a 0%, #323232 100%)",border:"1px solid rgba(255, 255, 255, 0.05)",boxShadow:"0 2px 12px rgba(0, 0, 0, 0.15)"},children:h.jsxs(oe,{gap:"md",children:[h.jsxs(pe,{justify:"space-between",align:"center",children:[h.jsx(z,{size:"md",fw:600,c:"#ffffff",style:{fontFamily:"Roboto, sans-serif"},children:"  "}),h.jsxs(Ut,{size:"md",variant:"filled",color:l>80?"red":l>50?"orange":"blue",style:{fontFamily:"Roboto, sans-serif",fontWeight:600,fontSize:"13px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.2)"},children:[e.requests_used_today," / ",e.daily_requests_limit]})]}),h.jsx(Ff,{value:l,color:l>80?"red":l>50?"orange":"blue",size:"lg",radius:"xl",style:{boxShadow:"0 2px 10px rgba(0, 0, 0, 0.2)"}}),h.jsxs(pe,{justify:"space-between",mt:4,children:[h.jsx(z,{size:"sm",c:"#c1c7cd",fw:500,style:{fontFamily:"Roboto, sans-serif"},children:"  "}),h.jsxs(z,{size:"md",fw:600,c:e.requests_remaining_today>10?"#60a5fa":"#f87171",style:{fontFamily:"Roboto, sans-serif"},children:[e.requests_remaining_today," "]})]})]})}),h.jsx(qj,{color:"rgba(255, 255, 255, 0.08)",size:"xs"}),h.jsx(yt,{p:"lg",radius:"lg",style:{background:"linear-gradient(135deg, #3a3a3a 0%, #323232 100%)",border:"1px solid rgba(255, 255, 255, 0.05)",boxShadow:"0 2px 12px rgba(0, 0, 0, 0.15)"},children:h.jsxs(pe,{justify:"space-between",align:"center",wrap:"nowrap",children:[h.jsxs(ne,{children:[h.jsx(z,{size:"sm",c:"#9ca3af",fw:500,mb:8,style:{fontFamily:"Roboto, sans-serif"},children:"  "}),h.jsx(z,{size:"xl",fw:600,c:"#ffffff",style:{fontFamily:"Roboto, sans-serif"},children:e.max_characters_create===null?" ":e.max_characters_create})]}),h.jsx(Ut,{size:"md",variant:"light",color:e.max_characters_create===null?"green":"blue",style:{fontFamily:"Roboto, sans-serif",fontWeight:600,fontSize:"13px",padding:"8px 14px",whiteSpace:"nowrap"},children:e.max_characters_create===null?" ":` ${e.max_characters_create} .`})]})}),h.jsx(yt,{p:"lg",radius:"lg",style:{background:"linear-gradient(135deg, #3a3a3a 0%, #323232 100%)",border:"1px solid rgba(255, 255, 255, 0.05)",boxShadow:"0 2px 12px rgba(0, 0, 0, 0.15)"},children:h.jsxs(pe,{justify:"space-between",align:"center",wrap:"nowrap",children:[h.jsxs(ne,{children:[h.jsx(z,{size:"sm",c:"#9ca3af",fw:500,mb:8,style:{fontFamily:"Roboto, sans-serif"},children:"  "}),h.jsx(z,{size:"xl",fw:600,c:"#ffffff",style:{fontFamily:"Roboto, sans-serif"},children:e.max_chats===null?" ":e.max_chats})]}),h.jsx(Ut,{size:"md",variant:"light",color:e.max_chats===null?"green":"blue",style:{fontFamily:"Roboto, sans-serif",fontWeight:600,fontSize:"13px",padding:"8px 14px",whiteSpace:"nowrap"},children:e.max_chats===null?" ":` ${e.max_chats} .`})]})}),e.daily_photo_limit!==null&&e.daily_photo_limit>0&&h.jsx(yt,{p:"lg",radius:"lg",style:{background:"linear-gradient(135deg, #3a3a3a 0%, #323232 100%)",border:"1px solid rgba(255, 255, 255, 0.05)",boxShadow:"0 2px 12px rgba(0, 0, 0, 0.15)"},children:h.jsxs(oe,{gap:"md",children:[h.jsxs(pe,{justify:"space-between",align:"center",children:[h.jsx(z,{size:"md",fw:600,c:"#ffffff",style:{fontFamily:"Roboto, sans-serif"},children:"  "}),h.jsxs(Ut,{size:"md",variant:"filled",color:e.photo_remaining_today!==null&&e.daily_photo_limit?e.photo_remaining_today/e.daily_photo_limit*100>50?"blue":e.photo_remaining_today/e.daily_photo_limit*100>20?"orange":"red":"gray",style:{fontFamily:"Roboto, sans-serif",fontWeight:600,fontSize:"13px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.2)"},children:[e.photo_used_today??0," / ",e.daily_photo_limit]})]}),h.jsx(Ff,{value:e.photo_used_today!==null&&e.daily_photo_limit?e.photo_used_today/e.daily_photo_limit*100:0,color:e.photo_remaining_today!==null&&e.daily_photo_limit?e.photo_remaining_today/e.daily_photo_limit*100>50?"blue":e.photo_remaining_today/e.daily_photo_limit*100>20?"orange":"red":"gray",size:"lg",radius:"xl",style:{boxShadow:"0 2px 10px rgba(0, 0, 0, 0.2)"}}),h.jsxs(pe,{justify:"space-between",mt:4,children:[h.jsx(z,{size:"sm",c:"#c1c7cd",fw:500,style:{fontFamily:"Roboto, sans-serif"},children:"  "}),h.jsxs(z,{size:"md",fw:600,c:e.photo_remaining_today!==null&&e.photo_remaining_today>5?"#60a5fa":"#f87171",style:{fontFamily:"Roboto, sans-serif"},children:[e.photo_remaining_today??0," "]})]})]})}),e.daily_voice_limit!==null&&e.daily_voice_limit>0&&h.jsx(yt,{p:"lg",radius:"lg",style:{background:"linear-gradient(135deg, #3a3a3a 0%, #323232 100%)",border:"1px solid rgba(255, 255, 255, 0.05)",boxShadow:"0 2px 12px rgba(0, 0, 0, 0.15)"},children:h.jsxs(oe,{gap:"md",children:[h.jsxs(pe,{justify:"space-between",align:"center",children:[h.jsx(z,{size:"md",fw:600,c:"#ffffff",style:{fontFamily:"Roboto, sans-serif"},children:"  "}),h.jsxs(Ut,{size:"md",variant:"filled",color:e.voice_remaining_today!==null&&e.daily_voice_limit?e.voice_remaining_today/e.daily_voice_limit*100>50?"blue":e.voice_remaining_today/e.daily_voice_limit*100>20?"orange":"red":"gray",style:{fontFamily:"Roboto, sans-serif",fontWeight:600,fontSize:"13px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.2)"},children:[e.voice_used_today??0," / ",e.daily_voice_limit]})]}),h.jsx(Ff,{value:e.voice_used_today!==null&&e.daily_voice_limit?e.voice_used_today/e.daily_voice_limit*100:0,color:e.voice_remaining_today!==null&&e.daily_voice_limit?e.voice_remaining_today/e.daily_voice_limit*100>50?"blue":e.voice_remaining_today/e.daily_voice_limit*100>20?"orange":"red":"gray",size:"lg",radius:"xl",style:{boxShadow:"0 2px 10px rgba(0, 0, 0, 0.2)"}}),h.jsxs(pe,{justify:"space-between",mt:4,children:[h.jsx(z,{size:"sm",c:"#c1c7cd",fw:500,style:{fontFamily:"Roboto, sans-serif"},children:"  "}),h.jsxs(z,{size:"md",fw:600,c:e.voice_remaining_today!==null&&e.voice_remaining_today>5?"#60a5fa":"#f87171",style:{fontFamily:"Roboto, sans-serif"},children:[e.voice_remaining_today??0," "]})]})]})}),h.jsx(yt,{p:"lg",radius:"xl",style:{background:"linear-gradient(135deg, #0088cc 0%, #005580 100%)",border:"1px solid rgba(255, 255, 255, 0.15)",boxShadow:"0 4px 20px rgba(0, 136, 204, 0.3)",cursor:"pointer",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onClick:()=>ot.openTelegramLink("https://t.me/AI_RolePlay_TG"),onMouseEnter:c=>{c.currentTarget.style.transform="translateY(-2px)",c.currentTarget.style.boxShadow="0 6px 28px rgba(0, 136, 204, 0.4)"},onMouseLeave:c=>{c.currentTarget.style.transform="translateY(0)",c.currentTarget.style.boxShadow="0 4px 20px rgba(0, 136, 204, 0.3)"},children:h.jsxs(oe,{gap:"md",align:"center",children:[h.jsx(ne,{style:{fontSize:"48px",lineHeight:1},children:""}),h.jsx(z,{size:"lg",fw:700,c:"white",ta:"center",style:{fontFamily:"Roboto, sans-serif"},children:"   !"}),h.jsx(z,{size:"sm",c:"rgba(255,255,255,0.9)",ta:"center",fw:500,style:{fontFamily:"Roboto, sans-serif"},children:"   Telegram       ,    "}),h.jsx(Ut,{size:"lg",variant:"white",style:{fontFamily:"Roboto, sans-serif",fontWeight:600,padding:"12px 20px",fontSize:"14px",color:"#0088cc",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15)"},children:"@AI_RolePlay_TG"})]})})]})})]})})]})}const ao={fontFamily:"Roboto, sans-serif"},rL=h.jsx(xs,{color:"dark.4",size:28,radius:"xl",children:h.jsx(Xr,{size:16,color:"white"})}),iL={color:"#ced4da",fontSize:"1rem",lineHeight:1.5,fontFamily:"Roboto, sans-serif"},oL=t=>t.replace(/\n/g,"<br />"),qr="tariff-description";function sL({tariff:t,isActive:e,onToggle:n,loading:r}){const[i,s]=A.useState(!1);A.useEffect(()=>{e&&HD(t.id,t.name,t.price_rub,t.price_stars)},[e,t.id,t.name,t.price_rub,t.price_stars]);const l=A.useMemo(()=>({borderColor:e?"#3390ec":"#373A40",transition:"all 0.3s ease",cursor:"pointer",backgroundColor:e?"#2C2E33":"#25262b"}),[e]),c=A.useCallback(async(d,p)=>{if(d.stopPropagation(),i)return;s(!0);const m=p==="stars"?t.price_stars:t.price_rub;qD(t.id,t.name,p,m);try{if(p==="stars"){const g=await st(`/v1/invoice/create-invoice?tariff_id=${t.id}&payment_type=${p}`,{method:"POST"});ot.openInvoice(g.invoice_link,v=>{s(!1),v==="paid"?(FD(t.id,t.name,"stars"),Gt.show({title:"!",message:"  ",color:"teal"})):v==="cancelled"?(t0(t.id,t.name,"stars"),Gt.show({title:"",message:"  ",color:"yellow"})):v==="failed"&&(t0(t.id,t.name,"stars"),Gt.show({title:"",message:"   ",color:"red"}))})}else if(p==="yookassa"){const g=await st(`/v1/invoice/create-invoice?tariff_id=${t.id}&payment_type=${p}`,{method:"POST"}),v=`${window.location.origin}/#/payment?token=${encodeURIComponent(g.confirmation.confirmation_token)}&type=tariff`;ot.openLink(v),s(!1)}else if(p==="tinkoff"){const g=await st(`/v1/invoice/create-invoice?tariff_id=${t.id}&payment_type=${p}`,{method:"POST"});ot.openLink(g.payment_url),s(!1)}else{const g=await st(`/v1/invoice/create-invoice?tariff_id=${t.id}&payment_type=${p}`,{method:"POST"});if(!window.Robokassa){s(!1),Gt.show({title:"",message:"    ",color:"red"});return}window.Robokassa.StartPayment({MerchantLogin:g.merchant_login,OutSum:g.out_sum,InvId:g.inv_id,Description:`  ${t.name}    RolePlayTopbot`,Shp_tariff_id:g.shp_tariff_id,Shp_user_id:g.shp_user_id,Culture:g.culture,Encoding:g.encoding,SignatureValue:g.signature_value,IsTest:0}),s(!1)}}catch(g){s(!1),t0(t.id,t.name,p);const v=g.message||" ";v.includes("404")?Gt.show({title:"",message:v.includes("User")?"  ":"  ",color:"red"}):v.includes("400")?Gt.show({title:"",message:" ",color:"red"}):v.includes("403")?Gt.show({title:" ",message:"      ",color:"red"}):Gt.show({title:"",message:v,color:"red"})}},[t.id,t.name,t.price_rub,t.price_stars,i]);return h.jsxs(h.Fragment,{children:[h.jsx("style",{children:`
                .${qr} p { margin: 0 0 0.5em 0; }
                .${qr} p:last-child { margin-bottom: 0; }
                .${qr} ul, .${qr} ol { margin: 0.5em 0; padding-left: 1.5em; }
                .${qr} li { margin: 0.25em 0; }
                .${qr} a { color: #FFC107; text-decoration: underline; }
                .${qr} a:hover { color: #FF9800; }
                .${qr} strong, .${qr} b { color: white; font-weight: 700; }
                .${qr} em, .${qr} i { font-style: italic; }
            `}),h.jsxs($n,{shadow:"sm",padding:"lg",radius:"lg",withBorder:!0,bg:"#25262b",style:l,onClick:n,children:[h.jsxs(pe,{justify:"space-between",align:"center",wrap:"nowrap",children:[h.jsxs(oe,{gap:4,children:[h.jsx(z,{fw:800,size:"xl",c:"white",style:{lineHeight:1.2,letterSpacing:"0.5px",...ao},children:t.name}),h.jsxs(pe,{gap:8,align:"center",children:[h.jsxs(pe,{gap:2,align:"center",children:[h.jsx(z,{size:"md",c:"white",fw:700,style:ao,children:t.price_rub}),h.jsx(Dw,{size:14,color:"white"})]}),h.jsx(z,{size:"md",c:"dimmed",children:"|"}),h.jsxs(pe,{gap:4,align:"center",children:[h.jsx(lh,{size:14,color:"#FFC107",style:{filter:"drop-shadow(0 0 4px rgba(255, 193, 7, 0.4))"}}),h.jsx(z,{size:"md",c:"white",fw:700,style:ao,children:t.price_stars})]})]})]}),h.jsxs(pe,{gap:"xs",children:[h.jsxs(Ut,{color:t.is_active?"teal":"gray",variant:"light",size:"lg",radius:"md",style:{textTransform:"none"},children:[t.duration_days," ."]}),e?h.jsx(up,{size:24,color:"gray"}):h.jsx(Gu,{size:24,color:"gray"})]})]}),h.jsx(Yv,{in:e,children:h.jsx(ne,{pt:"lg",children:h.jsxs(oe,{gap:"lg",children:[h.jsx(ne,{className:qr,style:iL,dangerouslySetInnerHTML:{__html:oL(t.description)}}),h.jsxs(ml,{spacing:"xs",center:!0,icon:rL,children:[h.jsx(ml.Item,{children:h.jsxs(z,{c:"gray.3",size:"sm",style:ao,children:[h.jsx(z,{span:!0,c:"white",fw:700,inherit:!0,children:t.daily_requests_limit}),"   "]})}),t.max_characters_create!==null&&h.jsx(ml.Item,{children:h.jsxs(z,{c:"gray.3",size:"sm",style:ao,children:[" ",h.jsx(z,{span:!0,c:"white",fw:700,inherit:!0,children:t.max_characters_create})," "]})}),h.jsx(ml.Item,{children:h.jsxs(z,{c:"gray.3",size:"sm",style:ao,children:[" ",h.jsx(z,{span:!0,c:"white",fw:700,inherit:!0,children:t.max_chats}),"   "]})}),(t.daily_photo_limit||0)>0&&h.jsx(ml.Item,{children:h.jsxs(z,{c:"gray.3",size:"sm",style:ao,children:[h.jsx(z,{span:!0,c:"white",fw:700,inherit:!0,children:t.daily_photo_limit}),"   "]})}),(t.daily_voice_limit||0)>0&&h.jsx(ml.Item,{children:h.jsxs(z,{c:"gray.3",size:"sm",style:ao,children:[h.jsx(z,{span:!0,c:"white",fw:700,inherit:!0,children:t.daily_voice_limit}),"   "]})})]}),h.jsx(ne,{bg:"rgba(51, 144, 236, 0.1)",p:"xs",style:{borderRadius:10,border:"1px solid rgba(51, 144, 236, 0.2)"},children:h.jsxs(pe,{gap:10,wrap:"nowrap",align:"start",children:[h.jsx(dp,{size:20,color:"#3390ec",style:{flexShrink:0,marginTop:2}}),h.jsxs(z,{size:"xs",c:"gray.4",lh:1.4,style:ao,children:["  ",h.jsx(z,{span:!0,c:"#FFC107",fw:700,children:"Stars"}),"   .      ."]})]})}),h.jsxs(oe,{gap:"sm",children:[h.jsxs(ke,{fullWidth:!0,variant:"gradient",gradient:{from:"#3390ec",to:"#0e72d6",deg:135},size:"md",radius:"md",h:50,onClick:d=>c(d,"stars"),loading:r||i,disabled:i,leftSection:h.jsx(lh,{size:22,color:"#FFD700",style:{filter:"drop-shadow(0 1px 2px rgba(0,0,0,0.2))"}}),rightSection:h.jsx(hu,{size:24,color:"white",style:{opacity:.8}}),styles:{label:{fontWeight:700,fontSize:"1.1rem",color:"white"},root:{boxShadow:"0 4px 12px rgba(51, 144, 236, 0.3)"}},children:[t.price_stars," Stars"]}),h.jsxs(ke,{fullWidth:!0,variant:"filled",color:"gray.0",size:"md",radius:"md",h:50,onClick:d=>c(d,"yookassa"),loading:r||i,disabled:i,styles:{root:{backgroundColor:"#F5F5F7",border:"1px solid #E0E0E0",justifyContent:"space-between",paddingLeft:20,paddingRight:20,color:"#000"},inner:{width:"100%",justifyContent:"space-between"},label:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"}},children:[h.jsx(_r,{src:"https://yookassa.ru/files/Guide_files/logo-black.svg",h:24,w:"auto",fit:"contain",alt:"YooKassa"}),h.jsxs(z,{span:!0,fw:800,size:"1.1rem",c:"black",style:{fontFamily:"Roboto, sans-serif"},children:[t.price_rub," "]})]}),h.jsxs(ke,{fullWidth:!0,variant:"filled",color:"gray.0",size:"md",radius:"md",h:50,onClick:d=>c(d,"tinkoff"),loading:r||i,disabled:i,styles:{root:{backgroundColor:"#FFDD2D",border:"1px solid #E6C827",justifyContent:"space-between",paddingLeft:20,paddingRight:20,color:"#000"},inner:{width:"100%",justifyContent:"space-between"},label:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"}},children:[h.jsx(z,{span:!0,fw:800,size:"1.1rem",c:"black",style:{fontFamily:"Roboto, sans-serif"},children:""}),h.jsxs(z,{span:!0,fw:800,size:"1.1rem",c:"black",style:{fontFamily:"Roboto, sans-serif"},children:[t.price_rub," "]})]})]})]})})})]})]})}const sa={fontFamily:"Roboto, sans-serif"},aL={radius:"sm",blur:2,backgroundOpacity:.1},lL={color:"yellow",type:"bars"},cL={display:"flex",alignItems:"center",justifyContent:"center"},uL={position:"relative",minHeight:"80vh"},mE={label:sa};function dL(){const t=Li(),[e,n]=A.useState([]),[r,i]=A.useState(!1),[s,l]=A.useState(null),[c,d]=A.useState(!1),[p,m]=A.useState(null);A.useEffect(()=>{UD(),(async()=>{i(!0),d(!1);try{const T=(await st("/v1/tariffs/")).tariffs.filter(_=>_.is_active);n(T),T.length>0&&m(T[0].id)}catch(w){console.error(w),d(!0)}finally{i(!1)}})()},[]);const g=A.useCallback(E=>{m(w=>w===E?null:E)},[]),v=A.useCallback(E=>{const w=e.find(T=>T.id===E);w&&(l(E),ot.openInvoice(w.invoice_link,T=>{T==="paid"&&ot.close(),l(null)}))},[e]),b=A.useCallback(()=>{t("/")},[t]),S=A.useCallback(()=>{t("/energy")},[t]),k=A.useMemo(()=>e.map(E=>h.jsx(sL,{tariff:E,isActive:p===E.id,onToggle:()=>g(E.id),loading:s===E.id},E.id)),[e,p,g,v,s]);return c?h.jsx(Mn,{size:"sm",h:"100vh",style:cL,children:h.jsxs(oe,{align:"center",gap:"lg",ta:"center",children:[h.jsx(oh,{size:56,color:"orange"}),h.jsx(go,{order:3,c:"white",style:sa,children:""}),h.jsx(z,{size:"lg",c:"gray.4",fw:500,style:sa,children:"Bruh,     .     "}),h.jsx(ke,{leftSection:h.jsx(ey,{size:20}),variant:"white",color:"dark",size:"md",onClick:b,styles:mE,children:" "})]})}):h.jsxs(h.Fragment,{children:[h.jsx(Ms,{}),h.jsxs(Mn,{size:"sm",py:"md",style:uL,children:[h.jsx(lp,{visible:r,zIndex:1e3,overlayProps:aL,loaderProps:lL}),h.jsxs(ne,{mb:"lg",mt:"xl",ta:"center",children:[h.jsx(go,{order:2,mb:"xs",c:"white",style:sa,children:""}),h.jsx(z,{c:"dimmed",size:"md",style:sa,children:"      ,            : )"})]}),h.jsx(ne,{mb:"xl",p:"md",style:{background:"linear-gradient(135deg, rgba(255, 193, 7, 0.15) 0%, rgba(245, 159, 0, 0.1) 100%)",borderRadius:"14px",border:"1px solid rgba(255, 193, 7, 0.3)"},children:h.jsxs(oe,{align:"center",gap:"sm",children:[h.jsx(ji,{size:24,color:"#f59f00"}),h.jsx(z,{size:"sm",c:"gray.3",ta:"center",fw:500,style:sa,children:"     ?     ,       "}),h.jsx(ke,{variant:"gradient",gradient:{from:"#f59f00",to:"#fab005",deg:135},size:"sm",leftSection:h.jsx(ji,{size:16}),onClick:S,styles:mE,children:"   49 ."})]})}),h.jsx(oe,{gap:"md",children:k}),!r&&e.length===0&&!c&&h.jsx(Mi,{mt:"xl",children:h.jsx(z,{c:"dimmed",style:sa,children:"     ."})})]})]})}const ou={fontFamily:"Roboto, sans-serif"};function fL({energyPackage:t,isActive:e,onToggle:n}){const[r,i]=A.useState(!1);A.useEffect(()=>{e&&LD(t.id,t.name,t.price_rub,t.energy_amount)},[e,t.id,t.name,t.price_rub,t.energy_amount]);const s=A.useMemo(()=>({borderColor:e?"#f59f00":"#373A40",transition:"all 0.3s ease",cursor:"pointer",backgroundColor:e?"#2C2E33":"#25262b"}),[e]),l=A.useCallback(async(c,d)=>{if(c.stopPropagation(),!r){i(!0),ID(t.id,t.name,t.price_rub);try{if(d==="yookassa"){const p=await st(`/v1/energy/create-invoice?package_id=${t.id}&payment_type=yookassa`,{method:"POST"}),m=`${window.location.origin}/#/payment?token=${encodeURIComponent(p.confirmation.confirmation_token)}&type=energy`;ot.openLink(m)}else{const p=await st(`/v1/energy/create-invoice?package_id=${t.id}&payment_type=tinkoff`,{method:"POST"});ot.openLink(p.payment_url)}i(!1)}catch(p){i(!1),PD(t.id,t.name,t.price_rub);const m=p.message||" ";m.includes("404")?Gt.show({title:"",message:"   ",color:"red"}):m.includes("400")?Gt.show({title:"",message:" ",color:"red"}):Gt.show({title:"",message:m,color:"red"})}}},[t.id,t.name,t.price_rub,r]);return h.jsx(h.Fragment,{children:h.jsxs($n,{shadow:"sm",padding:"lg",radius:"lg",withBorder:!0,bg:"#25262b",style:s,onClick:n,children:[h.jsxs(pe,{justify:"space-between",align:"center",wrap:"nowrap",children:[h.jsxs(oe,{gap:4,children:[h.jsxs(pe,{gap:8,align:"center",children:[h.jsx(xs,{size:36,radius:"xl",variant:"gradient",gradient:{from:"#f59f00",to:"#fab005",deg:135},children:h.jsx(ji,{size:20,color:"white"})}),h.jsx(z,{fw:800,size:"xl",c:"white",style:{lineHeight:1.2,letterSpacing:"0.5px",...ou},children:t.name})]}),h.jsx(pe,{gap:8,align:"center",ml:44,children:h.jsxs(Ut,{size:"lg",radius:"md",variant:"gradient",gradient:{from:"#f59f00",to:"#fab005",deg:135},leftSection:h.jsx(ji,{size:14}),children:[t.energy_amount," "]})})]}),h.jsxs(pe,{gap:"xs",align:"center",children:[h.jsx(oe,{gap:2,align:"end",children:h.jsxs(pe,{gap:2,align:"center",children:[h.jsx(z,{size:"xl",c:"white",fw:800,style:ou,children:t.price_rub}),h.jsx(Dw,{size:18,color:"white"})]})}),e?h.jsx(up,{size:24,color:"gray"}):h.jsx(Gu,{size:24,color:"gray"})]})]}),e&&h.jsx(ne,{pt:"lg",children:h.jsxs(oe,{gap:"lg",children:[h.jsx(z,{c:"gray.4",size:"sm",style:ou,children:t.description}),h.jsx(ne,{bg:"rgba(245, 159, 0, 0.1)",p:"md",style:{borderRadius:12,border:"1px solid rgba(245, 159, 0, 0.3)"},children:h.jsxs(oe,{gap:"sm",children:[h.jsx(z,{size:"sm",fw:600,c:"white",style:ou,children:"  :"}),h.jsxs(pe,{gap:"lg",children:[h.jsxs(pe,{gap:8,children:[h.jsx(xs,{size:28,radius:"xl",color:"blue",variant:"light",children:h.jsx(zw,{size:16})}),h.jsxs(oe,{gap:0,children:[h.jsx(z,{size:"xs",c:"gray.4",children:""}),h.jsx(z,{size:"sm",c:"white",fw:700,children:"1 "})]})]}),h.jsxs(pe,{gap:8,children:[h.jsx(xs,{size:28,radius:"xl",color:"grape",variant:"light",children:h.jsx(Lw,{size:16})}),h.jsxs(oe,{gap:0,children:[h.jsx(z,{size:"xs",c:"gray.4",children:" "}),h.jsx(z,{size:"sm",c:"white",fw:700,children:"3 "})]})]})]})]})}),h.jsx(ne,{bg:"rgba(34, 139, 230, 0.1)",p:"xs",style:{borderRadius:10,border:"1px solid rgba(34, 139, 230, 0.2)"},children:h.jsxs(pe,{gap:10,wrap:"nowrap",align:"start",children:[h.jsx(ji,{size:20,color:"#f59f00",style:{flexShrink:0,marginTop:2}}),h.jsxs(z,{size:"xs",c:"gray.4",lh:1.4,style:ou,children:[h.jsx(z,{span:!0,c:"#f59f00",fw:700,children:"  !"}),"    ,    ,     ."]})]})}),h.jsxs(oe,{gap:"sm",children:[h.jsxs(ke,{fullWidth:!0,variant:"filled",color:"gray.0",size:"md",radius:"md",h:50,onClick:c=>l(c,"yookassa"),loading:r,disabled:r,styles:{root:{backgroundColor:"#F5F5F7",border:"1px solid #E0E0E0",justifyContent:"space-between",paddingLeft:20,paddingRight:20,color:"#000"},inner:{width:"100%",justifyContent:"space-between"},label:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"}},children:[h.jsx(_r,{src:"https://yookassa.ru/files/Guide_files/logo-black.svg",h:24,w:"auto",fit:"contain",alt:"YooKassa"}),h.jsxs(z,{span:!0,fw:800,size:"1.1rem",c:"black",style:{fontFamily:"Roboto, sans-serif"},children:[t.price_rub," "]})]}),h.jsxs(ke,{fullWidth:!0,variant:"filled",color:"gray.0",size:"md",radius:"md",h:50,onClick:c=>l(c,"tinkoff"),loading:r,disabled:r,styles:{root:{backgroundColor:"#FFDD2D",border:"1px solid #E6C827",justifyContent:"space-between",paddingLeft:20,paddingRight:20,color:"#000"},inner:{width:"100%",justifyContent:"space-between"},label:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"}},children:[h.jsx(z,{span:!0,fw:800,size:"1.1rem",c:"black",style:{fontFamily:"Roboto, sans-serif"},children:""}),h.jsxs(z,{span:!0,fw:800,size:"1.1rem",c:"black",style:{fontFamily:"Roboto, sans-serif"},children:[t.price_rub," "]})]})]})]})})]})})}const ai={fontFamily:"Roboto, sans-serif"},hL={radius:"sm",blur:2,backgroundOpacity:.1},pL={color:"yellow",type:"bars"},mL={display:"flex",alignItems:"center",justifyContent:"center"},gL={position:"relative",minHeight:"80vh"},vL={label:ai};function yL(){const t=Li(),[e,n]=A.useState([]),[r,i]=A.useState(!1),[s,l]=A.useState(!1),[c,d]=A.useState(null);A.useEffect(()=>{zD(),(async()=>{i(!0),l(!1);try{const b=await st("/v1/energy-packages/");n(b.packages),b.packages.length>0&&d(b.packages[0].id)}catch(b){console.error(b),l(!0)}finally{i(!1)}})()},[]);const p=A.useCallback(v=>{d(b=>b===v?null:v)},[]),m=A.useCallback(()=>{t("/")},[t]),g=A.useMemo(()=>e.map(v=>h.jsx(fL,{energyPackage:v,isActive:c===v.id,onToggle:()=>p(v.id)},v.id)),[e,c,p]);return s?h.jsx(Mn,{size:"sm",h:"100vh",style:mL,children:h.jsxs(oe,{align:"center",gap:"lg",ta:"center",children:[h.jsx(oh,{size:56,color:"orange"}),h.jsx(go,{order:3,c:"white",style:ai,children:""}),h.jsx(z,{size:"lg",c:"gray.4",fw:500,style:ai,children:"    .  "}),h.jsx(ke,{leftSection:h.jsx(ey,{size:20}),variant:"white",color:"dark",size:"md",onClick:m,styles:vL,children:" "})]})}):h.jsxs(h.Fragment,{children:[h.jsx(Ms,{}),h.jsxs(Mn,{size:"sm",py:"md",style:gL,children:[h.jsx(lp,{visible:r,zIndex:1e3,overlayProps:hL,loaderProps:pL}),h.jsxs(ne,{mb:"xl",mt:{base:"xl",sm:60},ta:"center",children:[h.jsxs(pe,{justify:"center",gap:"xs",mb:"xs",children:[h.jsx(ji,{size:32,color:"#f59f00"}),h.jsx(go,{order:2,c:"white",style:ai,children:""})]}),h.jsx(z,{c:"dimmed",size:"md",style:ai,children:" ,    "})]}),h.jsx(ne,{mb:"xl",p:"md",bg:"rgba(245, 159, 0, 0.08)",style:{borderRadius:16,border:"1px solid rgba(245, 159, 0, 0.2)"},children:h.jsxs(oe,{gap:"md",children:[h.jsxs(pe,{gap:"xs",align:"center",children:[h.jsx(xs,{size:28,radius:"xl",variant:"gradient",gradient:{from:"#f59f00",to:"#fab005",deg:135},children:h.jsx(S5,{size:16})}),h.jsx(z,{size:"sm",fw:600,c:"white",style:ai,children:" "})]}),h.jsxs(oe,{gap:"xs",children:[h.jsxs(pe,{gap:"xs",wrap:"nowrap",children:[h.jsx(Ut,{size:"xs",color:"yellow",variant:"light",circle:!0,children:"1"}),h.jsxs(z,{size:"sm",c:"gray.4",style:ai,children:[h.jsx(z,{span:!0,c:"#f59f00",fw:600,children:" "}),"     ,   "]})]}),h.jsxs(pe,{gap:"xs",wrap:"nowrap",children:[h.jsx(Ut,{size:"xs",color:"yellow",variant:"light",circle:!0,children:"2"}),h.jsxs(z,{size:"sm",c:"gray.4",style:ai,children:[h.jsx(z,{span:!0,c:"#f59f00",fw:600,children:""}),"    ,    "]})]}),h.jsxs(pe,{gap:"xs",wrap:"nowrap",children:[h.jsx(Ut,{size:"xs",color:"yellow",variant:"light",circle:!0,children:"3"}),h.jsxs(z,{size:"sm",c:"gray.4",style:ai,children:[h.jsx(z,{span:!0,c:"#f59f00",fw:600,children:""}),"       "]})]})]}),h.jsx(ne,{p:"sm",bg:"rgba(0,0,0,0.2)",style:{borderRadius:10},children:h.jsxs(pe,{justify:"space-around",children:[h.jsxs(oe,{gap:4,align:"center",children:[h.jsx(xs,{size:36,radius:"xl",color:"blue",variant:"light",children:h.jsx(zw,{size:20})}),h.jsx(z,{size:"xs",c:"gray.5",children:""}),h.jsx(Ut,{color:"blue",variant:"light",size:"sm",children:"1 "})]}),h.jsxs(oe,{gap:4,align:"center",children:[h.jsx(xs,{size:36,radius:"xl",color:"grape",variant:"light",children:h.jsx(Lw,{size:20})}),h.jsx(z,{size:"xs",c:"gray.5",children:""}),h.jsx(Ut,{color:"grape",variant:"light",size:"sm",children:"3 "})]})]})})]})}),h.jsx(z,{size:"sm",fw:600,c:"white",mb:"md",style:ai,children:" :"}),h.jsx(oe,{gap:"md",children:g}),!r&&e.length===0&&!s&&h.jsx(Mi,{mt:"xl",children:h.jsx(z,{c:"dimmed",style:ai,children:"      ."})})]})]})}var u0,gE;function bL(){if(gE)return u0;gE=1;var t=!1,e,n,r,i,s,l,c,d,p,m,g,v,b,S,k;function E(){if(!t){t=!0;var T=navigator.userAgent,_=/(?:MSIE.(\d+\.\d+))|(?:(?:Firefox|GranParadiso|Iceweasel).(\d+\.\d+))|(?:Opera(?:.+Version.|.)(\d+\.\d+))|(?:AppleWebKit.(\d+(?:\.\d+)?))|(?:Trident\/\d+\.\d+.*rv:(\d+\.\d+))/.exec(T),R=/(Mac OS X)|(Windows)|(Linux)/.exec(T);if(v=/\b(iPhone|iP[ao]d)/.exec(T),b=/\b(iP[ao]d)/.exec(T),m=/Android/i.exec(T),S=/FBAN\/\w+;/i.exec(T),k=/Mobile/i.exec(T),g=!!/Win64/.exec(T),_){e=_[1]?parseFloat(_[1]):_[5]?parseFloat(_[5]):NaN,e&&document&&document.documentMode&&(e=document.documentMode);var O=/(?:Trident\/(\d+.\d+))/.exec(T);l=O?parseFloat(O[1])+4:e,n=_[2]?parseFloat(_[2]):NaN,r=_[3]?parseFloat(_[3]):NaN,i=_[4]?parseFloat(_[4]):NaN,i?(_=/(?:Chrome\/(\d+\.\d+))/.exec(T),s=_&&_[1]?parseFloat(_[1]):NaN):s=NaN}else e=n=r=s=i=NaN;if(R){if(R[1]){var D=/(?:Mac OS X (\d+(?:[._]\d+)?))/.exec(T);c=D?parseFloat(D[1].replace("_",".")):!0}else c=!1;d=!!R[2],p=!!R[3]}else c=d=p=!1}}var w={ie:function(){return E()||e},ieCompatibilityMode:function(){return E()||l>e},ie64:function(){return w.ie()&&g},firefox:function(){return E()||n},opera:function(){return E()||r},webkit:function(){return E()||i},safari:function(){return w.webkit()},chrome:function(){return E()||s},windows:function(){return E()||d},osx:function(){return E()||c},linux:function(){return E()||p},iphone:function(){return E()||v},mobile:function(){return E()||v||b||m||k},nativeApp:function(){return E()||S},android:function(){return E()||m},ipad:function(){return E()||b}};return u0=w,u0}var d0,vE;function xL(){if(vE)return d0;vE=1;var t=!!(typeof window<"u"&&window.document&&window.document.createElement),e={canUseDOM:t,canUseWorkers:typeof Worker<"u",canUseEventListeners:t&&!!(window.addEventListener||window.attachEvent),canUseViewport:t&&!!window.screen,isInWorker:!t};return d0=e,d0}var f0,yE;function SL(){if(yE)return f0;yE=1;var t=xL(),e;t.canUseDOM&&(e=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0);function n(r,i){if(!t.canUseDOM||i&&!("addEventListener"in document))return!1;var s="on"+r,l=s in document;if(!l){var c=document.createElement("div");c.setAttribute(s,"return;"),l=typeof c[s]=="function"}return!l&&e&&r==="wheel"&&(l=document.implementation.hasFeature("Events.wheel","3.0")),l}return f0=n,f0}var h0,bE;function EL(){if(bE)return h0;bE=1;var t=bL(),e=SL(),n=10,r=40,i=800;function s(l){var c=0,d=0,p=0,m=0;return"detail"in l&&(d=l.detail),"wheelDelta"in l&&(d=-l.wheelDelta/120),"wheelDeltaY"in l&&(d=-l.wheelDeltaY/120),"wheelDeltaX"in l&&(c=-l.wheelDeltaX/120),"axis"in l&&l.axis===l.HORIZONTAL_AXIS&&(c=d,d=0),p=c*n,m=d*n,"deltaY"in l&&(m=l.deltaY),"deltaX"in l&&(p=l.deltaX),(p||m)&&l.deltaMode&&(l.deltaMode==1?(p*=r,m*=r):(p*=i,m*=i)),p&&!c&&(c=p<1?-1:1),m&&!d&&(d=m<1?-1:1),{spinX:c,spinY:d,pixelX:p,pixelY:m}}return s.getEventType=function(){return t.firefox()?"DOMMouseScroll":e("wheel")?"wheel":"mousewheel"},h0=s,h0}var p0,xE;function kL(){return xE||(xE=1,p0=EL()),p0}var wL=kL();const CL=Tw(wL);function TL(t,e,n,r,i,s){s===void 0&&(s=0);var l=Hl(t,e,s),c=l.width,d=l.height,p=Math.min(c,n),m=Math.min(d,r);return p>m*i?{width:m*i,height:m}:{width:p,height:p/i}}function _L(t){return t.width>t.height?t.width/t.naturalWidth:t.height/t.naturalHeight}function su(t,e,n,r,i){i===void 0&&(i=0);var s=Hl(e.width,e.height,i),l=s.width,c=s.height;return{x:SE(t.x,l,n.width,r),y:SE(t.y,c,n.height,r)}}function SE(t,e,n,r){var i=e*r/2-n/2;return vp(t,-i,i)}function EE(t,e){return Math.sqrt(Math.pow(t.y-e.y,2)+Math.pow(t.x-e.x,2))}function kE(t,e){return Math.atan2(e.y-t.y,e.x-t.x)*180/Math.PI}function AL(t,e,n,r,i,s,l){s===void 0&&(s=0),l===void 0&&(l=!0);var c=l?ML:jL,d=Hl(e.width,e.height,s),p=Hl(e.naturalWidth,e.naturalHeight,s),m={x:c(100,((d.width-n.width/i)/2-t.x/i)/d.width*100),y:c(100,((d.height-n.height/i)/2-t.y/i)/d.height*100),width:c(100,n.width/d.width*100/i),height:c(100,n.height/d.height*100/i)},g=Math.round(c(p.width,m.width*p.width/100)),v=Math.round(c(p.height,m.height*p.height/100)),b=p.width>=p.height*r,S=b?{width:Math.round(v*r),height:v}:{width:g,height:Math.round(g/r)},k=de(de({},S),{x:Math.round(c(p.width-S.width,m.x*p.width/100)),y:Math.round(c(p.height-S.height,m.y*p.height/100))});return{croppedAreaPercentages:m,croppedAreaPixels:k}}function ML(t,e){return Math.min(t,Math.max(0,e))}function jL(t,e){return e}function OL(t,e,n,r,i,s){var l=Hl(e.width,e.height,n),c=vp(r.width/l.width*(100/t.width),i,s),d={x:c*l.width/2-r.width/2-l.width*c*(t.x/100),y:c*l.height/2-r.height/2-l.height*c*(t.y/100)};return{crop:d,zoom:c}}function RL(t,e,n){var r=_L(e);return n.height>n.width?n.height/(t.height*r):n.width/(t.width*r)}function NL(t,e,n,r,i,s){n===void 0&&(n=0);var l=Hl(e.naturalWidth,e.naturalHeight,n),c=vp(RL(t,e,r),i,s),d=r.height>r.width?r.height/t.height:r.width/t.width,p={x:((l.width-t.width)/2-t.x)*d,y:((l.height-t.height)/2-t.y)*d};return{crop:p,zoom:c}}function wE(t,e){return{x:(e.x+t.x)/2,y:(e.y+t.y)/2}}function DL(t){return t*Math.PI/180}function Hl(t,e,n){var r=DL(n);return{width:Math.abs(Math.cos(r)*t)+Math.abs(Math.sin(r)*e),height:Math.abs(Math.sin(r)*t)+Math.abs(Math.cos(r)*e)}}function vp(t,e,n){return Math.min(Math.max(t,e),n)}function Af(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return t.filter(function(n){return typeof n=="string"&&n.length>0}).join(" ").trim()}var zL=`.reactEasyCrop_Container {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  overflow: hidden;
  user-select: none;
  touch-action: none;
  cursor: move;
  display: flex;
  justify-content: center;
  align-items: center;
}

.reactEasyCrop_Image,
.reactEasyCrop_Video {
  will-change: transform; /* this improves performances and prevent painting issues on iOS Chrome */
}

.reactEasyCrop_Contain {
  max-width: 100%;
  max-height: 100%;
  margin: auto;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
}
.reactEasyCrop_Cover_Horizontal {
  width: 100%;
  height: auto;
}
.reactEasyCrop_Cover_Vertical {
  width: auto;
  height: 100%;
}

.reactEasyCrop_CropArea {
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
  border: 1px solid rgba(255, 255, 255, 0.5);
  box-sizing: border-box;
  box-shadow: 0 0 0 9999em;
  color: rgba(0, 0, 0, 0.5);
  overflow: hidden;
}

.reactEasyCrop_CropAreaRound {
  border-radius: 50%;
}

.reactEasyCrop_CropAreaGrid::before {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 0;
  bottom: 0;
  left: 33.33%;
  right: 33.33%;
  border-top: 0;
  border-bottom: 0;
}

.reactEasyCrop_CropAreaGrid::after {
  content: ' ';
  box-sizing: border-box;
  position: absolute;
  border: 1px solid rgba(255, 255, 255, 0.5);
  top: 33.33%;
  bottom: 33.33%;
  left: 0;
  right: 0;
  border-left: 0;
  border-right: 0;
}
`,LL=1,IL=3,PL=1,BL=(function(t){As(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n.cropperRef=A.createRef(),n.imageRef=A.createRef(),n.videoRef=A.createRef(),n.containerPosition={x:0,y:0},n.containerRef=null,n.styleRef=null,n.containerRect=null,n.mediaSize={width:0,height:0,naturalWidth:0,naturalHeight:0},n.dragStartPosition={x:0,y:0},n.dragStartCrop={x:0,y:0},n.gestureZoomStart=0,n.gestureRotationStart=0,n.isTouching=!1,n.lastPinchDistance=0,n.lastPinchRotation=0,n.rafDragTimeout=null,n.rafPinchTimeout=null,n.wheelTimer=null,n.currentDoc=typeof document<"u"?document:null,n.currentWindow=typeof window<"u"?window:null,n.resizeObserver=null,n.previousCropSize=null,n.isInitialized=!1,n.state={cropSize:null,hasWheelJustStarted:!1,mediaObjectFit:void 0},n.initResizeObserver=function(){if(!(typeof window.ResizeObserver>"u"||!n.containerRef)){var r=!0;n.resizeObserver=new window.ResizeObserver(function(i){if(r){r=!1;return}n.computeSizes()}),n.resizeObserver.observe(n.containerRef)}},n.preventZoomSafari=function(r){return r.preventDefault()},n.cleanEvents=function(){n.currentDoc&&(n.currentDoc.removeEventListener("mousemove",n.onMouseMove),n.currentDoc.removeEventListener("mouseup",n.onDragStopped),n.currentDoc.removeEventListener("touchmove",n.onTouchMove),n.currentDoc.removeEventListener("touchend",n.onDragStopped),n.currentDoc.removeEventListener("gesturechange",n.onGestureChange),n.currentDoc.removeEventListener("gestureend",n.onGestureEnd),n.currentDoc.removeEventListener("scroll",n.onScroll))},n.clearScrollEvent=function(){n.containerRef&&n.containerRef.removeEventListener("wheel",n.onWheel),n.wheelTimer&&clearTimeout(n.wheelTimer)},n.onMediaLoad=function(){var r=n.computeSizes();r&&(n.previousCropSize=r,n.emitCropData(),n.setInitialCrop(r),n.isInitialized=!0),n.props.onMediaLoaded&&n.props.onMediaLoaded(n.mediaSize)},n.setInitialCrop=function(r){if(n.props.initialCroppedAreaPercentages){var i=OL(n.props.initialCroppedAreaPercentages,n.mediaSize,n.props.rotation,r,n.props.minZoom,n.props.maxZoom),s=i.crop,l=i.zoom;n.props.onCropChange(s),n.props.onZoomChange&&n.props.onZoomChange(l)}else if(n.props.initialCroppedAreaPixels){var c=NL(n.props.initialCroppedAreaPixels,n.mediaSize,n.props.rotation,r,n.props.minZoom,n.props.maxZoom),s=c.crop,l=c.zoom;n.props.onCropChange(s),n.props.onZoomChange&&n.props.onZoomChange(l)}},n.computeSizes=function(){var r,i,s,l,c,d,p=n.imageRef.current||n.videoRef.current;if(p&&n.containerRef){n.containerRect=n.containerRef.getBoundingClientRect(),n.saveContainerPosition();var m=n.containerRect.width/n.containerRect.height,g=((r=n.imageRef.current)===null||r===void 0?void 0:r.naturalWidth)||((i=n.videoRef.current)===null||i===void 0?void 0:i.videoWidth)||0,v=((s=n.imageRef.current)===null||s===void 0?void 0:s.naturalHeight)||((l=n.videoRef.current)===null||l===void 0?void 0:l.videoHeight)||0,b=p.offsetWidth<g||p.offsetHeight<v,S=g/v,k=void 0;if(b)switch(n.state.mediaObjectFit){default:case"contain":k=m>S?{width:n.containerRect.height*S,height:n.containerRect.height}:{width:n.containerRect.width,height:n.containerRect.width/S};break;case"horizontal-cover":k={width:n.containerRect.width,height:n.containerRect.width/S};break;case"vertical-cover":k={width:n.containerRect.height*S,height:n.containerRect.height};break}else k={width:p.offsetWidth,height:p.offsetHeight};n.mediaSize=de(de({},k),{naturalWidth:g,naturalHeight:v}),n.props.setMediaSize&&n.props.setMediaSize(n.mediaSize);var E=n.props.cropSize?n.props.cropSize:TL(n.mediaSize.width,n.mediaSize.height,n.containerRect.width,n.containerRect.height,n.props.aspect,n.props.rotation);return(((c=n.state.cropSize)===null||c===void 0?void 0:c.height)!==E.height||((d=n.state.cropSize)===null||d===void 0?void 0:d.width)!==E.width)&&n.props.onCropSizeChange&&n.props.onCropSizeChange(E),n.setState({cropSize:E},n.recomputeCropPosition),n.props.setCropSize&&n.props.setCropSize(E),E}},n.saveContainerPosition=function(){if(n.containerRef){var r=n.containerRef.getBoundingClientRect();n.containerPosition={x:r.left,y:r.top}}},n.onMouseDown=function(r){n.currentDoc&&(r.preventDefault(),n.currentDoc.addEventListener("mousemove",n.onMouseMove),n.currentDoc.addEventListener("mouseup",n.onDragStopped),n.saveContainerPosition(),n.onDragStart(e.getMousePoint(r)))},n.onMouseMove=function(r){return n.onDrag(e.getMousePoint(r))},n.onScroll=function(r){n.currentDoc&&(r.preventDefault(),n.saveContainerPosition())},n.onTouchStart=function(r){n.currentDoc&&(n.isTouching=!0,!(n.props.onTouchRequest&&!n.props.onTouchRequest(r))&&(n.currentDoc.addEventListener("touchmove",n.onTouchMove,{passive:!1}),n.currentDoc.addEventListener("touchend",n.onDragStopped),n.saveContainerPosition(),r.touches.length===2?n.onPinchStart(r):r.touches.length===1&&n.onDragStart(e.getTouchPoint(r.touches[0]))))},n.onTouchMove=function(r){r.preventDefault(),r.touches.length===2?n.onPinchMove(r):r.touches.length===1&&n.onDrag(e.getTouchPoint(r.touches[0]))},n.onGestureStart=function(r){n.currentDoc&&(r.preventDefault(),n.currentDoc.addEventListener("gesturechange",n.onGestureChange),n.currentDoc.addEventListener("gestureend",n.onGestureEnd),n.gestureZoomStart=n.props.zoom,n.gestureRotationStart=n.props.rotation)},n.onGestureChange=function(r){if(r.preventDefault(),!n.isTouching){var i=e.getMousePoint(r),s=n.gestureZoomStart-1+r.scale;if(n.setNewZoom(s,i,{shouldUpdatePosition:!0}),n.props.onRotationChange){var l=n.gestureRotationStart+r.rotation;n.props.onRotationChange(l)}}},n.onGestureEnd=function(r){n.cleanEvents()},n.onDragStart=function(r){var i,s,l=r.x,c=r.y;n.dragStartPosition={x:l,y:c},n.dragStartCrop=de({},n.props.crop),(s=(i=n.props).onInteractionStart)===null||s===void 0||s.call(i)},n.onDrag=function(r){var i=r.x,s=r.y;n.currentWindow&&(n.rafDragTimeout&&n.currentWindow.cancelAnimationFrame(n.rafDragTimeout),n.rafDragTimeout=n.currentWindow.requestAnimationFrame(function(){if(n.state.cropSize&&!(i===void 0||s===void 0)){var l=i-n.dragStartPosition.x,c=s-n.dragStartPosition.y,d={x:n.dragStartCrop.x+l,y:n.dragStartCrop.y+c},p=n.props.restrictPosition?su(d,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):d;n.props.onCropChange(p)}}))},n.onDragStopped=function(){var r,i;n.isTouching=!1,n.cleanEvents(),n.emitCropData(),(i=(r=n.props).onInteractionEnd)===null||i===void 0||i.call(r)},n.onWheel=function(r){if(n.currentWindow&&!(n.props.onWheelRequest&&!n.props.onWheelRequest(r))){r.preventDefault();var i=e.getMousePoint(r),s=CL(r).pixelY,l=n.props.zoom-s*n.props.zoomSpeed/200;n.setNewZoom(l,i,{shouldUpdatePosition:!0}),n.state.hasWheelJustStarted||n.setState({hasWheelJustStarted:!0},function(){var c,d;return(d=(c=n.props).onInteractionStart)===null||d===void 0?void 0:d.call(c)}),n.wheelTimer&&clearTimeout(n.wheelTimer),n.wheelTimer=n.currentWindow.setTimeout(function(){return n.setState({hasWheelJustStarted:!1},function(){var c,d;return(d=(c=n.props).onInteractionEnd)===null||d===void 0?void 0:d.call(c)})},250)}},n.getPointOnContainer=function(r,i){var s=r.x,l=r.y;if(!n.containerRect)throw new Error("The Cropper is not mounted");return{x:n.containerRect.width/2-(s-i.x),y:n.containerRect.height/2-(l-i.y)}},n.getPointOnMedia=function(r){var i=r.x,s=r.y,l=n.props,c=l.crop,d=l.zoom;return{x:(i+c.x)/d,y:(s+c.y)/d}},n.setNewZoom=function(r,i,s){var l=s===void 0?{}:s,c=l.shouldUpdatePosition,d=c===void 0?!0:c;if(!(!n.state.cropSize||!n.props.onZoomChange)){var p=vp(r,n.props.minZoom,n.props.maxZoom);if(d){var m=n.getPointOnContainer(i,n.containerPosition),g=n.getPointOnMedia(m),v={x:g.x*p-m.x,y:g.y*p-m.y},b=n.props.restrictPosition?su(v,n.mediaSize,n.state.cropSize,p,n.props.rotation):v;n.props.onCropChange(b)}n.props.onZoomChange(p)}},n.getCropData=function(){if(!n.state.cropSize)return null;var r=n.props.restrictPosition?su(n.props.crop,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):n.props.crop;return AL(r,n.mediaSize,n.state.cropSize,n.getAspect(),n.props.zoom,n.props.rotation,n.props.restrictPosition)},n.emitCropData=function(){var r=n.getCropData();if(r){var i=r.croppedAreaPercentages,s=r.croppedAreaPixels;n.props.onCropComplete&&n.props.onCropComplete(i,s),n.props.onCropAreaChange&&n.props.onCropAreaChange(i,s)}},n.emitCropAreaChange=function(){var r=n.getCropData();if(r){var i=r.croppedAreaPercentages,s=r.croppedAreaPixels;n.props.onCropAreaChange&&n.props.onCropAreaChange(i,s)}},n.recomputeCropPosition=function(){var r,i;if(n.state.cropSize){var s=n.props.crop;if(n.isInitialized&&(!((r=n.previousCropSize)===null||r===void 0)&&r.width)&&(!((i=n.previousCropSize)===null||i===void 0)&&i.height)){var l=Math.abs(n.previousCropSize.width-n.state.cropSize.width)>1e-6||Math.abs(n.previousCropSize.height-n.state.cropSize.height)>1e-6;if(l){var c=n.state.cropSize.width/n.previousCropSize.width,d=n.state.cropSize.height/n.previousCropSize.height;s={x:n.props.crop.x*c,y:n.props.crop.y*d}}}var p=n.props.restrictPosition?su(s,n.mediaSize,n.state.cropSize,n.props.zoom,n.props.rotation):s;n.previousCropSize=n.state.cropSize,n.props.onCropChange(p),n.emitCropData()}},n.onKeyDown=function(r){var i,s,l=n.props,c=l.crop,d=l.onCropChange,p=l.keyboardStep,m=l.zoom,g=l.rotation,v=p;if(n.state.cropSize){r.shiftKey&&(v*=.2);var b=de({},c);switch(r.key){case"ArrowUp":b.y-=v,r.preventDefault();break;case"ArrowDown":b.y+=v,r.preventDefault();break;case"ArrowLeft":b.x-=v,r.preventDefault();break;case"ArrowRight":b.x+=v,r.preventDefault();break;default:return}n.props.restrictPosition&&(b=su(b,n.mediaSize,n.state.cropSize,m,g)),r.repeat||(s=(i=n.props).onInteractionStart)===null||s===void 0||s.call(i),d(b)}},n.onKeyUp=function(r){var i,s;switch(r.key){case"ArrowUp":case"ArrowDown":case"ArrowLeft":case"ArrowRight":r.preventDefault();break;default:return}n.emitCropData(),(s=(i=n.props).onInteractionEnd)===null||s===void 0||s.call(i)},n}return e.prototype.componentDidMount=function(){!this.currentDoc||!this.currentWindow||(this.containerRef&&(this.containerRef.ownerDocument&&(this.currentDoc=this.containerRef.ownerDocument),this.currentDoc.defaultView&&(this.currentWindow=this.currentDoc.defaultView),this.initResizeObserver(),typeof window.ResizeObserver>"u"&&this.currentWindow.addEventListener("resize",this.computeSizes),this.props.zoomWithScroll&&this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}),this.containerRef.addEventListener("gesturestart",this.onGestureStart)),this.currentDoc.addEventListener("scroll",this.onScroll),this.props.disableAutomaticStylesInjection||(this.styleRef=this.currentDoc.createElement("style"),this.styleRef.setAttribute("type","text/css"),this.props.nonce&&this.styleRef.setAttribute("nonce",this.props.nonce),this.styleRef.innerHTML=zL,this.currentDoc.head.appendChild(this.styleRef)),this.imageRef.current&&this.imageRef.current.complete&&this.onMediaLoad(),this.props.setImageRef&&this.props.setImageRef(this.imageRef),this.props.setVideoRef&&this.props.setVideoRef(this.videoRef),this.props.setCropperRef&&this.props.setCropperRef(this.cropperRef))},e.prototype.componentWillUnmount=function(){var n,r;!this.currentDoc||!this.currentWindow||(typeof window.ResizeObserver>"u"&&this.currentWindow.removeEventListener("resize",this.computeSizes),(n=this.resizeObserver)===null||n===void 0||n.disconnect(),this.containerRef&&this.containerRef.removeEventListener("gesturestart",this.preventZoomSafari),this.styleRef&&((r=this.styleRef.parentNode)===null||r===void 0||r.removeChild(this.styleRef)),this.cleanEvents(),this.props.zoomWithScroll&&this.clearScrollEvent())},e.prototype.componentDidUpdate=function(n){var r,i,s,l,c,d,p,m,g;n.rotation!==this.props.rotation?(this.computeSizes(),this.recomputeCropPosition()):n.aspect!==this.props.aspect?this.computeSizes():n.objectFit!==this.props.objectFit?this.computeSizes():n.zoom!==this.props.zoom?this.recomputeCropPosition():((r=n.cropSize)===null||r===void 0?void 0:r.height)!==((i=this.props.cropSize)===null||i===void 0?void 0:i.height)||((s=n.cropSize)===null||s===void 0?void 0:s.width)!==((l=this.props.cropSize)===null||l===void 0?void 0:l.width)?this.computeSizes():(((c=n.crop)===null||c===void 0?void 0:c.x)!==((d=this.props.crop)===null||d===void 0?void 0:d.x)||((p=n.crop)===null||p===void 0?void 0:p.y)!==((m=this.props.crop)===null||m===void 0?void 0:m.y))&&this.emitCropAreaChange(),n.zoomWithScroll!==this.props.zoomWithScroll&&this.containerRef&&(this.props.zoomWithScroll?this.containerRef.addEventListener("wheel",this.onWheel,{passive:!1}):this.clearScrollEvent()),n.video!==this.props.video&&((g=this.videoRef.current)===null||g===void 0||g.load());var v=this.getObjectFit();v!==this.state.mediaObjectFit&&this.setState({mediaObjectFit:v},this.computeSizes)},e.prototype.getAspect=function(){var n=this.props,r=n.cropSize,i=n.aspect;return r?r.width/r.height:i},e.prototype.getObjectFit=function(){var n,r,i,s;if(this.props.objectFit==="cover"){var l=this.imageRef.current||this.videoRef.current;if(l&&this.containerRef){this.containerRect=this.containerRef.getBoundingClientRect();var c=this.containerRect.width/this.containerRect.height,d=((n=this.imageRef.current)===null||n===void 0?void 0:n.naturalWidth)||((r=this.videoRef.current)===null||r===void 0?void 0:r.videoWidth)||0,p=((i=this.imageRef.current)===null||i===void 0?void 0:i.naturalHeight)||((s=this.videoRef.current)===null||s===void 0?void 0:s.videoHeight)||0,m=d/p;return m<c?"horizontal-cover":"vertical-cover"}return"horizontal-cover"}return this.props.objectFit},e.prototype.onPinchStart=function(n){var r=e.getTouchPoint(n.touches[0]),i=e.getTouchPoint(n.touches[1]);this.lastPinchDistance=EE(r,i),this.lastPinchRotation=kE(r,i),this.onDragStart(wE(r,i))},e.prototype.onPinchMove=function(n){var r=this;if(!(!this.currentDoc||!this.currentWindow)){var i=e.getTouchPoint(n.touches[0]),s=e.getTouchPoint(n.touches[1]),l=wE(i,s);this.onDrag(l),this.rafPinchTimeout&&this.currentWindow.cancelAnimationFrame(this.rafPinchTimeout),this.rafPinchTimeout=this.currentWindow.requestAnimationFrame(function(){var c=EE(i,s),d=r.props.zoom*(c/r.lastPinchDistance);r.setNewZoom(d,l,{shouldUpdatePosition:!1}),r.lastPinchDistance=c;var p=kE(i,s),m=r.props.rotation+(p-r.lastPinchRotation);r.props.onRotationChange&&r.props.onRotationChange(m),r.lastPinchRotation=p})}},e.prototype.render=function(){var n=this,r,i=this.props,s=i.image,l=i.video,c=i.mediaProps,d=i.cropperProps,p=i.transform,m=i.crop,g=m.x,v=m.y,b=i.rotation,S=i.zoom,k=i.cropShape,E=i.showGrid,w=i.roundCropAreaPixels,T=i.style,_=T.containerStyle,R=T.cropAreaStyle,O=T.mediaStyle,D=i.classes,I=D.containerClassName,H=D.cropAreaClassName,V=D.mediaClassName,K=(r=this.state.mediaObjectFit)!==null&&r!==void 0?r:this.getObjectFit();return A.createElement("div",{onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,ref:function(re){return n.containerRef=re},"data-testid":"container",style:_,className:Af("reactEasyCrop_Container",I)},s?A.createElement("img",de({alt:"",className:Af("reactEasyCrop_Image",K==="contain"&&"reactEasyCrop_Contain",K==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",K==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",V)},c,{src:s,ref:this.imageRef,style:de(de({},O),{transform:p||"translate(".concat(g,"px, ").concat(v,"px) rotate(").concat(b,"deg) scale(").concat(S,")")}),onLoad:this.onMediaLoad})):l&&A.createElement("video",de({autoPlay:!0,playsInline:!0,loop:!0,muted:!0,className:Af("reactEasyCrop_Video",K==="contain"&&"reactEasyCrop_Contain",K==="horizontal-cover"&&"reactEasyCrop_Cover_Horizontal",K==="vertical-cover"&&"reactEasyCrop_Cover_Vertical",V)},c,{ref:this.videoRef,onLoadedMetadata:this.onMediaLoad,style:de(de({},O),{transform:p||"translate(".concat(g,"px, ").concat(v,"px) rotate(").concat(b,"deg) scale(").concat(S,")")}),controls:!1}),(Array.isArray(l)?l:[{src:l}]).map(function(Q){return A.createElement("source",de({key:Q.src},Q))})),this.state.cropSize&&A.createElement("div",de({ref:this.cropperRef,style:de(de({},R),{width:w?Math.round(this.state.cropSize.width):this.state.cropSize.width,height:w?Math.round(this.state.cropSize.height):this.state.cropSize.height}),tabIndex:0,onKeyDown:this.onKeyDown,onKeyUp:this.onKeyUp,"data-testid":"cropper",className:Af("reactEasyCrop_CropArea",k==="round"&&"reactEasyCrop_CropAreaRound",E&&"reactEasyCrop_CropAreaGrid",H)},d)))},e.defaultProps={zoom:1,rotation:0,aspect:4/3,maxZoom:IL,minZoom:LL,cropShape:"rect",objectFit:"contain",showGrid:!0,style:{},classes:{},mediaProps:{},cropperProps:{},zoomSpeed:1,restrictPosition:!0,zoomWithScroll:!0,keyboardStep:PL},e.getMousePoint=function(n){return{x:Number(n.clientX),y:Number(n.clientY)}},e.getTouchPoint=function(n){return{x:Number(n.clientX),y:Number(n.clientY)}},e})(A.Component);function Bn(t){this.content=t}Bn.prototype={constructor:Bn,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,i=r.find(t),s=r.content.slice();return i==-1?s.push(n||t,e):(s[i+1]=e,n&&(s[i]=n)),new Bn(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new Bn(n)},addToStart:function(t,e){return new Bn([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new Bn(n)},addBefore:function(t,e,n){var r=this.remove(e),i=r.content.slice(),s=r.find(t);return i.splice(s==-1?i.length:s,0,e,n),new Bn(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Bn.from(t),t.size?new Bn(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Bn.from(t),t.size?new Bn(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Bn.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};Bn.from=function(t){if(t instanceof Bn)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new Bn(e)};function UC(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let i=t.child(r),s=e.child(r);if(i==s){n+=i.nodeSize;continue}if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let l=0;i.text[l]==s.text[l];l++)n++;return n}if(i.content.size||s.content.size){let l=UC(i.content,s.content,n+1);if(l!=null)return l}n+=i.nodeSize}}function HC(t,e,n,r){for(let i=t.childCount,s=e.childCount;;){if(i==0||s==0)return i==s?null:{a:n,b:r};let l=t.child(--i),c=e.child(--s),d=l.nodeSize;if(l==c){n-=d,r-=d;continue}if(!l.sameMarkup(c))return{a:n,b:r};if(l.isText&&l.text!=c.text){let p=0,m=Math.min(l.text.length,c.text.length);for(;p<m&&l.text[l.text.length-p-1]==c.text[c.text.length-p-1];)p++,n--,r--;return{a:n,b:r}}if(l.content.size||c.content.size){let p=HC(l.content,c.content,n-1,r-1);if(p)return p}n-=d,r-=d}}class ce{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,i=0,s){for(let l=0,c=0;c<n;l++){let d=this.content[l],p=c+d.nodeSize;if(p>e&&r(d,i+c,s||null,l)!==!1&&d.content.size){let m=c+1;d.nodesBetween(Math.max(0,e-m),Math.min(d.content.size,n-m),r,i+m)}c=p}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,i){let s="",l=!0;return this.nodesBetween(e,n,(c,d)=>{let p=c.isText?c.text.slice(Math.max(e,d)-d,n-d):c.isLeaf?i?typeof i=="function"?i(c):i:c.type.spec.leafText?c.type.spec.leafText(c):"":"";c.isBlock&&(c.isLeaf&&p||c.isTextblock)&&r&&(l?l=!1:s+=r),s+=p},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<e.content.length;s++)i.push(e.content[s]);return new ce(i,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],i=0;if(n>e)for(let s=0,l=0;l<n;s++){let c=this.content[s],d=l+c.nodeSize;d>e&&((l<e||d>n)&&(c.isText?c=c.cut(Math.max(0,e-l),Math.min(c.text.length,n-l)):c=c.cut(Math.max(0,e-l-1),Math.min(c.content.size,n-l-1))),r.push(c),i+=c.nodeSize),l=d}return new ce(r,i)}cutByIndex(e,n){return e==n?ce.empty:e==0&&n==this.content.length?this:new ce(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[e]=n,new ce(i,s)}addToStart(e){return new ce([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new ce(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];e(i,r,n),r+=i.nodeSize}}findDiffStart(e,n=0){return UC(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return HC(this,e,n,r)}findIndex(e){if(e==0)return Mf(0,e);if(e==this.size)return Mf(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=this.child(n),s=r+i.nodeSize;if(s>=e)return s==e?Mf(n+1,s):Mf(n,r);r=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return ce.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new ce(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return ce.empty;let n,r=0;for(let i=0;i<e.length;i++){let s=e[i];r+=s.nodeSize,i&&s.isText&&e[i-1].sameMarkup(s)?(n||(n=e.slice(0,i)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new ce(n||e,r)}static from(e){if(!e)return ce.empty;if(e instanceof ce)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new ce([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}ce.empty=new ce([],0);const m0={index:0,offset:0};function Mf(t,e){return m0.index=t,m0.offset=e,m0}function gh(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!gh(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!gh(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let It=class yv{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let i=0;i<e.length;i++){let s=e[i];if(this.eq(s))return e;if(this.type.excludes(s.type))n||(n=e.slice(0,i));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(n||(n=e.slice(0,i)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&gh(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return yv.none;if(e instanceof yv)return[e];let n=e.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};It.none=[];class vh extends Error{}class Te{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=FC(this.content,e+this.openStart,n);return r&&new Te(r,this.openStart,this.openEnd)}removeBetween(e,n){return new Te(qC(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return Te.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Te(ce.fromJSON(e,n.content),r,i)}static maxOpen(e,n=!0){let r=0,i=0;for(let s=e.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new Te(e,r,i)}}Te.empty=new Te(ce.empty,0,0);function qC(t,e,n){let{index:r,offset:i}=t.findIndex(e),s=t.maybeChild(r),{index:l,offset:c}=t.findIndex(n);if(i==e||s.isText){if(c!=n&&!t.child(l).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=l)throw new RangeError("Removing non-flat range");return t.replaceChild(r,s.copy(qC(s.content,e-i-1,n-i-1)))}function FC(t,e,n,r){let{index:i,offset:s}=t.findIndex(e),l=t.maybeChild(i);if(s==e||l.isText)return r&&!r.canReplace(i,i,n)?null:t.cut(0,e).append(n).append(t.cut(e));let c=FC(l.content,e-s-1,n,l);return c&&t.replaceChild(i,l.copy(c))}function UL(t,e,n){if(n.openStart>t.depth)throw new vh("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new vh("Inconsistent open depths");return VC(t,e,n,0)}function VC(t,e,n,r){let i=t.index(r),s=t.node(r);if(i==e.index(r)&&r<t.depth-n.openStart){let l=VC(t,e,n,r+1);return s.copy(s.content.replaceChild(i,l))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let l=t.parent,c=l.content;return ma(l,c.cut(0,t.parentOffset).append(n.content).append(c.cut(e.parentOffset)))}else{let{start:l,end:c}=HL(n,t);return ma(s,$C(t,l,c,e,r))}else return ma(s,yh(t,e,r))}function WC(t,e){if(!e.type.compatibleContent(t.type))throw new vh("Cannot join "+e.type.name+" onto "+t.type.name)}function bv(t,e,n){let r=t.node(n);return WC(r,e.node(n)),r}function pa(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function ku(t,e,n,r){let i=(e||t).node(n),s=0,l=e?e.index(n):i.childCount;t&&(s=t.index(n),t.depth>n?s++:t.textOffset&&(pa(t.nodeAfter,r),s++));for(let c=s;c<l;c++)pa(i.child(c),r);e&&e.depth==n&&e.textOffset&&pa(e.nodeBefore,r)}function ma(t,e){return t.type.checkContent(e),t.copy(e)}function $C(t,e,n,r,i){let s=t.depth>i&&bv(t,e,i+1),l=r.depth>i&&bv(n,r,i+1),c=[];return ku(null,t,i,c),s&&l&&e.index(i)==n.index(i)?(WC(s,l),pa(ma(s,$C(t,e,n,r,i+1)),c)):(s&&pa(ma(s,yh(t,e,i+1)),c),ku(e,n,i,c),l&&pa(ma(l,yh(n,r,i+1)),c)),ku(r,null,i,c),new ce(c)}function yh(t,e,n){let r=[];if(ku(null,t,n,r),t.depth>n){let i=bv(t,e,n+1);pa(ma(i,yh(t,e,n+1)),r)}return ku(e,null,n,r),new ce(r)}function HL(t,e){let n=e.depth-t.openStart,i=e.node(n).copy(t.content);for(let s=n-1;s>=0;s--)i=e.node(s).copy(ce.from(i));return{start:i.resolveNoCache(t.openStart+n),end:i.resolveNoCache(i.content.size-t.openEnd-n)}}class zu{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=e.child(n);return r?e.child(n).cut(r):i}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let s=0;s<e;s++)i+=r.child(s).nodeSize;return i}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return It.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),i=e.maybeChild(n);if(!r){let c=r;r=i,i=c}let s=r.marks;for(var l=0;l<s.length;l++)s[l].type.spec.inclusive===!1&&(!i||!s[l].isInSet(i.marks))&&(s=s[l--].removeFromSet(s));return s}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new bh(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,s=n;for(let l=e;;){let{index:c,offset:d}=l.content.findIndex(s),p=s-d;if(r.push(l,c,i+d),!p||(l=l.child(c),l.isText))break;s=p-1,i+=d+1}return new zu(n,r,s)}static resolveCached(e,n){let r=CE.get(e);if(r)for(let s=0;s<r.elts.length;s++){let l=r.elts[s];if(l.pos==n)return l}else CE.set(e,r=new qL);let i=r.elts[r.i]=zu.resolve(e,n);return r.i=(r.i+1)%FL,i}}class qL{constructor(){this.elts=[],this.i=0}}const FL=12,CE=new WeakMap;class bh{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const VL=Object.create(null);class fi{constructor(e,n,r,i=It.none){this.type=e,this.attrs=n,this.marks=i,this.content=r||ce.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,i=0){this.content.nodesBetween(e,n,r,i,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,i){return this.content.textBetween(e,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&gh(this.attrs,n||e.defaultAttrs||VL)&&It.sameSet(this.marks,r||It.none)}copy(e=null){return e==this.content?this:new fi(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new fi(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return Te.empty;let i=this.resolve(e),s=this.resolve(n),l=r?0:i.sharedDepth(n),c=i.start(l),p=i.node(l).content.cut(i.pos-c,s.pos-c);return new Te(p,i.depth-l,s.depth-l)}replace(e,n,r){return UL(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(i==e||n.isText)return n;e-=i+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(e){return zu.resolveCached(this,e)}resolveNoCache(e){return zu.resolve(this,e)}rangeHasMark(e,n,r){let i=!1;return n>e&&this.nodesBetween(e,n,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),GC(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=ce.empty,i=0,s=r.childCount){let l=this.contentMatchAt(e).matchFragment(r,i,s),c=l&&l.matchFragment(this.content,n);if(!c||!c.validEnd)return!1;for(let d=i;d<s;d++)if(!this.type.allowsMarks(r.child(d).marks))return!1;return!0}canReplaceWith(e,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(e).matchType(r),l=s&&s.matchFragment(this.content,n);return l?l.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=It.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!It.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let i=ce.fromJSON(e,n.content),s=e.nodeType(n.type).create(n.attrs,i,r);return s.type.checkAttrs(s.attrs),s}}fi.prototype.text=void 0;class xh extends fi{constructor(e,n,r,i){if(super(e,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):GC(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new xh(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new xh(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function GC(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class xa{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new WL(e,n);if(r.next==null)return xa.empty;let i=KC(r);r.next&&r.err("Unexpected trailing text");let s=QL(JL(i));return ZL(s,r),s}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let i=this;for(let s=n;i&&s<r;s++)i=i.matchType(e.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let i=[this];function s(l,c){let d=l.matchFragment(e,r);if(d&&(!n||d.validEnd))return ce.from(c.map(p=>p.createAndFill()));for(let p=0;p<l.next.length;p++){let{type:m,next:g}=l.next[p];if(!(m.isText||m.hasRequiredAttrs())&&i.indexOf(g)==-1){i.push(g);let v=s(g,c.concat(m));if(v)return v}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(e)){let l=[];for(let c=i;c.type;c=c.via)l.push(c.type);return l.reverse()}for(let l=0;l<s.next.length;l++){let{type:c,next:d}=s.next[l];!c.isLeaf&&!c.hasRequiredAttrs()&&!(c.name in n)&&(!i.type||d.validEnd)&&(r.push({match:c.contentMatch,type:c,via:i}),n[c.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let i=0;i<r.next.length;i++)e.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),e.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let l=0;l<r.next.length;l++)s+=(l?", ":"")+r.next[l].type.name+"->"+e.indexOf(r.next[l].next);return s}).join(`
`)}}xa.empty=new xa(!0);class WL{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function KC(t){let e=[];do e.push($L(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function $L(t){let e=[];do e.push(GL(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function GL(t){let e=XL(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=KL(t,e);else break;return e}function TE(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function KL(t,e){let n=TE(t),r=n;return t.eat(",")&&(t.next!="}"?r=TE(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function YL(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let i=[];for(let s in n){let l=n[s];l.isInGroup(e)&&i.push(l)}return i.length==0&&t.err("No node type or group '"+e+"' found"),i}function XL(t){if(t.eat("(")){let e=KC(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=YL(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function JL(t){let e=[[]];return i(s(t,0),n()),e;function n(){return e.push([])-1}function r(l,c,d){let p={term:d,to:c};return e[l].push(p),p}function i(l,c){l.forEach(d=>d.to=c)}function s(l,c){if(l.type=="choice")return l.exprs.reduce((d,p)=>d.concat(s(p,c)),[]);if(l.type=="seq")for(let d=0;;d++){let p=s(l.exprs[d],c);if(d==l.exprs.length-1)return p;i(p,c=n())}else if(l.type=="star"){let d=n();return r(c,d),i(s(l.expr,d),d),[r(d)]}else if(l.type=="plus"){let d=n();return i(s(l.expr,c),d),i(s(l.expr,d),d),[r(d)]}else{if(l.type=="opt")return[r(c)].concat(s(l.expr,c));if(l.type=="range"){let d=c;for(let p=0;p<l.min;p++){let m=n();i(s(l.expr,d),m),d=m}if(l.max==-1)i(s(l.expr,d),d);else for(let p=l.min;p<l.max;p++){let m=n();r(d,m),i(s(l.expr,d),m),d=m}return[r(d)]}else{if(l.type=="name")return[r(c,void 0,l.value)];throw new Error("Unknown expr type")}}}}function YC(t,e){return e-t}function _E(t,e){let n=[];return r(e),n.sort(YC);function r(i){let s=t[i];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(i);for(let l=0;l<s.length;l++){let{term:c,to:d}=s[l];!c&&n.indexOf(d)==-1&&r(d)}}}function QL(t){let e=Object.create(null);return n(_E(t,0));function n(r){let i=[];r.forEach(l=>{t[l].forEach(({term:c,to:d})=>{if(!c)return;let p;for(let m=0;m<i.length;m++)i[m][0]==c&&(p=i[m][1]);_E(t,d).forEach(m=>{p||i.push([c,p=[]]),p.indexOf(m)==-1&&p.push(m)})})});let s=e[r.join(",")]=new xa(r.indexOf(t.length-1)>-1);for(let l=0;l<i.length;l++){let c=i[l][1].sort(YC);s.next.push({type:i[l][0],next:e[c.join(",")]||n(c)})}return s}}function ZL(t,e){for(let n=0,r=[t];n<r.length;n++){let i=r[n],s=!i.validEnd,l=[];for(let c=0;c<i.next.length;c++){let{type:d,next:p}=i.next[c];l.push(d.name),s&&!(d.isText||d.hasRequiredAttrs())&&(s=!1),r.indexOf(p)==-1&&r.push(p)}s&&e.err("Only non-generatable nodes ("+l.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function XC(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function JC(t,e){let n=Object.create(null);for(let r in t){let i=e&&e[r];if(i===void 0){let s=t[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function QC(t,e,n,r){for(let i in e)if(!(i in t))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in t){let s=t[i];s.validate&&s.validate(e[i])}}function ZC(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new tI(t,r,e[r]);return n}let AE=class eT{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=ZC(e,r.attrs),this.defaultAttrs=XC(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==xa.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:JC(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new fi(this,this.computeAttrs(e),ce.from(n),It.setFrom(r))}createChecked(e=null,n,r){return n=ce.from(n),this.checkContent(n),new fi(this,this.computeAttrs(e),n,It.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=ce.from(n),n.size){let l=this.contentMatch.fillBefore(n);if(!l)return null;n=l.append(n)}let i=this.contentMatch.matchFragment(n),s=i&&i.fillBefore(ce.empty,!0);return s?new fi(this,e,n.append(s),It.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){QC(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:It.none:e}static compile(e,n){let r=Object.create(null);e.forEach((s,l)=>r[s]=new eT(s,n,l));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function eI(t,e,n){let r=n.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${s}`)}}class tI{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?eI(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class yp{constructor(e,n,r,i){this.name=e,this.rank=n,this.schema=r,this.spec=i,this.attrs=ZC(e,i.attrs),this.excluded=null;let s=XC(this.attrs);this.instance=s?new It(this,s):null}create(e=null){return!e&&this.instance?this.instance:new It(this,JC(this.attrs,e))}static compile(e,n){let r=Object.create(null),i=0;return e.forEach((s,l)=>r[s]=new yp(s,i++,n,l)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){QC(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class tT{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in e)n[i]=e[i];n.nodes=Bn.from(e.nodes),n.marks=Bn.from(e.marks||{}),this.nodes=AE.compile(this.spec.nodes,this),this.marks=yp.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],l=s.spec.content||"",c=s.spec.marks;if(s.contentMatch=r[l]||(r[l]=xa.parse(l,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=c=="_"?null:c?ME(this,c.split(" ")):c==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],l=s.spec.excludes;s.excluded=l==null?[s]:l==""?[]:ME(this,l.split(" "))}this.nodeFromJSON=i=>fi.fromJSON(this,i),this.markFromJSON=i=>It.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,i){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof AE){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,i)}text(e,n){let r=this.nodes.text;return new xh(r,r.defaultAttrs,e,It.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function ME(t,e){let n=[];for(let r=0;r<e.length;r++){let i=e[r],s=t.marks[i],l=s;if(s)n.push(s);else for(let c in t.marks){let d=t.marks[c];(i=="_"||d.spec.group&&d.spec.group.split(" ").indexOf(i)>-1)&&n.push(l=d)}if(!l)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function nI(t){return t.tag!=null}function rI(t){return t.style!=null}class Ss{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(nI(i))this.tags.push(i);else if(rI(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=e.nodes[i.node];return s.contentMatch.matchType(s)})}parse(e,n={}){let r=new OE(this,n,!1);return r.addAll(e,It.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new OE(this,n,!0);return r.addAll(e,It.none,n.from,n.to),Te.maxOpen(r.finish())}matchTag(e,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(sI(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let l=s.getAttrs(e);if(l===!1)continue;s.attrs=l||void 0}return s}}}matchStyle(e,n,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let l=this.styles[s],c=l.style;if(!(c.indexOf(e)!=0||l.context&&!r.matchesContext(l.context)||c.length>e.length&&(c.charCodeAt(e.length)!=61||c.slice(e.length+1)!=n))){if(l.getAttrs){let d=l.getAttrs(n);if(d===!1)continue;l.attrs=d||void 0}return l}}}static schemaRules(e){let n=[];function r(i){let s=i.priority==null?50:i.priority,l=0;for(;l<n.length;l++){let c=n[l];if((c.priority==null?50:c.priority)<s)break}n.splice(l,0,i)}for(let i in e.marks){let s=e.marks[i].spec.parseDOM;s&&s.forEach(l=>{r(l=RE(l)),l.mark||l.ignore||l.clearMark||(l.mark=i)})}for(let i in e.nodes){let s=e.nodes[i].spec.parseDOM;s&&s.forEach(l=>{r(l=RE(l)),l.node||l.ignore||l.mark||(l.node=i)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Ss(e,Ss.schemaRules(e)))}}const nT={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},iI={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},rT={ol:!0,ul:!0},Lu=1,xv=2,wu=4;function jE(t,e,n){return e!=null?(e?Lu:0)|(e==="full"?xv:0):t&&t.whitespace=="pre"?Lu|xv:n&~wu}class jf{constructor(e,n,r,i,s,l){this.type=e,this.attrs=n,this.marks=r,this.solid=i,this.options=l,this.content=[],this.activeMarks=It.none,this.match=s||(l&wu?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(ce.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(e.type))?(this.match=r,i):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&Lu)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let n=ce.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(ce.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!nT.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class OE{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,s,l=jE(null,n.preserveWhitespace,0)|(r?wu:0);i?s=new jf(i.type,i.attrs,It.none,!0,n.topMatch||i.type.contentMatch,l):r?s=new jf(null,null,It.none,!0,null,l):s=new jf(e.schema.topNodeType,null,It.none,!0,null,l),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,i=this.top,s=i.options&xv?"full":this.localPreserveWS||(i.options&Lu)>0,{schema:l}=this.parser;if(s==="full"||i.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(s)if(s==="full")r=r.replace(/\r\n?/g,`
`);else if(l.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(l.linebreakReplacement.create())){let c=r.split(/\r?\n|\r/);for(let d=0;d<c.length;d++)d&&this.insertNode(l.linebreakReplacement.create(),n,!0),c[d]&&this.insertNode(l.text(c[d]),n,!/\S/.test(c[d]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let c=i.content[i.content.length-1],d=e.previousSibling;(!c||d&&d.nodeName=="BR"||c.isText&&/[ \t\r\n\u000c]$/.test(c.text))&&(r=r.slice(1))}r&&this.insertNode(l.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let i=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let l=e.nodeName.toLowerCase(),c;rT.hasOwnProperty(l)&&this.parser.normalizeLists&&oI(e);let d=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(c=this.parser.matchTag(e,this,r));e:if(d?d.ignore:iI.hasOwnProperty(l))this.findInside(e),this.ignoreFallback(e,n);else if(!d||d.skip||d.closeParent){d&&d.closeParent?this.open=Math.max(0,this.open-1):d&&d.skip.nodeType&&(e=d.skip);let p,m=this.needsBlock;if(nT.hasOwnProperty(l))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),p=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let g=d&&d.skip?n:this.readStyles(e,n);g&&this.addAll(e,g),p&&this.sync(s),this.needsBlock=m}else{let p=this.readStyles(e,n);p&&this.addElementByRule(e,d,p,d.consuming===!1?c:void 0)}this.localPreserveWS=i}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],l=r.getPropertyValue(s);if(l)for(let c=void 0;;){let d=this.parser.matchStyle(s,l,this,c);if(!d)break;if(d.ignore)return null;if(d.clearMark?n=n.filter(p=>!d.clearMark(p)):n=n.concat(this.parser.schema.marks[d.mark].create(d.attrs)),d.consuming===!1)c=d;else break}}return n}addElementByRule(e,n,r,i){let s,l;if(n.node)if(l=this.parser.schema.nodes[n.node],l.isLeaf)this.insertNode(l.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let d=this.enter(l,n.attrs||null,r,n.preserveWhitespace);d&&(s=!0,r=d)}else{let d=this.parser.schema.marks[n.mark];r=r.concat(d.create(n.attrs))}let c=this.top;if(l&&l.isLeaf)this.findInside(e);else if(i)this.addElement(e,r,i);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(d=>this.insertNode(d,r,!1));else{let d=e;typeof n.contentElement=="string"?d=e.querySelector(n.contentElement):typeof n.contentElement=="function"?d=n.contentElement(e):n.contentElement&&(d=n.contentElement),this.findAround(e,d,!0),this.addAll(d,r),this.findAround(e,d,!1)}s&&this.sync(c)&&this.open--}addAll(e,n,r,i){let s=r||0;for(let l=r?e.childNodes[r]:e.firstChild,c=i==null?null:e.childNodes[i];l!=c;l=l.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(l,n);this.findAtPoint(e,s)}findPlace(e,n,r){let i,s;for(let l=this.open,c=0;l>=0;l--){let d=this.nodes[l],p=d.findWrapping(e);if(p&&(!i||i.length>p.length+c)&&(i=p,s=d,!p.length))break;if(d.solid){if(r)break;c+=2}}if(!i)return null;this.sync(s);for(let l=0;l<i.length;l++)n=this.enterInner(i[l],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(n=this.enterInner(s,null,n))}let i=this.findPlace(e,n,r);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let l=It.none;for(let c of i.concat(e.marks))(s.type?s.type.allowsMarkType(c.type):NE(c.type,e.type))&&(l=c.addToSet(l));return s.content.push(e.mark(l)),!0}return!1}enter(e,n,r,i){let s=this.findPlace(e.create(n),r,!1);return s&&(s=this.enterInner(e,n,r,!0,i)),s}enterInner(e,n,r,i=!1,s){this.closeExtra();let l=this.top;l.match=l.match&&l.match.matchType(e);let c=jE(e,s,l.options);l.options&wu&&l.content.length==0&&(c|=wu);let d=It.none;return r=r.filter(p=>(l.type?l.type.allowsMarkType(p.type):NE(p.type,e))?(d=p.addToSet(d),!1):!0),this.nodes.push(new jf(e,n,d,i,null,c)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=Lu)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)e+=r[i].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&e.nodeType==1&&e.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),l=(c,d)=>{for(;c>=0;c--){let p=n[c];if(p==""){if(c==n.length-1||c==0)continue;for(;d>=s;d--)if(l(c-1,d))return!0;return!1}else{let m=d>0||d==0&&i?this.nodes[d].type:r&&d>=s?r.node(d-s).type:null;if(!m||m.name!=p&&!m.isInGroup(p))return!1;d--}}return!0};return l(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function oI(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&rT.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function sI(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function RE(t){let e={};for(let n in t)e[n]=t[n];return e}function NE(t,e){let n=e.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(t))continue;let s=[],l=c=>{s.push(c);for(let d=0;d<c.edgeCount;d++){let{type:p,next:m}=c.edge(d);if(p==e||s.indexOf(m)<0&&l(m))return!0}};if(l(i.contentMatch))return!0}}class _a{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=g0(n).createDocumentFragment());let i=r,s=[];return e.forEach(l=>{if(s.length||l.marks.length){let c=0,d=0;for(;c<s.length&&d<l.marks.length;){let p=l.marks[d];if(!this.marks[p.type.name]){d++;continue}if(!p.eq(s[c][0])||p.type.spec.spanning===!1)break;c++,d++}for(;c<s.length;)i=s.pop()[1];for(;d<l.marks.length;){let p=l.marks[d++],m=this.serializeMark(p,l.isInline,n);m&&(s.push([p,i]),i.appendChild(m.dom),i=m.contentDOM||m.dom)}}i.appendChild(this.serializeNodeInner(l,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:i}=Jf(g0(n),this.nodes[e.type.name](e),null,e.attrs);if(i){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,i)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let i=e.marks.length-1;i>=0;i--){let s=this.serializeMark(e.marks[i],e.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,n,r={}){let i=this.marks[e.type.name];return i&&Jf(g0(r),i(e,n),null,e.attrs)}static renderSpec(e,n,r=null,i){return Jf(e,n,r,i)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new _a(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=DE(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return DE(e.marks)}}function DE(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function g0(t){return t.document||window.document}const zE=new WeakMap;function aI(t){let e=zE.get(t);return e===void 0&&zE.set(t,e=lI(t)),e}function lI(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(t),e}function Jf(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let i=e[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=aI(r))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let l=i.indexOf(" ");l>0&&(n=i.slice(0,l),i=i.slice(l+1));let c,d=n?t.createElementNS(n,i):t.createElement(i),p=e[1],m=1;if(p&&typeof p=="object"&&p.nodeType==null&&!Array.isArray(p)){m=2;for(let g in p)if(p[g]!=null){let v=g.indexOf(" ");v>0?d.setAttributeNS(g.slice(0,v),g.slice(v+1),p[g]):g=="style"&&d.style?d.style.cssText=p[g]:d.setAttribute(g,p[g])}}for(let g=m;g<e.length;g++){let v=e[g];if(v===0){if(g<e.length-1||g>m)throw new RangeError("Content hole must be the only child of its parent node");return{dom:d,contentDOM:d}}else{let{dom:b,contentDOM:S}=Jf(t,v,n,r);if(d.appendChild(b),S){if(c)throw new RangeError("Multiple content holes");c=S}}}return{dom:d,contentDOM:c}}const iT=65535,oT=Math.pow(2,16);function cI(t,e){return t+e*oT}function LE(t){return t&iT}function uI(t){return(t-(t&iT))/oT}const sT=1,aT=2,Qf=4,lT=8;class Sv{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&lT)>0}get deletedBefore(){return(this.delInfo&(sT|Qf))>0}get deletedAfter(){return(this.delInfo&(aT|Qf))>0}get deletedAcross(){return(this.delInfo&Qf)>0}}class Tr{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&Tr.empty)return Tr.empty}recover(e){let n=0,r=LE(e);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+uI(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let i=0,s=this.inverted?2:1,l=this.inverted?1:2;for(let c=0;c<this.ranges.length;c+=3){let d=this.ranges[c]-(this.inverted?i:0);if(d>e)break;let p=this.ranges[c+s],m=this.ranges[c+l],g=d+p;if(e<=g){let v=p?e==d?-1:e==g?1:n:n,b=d+i+(v<0?0:m);if(r)return b;let S=e==(n<0?d:g)?null:cI(c/3,e-d),k=e==d?aT:e==g?sT:Qf;return(n<0?e!=d:e!=g)&&(k|=lT),new Sv(b,k,S)}i+=m-p}return r?e+i:new Sv(e+i,0,null)}touches(e,n){let r=0,i=LE(n),s=this.inverted?2:1,l=this.inverted?1:2;for(let c=0;c<this.ranges.length;c+=3){let d=this.ranges[c]-(this.inverted?r:0);if(d>e)break;let p=this.ranges[c+s],m=d+p;if(e<=m&&c==i*3)return!0;r+=this.ranges[c+l]-p}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let l=this.ranges[i],c=l-(this.inverted?s:0),d=l+(this.inverted?0:s),p=this.ranges[i+n],m=this.ranges[i+r];e(c,c+p,d,d+m),s+=m-p}}invert(){return new Tr(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Tr.empty:new Tr(e<0?[0,-e,0]:[0,0,e])}}Tr.empty=new Tr([]);class Iu{constructor(e,n,r=0,i=e?e.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new Iu(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let i=e.getMirror(n);this.appendMap(e._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let i=e.getMirror(n);this.appendMap(e._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let e=new Iu;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let i=0;for(let s=this.from;s<this.to;s++){let l=this._maps[s],c=l.mapResult(e,n);if(c.recover!=null){let d=this.getMirror(s);if(d!=null&&d>s&&d<this.to){s=d,e=this._maps[d].recover(c.recover);continue}}i|=c.delInfo,e=c.pos}return r?e:new Sv(e,i,null)}}const v0=Object.create(null);class Yn{getMap(){return Tr.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=v0[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in v0)throw new RangeError("Duplicate use of step JSON ID "+e);return v0[e]=n,n.prototype.jsonID=e,n}}class Sn{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new Sn(e,null)}static fail(e){return new Sn(null,e)}static fromReplace(e,n,r,i){try{return Sn.ok(e.replace(n,r,i))}catch(s){if(s instanceof vh)return Sn.fail(s.message);throw s}}}function Ey(t,e,n){let r=[];for(let i=0;i<t.childCount;i++){let s=t.child(i);s.content.size&&(s=s.copy(Ey(s.content,e,s))),s.isInline&&(s=e(s,n,i)),r.push(s)}return ce.fromArray(r)}class gs extends Yn{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new Te(Ey(n.content,(l,c)=>!l.isAtom||!c.type.allowsMarkType(this.mark.type)?l:l.mark(this.mark.addToSet(l.marks)),i),n.openStart,n.openEnd);return Sn.fromReplace(e,this.from,this.to,s)}invert(){return new ui(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new gs(n.pos,r.pos,this.mark)}merge(e){return e instanceof gs&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new gs(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new gs(n.from,n.to,e.markFromJSON(n.mark))}}Yn.jsonID("addMark",gs);class ui extends Yn{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new Te(Ey(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),e),n.openStart,n.openEnd);return Sn.fromReplace(e,this.from,this.to,r)}invert(){return new gs(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new ui(n.pos,r.pos,this.mark)}merge(e){return e instanceof ui&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new ui(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new ui(n.from,n.to,e.markFromJSON(n.mark))}}Yn.jsonID("removeMark",ui);class vs extends Yn{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Sn.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Sn.fromReplace(e,this.pos,this.pos+1,new Te(ce.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new vs(this.pos,n.marks[i]);return new vs(this.pos,this.mark)}}return new Sa(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new vs(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new vs(n.pos,e.markFromJSON(n.mark))}}Yn.jsonID("addNodeMark",vs);class Sa extends Yn{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Sn.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Sn.fromReplace(e,this.pos,this.pos+1,new Te(ce.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new vs(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Sa(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Sa(n.pos,e.markFromJSON(n.mark))}}Yn.jsonID("removeNodeMark",Sa);class jn extends Yn{constructor(e,n,r,i=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=i}apply(e){return this.structure&&Ev(e,this.from,this.to)?Sn.fail("Structure replace would overwrite content"):Sn.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Tr([this.from,this.to-this.from,this.slice.size])}invert(e){return new jn(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new jn(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof jn)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?Te.empty:new Te(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new jn(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?Te.empty:new Te(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new jn(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new jn(n.from,n.to,Te.fromJSON(e,n.slice),!!n.structure)}}Yn.jsonID("replace",jn);class Rn extends Yn{constructor(e,n,r,i,s,l,c=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=l,this.structure=c}apply(e){if(this.structure&&(Ev(e,this.from,this.gapFrom)||Ev(e,this.gapTo,this.to)))return Sn.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Sn.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Sn.fromReplace(e,this.from,this.to,r):Sn.fail("Content does not fit in gap")}getMap(){return new Tr([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new Rn(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new Rn(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Rn(n.from,n.to,n.gapFrom,n.gapTo,Te.fromJSON(e,n.slice),n.insert,!!n.structure)}}Yn.jsonID("replaceAround",Rn);function Ev(t,e,n){let r=t.resolve(e),i=n-e,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let l=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!l||l.isLeaf)return!0;l=l.firstChild,i--}}return!1}function dI(t,e,n,r){let i=[],s=[],l,c;t.doc.nodesBetween(e,n,(d,p,m)=>{if(!d.isInline)return;let g=d.marks;if(!r.isInSet(g)&&m.type.allowsMarkType(r.type)){let v=Math.max(p,e),b=Math.min(p+d.nodeSize,n),S=r.addToSet(g);for(let k=0;k<g.length;k++)g[k].isInSet(S)||(l&&l.to==v&&l.mark.eq(g[k])?l.to=b:i.push(l=new ui(v,b,g[k])));c&&c.to==v?c.to=b:s.push(c=new gs(v,b,r))}}),i.forEach(d=>t.step(d)),s.forEach(d=>t.step(d))}function fI(t,e,n,r){let i=[],s=0;t.doc.nodesBetween(e,n,(l,c)=>{if(!l.isInline)return;s++;let d=null;if(r instanceof yp){let p=l.marks,m;for(;m=r.isInSet(p);)(d||(d=[])).push(m),p=m.removeFromSet(p)}else r?r.isInSet(l.marks)&&(d=[r]):d=l.marks;if(d&&d.length){let p=Math.min(c+l.nodeSize,n);for(let m=0;m<d.length;m++){let g=d[m],v;for(let b=0;b<i.length;b++){let S=i[b];S.step==s-1&&g.eq(i[b].style)&&(v=S)}v?(v.to=p,v.step=s):i.push({style:g,from:Math.max(c,e),to:p,step:s})}}}),i.forEach(l=>t.step(new ui(l.from,l.to,l.style)))}function ky(t,e,n,r=n.contentMatch,i=!0){let s=t.doc.nodeAt(e),l=[],c=e+1;for(let d=0;d<s.childCount;d++){let p=s.child(d),m=c+p.nodeSize,g=r.matchType(p.type);if(!g)l.push(new jn(c,m,Te.empty));else{r=g;for(let v=0;v<p.marks.length;v++)n.allowsMarkType(p.marks[v].type)||t.step(new ui(c,m,p.marks[v]));if(i&&p.isText&&n.whitespace!="pre"){let v,b=/\r?\n|\r/g,S;for(;v=b.exec(p.text);)S||(S=new Te(ce.from(n.schema.text(" ",n.allowedMarks(p.marks))),0,0)),l.push(new jn(c+v.index,c+v.index+v[0].length,S))}}c=m}if(!r.validEnd){let d=r.fillBefore(ce.empty,!0);t.replace(c,c,new Te(d,0,0))}for(let d=l.length-1;d>=0;d--)t.step(l[d])}function hI(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Ql(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth,i=0,s=0;;--r){let l=t.$from.node(r),c=t.$from.index(r)+i,d=t.$to.indexAfter(r)-s;if(r<t.depth&&l.canReplace(c,d,n))return r;if(r==0||l.type.spec.isolating||!hI(l,c,d))break;c&&(i=1),d<l.childCount&&(s=1)}return null}function pI(t,e,n){let{$from:r,$to:i,depth:s}=e,l=r.before(s+1),c=i.after(s+1),d=l,p=c,m=ce.empty,g=0;for(let S=s,k=!1;S>n;S--)k||r.index(S)>0?(k=!0,m=ce.from(r.node(S).copy(m)),g++):d--;let v=ce.empty,b=0;for(let S=s,k=!1;S>n;S--)k||i.after(S+1)<i.end(S)?(k=!0,v=ce.from(i.node(S).copy(v)),b++):p++;t.step(new Rn(d,p,l,c,new Te(m.append(v),g,b),m.size-g,!0))}function wy(t,e,n=null,r=t){let i=mI(t,e),s=i&&gI(r,e);return s?i.map(IE).concat({type:e,attrs:n}).concat(s.map(IE)):null}function IE(t){return{type:t,attrs:null}}function mI(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.contentMatchAt(r).findWrapping(e);if(!s)return null;let l=s.length?s[0]:e;return n.canReplaceWith(r,i,l)?s:null}function gI(t,e){let{parent:n,startIndex:r,endIndex:i}=t,s=n.child(r),l=e.contentMatch.findWrapping(s.type);if(!l)return null;let d=(l.length?l[l.length-1]:e).contentMatch;for(let p=r;d&&p<i;p++)d=d.matchType(n.child(p).type);return!d||!d.validEnd?null:l}function vI(t,e,n){let r=ce.empty;for(let l=n.length-1;l>=0;l--){if(r.size){let c=n[l].type.contentMatch.matchFragment(r);if(!c||!c.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=ce.from(n[l].type.create(n[l].attrs,r))}let i=e.start,s=e.end;t.step(new Rn(i,s,i,s,new Te(r,0,0),n.length,!0))}function yI(t,e,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,(l,c)=>{let d=typeof i=="function"?i(l):i;if(l.isTextblock&&!l.hasMarkup(r,d)&&bI(t.doc,t.mapping.slice(s).map(c),r)){let p=null;if(r.schema.linebreakReplacement){let b=r.whitespace=="pre",S=!!r.contentMatch.matchType(r.schema.linebreakReplacement);b&&!S?p=!1:!b&&S&&(p=!0)}p===!1&&uT(t,l,c,s),ky(t,t.mapping.slice(s).map(c,1),r,void 0,p===null);let m=t.mapping.slice(s),g=m.map(c,1),v=m.map(c+l.nodeSize,1);return t.step(new Rn(g,v,g+1,v-1,new Te(ce.from(r.create(d,null,l.marks)),0,0),1,!0)),p===!0&&cT(t,l,c,s),!1}})}function cT(t,e,n,r){e.forEach((i,s)=>{if(i.isText){let l,c=/\r?\n|\r/g;for(;l=c.exec(i.text);){let d=t.mapping.slice(r).map(n+1+s+l.index);t.replaceWith(d,d+1,e.type.schema.linebreakReplacement.create())}}})}function uT(t,e,n,r){e.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let l=t.mapping.slice(r).map(n+1+s);t.replaceWith(l,l+1,e.type.schema.text(`
`))}})}function bI(t,e,n){let r=t.resolve(e),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function xI(t,e,n,r,i){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let l=n.create(r,null,i||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,l);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new Rn(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new Te(ce.from(l),0,0),1,!0))}function bo(t,e,n=1,r){let i=t.resolve(e),s=i.depth-n,l=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!l.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let p=i.depth-1,m=n-2;p>s;p--,m--){let g=i.node(p),v=i.index(p);if(g.type.spec.isolating)return!1;let b=g.content.cutByIndex(v,g.childCount),S=r&&r[m+1];S&&(b=b.replaceChild(0,S.type.create(S.attrs)));let k=r&&r[m]||g;if(!g.canReplace(v+1,g.childCount)||!k.type.validContent(b))return!1}let c=i.indexAfter(s),d=r&&r[0];return i.node(s).canReplaceWith(c,c,d?d.type:i.node(s+1).type)}function SI(t,e,n=1,r){let i=t.doc.resolve(e),s=ce.empty,l=ce.empty;for(let c=i.depth,d=i.depth-n,p=n-1;c>d;c--,p--){s=ce.from(i.node(c).copy(s));let m=r&&r[p];l=ce.from(m?m.type.create(m.attrs,l):i.node(c).copy(l))}t.step(new jn(e,e,new Te(s.append(l),n,n),!0))}function js(t,e){let n=t.resolve(e),r=n.index();return dT(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function EI(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let i=0;i<e.childCount;i++){let s=e.child(i),l=s.type==r?t.type.schema.nodes.text:s.type;if(n=n.matchType(l),!n||!t.type.allowsMarks(s.marks))return!1}return n.validEnd}function dT(t,e){return!!(t&&e&&!t.isLeaf&&EI(t,e))}function bp(t,e,n=-1){let r=t.resolve(e);for(let i=r.depth;;i--){let s,l,c=r.index(i);if(i==r.depth?(s=r.nodeBefore,l=r.nodeAfter):n>0?(s=r.node(i+1),c++,l=r.node(i).maybeChild(c)):(s=r.node(i).maybeChild(c-1),l=r.node(i+1)),s&&!s.isTextblock&&dT(s,l)&&r.node(i).canReplace(c,c+1))return e;if(i==0)break;e=n<0?r.before(i):r.after(i)}}function kI(t,e,n){let r=null,{linebreakReplacement:i}=t.doc.type.schema,s=t.doc.resolve(e-n),l=s.node().type;if(i&&l.inlineContent){let m=l.whitespace=="pre",g=!!l.contentMatch.matchType(i);m&&!g?r=!1:!m&&g&&(r=!0)}let c=t.steps.length;if(r===!1){let m=t.doc.resolve(e+n);uT(t,m.node(),m.before(),c)}l.inlineContent&&ky(t,e+n-1,l,s.node().contentMatchAt(s.index()),r==null);let d=t.mapping.slice(c),p=d.map(e-n);if(t.step(new jn(p,d.map(e+n,-1),Te.empty,!0)),r===!0){let m=t.doc.resolve(p);cT(t,m.node(),m.before(),t.steps.length)}return t}function wI(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,n))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,n))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function fT(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let i=n.content;for(let s=0;s<n.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let l=r.depth;l>=0;l--){let c=l==r.depth?0:r.pos<=(r.start(l+1)+r.end(l+1))/2?-1:1,d=r.index(l)+(c>0?1:0),p=r.node(l),m=!1;if(s==1)m=p.canReplace(d,d,i);else{let g=p.contentMatchAt(d).findWrapping(i.firstChild.type);m=g&&p.canReplaceWith(d,d,g[0])}if(m)return c==0?r.pos:c<0?r.before(l+1):r.after(l+1)}return null}function xp(t,e,n=e,r=Te.empty){if(e==n&&!r.size)return null;let i=t.resolve(e),s=t.resolve(n);return hT(i,s,r)?new jn(e,n,r):new CI(i,s,r).fit()}function hT(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class CI{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=ce.empty;for(let i=0;i<=e.depth;i++){let s=e.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(i))})}for(let i=e.depth;i>0;i--)this.placed=ce.from(e.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let p=this.findFittable();p?this.placeNodes(p):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(e<0?this.$to:r.doc.resolve(e));if(!i)return null;let s=this.placed,l=r.depth,c=i.depth;for(;l&&c&&s.childCount==1;)s=s.firstChild.content,l--,c--;let d=new Te(s,l,c);return e>-1?new Rn(r.pos,e,this.$to.pos,this.$to.end(),d,n):d.size||r.pos!=this.$to.pos?new jn(r.pos,i.pos,d):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<e;r++){let s=n.firstChild;if(n.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){e=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=y0(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let l=i.firstChild;for(let c=this.depth;c>=0;c--){let{type:d,match:p}=this.frontier[c],m,g=null;if(n==1&&(l?p.matchType(l.type)||(g=p.fillBefore(ce.from(l),!1)):s&&d.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:c,parent:s,inject:g};if(n==2&&l&&(m=p.findWrapping(l.type)))return{sliceDepth:r,frontierDepth:c,parent:s,wrap:m};if(s&&p.matchType(s.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=y0(e,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new Te(e,n+1,Math.max(r,i.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,i=y0(e,n);if(i.childCount<=1&&n>0){let s=e.size-n<=n+i.size;this.unplaced=new Te(pu(e,n-1,1),n-1,s?n-1:r)}else this.unplaced=new Te(pu(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:i,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let k=0;k<s.length;k++)this.openFrontierNode(s[k]);let l=this.unplaced,c=r?r.content:l.content,d=l.openStart-e,p=0,m=[],{match:g,type:v}=this.frontier[n];if(i){for(let k=0;k<i.childCount;k++)m.push(i.child(k));g=g.matchFragment(i)}let b=c.size+e-(l.content.size-l.openEnd);for(;p<c.childCount;){let k=c.child(p),E=g.matchType(k.type);if(!E)break;p++,(p>1||d==0||k.content.size)&&(g=E,m.push(pT(k.mark(v.allowedMarks(k.marks)),p==1?d:0,p==c.childCount?b:-1)))}let S=p==c.childCount;S||(b=-1),this.placed=mu(this.placed,n,ce.from(m)),this.frontier[n].match=g,S&&b<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let k=0,E=c;k<b;k++){let w=E.lastChild;this.frontier.push({type:w.type,match:w.contentMatchAt(w.childCount)}),E=w.content}this.unplaced=S?e==0?Te.empty:new Te(pu(l.content,e-1,1),e-1,b<0?l.openEnd:e-1):new Te(pu(l.content,e,p),l.openStart,l.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!b0(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],s=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),l=b0(e,n,i,r,s);if(l){for(let c=n-1;c>=0;c--){let{match:d,type:p}=this.frontier[c],m=b0(e,c,p,d,!0);if(!m||m.childCount)continue e}return{depth:n,fit:l,move:s?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=mu(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let i=e.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,e.index(r));this.openFrontierNode(i.type,i.attrs,s)}return e}openFrontierNode(e,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(e),this.placed=mu(this.placed,this.depth,ce.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(ce.empty,!0);n.childCount&&(this.placed=mu(this.placed,this.frontier.length,n))}}function pu(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(pu(t.firstChild.content,e-1,n)))}function mu(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(mu(t.lastChild.content,e-1,n)))}function y0(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function pT(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,pT(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(ce.empty,!0)))),t.copy(r)}function b0(t,e,n,r,i){let s=t.node(e),l=i?t.indexAfter(e):t.index(e);if(l==s.childCount&&!n.compatibleContent(s.type))return null;let c=r.fillBefore(s.content,!0,l);return c&&!TI(n,s.content,l)?c:null}function TI(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function _I(t){return t.spec.defining||t.spec.definingForContent}function AI(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let i=t.doc.resolve(e),s=t.doc.resolve(n);if(hT(i,s,r))return t.step(new jn(e,n,r));let l=gT(i,s);l[l.length-1]==0&&l.pop();let c=-(i.depth+1);l.unshift(c);for(let v=i.depth,b=i.pos-1;v>0;v--,b--){let S=i.node(v).type.spec;if(S.defining||S.definingAsContext||S.isolating)break;l.indexOf(v)>-1?c=v:i.before(v)==b&&l.splice(1,0,-v)}let d=l.indexOf(c),p=[],m=r.openStart;for(let v=r.content,b=0;;b++){let S=v.firstChild;if(p.push(S),b==r.openStart)break;v=S.content}for(let v=m-1;v>=0;v--){let b=p[v],S=_I(b.type);if(S&&!b.sameMarkup(i.node(Math.abs(c)-1)))m=v;else if(S||!b.type.isTextblock)break}for(let v=r.openStart;v>=0;v--){let b=(v+m+1)%(r.openStart+1),S=p[b];if(S)for(let k=0;k<l.length;k++){let E=l[(k+d)%l.length],w=!0;E<0&&(w=!1,E=-E);let T=i.node(E-1),_=i.index(E-1);if(T.canReplaceWith(_,_,S.type,S.marks))return t.replace(i.before(E),w?s.after(E):n,new Te(mT(r.content,0,r.openStart,b),b,r.openEnd))}}let g=t.steps.length;for(let v=l.length-1;v>=0&&(t.replace(e,n,r),!(t.steps.length>g));v--){let b=l[v];b<0||(e=i.before(b),n=s.after(b))}}function mT(t,e,n,r,i){if(e<n){let s=t.firstChild;t=t.replaceChild(0,s.copy(mT(s.content,e+1,n,r,s)))}if(e>r){let s=i.contentMatchAt(0),l=s.fillBefore(t).append(t);t=l.append(s.matchFragment(l).fillBefore(ce.empty,!0))}return t}function MI(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let i=wI(t.doc,e,r.type);i!=null&&(e=n=i)}t.replaceRange(e,n,new Te(ce.from(r),0,0))}function jI(t,e,n){let r=t.doc.resolve(e),i=t.doc.resolve(n),s=gT(r,i);for(let l=0;l<s.length;l++){let c=s[l],d=l==s.length-1;if(d&&c==0||r.node(c).type.contentMatch.validEnd)return t.delete(r.start(c),i.end(c));if(c>0&&(d||r.node(c-1).canReplace(r.index(c-1),i.indexAfter(c-1))))return t.delete(r.before(c),i.after(c))}for(let l=1;l<=r.depth&&l<=i.depth;l++)if(e-r.start(l)==r.depth-l&&n>r.end(l)&&i.end(l)-n!=i.depth-l&&r.start(l-1)==i.start(l-1)&&r.node(l-1).canReplace(r.index(l-1),i.index(l-1)))return t.delete(r.before(l),n);t.delete(e,n)}function gT(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let i=r;i>=0;i--){let s=t.start(i);if(s<t.pos-(t.depth-i)||e.end(i)>e.pos+(e.depth-i)||t.node(i).type.spec.isolating||e.node(i).type.spec.isolating)break;(s==e.start(i)||i==t.depth&&i==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&i&&e.start(i-1)==s-1)&&n.push(i)}return n}class Ll extends Yn{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return Sn.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return Sn.fromReplace(e,this.pos,this.pos+1,new Te(ce.from(i),0,n.isLeaf?0:1))}getMap(){return Tr.empty}invert(e){return new Ll(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Ll(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Ll(n.pos,n.attr,n.value)}}Yn.jsonID("attr",Ll);class Pu extends Yn{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let i in e.attrs)n[i]=e.attrs[i];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return Sn.ok(r)}getMap(){return Tr.empty}invert(e){return new Pu(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Pu(n.attr,n.value)}}Yn.jsonID("docAttr",Pu);let ql=class extends Error{};ql=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};ql.prototype=Object.create(Error.prototype);ql.prototype.constructor=ql;ql.prototype.name="TransformError";class vT{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Iu}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new ql(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}changedRange(){let e=1e9,n=-1e9;for(let r=0;r<this.mapping.maps.length;r++){let i=this.mapping.maps[r];r&&(e=i.map(e,1),n=i.map(n,-1)),i.forEach((s,l,c,d)=>{e=Math.min(e,c),n=Math.max(n,d)})}return e==1e9?null:{from:e,to:n}}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=Te.empty){let i=xp(this.doc,e,n,r);return i&&this.step(i),this}replaceWith(e,n,r){return this.replace(e,n,new Te(ce.from(r),0,0))}delete(e,n){return this.replace(e,n,Te.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return AI(this,e,n,r),this}replaceRangeWith(e,n,r){return MI(this,e,n,r),this}deleteRange(e,n){return jI(this,e,n),this}lift(e,n){return pI(this,e,n),this}join(e,n=1){return kI(this,e,n),this}wrap(e,n){return vI(this,e,n),this}setBlockType(e,n=e,r,i=null){return yI(this,e,n,r,i),this}setNodeMarkup(e,n,r=null,i){return xI(this,e,n,r,i),this}setNodeAttribute(e,n,r){return this.step(new Ll(e,n,r)),this}setDocAttribute(e,n){return this.step(new Pu(e,n)),this}addNodeMark(e,n){return this.step(new vs(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof It)n.isInSet(r.marks)&&this.step(new Sa(e,n));else{let i=r.marks,s,l=[];for(;s=n.isInSet(i);)l.push(new Sa(e,s)),i=s.removeFromSet(i);for(let c=l.length-1;c>=0;c--)this.step(l[c])}return this}split(e,n=1,r){return SI(this,e,n,r),this}addMark(e,n,r){return dI(this,e,n,r),this}removeMark(e,n,r){return fI(this,e,n,r),this}clearIncompatible(e,n,r){return ky(this,e,n,r),this}}const x0=Object.create(null);class at{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new OI(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=Te.empty){let r=n.content.lastChild,i=null;for(let c=0;c<n.openEnd;c++)i=r,r=r.lastChild;let s=e.steps.length,l=this.ranges;for(let c=0;c<l.length;c++){let{$from:d,$to:p}=l[c],m=e.mapping.slice(s);e.replaceRange(m.map(d.pos),m.map(p.pos),c?Te.empty:n),c==0&&UE(e,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:l,$to:c}=i[s],d=e.mapping.slice(r),p=d.map(l.pos),m=d.map(c.pos);s?e.deleteRange(p,m):(e.replaceRangeWith(p,m,n),UE(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let i=e.parent.inlineContent?new Ye(e):_l(e.node(0),e.parent,e.pos,e.index(),n,r);if(i)return i;for(let s=e.depth-1;s>=0;s--){let l=n<0?_l(e.node(0),e.node(s),e.before(s+1),e.index(s),n,r):_l(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,n,r);if(l)return l}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new Ar(e.node(0))}static atStart(e){return _l(e,e,0,0,1)||new Ar(e)}static atEnd(e){return _l(e,e,e.content.size,e.childCount,-1)||new Ar(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=x0[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in x0)throw new RangeError("Duplicate use of selection JSON ID "+e);return x0[e]=n,n.prototype.jsonID=e,n}getBookmark(){return Ye.between(this.$anchor,this.$head).getBookmark()}}at.prototype.visible=!0;class OI{constructor(e,n){this.$from=e,this.$to=n}}let PE=!1;function BE(t){!PE&&!t.parent.inlineContent&&(PE=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class Ye extends at{constructor(e,n=e){BE(e),BE(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return at.near(r);let i=e.resolve(n.map(this.anchor));return new Ye(i.parent.inlineContent?i:r,r)}replace(e,n=Te.empty){if(super.replace(e,n),n==Te.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof Ye&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Sp(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Ye(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let i=e.resolve(n);return new this(i,r==n?i:e.resolve(r))}static between(e,n,r){let i=e.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let s=at.findFrom(n,r,!0)||at.findFrom(n,-r,!0);if(s)n=s.$head;else return at.near(n,r)}return e.parent.inlineContent||(i==0?e=n:(e=(at.findFrom(e,-r,!0)||at.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=i<0&&(e=n))),new Ye(e,n)}}at.jsonID("text",Ye);class Sp{constructor(e,n){this.anchor=e,this.head=n}map(e){return new Sp(e.map(this.anchor),e.map(this.head))}resolve(e){return Ye.between(e.resolve(this.anchor),e.resolve(this.head))}}class Fe extends at{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=e.resolve(i);return r?at.near(s):new Fe(s)}content(){return new Te(ce.from(this.node),0,0)}eq(e){return e instanceof Fe&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new Cy(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Fe(e.resolve(n.anchor))}static create(e,n){return new Fe(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Fe.prototype.visible=!1;at.jsonID("node",Fe);class Cy{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new Sp(r,r):new Cy(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&Fe.isSelectable(r)?new Fe(n):at.near(n)}}class Ar extends at{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=Te.empty){if(n==Te.empty){e.delete(0,e.doc.content.size);let r=at.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new Ar(e)}map(e){return new Ar(e)}eq(e){return e instanceof Ar}getBookmark(){return RI}}at.jsonID("all",Ar);const RI={map(){return this},resolve(t){return new Ar(t)}};function _l(t,e,n,r,i,s=!1){if(e.inlineContent)return Ye.create(t,n);for(let l=r-(i>0?0:1);i>0?l<e.childCount:l>=0;l+=i){let c=e.child(l);if(c.isAtom){if(!s&&Fe.isSelectable(c))return Fe.create(t,n-(i<0?c.nodeSize:0))}else{let d=_l(t,c,n+i,i<0?c.childCount:0,i,s);if(d)return d}n+=c.nodeSize*i}return null}function UE(t,e,n){let r=t.steps.length-1;if(r<e)return;let i=t.steps[r];if(!(i instanceof jn||i instanceof Rn))return;let s=t.mapping.maps[r],l;s.forEach((c,d,p,m)=>{l==null&&(l=m)}),t.setSelection(at.near(t.doc.resolve(l),n))}const HE=1,Of=2,qE=4;class NI extends vT{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|HE)&~Of,this.storedMarks=null,this}get selectionSet(){return(this.updated&HE)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Of,this}ensureMarks(e){return It.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Of)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~Of,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||It.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let i=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(i.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),!e)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let l=this.doc.resolve(n);s=r==n?l.marks():l.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(e,s)),!this.selection.empty&&this.selection.to==n+e.length&&this.setSelection(at.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=qE,this}get scrolledIntoView(){return(this.updated&qE)>0}}function FE(t,e){return!e||!t?t:t.bind(e)}class gu{constructor(e,n,r){this.name=e,this.init=FE(n.init,r),this.apply=FE(n.apply,r)}}const DI=[new gu("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new gu("selection",{init(t,e){return t.selection||at.atStart(e.doc)},apply(t){return t.selection}}),new gu("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new gu("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class S0{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=DI.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new gu(r.key,r.spec.state,r))})}}class Rl{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),i=null;for(;;){let s=!1;for(let l=0;l<this.config.plugins.length;l++){let c=this.config.plugins[l];if(c.spec.appendTransaction){let d=i?i[l].n:0,p=i?i[l].state:this,m=d<n.length&&c.spec.appendTransaction.call(c,d?n.slice(d):n,p,r);if(m&&r.filterTransaction(m,l)){if(m.setMeta("appendedTransaction",e),!i){i=[];for(let g=0;g<this.config.plugins.length;g++)i.push(g<l?{state:r,n:n.length}:{state:this,n:0})}n.push(m),r=r.applyInner(m),s=!0}i&&(i[l]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Rl(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];n[s.name]=s.apply(e,this[s.name],this,n)}return n}get tr(){return new NI(this)}static create(e){let n=new S0(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new Rl(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(e,r);return r}reconfigure(e){let n=new S0(this.schema,e.plugins),r=n.fields,i=new Rl(n);for(let s=0;s<r.length;s++){let l=r[s].name;i[l]=this.hasOwnProperty(l)?this[l]:r[s].init(e,i)}return i}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=e[r],s=i.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(i,this[i.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let i=new S0(e.schema,e.plugins),s=new Rl(i);return i.fields.forEach(l=>{if(l.name=="doc")s.doc=fi.fromJSON(e.schema,n.doc);else if(l.name=="selection")s.selection=at.fromJSON(s.doc,n.selection);else if(l.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let c in r){let d=r[c],p=d.spec.state;if(d.key==l.name&&p&&p.fromJSON&&Object.prototype.hasOwnProperty.call(n,c)){s[l.name]=p.fromJSON.call(d,e,n[c],s);return}}s[l.name]=l.init(e,s)}}),s}}function yT(t,e,n){for(let r in t){let i=t[r];i instanceof Function?i=i.bind(e):r=="handleDOMEvents"&&(i=yT(i,e,{})),n[r]=i}return n}class nn{constructor(e){this.spec=e,this.props={},e.props&&yT(e.props,this,this.props),this.key=e.key?e.key.key:bT("plugin")}getState(e){return e[this.key]}}const E0=Object.create(null);function bT(t){return t in E0?t+"$"+ ++E0[t]:(E0[t]=0,t+"$")}class Cn{constructor(e="key"){this.key=bT(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const Ty=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function xT(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const ST=(t,e,n)=>{let r=xT(t,n);if(!r)return!1;let i=_y(r);if(!i){let l=r.blockRange(),c=l&&Ql(l);return c==null?!1:(e&&e(t.tr.lift(l,c).scrollIntoView()),!0)}let s=i.nodeBefore;if(jT(t,i,e,-1))return!0;if(r.parent.content.size==0&&(Fl(s,"end")||Fe.isSelectable(s)))for(let l=r.depth;;l--){let c=xp(t.doc,r.before(l),r.after(l),Te.empty);if(c&&c.slice.size<c.to-c.from){if(e){let d=t.tr.step(c);d.setSelection(Fl(s,"end")?at.findFrom(d.doc.resolve(d.mapping.map(i.pos,-1)),-1):Fe.create(d.doc,i.pos-s.nodeSize)),e(d.scrollIntoView())}return!0}if(l==1||r.node(l-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},zI=(t,e,n)=>{let r=xT(t,n);if(!r)return!1;let i=_y(r);return i?ET(t,i,e):!1},LI=(t,e,n)=>{let r=wT(t,n);if(!r)return!1;let i=Ay(r);return i?ET(t,i,e):!1};function ET(t,e,n){let r=e.nodeBefore,i=r,s=e.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let m=i.lastChild;if(!m)return!1;i=m}let l=e.nodeAfter,c=l,d=e.pos+1;for(;!c.isTextblock;d++){if(c.type.spec.isolating)return!1;let m=c.firstChild;if(!m)return!1;c=m}let p=xp(t.doc,s,d,Te.empty);if(!p||p.from!=s||p instanceof jn&&p.slice.size>=d-s)return!1;if(n){let m=t.tr.step(p);m.setSelection(Ye.create(m.doc,s)),n(m.scrollIntoView())}return!0}function Fl(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const kT=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;s=_y(r)}let l=s&&s.nodeBefore;return!l||!Fe.isSelectable(l)?!1:(e&&e(t.tr.setSelection(Fe.create(t.doc,s.pos-l.nodeSize)).scrollIntoView()),!0)};function _y(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function wT(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const CT=(t,e,n)=>{let r=wT(t,n);if(!r)return!1;let i=Ay(r);if(!i)return!1;let s=i.nodeAfter;if(jT(t,i,e,1))return!0;if(r.parent.content.size==0&&(Fl(s,"start")||Fe.isSelectable(s))){let l=xp(t.doc,r.before(),r.after(),Te.empty);if(l&&l.slice.size<l.to-l.from){if(e){let c=t.tr.step(l);c.setSelection(Fl(s,"start")?at.findFrom(c.doc.resolve(c.mapping.map(i.pos)),1):Fe.create(c.doc,c.mapping.map(i.pos))),e(c.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(e&&e(t.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},TT=(t,e,n)=>{let{$head:r,empty:i}=t.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;s=Ay(r)}let l=s&&s.nodeAfter;return!l||!Fe.isSelectable(l)?!1:(e&&e(t.tr.setSelection(Fe.create(t.doc,s.pos)).scrollIntoView()),!0)};function Ay(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const II=(t,e)=>{let n=t.selection,r=n instanceof Fe,i;if(r){if(n.node.isTextblock||!js(t.doc,n.from))return!1;i=n.from}else if(i=bp(t.doc,n.from,-1),i==null)return!1;if(e){let s=t.tr.join(i);r&&s.setSelection(Fe.create(s.doc,i-t.doc.resolve(i).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},PI=(t,e)=>{let n=t.selection,r;if(n instanceof Fe){if(n.node.isTextblock||!js(t.doc,n.to))return!1;r=n.to}else if(r=bp(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},BI=(t,e)=>{let{$from:n,$to:r}=t.selection,i=n.blockRange(r),s=i&&Ql(i);return s==null?!1:(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)},_T=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function My(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const UI=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),l=My(i.contentMatchAt(s));if(!l||!i.canReplaceWith(s,s,l))return!1;if(e){let c=n.after(),d=t.tr.replaceWith(c,c,l.createAndFill());d.setSelection(at.near(d.doc.resolve(c),1)),e(d.scrollIntoView())}return!0},AT=(t,e)=>{let n=t.selection,{$from:r,$to:i}=n;if(n instanceof Ar||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=My(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let l=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,c=t.tr.insert(l,s.createAndFill());c.setSelection(Ye.create(c.doc,l+1)),e(c.scrollIntoView())}return!0},MT=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(bo(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),i=r&&Ql(r);return i==null?!1:(e&&e(t.tr.lift(r,i).scrollIntoView()),!0)};function HI(t){return(e,n)=>{let{$from:r,$to:i}=e.selection;if(e.selection instanceof Fe&&e.selection.node.isBlock)return!r.parentOffset||!bo(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let s=[],l,c,d=!1,p=!1;for(let b=r.depth;;b--)if(r.node(b).isBlock){d=r.end(b)==r.pos+(r.depth-b),p=r.start(b)==r.pos-(r.depth-b),c=My(r.node(b-1).contentMatchAt(r.indexAfter(b-1))),s.unshift(d&&c?{type:c}:null),l=b;break}else{if(b==1)return!1;s.unshift(null)}let m=e.tr;(e.selection instanceof Ye||e.selection instanceof Ar)&&m.deleteSelection();let g=m.mapping.map(r.pos),v=bo(m.doc,g,s.length,s);if(v||(s[0]=c?{type:c}:null,v=bo(m.doc,g,s.length,s)),!v)return!1;if(m.split(g,s.length,s),!d&&p&&r.node(l).type!=c){let b=m.mapping.map(r.before(l)),S=m.doc.resolve(b);c&&r.node(l-1).canReplaceWith(S.index(),S.index()+1,c)&&m.setNodeMarkup(m.mapping.map(r.before(l)),c)}return n&&n(m.scrollIntoView()),!0}}const qI=HI(),FI=(t,e)=>{let{$from:n,to:r}=t.selection,i,s=n.sharedDepth(r);return s==0?!1:(i=n.before(s),e&&e(t.tr.setSelection(Fe.create(t.doc,i))),!0)};function VI(t,e,n){let r=e.nodeBefore,i=e.nodeAfter,s=e.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(i.isTextblock||js(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function jT(t,e,n,r){let i=e.nodeBefore,s=e.nodeAfter,l,c,d=i.type.spec.isolating||s.type.spec.isolating;if(!d&&VI(t,e,n))return!0;let p=!d&&e.parent.canReplace(e.index(),e.index()+1);if(p&&(l=(c=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&c.matchType(l[0]||s.type).validEnd){if(n){let b=e.pos+s.nodeSize,S=ce.empty;for(let w=l.length-1;w>=0;w--)S=ce.from(l[w].create(null,S));S=ce.from(i.copy(S));let k=t.tr.step(new Rn(e.pos-1,b,e.pos,b,new Te(S,1,0),l.length,!0)),E=k.doc.resolve(b+2*l.length);E.nodeAfter&&E.nodeAfter.type==i.type&&js(k.doc,E.pos)&&k.join(E.pos),n(k.scrollIntoView())}return!0}let m=s.type.spec.isolating||r>0&&d?null:at.findFrom(e,1),g=m&&m.$from.blockRange(m.$to),v=g&&Ql(g);if(v!=null&&v>=e.depth)return n&&n(t.tr.lift(g,v).scrollIntoView()),!0;if(p&&Fl(s,"start",!0)&&Fl(i,"end")){let b=i,S=[];for(;S.push(b),!b.isTextblock;)b=b.lastChild;let k=s,E=1;for(;!k.isTextblock;k=k.firstChild)E++;if(b.canReplace(b.childCount,b.childCount,k.content)){if(n){let w=ce.empty;for(let _=S.length-1;_>=0;_--)w=ce.from(S[_].copy(w));let T=t.tr.step(new Rn(e.pos-S.length,e.pos+s.nodeSize,e.pos+E,e.pos+s.nodeSize-E,new Te(w,S.length,0),0,!0));n(T.scrollIntoView())}return!0}}return!1}function OT(t){return function(e,n){let r=e.selection,i=t<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(n&&n(e.tr.setSelection(Ye.create(e.doc,t<0?i.start(s):i.end(s)))),!0):!1}}const WI=OT(-1),$I=OT(1);function GI(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,l=i.blockRange(s),c=l&&wy(l,t,e);return c?(r&&r(n.tr.wrap(l,c).scrollIntoView()),!0):!1}}function VE(t,e=null){return function(n,r){let i=!1;for(let s=0;s<n.selection.ranges.length&&!i;s++){let{$from:{pos:l},$to:{pos:c}}=n.selection.ranges[s];n.doc.nodesBetween(l,c,(d,p)=>{if(i)return!1;if(!(!d.isTextblock||d.hasMarkup(t,e)))if(d.type==t)i=!0;else{let m=n.doc.resolve(p),g=m.index();i=m.parent.canReplaceWith(g,g+1,t)}})}if(!i)return!1;if(r){let s=n.tr;for(let l=0;l<n.selection.ranges.length;l++){let{$from:{pos:c},$to:{pos:d}}=n.selection.ranges[l];s.setBlockType(c,d,t,e)}r(s.scrollIntoView())}return!0}}function jy(...t){return function(e,n,r){for(let i=0;i<t.length;i++)if(t[i](e,n,r))return!0;return!1}}jy(Ty,ST,kT);jy(Ty,CT,TT);jy(_T,AT,MT,qI);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function KI(t,e=null){return function(n,r){let{$from:i,$to:s}=n.selection,l=i.blockRange(s);if(!l)return!1;let c=r?n.tr:null;return YI(c,l,t,e)?(r&&r(c.scrollIntoView()),!0):!1}}function YI(t,e,n,r=null){let i=!1,s=e,l=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let d=l.resolve(e.start-2);s=new bh(d,d,e.depth),e.endIndex<e.parent.childCount&&(e=new bh(e.$from,l.resolve(e.$to.end(e.depth)),e.depth)),i=!0}let c=wy(s,n,r,e);return c?(t&&XI(t,e,c,i,n),!0):!1}function XI(t,e,n,r,i){let s=ce.empty;for(let m=n.length-1;m>=0;m--)s=ce.from(n[m].type.create(n[m].attrs,s));t.step(new Rn(e.start-(r?2:0),e.end,e.start,e.end,new Te(s,0,0),n.length,!0));let l=0;for(let m=0;m<n.length;m++)n[m].type==i&&(l=m+1);let c=n.length-l,d=e.start+n.length-(r?2:0),p=e.parent;for(let m=e.startIndex,g=e.endIndex,v=!0;m<g;m++,v=!1)!v&&bo(t.doc,d,c)&&(t.split(d,c),d+=2*c),d+=p.child(m).nodeSize;return t}function JI(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,l=>l.childCount>0&&l.firstChild.type==t);return s?n?r.node(s.depth-1).type==t?QI(e,n,t,s):ZI(e,n,s):!0:!1}}function QI(t,e,n,r){let i=t.tr,s=r.end,l=r.$to.end(r.depth);s<l&&(i.step(new Rn(s-1,l,s,l,new Te(ce.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new bh(i.doc.resolve(r.$from.pos),i.doc.resolve(l),r.depth));const c=Ql(r);if(c==null)return!1;i.lift(r,c);let d=i.doc.resolve(i.mapping.map(s,-1)-1);return js(i.doc,d.pos)&&d.nodeBefore.type==d.nodeAfter.type&&i.join(d.pos),e(i.scrollIntoView()),!0}function ZI(t,e,n){let r=t.tr,i=n.parent;for(let b=n.end,S=n.endIndex-1,k=n.startIndex;S>k;S--)b-=i.child(S).nodeSize,r.delete(b-1,b+1);let s=r.doc.resolve(n.start),l=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let c=n.startIndex==0,d=n.endIndex==i.childCount,p=s.node(-1),m=s.index(-1);if(!p.canReplace(m+(c?0:1),m+1,l.content.append(d?ce.empty:ce.from(i))))return!1;let g=s.pos,v=g+l.nodeSize;return r.step(new Rn(g-(c?1:0),v+(d?1:0),g+1,v-1,new Te((c?ce.empty:ce.from(i.copy(ce.empty))).append(d?ce.empty:ce.from(i.copy(ce.empty))),c?0:1,d?0:1),c?0:1)),e(r.scrollIntoView()),!0}function e6(t){return function(e,n){let{$from:r,$to:i}=e.selection,s=r.blockRange(i,p=>p.childCount>0&&p.firstChild.type==t);if(!s)return!1;let l=s.startIndex;if(l==0)return!1;let c=s.parent,d=c.child(l-1);if(d.type!=t)return!1;if(n){let p=d.lastChild&&d.lastChild.type==c.type,m=ce.from(p?t.create():null),g=new Te(ce.from(t.create(null,ce.from(c.type.create(null,m)))),p?3:1,0),v=s.start,b=s.end;n(e.tr.step(new Rn(v-(p?3:1),b,v,b,g,1,!0)).scrollIntoView())}return!0}}const Un=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Vl=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let kv=null;const mo=function(t,e,n){let r=kv||(kv=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},t6=function(){kv=null},Ea=function(t,e,n,r){return n&&(WE(t,e,n,r,-1)||WE(t,e,n,r,1))},n6=/^(img|br|input|textarea|hr)$/i;function WE(t,e,n,r,i){for(var s;;){if(t==n&&e==r)return!0;if(e==(i<0?0:$r(t))){let l=t.parentNode;if(!l||l.nodeType!=1||Ju(t)||n6.test(t.nodeName)||t.contentEditable=="false")return!1;e=Un(t)+(i<0?0:1),t=l}else if(t.nodeType==1){let l=t.childNodes[e+(i<0?-1:0)];if(l.nodeType==1&&l.contentEditable=="false")if(!((s=l.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)e+=i;else return!1;else t=l,e=i<0?$r(t):0}else return!1}}function $r(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function r6(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=$r(t)}else if(t.parentNode&&!Ju(t))e=Un(t),t=t.parentNode;else return null}}function i6(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!Ju(t))e=Un(t)+1,t=t.parentNode;else return null}}function o6(t,e,n){for(let r=e==0,i=e==$r(t);r||i;){if(t==n)return!0;let s=Un(t);if(t=t.parentNode,!t)return!1;r=r&&s==0,i=i&&s==$r(t)}}function Ju(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const Ep=function(t){return t.focusNode&&Ea(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function aa(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function s6(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function a6(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min($r(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min($r(r.startContainer),r.startOffset)}}}const Ni=typeof navigator<"u"?navigator:null,$E=typeof document<"u"?document:null,Os=Ni&&Ni.userAgent||"",wv=/Edge\/(\d+)/.exec(Os),RT=/MSIE \d/.exec(Os),Cv=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Os),mr=!!(RT||Cv||wv),Es=RT?document.documentMode:Cv?+Cv[1]:wv?+wv[1]:0,Kr=!mr&&/gecko\/(\d+)/i.test(Os);Kr&&+(/Firefox\/(\d+)/.exec(Os)||[0,0])[1];const Tv=!mr&&/Chrome\/(\d+)/.exec(Os),On=!!Tv,NT=Tv?+Tv[1]:0,Fn=!mr&&!!Ni&&/Apple Computer/.test(Ni.vendor),Wl=Fn&&(/Mobile\/\w+/.test(Os)||!!Ni&&Ni.maxTouchPoints>2),Wr=Wl||(Ni?/Mac/.test(Ni.platform):!1),DT=Ni?/Win/.test(Ni.platform):!1,yo=/Android \d/.test(Os),Qu=!!$E&&"webkitFontSmoothing"in $E.documentElement.style,l6=Qu?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function c6(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function lo(t,e){return typeof t=="number"?t:t[e]}function u6(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function GE(t,e,n){let r=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let l=n||t.dom;l;){if(l.nodeType!=1){l=Vl(l);continue}let c=l,d=c==s.body,p=d?c6(s):u6(c),m=0,g=0;if(e.top<p.top+lo(r,"top")?g=-(p.top-e.top+lo(i,"top")):e.bottom>p.bottom-lo(r,"bottom")&&(g=e.bottom-e.top>p.bottom-p.top?e.top+lo(i,"top")-p.top:e.bottom-p.bottom+lo(i,"bottom")),e.left<p.left+lo(r,"left")?m=-(p.left-e.left+lo(i,"left")):e.right>p.right-lo(r,"right")&&(m=e.right-p.right+lo(i,"right")),m||g)if(d)s.defaultView.scrollBy(m,g);else{let b=c.scrollLeft,S=c.scrollTop;g&&(c.scrollTop+=g),m&&(c.scrollLeft+=m);let k=c.scrollLeft-b,E=c.scrollTop-S;e={left:e.left-k,top:e.top-E,right:e.right-k,bottom:e.bottom-E}}let v=d?"fixed":getComputedStyle(l).position;if(/^(fixed|sticky)$/.test(v))break;l=v=="absolute"?l.offsetParent:Vl(l)}}function d6(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,i;for(let s=(e.left+e.right)/2,l=n+1;l<Math.min(innerHeight,e.bottom);l+=5){let c=t.root.elementFromPoint(s,l);if(!c||c==t.dom||!t.dom.contains(c))continue;let d=c.getBoundingClientRect();if(d.top>=n-20){r=c,i=d.top;break}}return{refDOM:r,refTop:i,stack:zT(t.dom)}}function zT(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=Vl(r));return e}function f6({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;LT(n,r==0?0:r-e)}function LT(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:i,left:s}=t[n];r.scrollTop!=i+e&&(r.scrollTop=i+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let El=null;function h6(t){if(t.setActive)return t.setActive();if(El)return t.focus(El);let e=zT(t);t.focus(El==null?{get preventScroll(){return El={preventScroll:!0},!0}}:void 0),El||(El=!1,LT(e,0))}function IT(t,e){let n,r=2e8,i,s=0,l=e.top,c=e.top,d,p;for(let m=t.firstChild,g=0;m;m=m.nextSibling,g++){let v;if(m.nodeType==1)v=m.getClientRects();else if(m.nodeType==3)v=mo(m).getClientRects();else continue;for(let b=0;b<v.length;b++){let S=v[b];if(S.top<=l&&S.bottom>=c){l=Math.max(S.bottom,l),c=Math.min(S.top,c);let k=S.left>e.left?S.left-e.left:S.right<e.left?e.left-S.right:0;if(k<r){n=m,r=k,i=k&&n.nodeType==3?{left:S.right<e.left?S.right:S.left,top:e.top}:e,m.nodeType==1&&k&&(s=g+(e.left>=(S.left+S.right)/2?1:0));continue}}else S.top>e.top&&!d&&S.left<=e.left&&S.right>=e.left&&(d=m,p={left:Math.max(S.left,Math.min(S.right,e.left)),top:S.top});!n&&(e.left>=S.right&&e.top>=S.top||e.left>=S.left&&e.top>=S.bottom)&&(s=g+1)}}return!n&&d&&(n=d,i=p,r=0),n&&n.nodeType==3?p6(n,i):!n||r&&n.nodeType==1?{node:t,offset:s}:IT(n,i)}function p6(t,e){let n=t.nodeValue.length,r=document.createRange(),i;for(let s=0;s<n;s++){r.setEnd(t,s+1),r.setStart(t,s);let l=rs(r,1);if(l.top!=l.bottom&&Oy(e,l)){i={node:t,offset:s+(e.left>=(l.left+l.right)/2?1:0)};break}}return r.detach(),i||{node:t,offset:0}}function Oy(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function m6(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function g6(t,e,n){let{node:r,offset:i}=IT(e,n),s=-1;if(r.nodeType==1&&!r.firstChild){let l=r.getBoundingClientRect();s=l.left!=l.right&&n.left>(l.left+l.right)/2?1:-1}return t.docView.posFromDOM(r,i,s)}function v6(t,e,n,r){let i=-1;for(let s=e,l=!1;s!=t.dom;){let c=t.docView.nearestDesc(s,!0),d;if(!c)return null;if(c.dom.nodeType==1&&(c.node.isBlock&&c.parent||!c.contentDOM)&&((d=c.dom.getBoundingClientRect()).width||d.height)&&(c.node.isBlock&&c.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(c.dom.nodeName)&&(!l&&d.left>r.left||d.top>r.top?i=c.posBefore:(!l&&d.right<r.left||d.bottom<r.top)&&(i=c.posAfter),l=!0),!c.contentDOM&&i<0&&!c.node.isText))return(c.node.isBlock?r.top<(d.top+d.bottom)/2:r.left<(d.left+d.right)/2)?c.posBefore:c.posAfter;s=c.dom.parentNode}return i>-1?i:t.docView.posFromDOM(e,n,-1)}function PT(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),s=i;;){let l=t.childNodes[s];if(l.nodeType==1){let c=l.getClientRects();for(let d=0;d<c.length;d++){let p=c[d];if(Oy(e,p))return PT(l,e,p)}}if((s=(s+1)%r)==i)break}return t}function y6(t,e){let n=t.dom.ownerDocument,r,i=0,s=a6(n,e.left,e.top);s&&({node:r,offset:i}=s);let l=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),c;if(!l||!t.dom.contains(l.nodeType!=1?l.parentNode:l)){let p=t.dom.getBoundingClientRect();if(!Oy(e,p)||(l=PT(t.dom,e,p),!l))return null}if(Fn)for(let p=l;r&&p;p=Vl(p))p.draggable&&(r=void 0);if(l=m6(l,e),r){if(Kr&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let m=r.childNodes[i],g;m.nodeName=="IMG"&&(g=m.getBoundingClientRect()).right<=e.left&&g.bottom>e.top&&i++}let p;Qu&&i&&r.nodeType==1&&(p=r.childNodes[i-1]).nodeType==1&&p.contentEditable=="false"&&p.getBoundingClientRect().top>=e.top&&i--,r==t.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?c=t.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(c=v6(t,r,i,e))}c==null&&(c=g6(t,l,e));let d=t.docView.nearestDesc(l,!0);return{pos:c,inside:d?d.posAtStart-d.border:-1}}function KE(t){return t.top<t.bottom||t.left<t.right}function rs(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(KE(r))return r}return Array.prototype.find.call(n,KE)||t.getBoundingClientRect()}const b6=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function BT(t,e,n){let{node:r,offset:i,atom:s}=t.docView.domFromPos(e,n<0?-1:1),l=Qu||Kr;if(r.nodeType==3)if(l&&(b6.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let d=rs(mo(r,i,i),n);if(Kr&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let p=rs(mo(r,i-1,i-1),-1);if(p.top==d.top){let m=rs(mo(r,i,i+1),-1);if(m.top!=d.top)return au(m,m.left<p.left)}}return d}else{let d=i,p=i,m=n<0?1:-1;return n<0&&!i?(p++,m=-1):n>=0&&i==r.nodeValue.length?(d--,m=1):n<0?d--:p++,au(rs(mo(r,d,p),m),m<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&i&&(n<0||i==$r(r))){let d=r.childNodes[i-1];if(d.nodeType==1)return k0(d.getBoundingClientRect(),!1)}if(s==null&&i<$r(r)){let d=r.childNodes[i];if(d.nodeType==1)return k0(d.getBoundingClientRect(),!0)}return k0(r.getBoundingClientRect(),n>=0)}if(s==null&&i&&(n<0||i==$r(r))){let d=r.childNodes[i-1],p=d.nodeType==3?mo(d,$r(d)-(l?0:1)):d.nodeType==1&&(d.nodeName!="BR"||!d.nextSibling)?d:null;if(p)return au(rs(p,1),!1)}if(s==null&&i<$r(r)){let d=r.childNodes[i];for(;d.pmViewDesc&&d.pmViewDesc.ignoreForCoords;)d=d.nextSibling;let p=d?d.nodeType==3?mo(d,0,l?0:1):d.nodeType==1?d:null:null;if(p)return au(rs(p,-1),!0)}return au(rs(r.nodeType==3?mo(r):r,-n),n>=0)}function au(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function k0(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function UT(t,e,n){let r=t.state,i=t.root.activeElement;r!=e&&t.updateState(e),i!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),i!=t.dom&&i&&i.focus()}}function x6(t,e,n){let r=e.selection,i=n=="up"?r.$from:r.$to;return UT(t,e,()=>{let{node:s}=t.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let c=t.docView.nearestDesc(s,!0);if(!c)break;if(c.node.isBlock){s=c.contentDOM||c.dom;break}s=c.dom.parentNode}let l=BT(t,i.pos,1);for(let c=s.firstChild;c;c=c.nextSibling){let d;if(c.nodeType==1)d=c.getClientRects();else if(c.nodeType==3)d=mo(c,0,c.nodeValue.length).getClientRects();else continue;for(let p=0;p<d.length;p++){let m=d[p];if(m.bottom>m.top+1&&(n=="up"?l.top-m.top>(m.bottom-l.top)*2:m.bottom-l.bottom>(l.bottom-m.top)*2))return!1}}return!0})}const S6=/[\u0590-\u08ac]/;function E6(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,l=i==r.parent.content.size,c=t.domSelection();return c?!S6.test(r.parent.textContent)||!c.modify?n=="left"||n=="backward"?s:l:UT(t,e,()=>{let{focusNode:d,focusOffset:p,anchorNode:m,anchorOffset:g}=t.domSelectionRange(),v=c.caretBidiLevel;c.modify("move",n,"character");let b=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:S,focusOffset:k}=t.domSelectionRange(),E=S&&!b.contains(S.nodeType==1?S:S.parentNode)||d==S&&p==k;try{c.collapse(m,g),d&&(d!=m||p!=g)&&c.extend&&c.extend(d,p)}catch{}return v!=null&&(c.caretBidiLevel=v),E}):r.pos==r.start()||r.pos==r.end()}let YE=null,XE=null,JE=!1;function k6(t,e,n){return YE==e&&XE==n?JE:(YE=e,XE=n,JE=n=="up"||n=="down"?x6(t,e,n):E6(t,e,n))}const Yr=0,QE=1,ca=2,Di=3;class Zu{constructor(e,n,r,i){this.parent=e,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=Yr,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==e)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,l;if(e==this.contentDOM)s=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((l=s.pmViewDesc)&&l.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(l)+l.size:this.posAtStart}else{let s,l;if(e==this.contentDOM)s=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((l=s.pmViewDesc)&&l.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(l):this.posAtEnd}let i;if(e==this.dom&&this.contentDOM)i=n>Un(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&n==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,i=e;i;i=i.parentNode){let s=this.getDesc(i),l;if(s&&(!n||s.node))if(r&&(l=s.nodeDOM)&&!(l.nodeType==1?l.contains(e.nodeType==1?e:e.parentNode):l==e))r=!1;else return s}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let i=e;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],s=r+i.size;if(r==e&&s!=r){for(;!i.border&&i.children.length;)for(let l=0;l<i.children.length;l++){let c=i.children[l];if(c.size){i=c;break}}return i}if(e<s)return i.descAt(e-r-i.border);r=s}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let l=this.children[r],c=s+l.size;if(c>e||l instanceof qT){i=e-s;break}s=c}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof HT&&s.side>=0;r--);if(n<=0){let s,l=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,l=!1);return s&&n&&l&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?Un(s.dom)+1:0}}else{let s,l=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,l=!1);return s&&l&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?Un(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let l=r,c=0;;c++){let d=this.children[c],p=l+d.size;if(i==-1&&e<=p){let m=l+d.border;if(e>=m&&n<=p-d.border&&d.node&&d.contentDOM&&this.contentDOM.contains(d.contentDOM))return d.parseRange(e,n,m);e=l;for(let g=c;g>0;g--){let v=this.children[g-1];if(v.size&&v.dom.parentNode==this.contentDOM&&!v.emptyChildAt(1)){i=Un(v.dom)+1;break}e-=v.size}i==-1&&(i=0)}if(i>-1&&(p>n||c==this.children.length-1)){n=p;for(let m=c+1;m<this.children.length;m++){let g=this.children[m];if(g.size&&g.dom.parentNode==this.contentDOM&&!g.emptyChildAt(-1)){s=Un(g.dom);break}n+=g.size}s==-1&&(s=this.contentDOM.childNodes.length);break}l=p}return{node:this.contentDOM,from:e,to:n,fromOffset:i,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,i=!1){let s=Math.min(e,n),l=Math.max(e,n);for(let b=0,S=0;b<this.children.length;b++){let k=this.children[b],E=S+k.size;if(s>S&&l<E)return k.setSelection(e-S-k.border,n-S-k.border,r,i);S=E}let c=this.domFromPos(e,e?-1:1),d=n==e?c:this.domFromPos(n,n?-1:1),p=r.root.getSelection(),m=r.domSelectionRange(),g=!1;if((Kr||Fn)&&e==n){let{node:b,offset:S}=c;if(b.nodeType==3){if(g=!!(S&&b.nodeValue[S-1]==`
`),g&&S==b.nodeValue.length)for(let k=b,E;k;k=k.parentNode){if(E=k.nextSibling){E.nodeName=="BR"&&(c=d={node:E.parentNode,offset:Un(E)+1});break}let w=k.pmViewDesc;if(w&&w.node&&w.node.isBlock)break}}else{let k=b.childNodes[S-1];g=k&&(k.nodeName=="BR"||k.contentEditable=="false")}}if(Kr&&m.focusNode&&m.focusNode!=d.node&&m.focusNode.nodeType==1){let b=m.focusNode.childNodes[m.focusOffset];b&&b.contentEditable=="false"&&(i=!0)}if(!(i||g&&Fn)&&Ea(c.node,c.offset,m.anchorNode,m.anchorOffset)&&Ea(d.node,d.offset,m.focusNode,m.focusOffset))return;let v=!1;if((p.extend||e==n)&&!(g&&Kr)){p.collapse(c.node,c.offset);try{e!=n&&p.extend(d.node,d.offset),v=!0}catch{}}if(!v){if(e>n){let S=c;c=d,d=S}let b=document.createRange();b.setEnd(d.node,d.offset),b.setStart(c.node,c.offset),p.removeAllRanges(),p.addRange(b)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],l=r+s.size;if(r==l?e<=l&&n>=r:e<l&&n>r){let c=r+s.border,d=l-s.border;if(e>=c&&n<=d){this.dirty=e==r||n==l?ca:QE,e==c&&n==d&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=Di:s.markDirty(e-c,n-c);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?ca:Di}r=l}this.dirty=ca}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?ca:QE;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class HT extends Zu{constructor(e,n,r,i){let s,l=n.type.toDOM;if(typeof l=="function"&&(l=l(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(l.nodeType!=1){let c=document.createElement("span");c.appendChild(l),l=c}l.contentEditable="false",l.classList.add("ProseMirror-widget")}super(e,[],l,null),this.widget=n,this.widget=n,s=this}matchesWidget(e){return this.dirty==Yr&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class w6 extends Zu{constructor(e,n,r,i){super(e,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class ka extends Zu{constructor(e,n,r,i,s){super(e,[],r,i),this.mark=n,this.spec=s}static create(e,n,r,i){let s=i.nodeViews[n.type.name],l=s&&s(n,i,r);return(!l||!l.dom)&&(l=_a.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new ka(e,n,l.dom,l.contentDOM||l.dom,l)}parseRule(){return this.dirty&Di||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Di&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=Yr){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Yr}}slice(e,n,r){let i=ka.create(this.parent,this.mark,!0,r),s=this.children,l=this.size;n<l&&(s=Av(s,n,l,r)),e>0&&(s=Av(s,0,e,r));for(let c=0;c<s.length;c++)s[c].parent=i;return i.children=s,i}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class ks extends Zu{constructor(e,n,r,i,s,l,c,d,p){super(e,[],s,l),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=c}static create(e,n,r,i,s,l){let c=s.nodeViews[n.type.name],d,p=c&&c(n,s,()=>{if(!d)return l;if(d.parent)return d.parent.posBeforeChild(d)},r,i),m=p&&p.dom,g=p&&p.contentDOM;if(n.isText){if(!m)m=document.createTextNode(n.text);else if(m.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else m||({dom:m,contentDOM:g}=_a.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!g&&!n.isText&&m.nodeName!="BR"&&(m.hasAttribute("contenteditable")||(m.contentEditable="false"),n.type.spec.draggable&&(m.draggable=!0));let v=m;return m=WT(m,r,n),p?d=new C6(e,n,r,i,m,g||null,v,p,s,l+1):n.isText?new kp(e,n,r,i,m,v,s):new ks(e,n,r,i,m,g||null,v,s,l+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>ce.empty)}return e}matchesNode(e,n,r){return this.dirty==Yr&&e.eq(this.node)&&Sh(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,i=n,s=e.composing?this.localCompositionInfo(e,n):null,l=s&&s.pos>-1?s:null,c=s&&s.pos<0,d=new _6(this,l&&l.node,e);j6(this.node,this.innerDeco,(p,m,g)=>{p.spec.marks?d.syncToMarks(p.spec.marks,r,e,m):p.type.side>=0&&!g&&d.syncToMarks(m==this.node.childCount?It.none:this.node.child(m).marks,r,e,m),d.placeWidget(p,e,i)},(p,m,g,v)=>{d.syncToMarks(p.marks,r,e,v);let b;d.findNodeMatch(p,m,g,v)||c&&e.state.selection.from>i&&e.state.selection.to<i+p.nodeSize&&(b=d.findIndexWithChild(s.node))>-1&&d.updateNodeAt(p,m,g,b,e)||d.updateNextNode(p,m,g,e,v,i)||d.addNode(p,m,g,e,i),i+=p.nodeSize}),d.syncToMarks([],r,e,0),this.node.isTextblock&&d.addTextblockHacks(),d.destroyRest(),(d.changed||this.dirty==ca)&&(l&&this.protectLocalComposition(e,l),FT(this.contentDOM,this.children,e),Wl&&O6(this.dom))}localCompositionInfo(e,n){let{from:r,to:i}=e.state.selection;if(!(e.state.selection instanceof Ye)||r<n||i>n+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let l=s.nodeValue,c=R6(this.node.content,l,r-n,i-n);return c<0?null:{node:s,pos:c,text:l}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let l=new w6(this,s,n,i);e.input.compositionNodes.push(l),this.children=Av(this.children,r,r+i.length,e,l)}update(e,n,r,i){return this.dirty==Di||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,i),!0)}updateInner(e,n,r,i){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Yr}updateOuterDeco(e){if(Sh(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=VT(this.dom,this.nodeDOM,_v(this.outerDeco,this.node,n),_v(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function ZE(t,e,n,r,i){WT(r,e,t);let s=new ks(void 0,t,e,n,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class kp extends ks{constructor(e,n,r,i,s,l,c){super(e,n,r,i,s,null,l,c,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,i){return this.dirty==Di||this.dirty!=Yr&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Yr||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=e,this.dirty=Yr,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let i=this.node.cut(e,n),s=document.createTextNode(i.text);return new kp(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Di)}get domAtom(){return!1}isText(e){return this.node.text==e}}class qT extends Zu{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Yr&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class C6 extends ks{constructor(e,n,r,i,s,l,c,d,p,m){super(e,n,r,i,s,l,c,p,m),this.spec=d}update(e,n,r,i){if(this.dirty==Di)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,n,r);return s&&this.updateInner(e,n,r,i),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,i){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function FT(t,e,n){let r=t.firstChild,i=!1;for(let s=0;s<e.length;s++){let l=e[s],c=l.dom;if(c.parentNode==t){for(;c!=r;)r=ek(r),i=!0;r=r.nextSibling}else i=!0,t.insertBefore(c,r);if(l instanceof ka){let d=r?r.previousSibling:t.lastChild;FT(l.contentDOM,l.children,n),r=d?d.nextSibling:t.firstChild}}for(;r;)r=ek(r),i=!0;i&&n.trackWrites==t&&(n.trackWrites=null)}const Cu=function(t){t&&(this.nodeName=t)};Cu.prototype=Object.create(null);const ua=[new Cu];function _v(t,e,n){if(t.length==0)return ua;let r=n?ua[0]:new Cu,i=[r];for(let s=0;s<t.length;s++){let l=t[s].type.attrs;if(l){l.nodeName&&i.push(r=new Cu(l.nodeName));for(let c in l){let d=l[c];d!=null&&(n&&i.length==1&&i.push(r=new Cu(e.isInline?"span":"div")),c=="class"?r.class=(r.class?r.class+" ":"")+d:c=="style"?r.style=(r.style?r.style+";":"")+d:c!="nodeName"&&(r[c]=d))}}}return i}function VT(t,e,n,r){if(n==ua&&r==ua)return e;let i=e;for(let s=0;s<r.length;s++){let l=r[s],c=n[s];if(s){let d;c&&c.nodeName==l.nodeName&&i!=t&&(d=i.parentNode)&&d.nodeName.toLowerCase()==l.nodeName||(d=document.createElement(l.nodeName),d.pmIsDeco=!0,d.appendChild(i),c=ua[0]),i=d}T6(i,c||ua[0],l)}return i}function T6(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&t.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&t.classList.add(i[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(e.style);)t.style.removeProperty(i[1])}n.style&&(t.style.cssText+=n.style)}}function WT(t,e,n){return VT(t,t,ua,_v(e,n,t.nodeType!=1))}function Sh(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function ek(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class _6{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=A6(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r,i){let s=0,l=this.stack.length>>1,c=Math.min(l,e.length);for(;s<c&&(s==l-1?this.top:this.stack[s+1<<1]).matchesMark(e[s])&&e[s].type.spec.spanning!==!1;)s++;for(;s<l;)this.destroyRest(),this.top.dirty=Yr,this.index=this.stack.pop(),this.top=this.stack.pop(),l--;for(;l<e.length;){this.stack.push(this.top,this.index+1);let d=-1,p=this.top.children.length;i<this.preMatch.index&&(p=Math.min(this.index+3,p));for(let m=this.index;m<p;m++){let g=this.top.children[m];if(g.matchesMark(e[l])&&!this.isLocked(g.dom)){d=m;break}}if(d>-1)d>this.index&&(this.changed=!0,this.destroyBetween(this.index,d)),this.top=this.top.children[this.index];else{let m=ka.create(this.top,e[l],n,r);this.top.children.splice(this.index,0,m),this.top=m,this.changed=!0}this.index=0,l++}}findNodeMatch(e,n,r,i){let s=-1,l;if(i>=this.preMatch.index&&(l=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&l.matchesNode(e,n,r))s=this.top.children.indexOf(l,this.index);else for(let c=this.index,d=Math.min(this.top.children.length,c+5);c<d;c++){let p=this.top.children[c];if(p.matchesNode(e,n,r)&&!this.preMatch.matched.has(p)){s=c;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,n,r,i,s){let l=this.top.children[i];return l.dirty==Di&&l.dom==l.contentDOM&&(l.dirty=ca),l.update(e,n,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}e=n}}updateNextNode(e,n,r,i,s,l){for(let c=this.index;c<this.top.children.length;c++){let d=this.top.children[c];if(d instanceof ks){let p=this.preMatch.matched.get(d);if(p!=null&&p!=s)return!1;let m=d.dom,g,v=this.isLocked(m)&&!(e.isText&&d.node&&d.node.isText&&d.nodeDOM.nodeValue==e.text&&d.dirty!=Di&&Sh(n,d.outerDeco));if(!v&&d.update(e,n,r,i))return this.destroyBetween(this.index,c),d.dom!=m&&(this.changed=!0),this.index++,!0;if(!v&&(g=this.recreateWrapper(d,e,n,r,i,l)))return this.destroyBetween(this.index,c),this.top.children[this.index]=g,g.contentDOM&&(g.dirty=ca,g.updateChildren(i,l+1),g.dirty=Yr),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,i,s,l){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!Sh(r,e.outerDeco)||!i.eq(e.innerDeco))return null;let c=ks.create(this.top,n,r,i,s,l);if(c.contentDOM){c.children=e.children,e.children=[];for(let d of c.children)d.parent=c}return e.destroy(),c}addNode(e,n,r,i,s){let l=ks.create(this.top,e,n,r,i,s);l.contentDOM&&l.updateChildren(i,s+1),this.top.children.splice(this.index++,0,l),this.changed=!0}placeWidget(e,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(e)&&(e==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new HT(this.top,e,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof ka;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof kp)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Fn||On)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new qT(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function A6(t,e){let n=e,r=n.children.length,i=t.childCount,s=new Map,l=[];e:for(;i>0;){let c;for(;;)if(r){let p=n.children[r-1];if(p instanceof ka)n=p,r=p.children.length;else{c=p,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let d=c.node;if(d){if(d!=t.child(i-1))break;--i,s.set(c,i),l.push(c)}}return{index:i,matched:s,matches:l.reverse()}}function M6(t,e){return t.type.side-e.type.side}function j6(t,e,n,r){let i=e.locals(t),s=0;if(i.length==0){for(let p=0;p<t.childCount;p++){let m=t.child(p);r(m,i,e.forChild(s,m),p),s+=m.nodeSize}return}let l=0,c=[],d=null;for(let p=0;;){let m,g;for(;l<i.length&&i[l].to==s;){let E=i[l++];E.widget&&(m?(g||(g=[m])).push(E):m=E)}if(m)if(g){g.sort(M6);for(let E=0;E<g.length;E++)n(g[E],p,!!d)}else n(m,p,!!d);let v,b;if(d)b=-1,v=d,d=null;else if(p<t.childCount)b=p,v=t.child(p++);else break;for(let E=0;E<c.length;E++)c[E].to<=s&&c.splice(E--,1);for(;l<i.length&&i[l].from<=s&&i[l].to>s;)c.push(i[l++]);let S=s+v.nodeSize;if(v.isText){let E=S;l<i.length&&i[l].from<E&&(E=i[l].from);for(let w=0;w<c.length;w++)c[w].to<E&&(E=c[w].to);E<S&&(d=v.cut(E-s),v=v.cut(0,E-s),S=E,b=-1)}else for(;l<i.length&&i[l].to<S;)l++;let k=v.isInline&&!v.isLeaf?c.filter(E=>!E.inline):c.slice();r(v,k,e.forChild(s,v),b),s=S}}function O6(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function R6(t,e,n,r){for(let i=0,s=0;i<t.childCount&&s<=r;){let l=t.child(i++),c=s;if(s+=l.nodeSize,!l.isText)continue;let d=l.text;for(;i<t.childCount;){let p=t.child(i++);if(s+=p.nodeSize,!p.isText)break;d+=p.text}if(s>=n){if(s>=r&&d.slice(r-e.length-c,r-c)==e)return r-e.length;let p=c<r?d.lastIndexOf(e,r-c-1):-1;if(p>=0&&p+e.length+c>=n)return c+p;if(n==r&&d.length>=r+e.length-c&&d.slice(r-c,r-c+e.length)==e)return r}}return-1}function Av(t,e,n,r,i){let s=[];for(let l=0,c=0;l<t.length;l++){let d=t[l],p=c,m=c+=d.size;p>=n||m<=e?s.push(d):(p<e&&s.push(d.slice(0,e-p,r)),i&&(s.push(i),i=void 0),m>n&&s.push(d.slice(n-p,d.size,r)))}return s}function Ry(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let i=t.docView.nearestDesc(n.focusNode),s=i&&i.size==0,l=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(l<0)return null;let c=r.resolve(l),d,p;if(Ep(n)){for(d=l;i&&!i.node;)i=i.parent;let g=i.node;if(i&&g.isAtom&&Fe.isSelectable(g)&&i.parent&&!(g.isInline&&o6(n.focusNode,n.focusOffset,i.dom))){let v=i.posBefore;p=new Fe(l==v?c:r.resolve(v))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let g=l,v=l;for(let b=0;b<n.rangeCount;b++){let S=n.getRangeAt(b);g=Math.min(g,t.docView.posFromDOM(S.startContainer,S.startOffset,1)),v=Math.max(v,t.docView.posFromDOM(S.endContainer,S.endOffset,-1))}if(g<0)return null;[d,l]=v==t.state.selection.anchor?[v,g]:[g,v],c=r.resolve(l)}else d=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(d<0)return null}let m=r.resolve(d);if(!p){let g=e=="pointer"||t.state.selection.head<c.pos&&!s?1:-1;p=Ny(t,m,c,g)}return p}function $T(t){return t.editable?t.hasFocus():KT(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function xo(t,e=!1){let n=t.state.selection;if(GT(t,n),!!$T(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&On){let r=t.domSelectionRange(),i=t.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&Ea(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)D6(t);else{let{anchor:r,head:i}=n,s,l;tk&&!(n instanceof Ye)&&(n.$from.parent.inlineContent||(s=nk(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(l=nk(t,n.to))),t.docView.setSelection(r,i,t,e),tk&&(s&&rk(s),l&&rk(l)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&N6(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const tk=Fn||On&&NT<63;function nk(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(Fn&&i&&i.contentEditable=="false")return w0(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return w0(i);if(s)return w0(s)}}function w0(t){return t.contentEditable="true",Fn&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function rk(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function N6(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!$T(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function D6(t){let e=t.domSelection();if(!e)return;let n=t.cursorWrapper.dom,r=n.nodeName=="IMG";r?e.collapse(n.parentNode,Un(n)+1):e.collapse(n,0),!r&&!t.state.selection.visible&&mr&&Es<=11&&(n.disabled=!0,n.disabled=!1)}function GT(t,e){if(e instanceof Fe){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(ik(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else ik(t)}function ik(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function Ny(t,e,n,r){return t.someProp("createSelectionBetween",i=>i(t,e,n))||Ye.between(e,n,r)}function ok(t){return t.editable&&!t.hasFocus()?!1:KT(t)}function KT(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function z6(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return Ea(e.node,e.offset,n.anchorNode,n.anchorOffset)}function Mv(t,e){let{$anchor:n,$head:r}=t.selection,i=e>0?n.max(r):n.min(r),s=i.parent.inlineContent?i.depth?t.doc.resolve(e>0?i.after():i.before()):null:i;return s&&at.findFrom(s,e)}function as(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function sk(t,e,n){let r=t.state.selection;if(r instanceof Ye)if(n.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let l=t.state.doc.resolve(i.pos+s.nodeSize*(e<0?-1:1));return as(t,new Ye(r.$anchor,l))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let i=Mv(t.state,e);return i&&i instanceof Fe?as(t,i):!1}else if(!(Wr&&n.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:e<0?i.nodeBefore:i.nodeAfter,l;if(!s||s.isText)return!1;let c=e<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(l=t.docView.descAt(c))&&!l.contentDOM?Fe.isSelectable(s)?as(t,new Fe(e<0?t.state.doc.resolve(i.pos-s.nodeSize):i)):Qu?as(t,new Ye(t.state.doc.resolve(e<0?c:c+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof Fe&&r.node.isInline)return as(t,new Ye(e>0?r.$to:r.$from));{let i=Mv(t.state,e);return i?as(t,i):!1}}}function Eh(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Tu(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function kl(t,e){return e<0?L6(t):I6(t)}function L6(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i,s,l=!1;for(Kr&&n.nodeType==1&&r<Eh(n)&&Tu(n.childNodes[r],-1)&&(l=!0);;)if(r>0){if(n.nodeType!=1)break;{let c=n.childNodes[r-1];if(Tu(c,-1))i=n,s=--r;else if(c.nodeType==3)n=c,r=n.nodeValue.length;else break}}else{if(YT(n))break;{let c=n.previousSibling;for(;c&&Tu(c,-1);)i=n.parentNode,s=Un(c),c=c.previousSibling;if(c)n=c,r=Eh(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}l?jv(t,n,r):i&&jv(t,i,s)}function I6(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let i=Eh(n),s,l;for(;;)if(r<i){if(n.nodeType!=1)break;let c=n.childNodes[r];if(Tu(c,1))s=n,l=++r;else break}else{if(YT(n))break;{let c=n.nextSibling;for(;c&&Tu(c,1);)s=c.parentNode,l=Un(c)+1,c=c.nextSibling;if(c)n=c,r=0,i=Eh(n);else{if(n=n.parentNode,n==t.dom)break;r=i=0}}}s&&jv(t,s,l)}function YT(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function P6(t,e){for(;t&&e==t.childNodes.length&&!Ju(t);)e=Un(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function B6(t,e){for(;t&&!e&&!Ju(t);)e=Un(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function jv(t,e,n){if(e.nodeType!=3){let s,l;(l=P6(e,n))?(e=l,n=0):(s=B6(e,n))&&(e=s,n=s.nodeValue.length)}let r=t.domSelection();if(!r)return;if(Ep(r)){let s=document.createRange();s.setEnd(e,n),s.setStart(e,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:i}=t;setTimeout(()=>{t.state==i&&xo(t)},50)}function ak(t,e){let n=t.state.doc.resolve(e);if(!(On||DT)&&n.parent.inlineContent){let i=t.coordsAtPos(e);if(e>n.start()){let s=t.coordsAtPos(e-1),l=(s.top+s.bottom)/2;if(l>i.top&&l<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(e<n.end()){let s=t.coordsAtPos(e+1),l=(s.top+s.bottom)/2;if(l>i.top&&l<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function lk(t,e,n){let r=t.state.selection;if(r instanceof Ye&&!r.empty||n.indexOf("s")>-1||Wr&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let l=Mv(t.state,e);if(l&&l instanceof Fe)return as(t,l)}if(!i.parent.inlineContent){let l=e<0?i:s,c=r instanceof Ar?at.near(l,e):at.findFrom(l,e);return c?as(t,c):!1}return!1}function ck(t,e){if(!(t.state.selection instanceof Ye))return!0;let{$head:n,$anchor:r,empty:i}=t.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let l=t.state.tr;return e<0?l.delete(n.pos-s.nodeSize,n.pos):l.delete(n.pos,n.pos+s.nodeSize),t.dispatch(l),!0}return!1}function uk(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function U6(t){if(!Fn||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;uk(t,r,"true"),setTimeout(()=>uk(t,r,"false"),20)}return!1}function H6(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function q6(t,e){let n=e.keyCode,r=H6(e);if(n==8||Wr&&n==72&&r=="c")return ck(t,-1)||kl(t,-1);if(n==46&&!e.shiftKey||Wr&&n==68&&r=="c")return ck(t,1)||kl(t,1);if(n==13||n==27)return!0;if(n==37||Wr&&n==66&&r=="c"){let i=n==37?ak(t,t.state.selection.from)=="ltr"?-1:1:-1;return sk(t,i,r)||kl(t,i)}else if(n==39||Wr&&n==70&&r=="c"){let i=n==39?ak(t,t.state.selection.from)=="ltr"?1:-1:1;return sk(t,i,r)||kl(t,i)}else{if(n==38||Wr&&n==80&&r=="c")return lk(t,-1,r)||kl(t,-1);if(n==40||Wr&&n==78&&r=="c")return U6(t)||lk(t,1,r)||kl(t,1);if(r==(Wr?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function Dy(t,e){t.someProp("transformCopied",b=>{e=b(e,t)});let n=[],{content:r,openStart:i,openEnd:s}=e;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let b=r.firstChild;n.push(b.type.name,b.attrs!=b.type.defaultAttrs?b.attrs:null),r=b.content}let l=t.someProp("clipboardSerializer")||_a.fromSchema(t.state.schema),c=t_(),d=c.createElement("div");d.appendChild(l.serializeFragment(r,{document:c}));let p=d.firstChild,m,g=0;for(;p&&p.nodeType==1&&(m=e_[p.nodeName.toLowerCase()]);){for(let b=m.length-1;b>=0;b--){let S=c.createElement(m[b]);for(;d.firstChild;)S.appendChild(d.firstChild);d.appendChild(S),g++}p=d.firstChild}p&&p.nodeType==1&&p.setAttribute("data-pm-slice",`${i} ${s}${g?` -${g}`:""} ${JSON.stringify(n)}`);let v=t.someProp("clipboardTextSerializer",b=>b(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:d,text:v,slice:e}}function XT(t,e,n,r,i){let s=i.parent.type.spec.code,l,c;if(!n&&!e)return null;let d=!!e&&(r||s||!n);if(d){if(t.someProp("transformPastedText",v=>{e=v(e,s||r,t)}),s)return c=new Te(ce.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",v=>{c=v(c,t,!0)}),c;let g=t.someProp("clipboardTextParser",v=>v(e,i,r,t));if(g)c=g;else{let v=i.marks(),{schema:b}=t.state,S=_a.fromSchema(b);l=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(k=>{let E=l.appendChild(document.createElement("p"));k&&E.appendChild(S.serializeNode(b.text(k,v)))})}}else t.someProp("transformPastedHTML",g=>{n=g(n,t)}),l=$6(n),Qu&&G6(l);let p=l&&l.querySelector("[data-pm-slice]"),m=p&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(p.getAttribute("data-pm-slice")||"");if(m&&m[3])for(let g=+m[3];g>0;g--){let v=l.firstChild;for(;v&&v.nodeType!=1;)v=v.nextSibling;if(!v)break;l=v}if(c||(c=(t.someProp("clipboardParser")||t.someProp("domParser")||Ss.fromSchema(t.state.schema)).parseSlice(l,{preserveWhitespace:!!(d||m),context:i,ruleFromNode(v){return v.nodeName=="BR"&&!v.nextSibling&&v.parentNode&&!F6.test(v.parentNode.nodeName)?{ignore:!0}:null}})),m)c=K6(dk(c,+m[1],+m[2]),m[4]);else if(c=Te.maxOpen(V6(c.content,i),!0),c.openStart||c.openEnd){let g=0,v=0;for(let b=c.content.firstChild;g<c.openStart&&!b.type.spec.isolating;g++,b=b.firstChild);for(let b=c.content.lastChild;v<c.openEnd&&!b.type.spec.isolating;v++,b=b.lastChild);c=dk(c,g,v)}return t.someProp("transformPasted",g=>{c=g(c,t,d)}),c}const F6=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function V6(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.index(n)),s,l=[];if(t.forEach(c=>{if(!l)return;let d=i.findWrapping(c.type),p;if(!d)return l=null;if(p=l.length&&s.length&&QT(d,s,c,l[l.length-1],0))l[l.length-1]=p;else{l.length&&(l[l.length-1]=ZT(l[l.length-1],s.length));let m=JT(c,d);l.push(m),i=i.matchType(m.type),s=d}}),l)return ce.from(l)}return t}function JT(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,ce.from(t));return t}function QT(t,e,n,r,i){if(i<t.length&&i<e.length&&t[i]==e[i]){let s=QT(t,e,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==t.length-1?n.type:t[i+1]))return r.copy(r.content.append(ce.from(JT(n,t,i+1))))}}function ZT(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,ZT(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(ce.empty,!0);return t.copy(n.append(r))}function Ov(t,e,n,r,i,s){let l=e<0?t.firstChild:t.lastChild,c=l.content;return t.childCount>1&&(s=0),i<r-1&&(c=Ov(c,e,n,r,i+1,s)),i>=n&&(c=e<0?l.contentMatchAt(0).fillBefore(c,s<=i).append(c):c.append(l.contentMatchAt(l.childCount).fillBefore(ce.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,l.copy(c))}function dk(t,e,n){return e<t.openStart&&(t=new Te(Ov(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new Te(Ov(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const e_={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let fk=null;function t_(){return fk||(fk=document.implementation.createHTMLDocument("title"))}let C0=null;function W6(t){let e=window.trustedTypes;return e?(C0||(C0=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),C0.createHTML(t)):t}function $6(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=t_().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),i;if((i=r&&e_[r[1].toLowerCase()])&&(t=i.map(s=>"<"+s+">").join("")+t+i.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=W6(t),i)for(let s=0;s<i.length;s++)n=n.querySelector(i[s])||n;return n}function G6(t){let e=t.querySelectorAll(On?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function K6(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:i,openStart:s,openEnd:l}=t;for(let c=r.length-2;c>=0;c-=2){let d=n.nodes[r[c]];if(!d||d.hasRequiredAttrs())break;i=ce.from(d.create(r[c+1],i)),s++,l++}return new Te(i,s,l)}const nr={},rr={},Y6={touchstart:!0,touchmove:!0};class X6{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.badSafariComposition=!1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function J6(t){for(let e in nr){let n=nr[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{Z6(t,r)&&!zy(t,r)&&(t.editable||!(r.type in rr))&&n(t,r)},Y6[e]?{passive:!0}:void 0)}Fn&&t.dom.addEventListener("input",()=>null),Rv(t)}function ys(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function Q6(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function Rv(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>zy(t,r))})}function zy(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function Z6(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function eP(t,e){!zy(t,e)&&nr[e.type]&&(t.editable||!(e.type in rr))&&nr[e.type](t,e)}rr.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!r_(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(yo&&On&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),Wl&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",i=>i(t,aa(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||q6(t,n)?n.preventDefault():ys(t,"key")};rr.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};rr.keypress=(t,e)=>{let n=e;if(r_(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Wr&&n.metaKey)return;if(t.someProp("handleKeyPress",i=>i(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof Ye)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode),s=()=>t.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!t.someProp("handleTextInput",l=>l(t,r.$from.pos,r.$to.pos,i,s))&&t.dispatch(s()),n.preventDefault()}};function wp(t){return{left:t.clientX,top:t.clientY}}function tP(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function Ly(t,e,n,r,i){if(r==-1)return!1;let s=t.state.doc.resolve(r);for(let l=s.depth+1;l>0;l--)if(t.someProp(e,c=>l>s.depth?c(t,n,s.nodeAfter,s.before(l),i,!0):c(t,n,s.node(l),s.before(l),i,!1)))return!0;return!1}function Il(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function nP(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&Fe.isSelectable(r)?(Il(t,new Fe(n)),!0):!1}function rP(t,e){if(e==-1)return!1;let n=t.state.selection,r,i;n instanceof Fe&&(r=n.node);let s=t.state.doc.resolve(e);for(let l=s.depth+1;l>0;l--){let c=l>s.depth?s.nodeAfter:s.node(l);if(Fe.isSelectable(c)){r&&n.$from.depth>0&&l>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?i=s.before(n.$from.depth):i=s.before(l);break}}return i!=null?(Il(t,Fe.create(t.state.doc,i)),!0):!1}function iP(t,e,n,r,i){return Ly(t,"handleClickOn",e,n,r)||t.someProp("handleClick",s=>s(t,e,r))||(i?rP(t,n):nP(t,n))}function oP(t,e,n,r){return Ly(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",i=>i(t,e,r))}function sP(t,e,n,r){return Ly(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",i=>i(t,e,r))||aP(t,n,r)}function aP(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(Il(t,Ye.create(r,0,r.content.size)),!0):!1;let i=r.resolve(e);for(let s=i.depth+1;s>0;s--){let l=s>i.depth?i.nodeAfter:i.node(s),c=i.before(s);if(l.inlineContent)Il(t,Ye.create(r,c+1,c+1+l.content.size));else if(Fe.isSelectable(l))Il(t,Fe.create(r,c));else continue;return!0}}function Iy(t){return kh(t)}const n_=Wr?"metaKey":"ctrlKey";nr.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=Iy(t),i=Date.now(),s="singleClick";i-t.input.lastClick.time<500&&tP(n,t.input.lastClick)&&!n[n_]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:s,button:n.button};let l=t.posAtCoords(wp(n));l&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new lP(t,l,n,!!r)):(s=="doubleClick"?oP:sP)(t,l.pos,l.inside,n)?n.preventDefault():ys(t,"pointer"))};class lP{constructor(e,n,r,i){this.view=e,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[n_],this.allowDefault=r.shiftKey;let s,l;if(n.inside>-1)s=e.state.doc.nodeAt(n.inside),l=n.inside;else{let m=e.state.doc.resolve(n.pos);s=m.parent,l=m.depth?m.before():0}const c=i?null:r.target,d=c?e.docView.nearestDesc(c,!0):null;this.target=d&&d.nodeDOM.nodeType==1?d.nodeDOM:null;let{selection:p}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||p instanceof Fe&&p.from<=l&&p.to>l)&&(this.mightDrag={node:s,pos:l,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Kr&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),ys(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>xo(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(wp(e))),this.updateAllowDefault(e),this.allowDefault||!n?ys(this.view,"pointer"):iP(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Fn&&this.mightDrag&&!this.mightDrag.node.isAtom||On&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Il(this.view,at.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):ys(this.view,"pointer")}move(e){this.updateAllowDefault(e),ys(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}nr.touchstart=t=>{t.input.lastTouch=Date.now(),Iy(t),ys(t,"pointer")};nr.touchmove=t=>{t.input.lastTouch=Date.now(),ys(t,"pointer")};nr.contextmenu=t=>Iy(t);function r_(t,e){return t.composing?!0:Fn&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const cP=yo?5e3:-1;rr.compositionstart=rr.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof Ye&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)||On&&DT&&uP(t)))t.markCursor=t.state.storedMarks||n.marks(),kh(t,!0),t.markCursor=null;else if(kh(t,!e.selection.empty),Kr&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let l=s<0?i.lastChild:i.childNodes[s-1];if(!l)break;if(l.nodeType==3){let c=t.domSelection();c&&c.collapse(l,l.nodeValue.length);break}else i=l,s=-1}}t.input.composing=!0}i_(t,cP)};function uP(t){let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(!e||e.nodeType!=1||n>=e.childNodes.length)return!1;let r=e.childNodes[n];return r.nodeType==1&&r.contentEditable=="false"}rr.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.badSafariComposition?t.domObserver.forceFlush():t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,i_(t,20))};function i_(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>kh(t),e))}function o_(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=fP());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function dP(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=r6(e.focusNode,e.focusOffset),r=i6(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,s=t.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let l=n.pmViewDesc;if(!(!l||!l.isText(n.nodeValue)))return r}}return n||r}function fP(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function kh(t,e=!1){if(!(yo&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),o_(t),e||t.docView&&t.docView.dirty){let n=Ry(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function hP(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const Bu=mr&&Es<15||Wl&&l6<604;nr.copy=rr.cut=(t,e)=>{let n=e,r=t.state.selection,i=n.type=="cut";if(r.empty)return;let s=Bu?null:n.clipboardData,l=r.content(),{dom:c,text:d}=Dy(t,l);s?(n.preventDefault(),s.clearData(),s.setData("text/html",c.innerHTML),s.setData("text/plain",d)):hP(t,c),i&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function pP(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function mP(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Uu(t,r.value,null,i,e):Uu(t,r.textContent,r.innerHTML,i,e)},50)}function Uu(t,e,n,r,i){let s=XT(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",d=>d(t,i,s||Te.empty)))return!0;if(!s)return!1;let l=pP(s),c=l?t.state.tr.replaceSelectionWith(l,r):t.state.tr.replaceSelection(s);return t.dispatch(c.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function s_(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}rr.paste=(t,e)=>{let n=e;if(t.composing&&!yo)return;let r=Bu?null:n.clipboardData,i=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&Uu(t,s_(r),r.getData("text/html"),i,n)?n.preventDefault():mP(t,n)};class a_{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const gP=Wr?"altKey":"ctrlKey";function l_(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[gP]}nr.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=t.state.selection,s=i.empty?null:t.posAtCoords(wp(n)),l;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof Fe?i.to-1:i.to))){if(r&&r.mightDrag)l=Fe.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let g=t.docView.nearestDesc(n.target,!0);g&&g.node.type.spec.draggable&&g!=t.docView&&(l=Fe.create(t.state.doc,g.posBefore))}}let c=(l||t.state.selection).content(),{dom:d,text:p,slice:m}=Dy(t,c);(!n.dataTransfer.files.length||!On||NT>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Bu?"Text":"text/html",d.innerHTML),n.dataTransfer.effectAllowed="copyMove",Bu||n.dataTransfer.setData("text/plain",p),t.dragging=new a_(m,l_(t,n),l)};nr.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};rr.dragover=rr.dragenter=(t,e)=>e.preventDefault();rr.drop=(t,e)=>{try{vP(t,e,t.dragging)}finally{t.dragging=null}};function vP(t,e,n){if(!e.dataTransfer)return;let r=t.posAtCoords(wp(e));if(!r)return;let i=t.state.doc.resolve(r.pos),s=n&&n.slice;s?t.someProp("transformPasted",b=>{s=b(s,t,!1)}):s=XT(t,s_(e.dataTransfer),Bu?null:e.dataTransfer.getData("text/html"),!1,i);let l=!!(n&&l_(t,e));if(t.someProp("handleDrop",b=>b(t,e,s||Te.empty,l))){e.preventDefault();return}if(!s)return;e.preventDefault();let c=s?fT(t.state.doc,i.pos,s):i.pos;c==null&&(c=i.pos);let d=t.state.tr;if(l){let{node:b}=n;b?b.replace(d):d.deleteSelection()}let p=d.mapping.map(c),m=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,g=d.doc;if(m?d.replaceRangeWith(p,p,s.content.firstChild):d.replaceRange(p,p,s),d.doc.eq(g))return;let v=d.doc.resolve(p);if(m&&Fe.isSelectable(s.content.firstChild)&&v.nodeAfter&&v.nodeAfter.sameMarkup(s.content.firstChild))d.setSelection(new Fe(v));else{let b=d.mapping.map(c);d.mapping.maps[d.mapping.maps.length-1].forEach((S,k,E,w)=>b=w),d.setSelection(Ny(t,v,d.doc.resolve(b)))}t.focus(),t.dispatch(d.setMeta("uiEvent","drop"))}nr.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&xo(t)},20))};nr.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};nr.beforeinput=(t,e)=>{if(On&&yo&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,aa(8,"Backspace")))))return;let{$cursor:i}=t.state.selection;i&&i.pos>0&&t.dispatch(t.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let t in rr)nr[t]=rr[t];function Hu(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class wh{constructor(e,n){this.toDOM=e,this.spec=n||ga,this.side=this.spec.side||0}map(e,n,r,i){let{pos:s,deleted:l}=e.mapResult(n.from+i,this.side<0?-1:1);return l?null:new tr(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof wh&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Hu(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class ws{constructor(e,n){this.attrs=e,this.spec=n||ga}map(e,n,r,i){let s=e.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,l=e.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=l?null:new tr(s,l,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof ws&&Hu(this.attrs,e.attrs)&&Hu(this.spec,e.spec)}static is(e){return e.type instanceof ws}destroy(){}}class Py{constructor(e,n){this.attrs=e,this.spec=n||ga}map(e,n,r,i){let s=e.mapResult(n.from+i,1);if(s.deleted)return null;let l=e.mapResult(n.to+i,-1);return l.deleted||l.pos<=s.pos?null:new tr(s.pos-r,l.pos-r,this)}valid(e,n){let{index:r,offset:i}=e.content.findIndex(n.from),s;return i==n.from&&!(s=e.child(r)).isText&&i+s.nodeSize==n.to}eq(e){return this==e||e instanceof Py&&Hu(this.attrs,e.attrs)&&Hu(this.spec,e.spec)}destroy(){}}class tr{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new tr(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new tr(e,e,new wh(n,r))}static inline(e,n,r,i){return new tr(e,n,new ws(r,i))}static node(e,n,r,i){return new tr(e,n,new Py(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof ws}get widget(){return this.type instanceof wh}}const Al=[],ga={};class tn{constructor(e,n){this.local=e.length?e:Al,this.children=n.length?n:Al}static create(e,n){return n.length?Ch(n,e,0,ga):Wn}find(e,n,r){let i=[];return this.findInner(e??0,n??1e9,i,0,r),i}findInner(e,n,r,i,s){for(let l=0;l<this.local.length;l++){let c=this.local[l];c.from<=n&&c.to>=e&&(!s||s(c.spec))&&r.push(c.copy(c.from+i,c.to+i))}for(let l=0;l<this.children.length;l+=3)if(this.children[l]<n&&this.children[l+1]>e){let c=this.children[l]+1;this.children[l+2].findInner(e-c,n-c,r,i+c,s)}}map(e,n,r){return this==Wn||e.maps.length==0?this:this.mapInner(e,n,0,0,r||ga)}mapInner(e,n,r,i,s){let l;for(let c=0;c<this.local.length;c++){let d=this.local[c].map(e,r,i);d&&d.type.valid(n,d)?(l||(l=[])).push(d):s.onRemove&&s.onRemove(this.local[c].spec)}return this.children.length?yP(this.children,l||[],e,n,r,i,s):l?new tn(l.sort(va),Al):Wn}add(e,n){return n.length?this==Wn?tn.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let i,s=0;e.forEach((c,d)=>{let p=d+r,m;if(m=u_(n,c,p)){for(i||(i=this.children.slice());s<i.length&&i[s]<d;)s+=3;i[s]==d?i[s+2]=i[s+2].addInner(c,m,p+1):i.splice(s,0,d,d+c.nodeSize,Ch(m,c,p+1,ga)),s+=3}});let l=c_(s?d_(n):n,-r);for(let c=0;c<l.length;c++)l[c].type.valid(e,l[c])||l.splice(c--,1);return new tn(l.length?this.local.concat(l).sort(va):this.local,i||this.children)}remove(e){return e.length==0||this==Wn?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let l,c=r[s]+n,d=r[s+1]+n;for(let m=0,g;m<e.length;m++)(g=e[m])&&g.from>c&&g.to<d&&(e[m]=null,(l||(l=[])).push(g));if(!l)continue;r==this.children&&(r=this.children.slice());let p=r[s+2].removeInner(l,c+1);p!=Wn?r[s+2]=p:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,l;s<e.length;s++)if(l=e[s])for(let c=0;c<i.length;c++)i[c].eq(l,n)&&(i==this.local&&(i=this.local.slice()),i.splice(c--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new tn(i,r):Wn}forChild(e,n){if(this==Wn)return this;if(n.isLeaf)return tn.empty;let r,i;for(let c=0;c<this.children.length;c+=3)if(this.children[c]>=e){this.children[c]==e&&(r=this.children[c+2]);break}let s=e+1,l=s+n.content.size;for(let c=0;c<this.local.length;c++){let d=this.local[c];if(d.from<l&&d.to>s&&d.type instanceof ws){let p=Math.max(s,d.from)-s,m=Math.min(l,d.to)-s;p<m&&(i||(i=[])).push(d.copy(p,m))}}if(i){let c=new tn(i.sort(va),Al);return r?new us([c,r]):c}return r||Wn}eq(e){if(this==e)return!0;if(!(e instanceof tn)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return By(this.localsInner(e))}localsInner(e){if(this==Wn)return Al;if(e.inlineContent||!this.local.some(ws.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof ws||n.push(this.local[r]);return n}forEachSet(e){e(this)}}tn.empty=new tn([],[]);tn.removeOverlap=By;const Wn=tn.empty;class us{constructor(e){this.members=e}map(e,n){const r=this.members.map(i=>i.map(e,n,ga));return us.from(r)}forChild(e,n){if(n.isLeaf)return tn.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(e,n);s!=Wn&&(s instanceof us?r=r.concat(s.members):r.push(s))}return us.from(r)}eq(e){if(!(e instanceof us)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(e);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let l=0;l<s.length;l++)n.push(s[l])}}return n?By(r?n:n.sort(va)):Al}static from(e){switch(e.length){case 0:return Wn;case 1:return e[0];default:return new us(e.every(n=>n instanceof tn)?e:e.reduce((n,r)=>n.concat(r instanceof tn?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function yP(t,e,n,r,i,s,l){let c=t.slice();for(let p=0,m=s;p<n.maps.length;p++){let g=0;n.maps[p].forEach((v,b,S,k)=>{let E=k-S-(b-v);for(let w=0;w<c.length;w+=3){let T=c[w+1];if(T<0||v>T+m-g)continue;let _=c[w]+m-g;b>=_?c[w+1]=v<=_?-2:-1:v>=m&&E&&(c[w]+=E,c[w+1]+=E)}g+=E}),m=n.maps[p].map(m,-1)}let d=!1;for(let p=0;p<c.length;p+=3)if(c[p+1]<0){if(c[p+1]==-2){d=!0,c[p+1]=-1;continue}let m=n.map(t[p]+s),g=m-i;if(g<0||g>=r.content.size){d=!0;continue}let v=n.map(t[p+1]+s,-1),b=v-i,{index:S,offset:k}=r.content.findIndex(g),E=r.maybeChild(S);if(E&&k==g&&k+E.nodeSize==b){let w=c[p+2].mapInner(n,E,m+1,t[p]+s+1,l);w!=Wn?(c[p]=g,c[p+1]=b,c[p+2]=w):(c[p+1]=-2,d=!0)}else d=!0}if(d){let p=bP(c,t,e,n,i,s,l),m=Ch(p,r,0,l);e=m.local;for(let g=0;g<c.length;g+=3)c[g+1]<0&&(c.splice(g,3),g-=3);for(let g=0,v=0;g<m.children.length;g+=3){let b=m.children[g];for(;v<c.length&&c[v]<b;)v+=3;c.splice(v,0,m.children[g],m.children[g+1],m.children[g+2])}}return new tn(e.sort(va),c)}function c_(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let i=t[r];n.push(new tr(i.from+e,i.to+e,i.type))}return n}function bP(t,e,n,r,i,s,l){function c(d,p){for(let m=0;m<d.local.length;m++){let g=d.local[m].map(r,i,p);g?n.push(g):l.onRemove&&l.onRemove(d.local[m].spec)}for(let m=0;m<d.children.length;m+=3)c(d.children[m+2],d.children[m]+p+1)}for(let d=0;d<t.length;d+=3)t[d+1]==-1&&c(t[d+2],e[d]+s+1);return n}function u_(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,i=null;for(let s=0,l;s<t.length;s++)(l=t[s])&&l.from>n&&l.to<r&&((i||(i=[])).push(l),t[s]=null);return i}function d_(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Ch(t,e,n,r){let i=[],s=!1;e.forEach((c,d)=>{let p=u_(t,c,d+n);if(p){s=!0;let m=Ch(p,c,n+d+1,r);m!=Wn&&i.push(d,d+c.nodeSize,m)}});let l=c_(s?d_(t):t,-n).sort(va);for(let c=0;c<l.length;c++)l[c].type.valid(e,l[c])||(r.onRemove&&r.onRemove(l[c].spec),l.splice(c--,1));return l.length||i.length?new tn(l,i):Wn}function va(t,e){return t.from-e.from||t.to-e.to}function By(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let i=n+1;i<e.length;i++){let s=e[i];if(s.from==r.from){s.to!=r.to&&(e==t&&(e=t.slice()),e[i]=s.copy(s.from,r.to),hk(e,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,s.from),hk(e,i,r.copy(s.from,r.to)));break}}}return e}function hk(t,e,n){for(;e<t.length&&va(n,t[e])>0;)e++;t.splice(e,0,n)}function T0(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=Wn&&e.push(r)}),t.cursorWrapper&&e.push(tn.create(t.state.doc,[t.cursorWrapper.deco])),us.from(e)}const xP={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},SP=mr&&Es<=11;class EP{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class kP{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new EP,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);mr&&Es<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():Fn&&e.composing&&r.some(i=>i.type=="childList"&&i.target.nodeName=="TR")?(e.input.badSafariComposition=!0,this.flushSoon()):this.flush()}),SP&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,xP)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(ok(this.view)){if(this.suppressingSelectionUpdates)return xo(this.view);if(mr&&Es<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&Ea(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let s=e.focusNode;s;s=Vl(s))n.add(s);for(let s=e.anchorNode;s;s=Vl(s))if(n.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&ok(e)&&!this.ignoreSelectionChange(r),s=-1,l=-1,c=!1,d=[];if(e.editable)for(let m=0;m<n.length;m++){let g=this.registerMutation(n[m],d);g&&(s=s<0?g.from:Math.min(g.from,s),l=l<0?g.to:Math.max(g.to,l),g.typeOver&&(c=!0))}if(Kr&&d.length){let m=d.filter(g=>g.nodeName=="BR");if(m.length==2){let[g,v]=m;g.parentNode&&g.parentNode.parentNode==v.parentNode?v.remove():g.remove()}else{let{focusNode:g}=this.currentSelection;for(let v of m){let b=v.parentNode;b&&b.nodeName=="LI"&&(!g||TP(e,g)!=b)&&v.remove()}}}else if((On||Fn)&&d.some(m=>m.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let m of d)if(m.nodeName=="BR"&&m.parentNode){let g=m.nextSibling;g&&g.nodeType==1&&g.contentEditable=="false"&&m.parentNode.removeChild(m)}}let p=null;s<0&&i&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Ep(r)&&(p=Ry(e))&&p.eq(at.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,xo(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||i)&&(s>-1&&(e.docView.markDirty(s,l),wP(e)),e.input.badSafariComposition&&(e.input.badSafariComposition=!1,_P(e,d)),this.handleDOMChange(s,l,c,d),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||xo(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let m=0;m<e.addedNodes.length;m++){let g=e.addedNodes[m];n.push(g),g.nodeType==3&&(this.lastChangedTextNode=g)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let i=e.previousSibling,s=e.nextSibling;if(mr&&Es<=11&&e.addedNodes.length)for(let m=0;m<e.addedNodes.length;m++){let{previousSibling:g,nextSibling:v}=e.addedNodes[m];(!g||Array.prototype.indexOf.call(e.addedNodes,g)<0)&&(i=g),(!v||Array.prototype.indexOf.call(e.addedNodes,v)<0)&&(s=v)}let l=i&&i.parentNode==e.target?Un(i)+1:0,c=r.localPosFromDOM(e.target,l,-1),d=s&&s.parentNode==e.target?Un(s):e.target.childNodes.length,p=r.localPosFromDOM(e.target,d,1);return{from:c,to:p}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let pk=new WeakMap,mk=!1;function wP(t){if(!pk.has(t)&&(pk.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Kr,mk)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),mk=!0}}function gk(t,e){let n=e.startContainer,r=e.startOffset,i=e.endContainer,s=e.endOffset,l=t.domAtPos(t.state.selection.anchor);return Ea(l.node,l.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function CP(t,e){if(e.getComposedRanges){let i=e.getComposedRanges(t.root)[0];if(i)return gk(t,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?gk(t,n):null}function TP(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function _P(t,e){var n;let{focusNode:r,focusOffset:i}=t.domSelectionRange();for(let s of e)if(((n=s.parentNode)===null||n===void 0?void 0:n.nodeName)=="TR"){let l=s.nextSibling;for(;l&&l.nodeName!="TD"&&l.nodeName!="TH";)l=l.nextSibling;if(l){let c=l;for(;;){let d=c.firstChild;if(!d||d.nodeType!=1||d.contentEditable=="false"||/^(BR|IMG)$/.test(d.nodeName))break;c=d}c.insertBefore(s,c.firstChild),r==s&&t.domSelection().collapse(s,i)}else s.parentNode.removeChild(s)}}function AP(t,e,n){let{node:r,fromOffset:i,toOffset:s,from:l,to:c}=t.docView.parseRange(e,n),d=t.domSelectionRange(),p,m=d.anchorNode;if(m&&t.dom.contains(m.nodeType==1?m:m.parentNode)&&(p=[{node:m,offset:d.anchorOffset}],Ep(d)||p.push({node:d.focusNode,offset:d.focusOffset})),On&&t.input.lastKeyCode===8)for(let E=s;E>i;E--){let w=r.childNodes[E-1],T=w.pmViewDesc;if(w.nodeName=="BR"&&!T){s=E;break}if(!T||T.size)break}let g=t.state.doc,v=t.someProp("domParser")||Ss.fromSchema(t.state.schema),b=g.resolve(l),S=null,k=v.parse(r,{topNode:b.parent,topMatch:b.parent.contentMatchAt(b.index()),topOpen:!0,from:i,to:s,preserveWhitespace:b.parent.type.whitespace=="pre"?"full":!0,findPositions:p,ruleFromNode:MP,context:b});if(p&&p[0].pos!=null){let E=p[0].pos,w=p[1]&&p[1].pos;w==null&&(w=E),S={anchor:E+l,head:w+l}}return{doc:k,sel:S,from:l,to:c}}function MP(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(Fn&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||Fn&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const jP=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function OP(t,e,n,r,i){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let I=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,H=Ry(t,I);if(H&&!t.state.selection.eq(H)){if(On&&yo&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",K=>K(t,aa(13,"Enter"))))return;let V=t.state.tr.setSelection(H);I=="pointer"?V.setMeta("pointer",!0):I=="key"&&V.scrollIntoView(),s&&V.setMeta("composition",s),t.dispatch(V)}return}let l=t.state.doc.resolve(e),c=l.sharedDepth(n);e=l.before(c+1),n=t.state.doc.resolve(n).after(c+1);let d=t.state.selection,p=AP(t,e,n),m=t.state.doc,g=m.slice(p.from,p.to),v,b;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(v=t.state.selection.to,b="end"):(v=t.state.selection.from,b="start"),t.input.lastKeyCode=null;let S=DP(g.content,p.doc.content,p.from,v,b);if(S&&t.input.domChangeCount++,(Wl&&t.input.lastIOSEnter>Date.now()-225||yo)&&i.some(I=>I.nodeType==1&&!jP.test(I.nodeName))&&(!S||S.endA>=S.endB)&&t.someProp("handleKeyDown",I=>I(t,aa(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!S)if(r&&d instanceof Ye&&!d.empty&&d.$head.sameParent(d.$anchor)&&!t.composing&&!(p.sel&&p.sel.anchor!=p.sel.head))S={start:d.from,endA:d.to,endB:d.to};else{if(p.sel){let I=vk(t,t.state.doc,p.sel);if(I&&!I.eq(t.state.selection)){let H=t.state.tr.setSelection(I);s&&H.setMeta("composition",s),t.dispatch(H)}}return}t.state.selection.from<t.state.selection.to&&S.start==S.endB&&t.state.selection instanceof Ye&&(S.start>t.state.selection.from&&S.start<=t.state.selection.from+2&&t.state.selection.from>=p.from?S.start=t.state.selection.from:S.endA<t.state.selection.to&&S.endA>=t.state.selection.to-2&&t.state.selection.to<=p.to&&(S.endB+=t.state.selection.to-S.endA,S.endA=t.state.selection.to)),mr&&Es<=11&&S.endB==S.start+1&&S.endA==S.start&&S.start>p.from&&p.doc.textBetween(S.start-p.from-1,S.start-p.from+1)==" "&&(S.start--,S.endA--,S.endB--);let k=p.doc.resolveNoCache(S.start-p.from),E=p.doc.resolveNoCache(S.endB-p.from),w=m.resolve(S.start),T=k.sameParent(E)&&k.parent.inlineContent&&w.end()>=S.endA;if((Wl&&t.input.lastIOSEnter>Date.now()-225&&(!T||i.some(I=>I.nodeName=="DIV"||I.nodeName=="P"))||!T&&k.pos<p.doc.content.size&&(!k.sameParent(E)||!k.parent.inlineContent)&&k.pos<E.pos&&!/\S/.test(p.doc.textBetween(k.pos,E.pos,"","")))&&t.someProp("handleKeyDown",I=>I(t,aa(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>S.start&&NP(m,S.start,S.endA,k,E)&&t.someProp("handleKeyDown",I=>I(t,aa(8,"Backspace")))){yo&&On&&t.domObserver.suppressSelectionUpdates();return}On&&S.endB==S.start&&(t.input.lastChromeDelete=Date.now()),yo&&!T&&k.start()!=E.start()&&E.parentOffset==0&&k.depth==E.depth&&p.sel&&p.sel.anchor==p.sel.head&&p.sel.head==S.endA&&(S.endB-=2,E=p.doc.resolveNoCache(S.endB-p.from),setTimeout(()=>{t.someProp("handleKeyDown",function(I){return I(t,aa(13,"Enter"))})},20));let _=S.start,R=S.endA,O=I=>{let H=I||t.state.tr.replace(_,R,p.doc.slice(S.start-p.from,S.endB-p.from));if(p.sel){let V=vk(t,H.doc,p.sel);V&&!(On&&t.composing&&V.empty&&(S.start!=S.endB||t.input.lastChromeDelete<Date.now()-100)&&(V.head==_||V.head==H.mapping.map(R)-1)||mr&&V.empty&&V.head==_)&&H.setSelection(V)}return s&&H.setMeta("composition",s),H.scrollIntoView()},D;if(T)if(k.pos==E.pos){mr&&Es<=11&&k.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>xo(t),20));let I=O(t.state.tr.delete(_,R)),H=m.resolve(S.start).marksAcross(m.resolve(S.endA));H&&I.ensureMarks(H),t.dispatch(I)}else if(S.endA==S.endB&&(D=RP(k.parent.content.cut(k.parentOffset,E.parentOffset),w.parent.content.cut(w.parentOffset,S.endA-w.start())))){let I=O(t.state.tr);D.type=="add"?I.addMark(_,R,D.mark):I.removeMark(_,R,D.mark),t.dispatch(I)}else if(k.parent.child(k.index()).isText&&k.index()==E.index()-(E.textOffset?0:1)){let I=k.parent.textBetween(k.parentOffset,E.parentOffset),H=()=>O(t.state.tr.insertText(I,_,R));t.someProp("handleTextInput",V=>V(t,_,R,I,H))||t.dispatch(H())}else t.dispatch(O());else t.dispatch(O())}function vk(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:Ny(t,e.resolve(n.anchor),e.resolve(n.head))}function RP(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,i=n,s=r,l,c,d;for(let m=0;m<r.length;m++)i=r[m].removeFromSet(i);for(let m=0;m<n.length;m++)s=n[m].removeFromSet(s);if(i.length==1&&s.length==0)c=i[0],l="add",d=m=>m.mark(c.addToSet(m.marks));else if(i.length==0&&s.length==1)c=s[0],l="remove",d=m=>m.mark(c.removeFromSet(m.marks));else return null;let p=[];for(let m=0;m<e.childCount;m++)p.push(d(e.child(m)));if(ce.from(p).eq(t))return{mark:c,type:l}}function NP(t,e,n,r,i){if(n-e<=i.pos-r.pos||_0(r,!0,!1)<i.pos)return!1;let s=t.resolve(e);if(!r.parent.isTextblock){let c=s.nodeAfter;return c!=null&&n==e+c.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let l=t.resolve(_0(s,!0,!0));return!l.parent.isTextblock||l.pos>n||_0(l,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(l.parent.content)}function _0(t,e,n){let r=t.depth,i=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,i++,e=!1;if(n){let s=t.node(r).maybeChild(t.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function DP(t,e,n,r,i){let s=t.findDiffStart(e,n);if(s==null)return null;let{a:l,b:c}=t.findDiffEnd(e,n+t.size,n+e.size);if(i=="end"){let d=Math.max(0,s-Math.min(l,c));r-=l+d-s}if(l<s&&t.size<e.size){let d=r<=s&&r>=l?s-r:0;s-=d,s&&s<e.size&&yk(e.textBetween(s-1,s+1))&&(s+=d?1:-1),c=s+(c-l),l=s}else if(c<s){let d=r<=s&&r>=c?s-r:0;s-=d,s&&s<t.size&&yk(t.textBetween(s-1,s+1))&&(s+=d?1:-1),l=s+(l-c),c=s}return{start:s,endA:l,endB:c}}function yk(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class f_{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new X6,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(kk),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Sk(this),xk(this),this.nodeViews=Ek(this),this.docView=ZE(this.state.doc,bk(this),T0(this),this.dom,this),this.domObserver=new kP(this,(r,i,s,l)=>OP(this,r,i,s,l)),this.domObserver.start(),J6(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Rv(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(kk),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let i=this.state,s=!1,l=!1;e.storedMarks&&this.composing&&(o_(this),l=!0),this.state=e;let c=i.plugins!=e.plugins||this._props.plugins!=n.plugins;if(c||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let b=Ek(this);LP(b,this.nodeViews)&&(this.nodeViews=b,s=!0)}(c||n.handleDOMEvents!=this._props.handleDOMEvents)&&Rv(this),this.editable=Sk(this),xk(this);let d=T0(this),p=bk(this),m=i.plugins!=e.plugins&&!i.doc.eq(e.doc)?"reset":e.scrollToSelection>i.scrollToSelection?"to selection":"preserve",g=s||!this.docView.matchesNode(e.doc,p,d);(g||!e.selection.eq(i.selection))&&(l=!0);let v=m=="preserve"&&l&&this.dom.style.overflowAnchor==null&&d6(this);if(l){this.domObserver.stop();let b=g&&(mr||On)&&!this.composing&&!i.selection.empty&&!e.selection.empty&&zP(i.selection,e.selection);if(g){let S=On?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=dP(this)),(s||!this.docView.update(e.doc,p,d,this))&&(this.docView.updateOuterDeco(p),this.docView.destroy(),this.docView=ZE(e.doc,p,d,this.dom,this)),S&&(!this.trackWrites||!this.dom.contains(this.trackWrites))&&(b=!0)}b||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&z6(this))?xo(this,b):(GT(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,i),m=="reset"?this.dom.scrollTop=0:m=="to selection"?this.scrollToSelection():v&&f6(v)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof Fe){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&GE(this,n.getBoundingClientRect(),e)}else GE(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new a_(e.slice,e.move,i<0?void 0:Fe.create(this.state.doc,i))}someProp(e,n){let r=this._props&&this._props[e],i;if(r!=null&&(i=n?n(r):r))return i;for(let l=0;l<this.directPlugins.length;l++){let c=this.directPlugins[l].props[e];if(c!=null&&(i=n?n(c):c))return i}let s=this.state.plugins;if(s)for(let l=0;l<s.length;l++){let c=s[l].props[e];if(c!=null&&(i=n?n(c):c))return i}}hasFocus(){if(mr){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&h6(this.dom),xo(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return y6(this,e)}coordsAtPos(e,n=1){return BT(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let i=this.docView.posFromDOM(e,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(e,n){return k6(this,n||this.state,e)}pasteHTML(e,n){return Uu(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return Uu(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return Dy(this,e)}destroy(){this.docView&&(Q6(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],T0(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,t6())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return eP(this,e)}domSelectionRange(){let e=this.domSelection();return e?Fn&&this.root.nodeType===11&&s6(this.dom.ownerDocument)==this.dom&&CP(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}f_.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function bk(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[tr.node(0,t.state.doc.content.size,e)]}function xk(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:tr.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function Sk(t){return!t.someProp("editable",e=>e(t.state)===!1)}function zP(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function Ek(t){let e=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(e,i)||(e[i]=r[i])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function LP(t,e){let n=0,r=0;for(let i in t){if(t[i]!=e[i])return!0;n++}for(let i in e)r++;return n!=r}function kk(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Ts={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Th={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},IP=typeof navigator<"u"&&/Mac/.test(navigator.platform),PP=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Hn=0;Hn<10;Hn++)Ts[48+Hn]=Ts[96+Hn]=String(Hn);for(var Hn=1;Hn<=24;Hn++)Ts[Hn+111]="F"+Hn;for(var Hn=65;Hn<=90;Hn++)Ts[Hn]=String.fromCharCode(Hn+32),Th[Hn]=String.fromCharCode(Hn);for(var A0 in Ts)Th.hasOwnProperty(A0)||(Th[A0]=Ts[A0]);function BP(t){var e=IP&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||PP&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Th:Ts)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const UP=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),HP=typeof navigator<"u"&&/Win/.test(navigator.platform);function qP(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,i,s,l;for(let c=0;c<e.length-1;c++){let d=e[c];if(/^(cmd|meta|m)$/i.test(d))l=!0;else if(/^a(lt)?$/i.test(d))r=!0;else if(/^(c|ctrl|control)$/i.test(d))i=!0;else if(/^s(hift)?$/i.test(d))s=!0;else if(/^mod$/i.test(d))UP?l=!0:i=!0;else throw new Error("Unrecognized modifier name: "+d)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),l&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function FP(t){let e=Object.create(null);for(let n in t)e[qP(n)]=t[n];return e}function M0(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function VP(t){return new nn({props:{handleKeyDown:h_(t)}})}function h_(t){let e=FP(t);return function(n,r){let i=BP(r),s,l=e[M0(i,r)];if(l&&l(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let c=e[M0(i,r,!1)];if(c&&c(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(HP&&r.ctrlKey&&r.altKey)&&(s=Ts[r.keyCode])&&s!=i){let c=e[M0(s,r)];if(c&&c(n.state,n.dispatch,n))return!0}}return!1}}var WP=Object.defineProperty,Uy=(t,e)=>{for(var n in e)WP(t,n,{get:e[n],enumerable:!0})};function Cp(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:i}=n,{storedMarks:s}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,s=n.storedMarks,n}}}var Tp=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:n}=this,{view:r}=e,{tr:i}=n,s=this.buildProps(i);return Object.fromEntries(Object.entries(t).map(([l,c])=>[l,(...p)=>{const m=c(...p)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(i),m}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,l=[],c=!!t,d=t||i.tr,p=()=>(!c&&e&&!d.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(d),l.every(g=>g===!0)),m={...Object.fromEntries(Object.entries(n).map(([g,v])=>[g,(...S)=>{const k=this.buildProps(d,e),E=v(...S)(k);return l.push(E),m}])),run:p};return m}createCan(t){const{rawCommands:e,state:n}=this,r=!1,i=t||n.tr,s=this.buildProps(i,r);return{...Object.fromEntries(Object.entries(e).map(([c,d])=>[c,(...p)=>d(...p)({...s,dispatch:void 0})])),chain:()=>this.createChain(i,r)}}buildProps(t,e=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,l={tr:t,editor:r,view:s,state:Cp({state:i,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(n).map(([c,d])=>[c,(...p)=>d(...p)(l)]))}};return l}},p_={};Uy(p_,{blur:()=>$P,clearContent:()=>GP,clearNodes:()=>KP,command:()=>YP,createParagraphNear:()=>XP,cut:()=>JP,deleteCurrentNode:()=>QP,deleteNode:()=>ZP,deleteRange:()=>e8,deleteSelection:()=>t8,enter:()=>n8,exitCode:()=>r8,extendMarkRange:()=>i8,first:()=>o8,focus:()=>a8,forEach:()=>l8,insertContent:()=>c8,insertContentAt:()=>f8,joinBackward:()=>m8,joinDown:()=>p8,joinForward:()=>g8,joinItemBackward:()=>v8,joinItemForward:()=>y8,joinTextblockBackward:()=>b8,joinTextblockForward:()=>x8,joinUp:()=>h8,keyboardShortcut:()=>E8,lift:()=>k8,liftEmptyBlock:()=>w8,liftListItem:()=>C8,newlineInCode:()=>T8,resetAttributes:()=>_8,scrollIntoView:()=>A8,selectAll:()=>M8,selectNodeBackward:()=>j8,selectNodeForward:()=>O8,selectParentNode:()=>R8,selectTextblockEnd:()=>N8,selectTextblockStart:()=>D8,setContent:()=>z8,setMark:()=>tB,setMeta:()=>nB,setNode:()=>rB,setNodeSelection:()=>iB,setTextDirection:()=>oB,setTextSelection:()=>sB,sinkListItem:()=>aB,splitBlock:()=>lB,splitListItem:()=>cB,toggleList:()=>uB,toggleMark:()=>dB,toggleNode:()=>fB,toggleWrap:()=>hB,undoInputRule:()=>pB,unsetAllMarks:()=>mB,unsetMark:()=>gB,unsetTextDirection:()=>vB,updateAttributes:()=>yB,wrapIn:()=>bB,wrapInList:()=>xB});var $P=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window?.getSelection())==null||n.removeAllRanges())}),!0),GP=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),KP=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:i}=r;return n&&i.forEach(({$from:s,$to:l})=>{t.doc.nodesBetween(s.pos,l.pos,(c,d)=>{if(c.type.isText)return;const{doc:p,mapping:m}=e,g=p.resolve(m.map(d)),v=p.resolve(m.map(d+c.nodeSize)),b=g.blockRange(v);if(!b)return;const S=Ql(b);if(c.type.isTextblock){const{defaultType:k}=g.parent.contentMatchAt(g.index());e.setNodeMarkup(b.start,k)}(S||S===0)&&e.lift(b,S)})}),!0},YP=t=>e=>t(e),XP=()=>({state:t,dispatch:e})=>AT(t,e),JP=(t,e)=>({editor:n,tr:r})=>{const{state:i}=n,s=i.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const l=r.mapping.map(e);return r.insert(l,s.content),r.setSelection(new Ye(r.doc.resolve(Math.max(l-1,0)))),!0},QP=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const i=t.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(e){const c=i.before(s),d=i.after(s);t.delete(c,d).scrollIntoView()}return!0}return!1};function En(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}var ZP=t=>({tr:e,state:n,dispatch:r})=>{const i=En(t,n.schema),s=e.selection.$anchor;for(let l=s.depth;l>0;l-=1)if(s.node(l).type===i){if(r){const d=s.before(l),p=s.after(l);e.delete(d,p).scrollIntoView()}return!0}return!1},e8=t=>({tr:e,dispatch:n})=>{const{from:r,to:i}=t;return n&&e.delete(r,i),!0},t8=()=>({state:t,dispatch:e})=>Ty(t,e),n8=()=>({commands:t})=>t.keyboardShortcut("Enter"),r8=()=>({state:t,dispatch:e})=>UI(t,e);function Hy(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function _h(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(i=>n.strict?e[i]===t[i]:Hy(e[i])?e[i].test(t[i]):e[i]===t[i]):!0}function m_(t,e,n={}){return t.find(r=>r.type===e&&_h(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function wk(t,e,n={}){return!!m_(t,e,n)}function qy(t,e,n){var r;if(!t||!e)return;let i=t.parent.childAfter(t.parentOffset);if((!i.node||!i.node.marks.some(m=>m.type===e))&&(i=t.parent.childBefore(t.parentOffset)),!i.node||!i.node.marks.some(m=>m.type===e)||(n=n||((r=i.node.marks[0])==null?void 0:r.attrs),!m_([...i.node.marks],e,n)))return;let l=i.index,c=t.start()+i.offset,d=l+1,p=c+i.node.nodeSize;for(;l>0&&wk([...t.parent.child(l-1).marks],e,n);)l-=1,c-=t.parent.child(l).nodeSize;for(;d<t.parent.childCount&&wk([...t.parent.child(d).marks],e,n);)p+=t.parent.child(d).nodeSize,d+=1;return{from:c,to:p}}function ko(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}var i8=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const s=ko(t,r.schema),{doc:l,selection:c}=n,{$from:d,from:p,to:m}=c;if(i){const g=qy(d,s,e);if(g&&g.from<=p&&g.to>=m){const v=Ye.create(l,g.from,g.to);n.setSelection(v)}}return!0},o8=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function g_(t){return t instanceof Ye}function da(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function v_(t,e=null){if(!e)return null;const n=at.atStart(t),r=at.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const i=n.from,s=r.to;return e==="all"?Ye.create(t,da(0,i,s),da(t.content.size,i,s)):Ye.create(t,da(e,i,s),da(e,i,s))}function Ck(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function Ah(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function s8(){return typeof navigator<"u"?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}var a8=(t=null,e={})=>({editor:n,view:r,tr:i,dispatch:s})=>{e={scrollIntoView:!0,...e};const l=()=>{(Ah()||Ck())&&r.dom.focus(),s8()&&!Ah()&&!Ck()&&r.dom.focus({preventScroll:!0}),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e?.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(s&&t===null&&!g_(n.state.selection))return l(),!0;const c=v_(i.doc,t)||n.state.selection,d=n.state.selection.eq(c);return s&&(d||i.setSelection(c),d&&i.storedMarks&&i.setStoredMarks(i.storedMarks),l()),!0},l8=(t,e)=>n=>t.every((r,i)=>e(r,{...n,index:i})),c8=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),y_=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&y_(r)}return t};function Rf(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return y_(n)}function qu(t,e,n){if(t instanceof fi||t instanceof ce)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,i=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return ce.fromArray(t.map(c=>e.nodeFromJSON(c)));const l=e.nodeFromJSON(t);return n.errorOnInvalidContent&&l.check(),l}catch(s){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",s),qu("",e,n)}if(i){if(n.errorOnInvalidContent){let l=!1,c="";const d=new tT({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:p=>(l=!0,c=typeof p=="string"?p:p.outerHTML,null)}]}})});if(n.slice?Ss.fromSchema(d).parseSlice(Rf(t),n.parseOptions):Ss.fromSchema(d).parse(Rf(t),n.parseOptions),n.errorOnInvalidContent&&l)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${c}`)})}const s=Ss.fromSchema(e);return n.slice?s.parseSlice(Rf(t),n.parseOptions).content:s.parse(Rf(t),n.parseOptions)}return qu("",e,n)}function u8(t,e,n){const r=t.steps.length-1;if(r<e)return;const i=t.steps[r];if(!(i instanceof jn||i instanceof Rn))return;const s=t.mapping.maps[r];let l=0;s.forEach((c,d,p,m)=>{l===0&&(l=m)}),t.setSelection(at.near(t.doc.resolve(l),n))}var d8=t=>!("type"in t),f8=(t,e,n)=>({tr:r,dispatch:i,editor:s})=>{var l;if(i){n={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let c;const d=E=>{s.emit("contentError",{editor:s,error:E,disableCollaboration:()=>{"collaboration"in s.storage&&typeof s.storage.collaboration=="object"&&s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},p={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{qu(e,s.schema,{parseOptions:p,errorOnInvalidContent:!0})}catch(E){d(E)}try{c=qu(e,s.schema,{parseOptions:p,errorOnInvalidContent:(l=n.errorOnInvalidContent)!=null?l:s.options.enableContentCheck})}catch(E){return d(E),!1}let{from:m,to:g}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},v=!0,b=!0;if((d8(c)?c:[c]).forEach(E=>{E.check(),v=v?E.isText&&E.marks.length===0:!1,b=b?E.isBlock:!1}),m===g&&b){const{parent:E}=r.doc.resolve(m);E.isTextblock&&!E.type.spec.code&&!E.childCount&&(m-=1,g+=1)}let k;if(v){if(Array.isArray(e))k=e.map(E=>E.text||"").join("");else if(e instanceof ce){let E="";e.forEach(w=>{w.text&&(E+=w.text)}),k=E}else typeof e=="object"&&e&&e.text?k=e.text:k=e;r.insertText(k,m,g)}else{k=c;const E=r.doc.resolve(m),w=E.node(),T=E.parentOffset===0,_=w.isText||w.isTextblock,R=w.content.size>0;T&&_&&R&&(m=Math.max(0,m-1)),r.replaceWith(m,g,k)}n.updateSelection&&u8(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:m,text:k}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:m,text:k})}return!0},h8=()=>({state:t,dispatch:e})=>II(t,e),p8=()=>({state:t,dispatch:e})=>PI(t,e),m8=()=>({state:t,dispatch:e})=>ST(t,e),g8=()=>({state:t,dispatch:e})=>CT(t,e),v8=()=>({state:t,dispatch:e,tr:n})=>{try{const r=bp(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},y8=()=>({state:t,dispatch:e,tr:n})=>{try{const r=bp(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},b8=()=>({state:t,dispatch:e})=>zI(t,e),x8=()=>({state:t,dispatch:e})=>LI(t,e);function b_(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function S8(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,i,s,l;for(let c=0;c<e.length-1;c+=1){const d=e[c];if(/^(cmd|meta|m)$/i.test(d))l=!0;else if(/^a(lt)?$/i.test(d))r=!0;else if(/^(c|ctrl|control)$/i.test(d))i=!0;else if(/^s(hift)?$/i.test(d))s=!0;else if(/^mod$/i.test(d))Ah()||b_()?l=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${d}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),l&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}var E8=t=>({editor:e,view:n,tr:r,dispatch:i})=>{const s=S8(t).split(/-(?!$)/),l=s.find(p=>!["Alt","Ctrl","Meta","Shift"].includes(p)),c=new KeyboardEvent("keydown",{key:l==="Space"?" ":l,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),d=e.captureTransaction(()=>{n.someProp("handleKeyDown",p=>p(n,c))});return d?.steps.forEach(p=>{const m=p.map(r.mapping);m&&i&&r.maybeStep(m)}),!0};function _s(t,e,n={}){const{from:r,to:i,empty:s}=t.selection,l=e?En(e,t.schema):null,c=[];t.doc.nodesBetween(r,i,(g,v)=>{if(g.isText)return;const b=Math.max(r,v),S=Math.min(i,v+g.nodeSize);c.push({node:g,from:b,to:S})});const d=i-r,p=c.filter(g=>l?l.name===g.node.type.name:!0).filter(g=>_h(g.node.attrs,n,{strict:!1}));return s?!!p.length:p.reduce((g,v)=>g+v.to-v.from,0)>=d}var k8=(t,e={})=>({state:n,dispatch:r})=>{const i=En(t,n.schema);return _s(n,i,e)?BI(n,r):!1},w8=()=>({state:t,dispatch:e})=>MT(t,e),C8=t=>({state:e,dispatch:n})=>{const r=En(t,e.schema);return JI(r)(e,n)},T8=()=>({state:t,dispatch:e})=>_T(t,e);function _p(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function Tk(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,i)=>(n.includes(i)||(r[i]=t[i]),r),{})}var _8=(t,e)=>({tr:n,state:r,dispatch:i})=>{let s=null,l=null;const c=_p(typeof t=="string"?t:t.name,r.schema);if(!c)return!1;c==="node"&&(s=En(t,r.schema)),c==="mark"&&(l=ko(t,r.schema));let d=!1;return n.selection.ranges.forEach(p=>{r.doc.nodesBetween(p.$from.pos,p.$to.pos,(m,g)=>{s&&s===m.type&&(d=!0,i&&n.setNodeMarkup(g,void 0,Tk(m.attrs,e))),l&&m.marks.length&&m.marks.forEach(v=>{l===v.type&&(d=!0,i&&n.addMark(g,g+m.nodeSize,l.create(Tk(v.attrs,e))))})})}),d},A8=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),M8=()=>({tr:t,dispatch:e})=>{if(e){const n=new Ar(t.doc);t.setSelection(n)}return!0},j8=()=>({state:t,dispatch:e})=>kT(t,e),O8=()=>({state:t,dispatch:e})=>TT(t,e),R8=()=>({state:t,dispatch:e})=>FI(t,e),N8=()=>({state:t,dispatch:e})=>$I(t,e),D8=()=>({state:t,dispatch:e})=>WI(t,e);function Nv(t,e,n={},r={}){return qu(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}var z8=(t,{errorOnInvalidContent:e,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:i,tr:s,dispatch:l,commands:c})=>{const{doc:d}=s;if(r.preserveWhitespace!=="full"){const p=Nv(t,i.schema,r,{errorOnInvalidContent:e??i.options.enableContentCheck});return l&&s.replaceWith(0,d.content.size,p).setMeta("preventUpdate",!n),!0}return l&&s.setMeta("preventUpdate",!n),c.insertContentAt({from:0,to:d.content.size},t,{parseOptions:r,errorOnInvalidContent:e??i.options.enableContentCheck})};function x_(t,e){const n=ko(e,t.schema),{from:r,to:i,empty:s}=t.selection,l=[];s?(t.storedMarks&&l.push(...t.storedMarks),l.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,i,d=>{l.push(...d.marks)});const c=l.find(d=>d.type.name===n.name);return c?{...c.attrs}:{}}function S_(t,e){const n=new vT(t);return e.forEach(r=>{r.steps.forEach(i=>{n.step(i)})}),n}function L8(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function I8(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(i,s)=>{n(i)&&r.push({node:i,pos:s})}),r}function P8(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function Ap(t){return e=>P8(e.$from,t)}function Be(t,e,n){return t.config[e]===void 0&&t.parent?Be(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?Be(t.parent,e,n):null}):t.config[e]}function Fy(t){return t.map(e=>{const n={name:e.name,options:e.options,storage:e.storage},r=Be(e,"addExtensions",n);return r?[e,...Fy(r())]:e}).flat(10)}function Vy(t,e){const n=_a.fromSchema(e).serializeFragment(t),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function E_(t){return typeof t=="function"}function Ot(t,e=void 0,...n){return E_(t)?e?t.bind(e)(...n):t(...n):t}function B8(t={}){return Object.keys(t).length===0&&t.constructor===Object}function $l(t){const e=t.filter(i=>i.type==="extension"),n=t.filter(i=>i.type==="node"),r=t.filter(i=>i.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function k_(t){const e=[],{nodeExtensions:n,markExtensions:r}=$l(t),i=[...n,...r],s={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(l=>{const c={name:l.name,options:l.options,storage:l.storage,extensions:i},d=Be(l,"addGlobalAttributes",c);if(!d)return;d().forEach(m=>{m.types.forEach(g=>{Object.entries(m.attributes).forEach(([v,b])=>{e.push({type:g,name:v,attribute:{...s,...b}})})})})}),i.forEach(l=>{const c={name:l.name,options:l.options,storage:l.storage},d=Be(l,"addAttributes",c);if(!d)return;const p=d();Object.entries(p).forEach(([m,g])=>{const v={...s,...g};typeof v?.default=="function"&&(v.default=v.default()),v?.isRequired&&v?.default===void 0&&delete v.default,e.push({type:l.name,name:m,attribute:v})})}),e}function kn(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const c=s?String(s).split(" "):[],d=r[i]?r[i].split(" "):[],p=c.filter(m=>!d.includes(m));r[i]=[...d,...p].join(" ")}else if(i==="style"){const c=s?s.split(";").map(m=>m.trim()).filter(Boolean):[],d=r[i]?r[i].split(";").map(m=>m.trim()).filter(Boolean):[],p=new Map;d.forEach(m=>{const[g,v]=m.split(":").map(b=>b.trim());p.set(g,v)}),c.forEach(m=>{const[g,v]=m.split(":").map(b=>b.trim());p.set(g,v)}),r[i]=Array.from(p.entries()).map(([m,g])=>`${m}: ${g}`).join("; ")}else r[i]=s}),r},{})}function Fu(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>kn(n,r),{})}function U8(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function _k(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const i=e.reduce((s,l)=>{const c=l.attribute.parseHTML?l.attribute.parseHTML(n):U8(n.getAttribute(l.name));return c==null?s:{...s,[l.name]:c}},{});return{...r,...i}}}}function Ak(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&B8(n)?!1:n!=null))}function Mk(t){var e,n;const r={};return!((e=t?.attribute)!=null&&e.isRequired)&&"default"in(t?.attribute||{})&&(r.default=t.attribute.default),((n=t?.attribute)==null?void 0:n.validate)!==void 0&&(r.validate=t.attribute.validate),[t.name,r]}function H8(t,e){var n;const r=k_(t),{nodeExtensions:i,markExtensions:s}=$l(t),l=(n=i.find(p=>Be(p,"topNode")))==null?void 0:n.name,c=Object.fromEntries(i.map(p=>{const m=r.filter(w=>w.type===p.name),g={name:p.name,options:p.options,storage:p.storage,editor:e},v=t.reduce((w,T)=>{const _=Be(T,"extendNodeSchema",g);return{...w,..._?_(p):{}}},{}),b=Ak({...v,content:Ot(Be(p,"content",g)),marks:Ot(Be(p,"marks",g)),group:Ot(Be(p,"group",g)),inline:Ot(Be(p,"inline",g)),atom:Ot(Be(p,"atom",g)),selectable:Ot(Be(p,"selectable",g)),draggable:Ot(Be(p,"draggable",g)),code:Ot(Be(p,"code",g)),whitespace:Ot(Be(p,"whitespace",g)),linebreakReplacement:Ot(Be(p,"linebreakReplacement",g)),defining:Ot(Be(p,"defining",g)),isolating:Ot(Be(p,"isolating",g)),attrs:Object.fromEntries(m.map(Mk))}),S=Ot(Be(p,"parseHTML",g));S&&(b.parseDOM=S.map(w=>_k(w,m)));const k=Be(p,"renderHTML",g);k&&(b.toDOM=w=>k({node:w,HTMLAttributes:Fu(w,m)}));const E=Be(p,"renderText",g);return E&&(b.toText=E),[p.name,b]})),d=Object.fromEntries(s.map(p=>{const m=r.filter(E=>E.type===p.name),g={name:p.name,options:p.options,storage:p.storage,editor:e},v=t.reduce((E,w)=>{const T=Be(w,"extendMarkSchema",g);return{...E,...T?T(p):{}}},{}),b=Ak({...v,inclusive:Ot(Be(p,"inclusive",g)),excludes:Ot(Be(p,"excludes",g)),group:Ot(Be(p,"group",g)),spanning:Ot(Be(p,"spanning",g)),code:Ot(Be(p,"code",g)),attrs:Object.fromEntries(m.map(Mk))}),S=Ot(Be(p,"parseHTML",g));S&&(b.parseDOM=S.map(E=>_k(E,m)));const k=Be(p,"renderHTML",g);return k&&(b.toDOM=E=>k({mark:E,HTMLAttributes:Fu(E,m)})),[p.name,b]}));return new tT({topNode:l,nodes:c,marks:d})}function q8(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}function Mh(t){return t.sort((n,r)=>{const i=Be(n,"priority")||100,s=Be(r,"priority")||100;return i>s?-1:i<s?1:0})}function w_(t){const e=Mh(Fy(t)),n=q8(e.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),e}function C_(t,e,n){const{from:r,to:i}=e,{blockSeparator:s=`

`,textSerializers:l={}}=n||{};let c="";return t.nodesBetween(r,i,(d,p,m,g)=>{var v;d.isBlock&&p>r&&(c+=s);const b=l?.[d.type.name];if(b)return m&&(c+=b({node:d,pos:p,parent:m,index:g,range:e})),!1;d.isText&&(c+=(v=d?.text)==null?void 0:v.slice(Math.max(r,p)-p,i-p))}),c}function F8(t,e){const n={from:0,to:t.content.size};return C_(t,n,e)}function T_(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}function V8(t,e){const n=En(e,t.schema),{from:r,to:i}=t.selection,s=[];t.doc.nodesBetween(r,i,c=>{s.push(c)});const l=s.reverse().find(c=>c.type.name===n.name);return l?{...l.attrs}:{}}function __(t,e){const n=_p(typeof e=="string"?e:e.name,t.schema);return n==="node"?V8(t,e):n==="mark"?x_(t,e):{}}function W8(t,e=JSON.stringify){const n={};return t.filter(r=>{const i=e(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:n[i]=!0})}function $8(t){const e=W8(t);return e.length===1?e:e.filter((n,r)=>!e.filter((s,l)=>l!==r).some(s=>n.oldRange.from>=s.oldRange.from&&n.oldRange.to<=s.oldRange.to&&n.newRange.from>=s.newRange.from&&n.newRange.to<=s.newRange.to))}function A_(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((i,s)=>{const l=[];if(i.ranges.length)i.forEach((c,d)=>{l.push({from:c,to:d})});else{const{from:c,to:d}=n[s];if(c===void 0||d===void 0)return;l.push({from:c,to:d})}l.forEach(({from:c,to:d})=>{const p=e.slice(s).map(c,-1),m=e.slice(s).map(d),g=e.invert().map(p,-1),v=e.invert().map(m);r.push({oldRange:{from:g,to:v},newRange:{from:p,to:m}})})}),$8(r)}function Wy(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(i=>{const s=n.resolve(t),l=qy(s,i.type);l&&r.push({mark:i,...l})}):n.nodesBetween(t,e,(i,s)=>{!i||i?.nodeSize===void 0||r.push(...i.marks.map(l=>({from:s,to:s+i.nodeSize,mark:l})))}),r}var G8=(t,e,n,r=20)=>{const i=t.doc.resolve(n);let s=r,l=null;for(;s>0&&l===null;){const c=i.node(s);c?.type.name===e?l=c:s-=1}return[l,s]};function Nf(t,e){return e.nodes[t]||e.marks[t]||null}function Zf(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=t.find(s=>s.type===e&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}var K8=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(i,s,l,c)=>{var d,p;const m=((p=(d=i.type.spec).toText)==null?void 0:p.call(d,{node:i,pos:s,parent:l,index:c}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?m:m.slice(0,Math.max(0,r-s))}),n};function Dv(t,e,n={}){const{empty:r,ranges:i}=t.selection,s=e?ko(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(g=>s?s.name===g.type.name:!0).find(g=>_h(g.attrs,n,{strict:!1}));let l=0;const c=[];if(i.forEach(({$from:g,$to:v})=>{const b=g.pos,S=v.pos;t.doc.nodesBetween(b,S,(k,E)=>{if(!k.isText&&!k.marks.length)return;const w=Math.max(b,E),T=Math.min(S,E+k.nodeSize),_=T-w;l+=_,c.push(...k.marks.map(R=>({mark:R,from:w,to:T})))})}),l===0)return!1;const d=c.filter(g=>s?s.name===g.mark.type.name:!0).filter(g=>_h(g.mark.attrs,n,{strict:!1})).reduce((g,v)=>g+v.to-v.from,0),p=c.filter(g=>s?g.mark.type!==s&&g.mark.type.excludes(s):!0).reduce((g,v)=>g+v.to-v.from,0);return(d>0?d+p:d)>=l}function Y8(t,e,n={}){if(!e)return _s(t,null,n)||Dv(t,null,n);const r=_p(e,t.schema);return r==="node"?_s(t,e,n):r==="mark"?Dv(t,e,n):!1}var X8=(t,e)=>{const{$from:n,$to:r,$anchor:i}=t.selection;if(e){const s=Ap(c=>c.type.name===e)(t.selection);if(!s)return!1;const l=t.doc.resolve(s.pos+1);return i.pos+1===l.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},J8=t=>{const{$from:e,$to:n}=t.selection;return!(e.parentOffset>0||e.pos!==n.pos)};function jk(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function Ok(t,e){const{nodeExtensions:n}=$l(e),r=n.find(l=>l.name===t);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=Ot(Be(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function Mp(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!=null?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let i=!0;return t.content.forEach(s=>{i!==!1&&(Mp(s,{ignoreWhitespace:n,checkChildren:e})||(i=!1))}),i}return!1}function M_(t){return t instanceof Fe}var j_=class O_{constructor(e){this.position=e}static fromJSON(e){return new O_(e.position)}toJSON(){return{position:this.position}}};function Q8(t,e){const n=e.mapping.mapResult(t.position);return{position:new j_(n.pos),mapResult:n}}function Z8(t){return new j_(t)}function eB(t,e,n){var r;const{selection:i}=e;let s=null;if(g_(i)&&(s=i.$cursor),s){const c=(r=t.storedMarks)!=null?r:s.marks();return s.parent.type.allowsMarkType(n)&&(!!n.isInSet(c)||!c.some(p=>p.type.excludes(n)))}const{ranges:l}=i;return l.some(({$from:c,$to:d})=>{let p=c.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(c.pos,d.pos,(m,g,v)=>{if(p)return!1;if(m.isInline){const b=!v||v.type.allowsMarkType(n),S=!!n.isInSet(m.marks)||!m.marks.some(k=>k.type.excludes(n));p=b&&S}return!p}),p})}var tB=(t,e={})=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=n,{empty:l,ranges:c}=s,d=ko(t,r.schema);if(i)if(l){const p=x_(r,d);n.addStoredMark(d.create({...p,...e}))}else c.forEach(p=>{const m=p.$from.pos,g=p.$to.pos;r.doc.nodesBetween(m,g,(v,b)=>{const S=Math.max(b,m),k=Math.min(b+v.nodeSize,g);v.marks.find(w=>w.type===d)?v.marks.forEach(w=>{d===w.type&&n.addMark(S,k,d.create({...w.attrs,...e}))}):n.addMark(S,k,d.create(e))})});return eB(r,n,d)},nB=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),rB=(t,e={})=>({state:n,dispatch:r,chain:i})=>{const s=En(t,n.schema);let l;return n.selection.$anchor.sameParent(n.selection.$head)&&(l=n.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:c})=>VE(s,{...l,...e})(n)?!0:c.clearNodes()).command(({state:c})=>VE(s,{...l,...e})(c,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},iB=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,i=da(t,0,r.content.size),s=Fe.create(r,i);e.setSelection(s)}return!0},oB=(t,e)=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=r;let l,c;return typeof e=="number"?(l=e,c=e):e&&"from"in e&&"to"in e?(l=e.from,c=e.to):(l=s.from,c=s.to),i&&n.doc.nodesBetween(l,c,(d,p)=>{d.isText||n.setNodeMarkup(p,void 0,{...d.attrs,dir:t})}),!0},sB=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:i,to:s}=typeof t=="number"?{from:t,to:t}:t,l=Ye.atStart(r).from,c=Ye.atEnd(r).to,d=da(i,l,c),p=da(s,l,c),m=Ye.create(r,d,p);e.setSelection(m)}return!0},aB=t=>({state:e,dispatch:n})=>{const r=En(t,e.schema);return e6(r)(e,n)};function Rk(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(i=>e?.includes(i.type.name));t.tr.ensureMarks(r)}}var lB=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:i})=>{const{selection:s,doc:l}=e,{$from:c,$to:d}=s,p=i.extensionManager.attributes,m=Zf(p,c.node().type.name,c.node().attrs);if(s instanceof Fe&&s.node.isBlock)return!c.parentOffset||!bo(l,c.pos)?!1:(r&&(t&&Rk(n,i.extensionManager.splittableMarks),e.split(c.pos).scrollIntoView()),!0);if(!c.parent.isBlock)return!1;const g=d.parentOffset===d.parent.content.size,v=c.depth===0?void 0:L8(c.node(-1).contentMatchAt(c.indexAfter(-1)));let b=g&&v?[{type:v,attrs:m}]:void 0,S=bo(e.doc,e.mapping.map(c.pos),1,b);if(!b&&!S&&bo(e.doc,e.mapping.map(c.pos),1,v?[{type:v}]:void 0)&&(S=!0,b=v?[{type:v,attrs:m}]:void 0),r){if(S&&(s instanceof Ye&&e.deleteSelection(),e.split(e.mapping.map(c.pos),1,b),v&&!g&&!c.parentOffset&&c.parent.type!==v)){const k=e.mapping.map(c.before()),E=e.doc.resolve(k);c.node(-1).canReplaceWith(E.index(),E.index()+1,v)&&e.setNodeMarkup(e.mapping.map(c.before()),v)}t&&Rk(n,i.extensionManager.splittableMarks),e.scrollIntoView()}return S},cB=(t,e={})=>({tr:n,state:r,dispatch:i,editor:s})=>{var l;const c=En(t,r.schema),{$from:d,$to:p}=r.selection,m=r.selection.node;if(m&&m.isBlock||d.depth<2||!d.sameParent(p))return!1;const g=d.node(-1);if(g.type!==c)return!1;const v=s.extensionManager.attributes;if(d.parent.content.size===0&&d.node(-1).childCount===d.indexAfter(-1)){if(d.depth===2||d.node(-3).type!==c||d.index(-2)!==d.node(-2).childCount-1)return!1;if(i){let w=ce.empty;const T=d.index(-1)?1:d.index(-2)?2:3;for(let H=d.depth-T;H>=d.depth-3;H-=1)w=ce.from(d.node(H).copy(w));const _=d.indexAfter(-1)<d.node(-2).childCount?1:d.indexAfter(-2)<d.node(-3).childCount?2:3,R={...Zf(v,d.node().type.name,d.node().attrs),...e},O=((l=c.contentMatch.defaultType)==null?void 0:l.createAndFill(R))||void 0;w=w.append(ce.from(c.createAndFill(null,O)||void 0));const D=d.before(d.depth-(T-1));n.replace(D,d.after(-_),new Te(w,4-T,0));let I=-1;n.doc.nodesBetween(D,n.doc.content.size,(H,V)=>{if(I>-1)return!1;H.isTextblock&&H.content.size===0&&(I=V+1)}),I>-1&&n.setSelection(Ye.near(n.doc.resolve(I))),n.scrollIntoView()}return!0}const b=p.pos===d.end()?g.contentMatchAt(0).defaultType:null,S={...Zf(v,g.type.name,g.attrs),...e},k={...Zf(v,d.node().type.name,d.node().attrs),...e};n.delete(d.pos,p.pos);const E=b?[{type:c,attrs:S},{type:b,attrs:k}]:[{type:c,attrs:S}];if(!bo(n.doc,d.pos,2))return!1;if(i){const{selection:w,storedMarks:T}=r,{splittableMarks:_}=s.extensionManager,R=T||w.$to.parentOffset&&w.$from.marks();if(n.split(d.pos,2,E).scrollIntoView(),!R||!i)return!0;const O=R.filter(D=>_.includes(D.type.name));n.ensureMarks(O)}return!0},j0=(t,e)=>{const n=Ap(l=>l.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===i?.type&&js(t.doc,n.pos)&&t.join(n.pos),!0},O0=(t,e)=>{const n=Ap(l=>l.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=t.doc.nodeAt(r);return n.node.type===i?.type&&js(t.doc,r)&&t.join(r),!0},uB=(t,e,n,r={})=>({editor:i,tr:s,state:l,dispatch:c,chain:d,commands:p,can:m})=>{const{extensions:g,splittableMarks:v}=i.extensionManager,b=En(t,l.schema),S=En(e,l.schema),{selection:k,storedMarks:E}=l,{$from:w,$to:T}=k,_=w.blockRange(T),R=E||k.$to.parentOffset&&k.$from.marks();if(!_)return!1;const O=Ap(D=>Ok(D.type.name,g))(k);if(_.depth>=1&&O&&_.depth-O.depth<=1){if(O.node.type===b)return p.liftListItem(S);if(Ok(O.node.type.name,g)&&b.validContent(O.node.content)&&c)return d().command(()=>(s.setNodeMarkup(O.pos,b),!0)).command(()=>j0(s,b)).command(()=>O0(s,b)).run()}return!n||!R||!c?d().command(()=>m().wrapInList(b,r)?!0:p.clearNodes()).wrapInList(b,r).command(()=>j0(s,b)).command(()=>O0(s,b)).run():d().command(()=>{const D=m().wrapInList(b,r),I=R.filter(H=>v.includes(H.type.name));return s.ensureMarks(I),D?!0:p.clearNodes()}).wrapInList(b,r).command(()=>j0(s,b)).command(()=>O0(s,b)).run()},dB=(t,e={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=n,l=ko(t,r.schema);return Dv(r,l,e)?i.unsetMark(l,{extendEmptyMarkRange:s}):i.setMark(l,e)},fB=(t,e,n={})=>({state:r,commands:i})=>{const s=En(t,r.schema),l=En(e,r.schema),c=_s(r,s,n);let d;return r.selection.$anchor.sameParent(r.selection.$head)&&(d=r.selection.$anchor.parent.attrs),c?i.setNode(l,d):i.setNode(s,{...d,...n})},hB=(t,e={})=>({state:n,commands:r})=>{const i=En(t,n.schema);return _s(n,i,e)?r.lift(i):r.wrapIn(i,e)},pB=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let s;if(i.spec.isInputRules&&(s=i.getState(t))){if(e){const l=t.tr,c=s.transform;for(let d=c.steps.length-1;d>=0;d-=1)l.step(c.steps[d].invert(c.docs[d]));if(s.text){const d=l.doc.resolve(s.from).marks();l.replaceWith(s.from,s.to,t.schema.text(s.text,d))}else l.delete(s.from,s.to)}return!0}}return!1},mB=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:i}=n;return r||e&&i.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},gB=(t,e={})=>({tr:n,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:l=!1}=e,{selection:c}=n,d=ko(t,r.schema),{$from:p,empty:m,ranges:g}=c;if(!i)return!0;if(m&&l){let{from:v,to:b}=c;const S=(s=p.marks().find(E=>E.type===d))==null?void 0:s.attrs,k=qy(p,d,S);k&&(v=k.from,b=k.to),n.removeMark(v,b,d)}else g.forEach(v=>{n.removeMark(v.$from.pos,v.$to.pos,d)});return n.removeStoredMark(d),!0},vB=t=>({tr:e,state:n,dispatch:r})=>{const{selection:i}=n;let s,l;return typeof t=="number"?(s=t,l=t):t&&"from"in t&&"to"in t?(s=t.from,l=t.to):(s=i.from,l=i.to),r&&e.doc.nodesBetween(s,l,(c,d)=>{if(c.isText)return;const p={...c.attrs};delete p.dir,e.setNodeMarkup(d,void 0,p)}),!0},yB=(t,e={})=>({tr:n,state:r,dispatch:i})=>{let s=null,l=null;const c=_p(typeof t=="string"?t:t.name,r.schema);if(!c)return!1;c==="node"&&(s=En(t,r.schema)),c==="mark"&&(l=ko(t,r.schema));let d=!1;return n.selection.ranges.forEach(p=>{const m=p.$from.pos,g=p.$to.pos;let v,b,S,k;n.selection.empty?r.doc.nodesBetween(m,g,(E,w)=>{s&&s===E.type&&(d=!0,S=Math.max(w,m),k=Math.min(w+E.nodeSize,g),v=w,b=E)}):r.doc.nodesBetween(m,g,(E,w)=>{w<m&&s&&s===E.type&&(d=!0,S=Math.max(w,m),k=Math.min(w+E.nodeSize,g),v=w,b=E),w>=m&&w<=g&&(s&&s===E.type&&(d=!0,i&&n.setNodeMarkup(w,void 0,{...E.attrs,...e})),l&&E.marks.length&&E.marks.forEach(T=>{if(l===T.type&&(d=!0,i)){const _=Math.max(w,m),R=Math.min(w+E.nodeSize,g);n.addMark(_,R,l.create({...T.attrs,...e}))}}))}),b&&(v!==void 0&&i&&n.setNodeMarkup(v,void 0,{...b.attrs,...e}),l&&b.marks.length&&b.marks.forEach(E=>{l===E.type&&i&&n.addMark(S,k,l.create({...E.attrs,...e}))}))}),d},bB=(t,e={})=>({state:n,dispatch:r})=>{const i=En(t,n.schema);return GI(i,e)(n,r)},xB=(t,e={})=>({state:n,dispatch:r})=>{const i=En(t,n.schema);return KI(i,e)(n,r)},SB=class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const n=this.callbacks[t];return n&&n.forEach(r=>r.apply(this,e)),this}off(t,e){const n=this.callbacks[t];return n&&(e?this.callbacks[t]=n.filter(r=>r!==e):delete this.callbacks[t]),this}once(t,e){const n=(...r)=>{this.off(t,n),e.apply(this,r)};return this.on(t,n)}removeAllListeners(){this.callbacks={}}},jp=class{constructor(t){var e;this.find=t.find,this.handler=t.handler,this.undoable=(e=t.undoable)!=null?e:!0}},EB=(t,e)=>{if(Hy(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function Df(t){var e;const{editor:n,from:r,to:i,text:s,rules:l,plugin:c}=t,{view:d}=n;if(d.composing)return!1;const p=d.state.doc.resolve(r);if(p.parent.type.spec.code||(e=p.nodeBefore||p.nodeAfter)!=null&&e.marks.find(v=>v.type.spec.code))return!1;let m=!1;const g=K8(p)+s;return l.forEach(v=>{if(m)return;const b=EB(g,v.find);if(!b)return;const S=d.state.tr,k=Cp({state:d.state,transaction:S}),E={from:r-(b[0].length-s.length),to:i},{commands:w,chain:T,can:_}=new Tp({editor:n,state:k});v.handler({state:k,range:E,match:b,commands:w,chain:T,can:_})===null||!S.steps.length||(v.undoable&&S.setMeta(c,{transform:S,from:r,to:i,text:s}),d.dispatch(S),m=!0)}),m}function kB(t){const{editor:e,rules:n}=t,r=new nn({state:{init(){return null},apply(i,s,l){const c=i.getMeta(r);if(c)return c;const d=i.getMeta("applyInputRules");return!!d&&setTimeout(()=>{let{text:m}=d;typeof m=="string"?m=m:m=Vy(ce.from(m),l.schema);const{from:g}=d,v=g+m.length;Df({editor:e,from:g,to:v,text:m,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,l,c){return Df({editor:e,from:s,to:l,text:c,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&Df({editor:e,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:l}=i.state.selection;return l?Df({editor:e,from:l.pos,to:l.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function wB(t){return Object.prototype.toString.call(t).slice(8,-1)}function zf(t){return wB(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function R_(t,e){const n={...t};return zf(t)&&zf(e)&&Object.keys(e).forEach(r=>{zf(e[r])&&zf(t[r])?n[r]=R_(t[r],e[r]):n[r]=e[r]}),n}var $y=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...Ot(Be(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...Ot(Be(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>R_(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},Aa=class N_ extends $y{constructor(){super(...arguments),this.type="mark"}static create(e={}){const n=typeof e=="function"?e():e;return new N_(n)}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,i=e.state.selection.$from;if(i.pos===i.end()){const l=i.marks();if(!!!l.find(p=>p?.type.name===n.name))return!1;const d=l.find(p=>p?.type.name===n.name);return d&&r.removeStoredMark(d),r.insertText(" ",i.pos),e.view.dispatch(r),!0}return!1}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function CB(t){return typeof t=="number"}var TB=class{constructor(t){this.find=t.find,this.handler=t.handler}},_B=(t,e,n)=>{if(Hy(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=t,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function AB(t){const{editor:e,state:n,from:r,to:i,rule:s,pasteEvent:l,dropEvent:c}=t,{commands:d,chain:p,can:m}=new Tp({editor:e,state:n}),g=[];return n.doc.nodesBetween(r,i,(b,S)=>{var k,E,w,T,_;if((E=(k=b.type)==null?void 0:k.spec)!=null&&E.code||!(b.isText||b.isTextblock||b.isInline))return;const R=(_=(T=(w=b.content)==null?void 0:w.size)!=null?T:b.nodeSize)!=null?_:0,O=Math.max(r,S),D=Math.min(i,S+R);if(O>=D)return;const I=b.isText?b.text||"":b.textBetween(O-S,D-S,void 0,"");_B(I,s.find,l).forEach(V=>{if(V.index===void 0)return;const K=O+V.index+1,Q=K+V[0].length,re={from:n.tr.mapping.map(K),to:n.tr.mapping.map(Q)},Re=s.handler({state:n,range:re,match:V,commands:d,chain:p,can:m,pasteEvent:l,dropEvent:c});g.push(Re)})}),g.every(b=>b!==null)}var Lf=null,MB=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)==null||e.setData("text/html",t),n};function jB(t){const{editor:e,rules:n}=t;let r=null,i=!1,s=!1,l=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,c;try{c=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{c=null}const d=({state:m,from:g,to:v,rule:b,pasteEvt:S})=>{const k=m.tr,E=Cp({state:m,transaction:k});if(!(!AB({editor:e,state:E,from:Math.max(g-1,0),to:v.b-1,rule:b,pasteEvent:S,dropEvent:c})||!k.steps.length)){try{c=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{c=null}return l=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,k}};return n.map(m=>new nn({view(g){const v=S=>{var k;r=(k=g.dom.parentElement)!=null&&k.contains(S.target)?g.dom.parentElement:null,r&&(Lf=e)},b=()=>{Lf&&(Lf=null)};return window.addEventListener("dragstart",v),window.addEventListener("dragend",b),{destroy(){window.removeEventListener("dragstart",v),window.removeEventListener("dragend",b)}}},props:{handleDOMEvents:{drop:(g,v)=>{if(s=r===g.dom.parentElement,c=v,!s){const b=Lf;b?.isEditable&&setTimeout(()=>{const S=b.state.selection;S&&b.commands.deleteRange({from:S.from,to:S.to})},10)}return!1},paste:(g,v)=>{var b;const S=(b=v.clipboardData)==null?void 0:b.getData("text/html");return l=v,i=!!S?.includes("data-pm-slice"),!1}}},appendTransaction:(g,v,b)=>{const S=g[0],k=S.getMeta("uiEvent")==="paste"&&!i,E=S.getMeta("uiEvent")==="drop"&&!s,w=S.getMeta("applyPasteRules"),T=!!w;if(!k&&!E&&!T)return;if(T){let{text:O}=w;typeof O=="string"?O=O:O=Vy(ce.from(O),b.schema);const{from:D}=w,I=D+O.length,H=MB(O);return d({rule:m,state:b,from:D,to:{b:I},pasteEvt:H})}const _=v.doc.content.findDiffStart(b.doc.content),R=v.doc.content.findDiffEnd(b.doc.content);if(!(!CB(_)||!R||_===R.b))return d({rule:m,state:b,from:_,to:R,pasteEvt:l})}}))}var Op=class{constructor(t,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=t,this.extensions=w_(t),this.schema=H8(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((t,e)=>{const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:Nf(e.name,this.schema)},r=Be(e,"addCommands",n);return r?{...t,...r()}:t},{})}get plugins(){const{editor:t}=this;return Mh([...this.extensions].reverse()).flatMap(r=>{const i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:Nf(r.name,this.schema)},s=[],l=Be(r,"addKeyboardShortcuts",i);let c={};if(r.type==="mark"&&Be(r,"exitable",i)&&(c.ArrowRight=()=>Aa.handleExit({editor:t,mark:r})),l){const v=Object.fromEntries(Object.entries(l()).map(([b,S])=>[b,()=>S({editor:t})]));c={...c,...v}}const d=VP(c);s.push(d);const p=Be(r,"addInputRules",i);if(jk(r,t.options.enableInputRules)&&p){const v=p();if(v&&v.length){const b=kB({editor:t,rules:v}),S=Array.isArray(b)?b:[b];s.push(...S)}}const m=Be(r,"addPasteRules",i);if(jk(r,t.options.enablePasteRules)&&m){const v=m();if(v&&v.length){const b=jB({editor:t,rules:v});s.push(...b)}}const g=Be(r,"addProseMirrorPlugins",i);if(g){const v=g();s.push(...v)}return s})}get attributes(){return k_(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=$l(this.extensions);return Object.fromEntries(e.filter(n=>!!Be(n,"addNodeView")).map(n=>{const r=this.attributes.filter(d=>d.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:En(n.name,this.schema)},s=Be(n,"addNodeView",i);if(!s)return[];const l=s();if(!l)return[];const c=(d,p,m,g,v)=>{const b=Fu(d,r);return l({node:d,view:p,getPos:m,decorations:g,innerDecorations:v,editor:t,extension:n,HTMLAttributes:b})};return[n.name,c]}))}dispatchTransaction(t){const{editor:e}=this;return Mh([...this.extensions].reverse()).reduceRight((r,i)=>{const s={name:i.name,options:i.options,storage:this.editor.extensionStorage[i.name],editor:e,type:Nf(i.name,this.schema)},l=Be(i,"dispatchTransaction",s);return l?c=>{l.call(s,{transaction:c,next:r})}:r},t)}get markViews(){const{editor:t}=this,{markExtensions:e}=$l(this.extensions);return Object.fromEntries(e.filter(n=>!!Be(n,"addMarkView")).map(n=>{const r=this.attributes.filter(c=>c.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:ko(n.name,this.schema)},s=Be(n,"addMarkView",i);if(!s)return[];const l=(c,d,p)=>{const m=Fu(c,r);return s()({mark:c,view:d,inline:p,editor:t,extension:n,HTMLAttributes:m,updateAttributes:g=>{VB(c,t,g)}})};return[n.name,l]}))}setupExtensions(){const t=this.extensions;this.editor.extensionStorage=Object.fromEntries(t.map(e=>[e.name,e.storage])),t.forEach(e=>{var n;const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:Nf(e.name,this.schema)};e.type==="mark"&&((n=Ot(Be(e,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(e.name);const i=Be(e,"onBeforeCreate",r),s=Be(e,"onCreate",r),l=Be(e,"onUpdate",r),c=Be(e,"onSelectionUpdate",r),d=Be(e,"onTransaction",r),p=Be(e,"onFocus",r),m=Be(e,"onBlur",r),g=Be(e,"onDestroy",r);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),l&&this.editor.on("update",l),c&&this.editor.on("selectionUpdate",c),d&&this.editor.on("transaction",d),p&&this.editor.on("focus",p),m&&this.editor.on("blur",m),g&&this.editor.on("destroy",g)})}};Op.resolve=w_;Op.sort=Mh;Op.flatten=Fy;var OB={};Uy(OB,{ClipboardTextSerializer:()=>z_,Commands:()=>L_,Delete:()=>I_,Drop:()=>P_,Editable:()=>B_,FocusEvents:()=>H_,Keymap:()=>q_,Paste:()=>F_,Tabindex:()=>V_,TextDirection:()=>W_,focusEventsPluginKey:()=>U_});var hn=class D_ extends $y{constructor(){super(...arguments),this.type="extension"}static create(e={}){const n=typeof e=="function"?e():e;return new D_(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}},z_=hn.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new nn({key:new Cn("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:i}=e,{ranges:s}=i,l=Math.min(...s.map(m=>m.$from.pos)),c=Math.max(...s.map(m=>m.$to.pos)),d=T_(n);return C_(r,{from:l,to:c},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:d})}}})]}}),L_=hn.create({name:"commands",addCommands(){return{...p_}}}),I_=hn.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var n,r,i;const s=()=>{var l,c,d,p;if((p=(d=(c=(l=this.editor.options.coreExtensionOptions)==null?void 0:l.delete)==null?void 0:c.filterTransaction)==null?void 0:d.call(c,t))!=null?p:t.getMeta("y-sync$"))return;const m=S_(t.before,[t,...e]);A_(m).forEach(b=>{m.mapping.mapResult(b.oldRange.from).deletedAfter&&m.mapping.mapResult(b.oldRange.to).deletedBefore&&m.before.nodesBetween(b.oldRange.from,b.oldRange.to,(S,k)=>{const E=k+S.nodeSize-2,w=b.oldRange.from<=k&&E<=b.oldRange.to;this.editor.emit("delete",{type:"node",node:S,from:k,to:E,newFrom:m.mapping.map(k),newTo:m.mapping.map(E),deletedRange:b.oldRange,newRange:b.newRange,partial:!w,editor:this.editor,transaction:t,combinedTransform:m})})});const v=m.mapping;m.steps.forEach((b,S)=>{var k,E;if(b instanceof ui){const w=v.slice(S).map(b.from,-1),T=v.slice(S).map(b.to),_=v.invert().map(w,-1),R=v.invert().map(T),O=(k=m.doc.nodeAt(w-1))==null?void 0:k.marks.some(I=>I.eq(b.mark)),D=(E=m.doc.nodeAt(T))==null?void 0:E.marks.some(I=>I.eq(b.mark));this.editor.emit("delete",{type:"mark",mark:b.mark,from:b.from,to:b.to,deletedRange:{from:_,to:R},newRange:{from:w,to:T},partial:!!(D||O),editor:this.editor,transaction:t,combinedTransform:m})}})};(i=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||i?setTimeout(s,0):s()}}),P_=hn.create({name:"drop",addProseMirrorPlugins(){return[new nn({key:new Cn("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),B_=hn.create({name:"editable",addProseMirrorPlugins(){return[new nn({key:new Cn("editable"),props:{editable:()=>this.editor.options.editable}})]}}),U_=new Cn("focusEvents"),H_=hn.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new nn({key:U_,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),q_=hn.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:l})=>[()=>l.undoInputRule(),()=>l.command(({tr:c})=>{const{selection:d,doc:p}=c,{empty:m,$anchor:g}=d,{pos:v,parent:b}=g,S=g.parent.isTextblock&&v>0?c.doc.resolve(v-1):g,k=S.parent.type.spec.isolating,E=g.pos-g.parentOffset,w=k&&S.parent.childCount===1?E===g.pos:at.atStart(p).from===v;return!m||!b.type.isTextblock||b.textContent.length||!w||w&&g.parent.type.name==="paragraph"?!1:l.clearNodes()}),()=>l.deleteSelection(),()=>l.joinBackward(),()=>l.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:l})=>[()=>l.deleteSelection(),()=>l.deleteCurrentNode(),()=>l.joinForward(),()=>l.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:l})=>[()=>l.newlineInCode(),()=>l.createParagraphNear(),()=>l.liftEmptyBlock(),()=>l.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Ah()||b_()?s:i},addProseMirrorPlugins(){return[new nn({key:new Cn("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(k=>k.getMeta("composition")))return;const r=t.some(k=>k.docChanged)&&!e.doc.eq(n.doc),i=t.some(k=>k.getMeta("preventClearDocument"));if(!r||i)return;const{empty:s,from:l,to:c}=e.selection,d=at.atStart(e.doc).from,p=at.atEnd(e.doc).to;if(s||!(l===d&&c===p)||!Mp(n.doc))return;const v=n.tr,b=Cp({state:n,transaction:v}),{commands:S}=new Tp({editor:this.editor,state:b});if(S.clearNodes(),!!v.steps.length)return v}})]}}),F_=hn.create({name:"paste",addProseMirrorPlugins(){return[new nn({key:new Cn("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),V_=hn.create({name:"tabindex",addProseMirrorPlugins(){return[new nn({key:new Cn("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),W_=hn.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:t}=$l(this.extensions);return[{types:t.filter(e=>e.name!=="text").map(e=>e.name),attributes:{dir:{default:this.options.direction,parseHTML:e=>{const n=e.getAttribute("dir");return n&&(n==="ltr"||n==="rtl"||n==="auto")?n:this.options.direction},renderHTML:e=>e.dir?{dir:e.dir}:{}}}}]},addProseMirrorPlugins(){return[new nn({key:new Cn("textDirection"),props:{attributes:()=>{const t=this.options.direction;return t?{dir:t}:{}}}})]}}),RB=class Ml{constructor(e,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new Ml(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Ml(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Ml(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,s=n.isAtom&&!n.isText,l=this.pos+r+(s?0:1);if(l<0||l>this.resolvedPos.doc.nodeSize-2)return;const c=this.resolvedPos.doc.resolve(l);if(!i&&c.depth<=this.depth)return;const d=new Ml(c,this.editor,i,i?n:null);i&&(d.actualDepth=this.depth+1),e.push(new Ml(c,this.editor,i,i?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===e)if(Object.keys(n).length>0){const s=i.node.attrs,l=Object.keys(n);for(let c=0;c<l.length;c+=1){const d=l[c];if(s[d]!==n[d])break}}else r=i;i=i.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(n);return this.children.forEach(l=>{r&&i.length>0||(l.node.type.name===e&&s.every(d=>n[d]===l.node.attrs[d])&&i.push(l),!(r&&i.length>0)&&(i=i.concat(l.querySelectorAll(e,n,r))))}),i}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}},NB=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function DB(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return e&&i.setAttribute("nonce",e),i.setAttribute("data-tiptap-style",""),i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}var zB=class extends SB{constructor(t={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null,enableExtensionDispatchTransaction:!0},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:Q8,createMappablePosition:Z8},this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:i,moved:s})=>this.options.onDrop(r,i,s)),this.on("paste",({event:r,slice:i})=>this.options.onPaste(r,i)),this.on("delete",this.options.onDelete);const e=this.createDoc(),n=v_(e,this.options.autofocus);this.editorState=Rl.create({doc:e,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(t){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(t),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const t=this.editorView.dom;t?.editor&&delete t.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(t){console.warn("Failed to remove CSS element:",t)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=DB(NB,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:t=>{this.editorState=t},dispatch:t=>{this.dispatchTransaction(t)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(t,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in t)return Reflect.get(t,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(t,e){const n=E_(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(t){if(this.isDestroyed)return;const e=this.state.plugins;let n=e;if([].concat(t).forEach(i=>{const s=typeof i=="string"?`${i}$`:i.key;n=n.filter(l=>!l.key.startsWith(s))}),e.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var t,e;const r=[...this.options.enableCoreExtensions?[B_,z_.configure({blockSeparator:(e=(t=this.options.coreExtensionOptions)==null?void 0:t.clipboardTextSerializer)==null?void 0:e.blockSeparator}),L_,H_,q_,V_,P_,F_,I_,W_.configure({direction:this.options.textDirection})].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i?.type));this.extensionManager=new Op(r,this)}createCommandManager(){this.commandManager=new Tp({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let t;try{t=Nv(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),t=Nv(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return t}createView(t){const{editorProps:e,enableExtensionDispatchTransaction:n}=this.options,r=e.dispatchTransaction||this.dispatchTransaction.bind(this),i=n?this.extensionManager.dispatchTransaction(r):r;this.editorView=new f_(t,{...e,attributes:{role:"textbox",...e?.attributes},dispatchTransaction:i,state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const s=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(s),this.prependClass(),this.injectCSS();const l=this.view.dom;l.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(p=>{var m;return(m=this.capturedTransaction)==null?void 0:m.step(p)});return}const{state:e,transactions:n}=this.state.applyTransaction(t),r=!this.state.selection.eq(e.selection),i=n.includes(t),s=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:t,nextState:e}),!i)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:t});const l=n.findLast(p=>p.getMeta("focus")||p.getMeta("blur")),c=l?.getMeta("focus"),d=l?.getMeta("blur");c&&this.emit("focus",{editor:this,event:c.event,transaction:l}),d&&this.emit("blur",{editor:this,event:d.event,transaction:l}),!(t.getMeta("preventUpdate")||!n.some(p=>p.docChanged)||s.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:t,appendedTransactions:n.slice(1)})}getAttributes(t){return __(this.state,t)}isActive(t,e){const n=typeof t=="string"?t:null,r=typeof t=="string"?e:t;return Y8(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Vy(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:n={}}=t||{};return F8(this.state.doc,{blockSeparator:e,textSerializers:{...T_(this.schema),...n}})}get isEmpty(){return Mp(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var t,e;return(e=(t=this.editorView)==null?void 0:t.isDestroyed)!=null?e:!0}$node(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelector(t,e))||null}$nodes(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(t,e))||null}$pos(t){const e=this.state.doc.resolve(t);return new RB(e,this)}get $doc(){return this.$pos(0)}};function Gl(t){return new jp({find:t.find,handler:({state:e,range:n,match:r})=>{const i=Ot(t.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=e,l=r[r.length-1],c=r[0];if(l){const d=c.search(/\S/),p=n.from+c.indexOf(l),m=p+l.length;if(Wy(n.from,n.to,e.doc).filter(b=>b.mark.type.excluded.find(k=>k===t.type&&k!==b.mark.type)).filter(b=>b.to>p).length)return null;m<n.to&&s.delete(m,n.to),p>n.from&&s.delete(n.from+d,p);const v=n.from+d+l.length;s.addMark(n.from+d,v,t.type.create(i||{})),s.removeStoredMark(t.type)}},undoable:t.undoable})}function LB(t){return new jp({find:t.find,handler:({state:e,range:n,match:r})=>{const i=Ot(t.getAttributes,void 0,r)||{},{tr:s}=e,l=n.from;let c=n.to;const d=t.type.create(i);if(r[1]){const p=r[0].lastIndexOf(r[1]);let m=l+p;m>c?m=c:c=m+r[1].length;const g=r[0][r[0].length-1];s.insertText(g,l+r[0].length-1),s.replaceWith(m,c,d)}else if(r[0]){const p=t.type.isInline?l:l-1;s.insert(p,t.type.create(i)).delete(s.mapping.map(l),s.mapping.map(c))}s.scrollIntoView()},undoable:t.undoable})}function zv(t){return new jp({find:t.find,handler:({state:e,range:n,match:r})=>{const i=e.doc.resolve(n.from),s=Ot(t.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,s)},undoable:t.undoable})}function Kl(t){return new jp({find:t.find,handler:({state:e,range:n,match:r,chain:i})=>{const s=Ot(t.getAttributes,void 0,r)||{},l=e.tr.delete(n.from,n.to),d=l.doc.resolve(n.from).blockRange(),p=d&&wy(d,t.type,s);if(!p)return null;if(l.wrap(d,p),t.keepMarks&&t.editor){const{selection:g,storedMarks:v}=e,{splittableMarks:b}=t.editor.extensionManager,S=v||g.$to.parentOffset&&g.$from.marks();if(S){const k=S.filter(E=>b.includes(E.type.name));l.ensureMarks(k)}}if(t.keepAttributes){const g=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(g,s).run()}const m=l.doc.resolve(n.from-1).nodeBefore;m&&m.type===t.type&&js(l.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,m))&&l.join(n.from-1)},undoable:t.undoable})}function IB(t,e){const{selection:n}=t,{$from:r}=n;if(n instanceof Fe){const s=r.index();return r.parent.canReplaceWith(s,s+1,e)}let i=r.depth;for(;i>=0;){const s=r.index(i);if(r.node(i).contentMatchAt(s).matchType(e))return!0;i-=1}return!1}var PB={};Uy(PB,{createAtomBlockMarkdownSpec:()=>BB,createBlockMarkdownSpec:()=>UB,createInlineMarkdownSpec:()=>FB,parseAttributes:()=>Gy,parseIndentedBlocks:()=>Lv,renderNestedMarkdownContent:()=>Yy,serializeAttributes:()=>Ky});function Gy(t){if(!t?.trim())return{};const e={},n=[],r=t.replace(/["']([^"']*)["']/g,p=>(n.push(p),`__QUOTED_${n.length-1}__`)),i=r.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(i){const p=i.map(m=>m.trim().slice(1));e.class=p.join(" ")}const s=r.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);s&&(e.id=s[1]);const l=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(r.matchAll(l)).forEach(([,p,m])=>{var g;const v=parseInt(((g=m.match(/__QUOTED_(\d+)__/))==null?void 0:g[1])||"0",10),b=n[v];b&&(e[p]=b.slice(1,-1))});const d=r.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return d&&d.split(/\s+/).filter(Boolean).forEach(m=>{m.match(/^[a-zA-Z][\w-]*$/)&&(e[m]=!0)}),e}function Ky(t){if(!t||Object.keys(t).length===0)return"";const e=[];return t.class&&String(t.class).split(/\s+/).filter(Boolean).forEach(r=>e.push(`.${r}`)),t.id&&e.push(`#${t.id}`),Object.entries(t).forEach(([n,r])=>{n==="class"||n==="id"||(r===!0?e.push(n):r!==!1&&r!=null&&e.push(`${n}="${String(r)}"`))}),e.join(" ")}function BB(t){const{nodeName:e,name:n,parseAttributes:r=Gy,serializeAttributes:i=Ky,defaultAttributes:s={},requiredAttributes:l=[],allowedAttributes:c}=t,d=n||e,p=m=>{if(!c)return m;const g={};return c.forEach(v=>{v in m&&(g[v]=m[v])}),g};return{parseMarkdown:(m,g)=>{const v={...s,...m.attributes};return g.createNode(e,v,[])},markdownTokenizer:{name:e,level:"block",start(m){var g;const v=new RegExp(`^:::${d}(?:\\s|$)`,"m"),b=(g=m.match(v))==null?void 0:g.index;return b!==void 0?b:-1},tokenize(m,g,v){const b=new RegExp(`^:::${d}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),S=m.match(b);if(!S)return;const k=S[1]||"",E=r(k);if(!l.find(T=>!(T in E)))return{type:e,raw:S[0],attributes:E}}},renderMarkdown:m=>{const g=p(m.attrs||{}),v=i(g),b=v?` {${v}}`:"";return`:::${d}${b} :::`}}}function UB(t){const{nodeName:e,name:n,getContent:r,parseAttributes:i=Gy,serializeAttributes:s=Ky,defaultAttributes:l={},content:c="block",allowedAttributes:d}=t,p=n||e,m=g=>{if(!d)return g;const v={};return d.forEach(b=>{b in g&&(v[b]=g[b])}),v};return{parseMarkdown:(g,v)=>{let b;if(r){const k=r(g);b=typeof k=="string"?[{type:"text",text:k}]:k}else c==="block"?b=v.parseChildren(g.tokens||[]):b=v.parseInline(g.tokens||[]);const S={...l,...g.attributes};return v.createNode(e,S,b)},markdownTokenizer:{name:e,level:"block",start(g){var v;const b=new RegExp(`^:::${p}`,"m"),S=(v=g.match(b))==null?void 0:v.index;return S!==void 0?S:-1},tokenize(g,v,b){var S;const k=new RegExp(`^:::${p}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),E=g.match(k);if(!E)return;const[w,T=""]=E,_=i(T);let R=1;const O=w.length;let D="";const I=/^:::([\w-]*)(\s.*)?/gm,H=g.slice(O);for(I.lastIndex=0;;){const V=I.exec(H);if(V===null)break;const K=V.index,Q=V[1];if(!((S=V[2])!=null&&S.endsWith(":::"))){if(Q)R+=1;else if(R-=1,R===0){const re=H.slice(0,K);D=re.trim();const Re=g.slice(0,O+K+V[0].length);let ye=[];if(D)if(c==="block")for(ye=b.blockTokens(re),ye.forEach(me=>{me.text&&(!me.tokens||me.tokens.length===0)&&(me.tokens=b.inlineTokens(me.text))});ye.length>0;){const me=ye[ye.length-1];if(me.type==="paragraph"&&(!me.text||me.text.trim()===""))ye.pop();else break}else ye=b.inlineTokens(D);return{type:e,raw:Re,attributes:_,content:D,tokens:ye}}}}}},renderMarkdown:(g,v)=>{const b=m(g.attrs||{}),S=s(b),k=S?` {${S}}`:"",E=v.renderChildren(g.content||[],`

`);return`:::${p}${k}

${E}

:::`}}}function HB(t){if(!t.trim())return{};const e={},n=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let r=n.exec(t);for(;r!==null;){const[,i,s,l]=r;e[i]=s||l,r=n.exec(t)}return e}function qB(t){return Object.entries(t).filter(([,e])=>e!=null).map(([e,n])=>`${e}="${n}"`).join(" ")}function FB(t){const{nodeName:e,name:n,getContent:r,parseAttributes:i=HB,serializeAttributes:s=qB,defaultAttributes:l={},selfClosing:c=!1,allowedAttributes:d}=t,p=n||e,m=v=>{if(!d)return v;const b={};return d.forEach(S=>{const k=typeof S=="string"?S:S.name,E=typeof S=="string"?void 0:S.skipIfDefault;if(k in v){const w=v[k];if(E!==void 0&&w===E)return;b[k]=w}}),b},g=p.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(v,b)=>{const S={...l,...v.attributes};if(c)return b.createNode(e,S);const k=r?r(v):v.content||"";return k?b.createNode(e,S,[b.createTextNode(k)]):b.createNode(e,S,[])},markdownTokenizer:{name:e,level:"inline",start(v){const b=c?new RegExp(`\\[${g}\\s*[^\\]]*\\]`):new RegExp(`\\[${g}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${g}\\]`),S=v.match(b),k=S?.index;return k!==void 0?k:-1},tokenize(v,b,S){const k=c?new RegExp(`^\\[${g}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${g}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${g}\\]`),E=v.match(k);if(!E)return;let w="",T="";if(c){const[,R]=E;T=R}else{const[,R,O]=E;T=R,w=O||""}const _=i(T.trim());return{type:e,raw:E[0],content:w.trim(),attributes:_}}},renderMarkdown:v=>{let b="";r?b=r(v):v.content&&v.content.length>0&&(b=v.content.filter(w=>w.type==="text").map(w=>w.text).join(""));const S=m(v.attrs||{}),k=s(S),E=k?` ${k}`:"";return c?`[${p}${E}]`:`[${p}${E}]${b}[/${p}]`}}}function Lv(t,e,n){var r,i,s,l;const c=t.split(`
`),d=[];let p="",m=0;const g=e.baseIndentSize||2;for(;m<c.length;){const v=c[m],b=v.match(e.itemPattern);if(!b){if(d.length>0)break;if(v.trim()===""){m+=1,p=`${p}${v}
`;continue}else return}const S=e.extractItemData(b),{indentLevel:k,mainContent:E}=S;p=`${p}${v}
`;const w=[E];for(m+=1;m<c.length;){const O=c[m];if(O.trim()===""){const I=c.slice(m+1).findIndex(K=>K.trim()!=="");if(I===-1)break;if((((i=(r=c[m+1+I].match(/^(\s*)/))==null?void 0:r[1])==null?void 0:i.length)||0)>k){w.push(O),p=`${p}${O}
`,m+=1;continue}else break}if((((l=(s=O.match(/^(\s*)/))==null?void 0:s[1])==null?void 0:l.length)||0)>k)w.push(O),p=`${p}${O}
`,m+=1;else break}let T;const _=w.slice(1);if(_.length>0){const O=_.map(D=>D.slice(k+g)).join(`
`);O.trim()&&(e.customNestedParser?T=e.customNestedParser(O):T=n.blockTokens(O))}const R=e.createToken(S,T);d.push(R)}if(d.length!==0)return{items:d,raw:p}}function Yy(t,e,n,r){if(!t||!Array.isArray(t.content))return"";const i=typeof n=="function"?n(r):n,[s,...l]=t.content,c=e.renderChildren([s]),d=[`${i}${c}`];return l&&l.length>0&&l.forEach(p=>{const m=e.renderChildren([p]);if(m){const g=m.split(`
`).map(v=>v?e.indent(v):"").join(`
`);d.push(g)}}),d.join(`
`)}function VB(t,e,n={}){const{state:r}=e,{doc:i,tr:s}=r,l=t;i.descendants((c,d)=>{const p=s.mapping.map(d),m=s.mapping.map(d)+c.nodeSize;let g=null;if(c.marks.forEach(b=>{if(b!==l)return!1;g=b}),!g)return;let v=!1;if(Object.keys(n).forEach(b=>{n[b]!==g.attrs[b]&&(v=!0)}),v){const b=t.type.create({...t.attrs,...n});s.removeMark(p,m,t.type),s.addMark(p,m,b)}}),s.docChanged&&e.view.dispatch(s)}var Mr=class $_ extends $y{constructor(){super(...arguments),this.type="node"}static create(e={}){const n=typeof e=="function"?e():e;return new $_(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function wa(t){return new TB({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:i})=>{const s=Ot(t.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:l}=e,c=r[r.length-1],d=r[0];let p=n.to;if(c){const m=d.search(/\S/),g=n.from+d.indexOf(c),v=g+c.length;if(Wy(n.from,n.to,e.doc).filter(S=>S.mark.type.excluded.find(E=>E===t.type&&E!==S.mark.type)).filter(S=>S.to>g).length)return null;v<n.to&&l.delete(v,n.to),g>n.from&&l.delete(n.from+m,g),p=n.from+m+c.length,l.addMark(n.from+m,p,t.type.create(s||{})),l.removeStoredMark(t.type)}}})}const WB="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",$B="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",Iv="numeric",Pv="ascii",Bv="alpha",_u="asciinumeric",vu="alphanumeric",Uv="domain",G_="emoji",GB="scheme",KB="slashscheme",R0="whitespace";function YB(t,e){return t in e||(e[t]=[]),e[t]}function fa(t,e,n){e[Iv]&&(e[_u]=!0,e[vu]=!0),e[Pv]&&(e[_u]=!0,e[Bv]=!0),e[_u]&&(e[vu]=!0),e[Bv]&&(e[vu]=!0),e[vu]&&(e[Uv]=!0),e[G_]&&(e[Uv]=!0);for(const r in e){const i=YB(r,n);i.indexOf(t)<0&&i.push(t)}}function XB(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function pr(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}pr.groups={};pr.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const i=e.jr[r][0],s=e.jr[r][1];if(s&&i.test(t))return s}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let i=0;i<t.length;i++)this.tt(t[i],e,n,r)},tr(t,e,n,r){r=r||pr.groups;let i;return e&&e.j?i=e:(i=new pr(e),n&&r&&fa(e,n,r)),this.jr.push([t,i]),i},ts(t,e,n,r){let i=this;const s=t.length;if(!s)return i;for(let l=0;l<s-1;l++)i=i.tt(t[l]);return i.tt(t[s-1],e,n,r)},tt(t,e,n,r){r=r||pr.groups;const i=this;if(e&&e.j)return i.j[t]=e,e;const s=e;let l,c=i.go(t);if(c?(l=new pr,Object.assign(l.j,c.j),l.jr.push.apply(l.jr,c.jr),l.jd=c.jd,l.t=c.t):l=new pr,s){if(r)if(l.t&&typeof l.t=="string"){const d=Object.assign(XB(l.t,r),n);fa(s,d,r)}else n&&fa(s,n,r);l.t=s}return i.j[t]=l,l}};const it=(t,e,n,r,i)=>t.ta(e,n,r,i),ln=(t,e,n,r,i)=>t.tr(e,n,r,i),Nk=(t,e,n,r,i)=>t.ts(e,n,r,i),fe=(t,e,n,r,i)=>t.tt(e,n,r,i),ho="WORD",Hv="UWORD",K_="ASCIINUMERICAL",Y_="ALPHANUMERICAL",Vu="LOCALHOST",qv="TLD",Fv="UTLD",eh="SCHEME",jl="SLASH_SCHEME",Xy="NUM",Vv="WS",Jy="NL",Au="OPENBRACE",Mu="CLOSEBRACE",jh="OPENBRACKET",Oh="CLOSEBRACKET",Rh="OPENPAREN",Nh="CLOSEPAREN",Dh="OPENANGLEBRACKET",zh="CLOSEANGLEBRACKET",Lh="FULLWIDTHLEFTPAREN",Ih="FULLWIDTHRIGHTPAREN",Ph="LEFTCORNERBRACKET",Bh="RIGHTCORNERBRACKET",Uh="LEFTWHITECORNERBRACKET",Hh="RIGHTWHITECORNERBRACKET",qh="FULLWIDTHLESSTHAN",Fh="FULLWIDTHGREATERTHAN",Vh="AMPERSAND",Wh="APOSTROPHE",$h="ASTERISK",ls="AT",Gh="BACKSLASH",Kh="BACKTICK",Yh="CARET",ds="COLON",Qy="COMMA",Xh="DOLLAR",Ci="DOT",Jh="EQUALS",Zy="EXCLAMATION",Vr="HYPHEN",ju="PERCENT",Qh="PIPE",Zh="PLUS",ep="POUND",Ou="QUERY",eb="QUOTE",X_="FULLWIDTHMIDDLEDOT",tb="SEMI",Ti="SLASH",Ru="TILDE",tp="UNDERSCORE",J_="EMOJI",np="SYM";var Q_=Object.freeze({__proto__:null,ALPHANUMERICAL:Y_,AMPERSAND:Vh,APOSTROPHE:Wh,ASCIINUMERICAL:K_,ASTERISK:$h,AT:ls,BACKSLASH:Gh,BACKTICK:Kh,CARET:Yh,CLOSEANGLEBRACKET:zh,CLOSEBRACE:Mu,CLOSEBRACKET:Oh,CLOSEPAREN:Nh,COLON:ds,COMMA:Qy,DOLLAR:Xh,DOT:Ci,EMOJI:J_,EQUALS:Jh,EXCLAMATION:Zy,FULLWIDTHGREATERTHAN:Fh,FULLWIDTHLEFTPAREN:Lh,FULLWIDTHLESSTHAN:qh,FULLWIDTHMIDDLEDOT:X_,FULLWIDTHRIGHTPAREN:Ih,HYPHEN:Vr,LEFTCORNERBRACKET:Ph,LEFTWHITECORNERBRACKET:Uh,LOCALHOST:Vu,NL:Jy,NUM:Xy,OPENANGLEBRACKET:Dh,OPENBRACE:Au,OPENBRACKET:jh,OPENPAREN:Rh,PERCENT:ju,PIPE:Qh,PLUS:Zh,POUND:ep,QUERY:Ou,QUOTE:eb,RIGHTCORNERBRACKET:Bh,RIGHTWHITECORNERBRACKET:Hh,SCHEME:eh,SEMI:tb,SLASH:Ti,SLASH_SCHEME:jl,SYM:np,TILDE:Ru,TLD:qv,UNDERSCORE:tp,UTLD:Fv,UWORD:Hv,WORD:ho,WS:Vv});const co=/[a-z]/,lu=new RegExp("\\p{L}","u"),N0=new RegExp("\\p{Emoji}","u"),uo=/\d/,D0=/\s/,Dk="\r",z0=`
`,JB="",QB="",L0="";let If=null,Pf=null;function ZB(t=[]){const e={};pr.groups=e;const n=new pr;If==null&&(If=zk(WB)),Pf==null&&(Pf=zk($B)),fe(n,"'",Wh),fe(n,"{",Au),fe(n,"}",Mu),fe(n,"[",jh),fe(n,"]",Oh),fe(n,"(",Rh),fe(n,")",Nh),fe(n,"<",Dh),fe(n,">",zh),fe(n,"",Lh),fe(n,"",Ih),fe(n,"",Ph),fe(n,"",Bh),fe(n,"",Uh),fe(n,"",Hh),fe(n,"",qh),fe(n,"",Fh),fe(n,"&",Vh),fe(n,"*",$h),fe(n,"@",ls),fe(n,"`",Kh),fe(n,"^",Yh),fe(n,":",ds),fe(n,",",Qy),fe(n,"$",Xh),fe(n,".",Ci),fe(n,"=",Jh),fe(n,"!",Zy),fe(n,"-",Vr),fe(n,"%",ju),fe(n,"|",Qh),fe(n,"+",Zh),fe(n,"#",ep),fe(n,"?",Ou),fe(n,'"',eb),fe(n,"/",Ti),fe(n,";",tb),fe(n,"~",Ru),fe(n,"_",tp),fe(n,"\\",Gh),fe(n,"",X_);const r=ln(n,uo,Xy,{[Iv]:!0});ln(r,uo,r);const i=ln(r,co,K_,{[_u]:!0}),s=ln(r,lu,Y_,{[vu]:!0}),l=ln(n,co,ho,{[Pv]:!0});ln(l,uo,i),ln(l,co,l),ln(i,uo,i),ln(i,co,i);const c=ln(n,lu,Hv,{[Bv]:!0});ln(c,co),ln(c,uo,s),ln(c,lu,c),ln(s,uo,s),ln(s,co),ln(s,lu,s);const d=fe(n,z0,Jy,{[R0]:!0}),p=fe(n,Dk,Vv,{[R0]:!0}),m=ln(n,D0,Vv,{[R0]:!0});fe(n,L0,m),fe(p,z0,d),fe(p,L0,m),ln(p,D0,m),fe(m,Dk),fe(m,z0),ln(m,D0,m),fe(m,L0,m);const g=ln(n,N0,J_,{[G_]:!0});fe(g,"#"),ln(g,N0,g),fe(g,JB,g);const v=fe(g,QB);fe(v,"#"),ln(v,N0,g);const b=[[co,l],[uo,i]],S=[[co,null],[lu,c],[uo,s]];for(let k=0;k<If.length;k++)ns(n,If[k],qv,ho,b);for(let k=0;k<Pf.length;k++)ns(n,Pf[k],Fv,Hv,S);fa(qv,{tld:!0,ascii:!0},e),fa(Fv,{utld:!0,alpha:!0},e),ns(n,"file",eh,ho,b),ns(n,"mailto",eh,ho,b),ns(n,"http",jl,ho,b),ns(n,"https",jl,ho,b),ns(n,"ftp",jl,ho,b),ns(n,"ftps",jl,ho,b),fa(eh,{scheme:!0,ascii:!0},e),fa(jl,{slashscheme:!0,ascii:!0},e),t=t.sort((k,E)=>k[0]>E[0]?1:-1);for(let k=0;k<t.length;k++){const E=t[k][0],T=t[k][1]?{[GB]:!0}:{[KB]:!0};E.indexOf("-")>=0?T[Uv]=!0:co.test(E)?uo.test(E)?T[_u]=!0:T[Pv]=!0:T[Iv]=!0,Nk(n,E,E,T)}return Nk(n,"localhost",Vu,{ascii:!0}),n.jd=new pr(np),{start:n,tokens:Object.assign({groups:e},Q_)}}function Z_(t,e){const n=eU(e.replace(/[A-Z]/g,c=>c.toLowerCase())),r=n.length,i=[];let s=0,l=0;for(;l<r;){let c=t,d=null,p=0,m=null,g=-1,v=-1;for(;l<r&&(d=c.go(n[l]));)c=d,c.accepts()?(g=0,v=0,m=c):g>=0&&(g+=n[l].length,v++),p+=n[l].length,s+=n[l].length,l++;s-=g,l-=v,p-=g,i.push({t:m.t,v:e.slice(s-p,s),s:s-p,e:s})}return i}function eU(t){const e=[],n=t.length;let r=0;for(;r<n;){let i=t.charCodeAt(r),s,l=i<55296||i>56319||r+1===n||(s=t.charCodeAt(r+1))<56320||s>57343?t[r]:t.slice(r,r+2);e.push(l),r+=l.length}return e}function ns(t,e,n,r,i){let s;const l=e.length;for(let c=0;c<l-1;c++){const d=e[c];t.j[d]?s=t.j[d]:(s=new pr(r),s.jr=i.slice(),t.j[d]=s),t=s}return s=new pr(n),s.jr=i.slice(),t.j[e[l-1]]=s,s}function zk(t){const e=[],n=[];let r=0,i="0123456789";for(;r<t.length;){let s=0;for(;i.indexOf(t[r+s])>=0;)s++;if(s>0){e.push(n.join(""));for(let l=parseInt(t.substring(r,r+s),10);l>0;l--)n.pop();r+=s}else n.push(t[r]),r++}return e}const Wu={defaultProtocol:"http",events:null,format:Lk,formatHref:Lk,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function nb(t,e=null){let n=Object.assign({},Wu);t&&(n=Object.assign(n,t instanceof nb?t.o:t));const r=n.ignoreTags,i=[];for(let s=0;s<r.length;s++)i.push(r[s].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=i}nb.prototype={o:Wu,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let i=this.o[t];return i&&(typeof i=="object"?(i=n.t in i?i[n.t]:Wu[t],typeof i=="function"&&r&&(i=i(e,n))):typeof i=="function"&&r&&(i=i(e,n.t,n)),i)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function Lk(t){return t}function eA(t,e){this.t="token",this.v=t,this.tk=e}eA.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=Wu.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),i=t.get("tagName",n,e),s=this.toFormattedString(t),l={},c=t.get("className",n,e),d=t.get("target",n,e),p=t.get("rel",n,e),m=t.getObj("attributes",n,e),g=t.getObj("events",n,e);return l.href=r,c&&(l.class=c),d&&(l.target=d),p&&(l.rel=p),m&&Object.assign(l,m),{tagName:i,attributes:l,content:s,eventListeners:g}}};function Rp(t,e){class n extends eA{constructor(i,s){super(i,s),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const Ik=Rp("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Pk=Rp("text"),tU=Rp("nl"),Bf=Rp("url",{isLink:!0,toHref(t=Wu.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==Vu&&t[1].t===ds}}),Fr=t=>new pr(t);function nU({groups:t}){const e=t.domain.concat([Vh,$h,ls,Gh,Kh,Yh,Xh,Jh,Vr,Xy,ju,Qh,Zh,ep,Ti,np,Ru,tp]),n=[Wh,ds,Qy,Ci,Zy,ju,Ou,eb,tb,Dh,zh,Au,Mu,Oh,jh,Rh,Nh,Lh,Ih,Ph,Bh,Uh,Hh,qh,Fh],r=[Vh,Wh,$h,Gh,Kh,Yh,Xh,Jh,Vr,Au,Mu,ju,Qh,Zh,ep,Ou,Ti,np,Ru,tp],i=Fr(),s=fe(i,Ru);it(s,r,s),it(s,t.domain,s);const l=Fr(),c=Fr(),d=Fr();it(i,t.domain,l),it(i,t.scheme,c),it(i,t.slashscheme,d),it(l,r,s),it(l,t.domain,l);const p=fe(l,ls);fe(s,ls,p),fe(c,ls,p),fe(d,ls,p);const m=fe(s,Ci);it(m,r,s),it(m,t.domain,s);const g=Fr();it(p,t.domain,g),it(g,t.domain,g);const v=fe(g,Ci);it(v,t.domain,g);const b=Fr(Ik);it(v,t.tld,b),it(v,t.utld,b),fe(p,Vu,b);const S=fe(g,Vr);fe(S,Vr,S),it(S,t.domain,g),it(b,t.domain,g),fe(b,Ci,v),fe(b,Vr,S);const k=fe(b,ds);it(k,t.numeric,Ik);const E=fe(l,Vr),w=fe(l,Ci);fe(E,Vr,E),it(E,t.domain,l),it(w,r,s),it(w,t.domain,l);const T=Fr(Bf);it(w,t.tld,T),it(w,t.utld,T),it(T,t.domain,l),it(T,r,s),fe(T,Ci,w),fe(T,Vr,E),fe(T,ls,p);const _=fe(T,ds),R=Fr(Bf);it(_,t.numeric,R);const O=Fr(Bf),D=Fr();it(O,e,O),it(O,n,D),it(D,e,O),it(D,n,D),fe(T,Ti,O),fe(R,Ti,O);const I=fe(c,ds),H=fe(d,ds),V=fe(H,Ti),K=fe(V,Ti);it(c,t.domain,l),fe(c,Ci,w),fe(c,Vr,E),it(d,t.domain,l),fe(d,Ci,w),fe(d,Vr,E),it(I,t.domain,O),fe(I,Ti,O),fe(I,Ou,O),it(K,t.domain,O),it(K,e,O),fe(K,Ti,O);const Q=[[Au,Mu],[jh,Oh],[Rh,Nh],[Dh,zh],[Lh,Ih],[Ph,Bh],[Uh,Hh],[qh,Fh]];for(let re=0;re<Q.length;re++){const[Re,ye]=Q[re],me=fe(O,Re);fe(D,Re,me),fe(me,ye,O);const q=Fr(Bf);it(me,e,q);const te=Fr();it(me,n),it(q,e,q),it(q,n,te),it(te,e,q),it(te,n,te),fe(q,ye,O),fe(te,ye,O)}return fe(i,Vu,T),fe(i,Jy,tU),{start:i,tokens:Q_}}function rU(t,e,n){let r=n.length,i=0,s=[],l=[];for(;i<r;){let c=t,d=null,p=null,m=0,g=null,v=-1;for(;i<r&&!(d=c.go(n[i].t));)l.push(n[i++]);for(;i<r&&(p=d||c.go(n[i].t));)d=null,c=p,c.accepts()?(v=0,g=c):v>=0&&v++,i++,m++;if(v<0)i-=m,i<r&&(l.push(n[i]),i++);else{l.length>0&&(s.push(I0(Pk,e,l)),l=[]),i-=v,m-=v;const b=g.t,S=n.slice(i-m,i);s.push(I0(b,e,S))}}return l.length>0&&s.push(I0(Pk,e,l)),s}function I0(t,e,n){const r=n[0].s,i=n[n.length-1].e,s=e.slice(r,i);return new t(s,n)}const iU=typeof console<"u"&&console&&console.warn||(()=>{}),oU="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Vt={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function sU(){return pr.groups={},Vt.scanner=null,Vt.parser=null,Vt.tokenQueue=[],Vt.pluginQueue=[],Vt.customSchemes=[],Vt.initialized=!1,Vt}function Bk(t,e=!1){if(Vt.initialized&&iU(`linkifyjs: already initialized - will not register custom scheme "${t}" ${oU}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Vt.customSchemes.push([t,e])}function aU(){Vt.scanner=ZB(Vt.customSchemes);for(let t=0;t<Vt.tokenQueue.length;t++)Vt.tokenQueue[t][1]({scanner:Vt.scanner});Vt.parser=nU(Vt.scanner.tokens);for(let t=0;t<Vt.pluginQueue.length;t++)Vt.pluginQueue[t][1]({scanner:Vt.scanner,parser:Vt.parser});return Vt.initialized=!0,Vt}function rb(t){return Vt.initialized||aU(),rU(Vt.parser.start,t,Z_(Vt.scanner.start,t))}rb.scan=Z_;function tA(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new nb(n),i=rb(t),s=[];for(let l=0;l<i.length;l++){const c=i[l];c.isLink&&(!e||c.t===e)&&r.check(c)&&s.push(c.toFormattedObject(r))}return s}var ib="[\0- -\u2029]",lU=new RegExp(ib),cU=new RegExp(`${ib}$`),uU=new RegExp(ib,"g");function dU(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function fU(t){return new nn({key:new Cn("autolink"),appendTransaction:(e,n,r)=>{const i=e.some(p=>p.docChanged)&&!n.doc.eq(r.doc),s=e.some(p=>p.getMeta("preventAutolink"));if(!i||s)return;const{tr:l}=r,c=S_(n.doc,[...e]);if(A_(c).forEach(({newRange:p})=>{const m=I8(r.doc,p,b=>b.isTextblock);let g,v;if(m.length>1)g=m[0],v=r.doc.textBetween(g.pos,g.pos+g.node.nodeSize,void 0," ");else if(m.length){const b=r.doc.textBetween(p.from,p.to," "," ");if(!cU.test(b))return;g=m[0],v=r.doc.textBetween(g.pos,p.to,void 0," ")}if(g&&v){const b=v.split(lU).filter(Boolean);if(b.length<=0)return!1;const S=b[b.length-1],k=g.pos+v.lastIndexOf(S);if(!S)return!1;const E=rb(S).map(w=>w.toObject(t.defaultProtocol));if(!dU(E))return!1;E.filter(w=>w.isLink).map(w=>({...w,from:k+w.start+1,to:k+w.end+1})).filter(w=>r.schema.marks.code?!r.doc.rangeHasMark(w.from,w.to,r.schema.marks.code):!0).filter(w=>t.validate(w.value)).filter(w=>t.shouldAutoLink(w.value)).forEach(w=>{Wy(w.from,w.to,r.doc).some(T=>T.mark.type===t.type)||l.addMark(w.from,w.to,t.type.create({href:w.href}))})}}),!!l.steps.length)return l}})}function hU(t){return new nn({key:new Cn("handleClickLink"),props:{handleClick:(e,n,r)=>{var i,s;if(r.button!==0||!e.editable)return!1;let l=null;if(r.target instanceof HTMLAnchorElement)l=r.target;else{const d=r.target;if(!d)return!1;const p=t.editor.view.dom;l=d.closest("a"),l&&!p.contains(l)&&(l=null)}if(!l)return!1;let c=!1;if(t.enableClickSelection&&(c=t.editor.commands.extendMarkRange(t.type.name)),t.openOnClick){const d=__(e.state,t.type.name),p=(i=l.href)!=null?i:d.href,m=(s=l.target)!=null?s:d.target;p&&(window.open(p,m),c=!0)}return c}}})}function pU(t){return new nn({key:new Cn("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{shouldAutoLink:i}=t,{state:s}=e,{selection:l}=s,{empty:c}=l;if(c)return!1;let d="";r.content.forEach(m=>{d+=m.textContent});const p=tA(d,{defaultProtocol:t.defaultProtocol}).find(m=>m.isLink&&m.value===d);return!d||!p||i!==void 0&&!i(p.value)?!1:t.editor.commands.setMark(t.type,{href:p.href})}}})}function ra(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&n.push(i)}),!t||t.replace(uU,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var mU=Aa.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){Bk(t);return}Bk(t.scheme,t.optionalSlashes)})},onDestroy(){sU()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!ra(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>{const e=/^[a-z][a-z0-9+.-]*:\/\//i.test(t),n=/^[a-z][a-z0-9+.-]*:/i.test(t);if(e||n&&!t.includes("@"))return!0;const i=(t.includes("@")?t.split("@").pop():t).split(/[/?#:]/)[0];return!(/^\d{1,3}(\.\d{1,3}){3}$/.test(i)||!/\./.test(i))}}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:n=>!!ra(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!ra(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",kn(this.options.HTMLAttributes,t),0]:["a",kn(this.options.HTMLAttributes,{...t,href:""}),0]},markdownTokenName:"link",parseMarkdown:(t,e)=>e.applyMark("link",e.parseInline(t.tokens||[]),{href:t.href,title:t.title||null}),renderMarkdown:(t,e)=>{var n;const r=((n=t.attrs)==null?void 0:n.href)||"";return`[${e.renderChildren(t)}](${r})`},addCommands(){return{setLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!ra(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:n}=t||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!ra(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[wa({find:t=>{const e=[];if(t){const{protocols:n,defaultProtocol:r}=this.options,i=tA(t).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:l=>!!ra(l,n),protocols:n,defaultProtocol:r}));i.length&&i.forEach(s=>{this.options.shouldAutoLink(s.value)&&e.push({text:s.value,data:{href:s.href},index:s.start})})}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:n}=this.options;return this.options.autolink&&t.push(fU({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!ra(i,e),protocols:e,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),t.push(hU({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(pU({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),t}}),Ma={root:"m_dd3f7539",Typography:"m_f2016866",content:"m_c2204cc2",linkEditorDropdown:"m_8a991b4f",control:"m_c2207da6",controlIcon:"m_9cdfeb3f",controlsGroup:"m_2ab47ef2",linkEditor:"m_b67b711e",linkEditorInput:"m_296cf94c",linkEditorExternalControl:"m_cfef614",linkEditorSave:"m_3b28e7bb",toolbar:"m_4574a3c4",taskList:"m_8b44009a"};const gU={linkControlLabel:"Link",colorPickerControlLabel:"Text color",highlightControlLabel:"Highlight text",colorControlLabel:t=>`Set text color ${t}`,boldControlLabel:"Bold",italicControlLabel:"Italic",underlineControlLabel:"Underline",strikeControlLabel:"Strikethrough",clearFormattingControlLabel:"Clear formatting",unlinkControlLabel:"Remove link",bulletListControlLabel:"Bullet list",orderedListControlLabel:"Ordered list",sourceCodeControlLabel:"Switch between text/source code",h1ControlLabel:"Heading 1",h2ControlLabel:"Heading 2",h3ControlLabel:"Heading 3",h4ControlLabel:"Heading 4",h5ControlLabel:"Heading 5",h6ControlLabel:"Heading 6",blockquoteControlLabel:"Blockquote",alignLeftControlLabel:"Align text: left",alignCenterControlLabel:"Align text: center",alignRightControlLabel:"Align text: right",alignJustifyControlLabel:"Align text: justify",codeControlLabel:"Code",codeBlockControlLabel:"Code block",subscriptControlLabel:"Subscript",superscriptControlLabel:"Superscript",unsetColorControlLabel:"Unset color",hrControlLabel:"Horizontal line",undoControlLabel:"Undo",redoControlLabel:"Redo",tasksControlLabel:"Task list",tasksSinkLabel:"Decrease task level",tasksLiftLabel:"Increase task level",linkEditorInputLabel:"Enter URL",linkEditorInputPlaceholder:"https://example.com/",linkEditorExternalLink:"Open link in a new tab",linkEditorInternalLink:"Open link in the same tab",linkEditorSave:"Save",colorPickerCancel:"Cancel",colorPickerClear:"Clear color",colorPickerColorPicker:"Color picker",colorPickerPalette:"Color palette",colorPickerSave:"Save",colorPickerColorLabel:t=>`Set text color ${t}`},[vU,Pi]=Fj("RichTextEditor component was not found in tree");var P0={exports:{}},B0={};var Uk;function yU(){if(Uk)return B0;Uk=1;var t=cp();function e(g,v){return g===v&&(g!==0||1/g===1/v)||g!==g&&v!==v}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,i=t.useEffect,s=t.useLayoutEffect,l=t.useDebugValue;function c(g,v){var b=v(),S=r({inst:{value:b,getSnapshot:v}}),k=S[0].inst,E=S[1];return s(function(){k.value=b,k.getSnapshot=v,d(k)&&E({inst:k})},[g,b,v]),i(function(){return d(k)&&E({inst:k}),g(function(){d(k)&&E({inst:k})})},[g]),l(b),b}function d(g){var v=g.getSnapshot;g=g.value;try{var b=v();return!n(g,b)}catch{return!0}}function p(g,v){return v()}var m=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:c;return B0.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:m,B0}var Hk;function nA(){return Hk||(Hk=1,P0.exports=yU()),P0.exports}var rA=nA();const{getOwnPropertyNames:bU,getOwnPropertySymbols:xU}=Object,{hasOwnProperty:SU}=Object.prototype;function U0(t,e){return function(r,i,s){return t(r,i,s)&&e(r,i,s)}}function Uf(t){return function(n,r,i){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,i);const{cache:s}=i,l=s.get(n),c=s.get(r);if(l&&c)return l===r&&c===n;s.set(n,r),s.set(r,n);const d=t(n,r,i);return s.delete(n),s.delete(r),d}}function EU(t){return t?.[Symbol.toStringTag]}function qk(t){return bU(t).concat(xU(t))}const kU=Object.hasOwn||((t,e)=>SU.call(t,e));function ja(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const wU="__v",CU="__o",TU="_owner",{getOwnPropertyDescriptor:Fk,keys:Vk}=Object;function _U(t,e){return t.byteLength===e.byteLength&&rp(new Uint8Array(t),new Uint8Array(e))}function AU(t,e,n){let r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function MU(t,e){return t.byteLength===e.byteLength&&rp(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function jU(t,e){return ja(t.getTime(),e.getTime())}function OU(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function RU(t,e){return t===e}function Wk(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),s=t.entries();let l,c,d=0;for(;(l=s.next())&&!l.done;){const p=e.entries();let m=!1,g=0;for(;(c=p.next())&&!c.done;){if(i[g]){g++;continue}const v=l.value,b=c.value;if(n.equals(v[0],b[0],d,g,t,e,n)&&n.equals(v[1],b[1],v[0],b[0],t,e,n)){m=i[g]=!0;break}g++}if(!m)return!1;d++}return!0}const NU=ja;function DU(t,e,n){const r=Vk(t);let i=r.length;if(Vk(e).length!==i)return!1;for(;i-- >0;)if(!iA(t,e,n,r[i]))return!1;return!0}function cu(t,e,n){const r=qk(t);let i=r.length;if(qk(e).length!==i)return!1;let s,l,c;for(;i-- >0;)if(s=r[i],!iA(t,e,n,s)||(l=Fk(t,s),c=Fk(e,s),(l||c)&&(!l||!c||l.configurable!==c.configurable||l.enumerable!==c.enumerable||l.writable!==c.writable)))return!1;return!0}function zU(t,e){return ja(t.valueOf(),e.valueOf())}function LU(t,e){return t.source===e.source&&t.flags===e.flags}function $k(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const i=new Array(r),s=t.values();let l,c;for(;(l=s.next())&&!l.done;){const d=e.values();let p=!1,m=0;for(;(c=d.next())&&!c.done;){if(!i[m]&&n.equals(l.value,c.value,l.value,c.value,t,e,n)){p=i[m]=!0;break}m++}if(!p)return!1}return!0}function rp(t,e){let n=t.byteLength;if(e.byteLength!==n||t.byteOffset!==e.byteOffset)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function IU(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function iA(t,e,n,r){return(r===TU||r===CU||r===wU)&&(t.$$typeof||e.$$typeof)?!0:kU(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}const PU="[object ArrayBuffer]",BU="[object Arguments]",UU="[object Boolean]",HU="[object DataView]",qU="[object Date]",FU="[object Error]",VU="[object Map]",WU="[object Number]",$U="[object Object]",GU="[object RegExp]",KU="[object Set]",YU="[object String]",XU={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},JU="[object URL]",QU=Object.prototype.toString;function ZU({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:n,areDatesEqual:r,areErrorsEqual:i,areFunctionsEqual:s,areMapsEqual:l,areNumbersEqual:c,areObjectsEqual:d,arePrimitiveWrappersEqual:p,areRegExpsEqual:m,areSetsEqual:g,areTypedArraysEqual:v,areUrlsEqual:b,unknownTagComparators:S}){return function(E,w,T){if(E===w)return!0;if(E==null||w==null)return!1;const _=typeof E;if(_!==typeof w)return!1;if(_!=="object")return _==="number"?c(E,w,T):_==="function"?s(E,w,T):!1;const R=E.constructor;if(R!==w.constructor)return!1;if(R===Object)return d(E,w,T);if(Array.isArray(E))return e(E,w,T);if(R===Date)return r(E,w,T);if(R===RegExp)return m(E,w,T);if(R===Map)return l(E,w,T);if(R===Set)return g(E,w,T);const O=QU.call(E);if(O===qU)return r(E,w,T);if(O===GU)return m(E,w,T);if(O===VU)return l(E,w,T);if(O===KU)return g(E,w,T);if(O===$U)return typeof E.then!="function"&&typeof w.then!="function"&&d(E,w,T);if(O===JU)return b(E,w,T);if(O===FU)return i(E,w,T);if(O===BU)return d(E,w,T);if(XU[O])return v(E,w,T);if(O===PU)return t(E,w,T);if(O===HU)return n(E,w,T);if(O===UU||O===WU||O===YU)return p(E,w,T);if(S){let D=S[O];if(!D){const I=EU(E);I&&(D=S[I])}if(D)return D(E,w,T)}return!1}}function eH({circular:t,createCustomConfig:e,strict:n}){let r={areArrayBuffersEqual:_U,areArraysEqual:n?cu:AU,areDataViewsEqual:MU,areDatesEqual:jU,areErrorsEqual:OU,areFunctionsEqual:RU,areMapsEqual:n?U0(Wk,cu):Wk,areNumbersEqual:NU,areObjectsEqual:n?cu:DU,arePrimitiveWrappersEqual:zU,areRegExpsEqual:LU,areSetsEqual:n?U0($k,cu):$k,areTypedArraysEqual:n?U0(rp,cu):rp,areUrlsEqual:IU,unknownTagComparators:void 0};if(e&&(r=Object.assign({},r,e(r))),t){const i=Uf(r.areArraysEqual),s=Uf(r.areMapsEqual),l=Uf(r.areObjectsEqual),c=Uf(r.areSetsEqual);r=Object.assign({},r,{areArraysEqual:i,areMapsEqual:s,areObjectsEqual:l,areSetsEqual:c})}return r}function tH(t){return function(e,n,r,i,s,l,c){return t(e,n,c)}}function nH({circular:t,comparator:e,createState:n,equals:r,strict:i}){if(n)return function(c,d){const{cache:p=t?new WeakMap:void 0,meta:m}=n();return e(c,d,{cache:p,equals:r,meta:m,strict:i})};if(t)return function(c,d){return e(c,d,{cache:new WeakMap,equals:r,meta:void 0,strict:i})};const s={cache:void 0,equals:r,meta:void 0,strict:i};return function(c,d){return e(c,d,s)}}const rH=Rs();Rs({strict:!0});Rs({circular:!0});Rs({circular:!0,strict:!0});Rs({createInternalComparator:()=>ja});Rs({strict:!0,createInternalComparator:()=>ja});Rs({circular:!0,createInternalComparator:()=>ja});Rs({circular:!0,createInternalComparator:()=>ja,strict:!0});function Rs(t={}){const{circular:e=!1,createInternalComparator:n,createState:r,strict:i=!1}=t,s=eH(t),l=ZU(s),c=n?n(l):tH(l);return nH({circular:e,comparator:l,createState:r,equals:c,strict:i})}var H0={exports:{}},q0={};var Gk;function iH(){if(Gk)return q0;Gk=1;var t=cp(),e=nA();function n(p,m){return p===m&&(p!==0||1/p===1/m)||p!==p&&m!==m}var r=typeof Object.is=="function"?Object.is:n,i=e.useSyncExternalStore,s=t.useRef,l=t.useEffect,c=t.useMemo,d=t.useDebugValue;return q0.useSyncExternalStoreWithSelector=function(p,m,g,v,b){var S=s(null);if(S.current===null){var k={hasValue:!1,value:null};S.current=k}else k=S.current;S=c(function(){function w(D){if(!T){if(T=!0,_=D,D=v(D),b!==void 0&&k.hasValue){var I=k.value;if(b(I,D))return R=I}return R=D}if(I=R,r(_,D))return I;var H=v(D);return b!==void 0&&b(I,H)?(_=D,I):(_=D,R=H)}var T=!1,_,R,O=g===void 0?null:g;return[function(){return w(m())},O===null?void 0:function(){return w(O())}]},[m,g,v,b]);var E=i(p,S[0],S[1]);return l(function(){k.hasValue=!0,k.value=E},[E]),d(E),E},q0}var Kk;function oH(){return Kk||(Kk=1,H0.exports=iH()),H0.exports}var sH=oH(),aH=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},lH=({contentComponent:t})=>{const e=rA.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return h.jsx(h.Fragment,{children:Object.values(e)})};function cH(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:du.createPortal(r.reactElement,r.element,n)},t.forEach(i=>i())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(i=>i())}}}var uH=class extends Gn.Component{constructor(t){var e;super(t),this.editorContentRef=Gn.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=t.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){var t;const e=this.props.editor;if(e&&!e.isDestroyed&&((t=e.view.dom)!=null&&t.parentNode)){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:n}),e.contentComponent=cH(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var t;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((t=e.view.dom)!=null&&t.parentNode))return;const n=document.createElement("div");n.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:n})}catch{}}}render(){const{editor:t,innerRef:e,...n}=this.props;return h.jsxs(h.Fragment,{children:[h.jsx("div",{ref:aH(e,this.editorContentRef),...n}),t?.contentComponent&&h.jsx(lH,{contentComponent:t.contentComponent})]})}},dH=A.forwardRef((t,e)=>{const n=Gn.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return Gn.createElement(uH,{key:n,innerRef:e,...t})}),Yk=Gn.memo(dH),fH=typeof window<"u"?A.useLayoutEffect:A.useEffect,hH=class{constructor(t){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=t,this.lastSnapshot={editor:t,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}watch(t){if(this.editor=t,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},n=this.editor;return n.on("transaction",e),()=>{n.off("transaction",e)}}}};function pH(t){var e;const[n]=A.useState(()=>new hH(t.editor)),r=sH.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!=null?e:rH);return fH(()=>n.watch(t.editor),[t.editor,n]),A.useDebugValue(r),r}var mH=!1,Wv=typeof window>"u",gH=Wv||!!(typeof window<"u"&&window.next),vH=class oA{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?Wv||gH?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)==null?void 0:s.call(i,...r)},onBlur:(...r)=>{var i,s;return(s=(i=this.options.current).onBlur)==null?void 0:s.call(i,...r)},onCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onCreate)==null?void 0:s.call(i,...r)},onDestroy:(...r)=>{var i,s;return(s=(i=this.options.current).onDestroy)==null?void 0:s.call(i,...r)},onFocus:(...r)=>{var i,s;return(s=(i=this.options.current).onFocus)==null?void 0:s.call(i,...r)},onSelectionUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)==null?void 0:s.call(i,...r)},onTransaction:(...r)=>{var i,s;return(s=(i=this.options.current).onTransaction)==null?void 0:s.call(i,...r)},onUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onUpdate)==null?void 0:s.call(i,...r)},onContentError:(...r)=>{var i,s;return(s=(i=this.options.current).onContentError)==null?void 0:s.call(i,...r)},onDrop:(...r)=>{var i,s;return(s=(i=this.options.current).onDrop)==null?void 0:s.call(i,...r)},onPaste:(...r)=>{var i,s;return(s=(i=this.options.current).onPaste)==null?void 0:s.call(i,...r)},onDelete:(...r)=>{var i,s;return(s=(i=this.options.current).onDelete)==null?void 0:s.call(i,...r)}};return new zB(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,n){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&n.extensions?e.extensions.length!==n.extensions.length?!1:e.extensions.every((i,s)=>{var l;return i===((l=n.extensions)==null?void 0:l[s])}):e[r]===n[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?oA.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,i)=>r===e[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function yH(t={},e=[]){const n=A.useRef(t);n.current=t;const[r]=A.useState(()=>new vH(n)),i=rA.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return A.useDebugValue(i),A.useEffect(r.onRender(e)),pH({editor:i,selector:({transactionNumber:s})=>t.shouldRerenderOnTransaction===!1||t.shouldRerenderOnTransaction===void 0?null:t.immediatelyRender&&s===0?0:s+1}),i}var bH=A.createContext({editor:null});bH.Consumer;var xH=A.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),SH=()=>A.useContext(xH);Gn.forwardRef((t,e)=>{const{onDragStart:n}=SH(),r=t.as||"div";return h.jsx(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});Gn.createContext({markViewContentRef:()=>{}});const ob=Ca((t,e)=>{const n=zi("RichTextEditorContent",null,t),{classNames:r,className:i,style:s,styles:l,vars:c,...d}=n,p=Pi();return p.withTypographyStyles?h.jsx(Vj,{...p.getStyles("Typography",{className:i,style:s,styles:l,classNames:r}),unstyled:p.unstyled,ref:e,children:h.jsx(ne,{component:Yk,editor:p.editor,...p.getStyles("content",{classNames:r,styles:l}),...d})}):h.jsx(ne,{component:Yk,editor:p.editor,...p.getStyles("content",{classNames:r,styles:l,className:i,style:s}),...d})});ob.classes=Ma;ob.displayName="@mantine/tiptap/RichTextEditorContent";function ht(t){return h.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"})}function EH(t){return h.jsxs(ht,{...t,children:[h.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),h.jsx("path",{d:"M7 5h6a3.5 3.5 0 0 1 0 7h-6z"}),h.jsx("path",{d:"M13 12h1a3.5 3.5 0 0 1 0 7h-7v-7"})]})}function kH(t){return h.jsxs(ht,{...t,children:[h.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),h.jsx("path",{d:"M11 5l6 0"}),h.jsx("path",{d:"M7 19l6 0"}),h.jsx("path",{d:"M14 5l-4 14"})]})}function wH(t){return h.jsxs(ht,{...t,children:[h.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),h.jsx("path",{d:"M7 5v5a5 5 0 0 0 10 0v-5"}),h.jsx("path",{d:"M5 19h14"})]})}function CH(t){return h.jsxs(ht,{...t,children:[h.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),h.jsx("path",{d:"M5 12l14 0"}),h.jsx("path",{d:"M16 6.5a4 2 0 0 0 -4 -1.5h-1a3.5 3.5 0 0 0 0 7h2a3.5 3.5 0 0 1 0 7h-1.5a4 2 0 0 1 -4 -1.5"})]})}function TH(t){return h.jsxs(ht,{...t,children:[h.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),h.jsx("path",{d:"M17 15l4 4m0 -4l-4 4"}),h.jsx("path",{d:"M7 6v-1h11v1"}),h.jsx("path",{d:"M7 19l4 0"}),h.jsx("path",{d:"M13 5l-4 14"})]})}function _H(t){return h.jsxs(ht,{...t,children:[h.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),h.jsx("path",{d:"M19 18v-8l-2 2"}),h.jsx("path",{d:"M4 6v12"}),h.jsx("path",{d:"M12 6v12"}),h.jsx("path",{d:"M11 18h2"}),h.jsx("path",{d:"M3 18h2"}),h.jsx("path",{d:"M4 12h8"}),h.jsx("path",{d:"M3 6h2"}),h.jsx("path",{d:"M11 6h2"})]})}function AH(t){return h.jsxs(ht,{...t,children:[h.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),h.jsx("path",{d:"M17 12a2 2 0 1 1 4 0c0 .591 -.417 1.318 -.816 1.858l-3.184 4.143l4 0"}),h.jsx("path",{d:"M4 6v12"}),h.jsx("path",{d:"M12 6v12"}),h.jsx("path",{d:"M11 18h2"}),h.jsx("path",{d:"M3 18h2"}),h.jsx("path",{d:"M4 12h8"}),h.jsx("path",{d:"M3 6h2"}),h.jsx("path",{d:"M11 6h2"})]})}function MH(t){return h.jsxs(ht,{...t,children:[h.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),h.jsx("path",{d:"M19 14a2 2 0 1 0 -2 -2"}),h.jsx("path",{d:"M17 16a2 2 0 1 0 2 -2"}),h.jsx("path",{d:"M4 6v12"}),h.jsx("path",{d:"M12 6v12"}),h.jsx("path",{d:"M11 18h2"}),h.jsx("path",{d:"M3 18h2"}),h.jsx("path",{d:"M4 12h8"}),h.jsx("path",{d:"M3 6h2"}),h.jsx("path",{d:"M11 6h2"})]})}function jH(t){return h.jsxs(ht,{...t,children:[h.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),h.jsx("path",{d:"M20 18v-8l-4 6h5"}),h.jsx("path",{d:"M4 6v12"}),h.jsx("path",{d:"M12 6v12"}),h.jsx("path",{d:"M11 18h2"}),h.jsx("path",{d:"M3 18h2"}),h.jsx("path",{d:"M4 12h8"}),h.jsx("path",{d:"M3 6h2"}),h.jsx("path",{d:"M11 6h2"})]})}function OH(t){return h.jsxs(ht,{...t,children:[h.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),h.jsx("path",{d:"M17 18h2a2 2 0 1 0 0 -4h-2v-4h4"}),h.jsx("path",{d:"M4 6v12"}),h.jsx("path",{d:"M12 6v12"}),h.jsx("path",{d:"M11 18h2"}),h.jsx("path",{d:"M3 18h2"}),h.jsx("path",{d:"M4 12h8"}),h.jsx("path",{d:"M3 6h2"}),h.jsx("path",{d:"M11 6h2"})]})}function RH(t){return h.jsxs(ht,{...t,children:[h.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),h.jsx("path",{d:"M19 14a2 2 0 1 0 0 4a2 2 0 0 0 0 -4z"}),h.jsx("path",{d:"M21 12a2 2 0 1 0 -4 0v4"}),h.jsx("path",{d:"M4 6v12"}),h.jsx("path",{d:"M12 6v12"}),h.jsx("path",{d:"M11 18h2"}),h.jsx("path",{d:"M3 18h2"}),h.jsx("path",{d:"M4 12h8"}),h.jsx("path",{d:"M3 6h2"}),h.jsx("path",{d:"M11 6h2"})]})}function NH(t){return h.jsxs(ht,{...t,children:[h.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),h.jsx("path",{d:"M9 6l11 0"}),h.jsx("path",{d:"M9 12l11 0"}),h.jsx("path",{d:"M9 18l11 0"}),h.jsx("path",{d:"M5 6l0 .01"}),h.jsx("path",{d:"M5 12l0 .01"}),h.jsx("path",{d:"M5 18l0 .01"})]})}function DH(t){return h.jsxs(ht,{...t,children:[h.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),h.jsx("path",{d:"M11 6h9"}),h.jsx("path",{d:"M11 12h9"}),h.jsx("path",{d:"M12 18h8"}),h.jsx("path",{d:"M4 16a2 2 0 1 1 4 0c0 .591 -.5 1 -1 1.5l-3 2.5h4"}),h.jsx("path",{d:"M6 10v-6l-2 2"})]})}function zH(t){return h.jsxs(ht,{...t,children:[h.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),h.jsx("path",{d:"M17 22v-2"}),h.jsx("path",{d:"M9 15l6 -6"}),h.jsx("path",{d:"M11 6l.463 -.536a5 5 0 0 1 7.071 7.072l-.534 .464"}),h.jsx("path",{d:"M13 18l-.397 .534a5.068 5.068 0 0 1 -7.127 0a4.972 4.972 0 0 1 0 -7.071l.524 -.463"}),h.jsx("path",{d:"M20 17h2"}),h.jsx("path",{d:"M2 7h2"}),h.jsx("path",{d:"M7 2v2"})]})}function LH(t){return h.jsxs(ht,{...t,children:[h.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),h.jsx("path",{d:"M6 15h15"}),h.jsx("path",{d:"M21 19h-15"}),h.jsx("path",{d:"M15 11h6"}),h.jsx("path",{d:"M21 7h-6"}),h.jsx("path",{d:"M9 9h1a1 1 0 1 1 -1 1v-2.5a2 2 0 0 1 2 -2"}),h.jsx("path",{d:"M3 9h1a1 1 0 1 1 -1 1v-2.5a2 2 0 0 1 2 -2"})]})}function IH(t){return h.jsxs(ht,{...t,children:[h.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),h.jsx("path",{d:"M4 6l16 0"}),h.jsx("path",{d:"M4 12l10 0"}),h.jsx("path",{d:"M4 18l14 0"})]})}function PH(t){return h.jsxs(ht,{...t,children:[h.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),h.jsx("path",{d:"M4 6l16 0"}),h.jsx("path",{d:"M10 12l10 0"}),h.jsx("path",{d:"M6 18l14 0"})]})}function BH(t){return h.jsxs(ht,{...t,children:[h.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),h.jsx("path",{d:"M4 6l16 0"}),h.jsx("path",{d:"M8 12l8 0"}),h.jsx("path",{d:"M6 18l12 0"})]})}function UH(t){return h.jsxs(ht,{...t,children:[h.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),h.jsx("path",{d:"M4 6l16 0"}),h.jsx("path",{d:"M4 12l16 0"}),h.jsx("path",{d:"M4 18l12 0"})]})}function HH(t){return h.jsxs(ht,{...t,children:[h.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),h.jsx("path",{d:"M5 7l8 10m-8 0l8 -10"}),h.jsx("path",{d:"M21 20h-4l3.5 -4a1.73 1.73 0 0 0 -3.5 -2"})]})}function qH(t){return h.jsxs(ht,{...t,children:[h.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),h.jsx("path",{d:"M5 7l8 10m-8 0l8 -10"}),h.jsx("path",{d:"M21 11h-4l3.5 -4a1.73 1.73 0 0 0 -3.5 -2"})]})}function sA(t){return h.jsxs(ht,{...t,children:[h.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),h.jsx("path",{d:"M7 8l-4 4l4 4"}),h.jsx("path",{d:"M17 8l4 4l-4 4"}),h.jsx("path",{d:"M14 4l-4 16"})]})}function FH(t){return h.jsxs(ht,{...t,children:[h.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),h.jsx("path",{d:"M3 19h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4"}),h.jsx("path",{d:"M12.5 5.5l4 4"}),h.jsx("path",{d:"M4.5 13.5l4 4"}),h.jsx("path",{d:"M21 15v4h-8l4 -4z"})]})}function VH(t){return h.jsxs(ht,{...t,children:[h.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),h.jsx("path",{d:"M5 12h2"}),h.jsx("path",{d:"M17 12h2"}),h.jsx("path",{d:"M11 12h2"})]})}function aA(t){return h.jsxs(ht,{...t,children:[h.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),h.jsx("path",{d:"M20.042 16.045a9 9 0 0 0 -12.087 -12.087m-2.318 1.677a9 9 0 1 0 12.725 12.73"}),h.jsx("path",{d:"M3 3l18 18"})]})}function WH(t){return h.jsxs(ht,{...t,children:[h.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),h.jsx("path",{d:"M11 7l6 6"}),h.jsx("path",{d:"M4 16l11.7 -11.7a1 1 0 0 1 1.4 0l2.6 2.6a1 1 0 0 1 0 1.4l-11.7 11.7h-4v-4z"})]})}function $H(t){return h.jsxs(ht,{...t,children:[h.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),h.jsx("path",{d:"M18 6l-12 12"}),h.jsx("path",{d:"M6 6l12 12"})]})}function GH(t){return h.jsxs(ht,{...t,children:[h.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),h.jsx("path",{d:"M12 21a9 9 0 0 1 0 -18c4.97 0 9 3.582 9 8c0 1.06 -.474 2.078 -1.318 2.828c-.844 .75 -1.989 1.172 -3.182 1.172h-2.5a2 2 0 0 0 -1 3.75a1.3 1.3 0 0 1 -1 2.25"}),h.jsx("path",{d:"M8.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),h.jsx("path",{d:"M12.5 7.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),h.jsx("path",{d:"M16.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"})]})}function KH(t){return h.jsxs(ht,{...t,children:[h.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),h.jsx("path",{d:"M5 12l5 5l10 -10"})]})}function YH(t){return h.jsxs(ht,{...t,children:[h.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),h.jsx("path",{d:"M9 15l6 -6"}),h.jsx("path",{d:"M11 6l.463 -.536a5 5 0 0 1 7.071 7.072l-.534 .464"}),h.jsx("path",{d:"M13 18l-.397 .534a5.068 5.068 0 0 1 -7.127 0a4.972 4.972 0 0 1 0 -7.071l.524 -.463"})]})}function XH(t){return h.jsxs(ht,{...t,children:[h.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),h.jsx("path",{d:"M12 6h-6a2 2 0 0 0 -2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-6"}),h.jsx("path",{d:"M11 13l9 -9"}),h.jsx("path",{d:"M15 4h5v5"})]})}function JH(t){return h.jsxs(ht,{...t,children:[h.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),h.jsx("path",{d:"M9 14l-4 -4l4 -4"}),h.jsx("path",{d:"M5 10h11a4 4 0 1 1 0 8h-1"})]})}function QH(t){return h.jsxs(ht,{...t,children:[h.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),h.jsx("path",{d:"M15 14l4 -4l-4 -4"}),h.jsx("path",{d:"M19 10h-11a4 4 0 1 0 0 8h1"})]})}function ZH(t){return h.jsxs(ht,{...t,children:[h.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),h.jsx("path",{d:"M3.5 5.5l1.5 1.5l2.5 -2.5"}),h.jsx("path",{d:"M3.5 11.5l1.5 1.5l2.5 -2.5"}),h.jsx("path",{d:"M3.5 17.5l1.5 1.5l2.5 -2.5"}),h.jsx("path",{d:"M11 6l9 0"}),h.jsx("path",{d:"M11 12l9 0"}),h.jsx("path",{d:"M11 18l9 0"})]})}function e7(t){return h.jsxs(ht,{...t,children:[h.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),h.jsx("path",{d:"M20 6l-11 0"}),h.jsx("path",{d:"M20 12l-7 0"}),h.jsx("path",{d:"M20 18l-11 0"}),h.jsx("path",{d:"M4 8l4 4l-4 4"})]})}function t7(t){return h.jsxs(ht,{...t,children:[h.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),h.jsx("path",{d:"M20 6l-7 0"}),h.jsx("path",{d:"M20 12l-9 0"}),h.jsx("path",{d:"M20 18l-7 0"}),h.jsx("path",{d:"M8 8l-4 4l4 4"})]})}function n7(t){return h.jsxs(ht,{...t,children:[h.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),h.jsx("path",{d:`M19 3v16a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V7.914
           a1 1 0 0 1 .293-.707l3.914-3.914A1 1 0 0 1 9.914 3H18
           a1 1 0 0 1 1 1Z`}),h.jsx("path",{d:"M10 11l-2 2 2 2"}),h.jsx("path",{d:"M14 11l2 2-2 2"})]})}const r7={interactive:!0},Oa=Ca((t,e)=>{const n=zi("RichTextEditorControl",r7,t),{classNames:r,className:i,style:s,styles:l,vars:c,interactive:d,active:p,onMouseDown:m,disabled:g,...v}=n,b=Pi();return h.jsx(ww,{...v,...b.getStyles("control",{className:i,style:s,classNames:r,styles:l}),disabled:g,"data-rich-text-editor-control":!0,tabIndex:d?0:-1,"data-interactive":d||void 0,"data-disabled":g||void 0,"data-active":p||void 0,"aria-pressed":p&&d||void 0,"aria-hidden":!d||void 0,ref:e,unstyled:b.unstyled,variant:b.variant||"default",onMouseDown:S=>{S.preventDefault(),m?.(S)}})});Oa.classes=Ma;Oa.displayName="@mantine/tiptap/RichTextEditorControl";const sb=A.forwardRef(({className:t,icon:e,...n},r)=>{const i=Pi();return h.jsx(Oa,{ref:r,...n,children:h.jsx(e,{...i.getStyles("controlIcon")})})});sb.displayName="@mantine/tiptap/RichTextEditorControlBase";function At({label:t,isActive:e,operation:n,icon:r,isDisabled:i}){const s=A.forwardRef((l,c)=>{const{editor:d,labels:p}=Pi(),m=p[t];return h.jsx(sb,{"aria-label":m,title:m,active:e?.name?d?.isActive(e.name,e.attributes):!1,ref:c,icon:l.icon||r,disabled:i?.(d)||!1,...l,onClick:()=>d?.chain().focus()[n.name](n.attributes).run()})});return s.displayName=`@mantine/tiptap/${t}`,s}const i7=At({label:"boldControlLabel",icon:t=>h.jsx(EH,{...t}),isActive:{name:"bold"},operation:{name:"toggleBold"}}),o7=At({label:"italicControlLabel",icon:t=>h.jsx(kH,{...t}),isActive:{name:"italic"},operation:{name:"toggleItalic"}}),s7=At({label:"underlineControlLabel",icon:t=>h.jsx(wH,{...t}),isActive:{name:"underline"},operation:{name:"toggleUnderline"}}),a7=At({label:"strikeControlLabel",icon:t=>h.jsx(CH,{...t}),isActive:{name:"strike"},operation:{name:"toggleStrike"}}),l7=At({label:"clearFormattingControlLabel",icon:t=>h.jsx(TH,{...t}),operation:{name:"unsetAllMarks"}}),c7=At({label:"unlinkControlLabel",icon:t=>h.jsx(zH,{...t}),operation:{name:"unsetLink"}}),u7=At({label:"bulletListControlLabel",icon:t=>h.jsx(NH,{...t}),isActive:{name:"bulletList"},operation:{name:"toggleBulletList"}}),d7=At({label:"orderedListControlLabel",icon:t=>h.jsx(DH,{...t}),isActive:{name:"orderedList"},operation:{name:"toggleOrderedList"}}),f7=At({label:"h1ControlLabel",icon:t=>h.jsx(_H,{...t}),isActive:{name:"heading",attributes:{level:1}},operation:{name:"toggleHeading",attributes:{level:1}}}),h7=At({label:"h2ControlLabel",icon:t=>h.jsx(AH,{...t}),isActive:{name:"heading",attributes:{level:2}},operation:{name:"toggleHeading",attributes:{level:2}}}),p7=At({label:"h3ControlLabel",icon:t=>h.jsx(MH,{...t}),isActive:{name:"heading",attributes:{level:3}},operation:{name:"toggleHeading",attributes:{level:3}}}),m7=At({label:"h4ControlLabel",icon:t=>h.jsx(jH,{...t}),isActive:{name:"heading",attributes:{level:4}},operation:{name:"toggleHeading",attributes:{level:4}}}),g7=At({label:"h5ControlLabel",icon:t=>h.jsx(OH,{...t}),isActive:{name:"heading",attributes:{level:5}},operation:{name:"toggleHeading",attributes:{level:5}}}),v7=At({label:"h6ControlLabel",icon:t=>h.jsx(RH,{...t}),isActive:{name:"heading",attributes:{level:6}},operation:{name:"toggleHeading",attributes:{level:6}}}),y7=At({label:"blockquoteControlLabel",icon:t=>h.jsx(LH,{...t}),isActive:{name:"blockquote"},operation:{name:"toggleBlockquote"}}),b7=At({label:"alignLeftControlLabel",icon:t=>h.jsx(IH,{...t}),operation:{name:"setTextAlign",attributes:"left"}}),x7=At({label:"alignRightControlLabel",icon:t=>h.jsx(PH,{...t}),operation:{name:"setTextAlign",attributes:"right"}}),S7=At({label:"alignCenterControlLabel",icon:t=>h.jsx(BH,{...t}),operation:{name:"setTextAlign",attributes:"center"}}),E7=At({label:"alignJustifyControlLabel",icon:t=>h.jsx(UH,{...t}),operation:{name:"setTextAlign",attributes:"justify"}}),k7=At({label:"subscriptControlLabel",icon:t=>h.jsx(HH,{...t}),isActive:{name:"subscript"},operation:{name:"toggleSubscript"}}),w7=At({label:"superscriptControlLabel",icon:t=>h.jsx(qH,{...t}),isActive:{name:"superscript"},operation:{name:"toggleSuperscript"}}),C7=At({label:"codeControlLabel",icon:t=>h.jsx(sA,{...t}),isActive:{name:"code"},operation:{name:"toggleCode"}}),T7=At({label:"codeBlockControlLabel",icon:t=>h.jsx(sA,{...t}),isActive:{name:"codeBlock"},operation:{name:"toggleCodeBlock"}}),_7=At({label:"highlightControlLabel",icon:t=>h.jsx(FH,{...t}),isActive:{name:"highlight"},operation:{name:"toggleHighlight"}}),A7=At({label:"hrControlLabel",icon:t=>h.jsx(VH,{...t}),operation:{name:"setHorizontalRule"}}),M7=At({label:"unsetColorControlLabel",icon:t=>h.jsx(aA,{...t}),operation:{name:"unsetColor"}}),j7=At({label:"undoControlLabel",icon:t=>h.jsx(JH,{...t}),isDisabled:t=>!t?.can().undo(),operation:{name:"undo"}}),O7=At({label:"redoControlLabel",icon:t=>h.jsx(QH,{...t}),isDisabled:t=>!t?.can().redo(),operation:{name:"redo"}}),R7=At({label:"tasksControlLabel",icon:t=>h.jsx(ZH,{...t}),isActive:{name:"taskList"},operation:{name:"toggleTaskList"}}),N7=At({label:"tasksSinkLabel",icon:t=>h.jsx(e7,{...t}),operation:{name:"sinkListItem",attributes:"taskItem"},isDisabled:t=>!t?.can().sinkListItem("taskItem")}),D7=At({label:"tasksLiftLabel",icon:t=>h.jsx(t7,{...t}),operation:{name:"liftListItem",attributes:"taskItem"},isDisabled:t=>!t?.can().liftListItem("taskItem")}),z7=t=>h.jsx(YH,{...t}),ab=Ca((t,e)=>{const n=zi("RichTextEditorLinkControl",null,t),{classNames:r,className:i,style:s,styles:l,vars:c,icon:d,popoverProps:p,disableTooltips:m,initialExternal:g,...v}=n,b=Pi(),S={classNames:r,styles:l},[k,E]=Wj(""),[w,T]=A.useState(g),[_,{open:R,close:O}]=Cw(!1),D=()=>{R();const re=b.editor?.getAttributes("link");E(re?.href||""),T(re?.href?re?.target==="_blank":g)},I=()=>{O(),E(""),T(g)},H=()=>{I(),k===""?b.editor?.chain().focus().extendMarkRange("link").unsetLink().run():b.editor?.chain().focus().extendMarkRange("link").setLink({href:k,target:w?"_blank":null}).run()},V=re=>{re.key==="Enter"&&(re.preventDefault(),H())};$j("edit-link",D,!1);const{resolvedClassNames:K,resolvedStyles:Q}=Gj({classNames:r,styles:l,props:n});return h.jsxs(Nl,{trapFocus:!0,shadow:"md",withinPortal:!0,opened:_,onChange:re=>!re&&I(),offset:-44,zIndex:1e4,...p,children:[h.jsx(Nl.Target,{children:h.jsx(sb,{icon:d||z7,...v,"aria-label":b.labels.linkControlLabel,title:b.labels.linkControlLabel,onClick:D,active:b.editor?.isActive("link"),ref:e,classNames:K,styles:Q,className:i,style:s,variant:b.variant})}),h.jsx(Nl.Dropdown,{...b.getStyles("linkEditorDropdown",S),children:h.jsxs("div",{...b.getStyles("linkEditor",S),children:[h.jsx($u,{placeholder:b.labels.linkEditorInputPlaceholder,"aria-label":b.labels.linkEditorInputLabel,type:"url",value:k,onChange:E,classNames:{input:b.getStyles("linkEditorInput",S).className},onKeyDown:V,rightSection:h.jsx(Xv,{label:w?b.labels.linkEditorExternalLink:b.labels.linkEditorInternalLink,events:{hover:!0,focus:!0,touch:!0},withinPortal:!0,withArrow:!0,disabled:m,zIndex:1e4,children:h.jsx(ww,{onClick:()=>T(re=>!re),"data-active":w||void 0,...b.getStyles("linkEditorExternalControl",S),children:h.jsx(XH,{style:{width:en(14),height:en(14)}})})})}),h.jsx(ke,{variant:"default",onClick:H,...b.getStyles("linkEditorSave",S),children:b.labels.linkEditorSave})]})})]})});ab.classes=Ma;ab.displayName="@mantine/tiptap/RichTextEditorLinkControl";const lA=A.forwardRef((t,e)=>{const{popoverProps:n,colors:r,colorPickerProps:i,...s}=zi("RichTextEditorColorPickerControl",null,t),{editor:l,labels:c,getStyles:d,variant:p}=Pi(),[m,{toggle:g,close:v}]=Cw(!1),[b,S]=A.useState("palette"),k=l?.getAttributes("textStyle").color||"var(--mantine-color-text)",E=(_,R=!0)=>{(l?.chain()).focus().setColor(_).run(),R&&v()},w=()=>{(l?.chain()).focus().unsetColor().run(),v()},T=r.map((_,R)=>h.jsx(X0,{component:"button",color:_,onClick:()=>E(_),size:26,radius:"xs",style:{cursor:"pointer"},title:c.colorPickerColorLabel(_),"aria-label":c.colorPickerColorLabel(_)},R));return h.jsxs(Nl,{opened:m,withinPortal:!0,trapFocus:!0,onChange:_=>!_&&v(),...n,children:[h.jsx(Nl.Target,{children:h.jsx(Oa,{...s,variant:p,"aria-label":c.colorPickerControlLabel,title:c.colorPickerControlLabel,ref:e,onClick:g,children:h.jsx(X0,{color:k,size:14})})}),h.jsxs(Nl.Dropdown,{...d("linkEditorDropdown"),children:[b==="palette"&&h.jsx(kw,{cols:7,spacing:2,children:T}),b==="colorPicker"&&h.jsx(Kj,{defaultValue:k,onChange:_=>E(_,!1),...i}),h.jsx(Xv.Group,{closeDelay:200,children:h.jsxs(pe,{justify:"flex-end",gap:"xs",mt:"sm",children:[b==="palette"&&h.jsx(qn,{variant:"default",onClick:v,title:c.colorPickerCancel,"aria-label":c.colorPickerCancel,children:h.jsx($H,{style:{width:en(16),height:en(16)}})}),h.jsx(qn,{variant:"default",onClick:w,title:c.colorPickerClear,"aria-label":c.colorPickerClear,children:h.jsx(aA,{style:{width:en(16),height:en(16)}})}),b==="palette"?h.jsx(qn,{variant:"default",onClick:()=>S("colorPicker"),title:c.colorPickerColorPicker,"aria-label":c.colorPickerColorPicker,children:h.jsx(WH,{style:{width:en(16),height:en(16)}})}):h.jsx(qn,{variant:"default",onClick:()=>S("palette"),"aria-label":c.colorPickerPalette,title:c.colorPickerPalette,children:h.jsx(GH,{style:{width:en(16),height:en(16)}})}),b==="colorPicker"&&h.jsx(qn,{variant:"default",onClick:v,title:c.colorPickerSave,"aria-label":c.colorPickerSave,children:h.jsx(KH,{style:{width:en(16),height:en(16)}})})]})})]})]})});lA.displayName="@mantine/tiptap/ColorPickerControl";const cA=A.forwardRef((t,e)=>{const{color:n,...r}=zi("RichTextEditorColorControl",null,t),{editor:i,labels:s,variant:l}=Pi(),c=i?.getAttributes("textStyle").color||null,d=s.colorControlLabel(n);return h.jsx(Oa,{...r,variant:l,active:c===n,"aria-label":d,title:d,onClick:()=>(i?.chain()).focus().setColor(n).run(),ref:e,children:h.jsx(X0,{color:n,size:14})})});cA.displayName="@mantine/tiptap/RichTextEditorColorControl";const L7={},uA=A.forwardRef((t,e)=>{const{...n}=zi("RichTextEditorSourceCodeControl",L7,t),{editor:r,labels:i,variant:s,onSourceCodeTextSwitch:l}=Pi(),[c,d]=A.useState(!1),p=()=>{c?r?.commands.setContent(r.getText(),{emitUpdate:!0}):r?.commands.setContent(`<textarea>${r.getHTML()}</textarea>`);const m=!c;d(m),l?.(m)};return h.jsx(Oa,{...n,variant:s,active:c,"aria-label":i.sourceCodeControlLabel,title:i.sourceCodeControlLabel,onClick:()=>p(),ref:e,children:h.jsx(n7,{style:{width:en(16),height:en(16)}})})});uA.displayName="@mantine/tiptap/RichTextEditorSourceCodeControl";const lb=Ca((t,e)=>{const n=zi("RichTextEditorControlsGroup",null,t),{classNames:r,className:i,style:s,styles:l,vars:c,variant:d,...p}=n,m=Pi();return h.jsx(ne,{ref:e,variant:d||m.variant,...m.getStyles("controlsGroup",{className:i,style:s,styles:l,classNames:r}),...p})});lb.classes=Ma;lb.displayName="@mantine/tiptap/RichTextEditorControlsGroup";const cb=Ca((t,e)=>{const n=zi("RichTextEditorToolbar",null,t),{classNames:r,className:i,style:s,styles:l,vars:c,sticky:d,stickyOffset:p,mod:m,variant:g,...v}=n,b=Pi();return h.jsx(ne,{ref:e,mod:[{sticky:d},m],variant:g||b.variant,...b.getStyles("toolbar",{className:i,style:s,styles:l,classNames:r}),...v,__vars:{"--rte-sticky-offset":en(p)}})});cb.classes=Ma;cb.displayName="@mantine/tiptap/RichTextEditorToolbar";const I7={withCodeHighlightStyles:!0,withTypographyStyles:!0,variant:"default"},Ge=Ca((t,e)=>{const n=zi("RichTextEditor",I7,t),{classNames:r,className:i,style:s,styles:l,unstyled:c,vars:d,editor:p,withCodeHighlightStyles:m,withTypographyStyles:g,onSourceCodeTextSwitch:v,labels:b,children:S,variant:k,attributes:E,...w}=n,T=vw({name:"RichTextEditor",classes:Ma,props:n,className:i,style:s,classNames:r,styles:l,unstyled:c,attributes:E,vars:d}),_=A.useMemo(()=>({...gU,...b}),[b]);return h.jsx(vU,{value:{editor:p,getStyles:T,labels:_,withCodeHighlightStyles:m,withTypographyStyles:g,onSourceCodeTextSwitch:v,unstyled:c,variant:k},children:h.jsx(ne,{...T("root"),...w,ref:e,children:S})})});Ge.classes=Ma;Ge.displayName="@mantine/tiptap/RichTextEditor";Ge.Content=ob;Ge.Control=Oa;Ge.Toolbar=cb;Ge.ControlsGroup=lb;Ge.Bold=i7;Ge.Italic=o7;Ge.Strikethrough=a7;Ge.Underline=s7;Ge.ClearFormatting=l7;Ge.H1=f7;Ge.H2=h7;Ge.H3=p7;Ge.H4=m7;Ge.H5=g7;Ge.H6=v7;Ge.BulletList=u7;Ge.OrderedList=d7;Ge.Link=ab;Ge.Unlink=c7;Ge.Blockquote=y7;Ge.AlignLeft=b7;Ge.AlignRight=x7;Ge.AlignCenter=S7;Ge.AlignJustify=E7;Ge.Superscript=w7;Ge.Subscript=k7;Ge.Code=C7;Ge.CodeBlock=T7;Ge.ColorPicker=lA;Ge.Color=cA;Ge.Highlight=_7;Ge.Hr=A7;Ge.UnsetColor=M7;Ge.Undo=j7;Ge.Redo=O7;Ge.TaskList=R7;Ge.TaskListSink=N7;Ge.TaskListLift=D7;Ge.SourceCode=uA;var ip=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:n,...r}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,r,n]},P7=/^\s*>\s$/,B7=Mr.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return ip("blockquote",{...kn(this.options.HTMLAttributes,t),children:ip("slot",{})})},parseMarkdown:(t,e)=>e.createNode("blockquote",void 0,e.parseChildren(t.tokens||[])),renderMarkdown:(t,e)=>{if(!t.content)return"";const n=">",r=[];return t.content.forEach(i=>{const c=e.renderChildren([i]).split(`
`).map(d=>d.trim()===""?n:`${n} ${d}`);r.push(c.join(`
`))}),r.join(`
${n}
`)},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Kl({find:P7,type:this.type})]}}),U7=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,H7=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,q7=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,F7=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,V7=Aa.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return ip("strong",{...kn(this.options.HTMLAttributes,t),children:ip("slot",{})})},markdownTokenName:"strong",parseMarkdown:(t,e)=>e.applyMark("bold",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`**${e.renderChildren(t)}**`,addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Gl({find:U7,type:this.type}),Gl({find:q7,type:this.type})]},addPasteRules(){return[wa({find:H7,type:this.type}),wa({find:F7,type:this.type})]}}),W7=/(^|[^`])`([^`]+)`(?!`)$/,$7=/(^|[^`])`([^`]+)`(?!`)/g,G7=Aa.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",kn(this.options.HTMLAttributes,t),0]},markdownTokenName:"codespan",parseMarkdown:(t,e)=>e.applyMark("code",[{type:"text",text:t.text||""}]),renderMarkdown:(t,e)=>t.content?`\`${e.renderChildren(t.content)}\``:"",addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Gl({find:W7,type:this.type})]},addPasteRules(){return[wa({find:$7,type:this.type})]}}),F0=4,K7=/^```([a-z]+)?[\s\n]$/,Y7=/^~~~([a-z]+)?[\s\n]$/,X7=Mr.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:F0,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options;if(!n)return null;const s=[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(l=>l.startsWith(n)).map(l=>l.replace(n,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",kn(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(t,e)=>{var n;return((n=t.raw)==null?void 0:n.startsWith("```"))===!1&&t.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:t.lang||null},t.text?[e.createTextNode(t.text)]:[])},renderMarkdown:(t,e)=>{var n;let r="";const i=((n=t.attrs)==null?void 0:n.language)||"";return t.content?r=[`\`\`\`${i}`,e.renderChildren(t.content),"```"].join(`
`):r=`\`\`\`${i}

\`\`\``,r},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:F0,{state:r}=t,{selection:i}=r,{$from:s,empty:l}=i;if(s.parent.type!==this.type)return!1;const c=" ".repeat(n);return l?t.commands.insertContent(c):t.commands.command(({tr:d})=>{const{from:p,to:m}=i,b=r.doc.textBetween(p,m,`
`,`
`).split(`
`).map(S=>c+S).join(`
`);return d.replaceWith(p,m,r.schema.text(b)),!0})},"Shift-Tab":({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:F0,{state:r}=t,{selection:i}=r,{$from:s,empty:l}=i;return s.parent.type!==this.type?!1:l?t.commands.command(({tr:c})=>{var d;const{pos:p}=s,m=s.start(),g=s.end(),b=r.doc.textBetween(m,g,`
`,`
`).split(`
`);let S=0,k=0;const E=p-m;for(let D=0;D<b.length;D+=1){if(k+b[D].length>=E){S=D;break}k+=b[D].length+1}const T=((d=b[S].match(/^ */))==null?void 0:d[0])||"",_=Math.min(T.length,n);if(_===0)return!0;let R=m;for(let D=0;D<S;D+=1)R+=b[D].length+1;return c.delete(R,R+_),p-R<=_&&c.setSelection(Ye.create(c.doc,R)),!0}):t.commands.command(({tr:c})=>{const{from:d,to:p}=i,v=r.doc.textBetween(d,p,`
`,`
`).split(`
`).map(b=>{var S;const k=((S=b.match(/^ */))==null?void 0:S[0])||"",E=Math.min(k.length,n);return b.slice(E)}).join(`
`);return c.replaceWith(d,p,r.schema.text(v)),!0})},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,l=r.parent.textContent.endsWith(`

`);return!s||!l?!1:t.chain().command(({tr:c})=>(c.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:i,empty:s}=n;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const c=i.after();return c===void 0?!1:r.nodeAt(c)?t.commands.command(({tr:p})=>(p.setSelection(at.near(r.resolve(c))),!0)):t.commands.exitCode()}}},addInputRules(){return[zv({find:K7,type:this.type,getAttributes:t=>({language:t[1]})}),zv({find:Y7,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new nn({key:new Cn("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i?.mode;if(!n||!s)return!1;const{tr:l,schema:c}=t.state,d=c.text(n.replace(/\r\n?/g,`
`));return l.replaceSelectionWith(this.type.create({language:s},d)),l.selection.$from.parent.type!==this.type&&l.setSelection(Ye.near(l.doc.resolve(Math.max(0,l.selection.from-2)))),l.setMeta("paste",!0),t.dispatch(l),!0}}})]}}),J7=Mr.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`

`):""}),Q7=Mr.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",kn(this.options.HTMLAttributes,t)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:i,storedMarks:s}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:l}=this.options,{splittableMarks:c}=r.extensionManager,d=s||i.$to.parentOffset&&i.$from.marks();return e().insertContent({type:this.name}).command(({tr:p,dispatch:m})=>{if(m&&d&&l){const g=d.filter(v=>c.includes(v.type.name));p.ensureMarks(g)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),Z7=Mr.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,kn(this.options.HTMLAttributes,e),0]},parseMarkdown:(t,e)=>e.createNode("heading",{level:t.depth||1},e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>{var n;const r=(n=t.attrs)!=null&&n.level?parseInt(t.attrs.level,10):1,i="#".repeat(r);return t.content?`${i} ${e.renderChildren(t.content)}`:""},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>zv({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),e9=Mr.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",kn(this.options.HTMLAttributes,t)]},markdownTokenName:"hr",parseMarkdown:(t,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!IB(e,e.schema.nodes[this.name]))return!1;const{selection:n}=e,{$to:r}=n,i=t();return M_(n)?i.insertContentAt(r.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({state:s,tr:l,dispatch:c})=>{if(c){const{$to:d}=l.selection,p=d.end();if(d.nodeAfter)d.nodeAfter.isTextblock?l.setSelection(Ye.create(l.doc,d.pos+1)):d.nodeAfter.isBlock?l.setSelection(Fe.create(l.doc,d.pos)):l.setSelection(Ye.create(l.doc,d.pos));else{const m=s.schema.nodes[this.options.nextNodeType]||d.parent.type.contentMatch.defaultType,g=m?.create();g&&(l.insert(p,g),l.setSelection(Ye.create(l.doc,p+1)))}l.scrollIntoView()}return!0}).run()}}},addInputRules(){return[LB({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),t9=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,n9=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,r9=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,i9=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,o9=Aa.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",kn(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(t,e)=>e.applyMark("italic",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`*${e.renderChildren(t)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Gl({find:t9,type:this.type}),Gl({find:r9,type:this.type})]},addPasteRules(){return[wa({find:n9,type:this.type}),wa({find:i9,type:this.type})]}}),s9=Object.defineProperty,a9=(t,e)=>{for(var n in e)s9(t,n,{get:e[n],enumerable:!0})},l9="listItem",Xk="textStyle",Jk=/^\s*([-+*])\s$/,dA=Mr.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",kn(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>t.type!=="list"||t.ordered?[]:{type:"bulletList",content:t.items?e.parseChildren(t.items):[]},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(l9,this.editor.getAttributes(Xk)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=Kl({find:Jk,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Kl({find:Jk,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Xk),editor:this.editor})),[t]}}),fA=Mr.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",kn(this.options.HTMLAttributes,t),0]},markdownTokenName:"list_item",parseMarkdown:(t,e)=>{if(t.type!=="list_item")return[];let n=[];if(t.tokens&&t.tokens.length>0)if(t.tokens.some(i=>i.type==="paragraph"))n=e.parseChildren(t.tokens);else{const i=t.tokens[0];if(i&&i.type==="text"&&i.tokens&&i.tokens.length>0){if(n=[{type:"paragraph",content:e.parseInline(i.tokens)}],t.tokens.length>1){const l=t.tokens.slice(1),c=e.parseChildren(l);n.push(...c)}}else n=e.parseChildren(t.tokens)}return n.length===0&&(n=[{type:"paragraph",content:[]}]),{type:"listItem",content:n}},renderMarkdown:(t,e,n)=>Yy(t,e,r=>r.parentType==="bulletList"?"- ":r.parentType==="orderedList"?`${r.index+1}. `:"- ",n),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),c9={};a9(c9,{findListItemPos:()=>ed,getNextListDepth:()=>ub,handleBackspace:()=>$v,handleDelete:()=>Gv,hasListBefore:()=>hA,hasListItemAfter:()=>u9,hasListItemBefore:()=>pA,listItemHasSubList:()=>mA,nextListIsDeeper:()=>gA,nextListIsHigher:()=>vA});var ed=(t,e)=>{const{$from:n}=e.selection,r=En(t,e.schema);let i=null,s=n.depth,l=n.pos,c=null;for(;s>0&&c===null;)i=n.node(s),i.type===r?c=s:(s-=1,l-=1);return c===null?null:{$pos:e.doc.resolve(l),depth:c}},ub=(t,e)=>{const n=ed(t,e);if(!n)return!1;const[,r]=G8(e,t,n.$pos.pos+4);return r},hA=(t,e,n)=>{const{$anchor:r}=t.selection,i=Math.max(0,r.pos-2),s=t.doc.resolve(i).node();return!(!s||!n.includes(s.type.name))},pA=(t,e)=>{var n;const{$anchor:r}=e.selection,i=e.doc.resolve(r.pos-2);return!(i.index()===0||((n=i.nodeBefore)==null?void 0:n.type.name)!==t)},mA=(t,e,n)=>{if(!n)return!1;const r=En(t,e.schema);let i=!1;return n.descendants(s=>{s.type===r&&(i=!0)}),i},$v=(t,e,n)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!_s(t.state,e)&&hA(t.state,e,n)){const{$anchor:c}=t.state.selection,d=t.state.doc.resolve(c.before()-1),p=[];d.node().descendants((v,b)=>{v.type.name===e&&p.push({node:v,pos:b})});const m=p.at(-1);if(!m)return!1;const g=t.state.doc.resolve(d.start()+m.pos+1);return t.chain().cut({from:c.start()-1,to:c.end()+1},g.end()).joinForward().run()}if(!_s(t.state,e)||!J8(t.state))return!1;const r=ed(e,t.state);if(!r)return!1;const s=t.state.doc.resolve(r.$pos.pos-2).node(r.depth),l=mA(e,t.state,s);return pA(e,t.state)&&!l?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},gA=(t,e)=>{const n=ub(t,e),r=ed(t,e);return!r||!n?!1:n>r.depth},vA=(t,e)=>{const n=ub(t,e),r=ed(t,e);return!r||!n?!1:n<r.depth},Gv=(t,e)=>{if(!_s(t.state,e)||!X8(t.state,e))return!1;const{selection:n}=t.state,{$from:r,$to:i}=n;return!n.empty&&r.sameParent(i)?!1:gA(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():vA(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},u9=(t,e)=>{var n;const{$anchor:r}=e.selection,i=e.doc.resolve(r.pos-r.parentOffset-2);return!(i.index()===i.parent.childCount-1||((n=i.nodeAfter)==null?void 0:n.type.name)!==t)},yA=hn.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&Gv(t,n)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&Gv(t,n)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&$v(t,n,r)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&$v(t,n,r)&&(e=!0)}),e}}}}),Qk=/^(\s*)(\d+)\.\s+(.*)$/,d9=/^\s/;function f9(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n],s=i.match(Qk);if(!s)break;const[,l,c,d]=s,p=l.length;let m=d,g=n+1;const v=[i];for(;g<t.length;){const b=t[g];if(b.match(Qk))break;if(b.trim()==="")v.push(b),m+=`
`,g+=1;else if(b.match(d9))v.push(b),m+=`
${b.slice(p+2)}`,g+=1;else break}e.push({indent:p,number:parseInt(c,10),content:m.trim(),raw:v.join(`
`)}),r=g,n=g}return[e,r]}function bA(t,e,n){var r;const i=[];let s=0;for(;s<t.length;){const l=t[s];if(l.indent===e){const c=l.content.split(`
`),d=((r=c[0])==null?void 0:r.trim())||"",p=[];d&&p.push({type:"paragraph",raw:d,tokens:n.inlineTokens(d)});const m=c.slice(1).join(`
`).trim();if(m){const b=n.blockTokens(m);p.push(...b)}let g=s+1;const v=[];for(;g<t.length&&t[g].indent>e;)v.push(t[g]),g+=1;if(v.length>0){const b=Math.min(...v.map(k=>k.indent)),S=bA(v,b,n);p.push({type:"list",ordered:!0,start:v[0].number,items:S,raw:v.map(k=>k.raw).join(`
`)})}i.push({type:"list_item",raw:l.raw,tokens:p}),s=g}else s+=1}return i}function h9(t,e){return t.map(n=>{if(n.type!=="list_item")return e.parseChildren([n])[0];const r=[];return n.tokens&&n.tokens.length>0&&n.tokens.forEach(i=>{if(i.type==="paragraph"||i.type==="list"||i.type==="blockquote"||i.type==="code")r.push(...e.parseChildren([i]));else if(i.type==="text"&&i.tokens){const s=e.parseChildren([i]);r.push({type:"paragraph",content:s})}else{const s=e.parseChildren([i]);s.length>0&&r.push(...s)}}),{type:"listItem",content:r}})}var p9="listItem",Zk="textStyle",ew=/^(\d+)\.\s$/,xA=Mr.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",kn(this.options.HTMLAttributes,n),0]:["ol",kn(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>{if(t.type!=="list"||!t.ordered)return[];const n=t.start||1,r=t.items?h9(t.items,e):[];return n!==1?{type:"orderedList",attrs:{start:n},content:r}:{type:"orderedList",content:r}},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:t=>{const e=t.match(/^(\s*)(\d+)\.\s+/),n=e?.index;return n!==void 0?n:-1},tokenize:(t,e,n)=>{var r;const i=t.split(`
`),[s,l]=f9(i);if(s.length===0)return;const c=bA(s,0,n);return c.length===0?void 0:{type:"list",ordered:!0,start:((r=s[0])==null?void 0:r.number)||1,items:c,raw:i.slice(0,l).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(p9,this.editor.getAttributes(Zk)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=Kl({find:ew,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Kl({find:ew,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(Zk)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),m9=/^\s*(\[([( |x])?\])\s$/,g9=Mr.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",kn(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(t,e)=>{const n=[];if(t.tokens&&t.tokens.length>0?n.push(e.createNode("paragraph",{},e.parseInline(t.tokens))):t.text?n.push(e.createNode("paragraph",{},[e.createNode("text",{text:t.text})])):n.push(e.createNode("paragraph",{},[])),t.nestedTokens&&t.nestedTokens.length>0){const r=e.parseChildren(t.nestedTokens);n.push(...r)}return e.createNode("taskItem",{checked:t.checked||!1},n)},renderMarkdown:(t,e)=>{var n;const i=`- [${(n=t.attrs)!=null&&n.checked?"x":" "}] `;return Yy(t,e,i)},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:n,editor:r})=>{const i=document.createElement("li"),s=document.createElement("label"),l=document.createElement("span"),c=document.createElement("input"),d=document.createElement("div"),p=g=>{var v,b;c.ariaLabel=((b=(v=this.options.a11y)==null?void 0:v.checkboxLabel)==null?void 0:b.call(v,g,c.checked))||`Task item checkbox for ${g.textContent||"empty task item"}`};p(t),s.contentEditable="false",c.type="checkbox",c.addEventListener("mousedown",g=>g.preventDefault()),c.addEventListener("change",g=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){c.checked=!c.checked;return}const{checked:v}=g.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:b})=>{const S=n();if(typeof S!="number")return!1;const k=b.doc.nodeAt(S);return b.setNodeMarkup(S,void 0,{...k?.attrs,checked:v}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,v)||(c.checked=!c.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([g,v])=>{i.setAttribute(g,v)}),i.dataset.checked=t.attrs.checked,c.checked=t.attrs.checked,s.append(c,l),i.append(s,d),Object.entries(e).forEach(([g,v])=>{i.setAttribute(g,v)});let m=new Set(Object.keys(e));return{dom:i,contentDOM:d,update:g=>{if(g.type!==this.type)return!1;i.dataset.checked=g.attrs.checked,c.checked=g.attrs.checked,p(g);const v=r.extensionManager.attributes,b=Fu(g,v),S=new Set(Object.keys(b)),k=this.options.HTMLAttributes;return m.forEach(E=>{S.has(E)||(E in k?i.setAttribute(E,k[E]):i.removeAttribute(E))}),Object.entries(b).forEach(([E,w])=>{w==null?E in k?i.setAttribute(E,k[E]):i.removeAttribute(E):i.setAttribute(E,w)}),m=S,!0}}}},addInputRules(){return[Kl({find:m9,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),v9=Mr.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",kn(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},parseMarkdown:(t,e)=>e.createNode("taskList",{},e.parseChildren(t.items||[])),renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(t){var e;const n=(e=t.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return n!==void 0?n:-1},tokenize(t,e,n){const r=s=>{const l=Lv(s,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:c=>({indentLevel:c[1].length,mainContent:c[4],checked:c[3].toLowerCase()==="x"}),createToken:(c,d)=>({type:"taskItem",raw:"",mainContent:c.mainContent,indentLevel:c.indentLevel,checked:c.checked,text:c.mainContent,tokens:n.inlineTokens(c.mainContent),nestedTokens:d}),customNestedParser:r},n);return l?[{type:"taskList",raw:l.raw,items:l.items}]:n.blockTokens(s)},i=Lv(t,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:s=>({indentLevel:s[1].length,mainContent:s[4],checked:s[3].toLowerCase()==="x"}),createToken:(s,l)=>({type:"taskItem",raw:"",mainContent:s.mainContent,indentLevel:s.indentLevel,checked:s.checked,text:s.mainContent,tokens:n.inlineTokens(s.mainContent),nestedTokens:l}),customNestedParser:r},n);if(i)return{type:"taskList",raw:i.raw,items:i.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});hn.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push(dA.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push(fA.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(yA.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push(xA.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push(g9.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push(v9.configure(this.options.taskList)),t}});var y9=Mr.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",kn(this.options.HTMLAttributes,t),0]},parseMarkdown:(t,e)=>{const n=t.tokens||[];return n.length===1&&n[0].type==="image"?e.parseChildren([n[0]]):e.createNode("paragraph",void 0,e.parseInline(n))},renderMarkdown:(t,e)=>!t||!Array.isArray(t.content)?"":e.renderChildren(t.content),addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),b9=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,x9=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,S9=Aa.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",kn(this.options.HTMLAttributes,t),0]},markdownTokenName:"del",parseMarkdown:(t,e)=>e.applyMark("strike",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`~~${e.renderChildren(t)}~~`,addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Gl({find:b9,type:this.type})]},addPasteRules(){return[wa({find:x9,type:this.type})]}}),E9=Mr.create({name:"text",group:"inline",parseMarkdown:t=>({type:"text",text:t.text||""}),renderMarkdown:t=>t.text||""}),k9=Aa.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",kn(this.options.HTMLAttributes,t),0]},parseMarkdown(t,e){return e.applyMark(this.name||"underline",e.parseInline(t.tokens||[]))},renderMarkdown(t,e){return`++${e.renderChildren(t)}++`},markdownTokenizer:{name:"underline",level:"inline",start(t){return t.indexOf("++")},tokenize(t,e,n){const i=/^(\+\+)([\s\S]+?)(\+\+)/.exec(t);if(!i)return;const s=i[2].trim();return{type:"underline",raw:i[0],text:s,tokens:n.inlineTokens(s)}}},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function w9(t={}){return new nn({view(e){return new C9(e,t)}})}class C9{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=l=>{this[i](l)};return e.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,i=this.editorView.dom,s=i.getBoundingClientRect(),l=s.width/i.offsetWidth,c=s.height/i.offsetHeight;if(n){let g=e.nodeBefore,v=e.nodeAfter;if(g||v){let b=this.editorView.nodeDOM(this.cursorPos-(g?g.nodeSize:0));if(b){let S=b.getBoundingClientRect(),k=g?S.bottom:S.top;g&&v&&(k=(k+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let E=this.width/2*c;r={left:S.left,right:S.right,top:k-E,bottom:k+E}}}}if(!r){let g=this.editorView.coordsAtPos(this.cursorPos),v=this.width/2*l;r={left:g.left-v,right:g.left+v,top:g.top,bottom:g.bottom}}let d=this.editorView.dom.offsetParent;this.element||(this.element=d.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let p,m;if(!d||d==document.body&&getComputedStyle(d).position=="static")p=-pageXOffset,m=-pageYOffset;else{let g=d.getBoundingClientRect(),v=g.width/d.offsetWidth,b=g.height/d.offsetHeight;p=g.left-d.scrollLeft*v,m=g.top-d.scrollTop*b}this.element.style.left=(r.left-p)/l+"px",this.element.style.top=(r.top-m)/c+"px",this.element.style.width=(r.right-r.left)/l+"px",this.element.style.height=(r.bottom-r.top)/c+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,n,e):i;if(n&&!s){let l=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let c=fT(this.editorView.state.doc,l,this.editorView.dragging.slice);c!=null&&(l=c)}this.setCursor(l),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class cn extends at{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return cn.valid(r)?new cn(r):at.near(r)}content(){return Te.empty}eq(e){return e instanceof cn&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new cn(e.resolve(n.pos))}getBookmark(){return new db(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!T9(e)||!_9(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(e.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&cn.valid(e))return e;let i=e.pos,s=null;for(let l=e.depth;;l--){let c=e.node(l);if(n>0?e.indexAfter(l)<c.childCount:e.index(l)>0){s=c.child(n>0?e.indexAfter(l):e.index(l)-1);break}else if(l==0)return null;i+=n;let d=e.doc.resolve(i);if(cn.valid(d))return d}for(;;){let l=n>0?s.firstChild:s.lastChild;if(!l){if(s.isAtom&&!s.isText&&!Fe.isSelectable(s)){e=e.doc.resolve(i+s.nodeSize*n),r=!1;continue e}break}s=l,i+=n;let c=e.doc.resolve(i);if(cn.valid(c))return c}return null}}}cn.prototype.visible=!1;cn.findFrom=cn.findGapCursorFrom;at.jsonID("gapcursor",cn);class db{constructor(e){this.pos=e}map(e){return new db(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return cn.valid(n)?new cn(n):at.near(n)}}function SA(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function T9(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||SA(i.type))return!0;if(i.inlineContent)return!1}}return!0}function _9(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||SA(i.type))return!0;if(i.inlineContent)return!1}}return!0}function A9(){return new nn({props:{decorations:R9,createSelectionBetween(t,e,n){return e.pos==n.pos&&cn.valid(n)?new cn(n):null},handleClick:j9,handleKeyDown:M9,handleDOMEvents:{beforeinput:O9}}})}const M9=h_({ArrowLeft:Hf("horiz",-1),ArrowRight:Hf("horiz",1),ArrowUp:Hf("vert",-1),ArrowDown:Hf("vert",1)});function Hf(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,i,s){let l=r.selection,c=e>0?l.$to:l.$from,d=l.empty;if(l instanceof Ye){if(!s.endOfTextblock(n)||c.depth==0)return!1;d=!1,c=r.doc.resolve(e>0?c.after():c.before())}let p=cn.findGapCursorFrom(c,e,d);return p?(i&&i(r.tr.setSelection(new cn(p))),!0):!1}}function j9(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!cn.valid(r))return!1;let i=t.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&Fe.isSelectable(t.state.doc.nodeAt(i.inside))?!1:(t.dispatch(t.state.tr.setSelection(new cn(r))),!0)}function O9(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof cn))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let i=ce.empty;for(let l=r.length-1;l>=0;l--)i=ce.from(r[l].createAndFill(null,i));let s=t.state.tr.replace(n.pos,n.pos,new Te(i,0,0));return s.setSelection(Ye.near(s.doc.resolve(n.pos+1))),t.dispatch(s),!1}function R9(t){if(!(t.selection instanceof cn))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",tn.create(t.doc,[tr.widget(t.selection.head,e,{key:"gapcursor"})])}var op=200,Nn=function(){};Nn.prototype.append=function(e){return e.length?(e=Nn.from(e),!this.length&&e||e.length<op&&this.leafAppend(e)||this.length<op&&e.leafPrepend(this)||this.appendInner(e)):this};Nn.prototype.prepend=function(e){return e.length?Nn.from(e).append(this):this};Nn.prototype.appendInner=function(e){return new N9(this,e)};Nn.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?Nn.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};Nn.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Nn.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};Nn.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,l){return i.push(e(s,l))},n,r),i};Nn.from=function(e){return e instanceof Nn?e:e&&e.length?new EA(e):Nn.empty};var EA=(function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new e(this.values.slice(i,s))},e.prototype.getInner=function(i){return this.values[i]},e.prototype.forEachInner=function(i,s,l,c){for(var d=s;d<l;d++)if(i(this.values[d],c+d)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,l,c){for(var d=s-1;d>=l;d--)if(i(this.values[d],c+d)===!1)return!1},e.prototype.leafAppend=function(i){if(this.length+i.length<=op)return new e(this.values.concat(i.flatten()))},e.prototype.leafPrepend=function(i){if(this.length+i.length<=op)return new e(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e})(Nn);Nn.empty=new EA([]);var N9=(function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,i,s,l){var c=this.left.length;if(i<c&&this.left.forEachInner(r,i,Math.min(s,c),l)===!1||s>c&&this.right.forEachInner(r,Math.max(i-c,0),Math.min(this.length,s)-c,l+c)===!1)return!1},e.prototype.forEachInvertedInner=function(r,i,s,l){var c=this.left.length;if(i>c&&this.right.forEachInvertedInner(r,i-c,Math.max(s,c)-c,l+c)===!1||s<c&&this.left.forEachInvertedInner(r,Math.min(i,c),s,l)===!1)return!1},e.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},e.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new e(this.left,i)},e.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new e(i,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e})(Nn);const D9=500;class ci{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;n&&(i=this.remapping(r,this.items.length),s=i.maps.length);let l=e.tr,c,d,p=[],m=[];return this.items.forEach((g,v)=>{if(!g.step){i||(i=this.remapping(r,v+1),s=i.maps.length),s--,m.push(g);return}if(i){m.push(new _i(g.map));let b=g.step.map(i.slice(s)),S;b&&l.maybeStep(b).doc&&(S=l.mapping.maps[l.mapping.maps.length-1],p.push(new _i(S,void 0,void 0,p.length+m.length))),s--,S&&i.appendMap(S,s)}else l.maybeStep(g.step);if(g.selection)return c=i?g.selection.map(i.slice(s)):g.selection,d=new ci(this.items.slice(0,r).append(m.reverse().concat(p)),this.eventCount-1),!1},this.items.length,0),{remaining:d,transform:l,selection:c}}addTransform(e,n,r,i){let s=[],l=this.eventCount,c=this.items,d=!i&&c.length?c.get(c.length-1):null;for(let m=0;m<e.steps.length;m++){let g=e.steps[m].invert(e.docs[m]),v=new _i(e.mapping.maps[m],g,n),b;(b=d&&d.merge(v))&&(v=b,m?s.pop():c=c.slice(0,c.length-1)),s.push(v),n&&(l++,n=void 0),i||(d=v)}let p=l-r.depth;return p>L9&&(c=z9(c,p),l-=p),new ci(c.append(s),l)}remapping(e,n){let r=new Iu;return this.items.forEach((i,s)=>{let l=i.mirrorOffset!=null&&s-i.mirrorOffset>=e?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,l)},e,n),r}addMaps(e){return this.eventCount==0?this:new ci(this.items.append(e.map(n=>new _i(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),s=e.mapping,l=e.steps.length,c=this.eventCount;this.items.forEach(v=>{v.selection&&c--},i);let d=n;this.items.forEach(v=>{let b=s.getMirror(--d);if(b==null)return;l=Math.min(l,b);let S=s.maps[b];if(v.step){let k=e.steps[b].invert(e.docs[b]),E=v.selection&&v.selection.map(s.slice(d+1,b));E&&c++,r.push(new _i(S,k,E))}else r.push(new _i(S))},i);let p=[];for(let v=n;v<l;v++)p.push(new _i(s.maps[v]));let m=this.items.slice(0,i).append(p).append(r),g=new ci(m,c);return g.emptyItemCount()>D9&&(g=g.compress(this.items.length-r.length)),g}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,i=[],s=0;return this.items.forEach((l,c)=>{if(c>=e)i.push(l),l.selection&&s++;else if(l.step){let d=l.step.map(n.slice(r)),p=d&&d.getMap();if(r--,p&&n.appendMap(p,r),d){let m=l.selection&&l.selection.map(n.slice(r));m&&s++;let g=new _i(p.invert(),d,m),v,b=i.length-1;(v=i.length&&i[b].merge(g))?i[b]=v:i.push(g)}}else l.map&&r--},this.items.length,0),new ci(Nn.from(i.reverse()),s)}}ci.empty=new ci(Nn.empty,0);function z9(t,e){let n;return t.forEach((r,i)=>{if(r.selection&&e--==0)return n=i,!1}),t.slice(n)}class _i{constructor(e,n,r,i){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=i}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new _i(n.getMap().invert(),n,this.selection)}}}class cs{constructor(e,n,r,i,s){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const L9=20;function I9(t,e,n,r){let i=n.getMeta(ya),s;if(i)return i.historyState;n.getMeta(U9)&&(t=new cs(t.done,t.undone,null,0,-1));let l=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(l&&l.getMeta(ya))return l.getMeta(ya).redo?new cs(t.done.addTransform(n,void 0,r,th(e)),t.undone,tw(n.mapping.maps),t.prevTime,t.prevComposition):new cs(t.done,t.undone.addTransform(n,void 0,r,th(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(l&&l.getMeta("addToHistory")===!1)){let c=n.getMeta("composition"),d=t.prevTime==0||!l&&t.prevComposition!=c&&(t.prevTime<(n.time||0)-r.newGroupDelay||!P9(n,t.prevRanges)),p=l?V0(t.prevRanges,n.mapping):tw(n.mapping.maps);return new cs(t.done.addTransform(n,d?e.selection.getBookmark():void 0,r,th(e)),ci.empty,p,n.time,c??t.prevComposition)}else return(s=n.getMeta("rebased"))?new cs(t.done.rebased(n,s),t.undone.rebased(n,s),V0(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new cs(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),V0(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function P9(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&i>=e[s]&&(n=!0)}),n}function tw(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,i,s,l)=>e.push(s,l));return e}function V0(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let i=e.map(t[r],1),s=e.map(t[r+1],-1);i<=s&&n.push(i,s)}return n}function B9(t,e,n){let r=th(e),i=ya.get(e).spec.config,s=(n?t.undone:t.done).popEvent(e,r);if(!s)return null;let l=s.selection.resolve(s.transform.doc),c=(n?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),i,r),d=new cs(n?c:s.remaining,n?s.remaining:c,null,0,-1);return s.transform.setSelection(l).setMeta(ya,{redo:n,historyState:d})}let W0=!1,nw=null;function th(t){let e=t.plugins;if(nw!=e){W0=!1,nw=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){W0=!0;break}}return W0}const ya=new Cn("history"),U9=new Cn("closeHistory");function H9(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new nn({key:ya,state:{init(){return new cs(ci.empty,ci.empty,null,0,-1)},apply(e,n,r){return I9(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,i=r=="historyUndo"?wA:r=="historyRedo"?CA:null;return!i||!e.editable?!1:(n.preventDefault(),i(e.state,e.dispatch))}}}})}function kA(t,e){return(n,r)=>{let i=ya.getState(n);if(!i||(t?i.undone:i.done).eventCount==0)return!1;if(r){let s=B9(i,n,t);s&&r(e?s.scrollIntoView():s)}return!0}}const wA=kA(!1,!0),CA=kA(!0,!0);hn.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=t?.node||this.editor.state.doc;if((t?.mode||this.options.mode)==="textSize"){const r=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(r)}return e.nodeSize},this.storage.words=t=>{const e=t?.node||this.editor.state.doc,n=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let t=!1;return[new nn({key:new Cn("characterCount"),appendTransaction:(e,n,r)=>{if(t)return;const i=this.options.limit;if(i==null||i===0){t=!0;return}const s=this.storage.characters({node:r.doc});if(s>i){const l=s-i,c=0,d=l;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const p=r.tr.deleteRange(c,d);return t=!0,p}t=!0},filterTransaction:(e,n)=>{const r=this.options.limit;if(!e.docChanged||r===0||r===null||r===void 0)return!0;const i=this.storage.characters({node:n.doc}),s=this.storage.characters({node:e.doc});if(s<=r||i>r&&s>r&&s<=i)return!0;if(i>r&&s>r&&s>i||!e.getMeta("paste"))return!1;const c=e.selection.$head.pos,d=s-r,p=c-d,m=c;return e.deleteRange(p,m),!(this.storage.characters({node:e.doc})>r)}})]}});var q9=hn.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[w9(this.options)]}});hn.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new nn({key:new Cn("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:i}=e,s=[];if(!n||!r)return tn.create(t,[]);let l=0;this.options.mode==="deepest"&&t.descendants((d,p)=>{if(d.isText)return;if(!(i>=p&&i<=p+d.nodeSize-1))return!1;l+=1});let c=0;return t.descendants((d,p)=>{if(d.isText||!(i>=p&&i<=p+d.nodeSize-1))return!1;if(c+=1,this.options.mode==="deepest"&&l-c>0||this.options.mode==="shallowest"&&c>1)return this.options.mode==="deepest";s.push(tr.node(p,p+d.nodeSize,{class:this.options.className}))}),tn.create(t,s)}}})]}});var F9=hn.create({name:"gapCursor",addProseMirrorPlugins(){return[A9()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=Ot(Be(t,"allowGapCursor",n)))!=null?e:null}}});hn.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new nn({key:new Cn("placeholder"),props:{decorations:({doc:t,selection:e})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,i=[];if(!n)return null;const s=this.editor.isEmpty;return t.descendants((l,c)=>{const d=r>=c&&r<=c+l.nodeSize,p=!l.isLeaf&&Mp(l);if((d||!this.options.showOnlyCurrent)&&p){const m=[this.options.emptyNodeClass];s&&m.push(this.options.emptyEditorClass);const g=tr.node(c,c+l.nodeSize,{class:m.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:l,pos:c,hasAnchor:d}):this.options.placeholder});i.push(g)}return this.options.includeChildren}),tn.create(t,i)}}})]}});hn.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new nn({key:new Cn("selection"),props:{decorations(n){return n.selection.empty||t.isFocused||!t.isEditable||M_(n.selection)||t.view.dragging?null:tn.create(n.doc,[tr.inline(n.selection.from,n.selection.to,{class:e.className})])}}})]}});function rw({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||e?.type===t}var V9=hn.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var t;const e=new Cn(this.name),n=this.options.node||((t=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:t.name)||"paragraph",r=Object.entries(this.editor.schema.nodes).map(([,i])=>i).filter(i=>(this.options.notAfter||[]).concat(n).includes(i.name));return[new nn({key:e,appendTransaction:(i,s,l)=>{const{doc:c,tr:d,schema:p}=l,m=e.getState(l),g=c.content.size,v=p.nodes[n];if(m)return d.insert(g,v.create())},state:{init:(i,s)=>{const l=s.tr.doc.lastChild;return!rw({node:l,types:r})},apply:(i,s)=>{if(!i.docChanged||i.getMeta("__uniqueIDTransaction"))return s;const l=i.doc.lastChild;return!rw({node:l,types:r})}}})]}}),W9=hn.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>wA(t,e),redo:()=>({state:t,dispatch:e})=>CA(t,e)}},addProseMirrorPlugins(){return[H9(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),$9=hn.create({name:"starterKit",addExtensions(){var t,e,n,r;const i=[];return this.options.bold!==!1&&i.push(V7.configure(this.options.bold)),this.options.blockquote!==!1&&i.push(B7.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(dA.configure(this.options.bulletList)),this.options.code!==!1&&i.push(G7.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(X7.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(J7.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(q9.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push(F9.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(Q7.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push(Z7.configure(this.options.heading)),this.options.undoRedo!==!1&&i.push(W9.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&i.push(e9.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push(o9.configure(this.options.italic)),this.options.listItem!==!1&&i.push(fA.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push(yA.configure((t=this.options)==null?void 0:t.listKeymap)),this.options.link!==!1&&i.push(mU.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&i.push(xA.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(y9.configure(this.options.paragraph)),this.options.strike!==!1&&i.push(S9.configure(this.options.strike)),this.options.text!==!1&&i.push(E9.configure(this.options.text)),this.options.underline!==!1&&i.push(k9.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&i.push(V9.configure((r=this.options)==null?void 0:r.trailingNode)),i}}),G9=$9;const K9={name:"",description:"",is_world:!1,ai_prompt:"",greeting:"",tags:[],is_public:!0,photo:null,appearance:""},xt={name:{min:1,max:100},description:{min:30,max:500},ai_prompt:{min:30,max:1e3},greeting:{min:30,max:1e3},appearance:{min:30,max:1e3},tags:{maxCount:5}};async function Y9(t){const e=new FormData;return e.append("name",t.name.trim()),e.append("description",t.description.trim()),e.append("is_world",String(t.is_world)),e.append("ai_prompt",t.ai_prompt.trim()),e.append("greeting",t.greeting.trim()),e.append("is_public",String(t.is_public)),e.append("appearance",t.appearance.trim()),t.tags.length>0&&t.tags.forEach(n=>e.append("tags",n)),t.photo&&e.append("photo",t.photo),FO("/v1/create",e)}const qf=7,sp="create_character_draft",X9=300*1e3,iw="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;600;700&display=swap",er={input:{input:{backgroundColor:"rgb(41, 41, 41)",color:"white",borderColor:"rgb(55, 55, 55)"},label:{color:"white",fontSize:"15px"}},card:{backgroundColor:"rgb(41, 41, 41)"},tipCard:{backgroundColor:"rgb(35, 30, 45)",border:"1px solid rgb(88, 70, 120)",boxShadow:"0 2px 8px rgba(139, 92, 246, 0.15)"},modal:{content:{backgroundColor:"rgb(28, 28, 28)"},header:{backgroundColor:"rgb(28, 28, 28)",color:"white"},body:{backgroundColor:"rgb(28, 28, 28)"},title:{color:"white",fontWeight:600},close:{color:"white"}}};function td({children:t}){return h.jsx($n,{padding:"md",radius:"md",style:er.tipCard,children:h.jsxs(z,{size:"sm",c:"rgb(200, 180, 230)",children:[" ",h.jsx("b",{style:{color:"rgb(180, 140, 255)"},children:":"})," ",t]})})}function Ra({children:t}){return h.jsx(z,{size:"1.5rem",fw:700,c:"white",children:t})}function Zl({children:t}){return h.jsx(z,{size:"md",c:"rgb(180, 180, 180)",children:t})}function ap({label:t,placeholder:e,value:n,onChange:r,error:i,maxLength:s,minLength:l,minRows:c,multiline:d}){const p=d?Pl:$u,m=fs(n).length,g=l&&m<l&&m>0,v=l?`${m}/${s}  (. ${l})`:`${fs(n).length}/${s} `;return h.jsx(p,{label:t,placeholder:e,value:n,onChange:b=>r(b.target.value),error:i,maxLength:s,description:v,...d&&{minRows:c,autosize:!0},styles:{...er.input,description:{color:g?"rgb(250, 128, 114)":"rgb(160, 160, 160)"}}})}function fs(t){return t.trim().replace(/\s+/g," ")}const J9={1:t=>{const e={},n=fs(t.name),r=fs(t.description);return n?n.length<xt.name.min?e.name=` ${xt.name.min} `:n.length>xt.name.max&&(e.name=` ${xt.name.max} `):e.name=" ",r?r.length<xt.description.min?e.description=` ${xt.description.min} `:r.length>xt.description.max&&(e.description=` ${xt.description.max} `):e.description=" ",e},2:t=>{const e=t.appearance||"",n=fs(e);return e.length>0&&n.length===0?{appearance:" ,    "}:n&&n.length<xt.appearance.min?{appearance:` ${xt.appearance.min} `}:n.length>xt.appearance.max?{appearance:` ${xt.appearance.max} `}:{}},3:t=>{const e=fs(t.ai_prompt);return e?e.length<xt.ai_prompt.min?{ai_prompt:` ${xt.ai_prompt.min} `}:e.length>xt.ai_prompt.max?{ai_prompt:` ${xt.ai_prompt.max} `}:{}:{ai_prompt:" "}},4:t=>{const e=fs(t.greeting);return e?e.length<xt.greeting.min?{greeting:` ${xt.greeting.min} `}:e.length>xt.greeting.max?{greeting:` ${xt.greeting.max} `}:{}:{greeting:" "}},5:()=>({}),6:t=>t.photo?{}:{photo:" "}};function Q9(t,e){const{photo:n,...r}=t,i={form:r,step:e,timestamp:Date.now()};try{localStorage.setItem(sp,JSON.stringify(i))}catch(s){console.error("Failed to save draft:",s)}}function Z9(){try{const t=localStorage.getItem(sp);if(!t)return null;const e=JSON.parse(t);return Date.now()-e.timestamp>X9?(localStorage.removeItem(sp),null):{form:e.form,step:e.step}}catch(t){return console.error("Failed to load draft:",t),null}}function eq(){localStorage.removeItem(sp)}function tq(){const t=Li(),[e,n]=A.useState(0),[r,i]=A.useState(K9),[s,l]=A.useState({}),[c,d]=A.useState(!1),[p,m]=A.useState(null),[g,v]=A.useState([]),[b,S]=A.useState(!1),[k,E]=A.useState(!1),[w,T]=A.useState(!1),[_,R]=A.useState("left"),[O,D]=A.useState(!1),I=A.useMemo(()=>r.is_world?"":"",[r.is_world]),H=A.useMemo(()=>r.is_world?"":"",[r.is_world]);A.useEffect(()=>{if(!document.querySelector(`link[href="${iw}"]`)){const Se=document.createElement("link");Se.href=iw,Se.rel="stylesheet",document.head.appendChild(Se)}},[]),A.useEffect(()=>{const Se=Z9();Se&&(i(ge=>({...ge,...Se.form})),n(Se.step),D(!0))},[]),A.useEffect(()=>{(O||r.name||r.description||r.ai_prompt||r.greeting)&&Q9(r,e)},[r,e,O]),A.useEffect(()=>{(async()=>{S(!0);try{const ge=await st("/v1/characters/tags");ge&&Array.isArray(ge.tags)&&v(ge.tags)}catch(ge){console.error("   :",ge)}finally{S(!1)}})()},[]);const V=A.useCallback((Se,ge)=>{i(he=>({...he,[Se]:ge})),l(he=>({...he,[Se]:void 0}))},[]),K=A.useCallback(()=>{const Se=J9[e];if(!Se)return!0;const ge=Se(r);return l(ge),Object.keys(ge).length===0},[e,r]),Q=A.useCallback((Se,ge)=>{R(Se),T(!0),setTimeout(()=>{ge(),setTimeout(()=>{T(!1)},50)},150)},[]),re=A.useCallback(()=>{(e===0||K())&&Q("left",()=>{n(Se=>Math.min(Se+1,qf-1))})},[e,K,Q]),Re=A.useCallback(()=>{Q("right",()=>{n(Se=>Math.max(Se-1,0))})},[Q]),ye=A.useCallback(Se=>{i(ge=>ge.tags.includes(Se)?{...ge,tags:ge.tags.filter(he=>he!==Se)}:ge.tags.length>=xt.tags.maxCount?ge:{...ge,tags:[...ge.tags,Se]})},[]),me=A.useCallback(Se=>{i(ge=>({...ge,tags:ge.tags.filter(he=>he!==Se)}))},[]),q=A.useCallback(async()=>{if(K()){d(!0),m(null);try{const Se={...r,tags:[r.tags.join(", ")]};await Y9(Se),eq(),r.is_public?Gt.show({title:`${r.is_world?"":""}  !`,message:"    Telegram-",color:"teal",icon:h.jsx(Xr,{size:18}),autoClose:5e3,withCloseButton:!0,withBorder:!0,styles:{root:{backgroundColor:"rgb(20, 83, 45)",borderColor:"rgb(34, 197, 94)"},title:{color:"white",fontWeight:600},description:{color:"rgb(187, 247, 208)"},closeButton:{color:"white","&:hover":{backgroundColor:"rgb(22, 101, 52)"}}}}):Gt.show({title:`${r.is_world?"":""}  !`,message:"    ",color:"teal",icon:h.jsx(Xr,{size:18}),autoClose:5e3,withCloseButton:!0,withBorder:!0,styles:{root:{backgroundColor:"rgb(20, 83, 45)",borderColor:"rgb(34, 197, 94)"},title:{color:"white",fontWeight:600},description:{color:"rgb(187, 247, 208)"},closeButton:{color:"white","&:hover":{backgroundColor:"rgb(22, 101, 52)"}}}}),t("/?filter=created")}catch(Se){console.error("Create character error:",Se);let ge=", -    ";if(Se instanceof Error){const he=Se.message.toLowerCase();he.includes("401")||he.includes("unauthorized")||he.includes("403")||he.includes("forbidden")?ge=`, -    
      WebApp`:he.includes("413")||he.includes("too large")?ge=`, -    
   `:he.includes("422")||he.includes("validation")?ge=`, -    
   `:he.includes("429")||he.includes("rate limit")?ge=`, -    
  ,  `:he.includes("500")||he.includes("server error")?ge=`, -    
  ,  `:(he.includes("network")||he.includes("fetch"))&&(ge=`, -    
   `)}m(ge),Gt.show({title:" ",message:ge,color:"red",icon:h.jsx(ih,{size:18}),autoClose:7e3,withCloseButton:!0,withBorder:!0,styles:{root:{backgroundColor:"rgb(127, 29, 29)",borderColor:"rgb(239, 68, 68)"},title:{color:"white",fontWeight:600},description:{color:"rgb(254, 202, 202)"},closeButton:{color:"white","&:hover":{backgroundColor:"rgb(153, 27, 27)"}}}})}finally{d(!1)}}},[r,K,t]),te=(e+1)/qf*100,ue=e===qf-1,Ce={form:r,errors:s,updateField:V,entityName:I,entityNameGen:H},ae={transition:"all 0.15s ease-out",opacity:w?0:1,transform:w?`translateX(${_==="left"?"-20px":"20px"})`:"translateX(0)"};return h.jsxs(ne,{style:{backgroundColor:"rgb(18, 18, 18)",minHeight:"100vh",fontFamily:"'Roboto', sans-serif"},children:[h.jsx(Ms,{}),h.jsx(ne,{p:"md",children:h.jsxs(oe,{gap:"md",children:[h.jsxs(ne,{children:[h.jsxs(pe,{justify:"space-between",mb:4,children:[h.jsxs(z,{size:"sm",c:"rgb(160, 160, 160)",children:[" ",e+1,"  ",qf]}),h.jsxs(z,{size:"sm",c:"rgb(160, 160, 160)",children:[Math.round(te),"%"]})]}),h.jsx(Ff,{value:te,color:"violet",size:"sm",radius:"xl"})]}),h.jsxs(ne,{style:ae,children:[e===0&&h.jsx(nq,{...Ce}),e===1&&h.jsx(rq,{...Ce}),e===2&&h.jsx(iq,{...Ce}),e===3&&h.jsx(oq,{...Ce}),e===4&&h.jsx(sq,{...Ce}),e===5&&h.jsx(aq,{...Ce,availableTags:g,loadingTags:b,tagsModalOpened:k,setTagsModalOpened:E,onToggleTag:ye,onRemoveTag:me}),e===6&&h.jsx(cq,{...Ce})]}),p&&h.jsx(Nu,{color:"red",variant:"light",icon:h.jsx(ih,{size:16}),children:p}),h.jsxs(pe,{justify:e===0?"flex-end":"space-between",mt:"md",children:[e!==0&&h.jsx(ke,{variant:"subtle",color:"gray",onClick:Re,disabled:c||w,styles:{root:{transition:"none",backgroundColor:"transparent",border:"none",outline:"none",boxShadow:"none","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.1)"},"&:disabled":{backgroundColor:"transparent"},"&:focus":{outline:"none",boxShadow:"none"},"&:focus-visible":{outline:"none",boxShadow:"none"}}},children:" "}),ue?h.jsx(ke,{color:"violet",onClick:q,loading:c,disabled:c,children:c?"...":""}):h.jsx(ke,{color:"violet",onClick:re,disabled:w,children:" "})]})]})})]})}function nq({form:t,updateField:e}){const n=[{isWorld:!1,icon:"",title:"",desc:"AI-   ",disabled:!1},{isWorld:!0,icon:"",title:"",desc:"   ",disabled:!0}],r=t.is_world?`   
    
    `:`     
    
    `;return h.jsxs(oe,{gap:"lg",children:[h.jsx(Ra,{children:"   ?"}),h.jsx(Zl,{children:"   .    AI-    .      ,      ."}),h.jsx(pe,{gap:"md",grow:!0,style:{alignItems:"stretch"},children:n.map(({isWorld:i,icon:s,title:l,desc:c,disabled:d})=>{const p=t.is_world===i;return h.jsxs(ne,{style:{position:"relative"},children:[h.jsx($n,{padding:"lg",radius:"md",style:{backgroundColor:p?"rgb(88, 28, 135)":"rgb(41, 41, 41)",cursor:d?"not-allowed":"pointer",border:p?"2px solid rgb(139, 92, 246)":"2px solid transparent",minHeight:"160px",display:"flex",flexDirection:"column",justifyContent:"center",opacity:d?.5:1,filter:d?"grayscale(0.5)":"none"},onClick:()=>!d&&e("is_world",i),children:h.jsxs(oe,{align:"center",gap:"xs",children:[h.jsx(z,{size:"2.5rem",children:s}),h.jsx(z,{fw:700,c:"white",size:"lg",children:l}),h.jsx(z,{size:"sm",c:"rgb(180, 180, 180)",ta:"center",children:c})]})}),d&&h.jsx(Ut,{size:"lg",variant:"filled",style:{position:"absolute",top:"10px",right:"10px",background:"linear-gradient(135deg, rgb(234, 179, 8) 0%, rgb(245, 158, 11) 100%)",color:"black",fontWeight:600,padding:"8px 12px",boxShadow:"0 2px 8px rgba(234, 179, 8, 0.4)"},children:"  "})]},l)})}),h.jsxs($n,{padding:"md",radius:"md",style:er.card,children:[h.jsx(z,{size:"md",c:"white",fw:600,mb:"xs",children:t.is_world?"     :":"     :"}),h.jsx(z,{size:"md",c:"rgb(180, 180, 180)",style:{whiteSpace:"pre-line"},children:r})]})]})}function rq({form:t,errors:e,updateField:n,entityNameGen:r}){return h.jsxs(oe,{gap:"md",children:[h.jsx(Ra,{children:" "}),h.jsxs(ne,{children:[h.jsx($n,{padding:"sm",radius:"md",style:{...er.tipCard,marginBottom:"8px"},children:h.jsxs(z,{size:"sm",c:"rgb(200, 180, 230)",children:[h.jsx("b",{style:{color:"rgb(180, 140, 255)"},children:":"}),"             ",r,"  ."]})}),h.jsx(ap,{label:` ${r}`,placeholder:t.is_world?":   2084":": ",value:t.name,onChange:i=>n("name",i),error:e.name,maxLength:xt.name.max,minLength:xt.name.min})]}),h.jsxs(ne,{children:[h.jsx($n,{padding:"sm",radius:"md",style:{...er.tipCard,marginBottom:"8px"},children:h.jsxs(z,{size:"sm",c:"rgb(200, 180, 230)",children:[h.jsx("b",{style:{color:"rgb(180, 140, 255)"},children:":"}),"     (     //)   /  ."]})}),h.jsx(ap,{label:" ",placeholder:t.is_world?"  : , , ...":"  ?  ?  ?",value:t.description,onChange:i=>n("description",i),error:e.description,maxLength:xt.description.max,minLength:xt.description.min,multiline:!0,minRows:4})]}),h.jsxs(td,{children:["   .   ,      ",r,"."]})]})}function iq({form:t,errors:e,updateField:n,entityNameGen:r}){return h.jsxs(oe,{gap:"md",children:[h.jsx(Ra,{children:" "}),h.jsxs(Zl,{children:["     ",r,".   AI        ."]}),h.jsxs($n,{padding:"sm",radius:"md",style:{...er.tipCard,marginBottom:"8px"},children:[h.jsx(z,{size:"sm",c:"rgb(200, 180, 230)",mb:"xs",children:h.jsx("b",{style:{color:"rgb(180, 140, 255)"},children:"   ( ):"})}),h.jsxs(oe,{gap:6,children:[h.jsxs(z,{size:"sm",c:"rgb(200, 180, 230)",children:["1. ",h.jsx("b",{children:":"})," ,     .       ."]}),h.jsxs(z,{size:"sm",c:"rgb(200, 180, 230)",children:["2. ",h.jsx("b",{children:":"}),"    (, )    ."]}),h.jsxs(z,{size:"sm",c:"rgb(200, 180, 230)",children:["3. ",h.jsx("b",{children:":"}),"   ,    (: ",h.jsx("i",{children:" , ,  "}),")."]})]})]}),h.jsx(ap,{label:"  ",placeholder:" ,    ...",value:t.appearance||"",onChange:i=>n("appearance",i),error:e.appearance,maxLength:xt.appearance.max,minLength:xt.appearance.min,multiline:!0,minRows:5})]})}function oq({form:t,errors:e,updateField:n,entityName:r}){const i=Li(),[s,l]=A.useState(!1),[c,d]=A.useState(!1),[p,m]=A.useState(""),[g,v]=A.useState(""),[b,S]=A.useState(null),[k,E]=A.useState(!1),[w,T]=A.useState(!1),_=A.useCallback(()=>{if(!t.ai_prompt.trim()){Gt.show({title:" ",message:"  ,   ",color:"yellow"});return}m(t.ai_prompt),v(""),S(null),E(!1),T(!1),l(!0)},[t.ai_prompt]),R=A.useCallback(async()=>{if(p.trim()){if(p.length>1e3){S("   ( 1000 )");return}d(!0),S(null),v(""),E(!1),T(!1);try{const I=await st("/v1/prompt/improve-prompt",{method:"POST",body:JSON.stringify({prompt:p})});I&&I.improved_prompt?v(I.improved_prompt):S("    ")}catch(I){console.error("Improve Prompt API Error:",I);const H=I.message||"";H.includes("403")?E(!0):H.includes("429")?T(!0):H.includes("422")?S(" .     "):H.includes("404")?S("  "):H.includes("500")?S(" .  "):S(" .  ")}finally{d(!1)}}},[p]),O=A.useCallback(()=>{g&&(n("ai_prompt",g),l(!1),Gt.show({title:" ",message:"    ",color:"teal",icon:h.jsx(Xr,{size:18})}))},[g,n]),D=A.useCallback(()=>{i("/tariffs")},[i]);return h.jsxs(oe,{gap:"md",children:[h.jsx(Ra,{children:"  AI"}),h.jsxs(Zl,{children:[",     ",r,".     AI,    ."]}),h.jsxs(ne,{children:[h.jsxs($n,{padding:"sm",radius:"md",style:{...er.tipCard,marginBottom:"8px"},children:[h.jsx(z,{size:"sm",c:"rgb(200, 180, 230)",mb:"xs",children:h.jsx("b",{style:{color:"rgb(180, 140, 255)"},children:"  ( ):"})}),h.jsxs(oe,{gap:4,children:[h.jsxs(z,{size:"sm",c:"rgb(200, 180, 230)",children:["1. ",h.jsx("b",{children:":"})," ,     ( , , )   ."]}),h.jsxs(z,{size:"sm",c:"rgb(200, 180, 230)",children:["2. ",h.jsx("b",{children:":"}),"   ,  (/)   ."]}),h.jsxs(z,{size:"sm",c:"rgb(200, 180, 230)",children:["3. ",h.jsx("b",{children:":"}),"   ,   ."]}),h.jsxs(z,{size:"sm",c:"rgb(200, 180, 230)",children:["4. ",h.jsx("b",{children:":"})," , .  NSFW      ."]})]})]}),h.jsxs(ne,{children:[h.jsx(ap,{label:"AI ",placeholder:"",value:t.ai_prompt,onChange:I=>n("ai_prompt",I),error:e.ai_prompt,maxLength:xt.ai_prompt.max,minLength:xt.ai_prompt.min,multiline:!0,minRows:6}),h.jsx(pe,{justify:"flex-end",mt:8,children:h.jsx(Xv,{label:"    AI",position:"left",children:h.jsx(ke,{variant:"filled",size:"xs",onClick:_,style:{background:"linear-gradient(135deg, rgb(139, 92, 246) 0%, rgb(236, 72, 153) 100%)",border:"none"},leftSection:h.jsx(i2,{size:14}),children:""})})})]})]}),h.jsxs(td,{children:["  ,   AI  ",t.is_world?" ":" ",".   , , ."]}),h.jsx(Gr,{opened:s,onClose:()=>l(!1),title:"  ",closeOnClickOutside:!c,centered:!0,size:"lg",styles:er.modal,children:h.jsxs(oe,{gap:"md",children:[!k&&!g&&h.jsx($n,{padding:"md",radius:"md",style:{backgroundColor:"rgb(35, 30, 45)",border:"1px solid rgb(88, 70, 120)"},children:h.jsx(z,{size:"sm",c:"rgb(200, 180, 230)",children:"AI        :   ,  ,     ,     ."})}),!k&&h.jsxs(h.Fragment,{children:[h.jsxs(ne,{children:[h.jsx(z,{size:"sm",c:"white",fw:500,mb:6,children:" "}),h.jsx(Pl,{value:p,onChange:I=>m(I.target.value),minRows:4,autosize:!0,maxRows:8,styles:er.input,placeholder:" ...",error:p.length>1e3?"  ":void 0}),h.jsxs(z,{size:"xs",c:p.length>1e3?"red":"dimmed",ta:"right",children:[p.length,"/1000"]})]}),c?h.jsx(oe,{gap:"sm",children:h.jsxs(pe,{justify:"center",gap:"xs",children:[h.jsx(gr,{size:"sm",color:"violet"}),h.jsx(z,{size:"sm",c:"dimmed",children:"    30 ..."})]})}):!g&&h.jsx(ke,{style:{background:"linear-gradient(135deg, rgb(139, 92, 246) 0%, rgb(236, 72, 153) 100%)",border:"none"},onClick:R,disabled:!p.trim()||p.length>1e3,leftSection:h.jsx(i2,{size:16}),fullWidth:!0,children:"   AI"})]}),b&&h.jsx(Nu,{color:"red",variant:"light",radius:"md",icon:h.jsx(ih,{size:16}),children:b}),w&&h.jsx($n,{padding:"lg",radius:"md",style:{backgroundColor:"rgb(45, 40, 30)",border:"1px solid rgb(234, 179, 8)"},children:h.jsxs(oe,{gap:"md",align:"center",children:[h.jsx(z,{size:"3rem",children:""}),h.jsx(z,{size:"lg",fw:600,c:"white",ta:"center",children:"-, !"}),h.jsx(z,{size:"md",c:"rgb(230, 210, 150)",ta:"center",children:"  .  AI    ."}),h.jsx(z,{size:"sm",c:"rgb(200, 180, 120)",ta:"center",children:" 10     "})]})}),k&&h.jsx($n,{padding:"lg",radius:"md",style:{backgroundColor:"rgb(45, 30, 60)",border:"1px solid rgb(139, 92, 246)"},children:h.jsxs(oe,{gap:"md",children:[h.jsxs(pe,{gap:"sm",children:[h.jsx(ev,{size:24,color:"rgb(250, 204, 21)"}),h.jsx(z,{size:"lg",fw:600,c:"white",children:" !"})]}),h.jsx(z,{size:"md",c:"rgb(200, 180, 230)",children:"   .      "}),h.jsxs($n,{padding:"sm",radius:"sm",style:{backgroundColor:"rgb(35, 25, 50)"},children:[h.jsx(z,{size:"sm",c:"rgb(180, 160, 210)",fw:500,mb:"xs",children:"     ?"}),h.jsx(z,{size:"sm",c:"rgb(160, 140, 190)",children:"  ,    ."})]}),h.jsx(z,{size:"sm",c:"rgb(236, 72, 153)",ta:"center",style:{fontStyle:"italic"},children:"    , )) "}),h.jsx(ke,{style:{background:"linear-gradient(135deg, rgb(250, 204, 21) 0%, rgb(245, 158, 11) 100%)",border:"none",color:"black"},onClick:D,leftSection:h.jsx(ev,{size:18}),fullWidth:!0,size:"md",children:" "})]})}),g&&h.jsxs(h.Fragment,{children:[h.jsxs(ne,{children:[h.jsx(z,{size:"sm",c:"white",fw:500,mb:6,children:" "}),h.jsx(Pl,{value:g,onChange:I=>v(I.target.value),minRows:4,autosize:!0,maxRows:10,styles:{...er.input,input:{...er.input.input,borderColor:"rgb(139, 92, 246)"}}})]}),h.jsxs(pe,{justify:"flex-end",gap:"sm",children:[h.jsx(ke,{variant:"subtle",color:"gray",onClick:()=>l(!1),children:""}),h.jsx(ke,{color:"violet",onClick:O,leftSection:h.jsx(Xr,{size:16}),children:""})]})]})]})})]})}function ow(t){return t?t.replace(/<br\s*\/?>/gi,`
`).replace(/<\/p>\s*<p>/gi,`
`).replace(/<strong>/gi,"<b>").replace(/<\/strong>/gi,"</b>").replace(/<em>/gi,"<i>").replace(/<\/em>/gi,"</i>").replace(/<p>/gi,"").replace(/<\/p>/gi,"").replace(/<(?!\/?[bi]>)[^>]+>/gi,"").replace(/&nbsp;/gi," ").replace(/&amp;/gi,"&").replace(/&lt;/gi,"<").replace(/&gt;/gi,">").replace(/&quot;/gi,'"').trim():""}function sw(t){return t?"<p>"+t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&lt;b&gt;/gi,"<strong>").replace(/&lt;\/b&gt;/gi,"</strong>").replace(/&lt;i&gt;/gi,"<em>").replace(/&lt;\/i&gt;/gi,"</em>").replace(/\n/g,"</p><p>")+"</p>":"<p></p>"}function sq({form:t,errors:e,updateField:n}){const[r,i]=A.useState(!1),[s,l]=A.useState(!1),c=yH({extensions:[G9.configure({heading:!1,bulletList:!1,orderedList:!1,listItem:!1,blockquote:!1,codeBlock:!1,code:!1,horizontalRule:!1})],content:sw(t.greeting),onUpdate:({editor:b})=>{const S=b.getHTML(),k=ow(S);n("greeting",k)},onSelectionUpdate:({editor:b})=>{i(b.isActive("bold")),l(b.isActive("italic"))},onTransaction:({editor:b})=>{const S=b.state.storedMarks;if(S){const k=S.some(w=>w.type.name==="bold"),E=S.some(w=>w.type.name==="italic");i(k),l(E)}else i(b.isActive("bold")),l(b.isActive("italic"))}});A.useEffect(()=>{c&&!c.isFocused&&ow(c.getHTML())!==t.greeting&&c.commands.setContent(sw(t.greeting))},[t.greeting,c]);const d=A.useCallback(()=>{c&&(i(b=>!b),c.chain().focus().toggleBold().run())},[c]),p=A.useCallback(()=>{c&&(l(b=>!b),c.chain().focus().toggleItalic().run())},[c]),m=fs(t.greeting).length,g=m>xt.greeting.max,v=m<xt.greeting.min&&m>0;return h.jsxs(oe,{gap:"md",children:[h.jsx(Ra,{children:" "}),h.jsx(Zl,{children:"      .   !"}),h.jsxs($n,{padding:"sm",radius:"md",style:{...er.tipCard,marginBottom:"8px"},children:[h.jsxs(z,{size:"sm",c:"rgb(200, 180, 230)",mb:"xs",children:[h.jsx("b",{style:{color:"rgb(180, 140, 255)"},children:":"}),"       ,        ()."]}),h.jsxs(z,{size:"sm",c:"rgb(200, 180, 230)",children:[h.jsx("b",{children:":"}),"            ."]})]}),h.jsxs(ne,{className:`greeting-editor ${e.greeting?"has-error":""}`,children:[h.jsx(z,{size:"sm",c:"white",fw:500,mb:6,children:""}),h.jsxs(Ge,{editor:c,children:[h.jsx(Ge.Toolbar,{sticky:!0,stickyOffset:0,children:h.jsxs(Ge.ControlsGroup,{children:[h.jsx(Ge.Control,{onClick:d,active:r,"aria-label":"Bold",children:h.jsx(e5,{size:16})}),h.jsx(Ge.Control,{onClick:p,active:s,"aria-label":"Italic",children:h.jsx(w5,{size:16})})]})}),h.jsx(Ge.Content,{})]}),h.jsxs(z,{size:"xs",c:g?"red":v?"rgb(250, 128, 114)":"dimmed",mt:4,children:[m,"/",xt.greeting.max,"  (. ",xt.greeting.min,")"]}),e.greeting&&h.jsx(z,{size:"xs",c:"red",mt:4,children:e.greeting})]}),h.jsxs(td,{children:[" ",h.jsx("b",{children:""}),"  ",h.jsx("i",{children:""}),"    .     ,    ."]})]})}function aq({form:t,updateField:e,entityNameGen:n,availableTags:r,loadingTags:i,tagsModalOpened:s,setTagsModalOpened:l,onToggleTag:c,onRemoveTag:d}){return h.jsxs(oe,{gap:"md",children:[h.jsx(Ra,{children:"  "}),h.jsxs(Zl,{children:["  5 ,        ",n,"."]}),t.tags.length>0&&h.jsx(pe,{gap:"xs",children:t.tags.map(p=>h.jsx(Ut,{color:"violet",variant:"light",size:"lg",rightSection:h.jsx(qn,{size:"xs",color:"violet",variant:"transparent",onClick:()=>d(p),children:""}),children:p},p))}),h.jsx(ke,{variant:"light",color:"violet",onClick:()=>l(!0),fullWidth:!0,styles:{root:{backgroundColor:"rgb(41, 41, 41)",border:"1px dashed rgb(139, 92, 246)"}},children:t.tags.length>0?` : ${t.tags.length}/5  `:"+  "}),h.jsxs(td,{children:["   ,        ",n,"  ."]}),h.jsxs(Gr,{opened:s,onClose:()=>l(!1),title:`  (${t.tags.length}/5)`,centered:!0,size:"lg",styles:er.modal,children:[i?h.jsx(ne,{style:{display:"flex",justifyContent:"center",padding:"40px"},children:h.jsx(gr,{color:"violet"})}):h.jsx(ne,{style:{display:"flex",flexWrap:"wrap",gap:"10px"},children:r.length===0?h.jsxs(z,{c:"dimmed",ta:"center",w:"100%",children:["      .",h.jsx("br",{}),"     ."]}):r.map(p=>{const m=t.tags.includes(p),g=!m&&t.tags.length>=5;return h.jsxs(ke,{onClick:()=>c(p),disabled:g,size:"sm",radius:"xl",styles:{root:{backgroundColor:m?"rgb(139, 92, 246)":"rgb(41, 41, 41)",color:g?"rgb(100, 100, 100)":"white",border:m?"1px solid rgb(139, 92, 246)":"1px solid rgb(55, 55, 55)",opacity:g?.5:1,cursor:g?"not-allowed":"pointer","&:hover":{backgroundColor:m?"rgb(124, 77, 231)":g?"rgb(41, 41, 41)":"rgb(55, 55, 55)"}}},children:[m&&" ",p]},p)})}),h.jsx(ke,{color:"violet",fullWidth:!0,mt:"lg",onClick:()=>l(!1),children:""})]}),h.jsx(ne,{style:{backgroundColor:"rgb(41, 41, 41)",borderRadius:"8px",padding:"16px"},children:h.jsxs(pe,{justify:"space-between",children:[h.jsxs(ne,{children:[h.jsxs(z,{size:"sm",c:"white",fw:500,children:[" ",t.is_world?"":""]}),h.jsx(z,{size:"xs",c:"dimmed",children:t.is_public?"     ":"   "})]}),h.jsx(Yj,{checked:t.is_public,onChange:p=>e("is_public",p.currentTarget.checked),color:"violet"})]})})]})}const bs=512;async function lq(t,e){const n=await new Promise((s,l)=>{const c=new Image;c.onload=()=>s(c),c.onerror=l,c.src=t}),r=document.createElement("canvas");return r.width=bs,r.height=bs,r.getContext("2d").drawImage(n,e.x,e.y,e.width,e.height,0,0,bs,bs),new Promise((s,l)=>{r.toBlob(c=>{if(!c)return l(new Error("Canvas toBlob failed"));s(new File([c],"photo.jpg",{type:"image/jpeg"}))},"image/jpeg",.92)})}function cq({form:t,errors:e,updateField:n,entityNameGen:r}){const i=A.useMemo(()=>t.photo?URL.createObjectURL(t.photo):null,[t.photo]),[s,l]=A.useState(null),[c,d]=A.useState(null),[p,m]=A.useState({x:0,y:0}),[g,v]=A.useState(1),[b,S]=A.useState(null);A.useEffect(()=>()=>{i&&URL.revokeObjectURL(i)},[i]),A.useEffect(()=>()=>{c&&URL.revokeObjectURL(c)},[c]);const k=A.useCallback(_=>{if(l(null),!_)return;if(!["image/png","image/jpeg","image/jpg","image/webp"].includes(_.type.toLowerCase())){l(" .  PNG, JPG  WebP");return}const O=5*1024*1024;if(_.size>O){l("  .  : 5 ");return}c&&URL.revokeObjectURL(c),d(URL.createObjectURL(_)),m({x:0,y:0}),v(1),S(null)},[c]),E=A.useCallback((_,R)=>{S(R)},[]),w=A.useCallback(async()=>{if(!(!c||!b))try{const _=await lq(c,b);n("photo",_),URL.revokeObjectURL(c),d(null)}catch(_){console.error("Crop error:",_),l("   ")}},[c,b,n]),T=A.useCallback(()=>{c&&URL.revokeObjectURL(c),d(null)},[c]);return h.jsxs(oe,{gap:"md",children:[h.jsx(Ra,{children:" "}),h.jsxs(Zl,{children:["    ",r,".  JPG, PNG, WebP."]}),c?h.jsxs(oe,{gap:"md",children:[h.jsxs(z,{size:"sm",c:"white",fw:500,children:["   ",bs,"",bs]}),h.jsx(ne,{style:{position:"relative",width:"100%",height:"340px",borderRadius:"8px",overflow:"hidden",backgroundColor:"rgb(28, 28, 28)"},children:h.jsx(BL,{image:c,crop:p,zoom:g,aspect:1,onCropChange:m,onZoomChange:v,onCropComplete:E,objectFit:"horizontal-cover",style:{containerStyle:{borderRadius:"8px"}}})}),h.jsxs(ne,{children:[h.jsx(z,{size:"xs",c:"dimmed",mb:4,children:""}),h.jsx(Y0,{value:g,onChange:v,min:1,max:3,step:.01,color:"violet",label:_=>`${Math.round(_*100)}%`})]}),h.jsxs(pe,{justify:"flex-end",gap:"sm",children:[h.jsx(ke,{variant:"subtle",color:"gray",onClick:T,children:""}),h.jsx(ke,{color:"violet",onClick:w,children:""})]})]}):i?h.jsxs(ne,{children:[h.jsx(z,{size:"sm",c:"white",fw:500,mb:6,children:""}),h.jsx($n,{padding:"md",radius:"md",style:{...er.card,cursor:"pointer",border:"2px dashed rgb(139, 92, 246)",transition:"all 0.2s"},onClick:()=>document.getElementById("hidden-file-input")?.click(),onMouseEnter:_=>{_.currentTarget.style.borderColor="rgb(167, 139, 250)",_.currentTarget.style.backgroundColor="rgb(45, 41, 51)"},onMouseLeave:_=>{_.currentTarget.style.borderColor="rgb(139, 92, 246)",_.currentTarget.style.backgroundColor="rgb(41, 41, 41)"},children:h.jsxs(oe,{align:"center",gap:"sm",children:[h.jsx("img",{src:i,alt:"Preview",style:{width:"200px",height:"200px",borderRadius:"8px",objectFit:"cover"}}),h.jsx(z,{size:"sm",c:"dimmed",children:t.photo?.name}),h.jsx(z,{size:"xs",c:"rgb(139, 92, 246)",fw:500,children:" ,    "})]})}),h.jsx("input",{id:"hidden-file-input",type:"file",accept:"image/png,image/jpeg,image/jpg,image/webp",style:{display:"none"},onChange:_=>{const R=_.target.files?.[0]||null;k(R),_.target.value=""}}),s&&h.jsx(z,{size:"xs",c:"red",mt:4,children:s})]}):h.jsx(h.Fragment,{children:h.jsx(Xj,{label:"",placeholder:",   ",accept:"image/png,image/jpeg,image/jpg,image/webp",value:null,onChange:k,error:e.photo||s,styles:er.input})}),h.jsxs(td,{children:["    ",bs,"",bs," .   : 5 ."]})]})}const uq={root:{backgroundColor:"rgb(20, 83, 45)",border:"1px solid rgb(34, 197, 94)"},title:{color:"white"},message:{color:"rgb(187, 247, 208)"},closeButton:{color:"white"}};A.memo(function({isWorld:e,onDismiss:n}){const r=e?"":"";return h.jsx(Nu,{color:"green",variant:"light",withCloseButton:!0,onClose:n,title:`${e?"":""}  ! `,radius:"md",styles:uq,children:h.jsxs(oe,{gap:"xs",children:[h.jsxs(z,{size:"sm",children:[" ",r,"     .        !"]}),h.jsx(z,{size:"sm",children:"        Telegram-."}),h.jsxs(z,{size:"sm",children:["     ,  "," ",h.jsx(Ew,{href:"https://t.me/aiogram_tgbots",target:"_blank",c:"rgb(134, 239, 172)",underline:"hover",children:""}),"."]})]})})});function dq(t){if(!t)return{};const e=t.match(/^ref_(.+)_char_(.+)$/);return e?{referrer:e[1],characterId:e[2]}:t.startsWith("char_")?{characterId:t.slice(5)}:{referrer:t}}const fq=`
  @keyframes float {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-20px); }
  }

  @keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
  }

  @keyframes shimmer {
    0% { background-position: -200% 0; }
    100% { background-position: 200% 0; }
  }

  .float-animation {
    animation: float 3s ease-in-out infinite;
  }

  .pulse-animation {
    animation: pulse 2s ease-in-out infinite;
  }

  .shimmer-animation {
    animation: shimmer 3s ease-in-out infinite;
  }
`;function hq(){const t=Li(),[e,n]=A.useState(!1);return A.useEffect(()=>{const r=document.createElement("style");return r.textContent=fq,document.head.appendChild(r),(async()=>{try{const s=ot.initDataUnsafe?.start_param,{referrer:l,characterId:c}=dq(s);ND(l),c&&(XD(c,l),sessionStorage.setItem("deeplink_character_id",c));const d=new Promise((g,v)=>setTimeout(()=>v(new Error("Timeout")),3e4)),p={};l&&(p.referrer=l);const m=st("/v1/user/register",{method:"POST",body:JSON.stringify(p)});await Promise.race([m,d]),aE(),t("/",{replace:!0})}catch(s){if(console.error("Registration error:",s),s?.status===409){aE(),t("/",{replace:!0});return}DD(s?.message||"Unknown error"),n(!0)}})(),()=>{document.head.removeChild(r)}},[t]),e?h.jsx(Mn,{size:"sm",style:{paddingTop:"100px"},children:h.jsx(yt,{shadow:"md",p:"xl",withBorder:!0,children:h.jsxs(oe,{align:"center",gap:"md",children:[h.jsx(z,{size:"xl",fw:600,children:", -   "}),h.jsx(z,{c:"dimmed",ta:"center",children:" WebApp,    ."}),h.jsxs(z,{c:"dimmed",ta:"center",children:[" :"," ",h.jsx("a",{href:"https://t.me/aiogram_tgbots",target:"_blank",rel:"noopener noreferrer",style:{color:"inherit"},children:"https://t.me/aiogram_tgbots"})]}),h.jsx(ke,{onClick:()=>window.location.reload(),variant:"filled",fullWidth:!0,children:""})]})})}):h.jsx(Mi,{style:{height:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:h.jsxs(oe,{align:"center",gap:"xl",children:[h.jsxs("div",{className:"float-animation",style:{position:"relative"},children:[h.jsx(gr,{size:80,color:"white",type:"dots"}),h.jsx("div",{className:"pulse-animation",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"120px",height:"120px",borderRadius:"50%",background:"rgba(255, 255, 255, 0.1)",zIndex:-1}})]}),h.jsx(z,{size:"32px",fw:700,className:"shimmer-animation",style:{background:"linear-gradient(90deg, #fff, #e0e0e0, #fff)",backgroundSize:"200% 100%",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",textAlign:"center",letterSpacing:"2px"},children:"  "}),h.jsx(z,{size:"lg",c:"white",className:"pulse-animation",style:{opacity:.9,textAlign:"center"},children:"    ..."})]})})}function pq(){const[t]=_w(),[e,n]=A.useState("loading"),[r,i]=A.useState(""),s=A.useRef(null),l=A.useRef(null),c=A.useRef(null),d=A.useRef(!1),p=t.get("token"),m=t.get("type");A.useEffect(()=>{if(!p){n("error"),i("   ");return}c.current=setTimeout(()=>{d.current||n("timeout")},3e4);const S=()=>{if(!window.YooMoneyCheckoutWidget){setTimeout(S,100);return}d.current=!0,c.current&&clearTimeout(c.current),n("widget"),setTimeout(()=>{try{s.current=new window.YooMoneyCheckoutWidget({confirmation_token:p,error_callback:function(k){console.error("YooKassa error:",k),n("error"),i("    ")}}),s.current.on("success",()=>{s.current?.destroy(),n("success")}),s.current.on("fail",()=>{s.current?.destroy(),n("fail")}),s.current.render("yookassa-payment-container")}catch(k){console.error("Widget init error:",k),n("error"),i("  ")}},50)};return S(),()=>{s.current?.destroy(),c.current&&clearTimeout(c.current)}},[p]);const g="RolePlayTopbot",v=()=>{window.location.href=`https://t.me/${g}`},b=()=>{window.close(),setTimeout(()=>{window.location.href=`https://t.me/${g}`},100)};return e==="loading"?h.jsx(Mn,{size:"sm",py:"xl",children:h.jsxs(oe,{align:"center",gap:"lg",children:[h.jsx(gr,{size:"lg",color:"blue"}),h.jsx(z,{c:"dimmed",children:"  ..."})]})}):e==="timeout"?h.jsx(Mn,{size:"sm",py:"xl",children:h.jsxs(oe,{align:"center",gap:"lg",children:[h.jsx(ne,{w:80,h:80,bg:"orange.9",style:{borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:h.jsx(Y5,{size:40,color:"white"})}),h.jsx(go,{order:3,ta:"center",c:"orange.4",children:"  "}),h.jsxs(oe,{gap:4,children:[h.jsx(z,{ta:"center",c:"dimmed",children:" :"}),h.jsx(z,{ta:"center",size:"sm",c:"dimmed",children:"  -"}),h.jsx(z,{ta:"center",size:"sm",c:"dimmed",children:"  VPN,    "})]}),h.jsxs(oe,{w:"100%",gap:"xs",children:[h.jsx(ke,{fullWidth:!0,variant:"light",color:"orange",onClick:()=>window.location.reload(),children:" "}),h.jsx(ke,{fullWidth:!0,variant:"subtle",color:"gray",onClick:v,leftSection:h.jsx(hu,{size:20}),children:"  "})]})]})}):e==="error"?h.jsx(Mn,{size:"sm",py:"xl",children:h.jsxs(oe,{align:"center",gap:"lg",children:[h.jsx(ne,{w:80,h:80,bg:"red.9",style:{borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:h.jsx(ty,{size:40,color:"white"})}),h.jsx(go,{order:3,ta:"center",c:"red.4",children:""}),h.jsx(z,{ta:"center",c:"dimmed",children:r}),h.jsx(ke,{fullWidth:!0,variant:"light",color:"red",onClick:v,leftSection:h.jsx(hu,{size:20}),children:"  "})]})}):e==="success"?h.jsx(Mn,{size:"sm",py:"xl",children:h.jsxs(oe,{align:"center",gap:"lg",children:[m==="energy"?h.jsx(ne,{w:"100%",h:150,bg:"rgba(245, 159, 0, 0.2)",style:{borderRadius:12,display:"flex",alignItems:"center",justifyContent:"center"},children:h.jsx(ji,{size:80,color:"#f59f00"})}):h.jsx(_r,{src:"https://img-webcalypt.ru/uploads/admin/images/meme-templates/ZTOJqQiNQt1acPkpWQevehKaauqNbvfp.jpeg",alt:"Success",radius:"md",w:"100%",h:200,fit:"cover"}),h.jsxs(oe,{gap:4,align:"center",children:[h.jsx(go,{order:3,ta:"center",c:"teal.4",children:m==="energy"?" !":",  !"}),h.jsx(z,{ta:"center",size:"sm",c:"dimmed",children:m==="energy"?"   ":"   "})]}),h.jsx(ke,{fullWidth:!0,variant:"light",color:"teal",onClick:v,leftSection:h.jsx(hu,{size:20}),children:"  "})]})}):e==="fail"?h.jsx(Mn,{size:"sm",py:"xl",children:h.jsxs(oe,{align:"center",gap:"lg",children:[h.jsx(_r,{src:"https://img-webcalypt.ru/uploads/admin/images/meme-templates/ggzOBNp6OSXECHJygK0vif4kUI2LsNVy.jpeg",alt:"Fail",radius:"md",w:"100%",h:200,fit:"cover"}),h.jsxs(oe,{gap:4,align:"center",children:[h.jsx(go,{order:3,ta:"center",c:"red.4",children:",    :("}),h.jsx(z,{ta:"center",size:"sm",c:"dimmed",children:"-      "})]}),h.jsx(ke,{fullWidth:!0,variant:"light",color:"red",onClick:v,leftSection:h.jsx(hu,{size:20}),children:"  "})]})}):h.jsx(Mn,{size:"sm",py:"md",children:h.jsxs(oe,{gap:"md",children:[h.jsx(go,{order:4,ta:"center",children:"  Kassa"}),h.jsx(ne,{ref:l,id:"yookassa-payment-container",style:{minHeight:300,background:"#fff",borderRadius:12,padding:16}}),h.jsx(ke,{variant:"subtle",color:"gray",onClick:b,children:""})]})})}async function mq(t){const e=await fetch(`${Qv}/v1/feedback/`,{method:"POST",headers:{"Content-Type":"application/json","X-Telegram-Init-Data":Zv()},body:JSON.stringify(t)});if(!e.ok){const n=await e.json().catch(()=>({}));throw new Error(n.detail||` : ${e.status}`)}return e.json()}const gq={backgroundColor:"#111113",minHeight:"100vh",color:"#e4e4e7",paddingBottom:"4rem"},vq={background:"linear-gradient(135deg, #2d2d2d 0%, #252525 100%)",border:"1px solid rgba(255, 255, 255, 0.08)",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.25)"};function yq(){const t=Li(),[e,n]=A.useState(null),[r,i]=A.useState(""),[s,l]=A.useState(!1),[c,d]=A.useState(!1),[p,m]=A.useState(null);A.useEffect(()=>(fz(),ot.BackButton.show(),ot.BackButton.onClick(()=>t("/")),()=>{ot.BackButton.hide()}),[t]);const g=r.trim(),v=e!==null&&g.length>=1&&g.length<=1e3,b=async()=>{if(!(!v||!e)){l(!0),m(null);try{await mq({reaction:e,text:g}),hz(e),d(!0),n(null),i("")}catch(S){const k=S instanceof Error?S.message:" ";pz(k),m(k)}finally{l(!1)}}};return h.jsxs(ne,{style:gq,children:[h.jsx(Ms,{}),h.jsx(Mn,{size:"sm",py:"lg",children:h.jsxs(oe,{gap:"lg",children:[h.jsx(z,{size:"xl",fw:700,c:"white",ta:"center",children:" "}),h.jsx(z,{size:"sm",c:"dimmed",ta:"center",children:",       "}),c&&h.jsx(Nu,{icon:h.jsx(Xr,{size:18}),color:"green",variant:"filled",withCloseButton:!0,onClose:()=>d(!1),children:"  !    "}),p&&h.jsx(Nu,{icon:h.jsx(ih,{size:18}),color:"red",variant:"light",withCloseButton:!0,onClose:()=>m(null),children:p}),h.jsx(yt,{p:"lg",radius:"xl",style:vq,children:h.jsxs(oe,{gap:"md",children:[h.jsx(z,{size:"sm",fw:500,c:"white",children:"  ?"}),h.jsxs(pe,{gap:"sm",children:[h.jsx(ke,{variant:e==="like"?"filled":"outline",color:e==="like"?"green":"gray",leftSection:h.jsx(rv,{size:18}),onClick:()=>{n("like"),cE("like")},radius:"xl",children:""}),h.jsx(ke,{variant:e==="dislike"?"filled":"outline",color:e==="dislike"?"red":"gray",leftSection:h.jsx(nv,{size:18}),onClick:()=>{n("dislike"),cE("dislike")},radius:"xl",children:" "})]}),h.jsx(Pl,{label:" ",placeholder:",  ...",value:r,onChange:S=>i(S.currentTarget.value),minRows:4,maxRows:8,autosize:!0,maxLength:1e3,styles:{input:{backgroundColor:"rgba(255, 255, 255, 0.05)",borderColor:"rgba(255, 255, 255, 0.1)",color:"white"},label:{color:"#9ca3af"}}}),h.jsxs(z,{size:"xs",c:"dimmed",ta:"right",children:[g.length," / 1000"]}),h.jsx(ke,{fullWidth:!0,size:"md",radius:"xl",variant:"gradient",gradient:{from:"#667eea",to:"#764ba2",deg:90},onClick:b,loading:s,disabled:!v,children:" "})]})})]})})]})}async function bq(t=0,e=50){return st(`/v1/chats/list?skip=${t}&limit=${e}`)}async function xq(t){await st(`/v1/chats/${t}/delete`,{method:"DELETE"})}async function Sq(t){return st(`/v1/chats/${t}/history`,{method:"DELETE"})}async function Eq(t,e=0,n=50){return st(`/v1/chats/${t}/history?skip=${e}&limit=${n}`)}function kq(t){const e=new Date(t),r=new Date().getTime()-e.getTime(),i=Math.floor(r/6e4),s=Math.floor(i/60),l=Math.floor(s/24);return i<1?" ":i<60?`${i} . `:s<24?`${s} . `:l===1?"":l<7?`${l} . `:e.toLocaleDateString("ru-RU",{day:"numeric",month:"short"})}function wq(t){return t===1?"":t>=2&&t<=4?"":""}function Cq(){const t=Li(),[e,n]=A.useState([]),[r,i]=A.useState(!0),[s,l]=A.useState(!1),[c,d]=A.useState(""),[p,m]=A.useState(()=>localStorage.getItem("nsfw_accepted")==="true"),[g,v]=A.useState({opened:!1,type:null,chatId:null,chatName:null}),[b,S]=A.useState(!1),k=A.useCallback(async()=>{i(!0),l(!1);try{const D=await bq();n(D.chats)}catch{l(!0)}finally{i(!1)}},[]);A.useEffect(()=>(ot.BackButton.show(),ot.BackButton.onClick(()=>t("/")),k(),()=>{ot.BackButton.hide()}),[t,k]);const E=D=>{m(D),D||localStorage.removeItem("nsfw_accepted")},w=A.useMemo(()=>{if(!c.trim())return e;const D=c.toLowerCase();return e.filter(I=>I.character_name.toLowerCase().includes(D))},[e,c]),T=(D,I,H)=>{v({opened:!0,type:D,chatId:I,chatName:H})},_=()=>{b||v({opened:!1,type:null,chatId:null,chatName:null})},R=async()=>{if(!(!g.chatId||!g.type)){S(!0);try{g.type==="delete"?(await xq(g.chatId),n(D=>D.filter(I=>I.id!==g.chatId))):(await Sq(g.chatId),n(D=>D.map(I=>I.id===g.chatId?{...I,message_count:0}:I)))}catch(D){console.error("   :",D)}finally{S(!1),v({opened:!1,type:null,chatId:null,chatName:null})}}},O=g.type==="delete";return h.jsxs(h.Fragment,{children:[h.jsx("style",{children:`
                .chat-menu-item {
                    color: white !important;
                    background-color: transparent !important;
                }
                .chat-menu-item:hover,
                .chat-menu-item[data-hovered] {
                    background-color: rgba(255, 255, 255, 0.08) !important;
                }
                .chat-menu-item-danger {
                    color: #ff6b6b !important;
                    background-color: transparent !important;
                }
                .chat-menu-item-danger:hover,
                .chat-menu-item-danger[data-hovered] {
                    background-color: rgba(255, 107, 107, 0.12) !important;
                }
            `}),h.jsx(Ms,{onSearch:d,nsfwEnabled:p,onNsfwChange:E}),h.jsxs(Mn,{size:"sm",pt:"lg",pb:90,style:{background:"#1a1a1a",minHeight:"100vh",fontFamily:"Roboto, sans-serif"},children:[h.jsxs(pe,{justify:"space-between",align:"center",mb:"lg",children:[h.jsxs(pe,{gap:"sm",children:[h.jsx(Cs,{size:24,color:"#228be6"}),h.jsx(z,{size:"xl",fw:700,c:"white",style:{fontFamily:"Roboto, sans-serif"},children:" "}),!r&&!s&&h.jsx(Ut,{variant:"filled",color:"blue",radius:"xl",size:"sm",children:w.length})]}),!r&&h.jsx(qn,{variant:"subtle",color:"gray",size:"lg",radius:"xl",onClick:k,children:h.jsx(sh,{size:18})})]}),r&&h.jsx(Mi,{py:60,children:h.jsx(gr,{size:"lg",color:"blue"})}),!r&&s&&h.jsx(yt,{p:"xl",radius:"xl",style:{background:"linear-gradient(135deg, #2d2d2d 0%, #252525 100%)",border:"1px solid rgba(255, 107, 107, 0.2)",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.25)",textAlign:"center"},children:h.jsxs(oe,{align:"center",gap:"md",children:[h.jsx(ne,{style:{fontSize:"52px",lineHeight:1},children:""}),h.jsx(z,{size:"lg",fw:600,c:"white",style:{fontFamily:"Roboto, sans-serif"},children:"   "}),h.jsx(z,{size:"sm",c:"#9ca3af",style:{fontFamily:"Roboto, sans-serif"},children:"     "}),h.jsx(ke,{variant:"gradient",gradient:{from:"#228be6",to:"#1c7ed6"},radius:"xl",leftSection:h.jsx(sh,{size:16}),onClick:k,style:{fontFamily:"Roboto, sans-serif",fontWeight:600},children:""})]})}),!r&&!s&&e.length===0&&h.jsx(yt,{p:"xl",radius:"xl",style:{background:"linear-gradient(135deg, #2d2d2d 0%, #252525 100%)",border:"1px solid rgba(255, 255, 255, 0.08)",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.25)",textAlign:"center"},children:h.jsxs(oe,{align:"center",gap:"md",children:[h.jsx(ne,{style:{fontSize:"56px",lineHeight:1},children:""}),h.jsx(z,{size:"lg",fw:600,c:"white",style:{fontFamily:"Roboto, sans-serif"},children:"    "}),h.jsx(z,{size:"sm",c:"#9ca3af",ta:"center",style:{fontFamily:"Roboto, sans-serif"},children:"         "}),h.jsx(ke,{variant:"gradient",gradient:{from:"#667eea",to:"#764ba2"},radius:"xl",onClick:()=>t("/"),style:{fontFamily:"Roboto, sans-serif",fontWeight:600},children:" "})]})}),!r&&!s&&e.length>0&&w.length===0&&h.jsx(yt,{p:"xl",radius:"xl",style:{background:"linear-gradient(135deg, #2d2d2d 0%, #252525 100%)",border:"1px solid rgba(255, 255, 255, 0.08)",textAlign:"center"},children:h.jsxs(oe,{align:"center",gap:"sm",children:[h.jsx(ne,{style:{fontSize:"40px",lineHeight:1},children:""}),h.jsx(z,{size:"md",fw:500,c:"white",style:{fontFamily:"Roboto, sans-serif"},children:"  "}),h.jsx(z,{size:"sm",c:"#9ca3af",style:{fontFamily:"Roboto, sans-serif"},children:"   "})]})}),!r&&!s&&w.length>0&&h.jsx(oe,{gap:"sm",children:w.map(D=>h.jsx(yt,{p:"md",radius:"xl",style:{background:"linear-gradient(135deg, #2d2d2d 0%, #252525 100%)",border:"1px solid rgba(255, 255, 255, 0.08)",boxShadow:"0 2px 12px rgba(0, 0, 0, 0.2)",cursor:"pointer"},onClick:()=>t(`/chats/${D.id}`,{state:{characterName:D.character_name,characterPhotoUrl:D.character_photo_url}}),children:h.jsxs(pe,{justify:"space-between",wrap:"nowrap",align:"center",children:[h.jsxs(pe,{gap:"md",wrap:"nowrap",style:{flex:1,minWidth:0},children:[h.jsx(yu,{src:D.character_photo_url||void 0,size:52,radius:"xl",style:{border:"2px solid rgba(255, 255, 255, 0.1)",flexShrink:0},children:D.character_name[0]}),h.jsxs(ne,{style:{flex:1,minWidth:0},children:[h.jsx(z,{size:"md",fw:600,c:"white",style:{fontFamily:"Roboto, sans-serif",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:D.character_name}),h.jsx(pe,{gap:"xs",mt:4,wrap:"nowrap",children:h.jsxs(Ut,{size:"sm",variant:"light",color:D.message_count>0?"blue":"gray",leftSection:h.jsx(Cs,{size:10}),children:[D.message_count," ",wq(D.message_count)]})}),h.jsx(z,{size:"xs",c:"#6b7280",mt:4,style:{fontFamily:"Roboto, sans-serif"},children:kq(D.updated_at)})]})]}),h.jsxs(pe,{gap:4,wrap:"nowrap",style:{flexShrink:0},children:[h.jsx(l5,{size:16,color:"#4a4a4a"}),h.jsxs(wt,{shadow:"md",width:200,position:"bottom-end",children:[h.jsx(wt.Target,{children:h.jsx(qn,{variant:"subtle",color:"gray",size:"lg",radius:"xl",onClick:I=>I.stopPropagation(),children:h.jsx(h5,{size:18})})}),h.jsxs(wt.Dropdown,{styles:{dropdown:{backgroundColor:"#2a2a2a",border:"1px solid #3a3a3a"}},children:[h.jsx(wt.Item,{leftSection:h.jsx(r2,{size:16}),className:"chat-menu-item",onClick:I=>{I.stopPropagation(),T("clear",D.id,D.character_name)},children:" "}),h.jsx(wt.Divider,{style:{borderColor:"#3a3a3a"}}),h.jsx(wt.Item,{leftSection:h.jsx(ah,{size:16}),className:"chat-menu-item-danger",onClick:I=>{I.stopPropagation(),T("delete",D.id,D.character_name)},children:" "})]})]})]})]})},D.id))})]}),h.jsx(Gr,{opened:g.opened,onClose:_,centered:!0,title:h.jsx(z,{fw:600,c:"white",style:{fontFamily:"Roboto, sans-serif"},children:O?" ":" "}),styles:{content:{backgroundColor:"#2a2a2a"},header:{backgroundColor:"#2a2a2a",color:"white"},body:{backgroundColor:"#2a2a2a"},close:{color:"white"}},children:h.jsxs(oe,{gap:"lg",children:[h.jsx(z,{size:"sm",c:"#9ca3af",style:{fontFamily:"Roboto, sans-serif"},children:O?`   ${g.chatName}?        .`:`       ${g.chatName}?  ,     .`}),h.jsxs(pe,{justify:"flex-end",gap:"sm",children:[h.jsx(ke,{variant:"default",radius:"xl",onClick:_,disabled:b,styles:{root:{backgroundColor:"#3a3a3a",color:"white",border:"1px solid #4a4a4a"}},children:""}),h.jsx(ke,{radius:"xl",color:O?"red":"orange",loading:b,leftSection:O?h.jsx(ah,{size:16}):h.jsx(r2,{size:16}),onClick:R,style:{fontFamily:"Roboto, sans-serif",fontWeight:600},children:O?"":""})]})]})})]})}function $0(t){return new Date(t).toLocaleTimeString("ru-RU",{hour:"2-digit",minute:"2-digit"})}function Tq(t){const e=new Date(t),n=new Date,r=e.getDate()===n.getDate()&&e.getMonth()===n.getMonth()&&e.getFullYear()===n.getFullYear(),i=new Date(n);i.setDate(i.getDate()-1);const s=e.getDate()===i.getDate()&&e.getMonth()===i.getMonth()&&e.getFullYear()===i.getFullYear();return r?"":s?"":e.toLocaleDateString("ru-RU",{day:"numeric",month:"long"})}function _q(){const t=Li(),{chatId:e}=Qj(),r=Aw().state||{},i=r.characterName??"",s=r.characterPhotoUrl??null,[l,c]=A.useState([]),[d,p]=A.useState(!0),[m,g]=A.useState(!1),v=A.useRef(null),b=A.useCallback(async()=>{if(e){p(!0),g(!1);try{const k=await Eq(e);c(k.messages)}catch{g(!0)}finally{p(!1)}}},[e]);A.useEffect(()=>(ot.BackButton.show(),ot.BackButton.onClick(()=>t("/chats")),b(),()=>{ot.BackButton.hide()}),[t,b]),A.useEffect(()=>{!d&&l.length>0&&v.current?.scrollIntoView({behavior:"smooth"})},[d,l.length]);const S=[];for(const k of l){const E=new Date(k.created_at).toDateString(),w=S[S.length-1];w&&w.date===E?w.msgs.push(k):S.push({date:E,msgs:[k]})}return h.jsxs(h.Fragment,{children:[h.jsx(Ms,{}),h.jsx(ne,{style:{backgroundColor:"rgb(22, 22, 22)",borderBottom:"1px solid rgb(40, 40, 40)",padding:"10px 16px"},children:h.jsx(ne,{style:{maxWidth:"560px",margin:"0 auto"},children:h.jsxs(pe,{gap:"sm",children:[h.jsx(yu,{src:s||void 0,size:38,radius:"xl",style:{border:"2px solid rgba(255,255,255,0.12)",flexShrink:0},children:i[0]}),h.jsxs(ne,{children:[h.jsx(z,{fw:600,c:"white",size:"sm",style:{fontFamily:"Roboto, sans-serif",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:i}),h.jsx(z,{size:"xs",c:"#6b7280",style:{fontFamily:"Roboto, sans-serif"},children:" "})]})]})})}),h.jsxs(Mn,{size:"sm",pt:"md",pb:90,style:{background:"#1a1a1a",minHeight:"100vh",fontFamily:"Roboto, sans-serif"},children:[d&&h.jsx(Mi,{py:60,children:h.jsx(gr,{size:"lg",color:"blue"})}),!d&&m&&h.jsx(yt,{p:"xl",radius:"xl",style:{background:"linear-gradient(135deg, #2d2d2d 0%, #252525 100%)",border:"1px solid rgba(255, 107, 107, 0.2)",textAlign:"center"},children:h.jsxs(oe,{align:"center",gap:"md",children:[h.jsx(ne,{style:{fontSize:"48px",lineHeight:1},children:""}),h.jsx(z,{size:"lg",fw:600,c:"white",style:{fontFamily:"Roboto, sans-serif"},children:"   "}),h.jsx(ke,{variant:"gradient",gradient:{from:"#228be6",to:"#1c7ed6"},radius:"xl",leftSection:h.jsx(sh,{size:16}),onClick:b,style:{fontFamily:"Roboto, sans-serif",fontWeight:600},children:""})]})}),!d&&!m&&l.length===0&&h.jsx(yt,{p:"xl",radius:"xl",style:{background:"linear-gradient(135deg, #2d2d2d 0%, #252525 100%)",border:"1px solid rgba(255, 255, 255, 0.08)",textAlign:"center"},children:h.jsxs(oe,{align:"center",gap:"md",children:[h.jsx(Cs,{size:48,color:"#3a3a3a",stroke:1.5}),h.jsx(z,{size:"md",fw:500,c:"#9ca3af",style:{fontFamily:"Roboto, sans-serif"},children:" "}),h.jsx(z,{size:"sm",c:"#6b7280",style:{fontFamily:"Roboto, sans-serif"},children:"     "})]})}),!d&&!m&&l.length>0&&h.jsxs(oe,{gap:"xs",children:[S.map(k=>h.jsxs(ne,{children:[h.jsx(pe,{justify:"center",my:"sm",children:h.jsx(z,{size:"xs",c:"#555",style:{fontFamily:"Roboto, sans-serif",backgroundColor:"#252525",padding:"3px 12px",borderRadius:"999px"},children:Tq(k.msgs[0].created_at)})}),h.jsx(oe,{gap:6,children:k.msgs.map(E=>{const w=E.role==="user";return!w&&!!E.photo_url&&!E.content.trim()?h.jsxs(pe,{justify:"flex-start",align:"flex-end",gap:"xs",children:[h.jsx(yu,{src:s||void 0,size:28,radius:"xl",style:{border:"1px solid rgba(255,255,255,0.1)",flexShrink:0,alignSelf:"flex-end"},children:i[0]}),h.jsxs(ne,{style:{maxWidth:"65%"},children:[h.jsx(_r,{src:E.photo_url,radius:"lg",style:{borderRadius:"18px 18px 18px 4px",border:"1px solid rgba(255,255,255,0.08)"}}),h.jsx(z,{size:"xs",c:"#555",mt:3,ml:4,style:{fontFamily:"Roboto, sans-serif"},children:$0(E.created_at)})]})]},E.id):w?h.jsx(pe,{justify:"flex-end",align:"flex-end",gap:"xs",children:h.jsxs(ne,{style:{maxWidth:"75%"},children:[h.jsx(ne,{style:{backgroundColor:"#1c7ed6",borderRadius:"18px 18px 4px 18px",padding:"10px 14px"},children:h.jsx(z,{size:"sm",c:"white",style:{fontFamily:"Roboto, sans-serif",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:E.content})}),h.jsx(z,{size:"xs",c:"#555",mt:3,ta:"right",mr:4,style:{fontFamily:"Roboto, sans-serif"},children:$0(E.created_at)})]})},E.id):h.jsxs(pe,{justify:"flex-start",align:"flex-end",gap:"xs",children:[h.jsx(yu,{src:s||void 0,size:28,radius:"xl",style:{border:"1px solid rgba(255,255,255,0.1)",flexShrink:0,alignSelf:"flex-end"},children:i[0]}),h.jsxs(ne,{style:{maxWidth:"75%"},children:[h.jsxs(ne,{style:{backgroundColor:"#2d2d2d",border:"1px solid rgba(255,255,255,0.07)",borderRadius:"18px 18px 18px 4px",padding:"10px 14px"},children:[h.jsx(z,{size:"sm",c:"#e4e4e7",style:{fontFamily:"Roboto, sans-serif",whiteSpace:"pre-wrap",wordBreak:"break-word"},children:E.content}),E.photo_url&&E.content.trim()&&h.jsx(_r,{src:E.photo_url,radius:"md",mt:8,style:{maxWidth:"100%"}})]}),h.jsx(z,{size:"xs",c:"#555",mt:3,ml:4,style:{fontFamily:"Roboto, sans-serif"},children:$0(E.created_at)})]})]},E.id)})})]},k.date)),h.jsx("div",{ref:v})]})]})]})}function Aq(){const t=Aw();return A.useEffect(()=>{window.ym&&window.ym(106082581,"hit",t.pathname)},[t]),null}function oi({children:t}){return h.jsxs(h.Fragment,{children:[h.jsx(Aq,{}),t]})}function si(){const t=tO();console.error(t);const e=[{emoji:"",caption:"This is fine."},{emoji:"",caption:"  ,  "},{emoji:"",caption:"  "},{emoji:"",caption:"   "}],n=e[Math.floor(Math.random()*e.length)];return h.jsx("div",{style:{minHeight:"100vh",background:"linear-gradient(135deg, #1a1a1a 0%, #2d1f3d 100%)",display:"flex",alignItems:"center",justifyContent:"center",padding:"24px",fontFamily:"Roboto, sans-serif"},children:h.jsxs("div",{style:{background:"linear-gradient(135deg, #2d2d2d 0%, #252525 100%)",border:"1px solid rgba(255,255,255,0.08)",borderRadius:"24px",boxShadow:"0 8px 40px rgba(0,0,0,0.5)",padding:"40px 32px",maxWidth:"420px",width:"100%",textAlign:"center"},children:[h.jsx("div",{style:{fontSize:"72px",lineHeight:1,marginBottom:"8px"},children:n.emoji}),h.jsx("div",{style:{display:"inline-block",background:"rgba(255,255,255,0.07)",borderRadius:"999px",padding:"4px 16px",marginBottom:"24px",fontSize:"13px",color:"#9ca3af",fontStyle:"italic"},children:n.caption}),h.jsx("div",{style:{fontSize:"26px",fontWeight:800,color:"#ffffff",marginBottom:"10px",lineHeight:1.2},children:", - "}),h.jsxs("div",{style:{fontSize:"15px",color:"#9ca3af",marginBottom:"28px",lineHeight:1.6},children:["         .",h.jsx("br",{}),"    ."]}),h.jsx("button",{onClick:()=>window.location.reload(),style:{width:"100%",padding:"14px",borderRadius:"12px",border:"none",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",color:"#fff",fontSize:"16px",fontWeight:700,cursor:"pointer",marginBottom:"16px",boxShadow:"0 4px 15px rgba(102,126,234,0.35)",fontFamily:"Roboto, sans-serif"},children:" "}),h.jsxs("div",{style:{fontSize:"13px",color:"#6b7280"},children:["     "," ",h.jsx("a",{href:"https://t.me/aiogram_tgbots",target:"_blank",rel:"noopener noreferrer",style:{color:"#818cf8",textDecoration:"none",fontWeight:600},children:" "}),",   "]})]})})}const Mq=Zj([{path:"/",element:h.jsx(oi,{children:h.jsx(dE,{})}),errorElement:h.jsx(si,{})},{path:"/auth",element:h.jsx(oi,{children:h.jsx(hq,{})}),errorElement:h.jsx(si,{})},{path:"/profile",element:h.jsx(oi,{children:h.jsx(nL,{})}),errorElement:h.jsx(si,{})},{path:"/tariffs",element:h.jsx(oi,{children:h.jsx(dL,{})}),errorElement:h.jsx(si,{})},{path:"/energy",element:h.jsx(oi,{children:h.jsx(yL,{})}),errorElement:h.jsx(si,{})},{path:"/create",element:h.jsx(oi,{children:h.jsx(tq,{})}),errorElement:h.jsx(si,{})},{path:"/payment",element:h.jsx(oi,{children:h.jsx(pq,{})}),errorElement:h.jsx(si,{})},{path:"/feedback",element:h.jsx(oi,{children:h.jsx(yq,{})}),errorElement:h.jsx(si,{})},{path:"/chats",element:h.jsx(oi,{children:h.jsx(Cq,{})}),errorElement:h.jsx(si,{})},{path:"/chats/:chatId",element:h.jsx(oi,{children:h.jsx(_q,{})}),errorElement:h.jsx(si,{})},{path:"*",element:h.jsx(oi,{children:h.jsx(dE,{})}),errorElement:h.jsx(si,{})}]);function jq(){return h.jsx(eO,{router:Mq})}var G0={},ki={},aw;function fb(){if(aw)return ki;aw=1,Object.defineProperty(ki,"__esModule",{value:!0}),ki.callbackQueueName=n,ki.scriptPath=r,ki.trackerConstructorName=i,ki.trackerInstanceName=s,ki.trackerVersionName=l,ki.accountListName=void 0;var t="yandex_metrika_accounts";ki.accountListName=t;function e(){throw new Error("invalid Ya.Metrika version")}function n(c){if(c==="1")return"yandex_metrika_callbacks";if(c==="2")return"yandex_metrika_callbacks2";e()}function r(c){if(c==="1")return"https://mc.yandex.ru/metrika/watch.js";if(c==="2")return"https://mc.yandex.ru/metrika/tag.js";e()}function i(c){if(c==="1")return"Metrika";if(c==="2")return"Metrika2";e()}function s(c){return"yaCounter".concat(c)}function l(c){return"yaCounterVersion".concat(c)}return ki}var uu={},K0={},lw;function Oq(){return lw||(lw=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var e=fb();function n(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"1",l=(0,e.callbackQueueName)(s);window[e.accountListName]=window[e.accountListName]||[],window[e.accountListName]=window[e.accountListName].concat(r),window[l]=window[l]||[],window[l].push(function(){r.forEach(function(c){var d={id:c};try{window[(0,e.trackerInstanceName)(c)]=new Ya[(0,e.trackerConstructorName)(s)](Object.assign(d,i))}catch(p){console.warn(p)}})}),r.forEach(function(c){window[(0,e.trackerVersionName)(c)]=s})}})(K0)),K0}var cw;function Rq(){if(cw)return uu;cw=1,Object.defineProperty(uu,"__esModule",{value:!0}),uu.YMInitializer=void 0;var t=l(cp()),e=i(EO()),n=i(Oq()),r=fb();function i(w){return w&&w.__esModule?w:{default:w}}function s(){if(typeof WeakMap!="function")return null;var w=new WeakMap;return s=function(){return w},w}function l(w){if(w&&w.__esModule)return w;if(w===null||c(w)!=="object"&&typeof w!="function")return{default:w};var T=s();if(T&&T.has(w))return T.get(w);var _={},R=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var O in w)if(Object.prototype.hasOwnProperty.call(w,O)){var D=R?Object.getOwnPropertyDescriptor(w,O):null;D&&(D.get||D.set)?Object.defineProperty(_,O,D):_[O]=w[O]}return _.default=w,T&&T.set(w,_),_}function c(w){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?c=function(_){return typeof _}:c=function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},c(w)}function d(w,T){if(!(w instanceof T))throw new TypeError("Cannot call a class as a function")}function p(w,T){for(var _=0;_<T.length;_++){var R=T[_];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(w,R.key,R)}}function m(w,T,_){return T&&p(w.prototype,T),w}function g(w,T){return T&&(c(T)==="object"||typeof T=="function")?T:v(w)}function v(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}function b(w){return b=Object.setPrototypeOf?Object.getPrototypeOf:function(_){return _.__proto__||Object.getPrototypeOf(_)},b(w)}function S(w,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(T&&T.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),T&&k(w,T)}function k(w,T){return k=Object.setPrototypeOf||function(R,O){return R.__proto__=O,R},k(w,T)}var E=(function(w){S(T,w);function T(){return d(this,T),g(this,b(T).apply(this,arguments))}return m(T,[{key:"componentDidMount",value:function(){(0,n.default)(this.props.accounts,this.props.options,this.props.version);var R=document.createElement("script"),O=this.props.attrs;R.type="text/javascript",R.async=!0,R.src=(0,r.scriptPath)(this.props.version),Object.keys(O).map(function(D){R.__proto__.hasOwnProperty(D)&&R.setAttribute(D,O[D])}),this.insertPoint.insertBefore(R,null)}},{key:"render",value:function(){var R=this,O=function(I){R.insertPoint=I};return t.default.createElement(this.props.containerElement,{ref:O},this.props.children)}}]),T})(t.Component);return uu.YMInitializer=E,E.displayName="YMInitializer",E.propTypes={accounts:e.default.arrayOf(e.default.number).isRequired,containerElement:e.default.string,options:e.default.object,attrs:e.default.object,version:e.default.oneOf(["1","2"])},E.defaultProps={containerElement:"div",options:{},attrs:{},version:"1"},uu}var uw;function Nq(){return uw||(uw=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.withId=c,t.withFilter=d,Object.defineProperty(t,"YMInitializer",{enumerable:!0,get:function(){return n.YMInitializer}}),t.default=void 0;var e=fb(),n=Rq();function r(m,g){try{for(var v,b=arguments.length,S=new Array(b>2?b-2:0),k=2;k<b;k++)S[k-2]=arguments[k];(v=window[(0,e.trackerInstanceName)(m)])[g].apply(v,S)}catch(E){console.warn(E)}}function i(){return typeof window<"u"?window[e.accountListName]:[]}function s(m){return function(){for(var g=arguments.length,v=new Array(g),b=0;b<g;b++)v[b]=arguments[b];m.forEach(function(S){var k=window[(0,e.trackerVersionName)(S)],E=window[(0,e.callbackQueueName)(k)];E?E.push(function(){return r.apply(void 0,[S].concat(v))}):r.apply(void 0,[S].concat(v))})}}function l(){return s(i()).apply(void 0,arguments)}function c(m){return d(function(g){return m===g})}function d(m){return s(i().filter(m))}var p=l;t.default=p})(G0)),G0}var Dq=Nq();async function zq(){return st("/v1/maintenance/status")}const fo=600,dw=200,po=160,Lq=.6,Iq=-12,fw=4,Pq=.001,Bq=40,wl=44,Ai=50,Uq=20,hw=30,Hq=50,pw=200,qq=400;function mw(t,e,n){t.fillStyle="#535353",t.fillRect(Ai+8,e,24,28),t.fillRect(Ai+16,e-16,24,20),t.fillStyle="#fff",t.fillRect(Ai+32,e-12,4,4),t.fillStyle="#535353",t.fillRect(Ai,e+4,12,8),n%10<5?(t.fillRect(Ai+12,e+28,6,16),t.fillRect(Ai+24,e+28,6,12)):(t.fillRect(Ai+12,e+28,6,12),t.fillRect(Ai+24,e+28,6,16))}function Fq(t,e,n){t.fillStyle="#535353";const r=po-n;t.fillRect(e+6,r,8,n),n>35&&(t.fillRect(e,r+10,8,6),t.fillRect(e,r+4,4,12)),t.fillRect(e+12,r+16,8,6),t.fillRect(e+16,r+10,4,12)}function Vq(t,e,n){t.fillStyle="#d3d3d3",t.fillRect(e,n,30,6),t.fillRect(e+4,n-4,22,4),t.fillRect(e+8,n-8,14,4)}function Wq(){const t=A.useRef(null),e=A.useRef({dinoY:po-wl,velocityY:0,isJumping:!1,cacti:[],clouds:[{x:200,y:40},{x:400,y:60},{x:550,y:30}],score:0,gameSpeed:fw,gameOver:!1,frame:0,started:!1,nextCactusDistance:300}),n=A.useRef(0),[r,i]=A.useState(0),[s,l]=A.useState(!1),[c,d]=A.useState(!1),p=A.useCallback(()=>{const m=e.current;if(m.gameOver){m.dinoY=po-wl,m.velocityY=0,m.isJumping=!1,m.cacti=[],m.score=0,m.gameSpeed=fw,m.gameOver=!1,m.frame=0,m.started=!0,m.nextCactusDistance=300,l(!1),d(!0),i(0);return}m.started||(m.started=!0,d(!0)),m.isJumping||(m.velocityY=Iq,m.isJumping=!0)},[]);return A.useEffect(()=>{const m=t.current;if(!m)return;const g=m.getContext("2d");if(!g)return;const v=E=>{(E.code==="Space"||E.code==="ArrowUp")&&(E.preventDefault(),p())},b=E=>{E.preventDefault(),p()},S=()=>p();window.addEventListener("keydown",v),m.addEventListener("touchstart",b,{passive:!1}),m.addEventListener("click",S);function k(){if(!g||!m)return;const E=e.current;if(g.clearRect(0,0,fo,dw),g.strokeStyle="#535353",g.lineWidth=1,g.beginPath(),g.moveTo(0,po),g.lineTo(fo,po),g.stroke(),E.clouds.forEach(w=>{Vq(g,w.x,w.y),E.started&&!E.gameOver&&(w.x-=E.gameSpeed*.3,w.x<-40&&(w.x=fo+Math.random()*100,w.y=20+Math.random()*50))}),!E.started){mw(g,po-wl,0),g.fillStyle="#535353",g.font="16px monospace",g.textAlign="center",g.fillText("  !",fo/2,100),n.current=requestAnimationFrame(k);return}if(!E.gameOver){E.frame++,E.score+=.1,E.gameSpeed+=Pq,E.velocityY+=Lq,E.dinoY+=E.velocityY,E.dinoY>=po-wl&&(E.dinoY=po-wl,E.velocityY=0,E.isJumping=!1),E.nextCactusDistance-=E.gameSpeed,E.nextCactusDistance<=0&&(E.cacti.push({x:fo,height:hw+Math.random()*(Hq-hw)}),E.nextCactusDistance=pw+Math.random()*(qq-pw)),E.cacti=E.cacti.filter(w=>w.x>-30);for(const w of E.cacti){w.x-=E.gameSpeed;const T=Ai+Bq-8,_=E.dinoY+wl,R=po-w.height;T>w.x+4&&Ai+8<w.x+Uq-4&&_>R+4&&(E.gameOver=!0,l(!0))}Math.floor(E.score)!==r&&i(Math.floor(E.score))}mw(g,E.dinoY,E.frame),E.cacti.forEach(w=>Fq(g,w.x,w.height)),g.fillStyle="#535353",g.font="bold 16px monospace",g.textAlign="right",g.fillText(`${Math.floor(E.score).toString().padStart(5,"0")}`,fo-10,30),E.gameOver&&(g.fillStyle="#535353",g.font="bold 20px monospace",g.textAlign="center",g.fillText("GAME OVER",fo/2,80),g.font="14px monospace",g.fillText("   ",fo/2,110)),n.current=requestAnimationFrame(k)}return n.current=requestAnimationFrame(k),()=>{cancelAnimationFrame(n.current),window.removeEventListener("keydown",v),m.removeEventListener("touchstart",b),m.removeEventListener("click",S)}},[p,r]),h.jsxs("div",{style:{textAlign:"center"},children:[h.jsx("canvas",{ref:t,width:fo,height:dw,style:{maxWidth:"100%",background:"#f7f7f7",borderRadius:12,cursor:"pointer",touchAction:"none"}}),h.jsxs("div",{style:{marginTop:4,color:"#999",fontSize:12},children:[!c&&"   ",c&&!s&&`: ${r}`,s&&`: ${r}    `]})]})}function $q({reason:t}){return h.jsx(ne,{style:{position:"fixed",inset:0,zIndex:9999,background:"linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f3460 100%)",display:"flex",alignItems:"center",justifyContent:"center",overflow:"auto",padding:16},children:h.jsxs(oe,{align:"center",gap:"lg",style:{maxWidth:500,width:"100%"},children:[h.jsx(_r,{src:"https://apiroleplay.capyhub.su/photo/tex/7bea553e-505e-4cd2-9086-e075aa7192f8.png",alt:". ",radius:"md",style:{maxWidth:260}}),h.jsx(z,{size:"xl",fw:700,ta:"center",c:"white",children:"  "}),t&&h.jsxs(yt,{p:"md",radius:"md",style:{background:"rgba(255,255,255,0.08)",backdropFilter:"blur(8px)",width:"100%"},children:[h.jsx(z,{size:"sm",c:"dimmed",ta:"center",mb:4,children:":"}),h.jsx(z,{size:"md",c:"white",ta:"center",children:t})]}),h.jsxs(yt,{p:"md",radius:"md",style:{background:"rgba(255,255,255,0.06)",backdropFilter:"blur(8px)",width:"100%"},children:[h.jsx(z,{size:"sm",c:"dimmed",ta:"center",mb:"sm",children:"   !"}),h.jsx(Wq,{})]})]})})}function Gq(){const[t,e]=A.useState(!1),[n,r]=A.useState(null),[i,s]=A.useState(!0);return A.useEffect(()=>{ot.ready(),ot.expand(),zq().then(l=>{l.is_maintenance&&(e(!0),r(l.reason))}).catch(()=>{}).finally(()=>{s(!1)})},[]),i?h.jsx(Dg,{children:h.jsx(Mi,{h:"100vh",children:h.jsx(gr,{size:"lg",color:"violet"})})}):t?h.jsx(Dg,{children:h.jsx($q,{reason:n})}):h.jsxs(Dg,{children:[h.jsx(Dq.YMInitializer,{accounts:[106082581],options:{webvisor:!0,clickmap:!0,trackLinks:!0,accurateTrackBounce:!0,ecommerce:"dataLayer"},version:"2"}),h.jsx(Eo,{position:"top-center",autoClose:4e3}),h.jsx(jq,{})]})}RD();sO.createRoot(document.getElementById("root")).render(h.jsx(Gq,{}));
