import{r as AE,_ as Ex,a as _E,j as m,N as jE,f as ws,u as $r,g as OE,b as NE,c as zE,d as RE,e as wx,h as DE,O as LE,B as de,R as b1,i as BE,k as wt,C as En,A as Tx,I as Eo,T as P,G as He,l as Er,M as Ei,S as IE,m as Pe,L as $m,n as Ae,o as HE,D as UE,p as Mx,q as Ax,s as Ym,t as qE,v as bo,w as yt,x as pc,y as vs,z as Tl,E as _x,P as VE,F as PE,H as qr,J as WE,K as ef,Q as FE,U as GE,V as Na,W as lf,X as $E,Y as YE,Z as jx,$ as KE,a0 as Ox,a1 as QE,a2 as JE,a3 as Ml,a4 as Km,a5 as um,a6 as XE,a7 as Qm,a8 as fm,a9 as ZE,aa as ew,ab as tw}from"./vendor-mantine-hzdvkJnO.js";import{d as rd,e as nw,g as rw,r as R,R as vn,c as Ha,u as Bl,f as iw,h as ow,i as sw,j as lw,k as aw}from"./vendor-react-I0OoOxXB.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&i(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(s){if(s.ep)return;s.ep=!0;const l=n(s);fetch(s.href,l)}})();var Ep={exports:{}},za={},wp={exports:{}},Tp={};var v1;function cw(){return v1||(v1=1,(function(t){function e(F,X){var be=F.length;F.push(X);e:for(;0<be;){var we=be-1>>>1,te=F[we];if(0<s(te,X))F[we]=X,F[be]=te,be=we;else break e}}function n(F){return F.length===0?null:F[0]}function i(F){if(F.length===0)return null;var X=F[0],be=F.pop();if(be!==X){F[0]=be;e:for(var we=0,te=F.length,xe=te>>>1;we<xe;){var ee=2*(we+1)-1,re=F[ee],Xe=ee+1,St=F[Xe];if(0>s(re,be))Xe<te&&0>s(St,re)?(F[we]=St,F[Xe]=be,we=Xe):(F[we]=re,F[ee]=be,we=ee);else if(Xe<te&&0>s(St,be))F[we]=St,F[Xe]=be,we=Xe;else break e}}return X}function s(F,X){var be=F.sortIndex-X.sortIndex;return be!==0?be:F.id-X.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;t.unstable_now=function(){return l.now()}}else{var c=Date,u=c.now();t.unstable_now=function(){return c.now()-u}}var d=[],p=[],y=1,b=null,v=3,x=!1,k=!1,C=!1,E=!1,M=typeof setTimeout=="function"?setTimeout:null,_=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;function B(F){for(var X=n(p);X!==null;){if(X.callback===null)i(p);else if(X.startTime<=F)i(p),X.sortIndex=X.expirationTime,e(d,X);else break;X=n(p)}}function L(F){if(C=!1,B(F),!k)if(n(d)!==null)k=!0,W||(W=!0,ye());else{var X=n(p);X!==null&&Le(L,X.startTime-F)}}var W=!1,$=-1,ne=5,ve=-1;function qe(){return E?!0:!(t.unstable_now()-ve<ne)}function Te(){if(E=!1,W){var F=t.unstable_now();ve=F;var X=!0;try{e:{k=!1,C&&(C=!1,_($),$=-1),x=!0;var be=v;try{t:{for(B(F),b=n(d);b!==null&&!(b.expirationTime>F&&qe());){var we=b.callback;if(typeof we=="function"){b.callback=null,v=b.priorityLevel;var te=we(b.expirationTime<=F);if(F=t.unstable_now(),typeof te=="function"){b.callback=te,B(F),X=!0;break t}b===n(d)&&i(d),B(F)}else i(d);b=n(d)}if(b!==null)X=!0;else{var xe=n(p);xe!==null&&Le(L,xe.startTime-F),X=!1}}break e}finally{b=null,v=be,x=!1}X=void 0}}finally{X?ye():W=!1}}}var ye;if(typeof N=="function")ye=function(){N(Te)};else if(typeof MessageChannel<"u"){var lt=new MessageChannel,Qe=lt.port2;lt.port1.onmessage=Te,ye=function(){Qe.postMessage(null)}}else ye=function(){M(Te,0)};function Le(F,X){$=M(function(){F(t.unstable_now())},X)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(F){F.callback=null},t.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ne=0<F?Math.floor(1e3/F):5},t.unstable_getCurrentPriorityLevel=function(){return v},t.unstable_next=function(F){switch(v){case 1:case 2:case 3:var X=3;break;default:X=v}var be=v;v=X;try{return F()}finally{v=be}},t.unstable_requestPaint=function(){E=!0},t.unstable_runWithPriority=function(F,X){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var be=v;v=F;try{return X()}finally{v=be}},t.unstable_scheduleCallback=function(F,X,be){var we=t.unstable_now();switch(typeof be=="object"&&be!==null?(be=be.delay,be=typeof be=="number"&&0<be?we+be:we):be=we,F){case 1:var te=-1;break;case 2:te=250;break;case 5:te=1073741823;break;case 4:te=1e4;break;default:te=5e3}return te=be+te,F={id:y++,callback:X,priorityLevel:F,startTime:be,expirationTime:te,sortIndex:-1},be>we?(F.sortIndex=be,e(p,F),n(d)===null&&F===n(p)&&(C?(_($),$=-1):C=!0,Le(L,be-we))):(F.sortIndex=te,e(d,F),k||x||(k=!0,W||(W=!0,ye()))),F},t.unstable_shouldYield=qe,t.unstable_wrapCallback=function(F){var X=v;return function(){var be=v;v=X;try{return F.apply(this,arguments)}finally{v=be}}}})(Tp)),Tp}var x1;function uw(){return x1||(x1=1,wp.exports=cw()),wp.exports}var S1;function fw(){if(S1)return za;S1=1;var t=uw(),e=rd(),n=nw();function i(r){var o="https://react.dev/errors/"+r;if(1<arguments.length){o+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)o+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+r+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function l(r){var o=r,a=r;if(r.alternate)for(;o.return;)o=o.return;else{r=o;do o=r,(o.flags&4098)!==0&&(a=o.return),r=o.return;while(r)}return o.tag===3?a:null}function c(r){if(r.tag===13){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function u(r){if(r.tag===31){var o=r.memoizedState;if(o===null&&(r=r.alternate,r!==null&&(o=r.memoizedState)),o!==null)return o.dehydrated}return null}function d(r){if(l(r)!==r)throw Error(i(188))}function p(r){var o=r.alternate;if(!o){if(o=l(r),o===null)throw Error(i(188));return o!==r?null:r}for(var a=r,f=o;;){var h=a.return;if(h===null)break;var g=h.alternate;if(g===null){if(f=h.return,f!==null){a=f;continue}break}if(h.child===g.child){for(g=h.child;g;){if(g===a)return d(h),r;if(g===f)return d(h),o;g=g.sibling}throw Error(i(188))}if(a.return!==f.return)a=h,f=g;else{for(var S=!1,w=h.child;w;){if(w===a){S=!0,a=h,f=g;break}if(w===f){S=!0,f=h,a=g;break}w=w.sibling}if(!S){for(w=g.child;w;){if(w===a){S=!0,a=g,f=h;break}if(w===f){S=!0,f=g,a=h;break}w=w.sibling}if(!S)throw Error(i(189))}}if(a.alternate!==f)throw Error(i(190))}if(a.tag!==3)throw Error(i(188));return a.stateNode.current===a?r:o}function y(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r;for(r=r.child;r!==null;){if(o=y(r),o!==null)return o;r=r.sibling}return null}var b=Object.assign,v=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),k=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),E=Symbol.for("react.strict_mode"),M=Symbol.for("react.profiler"),_=Symbol.for("react.consumer"),N=Symbol.for("react.context"),B=Symbol.for("react.forward_ref"),L=Symbol.for("react.suspense"),W=Symbol.for("react.suspense_list"),$=Symbol.for("react.memo"),ne=Symbol.for("react.lazy"),ve=Symbol.for("react.activity"),qe=Symbol.for("react.memo_cache_sentinel"),Te=Symbol.iterator;function ye(r){return r===null||typeof r!="object"?null:(r=Te&&r[Te]||r["@@iterator"],typeof r=="function"?r:null)}var lt=Symbol.for("react.client.reference");function Qe(r){if(r==null)return null;if(typeof r=="function")return r.$$typeof===lt?null:r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case C:return"Fragment";case M:return"Profiler";case E:return"StrictMode";case L:return"Suspense";case W:return"SuspenseList";case ve:return"Activity"}if(typeof r=="object")switch(r.$$typeof){case k:return"Portal";case N:return r.displayName||"Context";case _:return(r._context.displayName||"Context")+".Consumer";case B:var o=r.render;return r=r.displayName,r||(r=o.displayName||o.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case $:return o=r.displayName||null,o!==null?o:Qe(r.type)||"Memo";case ne:o=r._payload,r=r._init;try{return Qe(r(o))}catch{}}return null}var Le=Array.isArray,F=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,X=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,be={pending:!1,data:null,method:null,action:null},we=[],te=-1;function xe(r){return{current:r}}function ee(r){0>te||(r.current=we[te],we[te]=null,te--)}function re(r,o){te++,we[te]=r.current,r.current=o}var Xe=xe(null),St=xe(null),Yt=xe(null),Kr=xe(null);function sn(r,o){switch(re(Yt,o),re(St,r),re(Xe,null),o.nodeType){case 9:case 11:r=(r=o.documentElement)&&(r=r.namespaceURI)?qb(r):0;break;default:if(r=o.tagName,o=o.namespaceURI)o=qb(o),r=Vb(o,r);else switch(r){case"svg":r=1;break;case"math":r=2;break;default:r=0}}ee(Xe),re(Xe,r)}function gr(){ee(Xe),ee(St),ee(Yt)}function Hn(r){r.memoizedState!==null&&re(Kr,r);var o=Xe.current,a=Vb(o,r.type);o!==a&&(re(St,r),re(Xe,a))}function Jn(r){St.current===r&&(ee(Xe),ee(St)),Kr.current===r&&(ee(Kr),Aa._currentValue=be)}var ji,Oi;function Be(r){if(ji===void 0)try{throw Error()}catch(a){var o=a.stack.trim().match(/\n( *(at )?)/);ji=o&&o[1]||"",Oi=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ji+r+Oi}var Oe=!1;function et(r,o){if(!r||Oe)return"";Oe=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(o){var Q=function(){throw Error()};if(Object.defineProperty(Q.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Q,[])}catch(V){var U=V}Reflect.construct(r,[],Q)}else{try{Q.call()}catch(V){U=V}r.call(Q.prototype)}}else{try{throw Error()}catch(V){U=V}(Q=r())&&typeof Q.catch=="function"&&Q.catch(function(){})}}catch(V){if(V&&U&&typeof V.stack=="string")return[V.stack,U.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var h=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");h&&h.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var g=f.DetermineComponentFrameRoot(),S=g[0],w=g[1];if(S&&w){var j=S.split(`
`),H=w.split(`
`);for(h=f=0;f<j.length&&!j[f].includes("DetermineComponentFrameRoot");)f++;for(;h<H.length&&!H[h].includes("DetermineComponentFrameRoot");)h++;if(f===j.length||h===H.length)for(f=j.length-1,h=H.length-1;1<=f&&0<=h&&j[f]!==H[h];)h--;for(;1<=f&&0<=h;f--,h--)if(j[f]!==H[h]){if(f!==1||h!==1)do if(f--,h--,0>h||j[f]!==H[h]){var Y=`
`+j[f].replace(" at new "," at ");return r.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",r.displayName)),Y}while(1<=f&&0<=h);break}}}finally{Oe=!1,Error.prepareStackTrace=a}return(a=r?r.displayName||r.name:"")?Be(a):""}function Ar(r,o){switch(r.tag){case 26:case 27:case 5:return Be(r.type);case 16:return Be("Lazy");case 13:return r.child!==o&&o!==null?Be("Suspense Fallback"):Be("Suspense");case 19:return Be("SuspenseList");case 0:case 15:return et(r.type,!1);case 11:return et(r.type.render,!1);case 1:return et(r.type,!0);case 31:return Be("Activity");default:return""}}function Xn(r){try{var o="",a=null;do o+=Ar(r,a),a=r,r=r.return;while(r);return o}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}var yr=Object.prototype.hasOwnProperty,Xt=t.unstable_scheduleCallback,Un=t.unstable_cancelCallback,Zn=t.unstable_shouldYield,Qr=t.unstable_requestPaint,Zt=t.unstable_now,Jr=t.unstable_getCurrentPriorityLevel,Ro=t.unstable_ImmediatePriority,_r=t.unstable_UserBlockingPriority,gn=t.unstable_NormalPriority,xd=t.unstable_LowPriority,xc=t.unstable_IdlePriority,jr=t.log,Sd=t.unstable_setDisableYieldValue,Do=null,Kt=null;function Or(r){if(typeof jr=="function"&&Sd(r),Kt&&typeof Kt.setStrictMode=="function")try{Kt.setStrictMode(Do,r)}catch{}}var Sn=Math.clz32?Math.clz32:ql,kd=Math.log,Sc=Math.LN2;function ql(r){return r>>>=0,r===0?32:31-(kd(r)/Sc|0)|0}var Ni=256,Lo=262144,zs=4194304;function Nr(r){var o=r&42;if(o!==0)return o;switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return r&261888;case 262144:case 524288:case 1048576:case 2097152:return r&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return r&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return r}}function zi(r,o,a){var f=r.pendingLanes;if(f===0)return 0;var h=0,g=r.suspendedLanes,S=r.pingedLanes;r=r.warmLanes;var w=f&134217727;return w!==0?(f=w&~g,f!==0?h=Nr(f):(S&=w,S!==0?h=Nr(S):a||(a=w&~r,a!==0&&(h=Nr(a))))):(w=f&~g,w!==0?h=Nr(w):S!==0?h=Nr(S):a||(a=f&~r,a!==0&&(h=Nr(a)))),h===0?0:o!==0&&o!==h&&(o&g)===0&&(g=h&-h,a=o&-o,g>=a||g===32&&(a&4194048)!==0)?o:h}function br(r,o){return(r.pendingLanes&~(r.suspendedLanes&~r.pingedLanes)&o)===0}function Bo(r,o){switch(r){case 1:case 2:case 4:case 8:case 64:return o+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function kc(){var r=zs;return zs<<=1,(zs&62914560)===0&&(zs=4194304),r}function Rs(r){for(var o=[],a=0;31>a;a++)o.push(r);return o}function Xr(r,o){r.pendingLanes|=o,o!==268435456&&(r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0)}function Ri(r,o,a,f,h,g){var S=r.pendingLanes;r.pendingLanes=a,r.suspendedLanes=0,r.pingedLanes=0,r.warmLanes=0,r.expiredLanes&=a,r.entangledLanes&=a,r.errorRecoveryDisabledLanes&=a,r.shellSuspendCounter=0;var w=r.entanglements,j=r.expirationTimes,H=r.hiddenUpdates;for(a=S&~a;0<a;){var Y=31-Sn(a),Q=1<<Y;w[Y]=0,j[Y]=-1;var U=H[Y];if(U!==null)for(H[Y]=null,Y=0;Y<U.length;Y++){var V=U[Y];V!==null&&(V.lane&=-536870913)}a&=~Q}f!==0&&Cc(r,f,0),g!==0&&h===0&&r.tag!==0&&(r.suspendedLanes|=g&~(S&~o))}function Cc(r,o,a){r.pendingLanes|=o,r.suspendedLanes&=~o;var f=31-Sn(o);r.entangledLanes|=o,r.entanglements[f]=r.entanglements[f]|1073741824|a&261930}function Ec(r,o){var a=r.entangledLanes|=o;for(r=r.entanglements;a;){var f=31-Sn(a),h=1<<f;h&o|r[f]&o&&(r[f]|=o),a&=~h}}function je(r,o){var a=o&-o;return a=(a&42)!==0?1:Vl(a),(a&(r.suspendedLanes|o))!==0?0:a}function Vl(r){switch(r){case 2:r=1;break;case 8:r=4;break;case 32:r=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:r=128;break;case 268435456:r=134217728;break;default:r=0}return r}function Pl(r){return r&=-r,2<r?8<r?(r&134217727)!==0?32:268435456:8:2}function kn(){var r=X.p;return r!==0?r:(r=window.event,r===void 0?32:f1(r.type))}function Ds(r,o){var a=X.p;try{return X.p=r,o()}finally{X.p=a}}var _t=Math.random().toString(36).slice(2),It="__reactFiber$"+_t,ln="__reactProps$"+_t,Zr="__reactContainer$"+_t,Ls="__reactEvents$"+_t,wc="__reactListeners$"+_t,Cd="__reactHandles$"+_t,Tc="__reactResources$"+_t,Di="__reactMarker$"+_t;function Wl(r){delete r[It],delete r[ln],delete r[Ls],delete r[wc],delete r[Cd]}function Li(r){var o=r[It];if(o)return o;for(var a=r.parentNode;a;){if(o=a[Zr]||a[It]){if(a=o.alternate,o.child!==null||a!==null&&a.child!==null)for(r=Kb(r);r!==null;){if(a=r[It])return a;r=Kb(r)}return o}r=a,a=r.parentNode}return null}function Bi(r){if(r=r[It]||r[Zr]){var o=r.tag;if(o===5||o===6||o===13||o===31||o===26||o===27||o===3)return r}return null}function Io(r){var o=r.tag;if(o===5||o===26||o===27||o===6)return r.stateNode;throw Error(i(33))}function Ii(r){var o=r[Tc];return o||(o=r[Tc]={hoistableStyles:new Map,hoistableScripts:new Map}),o}function Ht(r){r[Di]=!0}var Mc=new Set,Hi={};function ei(r,o){yn(r,o),yn(r+"Capture",o)}function yn(r,o){for(Hi[r]=o,r=0;r<o.length;r++)Mc.add(o[r])}var Ac=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),zr={},_c={};function Ed(r){return yr.call(_c,r)?!0:yr.call(zr,r)?!1:Ac.test(r)?_c[r]=!0:(zr[r]=!0,!1)}function Bs(r,o,a){if(Ed(o))if(a===null)r.removeAttribute(o);else{switch(typeof a){case"undefined":case"function":case"symbol":r.removeAttribute(o);return;case"boolean":var f=o.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){r.removeAttribute(o);return}}r.setAttribute(o,""+a)}}function Rr(r,o,a){if(a===null)r.removeAttribute(o);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(o);return}r.setAttribute(o,""+a)}}function vr(r,o,a,f){if(f===null)r.removeAttribute(a);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":r.removeAttribute(a);return}r.setAttributeNS(o,a,""+f)}}function _n(r){switch(typeof r){case"bigint":case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function Ui(r){var o=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function wd(r,o,a){var f=Object.getOwnPropertyDescriptor(r.constructor.prototype,o);if(!r.hasOwnProperty(o)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var h=f.get,g=f.set;return Object.defineProperty(r,o,{configurable:!0,get:function(){return h.call(this)},set:function(S){a=""+S,g.call(this,S)}}),Object.defineProperty(r,o,{enumerable:f.enumerable}),{getValue:function(){return a},setValue:function(S){a=""+S},stopTracking:function(){r._valueTracker=null,delete r[o]}}}}function ti(r){if(!r._valueTracker){var o=Ui(r)?"checked":"value";r._valueTracker=wd(r,o,""+r[o])}}function jc(r){if(!r)return!1;var o=r._valueTracker;if(!o)return!0;var a=o.getValue(),f="";return r&&(f=Ui(r)?r.checked?"true":"false":r.value),r=f,r!==a?(o.setValue(r),!0):!1}function Is(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}var Fl=/[\n"\\]/g;function T(r){return r.replace(Fl,function(o){return"\\"+o.charCodeAt(0).toString(16)+" "})}function A(r,o,a,f,h,g,S,w){r.name="",S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"?r.type=S:r.removeAttribute("type"),o!=null?S==="number"?(o===0&&r.value===""||r.value!=o)&&(r.value=""+_n(o)):r.value!==""+_n(o)&&(r.value=""+_n(o)):S!=="submit"&&S!=="reset"||r.removeAttribute("value"),o!=null?q(r,S,_n(o)):a!=null?q(r,S,_n(a)):f!=null&&r.removeAttribute("value"),h==null&&g!=null&&(r.defaultChecked=!!g),h!=null&&(r.checked=h&&typeof h!="function"&&typeof h!="symbol"),w!=null&&typeof w!="function"&&typeof w!="symbol"&&typeof w!="boolean"?r.name=""+_n(w):r.removeAttribute("name")}function O(r,o,a,f,h,g,S,w){if(g!=null&&typeof g!="function"&&typeof g!="symbol"&&typeof g!="boolean"&&(r.type=g),o!=null||a!=null){if(!(g!=="submit"&&g!=="reset"||o!=null)){ti(r);return}a=a!=null?""+_n(a):"",o=o!=null?""+_n(o):a,w||o===r.value||(r.value=o),r.defaultValue=o}f=f??h,f=typeof f!="function"&&typeof f!="symbol"&&!!f,r.checked=w?r.checked:!!f,r.defaultChecked=!!f,S!=null&&typeof S!="function"&&typeof S!="symbol"&&typeof S!="boolean"&&(r.name=S),ti(r)}function q(r,o,a){o==="number"&&Is(r.ownerDocument)===r||r.defaultValue===""+a||(r.defaultValue=""+a)}function G(r,o,a,f){if(r=r.options,o){o={};for(var h=0;h<a.length;h++)o["$"+a[h]]=!0;for(a=0;a<r.length;a++)h=o.hasOwnProperty("$"+r[a].value),r[a].selected!==h&&(r[a].selected=h),h&&f&&(r[a].defaultSelected=!0)}else{for(a=""+_n(a),o=null,h=0;h<r.length;h++){if(r[h].value===a){r[h].selected=!0,f&&(r[h].defaultSelected=!0);return}o!==null||r[h].disabled||(o=r[h])}o!==null&&(o.selected=!0)}}function ie(r,o,a){if(o!=null&&(o=""+_n(o),o!==r.value&&(r.value=o),a==null)){r.defaultValue!==o&&(r.defaultValue=o);return}r.defaultValue=a!=null?""+_n(a):""}function ue(r,o,a,f){if(o==null){if(f!=null){if(a!=null)throw Error(i(92));if(Le(f)){if(1<f.length)throw Error(i(93));f=f[0]}a=f}a==null&&(a=""),o=a}a=_n(o),r.defaultValue=a,f=r.textContent,f===a&&f!==""&&f!==null&&(r.value=f),ti(r)}function le(r,o){if(o){var a=r.firstChild;if(a&&a===r.lastChild&&a.nodeType===3){a.nodeValue=o;return}}r.textContent=o}var We=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function pe(r,o,a){var f=o.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?f?r.setProperty(o,""):o==="float"?r.cssFloat="":r[o]="":f?r.setProperty(o,a):typeof a!="number"||a===0||We.has(o)?o==="float"?r.cssFloat=a:r[o]=(""+a).trim():r[o]=a+"px"}function Ve(r,o,a){if(o!=null&&typeof o!="object")throw Error(i(62));if(r=r.style,a!=null){for(var f in a)!a.hasOwnProperty(f)||o!=null&&o.hasOwnProperty(f)||(f.indexOf("--")===0?r.setProperty(f,""):f==="float"?r.cssFloat="":r[f]="");for(var h in o)f=o[h],o.hasOwnProperty(h)&&a[h]!==f&&pe(r,h,f)}else for(var g in o)o.hasOwnProperty(g)&&pe(r,g,o[g])}function tt(r){if(r.indexOf("-")===-1)return!1;switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Re=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),oe=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function ce(r){return oe.test(""+r)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":r}function me(){}var kt=null;function he(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var ft=null,Ne=null;function Et(r){var o=Bi(r);if(o&&(r=o.stateNode)){var a=r[ln]||null;e:switch(r=o.stateNode,o.type){case"input":if(A(r,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),o=a.name,a.type==="radio"&&o!=null){for(a=r;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+T(""+o)+'"][type="radio"]'),o=0;o<a.length;o++){var f=a[o];if(f!==r&&f.form===r.form){var h=f[ln]||null;if(!h)throw Error(i(90));A(f,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name)}}for(o=0;o<a.length;o++)f=a[o],f.form===r.form&&jc(f)}break e;case"textarea":ie(r,a.value,a.defaultValue);break e;case"select":o=a.value,o!=null&&G(r,!!a.multiple,o,!1)}}}var er=!1;function Gl(r,o,a){if(er)return r(o,a);er=!0;try{var f=r(o);return f}finally{if(er=!1,(ft!==null||Ne!==null)&&(mu(),ft&&(o=ft,r=Ne,Ne=ft=null,Et(o),r)))for(o=0;o<r.length;o++)Et(r[o])}}function qi(r,o){var a=r.stateNode;if(a===null)return null;var f=a[ln]||null;if(f===null)return null;a=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(r=r.type,f=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!f;break e;default:r=!1}if(r)return null;if(a&&typeof a!="function")throw Error(i(231,o,typeof a));return a}var xr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ho=!1;if(xr)try{var Uo={};Object.defineProperty(Uo,"passive",{get:function(){Ho=!0}}),window.addEventListener("test",Uo,Uo),window.removeEventListener("test",Uo,Uo)}catch{Ho=!1}var Dr=null,se=null,jn=null;function ni(){if(jn)return jn;var r,o=se,a=o.length,f,h="value"in Dr?Dr.value:Dr.textContent,g=h.length;for(r=0;r<a&&o[r]===h[r];r++);var S=a-r;for(f=1;f<=S&&o[a-f]===h[g-f];f++);return jn=h.slice(r,1<f?1-f:void 0)}function qo(r){var o=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&o===13&&(r=13)):r=o,r===10&&(r=13),32<=r||r===13?r:0}function Oc(){return!0}function Pg(){return!1}function On(r){function o(a,f,h,g,S){this._reactName=a,this._targetInst=h,this.type=f,this.nativeEvent=g,this.target=S,this.currentTarget=null;for(var w in r)r.hasOwnProperty(w)&&(a=r[w],this[w]=a?a(g):g[w]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?Oc:Pg,this.isPropagationStopped=Pg,this}return b(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Oc)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Oc)},persist:function(){},isPersistent:Oc}),o}var Vo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Nc=On(Vo),$l=b({},Vo,{view:0,detail:0}),Tk=On($l),Td,Md,Yl,zc=b({},$l,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_d,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==Yl&&(Yl&&r.type==="mousemove"?(Td=r.screenX-Yl.screenX,Md=r.screenY-Yl.screenY):Md=Td=0,Yl=r),Td)},movementY:function(r){return"movementY"in r?r.movementY:Md}}),Wg=On(zc),Mk=b({},zc,{dataTransfer:0}),Ak=On(Mk),_k=b({},$l,{relatedTarget:0}),Ad=On(_k),jk=b({},Vo,{animationName:0,elapsedTime:0,pseudoElement:0}),Ok=On(jk),Nk=b({},Vo,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),zk=On(Nk),Rk=b({},Vo,{data:0}),Fg=On(Rk),Dk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Lk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ik(r){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(r):(r=Bk[r])?!!o[r]:!1}function _d(){return Ik}var Hk=b({},$l,{key:function(r){if(r.key){var o=Dk[r.key]||r.key;if(o!=="Unidentified")return o}return r.type==="keypress"?(r=qo(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?Lk[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_d,charCode:function(r){return r.type==="keypress"?qo(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?qo(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Uk=On(Hk),qk=b({},zc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Gg=On(qk),Vk=b({},$l,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_d}),Pk=On(Vk),Wk=b({},Vo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Fk=On(Wk),Gk=b({},zc,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),$k=On(Gk),Yk=b({},Vo,{newState:0,oldState:0}),Kk=On(Yk),Qk=[9,13,27,32],jd=xr&&"CompositionEvent"in window,Kl=null;xr&&"documentMode"in document&&(Kl=document.documentMode);var Jk=xr&&"TextEvent"in window&&!Kl,$g=xr&&(!jd||Kl&&8<Kl&&11>=Kl),Yg=" ",Kg=!1;function Qg(r,o){switch(r){case"keyup":return Qk.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jg(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var Hs=!1;function Xk(r,o){switch(r){case"compositionend":return Jg(o);case"keypress":return o.which!==32?null:(Kg=!0,Yg);case"textInput":return r=o.data,r===Yg&&Kg?null:r;default:return null}}function Zk(r,o){if(Hs)return r==="compositionend"||!jd&&Qg(r,o)?(r=ni(),jn=se=Dr=null,Hs=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return $g&&o.locale!=="ko"?null:o.data;default:return null}}var eC={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Xg(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o==="input"?!!eC[r.type]:o==="textarea"}function Zg(r,o,a,f){ft?Ne?Ne.push(f):Ne=[f]:ft=f,o=ku(o,"onChange"),0<o.length&&(a=new Nc("onChange","change",null,a,f),r.push({event:a,listeners:o}))}var Ql=null,Jl=null;function tC(r){Db(r,0)}function Rc(r){var o=Io(r);if(jc(o))return r}function e0(r,o){if(r==="change")return o}var t0=!1;if(xr){var Od;if(xr){var Nd="oninput"in document;if(!Nd){var n0=document.createElement("div");n0.setAttribute("oninput","return;"),Nd=typeof n0.oninput=="function"}Od=Nd}else Od=!1;t0=Od&&(!document.documentMode||9<document.documentMode)}function r0(){Ql&&(Ql.detachEvent("onpropertychange",i0),Jl=Ql=null)}function i0(r){if(r.propertyName==="value"&&Rc(Jl)){var o=[];Zg(o,Jl,r,he(r)),Gl(tC,o)}}function nC(r,o,a){r==="focusin"?(r0(),Ql=o,Jl=a,Ql.attachEvent("onpropertychange",i0)):r==="focusout"&&r0()}function rC(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return Rc(Jl)}function iC(r,o){if(r==="click")return Rc(o)}function oC(r,o){if(r==="input"||r==="change")return Rc(o)}function sC(r,o){return r===o&&(r!==0||1/r===1/o)||r!==r&&o!==o}var qn=typeof Object.is=="function"?Object.is:sC;function Xl(r,o){if(qn(r,o))return!0;if(typeof r!="object"||r===null||typeof o!="object"||o===null)return!1;var a=Object.keys(r),f=Object.keys(o);if(a.length!==f.length)return!1;for(f=0;f<a.length;f++){var h=a[f];if(!yr.call(o,h)||!qn(r[h],o[h]))return!1}return!0}function o0(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function s0(r,o){var a=o0(r);r=0;for(var f;a;){if(a.nodeType===3){if(f=r+a.textContent.length,r<=o&&f>=o)return{node:a,offset:o-r};r=f}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=o0(a)}}function l0(r,o){return r&&o?r===o?!0:r&&r.nodeType===3?!1:o&&o.nodeType===3?l0(r,o.parentNode):"contains"in r?r.contains(o):r.compareDocumentPosition?!!(r.compareDocumentPosition(o)&16):!1:!1}function a0(r){r=r!=null&&r.ownerDocument!=null&&r.ownerDocument.defaultView!=null?r.ownerDocument.defaultView:window;for(var o=Is(r.document);o instanceof r.HTMLIFrameElement;){try{var a=typeof o.contentWindow.location.href=="string"}catch{a=!1}if(a)r=o.contentWindow;else break;o=Is(r.document)}return o}function zd(r){var o=r&&r.nodeName&&r.nodeName.toLowerCase();return o&&(o==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||o==="textarea"||r.contentEditable==="true")}var lC=xr&&"documentMode"in document&&11>=document.documentMode,Us=null,Rd=null,Zl=null,Dd=!1;function c0(r,o,a){var f=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;Dd||Us==null||Us!==Is(f)||(f=Us,"selectionStart"in f&&zd(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Zl&&Xl(Zl,f)||(Zl=f,f=ku(Rd,"onSelect"),0<f.length&&(o=new Nc("onSelect","select",null,o,a),r.push({event:o,listeners:f}),o.target=Us)))}function Po(r,o){var a={};return a[r.toLowerCase()]=o.toLowerCase(),a["Webkit"+r]="webkit"+o,a["Moz"+r]="moz"+o,a}var qs={animationend:Po("Animation","AnimationEnd"),animationiteration:Po("Animation","AnimationIteration"),animationstart:Po("Animation","AnimationStart"),transitionrun:Po("Transition","TransitionRun"),transitionstart:Po("Transition","TransitionStart"),transitioncancel:Po("Transition","TransitionCancel"),transitionend:Po("Transition","TransitionEnd")},Ld={},u0={};xr&&(u0=document.createElement("div").style,"AnimationEvent"in window||(delete qs.animationend.animation,delete qs.animationiteration.animation,delete qs.animationstart.animation),"TransitionEvent"in window||delete qs.transitionend.transition);function Wo(r){if(Ld[r])return Ld[r];if(!qs[r])return r;var o=qs[r],a;for(a in o)if(o.hasOwnProperty(a)&&a in u0)return Ld[r]=o[a];return r}var f0=Wo("animationend"),d0=Wo("animationiteration"),h0=Wo("animationstart"),aC=Wo("transitionrun"),cC=Wo("transitionstart"),uC=Wo("transitioncancel"),p0=Wo("transitionend"),m0=new Map,Bd="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Bd.push("scrollEnd");function Sr(r,o){m0.set(r,o),ei(o,[r])}var Dc=typeof reportError=="function"?reportError:function(r){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var o=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof r=="object"&&r!==null&&typeof r.message=="string"?String(r.message):String(r),error:r});if(!window.dispatchEvent(o))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",r);return}console.error(r)},tr=[],Vs=0,Id=0;function Lc(){for(var r=Vs,o=Id=Vs=0;o<r;){var a=tr[o];tr[o++]=null;var f=tr[o];tr[o++]=null;var h=tr[o];tr[o++]=null;var g=tr[o];if(tr[o++]=null,f!==null&&h!==null){var S=f.pending;S===null?h.next=h:(h.next=S.next,S.next=h),f.pending=h}g!==0&&g0(a,h,g)}}function Bc(r,o,a,f){tr[Vs++]=r,tr[Vs++]=o,tr[Vs++]=a,tr[Vs++]=f,Id|=f,r.lanes|=f,r=r.alternate,r!==null&&(r.lanes|=f)}function Hd(r,o,a,f){return Bc(r,o,a,f),Ic(r)}function Fo(r,o){return Bc(r,null,null,o),Ic(r)}function g0(r,o,a){r.lanes|=a;var f=r.alternate;f!==null&&(f.lanes|=a);for(var h=!1,g=r.return;g!==null;)g.childLanes|=a,f=g.alternate,f!==null&&(f.childLanes|=a),g.tag===22&&(r=g.stateNode,r===null||r._visibility&1||(h=!0)),r=g,g=g.return;return r.tag===3?(g=r.stateNode,h&&o!==null&&(h=31-Sn(a),r=g.hiddenUpdates,f=r[h],f===null?r[h]=[o]:f.push(o),o.lane=a|536870912),g):null}function Ic(r){if(50<Sa)throw Sa=0,Yh=null,Error(i(185));for(var o=r.return;o!==null;)r=o,o=r.return;return r.tag===3?r.stateNode:null}var Ps={};function fC(r,o,a,f){this.tag=r,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vn(r,o,a,f){return new fC(r,o,a,f)}function Ud(r){return r=r.prototype,!(!r||!r.isReactComponent)}function ri(r,o){var a=r.alternate;return a===null?(a=Vn(r.tag,o,r.key,r.mode),a.elementType=r.elementType,a.type=r.type,a.stateNode=r.stateNode,a.alternate=r,r.alternate=a):(a.pendingProps=o,a.type=r.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=r.flags&65011712,a.childLanes=r.childLanes,a.lanes=r.lanes,a.child=r.child,a.memoizedProps=r.memoizedProps,a.memoizedState=r.memoizedState,a.updateQueue=r.updateQueue,o=r.dependencies,a.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},a.sibling=r.sibling,a.index=r.index,a.ref=r.ref,a.refCleanup=r.refCleanup,a}function y0(r,o){r.flags&=65011714;var a=r.alternate;return a===null?(r.childLanes=0,r.lanes=o,r.child=null,r.subtreeFlags=0,r.memoizedProps=null,r.memoizedState=null,r.updateQueue=null,r.dependencies=null,r.stateNode=null):(r.childLanes=a.childLanes,r.lanes=a.lanes,r.child=a.child,r.subtreeFlags=0,r.deletions=null,r.memoizedProps=a.memoizedProps,r.memoizedState=a.memoizedState,r.updateQueue=a.updateQueue,r.type=a.type,o=a.dependencies,r.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext}),r}function Hc(r,o,a,f,h,g){var S=0;if(f=r,typeof r=="function")Ud(r)&&(S=1);else if(typeof r=="string")S=gE(r,a,Xe.current)?26:r==="html"||r==="head"||r==="body"?27:5;else e:switch(r){case ve:return r=Vn(31,a,o,h),r.elementType=ve,r.lanes=g,r;case C:return Go(a.children,h,g,o);case E:S=8,h|=24;break;case M:return r=Vn(12,a,o,h|2),r.elementType=M,r.lanes=g,r;case L:return r=Vn(13,a,o,h),r.elementType=L,r.lanes=g,r;case W:return r=Vn(19,a,o,h),r.elementType=W,r.lanes=g,r;default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case N:S=10;break e;case _:S=9;break e;case B:S=11;break e;case $:S=14;break e;case ne:S=16,f=null;break e}S=29,a=Error(i(130,r===null?"null":typeof r,"")),f=null}return o=Vn(S,a,o,h),o.elementType=r,o.type=f,o.lanes=g,o}function Go(r,o,a,f){return r=Vn(7,r,f,o),r.lanes=a,r}function qd(r,o,a){return r=Vn(6,r,null,o),r.lanes=a,r}function b0(r){var o=Vn(18,null,null,0);return o.stateNode=r,o}function Vd(r,o,a){return o=Vn(4,r.children!==null?r.children:[],r.key,o),o.lanes=a,o.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},o}var v0=new WeakMap;function nr(r,o){if(typeof r=="object"&&r!==null){var a=v0.get(r);return a!==void 0?a:(o={value:r,source:o,stack:Xn(o)},v0.set(r,o),o)}return{value:r,source:o,stack:Xn(o)}}var Ws=[],Fs=0,Uc=null,ea=0,rr=[],ir=0,Vi=null,Lr=1,Br="";function ii(r,o){Ws[Fs++]=ea,Ws[Fs++]=Uc,Uc=r,ea=o}function x0(r,o,a){rr[ir++]=Lr,rr[ir++]=Br,rr[ir++]=Vi,Vi=r;var f=Lr;r=Br;var h=32-Sn(f)-1;f&=~(1<<h),a+=1;var g=32-Sn(o)+h;if(30<g){var S=h-h%5;g=(f&(1<<S)-1).toString(32),f>>=S,h-=S,Lr=1<<32-Sn(o)+h|a<<h|f,Br=g+r}else Lr=1<<g|a<<h|f,Br=r}function Pd(r){r.return!==null&&(ii(r,1),x0(r,1,0))}function Wd(r){for(;r===Uc;)Uc=Ws[--Fs],Ws[Fs]=null,ea=Ws[--Fs],Ws[Fs]=null;for(;r===Vi;)Vi=rr[--ir],rr[ir]=null,Br=rr[--ir],rr[ir]=null,Lr=rr[--ir],rr[ir]=null}function S0(r,o){rr[ir++]=Lr,rr[ir++]=Br,rr[ir++]=Vi,Lr=o.id,Br=o.overflow,Vi=r}var an=null,bt=null,Je=!1,Pi=null,or=!1,Fd=Error(i(519));function Wi(r){var o=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw ta(nr(o,r)),Fd}function k0(r){var o=r.stateNode,a=r.type,f=r.memoizedProps;switch(o[It]=r,o[ln]=f,a){case"dialog":Ge("cancel",o),Ge("close",o);break;case"iframe":case"object":case"embed":Ge("load",o);break;case"video":case"audio":for(a=0;a<Ca.length;a++)Ge(Ca[a],o);break;case"source":Ge("error",o);break;case"img":case"image":case"link":Ge("error",o),Ge("load",o);break;case"details":Ge("toggle",o);break;case"input":Ge("invalid",o),O(o,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0);break;case"select":Ge("invalid",o);break;case"textarea":Ge("invalid",o),ue(o,f.value,f.defaultValue,f.children)}a=f.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||o.textContent===""+a||f.suppressHydrationWarning===!0||Hb(o.textContent,a)?(f.popover!=null&&(Ge("beforetoggle",o),Ge("toggle",o)),f.onScroll!=null&&Ge("scroll",o),f.onScrollEnd!=null&&Ge("scrollend",o),f.onClick!=null&&(o.onclick=me),o=!0):o=!1,o||Wi(r,!0)}function C0(r){for(an=r.return;an;)switch(an.tag){case 5:case 31:case 13:or=!1;return;case 27:case 3:or=!0;return;default:an=an.return}}function Gs(r){if(r!==an)return!1;if(!Je)return C0(r),Je=!0,!1;var o=r.tag,a;if((a=o!==3&&o!==27)&&((a=o===5)&&(a=r.type,a=!(a!=="form"&&a!=="button")||cp(r.type,r.memoizedProps)),a=!a),a&&bt&&Wi(r),C0(r),o===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));bt=Yb(r)}else if(o===31){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(317));bt=Yb(r)}else o===27?(o=bt,io(r.type)?(r=pp,pp=null,bt=r):bt=o):bt=an?lr(r.stateNode.nextSibling):null;return!0}function $o(){bt=an=null,Je=!1}function Gd(){var r=Pi;return r!==null&&(Dn===null?Dn=r:Dn.push.apply(Dn,r),Pi=null),r}function ta(r){Pi===null?Pi=[r]:Pi.push(r)}var $d=xe(null),Yo=null,oi=null;function Fi(r,o,a){re($d,o._currentValue),o._currentValue=a}function si(r){r._currentValue=$d.current,ee($d)}function Yd(r,o,a){for(;r!==null;){var f=r.alternate;if((r.childLanes&o)!==o?(r.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),r===a)break;r=r.return}}function Kd(r,o,a,f){var h=r.child;for(h!==null&&(h.return=r);h!==null;){var g=h.dependencies;if(g!==null){var S=h.child;g=g.firstContext;e:for(;g!==null;){var w=g;g=h;for(var j=0;j<o.length;j++)if(w.context===o[j]){g.lanes|=a,w=g.alternate,w!==null&&(w.lanes|=a),Yd(g.return,a,r),f||(S=null);break e}g=w.next}}else if(h.tag===18){if(S=h.return,S===null)throw Error(i(341));S.lanes|=a,g=S.alternate,g!==null&&(g.lanes|=a),Yd(S,a,r),S=null}else S=h.child;if(S!==null)S.return=h;else for(S=h;S!==null;){if(S===r){S=null;break}if(h=S.sibling,h!==null){h.return=S.return,S=h;break}S=S.return}h=S}}function $s(r,o,a,f){r=null;for(var h=o,g=!1;h!==null;){if(!g){if((h.flags&524288)!==0)g=!0;else if((h.flags&262144)!==0)break}if(h.tag===10){var S=h.alternate;if(S===null)throw Error(i(387));if(S=S.memoizedProps,S!==null){var w=h.type;qn(h.pendingProps.value,S.value)||(r!==null?r.push(w):r=[w])}}else if(h===Kr.current){if(S=h.alternate,S===null)throw Error(i(387));S.memoizedState.memoizedState!==h.memoizedState.memoizedState&&(r!==null?r.push(Aa):r=[Aa])}h=h.return}r!==null&&Kd(o,r,a,f),o.flags|=262144}function qc(r){for(r=r.firstContext;r!==null;){if(!qn(r.context._currentValue,r.memoizedValue))return!0;r=r.next}return!1}function Ko(r){Yo=r,oi=null,r=r.dependencies,r!==null&&(r.firstContext=null)}function cn(r){return E0(Yo,r)}function Vc(r,o){return Yo===null&&Ko(r),E0(r,o)}function E0(r,o){var a=o._currentValue;if(o={context:o,memoizedValue:a,next:null},oi===null){if(r===null)throw Error(i(308));oi=o,r.dependencies={lanes:0,firstContext:o},r.flags|=524288}else oi=oi.next=o;return a}var dC=typeof AbortController<"u"?AbortController:function(){var r=[],o=this.signal={aborted:!1,addEventListener:function(a,f){r.push(f)}};this.abort=function(){o.aborted=!0,r.forEach(function(a){return a()})}},hC=t.unstable_scheduleCallback,pC=t.unstable_NormalPriority,Ut={$$typeof:N,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Qd(){return{controller:new dC,data:new Map,refCount:0}}function na(r){r.refCount--,r.refCount===0&&hC(pC,function(){r.controller.abort()})}var ra=null,Jd=0,Ys=0,Ks=null;function mC(r,o){if(ra===null){var a=ra=[];Jd=0,Ys=ep(),Ks={status:"pending",value:void 0,then:function(f){a.push(f)}}}return Jd++,o.then(w0,w0),o}function w0(){if(--Jd===0&&ra!==null){Ks!==null&&(Ks.status="fulfilled");var r=ra;ra=null,Ys=0,Ks=null;for(var o=0;o<r.length;o++)(0,r[o])()}}function gC(r,o){var a=[],f={status:"pending",value:null,reason:null,then:function(h){a.push(h)}};return r.then(function(){f.status="fulfilled",f.value=o;for(var h=0;h<a.length;h++)(0,a[h])(o)},function(h){for(f.status="rejected",f.reason=h,h=0;h<a.length;h++)(0,a[h])(void 0)}),f}var T0=F.S;F.S=function(r,o){cb=Zt(),typeof o=="object"&&o!==null&&typeof o.then=="function"&&mC(r,o),T0!==null&&T0(r,o)};var Qo=xe(null);function Xd(){var r=Qo.current;return r!==null?r:mt.pooledCache}function Pc(r,o){o===null?re(Qo,Qo.current):re(Qo,o.pool)}function M0(){var r=Xd();return r===null?null:{parent:Ut._currentValue,pool:r}}var Qs=Error(i(460)),Zd=Error(i(474)),Wc=Error(i(542)),Fc={then:function(){}};function A0(r){return r=r.status,r==="fulfilled"||r==="rejected"}function _0(r,o,a){switch(a=r[a],a===void 0?r.push(o):a!==o&&(o.then(me,me),o=a),o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,O0(r),r;default:if(typeof o.status=="string")o.then(me,me);else{if(r=mt,r!==null&&100<r.shellSuspendCounter)throw Error(i(482));r=o,r.status="pending",r.then(function(f){if(o.status==="pending"){var h=o;h.status="fulfilled",h.value=f}},function(f){if(o.status==="pending"){var h=o;h.status="rejected",h.reason=f}})}switch(o.status){case"fulfilled":return o.value;case"rejected":throw r=o.reason,O0(r),r}throw Xo=o,Qs}}function Jo(r){try{var o=r._init;return o(r._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(Xo=a,Qs):a}}var Xo=null;function j0(){if(Xo===null)throw Error(i(459));var r=Xo;return Xo=null,r}function O0(r){if(r===Qs||r===Wc)throw Error(i(483))}var Js=null,ia=0;function Gc(r){var o=ia;return ia+=1,Js===null&&(Js=[]),_0(Js,r,o)}function oa(r,o){o=o.props.ref,r.ref=o!==void 0?o:null}function $c(r,o){throw o.$$typeof===v?Error(i(525)):(r=Object.prototype.toString.call(o),Error(i(31,r==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":r)))}function N0(r){function o(D,z){if(r){var I=D.deletions;I===null?(D.deletions=[z],D.flags|=16):I.push(z)}}function a(D,z){if(!r)return null;for(;z!==null;)o(D,z),z=z.sibling;return null}function f(D){for(var z=new Map;D!==null;)D.key!==null?z.set(D.key,D):z.set(D.index,D),D=D.sibling;return z}function h(D,z){return D=ri(D,z),D.index=0,D.sibling=null,D}function g(D,z,I){return D.index=I,r?(I=D.alternate,I!==null?(I=I.index,I<z?(D.flags|=67108866,z):I):(D.flags|=67108866,z)):(D.flags|=1048576,z)}function S(D){return r&&D.alternate===null&&(D.flags|=67108866),D}function w(D,z,I,K){return z===null||z.tag!==6?(z=qd(I,D.mode,K),z.return=D,z):(z=h(z,I),z.return=D,z)}function j(D,z,I,K){var ke=I.type;return ke===C?Y(D,z,I.props.children,K,I.key):z!==null&&(z.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===ne&&Jo(ke)===z.type)?(z=h(z,I.props),oa(z,I),z.return=D,z):(z=Hc(I.type,I.key,I.props,null,D.mode,K),oa(z,I),z.return=D,z)}function H(D,z,I,K){return z===null||z.tag!==4||z.stateNode.containerInfo!==I.containerInfo||z.stateNode.implementation!==I.implementation?(z=Vd(I,D.mode,K),z.return=D,z):(z=h(z,I.children||[]),z.return=D,z)}function Y(D,z,I,K,ke){return z===null||z.tag!==7?(z=Go(I,D.mode,K,ke),z.return=D,z):(z=h(z,I),z.return=D,z)}function Q(D,z,I){if(typeof z=="string"&&z!==""||typeof z=="number"||typeof z=="bigint")return z=qd(""+z,D.mode,I),z.return=D,z;if(typeof z=="object"&&z!==null){switch(z.$$typeof){case x:return I=Hc(z.type,z.key,z.props,null,D.mode,I),oa(I,z),I.return=D,I;case k:return z=Vd(z,D.mode,I),z.return=D,z;case ne:return z=Jo(z),Q(D,z,I)}if(Le(z)||ye(z))return z=Go(z,D.mode,I,null),z.return=D,z;if(typeof z.then=="function")return Q(D,Gc(z),I);if(z.$$typeof===N)return Q(D,Vc(D,z),I);$c(D,z)}return null}function U(D,z,I,K){var ke=z!==null?z.key:null;if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return ke!==null?null:w(D,z,""+I,K);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case x:return I.key===ke?j(D,z,I,K):null;case k:return I.key===ke?H(D,z,I,K):null;case ne:return I=Jo(I),U(D,z,I,K)}if(Le(I)||ye(I))return ke!==null?null:Y(D,z,I,K,null);if(typeof I.then=="function")return U(D,z,Gc(I),K);if(I.$$typeof===N)return U(D,z,Vc(D,I),K);$c(D,I)}return null}function V(D,z,I,K,ke){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return D=D.get(I)||null,w(z,D,""+K,ke);if(typeof K=="object"&&K!==null){switch(K.$$typeof){case x:return D=D.get(K.key===null?I:K.key)||null,j(z,D,K,ke);case k:return D=D.get(K.key===null?I:K.key)||null,H(z,D,K,ke);case ne:return K=Jo(K),V(D,z,I,K,ke)}if(Le(K)||ye(K))return D=D.get(I)||null,Y(z,D,K,ke,null);if(typeof K.then=="function")return V(D,z,I,Gc(K),ke);if(K.$$typeof===N)return V(D,z,I,Vc(z,K),ke);$c(z,K)}return null}function fe(D,z,I,K){for(var ke=null,nt=null,ge=z,De=z=0,Ke=null;ge!==null&&De<I.length;De++){ge.index>De?(Ke=ge,ge=null):Ke=ge.sibling;var rt=U(D,ge,I[De],K);if(rt===null){ge===null&&(ge=Ke);break}r&&ge&&rt.alternate===null&&o(D,ge),z=g(rt,z,De),nt===null?ke=rt:nt.sibling=rt,nt=rt,ge=Ke}if(De===I.length)return a(D,ge),Je&&ii(D,De),ke;if(ge===null){for(;De<I.length;De++)ge=Q(D,I[De],K),ge!==null&&(z=g(ge,z,De),nt===null?ke=ge:nt.sibling=ge,nt=ge);return Je&&ii(D,De),ke}for(ge=f(ge);De<I.length;De++)Ke=V(ge,D,De,I[De],K),Ke!==null&&(r&&Ke.alternate!==null&&ge.delete(Ke.key===null?De:Ke.key),z=g(Ke,z,De),nt===null?ke=Ke:nt.sibling=Ke,nt=Ke);return r&&ge.forEach(function(co){return o(D,co)}),Je&&ii(D,De),ke}function Ee(D,z,I,K){if(I==null)throw Error(i(151));for(var ke=null,nt=null,ge=z,De=z=0,Ke=null,rt=I.next();ge!==null&&!rt.done;De++,rt=I.next()){ge.index>De?(Ke=ge,ge=null):Ke=ge.sibling;var co=U(D,ge,rt.value,K);if(co===null){ge===null&&(ge=Ke);break}r&&ge&&co.alternate===null&&o(D,ge),z=g(co,z,De),nt===null?ke=co:nt.sibling=co,nt=co,ge=Ke}if(rt.done)return a(D,ge),Je&&ii(D,De),ke;if(ge===null){for(;!rt.done;De++,rt=I.next())rt=Q(D,rt.value,K),rt!==null&&(z=g(rt,z,De),nt===null?ke=rt:nt.sibling=rt,nt=rt);return Je&&ii(D,De),ke}for(ge=f(ge);!rt.done;De++,rt=I.next())rt=V(ge,D,De,rt.value,K),rt!==null&&(r&&rt.alternate!==null&&ge.delete(rt.key===null?De:rt.key),z=g(rt,z,De),nt===null?ke=rt:nt.sibling=rt,nt=rt);return r&&ge.forEach(function(ME){return o(D,ME)}),Je&&ii(D,De),ke}function pt(D,z,I,K){if(typeof I=="object"&&I!==null&&I.type===C&&I.key===null&&(I=I.props.children),typeof I=="object"&&I!==null){switch(I.$$typeof){case x:e:{for(var ke=I.key;z!==null;){if(z.key===ke){if(ke=I.type,ke===C){if(z.tag===7){a(D,z.sibling),K=h(z,I.props.children),K.return=D,D=K;break e}}else if(z.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===ne&&Jo(ke)===z.type){a(D,z.sibling),K=h(z,I.props),oa(K,I),K.return=D,D=K;break e}a(D,z);break}else o(D,z);z=z.sibling}I.type===C?(K=Go(I.props.children,D.mode,K,I.key),K.return=D,D=K):(K=Hc(I.type,I.key,I.props,null,D.mode,K),oa(K,I),K.return=D,D=K)}return S(D);case k:e:{for(ke=I.key;z!==null;){if(z.key===ke)if(z.tag===4&&z.stateNode.containerInfo===I.containerInfo&&z.stateNode.implementation===I.implementation){a(D,z.sibling),K=h(z,I.children||[]),K.return=D,D=K;break e}else{a(D,z);break}else o(D,z);z=z.sibling}K=Vd(I,D.mode,K),K.return=D,D=K}return S(D);case ne:return I=Jo(I),pt(D,z,I,K)}if(Le(I))return fe(D,z,I,K);if(ye(I)){if(ke=ye(I),typeof ke!="function")throw Error(i(150));return I=ke.call(I),Ee(D,z,I,K)}if(typeof I.then=="function")return pt(D,z,Gc(I),K);if(I.$$typeof===N)return pt(D,z,Vc(D,I),K);$c(D,I)}return typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint"?(I=""+I,z!==null&&z.tag===6?(a(D,z.sibling),K=h(z,I),K.return=D,D=K):(a(D,z),K=qd(I,D.mode,K),K.return=D,D=K),S(D)):a(D,z)}return function(D,z,I,K){try{ia=0;var ke=pt(D,z,I,K);return Js=null,ke}catch(ge){if(ge===Qs||ge===Wc)throw ge;var nt=Vn(29,ge,null,D.mode);return nt.lanes=K,nt.return=D,nt}finally{}}}var Zo=N0(!0),z0=N0(!1),Gi=!1;function eh(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function th(r,o){r=r.updateQueue,o.updateQueue===r&&(o.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,callbacks:null})}function $i(r){return{lane:r,tag:0,payload:null,callback:null,next:null}}function Yi(r,o,a){var f=r.updateQueue;if(f===null)return null;if(f=f.shared,(it&2)!==0){var h=f.pending;return h===null?o.next=o:(o.next=h.next,h.next=o),f.pending=o,o=Ic(r),g0(r,null,a),o}return Bc(r,f,o,a),Ic(r)}function sa(r,o,a){if(o=o.updateQueue,o!==null&&(o=o.shared,(a&4194048)!==0)){var f=o.lanes;f&=r.pendingLanes,a|=f,o.lanes=a,Ec(r,a)}}function nh(r,o){var a=r.updateQueue,f=r.alternate;if(f!==null&&(f=f.updateQueue,a===f)){var h=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var S={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};g===null?h=g=S:g=g.next=S,a=a.next}while(a!==null);g===null?h=g=o:g=g.next=o}else h=g=o;a={baseState:f.baseState,firstBaseUpdate:h,lastBaseUpdate:g,shared:f.shared,callbacks:f.callbacks},r.updateQueue=a;return}r=a.lastBaseUpdate,r===null?a.firstBaseUpdate=o:r.next=o,a.lastBaseUpdate=o}var rh=!1;function la(){if(rh){var r=Ks;if(r!==null)throw r}}function aa(r,o,a,f){rh=!1;var h=r.updateQueue;Gi=!1;var g=h.firstBaseUpdate,S=h.lastBaseUpdate,w=h.shared.pending;if(w!==null){h.shared.pending=null;var j=w,H=j.next;j.next=null,S===null?g=H:S.next=H,S=j;var Y=r.alternate;Y!==null&&(Y=Y.updateQueue,w=Y.lastBaseUpdate,w!==S&&(w===null?Y.firstBaseUpdate=H:w.next=H,Y.lastBaseUpdate=j))}if(g!==null){var Q=h.baseState;S=0,Y=H=j=null,w=g;do{var U=w.lane&-536870913,V=U!==w.lane;if(V?(Ye&U)===U:(f&U)===U){U!==0&&U===Ys&&(rh=!0),Y!==null&&(Y=Y.next={lane:0,tag:w.tag,payload:w.payload,callback:null,next:null});e:{var fe=r,Ee=w;U=o;var pt=a;switch(Ee.tag){case 1:if(fe=Ee.payload,typeof fe=="function"){Q=fe.call(pt,Q,U);break e}Q=fe;break e;case 3:fe.flags=fe.flags&-65537|128;case 0:if(fe=Ee.payload,U=typeof fe=="function"?fe.call(pt,Q,U):fe,U==null)break e;Q=b({},Q,U);break e;case 2:Gi=!0}}U=w.callback,U!==null&&(r.flags|=64,V&&(r.flags|=8192),V=h.callbacks,V===null?h.callbacks=[U]:V.push(U))}else V={lane:U,tag:w.tag,payload:w.payload,callback:w.callback,next:null},Y===null?(H=Y=V,j=Q):Y=Y.next=V,S|=U;if(w=w.next,w===null){if(w=h.shared.pending,w===null)break;V=w,w=V.next,V.next=null,h.lastBaseUpdate=V,h.shared.pending=null}}while(!0);Y===null&&(j=Q),h.baseState=j,h.firstBaseUpdate=H,h.lastBaseUpdate=Y,g===null&&(h.shared.lanes=0),Zi|=S,r.lanes=S,r.memoizedState=Q}}function R0(r,o){if(typeof r!="function")throw Error(i(191,r));r.call(o)}function D0(r,o){var a=r.callbacks;if(a!==null)for(r.callbacks=null,r=0;r<a.length;r++)R0(a[r],o)}var Xs=xe(null),Yc=xe(0);function L0(r,o){r=mi,re(Yc,r),re(Xs,o),mi=r|o.baseLanes}function ih(){re(Yc,mi),re(Xs,Xs.current)}function oh(){mi=Yc.current,ee(Xs),ee(Yc)}var Pn=xe(null),sr=null;function Ki(r){var o=r.alternate;re(Rt,Rt.current&1),re(Pn,r),sr===null&&(o===null||Xs.current!==null||o.memoizedState!==null)&&(sr=r)}function sh(r){re(Rt,Rt.current),re(Pn,r),sr===null&&(sr=r)}function B0(r){r.tag===22?(re(Rt,Rt.current),re(Pn,r),sr===null&&(sr=r)):Qi()}function Qi(){re(Rt,Rt.current),re(Pn,Pn.current)}function Wn(r){ee(Pn),sr===r&&(sr=null),ee(Rt)}var Rt=xe(0);function Kc(r){for(var o=r;o!==null;){if(o.tag===13){var a=o.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||dp(a)||hp(a)))return o}else if(o.tag===19&&(o.memoizedProps.revealOrder==="forwards"||o.memoizedProps.revealOrder==="backwards"||o.memoizedProps.revealOrder==="unstable_legacy-backwards"||o.memoizedProps.revealOrder==="together")){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var li=0,ze=null,dt=null,qt=null,Qc=!1,Zs=!1,es=!1,Jc=0,ca=0,el=null,yC=0;function jt(){throw Error(i(321))}function lh(r,o){if(o===null)return!1;for(var a=0;a<o.length&&a<r.length;a++)if(!qn(r[a],o[a]))return!1;return!0}function ah(r,o,a,f,h,g){return li=g,ze=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,F.H=r===null||r.memoizedState===null?xy:Ch,es=!1,g=a(f,h),es=!1,Zs&&(g=H0(o,a,f,h)),I0(r),g}function I0(r){F.H=da;var o=dt!==null&&dt.next!==null;if(li=0,qt=dt=ze=null,Qc=!1,ca=0,el=null,o)throw Error(i(300));r===null||Vt||(r=r.dependencies,r!==null&&qc(r)&&(Vt=!0))}function H0(r,o,a,f){ze=r;var h=0;do{if(Zs&&(el=null),ca=0,Zs=!1,25<=h)throw Error(i(301));if(h+=1,qt=dt=null,r.updateQueue!=null){var g=r.updateQueue;g.lastEffect=null,g.events=null,g.stores=null,g.memoCache!=null&&(g.memoCache.index=0)}F.H=Sy,g=o(a,f)}while(Zs);return g}function bC(){var r=F.H,o=r.useState()[0];return o=typeof o.then=="function"?ua(o):o,r=r.useState()[0],(dt!==null?dt.memoizedState:null)!==r&&(ze.flags|=1024),o}function ch(){var r=Jc!==0;return Jc=0,r}function uh(r,o,a){o.updateQueue=r.updateQueue,o.flags&=-2053,r.lanes&=~a}function fh(r){if(Qc){for(r=r.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Qc=!1}li=0,qt=dt=ze=null,Zs=!1,ca=Jc=0,el=null}function Cn(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return qt===null?ze.memoizedState=qt=r:qt=qt.next=r,qt}function Dt(){if(dt===null){var r=ze.alternate;r=r!==null?r.memoizedState:null}else r=dt.next;var o=qt===null?ze.memoizedState:qt.next;if(o!==null)qt=o,dt=r;else{if(r===null)throw ze.alternate===null?Error(i(467)):Error(i(310));dt=r,r={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},qt===null?ze.memoizedState=qt=r:qt=qt.next=r}return qt}function Xc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ua(r){var o=ca;return ca+=1,el===null&&(el=[]),r=_0(el,r,o),o=ze,(qt===null?o.memoizedState:qt.next)===null&&(o=o.alternate,F.H=o===null||o.memoizedState===null?xy:Ch),r}function Zc(r){if(r!==null&&typeof r=="object"){if(typeof r.then=="function")return ua(r);if(r.$$typeof===N)return cn(r)}throw Error(i(438,String(r)))}function dh(r){var o=null,a=ze.updateQueue;if(a!==null&&(o=a.memoCache),o==null){var f=ze.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(o={data:f.data.map(function(h){return h.slice()}),index:0})))}if(o==null&&(o={data:[],index:0}),a===null&&(a=Xc(),ze.updateQueue=a),a.memoCache=o,a=o.data[o.index],a===void 0)for(a=o.data[o.index]=Array(r),f=0;f<r;f++)a[f]=qe;return o.index++,a}function ai(r,o){return typeof o=="function"?o(r):o}function eu(r){var o=Dt();return hh(o,dt,r)}function hh(r,o,a){var f=r.queue;if(f===null)throw Error(i(311));f.lastRenderedReducer=a;var h=r.baseQueue,g=f.pending;if(g!==null){if(h!==null){var S=h.next;h.next=g.next,g.next=S}o.baseQueue=h=g,f.pending=null}if(g=r.baseState,h===null)r.memoizedState=g;else{o=h.next;var w=S=null,j=null,H=o,Y=!1;do{var Q=H.lane&-536870913;if(Q!==H.lane?(Ye&Q)===Q:(li&Q)===Q){var U=H.revertLane;if(U===0)j!==null&&(j=j.next={lane:0,revertLane:0,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null}),Q===Ys&&(Y=!0);else if((li&U)===U){H=H.next,U===Ys&&(Y=!0);continue}else Q={lane:0,revertLane:H.revertLane,gesture:null,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},j===null?(w=j=Q,S=g):j=j.next=Q,ze.lanes|=U,Zi|=U;Q=H.action,es&&a(g,Q),g=H.hasEagerState?H.eagerState:a(g,Q)}else U={lane:Q,revertLane:H.revertLane,gesture:H.gesture,action:H.action,hasEagerState:H.hasEagerState,eagerState:H.eagerState,next:null},j===null?(w=j=U,S=g):j=j.next=U,ze.lanes|=Q,Zi|=Q;H=H.next}while(H!==null&&H!==o);if(j===null?S=g:j.next=w,!qn(g,r.memoizedState)&&(Vt=!0,Y&&(a=Ks,a!==null)))throw a;r.memoizedState=g,r.baseState=S,r.baseQueue=j,f.lastRenderedState=g}return h===null&&(f.lanes=0),[r.memoizedState,f.dispatch]}function ph(r){var o=Dt(),a=o.queue;if(a===null)throw Error(i(311));a.lastRenderedReducer=r;var f=a.dispatch,h=a.pending,g=o.memoizedState;if(h!==null){a.pending=null;var S=h=h.next;do g=r(g,S.action),S=S.next;while(S!==h);qn(g,o.memoizedState)||(Vt=!0),o.memoizedState=g,o.baseQueue===null&&(o.baseState=g),a.lastRenderedState=g}return[g,f]}function U0(r,o,a){var f=ze,h=Dt(),g=Je;if(g){if(a===void 0)throw Error(i(407));a=a()}else a=o();var S=!qn((dt||h).memoizedState,a);if(S&&(h.memoizedState=a,Vt=!0),h=h.queue,yh(P0.bind(null,f,h,r),[r]),h.getSnapshot!==o||S||qt!==null&&qt.memoizedState.tag&1){if(f.flags|=2048,tl(9,{destroy:void 0},V0.bind(null,f,h,a,o),null),mt===null)throw Error(i(349));g||(li&127)!==0||q0(f,o,a)}return a}function q0(r,o,a){r.flags|=16384,r={getSnapshot:o,value:a},o=ze.updateQueue,o===null?(o=Xc(),ze.updateQueue=o,o.stores=[r]):(a=o.stores,a===null?o.stores=[r]:a.push(r))}function V0(r,o,a,f){o.value=a,o.getSnapshot=f,W0(o)&&F0(r)}function P0(r,o,a){return a(function(){W0(o)&&F0(r)})}function W0(r){var o=r.getSnapshot;r=r.value;try{var a=o();return!qn(r,a)}catch{return!0}}function F0(r){var o=Fo(r,2);o!==null&&Ln(o,r,2)}function mh(r){var o=Cn();if(typeof r=="function"){var a=r;if(r=a(),es){Or(!0);try{a()}finally{Or(!1)}}}return o.memoizedState=o.baseState=r,o.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:ai,lastRenderedState:r},o}function G0(r,o,a,f){return r.baseState=a,hh(r,dt,typeof f=="function"?f:ai)}function vC(r,o,a,f,h){if(ru(r))throw Error(i(485));if(r=o.action,r!==null){var g={payload:h,action:r,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(S){g.listeners.push(S)}};F.T!==null?a(!0):g.isTransition=!1,f(g),a=o.pending,a===null?(g.next=o.pending=g,$0(o,g)):(g.next=a.next,o.pending=a.next=g)}}function $0(r,o){var a=o.action,f=o.payload,h=r.state;if(o.isTransition){var g=F.T,S={};F.T=S;try{var w=a(h,f),j=F.S;j!==null&&j(S,w),Y0(r,o,w)}catch(H){gh(r,o,H)}finally{g!==null&&S.types!==null&&(g.types=S.types),F.T=g}}else try{g=a(h,f),Y0(r,o,g)}catch(H){gh(r,o,H)}}function Y0(r,o,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(f){K0(r,o,f)},function(f){return gh(r,o,f)}):K0(r,o,a)}function K0(r,o,a){o.status="fulfilled",o.value=a,Q0(o),r.state=a,o=r.pending,o!==null&&(a=o.next,a===o?r.pending=null:(a=a.next,o.next=a,$0(r,a)))}function gh(r,o,a){var f=r.pending;if(r.pending=null,f!==null){f=f.next;do o.status="rejected",o.reason=a,Q0(o),o=o.next;while(o!==f)}r.action=null}function Q0(r){r=r.listeners;for(var o=0;o<r.length;o++)(0,r[o])()}function J0(r,o){return o}function X0(r,o){if(Je){var a=mt.formState;if(a!==null){e:{var f=ze;if(Je){if(bt){t:{for(var h=bt,g=or;h.nodeType!==8;){if(!g){h=null;break t}if(h=lr(h.nextSibling),h===null){h=null;break t}}g=h.data,h=g==="F!"||g==="F"?h:null}if(h){bt=lr(h.nextSibling),f=h.data==="F!";break e}}Wi(f)}f=!1}f&&(o=a[0])}}return a=Cn(),a.memoizedState=a.baseState=o,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:J0,lastRenderedState:o},a.queue=f,a=yy.bind(null,ze,f),f.dispatch=a,f=mh(!1),g=kh.bind(null,ze,!1,f.queue),f=Cn(),h={state:o,dispatch:null,action:r,pending:null},f.queue=h,a=vC.bind(null,ze,h,g,a),h.dispatch=a,f.memoizedState=r,[o,a,!1]}function Z0(r){var o=Dt();return ey(o,dt,r)}function ey(r,o,a){if(o=hh(r,o,J0)[0],r=eu(ai)[0],typeof o=="object"&&o!==null&&typeof o.then=="function")try{var f=ua(o)}catch(S){throw S===Qs?Wc:S}else f=o;o=Dt();var h=o.queue,g=h.dispatch;return a!==o.memoizedState&&(ze.flags|=2048,tl(9,{destroy:void 0},xC.bind(null,h,a),null)),[f,g,r]}function xC(r,o){r.action=o}function ty(r){var o=Dt(),a=dt;if(a!==null)return ey(o,a,r);Dt(),o=o.memoizedState,a=Dt();var f=a.queue.dispatch;return a.memoizedState=r,[o,f,!1]}function tl(r,o,a,f){return r={tag:r,create:a,deps:f,inst:o,next:null},o=ze.updateQueue,o===null&&(o=Xc(),ze.updateQueue=o),a=o.lastEffect,a===null?o.lastEffect=r.next=r:(f=a.next,a.next=r,r.next=f,o.lastEffect=r),r}function ny(){return Dt().memoizedState}function tu(r,o,a,f){var h=Cn();ze.flags|=r,h.memoizedState=tl(1|o,{destroy:void 0},a,f===void 0?null:f)}function nu(r,o,a,f){var h=Dt();f=f===void 0?null:f;var g=h.memoizedState.inst;dt!==null&&f!==null&&lh(f,dt.memoizedState.deps)?h.memoizedState=tl(o,g,a,f):(ze.flags|=r,h.memoizedState=tl(1|o,g,a,f))}function ry(r,o){tu(8390656,8,r,o)}function yh(r,o){nu(2048,8,r,o)}function SC(r){ze.flags|=4;var o=ze.updateQueue;if(o===null)o=Xc(),ze.updateQueue=o,o.events=[r];else{var a=o.events;a===null?o.events=[r]:a.push(r)}}function iy(r){var o=Dt().memoizedState;return SC({ref:o,nextImpl:r}),function(){if((it&2)!==0)throw Error(i(440));return o.impl.apply(void 0,arguments)}}function oy(r,o){return nu(4,2,r,o)}function sy(r,o){return nu(4,4,r,o)}function ly(r,o){if(typeof o=="function"){r=r();var a=o(r);return function(){typeof a=="function"?a():o(null)}}if(o!=null)return r=r(),o.current=r,function(){o.current=null}}function ay(r,o,a){a=a!=null?a.concat([r]):null,nu(4,4,ly.bind(null,o,r),a)}function bh(){}function cy(r,o){var a=Dt();o=o===void 0?null:o;var f=a.memoizedState;return o!==null&&lh(o,f[1])?f[0]:(a.memoizedState=[r,o],r)}function uy(r,o){var a=Dt();o=o===void 0?null:o;var f=a.memoizedState;if(o!==null&&lh(o,f[1]))return f[0];if(f=r(),es){Or(!0);try{r()}finally{Or(!1)}}return a.memoizedState=[f,o],f}function vh(r,o,a){return a===void 0||(li&1073741824)!==0&&(Ye&261930)===0?r.memoizedState=o:(r.memoizedState=a,r=fb(),ze.lanes|=r,Zi|=r,a)}function fy(r,o,a,f){return qn(a,o)?a:Xs.current!==null?(r=vh(r,a,f),qn(r,o)||(Vt=!0),r):(li&42)===0||(li&1073741824)!==0&&(Ye&261930)===0?(Vt=!0,r.memoizedState=a):(r=fb(),ze.lanes|=r,Zi|=r,o)}function dy(r,o,a,f,h){var g=X.p;X.p=g!==0&&8>g?g:8;var S=F.T,w={};F.T=w,kh(r,!1,o,a);try{var j=h(),H=F.S;if(H!==null&&H(w,j),j!==null&&typeof j=="object"&&typeof j.then=="function"){var Y=gC(j,f);fa(r,o,Y,$n(r))}else fa(r,o,f,$n(r))}catch(Q){fa(r,o,{then:function(){},status:"rejected",reason:Q},$n())}finally{X.p=g,S!==null&&w.types!==null&&(S.types=w.types),F.T=S}}function kC(){}function xh(r,o,a,f){if(r.tag!==5)throw Error(i(476));var h=hy(r).queue;dy(r,h,o,be,a===null?kC:function(){return py(r),a(f)})}function hy(r){var o=r.memoizedState;if(o!==null)return o;o={memoizedState:be,baseState:be,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ai,lastRenderedState:be},next:null};var a={};return o.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:ai,lastRenderedState:a},next:null},r.memoizedState=o,r=r.alternate,r!==null&&(r.memoizedState=o),o}function py(r){var o=hy(r);o.next===null&&(o=r.alternate.memoizedState),fa(r,o.next.queue,{},$n())}function Sh(){return cn(Aa)}function my(){return Dt().memoizedState}function gy(){return Dt().memoizedState}function CC(r){for(var o=r.return;o!==null;){switch(o.tag){case 24:case 3:var a=$n();r=$i(a);var f=Yi(o,r,a);f!==null&&(Ln(f,o,a),sa(f,o,a)),o={cache:Qd()},r.payload=o;return}o=o.return}}function EC(r,o,a){var f=$n();a={lane:f,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},ru(r)?by(o,a):(a=Hd(r,o,a,f),a!==null&&(Ln(a,r,f),vy(a,o,f)))}function yy(r,o,a){var f=$n();fa(r,o,a,f)}function fa(r,o,a,f){var h={lane:f,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(ru(r))by(o,h);else{var g=r.alternate;if(r.lanes===0&&(g===null||g.lanes===0)&&(g=o.lastRenderedReducer,g!==null))try{var S=o.lastRenderedState,w=g(S,a);if(h.hasEagerState=!0,h.eagerState=w,qn(w,S))return Bc(r,o,h,0),mt===null&&Lc(),!1}catch{}finally{}if(a=Hd(r,o,h,f),a!==null)return Ln(a,r,f),vy(a,o,f),!0}return!1}function kh(r,o,a,f){if(f={lane:2,revertLane:ep(),gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},ru(r)){if(o)throw Error(i(479))}else o=Hd(r,a,f,2),o!==null&&Ln(o,r,2)}function ru(r){var o=r.alternate;return r===ze||o!==null&&o===ze}function by(r,o){Zs=Qc=!0;var a=r.pending;a===null?o.next=o:(o.next=a.next,a.next=o),r.pending=o}function vy(r,o,a){if((a&4194048)!==0){var f=o.lanes;f&=r.pendingLanes,a|=f,o.lanes=a,Ec(r,a)}}var da={readContext:cn,use:Zc,useCallback:jt,useContext:jt,useEffect:jt,useImperativeHandle:jt,useLayoutEffect:jt,useInsertionEffect:jt,useMemo:jt,useReducer:jt,useRef:jt,useState:jt,useDebugValue:jt,useDeferredValue:jt,useTransition:jt,useSyncExternalStore:jt,useId:jt,useHostTransitionStatus:jt,useFormState:jt,useActionState:jt,useOptimistic:jt,useMemoCache:jt,useCacheRefresh:jt};da.useEffectEvent=jt;var xy={readContext:cn,use:Zc,useCallback:function(r,o){return Cn().memoizedState=[r,o===void 0?null:o],r},useContext:cn,useEffect:ry,useImperativeHandle:function(r,o,a){a=a!=null?a.concat([r]):null,tu(4194308,4,ly.bind(null,o,r),a)},useLayoutEffect:function(r,o){return tu(4194308,4,r,o)},useInsertionEffect:function(r,o){tu(4,2,r,o)},useMemo:function(r,o){var a=Cn();o=o===void 0?null:o;var f=r();if(es){Or(!0);try{r()}finally{Or(!1)}}return a.memoizedState=[f,o],f},useReducer:function(r,o,a){var f=Cn();if(a!==void 0){var h=a(o);if(es){Or(!0);try{a(o)}finally{Or(!1)}}}else h=o;return f.memoizedState=f.baseState=h,r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:h},f.queue=r,r=r.dispatch=EC.bind(null,ze,r),[f.memoizedState,r]},useRef:function(r){var o=Cn();return r={current:r},o.memoizedState=r},useState:function(r){r=mh(r);var o=r.queue,a=yy.bind(null,ze,o);return o.dispatch=a,[r.memoizedState,a]},useDebugValue:bh,useDeferredValue:function(r,o){var a=Cn();return vh(a,r,o)},useTransition:function(){var r=mh(!1);return r=dy.bind(null,ze,r.queue,!0,!1),Cn().memoizedState=r,[!1,r]},useSyncExternalStore:function(r,o,a){var f=ze,h=Cn();if(Je){if(a===void 0)throw Error(i(407));a=a()}else{if(a=o(),mt===null)throw Error(i(349));(Ye&127)!==0||q0(f,o,a)}h.memoizedState=a;var g={value:a,getSnapshot:o};return h.queue=g,ry(P0.bind(null,f,g,r),[r]),f.flags|=2048,tl(9,{destroy:void 0},V0.bind(null,f,g,a,o),null),a},useId:function(){var r=Cn(),o=mt.identifierPrefix;if(Je){var a=Br,f=Lr;a=(f&~(1<<32-Sn(f)-1)).toString(32)+a,o="_"+o+"R_"+a,a=Jc++,0<a&&(o+="H"+a.toString(32)),o+="_"}else a=yC++,o="_"+o+"r_"+a.toString(32)+"_";return r.memoizedState=o},useHostTransitionStatus:Sh,useFormState:X0,useActionState:X0,useOptimistic:function(r){var o=Cn();o.memoizedState=o.baseState=r;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return o.queue=a,o=kh.bind(null,ze,!0,a),a.dispatch=o,[r,o]},useMemoCache:dh,useCacheRefresh:function(){return Cn().memoizedState=CC.bind(null,ze)},useEffectEvent:function(r){var o=Cn(),a={impl:r};return o.memoizedState=a,function(){if((it&2)!==0)throw Error(i(440));return a.impl.apply(void 0,arguments)}}},Ch={readContext:cn,use:Zc,useCallback:cy,useContext:cn,useEffect:yh,useImperativeHandle:ay,useInsertionEffect:oy,useLayoutEffect:sy,useMemo:uy,useReducer:eu,useRef:ny,useState:function(){return eu(ai)},useDebugValue:bh,useDeferredValue:function(r,o){var a=Dt();return fy(a,dt.memoizedState,r,o)},useTransition:function(){var r=eu(ai)[0],o=Dt().memoizedState;return[typeof r=="boolean"?r:ua(r),o]},useSyncExternalStore:U0,useId:my,useHostTransitionStatus:Sh,useFormState:Z0,useActionState:Z0,useOptimistic:function(r,o){var a=Dt();return G0(a,dt,r,o)},useMemoCache:dh,useCacheRefresh:gy};Ch.useEffectEvent=iy;var Sy={readContext:cn,use:Zc,useCallback:cy,useContext:cn,useEffect:yh,useImperativeHandle:ay,useInsertionEffect:oy,useLayoutEffect:sy,useMemo:uy,useReducer:ph,useRef:ny,useState:function(){return ph(ai)},useDebugValue:bh,useDeferredValue:function(r,o){var a=Dt();return dt===null?vh(a,r,o):fy(a,dt.memoizedState,r,o)},useTransition:function(){var r=ph(ai)[0],o=Dt().memoizedState;return[typeof r=="boolean"?r:ua(r),o]},useSyncExternalStore:U0,useId:my,useHostTransitionStatus:Sh,useFormState:ty,useActionState:ty,useOptimistic:function(r,o){var a=Dt();return dt!==null?G0(a,dt,r,o):(a.baseState=r,[r,a.queue.dispatch])},useMemoCache:dh,useCacheRefresh:gy};Sy.useEffectEvent=iy;function Eh(r,o,a,f){o=r.memoizedState,a=a(f,o),a=a==null?o:b({},o,a),r.memoizedState=a,r.lanes===0&&(r.updateQueue.baseState=a)}var wh={enqueueSetState:function(r,o,a){r=r._reactInternals;var f=$n(),h=$i(f);h.payload=o,a!=null&&(h.callback=a),o=Yi(r,h,f),o!==null&&(Ln(o,r,f),sa(o,r,f))},enqueueReplaceState:function(r,o,a){r=r._reactInternals;var f=$n(),h=$i(f);h.tag=1,h.payload=o,a!=null&&(h.callback=a),o=Yi(r,h,f),o!==null&&(Ln(o,r,f),sa(o,r,f))},enqueueForceUpdate:function(r,o){r=r._reactInternals;var a=$n(),f=$i(a);f.tag=2,o!=null&&(f.callback=o),o=Yi(r,f,a),o!==null&&(Ln(o,r,a),sa(o,r,a))}};function ky(r,o,a,f,h,g,S){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(f,g,S):o.prototype&&o.prototype.isPureReactComponent?!Xl(a,f)||!Xl(h,g):!0}function Cy(r,o,a,f){r=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(a,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(a,f),o.state!==r&&wh.enqueueReplaceState(o,o.state,null)}function ts(r,o){var a=o;if("ref"in o){a={};for(var f in o)f!=="ref"&&(a[f]=o[f])}if(r=r.defaultProps){a===o&&(a=b({},a));for(var h in r)a[h]===void 0&&(a[h]=r[h])}return a}function Ey(r){Dc(r)}function wy(r){console.error(r)}function Ty(r){Dc(r)}function iu(r,o){try{var a=r.onUncaughtError;a(o.value,{componentStack:o.stack})}catch(f){setTimeout(function(){throw f})}}function My(r,o,a){try{var f=r.onCaughtError;f(a.value,{componentStack:a.stack,errorBoundary:o.tag===1?o.stateNode:null})}catch(h){setTimeout(function(){throw h})}}function Th(r,o,a){return a=$i(a),a.tag=3,a.payload={element:null},a.callback=function(){iu(r,o)},a}function Ay(r){return r=$i(r),r.tag=3,r}function _y(r,o,a,f){var h=a.type.getDerivedStateFromError;if(typeof h=="function"){var g=f.value;r.payload=function(){return h(g)},r.callback=function(){My(o,a,f)}}var S=a.stateNode;S!==null&&typeof S.componentDidCatch=="function"&&(r.callback=function(){My(o,a,f),typeof h!="function"&&(eo===null?eo=new Set([this]):eo.add(this));var w=f.stack;this.componentDidCatch(f.value,{componentStack:w!==null?w:""})})}function wC(r,o,a,f,h){if(a.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(o=a.alternate,o!==null&&$s(o,a,h,!0),a=Pn.current,a!==null){switch(a.tag){case 31:case 13:return sr===null?gu():a.alternate===null&&Ot===0&&(Ot=3),a.flags&=-257,a.flags|=65536,a.lanes=h,f===Fc?a.flags|=16384:(o=a.updateQueue,o===null?a.updateQueue=new Set([f]):o.add(f),Jh(r,f,h)),!1;case 22:return a.flags|=65536,f===Fc?a.flags|=16384:(o=a.updateQueue,o===null?(o={transitions:null,markerInstances:null,retryQueue:new Set([f])},a.updateQueue=o):(a=o.retryQueue,a===null?o.retryQueue=new Set([f]):a.add(f)),Jh(r,f,h)),!1}throw Error(i(435,a.tag))}return Jh(r,f,h),gu(),!1}if(Je)return o=Pn.current,o!==null?((o.flags&65536)===0&&(o.flags|=256),o.flags|=65536,o.lanes=h,f!==Fd&&(r=Error(i(422),{cause:f}),ta(nr(r,a)))):(f!==Fd&&(o=Error(i(423),{cause:f}),ta(nr(o,a))),r=r.current.alternate,r.flags|=65536,h&=-h,r.lanes|=h,f=nr(f,a),h=Th(r.stateNode,f,h),nh(r,h),Ot!==4&&(Ot=2)),!1;var g=Error(i(520),{cause:f});if(g=nr(g,a),xa===null?xa=[g]:xa.push(g),Ot!==4&&(Ot=2),o===null)return!0;f=nr(f,a),a=o;do{switch(a.tag){case 3:return a.flags|=65536,r=h&-h,a.lanes|=r,r=Th(a.stateNode,f,r),nh(a,r),!1;case 1:if(o=a.type,g=a.stateNode,(a.flags&128)===0&&(typeof o.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(eo===null||!eo.has(g))))return a.flags|=65536,h&=-h,a.lanes|=h,h=Ay(h),_y(h,r,a,f),nh(a,h),!1}a=a.return}while(a!==null);return!1}var Mh=Error(i(461)),Vt=!1;function un(r,o,a,f){o.child=r===null?z0(o,null,a,f):Zo(o,r.child,a,f)}function jy(r,o,a,f,h){a=a.render;var g=o.ref;if("ref"in f){var S={};for(var w in f)w!=="ref"&&(S[w]=f[w])}else S=f;return Ko(o),f=ah(r,o,a,S,g,h),w=ch(),r!==null&&!Vt?(uh(r,o,h),ci(r,o,h)):(Je&&w&&Pd(o),o.flags|=1,un(r,o,f,h),o.child)}function Oy(r,o,a,f,h){if(r===null){var g=a.type;return typeof g=="function"&&!Ud(g)&&g.defaultProps===void 0&&a.compare===null?(o.tag=15,o.type=g,Ny(r,o,g,f,h)):(r=Hc(a.type,null,f,o,o.mode,h),r.ref=o.ref,r.return=o,o.child=r)}if(g=r.child,!Dh(r,h)){var S=g.memoizedProps;if(a=a.compare,a=a!==null?a:Xl,a(S,f)&&r.ref===o.ref)return ci(r,o,h)}return o.flags|=1,r=ri(g,f),r.ref=o.ref,r.return=o,o.child=r}function Ny(r,o,a,f,h){if(r!==null){var g=r.memoizedProps;if(Xl(g,f)&&r.ref===o.ref)if(Vt=!1,o.pendingProps=f=g,Dh(r,h))(r.flags&131072)!==0&&(Vt=!0);else return o.lanes=r.lanes,ci(r,o,h)}return Ah(r,o,a,f,h)}function zy(r,o,a,f){var h=f.children,g=r!==null?r.memoizedState:null;if(r===null&&o.stateNode===null&&(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.mode==="hidden"){if((o.flags&128)!==0){if(g=g!==null?g.baseLanes|a:a,r!==null){for(f=o.child=r.child,h=0;f!==null;)h=h|f.lanes|f.childLanes,f=f.sibling;f=h&~g}else f=0,o.child=null;return Ry(r,o,g,a,f)}if((a&536870912)!==0)o.memoizedState={baseLanes:0,cachePool:null},r!==null&&Pc(o,g!==null?g.cachePool:null),g!==null?L0(o,g):ih(),B0(o);else return f=o.lanes=536870912,Ry(r,o,g!==null?g.baseLanes|a:a,a,f)}else g!==null?(Pc(o,g.cachePool),L0(o,g),Qi(),o.memoizedState=null):(r!==null&&Pc(o,null),ih(),Qi());return un(r,o,h,a),o.child}function ha(r,o){return r!==null&&r.tag===22||o.stateNode!==null||(o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),o.sibling}function Ry(r,o,a,f,h){var g=Xd();return g=g===null?null:{parent:Ut._currentValue,pool:g},o.memoizedState={baseLanes:a,cachePool:g},r!==null&&Pc(o,null),ih(),B0(o),r!==null&&$s(r,o,f,!0),o.childLanes=h,null}function ou(r,o){return o=lu({mode:o.mode,children:o.children},r.mode),o.ref=r.ref,r.child=o,o.return=r,o}function Dy(r,o,a){return Zo(o,r.child,null,a),r=ou(o,o.pendingProps),r.flags|=2,Wn(o),o.memoizedState=null,r}function TC(r,o,a){var f=o.pendingProps,h=(o.flags&128)!==0;if(o.flags&=-129,r===null){if(Je){if(f.mode==="hidden")return r=ou(o,f),o.lanes=536870912,ha(null,r);if(sh(o),(r=bt)?(r=$b(r,or),r=r!==null&&r.data==="&"?r:null,r!==null&&(o.memoizedState={dehydrated:r,treeContext:Vi!==null?{id:Lr,overflow:Br}:null,retryLane:536870912,hydrationErrors:null},a=b0(r),a.return=o,o.child=a,an=o,bt=null)):r=null,r===null)throw Wi(o);return o.lanes=536870912,null}return ou(o,f)}var g=r.memoizedState;if(g!==null){var S=g.dehydrated;if(sh(o),h)if(o.flags&256)o.flags&=-257,o=Dy(r,o,a);else if(o.memoizedState!==null)o.child=r.child,o.flags|=128,o=null;else throw Error(i(558));else if(Vt||$s(r,o,a,!1),h=(a&r.childLanes)!==0,Vt||h){if(f=mt,f!==null&&(S=je(f,a),S!==0&&S!==g.retryLane))throw g.retryLane=S,Fo(r,S),Ln(f,r,S),Mh;gu(),o=Dy(r,o,a)}else r=g.treeContext,bt=lr(S.nextSibling),an=o,Je=!0,Pi=null,or=!1,r!==null&&S0(o,r),o=ou(o,f),o.flags|=4096;return o}return r=ri(r.child,{mode:f.mode,children:f.children}),r.ref=o.ref,o.child=r,r.return=o,r}function su(r,o){var a=o.ref;if(a===null)r!==null&&r.ref!==null&&(o.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(i(284));(r===null||r.ref!==a)&&(o.flags|=4194816)}}function Ah(r,o,a,f,h){return Ko(o),a=ah(r,o,a,f,void 0,h),f=ch(),r!==null&&!Vt?(uh(r,o,h),ci(r,o,h)):(Je&&f&&Pd(o),o.flags|=1,un(r,o,a,h),o.child)}function Ly(r,o,a,f,h,g){return Ko(o),o.updateQueue=null,a=H0(o,f,a,h),I0(r),f=ch(),r!==null&&!Vt?(uh(r,o,g),ci(r,o,g)):(Je&&f&&Pd(o),o.flags|=1,un(r,o,a,g),o.child)}function By(r,o,a,f,h){if(Ko(o),o.stateNode===null){var g=Ps,S=a.contextType;typeof S=="object"&&S!==null&&(g=cn(S)),g=new a(f,g),o.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,g.updater=wh,o.stateNode=g,g._reactInternals=o,g=o.stateNode,g.props=f,g.state=o.memoizedState,g.refs={},eh(o),S=a.contextType,g.context=typeof S=="object"&&S!==null?cn(S):Ps,g.state=o.memoizedState,S=a.getDerivedStateFromProps,typeof S=="function"&&(Eh(o,a,S,f),g.state=o.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(S=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),S!==g.state&&wh.enqueueReplaceState(g,g.state,null),aa(o,f,g,h),la(),g.state=o.memoizedState),typeof g.componentDidMount=="function"&&(o.flags|=4194308),f=!0}else if(r===null){g=o.stateNode;var w=o.memoizedProps,j=ts(a,w);g.props=j;var H=g.context,Y=a.contextType;S=Ps,typeof Y=="object"&&Y!==null&&(S=cn(Y));var Q=a.getDerivedStateFromProps;Y=typeof Q=="function"||typeof g.getSnapshotBeforeUpdate=="function",w=o.pendingProps!==w,Y||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(w||H!==S)&&Cy(o,g,f,S),Gi=!1;var U=o.memoizedState;g.state=U,aa(o,f,g,h),la(),H=o.memoizedState,w||U!==H||Gi?(typeof Q=="function"&&(Eh(o,a,Q,f),H=o.memoizedState),(j=Gi||ky(o,a,j,f,U,H,S))?(Y||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount()),typeof g.componentDidMount=="function"&&(o.flags|=4194308)):(typeof g.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=H),g.props=f,g.state=H,g.context=S,f=j):(typeof g.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{g=o.stateNode,th(r,o),S=o.memoizedProps,Y=ts(a,S),g.props=Y,Q=o.pendingProps,U=g.context,H=a.contextType,j=Ps,typeof H=="object"&&H!==null&&(j=cn(H)),w=a.getDerivedStateFromProps,(H=typeof w=="function"||typeof g.getSnapshotBeforeUpdate=="function")||typeof g.UNSAFE_componentWillReceiveProps!="function"&&typeof g.componentWillReceiveProps!="function"||(S!==Q||U!==j)&&Cy(o,g,f,j),Gi=!1,U=o.memoizedState,g.state=U,aa(o,f,g,h),la();var V=o.memoizedState;S!==Q||U!==V||Gi||r!==null&&r.dependencies!==null&&qc(r.dependencies)?(typeof w=="function"&&(Eh(o,a,w,f),V=o.memoizedState),(Y=Gi||ky(o,a,Y,f,U,V,j)||r!==null&&r.dependencies!==null&&qc(r.dependencies))?(H||typeof g.UNSAFE_componentWillUpdate!="function"&&typeof g.componentWillUpdate!="function"||(typeof g.componentWillUpdate=="function"&&g.componentWillUpdate(f,V,j),typeof g.UNSAFE_componentWillUpdate=="function"&&g.UNSAFE_componentWillUpdate(f,V,j)),typeof g.componentDidUpdate=="function"&&(o.flags|=4),typeof g.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof g.componentDidUpdate!="function"||S===r.memoizedProps&&U===r.memoizedState||(o.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||S===r.memoizedProps&&U===r.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=V),g.props=f,g.state=V,g.context=j,f=Y):(typeof g.componentDidUpdate!="function"||S===r.memoizedProps&&U===r.memoizedState||(o.flags|=4),typeof g.getSnapshotBeforeUpdate!="function"||S===r.memoizedProps&&U===r.memoizedState||(o.flags|=1024),f=!1)}return g=f,su(r,o),f=(o.flags&128)!==0,g||f?(g=o.stateNode,a=f&&typeof a.getDerivedStateFromError!="function"?null:g.render(),o.flags|=1,r!==null&&f?(o.child=Zo(o,r.child,null,h),o.child=Zo(o,null,a,h)):un(r,o,a,h),o.memoizedState=g.state,r=o.child):r=ci(r,o,h),r}function Iy(r,o,a,f){return $o(),o.flags|=256,un(r,o,a,f),o.child}var _h={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function jh(r){return{baseLanes:r,cachePool:M0()}}function Oh(r,o,a){return r=r!==null?r.childLanes&~a:0,o&&(r|=Gn),r}function Hy(r,o,a){var f=o.pendingProps,h=!1,g=(o.flags&128)!==0,S;if((S=g)||(S=r!==null&&r.memoizedState===null?!1:(Rt.current&2)!==0),S&&(h=!0,o.flags&=-129),S=(o.flags&32)!==0,o.flags&=-33,r===null){if(Je){if(h?Ki(o):Qi(),(r=bt)?(r=$b(r,or),r=r!==null&&r.data!=="&"?r:null,r!==null&&(o.memoizedState={dehydrated:r,treeContext:Vi!==null?{id:Lr,overflow:Br}:null,retryLane:536870912,hydrationErrors:null},a=b0(r),a.return=o,o.child=a,an=o,bt=null)):r=null,r===null)throw Wi(o);return hp(r)?o.lanes=32:o.lanes=536870912,null}var w=f.children;return f=f.fallback,h?(Qi(),h=o.mode,w=lu({mode:"hidden",children:w},h),f=Go(f,h,a,null),w.return=o,f.return=o,w.sibling=f,o.child=w,f=o.child,f.memoizedState=jh(a),f.childLanes=Oh(r,S,a),o.memoizedState=_h,ha(null,f)):(Ki(o),Nh(o,w))}var j=r.memoizedState;if(j!==null&&(w=j.dehydrated,w!==null)){if(g)o.flags&256?(Ki(o),o.flags&=-257,o=zh(r,o,a)):o.memoizedState!==null?(Qi(),o.child=r.child,o.flags|=128,o=null):(Qi(),w=f.fallback,h=o.mode,f=lu({mode:"visible",children:f.children},h),w=Go(w,h,a,null),w.flags|=2,f.return=o,w.return=o,f.sibling=w,o.child=f,Zo(o,r.child,null,a),f=o.child,f.memoizedState=jh(a),f.childLanes=Oh(r,S,a),o.memoizedState=_h,o=ha(null,f));else if(Ki(o),hp(w)){if(S=w.nextSibling&&w.nextSibling.dataset,S)var H=S.dgst;S=H,f=Error(i(419)),f.stack="",f.digest=S,ta({value:f,source:null,stack:null}),o=zh(r,o,a)}else if(Vt||$s(r,o,a,!1),S=(a&r.childLanes)!==0,Vt||S){if(S=mt,S!==null&&(f=je(S,a),f!==0&&f!==j.retryLane))throw j.retryLane=f,Fo(r,f),Ln(S,r,f),Mh;dp(w)||gu(),o=zh(r,o,a)}else dp(w)?(o.flags|=192,o.child=r.child,o=null):(r=j.treeContext,bt=lr(w.nextSibling),an=o,Je=!0,Pi=null,or=!1,r!==null&&S0(o,r),o=Nh(o,f.children),o.flags|=4096);return o}return h?(Qi(),w=f.fallback,h=o.mode,j=r.child,H=j.sibling,f=ri(j,{mode:"hidden",children:f.children}),f.subtreeFlags=j.subtreeFlags&65011712,H!==null?w=ri(H,w):(w=Go(w,h,a,null),w.flags|=2),w.return=o,f.return=o,f.sibling=w,o.child=f,ha(null,f),f=o.child,w=r.child.memoizedState,w===null?w=jh(a):(h=w.cachePool,h!==null?(j=Ut._currentValue,h=h.parent!==j?{parent:j,pool:j}:h):h=M0(),w={baseLanes:w.baseLanes|a,cachePool:h}),f.memoizedState=w,f.childLanes=Oh(r,S,a),o.memoizedState=_h,ha(r.child,f)):(Ki(o),a=r.child,r=a.sibling,a=ri(a,{mode:"visible",children:f.children}),a.return=o,a.sibling=null,r!==null&&(S=o.deletions,S===null?(o.deletions=[r],o.flags|=16):S.push(r)),o.child=a,o.memoizedState=null,a)}function Nh(r,o){return o=lu({mode:"visible",children:o},r.mode),o.return=r,r.child=o}function lu(r,o){return r=Vn(22,r,null,o),r.lanes=0,r}function zh(r,o,a){return Zo(o,r.child,null,a),r=Nh(o,o.pendingProps.children),r.flags|=2,o.memoizedState=null,r}function Uy(r,o,a){r.lanes|=o;var f=r.alternate;f!==null&&(f.lanes|=o),Yd(r.return,o,a)}function Rh(r,o,a,f,h,g){var S=r.memoizedState;S===null?r.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:a,tailMode:h,treeForkCount:g}:(S.isBackwards=o,S.rendering=null,S.renderingStartTime=0,S.last=f,S.tail=a,S.tailMode=h,S.treeForkCount=g)}function qy(r,o,a){var f=o.pendingProps,h=f.revealOrder,g=f.tail;f=f.children;var S=Rt.current,w=(S&2)!==0;if(w?(S=S&1|2,o.flags|=128):S&=1,re(Rt,S),un(r,o,f,a),f=Je?ea:0,!w&&r!==null&&(r.flags&128)!==0)e:for(r=o.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&Uy(r,a,o);else if(r.tag===19)Uy(r,a,o);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===o)break e;for(;r.sibling===null;){if(r.return===null||r.return===o)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}switch(h){case"forwards":for(a=o.child,h=null;a!==null;)r=a.alternate,r!==null&&Kc(r)===null&&(h=a),a=a.sibling;a=h,a===null?(h=o.child,o.child=null):(h=a.sibling,a.sibling=null),Rh(o,!1,h,a,g,f);break;case"backwards":case"unstable_legacy-backwards":for(a=null,h=o.child,o.child=null;h!==null;){if(r=h.alternate,r!==null&&Kc(r)===null){o.child=h;break}r=h.sibling,h.sibling=a,a=h,h=r}Rh(o,!0,a,null,g,f);break;case"together":Rh(o,!1,null,null,void 0,f);break;default:o.memoizedState=null}return o.child}function ci(r,o,a){if(r!==null&&(o.dependencies=r.dependencies),Zi|=o.lanes,(a&o.childLanes)===0)if(r!==null){if($s(r,o,a,!1),(a&o.childLanes)===0)return null}else return null;if(r!==null&&o.child!==r.child)throw Error(i(153));if(o.child!==null){for(r=o.child,a=ri(r,r.pendingProps),o.child=a,a.return=o;r.sibling!==null;)r=r.sibling,a=a.sibling=ri(r,r.pendingProps),a.return=o;a.sibling=null}return o.child}function Dh(r,o){return(r.lanes&o)!==0?!0:(r=r.dependencies,!!(r!==null&&qc(r)))}function MC(r,o,a){switch(o.tag){case 3:sn(o,o.stateNode.containerInfo),Fi(o,Ut,r.memoizedState.cache),$o();break;case 27:case 5:Hn(o);break;case 4:sn(o,o.stateNode.containerInfo);break;case 10:Fi(o,o.type,o.memoizedProps.value);break;case 31:if(o.memoizedState!==null)return o.flags|=128,sh(o),null;break;case 13:var f=o.memoizedState;if(f!==null)return f.dehydrated!==null?(Ki(o),o.flags|=128,null):(a&o.child.childLanes)!==0?Hy(r,o,a):(Ki(o),r=ci(r,o,a),r!==null?r.sibling:null);Ki(o);break;case 19:var h=(r.flags&128)!==0;if(f=(a&o.childLanes)!==0,f||($s(r,o,a,!1),f=(a&o.childLanes)!==0),h){if(f)return qy(r,o,a);o.flags|=128}if(h=o.memoizedState,h!==null&&(h.rendering=null,h.tail=null,h.lastEffect=null),re(Rt,Rt.current),f)break;return null;case 22:return o.lanes=0,zy(r,o,a,o.pendingProps);case 24:Fi(o,Ut,r.memoizedState.cache)}return ci(r,o,a)}function Vy(r,o,a){if(r!==null)if(r.memoizedProps!==o.pendingProps)Vt=!0;else{if(!Dh(r,a)&&(o.flags&128)===0)return Vt=!1,MC(r,o,a);Vt=(r.flags&131072)!==0}else Vt=!1,Je&&(o.flags&1048576)!==0&&x0(o,ea,o.index);switch(o.lanes=0,o.tag){case 16:e:{var f=o.pendingProps;if(r=Jo(o.elementType),o.type=r,typeof r=="function")Ud(r)?(f=ts(r,f),o.tag=1,o=By(null,o,r,f,a)):(o.tag=0,o=Ah(null,o,r,f,a));else{if(r!=null){var h=r.$$typeof;if(h===B){o.tag=11,o=jy(null,o,r,f,a);break e}else if(h===$){o.tag=14,o=Oy(null,o,r,f,a);break e}}throw o=Qe(r)||r,Error(i(306,o,""))}}return o;case 0:return Ah(r,o,o.type,o.pendingProps,a);case 1:return f=o.type,h=ts(f,o.pendingProps),By(r,o,f,h,a);case 3:e:{if(sn(o,o.stateNode.containerInfo),r===null)throw Error(i(387));f=o.pendingProps;var g=o.memoizedState;h=g.element,th(r,o),aa(o,f,null,a);var S=o.memoizedState;if(f=S.cache,Fi(o,Ut,f),f!==g.cache&&Kd(o,[Ut],a,!0),la(),f=S.element,g.isDehydrated)if(g={element:f,isDehydrated:!1,cache:S.cache},o.updateQueue.baseState=g,o.memoizedState=g,o.flags&256){o=Iy(r,o,f,a);break e}else if(f!==h){h=nr(Error(i(424)),o),ta(h),o=Iy(r,o,f,a);break e}else{switch(r=o.stateNode.containerInfo,r.nodeType){case 9:r=r.body;break;default:r=r.nodeName==="HTML"?r.ownerDocument.body:r}for(bt=lr(r.firstChild),an=o,Je=!0,Pi=null,or=!0,a=z0(o,null,f,a),o.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if($o(),f===h){o=ci(r,o,a);break e}un(r,o,f,a)}o=o.child}return o;case 26:return su(r,o),r===null?(a=Zb(o.type,null,o.pendingProps,null))?o.memoizedState=a:Je||(a=o.type,r=o.pendingProps,f=Cu(Yt.current).createElement(a),f[It]=o,f[ln]=r,fn(f,a,r),Ht(f),o.stateNode=f):o.memoizedState=Zb(o.type,r.memoizedProps,o.pendingProps,r.memoizedState),null;case 27:return Hn(o),r===null&&Je&&(f=o.stateNode=Qb(o.type,o.pendingProps,Yt.current),an=o,or=!0,h=bt,io(o.type)?(pp=h,bt=lr(f.firstChild)):bt=h),un(r,o,o.pendingProps.children,a),su(r,o),r===null&&(o.flags|=4194304),o.child;case 5:return r===null&&Je&&((h=f=bt)&&(f=rE(f,o.type,o.pendingProps,or),f!==null?(o.stateNode=f,an=o,bt=lr(f.firstChild),or=!1,h=!0):h=!1),h||Wi(o)),Hn(o),h=o.type,g=o.pendingProps,S=r!==null?r.memoizedProps:null,f=g.children,cp(h,g)?f=null:S!==null&&cp(h,S)&&(o.flags|=32),o.memoizedState!==null&&(h=ah(r,o,bC,null,null,a),Aa._currentValue=h),su(r,o),un(r,o,f,a),o.child;case 6:return r===null&&Je&&((r=a=bt)&&(a=iE(a,o.pendingProps,or),a!==null?(o.stateNode=a,an=o,bt=null,r=!0):r=!1),r||Wi(o)),null;case 13:return Hy(r,o,a);case 4:return sn(o,o.stateNode.containerInfo),f=o.pendingProps,r===null?o.child=Zo(o,null,f,a):un(r,o,f,a),o.child;case 11:return jy(r,o,o.type,o.pendingProps,a);case 7:return un(r,o,o.pendingProps,a),o.child;case 8:return un(r,o,o.pendingProps.children,a),o.child;case 12:return un(r,o,o.pendingProps.children,a),o.child;case 10:return f=o.pendingProps,Fi(o,o.type,f.value),un(r,o,f.children,a),o.child;case 9:return h=o.type._context,f=o.pendingProps.children,Ko(o),h=cn(h),f=f(h),o.flags|=1,un(r,o,f,a),o.child;case 14:return Oy(r,o,o.type,o.pendingProps,a);case 15:return Ny(r,o,o.type,o.pendingProps,a);case 19:return qy(r,o,a);case 31:return TC(r,o,a);case 22:return zy(r,o,a,o.pendingProps);case 24:return Ko(o),f=cn(Ut),r===null?(h=Xd(),h===null&&(h=mt,g=Qd(),h.pooledCache=g,g.refCount++,g!==null&&(h.pooledCacheLanes|=a),h=g),o.memoizedState={parent:f,cache:h},eh(o),Fi(o,Ut,h)):((r.lanes&a)!==0&&(th(r,o),aa(o,null,null,a),la()),h=r.memoizedState,g=o.memoizedState,h.parent!==f?(h={parent:f,cache:f},o.memoizedState=h,o.lanes===0&&(o.memoizedState=o.updateQueue.baseState=h),Fi(o,Ut,f)):(f=g.cache,Fi(o,Ut,f),f!==h.cache&&Kd(o,[Ut],a,!0))),un(r,o,o.pendingProps.children,a),o.child;case 29:throw o.pendingProps}throw Error(i(156,o.tag))}function ui(r){r.flags|=4}function Lh(r,o,a,f,h){if((o=(r.mode&32)!==0)&&(o=!1),o){if(r.flags|=16777216,(h&335544128)===h)if(r.stateNode.complete)r.flags|=8192;else if(mb())r.flags|=8192;else throw Xo=Fc,Zd}else r.flags&=-16777217}function Py(r,o){if(o.type!=="stylesheet"||(o.state.loading&4)!==0)r.flags&=-16777217;else if(r.flags|=16777216,!i1(o))if(mb())r.flags|=8192;else throw Xo=Fc,Zd}function au(r,o){o!==null&&(r.flags|=4),r.flags&16384&&(o=r.tag!==22?kc():536870912,r.lanes|=o,ol|=o)}function pa(r,o){if(!Je)switch(r.tailMode){case"hidden":o=r.tail;for(var a=null;o!==null;)o.alternate!==null&&(a=o),o=o.sibling;a===null?r.tail=null:a.sibling=null;break;case"collapsed":a=r.tail;for(var f=null;a!==null;)a.alternate!==null&&(f=a),a=a.sibling;f===null?o||r.tail===null?r.tail=null:r.tail.sibling=null:f.sibling=null}}function vt(r){var o=r.alternate!==null&&r.alternate.child===r.child,a=0,f=0;if(o)for(var h=r.child;h!==null;)a|=h.lanes|h.childLanes,f|=h.subtreeFlags&65011712,f|=h.flags&65011712,h.return=r,h=h.sibling;else for(h=r.child;h!==null;)a|=h.lanes|h.childLanes,f|=h.subtreeFlags,f|=h.flags,h.return=r,h=h.sibling;return r.subtreeFlags|=f,r.childLanes=a,o}function AC(r,o,a){var f=o.pendingProps;switch(Wd(o),o.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vt(o),null;case 1:return vt(o),null;case 3:return a=o.stateNode,f=null,r!==null&&(f=r.memoizedState.cache),o.memoizedState.cache!==f&&(o.flags|=2048),si(Ut),gr(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(r===null||r.child===null)&&(Gs(o)?ui(o):r===null||r.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Gd())),vt(o),null;case 26:var h=o.type,g=o.memoizedState;return r===null?(ui(o),g!==null?(vt(o),Py(o,g)):(vt(o),Lh(o,h,null,f,a))):g?g!==r.memoizedState?(ui(o),vt(o),Py(o,g)):(vt(o),o.flags&=-16777217):(r=r.memoizedProps,r!==f&&ui(o),vt(o),Lh(o,h,r,f,a)),null;case 27:if(Jn(o),a=Yt.current,h=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==f&&ui(o);else{if(!f){if(o.stateNode===null)throw Error(i(166));return vt(o),null}r=Xe.current,Gs(o)?k0(o):(r=Qb(h,f,a),o.stateNode=r,ui(o))}return vt(o),null;case 5:if(Jn(o),h=o.type,r!==null&&o.stateNode!=null)r.memoizedProps!==f&&ui(o);else{if(!f){if(o.stateNode===null)throw Error(i(166));return vt(o),null}if(g=Xe.current,Gs(o))k0(o);else{var S=Cu(Yt.current);switch(g){case 1:g=S.createElementNS("http://www.w3.org/2000/svg",h);break;case 2:g=S.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;default:switch(h){case"svg":g=S.createElementNS("http://www.w3.org/2000/svg",h);break;case"math":g=S.createElementNS("http://www.w3.org/1998/Math/MathML",h);break;case"script":g=S.createElement("div"),g.innerHTML="<script><\/script>",g=g.removeChild(g.firstChild);break;case"select":g=typeof f.is=="string"?S.createElement("select",{is:f.is}):S.createElement("select"),f.multiple?g.multiple=!0:f.size&&(g.size=f.size);break;default:g=typeof f.is=="string"?S.createElement(h,{is:f.is}):S.createElement(h)}}g[It]=o,g[ln]=f;e:for(S=o.child;S!==null;){if(S.tag===5||S.tag===6)g.appendChild(S.stateNode);else if(S.tag!==4&&S.tag!==27&&S.child!==null){S.child.return=S,S=S.child;continue}if(S===o)break e;for(;S.sibling===null;){if(S.return===null||S.return===o)break e;S=S.return}S.sibling.return=S.return,S=S.sibling}o.stateNode=g;e:switch(fn(g,h,f),h){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}f&&ui(o)}}return vt(o),Lh(o,o.type,r===null?null:r.memoizedProps,o.pendingProps,a),null;case 6:if(r&&o.stateNode!=null)r.memoizedProps!==f&&ui(o);else{if(typeof f!="string"&&o.stateNode===null)throw Error(i(166));if(r=Yt.current,Gs(o)){if(r=o.stateNode,a=o.memoizedProps,f=null,h=an,h!==null)switch(h.tag){case 27:case 5:f=h.memoizedProps}r[It]=o,r=!!(r.nodeValue===a||f!==null&&f.suppressHydrationWarning===!0||Hb(r.nodeValue,a)),r||Wi(o,!0)}else r=Cu(r).createTextNode(f),r[It]=o,o.stateNode=r}return vt(o),null;case 31:if(a=o.memoizedState,r===null||r.memoizedState!==null){if(f=Gs(o),a!==null){if(r===null){if(!f)throw Error(i(318));if(r=o.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(i(557));r[It]=o}else $o(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;vt(o),r=!1}else a=Gd(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=a),r=!0;if(!r)return o.flags&256?(Wn(o),o):(Wn(o),null);if((o.flags&128)!==0)throw Error(i(558))}return vt(o),null;case 13:if(f=o.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(h=Gs(o),f!==null&&f.dehydrated!==null){if(r===null){if(!h)throw Error(i(318));if(h=o.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(i(317));h[It]=o}else $o(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;vt(o),h=!1}else h=Gd(),r!==null&&r.memoizedState!==null&&(r.memoizedState.hydrationErrors=h),h=!0;if(!h)return o.flags&256?(Wn(o),o):(Wn(o),null)}return Wn(o),(o.flags&128)!==0?(o.lanes=a,o):(a=f!==null,r=r!==null&&r.memoizedState!==null,a&&(f=o.child,h=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(h=f.alternate.memoizedState.cachePool.pool),g=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(g=f.memoizedState.cachePool.pool),g!==h&&(f.flags|=2048)),a!==r&&a&&(o.child.flags|=8192),au(o,o.updateQueue),vt(o),null);case 4:return gr(),r===null&&ip(o.stateNode.containerInfo),vt(o),null;case 10:return si(o.type),vt(o),null;case 19:if(ee(Rt),f=o.memoizedState,f===null)return vt(o),null;if(h=(o.flags&128)!==0,g=f.rendering,g===null)if(h)pa(f,!1);else{if(Ot!==0||r!==null&&(r.flags&128)!==0)for(r=o.child;r!==null;){if(g=Kc(r),g!==null){for(o.flags|=128,pa(f,!1),r=g.updateQueue,o.updateQueue=r,au(o,r),o.subtreeFlags=0,r=a,a=o.child;a!==null;)y0(a,r),a=a.sibling;return re(Rt,Rt.current&1|2),Je&&ii(o,f.treeForkCount),o.child}r=r.sibling}f.tail!==null&&Zt()>hu&&(o.flags|=128,h=!0,pa(f,!1),o.lanes=4194304)}else{if(!h)if(r=Kc(g),r!==null){if(o.flags|=128,h=!0,r=r.updateQueue,o.updateQueue=r,au(o,r),pa(f,!0),f.tail===null&&f.tailMode==="hidden"&&!g.alternate&&!Je)return vt(o),null}else 2*Zt()-f.renderingStartTime>hu&&a!==536870912&&(o.flags|=128,h=!0,pa(f,!1),o.lanes=4194304);f.isBackwards?(g.sibling=o.child,o.child=g):(r=f.last,r!==null?r.sibling=g:o.child=g,f.last=g)}return f.tail!==null?(r=f.tail,f.rendering=r,f.tail=r.sibling,f.renderingStartTime=Zt(),r.sibling=null,a=Rt.current,re(Rt,h?a&1|2:a&1),Je&&ii(o,f.treeForkCount),r):(vt(o),null);case 22:case 23:return Wn(o),oh(),f=o.memoizedState!==null,r!==null?r.memoizedState!==null!==f&&(o.flags|=8192):f&&(o.flags|=8192),f?(a&536870912)!==0&&(o.flags&128)===0&&(vt(o),o.subtreeFlags&6&&(o.flags|=8192)):vt(o),a=o.updateQueue,a!==null&&au(o,a.retryQueue),a=null,r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(a=r.memoizedState.cachePool.pool),f=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(f=o.memoizedState.cachePool.pool),f!==a&&(o.flags|=2048),r!==null&&ee(Qo),null;case 24:return a=null,r!==null&&(a=r.memoizedState.cache),o.memoizedState.cache!==a&&(o.flags|=2048),si(Ut),vt(o),null;case 25:return null;case 30:return null}throw Error(i(156,o.tag))}function _C(r,o){switch(Wd(o),o.tag){case 1:return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 3:return si(Ut),gr(),r=o.flags,(r&65536)!==0&&(r&128)===0?(o.flags=r&-65537|128,o):null;case 26:case 27:case 5:return Jn(o),null;case 31:if(o.memoizedState!==null){if(Wn(o),o.alternate===null)throw Error(i(340));$o()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 13:if(Wn(o),r=o.memoizedState,r!==null&&r.dehydrated!==null){if(o.alternate===null)throw Error(i(340));$o()}return r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 19:return ee(Rt),null;case 4:return gr(),null;case 10:return si(o.type),null;case 22:case 23:return Wn(o),oh(),r!==null&&ee(Qo),r=o.flags,r&65536?(o.flags=r&-65537|128,o):null;case 24:return si(Ut),null;case 25:return null;default:return null}}function Wy(r,o){switch(Wd(o),o.tag){case 3:si(Ut),gr();break;case 26:case 27:case 5:Jn(o);break;case 4:gr();break;case 31:o.memoizedState!==null&&Wn(o);break;case 13:Wn(o);break;case 19:ee(Rt);break;case 10:si(o.type);break;case 22:case 23:Wn(o),oh(),r!==null&&ee(Qo);break;case 24:si(Ut)}}function ma(r,o){try{var a=o.updateQueue,f=a!==null?a.lastEffect:null;if(f!==null){var h=f.next;a=h;do{if((a.tag&r)===r){f=void 0;var g=a.create,S=a.inst;f=g(),S.destroy=f}a=a.next}while(a!==h)}}catch(w){ct(o,o.return,w)}}function Ji(r,o,a){try{var f=o.updateQueue,h=f!==null?f.lastEffect:null;if(h!==null){var g=h.next;f=g;do{if((f.tag&r)===r){var S=f.inst,w=S.destroy;if(w!==void 0){S.destroy=void 0,h=o;var j=a,H=w;try{H()}catch(Y){ct(h,j,Y)}}}f=f.next}while(f!==g)}}catch(Y){ct(o,o.return,Y)}}function Fy(r){var o=r.updateQueue;if(o!==null){var a=r.stateNode;try{D0(o,a)}catch(f){ct(r,r.return,f)}}}function Gy(r,o,a){a.props=ts(r.type,r.memoizedProps),a.state=r.memoizedState;try{a.componentWillUnmount()}catch(f){ct(r,o,f)}}function ga(r,o){try{var a=r.ref;if(a!==null){switch(r.tag){case 26:case 27:case 5:var f=r.stateNode;break;case 30:f=r.stateNode;break;default:f=r.stateNode}typeof a=="function"?r.refCleanup=a(f):a.current=f}}catch(h){ct(r,o,h)}}function Ir(r,o){var a=r.ref,f=r.refCleanup;if(a!==null)if(typeof f=="function")try{f()}catch(h){ct(r,o,h)}finally{r.refCleanup=null,r=r.alternate,r!=null&&(r.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(h){ct(r,o,h)}else a.current=null}function $y(r){var o=r.type,a=r.memoizedProps,f=r.stateNode;try{e:switch(o){case"button":case"input":case"select":case"textarea":a.autoFocus&&f.focus();break e;case"img":a.src?f.src=a.src:a.srcSet&&(f.srcset=a.srcSet)}}catch(h){ct(r,r.return,h)}}function Bh(r,o,a){try{var f=r.stateNode;JC(f,r.type,a,o),f[ln]=o}catch(h){ct(r,r.return,h)}}function Yy(r){return r.tag===5||r.tag===3||r.tag===26||r.tag===27&&io(r.type)||r.tag===4}function Ih(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Yy(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.tag===27&&io(r.type)||r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Hh(r,o,a){var f=r.tag;if(f===5||f===6)r=r.stateNode,o?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(r,o):(o=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,o.appendChild(r),a=a._reactRootContainer,a!=null||o.onclick!==null||(o.onclick=me));else if(f!==4&&(f===27&&io(r.type)&&(a=r.stateNode,o=null),r=r.child,r!==null))for(Hh(r,o,a),r=r.sibling;r!==null;)Hh(r,o,a),r=r.sibling}function cu(r,o,a){var f=r.tag;if(f===5||f===6)r=r.stateNode,o?a.insertBefore(r,o):a.appendChild(r);else if(f!==4&&(f===27&&io(r.type)&&(a=r.stateNode),r=r.child,r!==null))for(cu(r,o,a),r=r.sibling;r!==null;)cu(r,o,a),r=r.sibling}function Ky(r){var o=r.stateNode,a=r.memoizedProps;try{for(var f=r.type,h=o.attributes;h.length;)o.removeAttributeNode(h[0]);fn(o,f,a),o[It]=r,o[ln]=a}catch(g){ct(r,r.return,g)}}var fi=!1,Pt=!1,Uh=!1,Qy=typeof WeakSet=="function"?WeakSet:Set,en=null;function jC(r,o){if(r=r.containerInfo,lp=ju,r=a0(r),zd(r)){if("selectionStart"in r)var a={start:r.selectionStart,end:r.selectionEnd};else e:{a=(a=r.ownerDocument)&&a.defaultView||window;var f=a.getSelection&&a.getSelection();if(f&&f.rangeCount!==0){a=f.anchorNode;var h=f.anchorOffset,g=f.focusNode;f=f.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var S=0,w=-1,j=-1,H=0,Y=0,Q=r,U=null;t:for(;;){for(var V;Q!==a||h!==0&&Q.nodeType!==3||(w=S+h),Q!==g||f!==0&&Q.nodeType!==3||(j=S+f),Q.nodeType===3&&(S+=Q.nodeValue.length),(V=Q.firstChild)!==null;)U=Q,Q=V;for(;;){if(Q===r)break t;if(U===a&&++H===h&&(w=S),U===g&&++Y===f&&(j=S),(V=Q.nextSibling)!==null)break;Q=U,U=Q.parentNode}Q=V}a=w===-1||j===-1?null:{start:w,end:j}}else a=null}a=a||{start:0,end:0}}else a=null;for(ap={focusedElem:r,selectionRange:a},ju=!1,en=o;en!==null;)if(o=en,r=o.child,(o.subtreeFlags&1028)!==0&&r!==null)r.return=o,en=r;else for(;en!==null;){switch(o=en,g=o.alternate,r=o.flags,o.tag){case 0:if((r&4)!==0&&(r=o.updateQueue,r=r!==null?r.events:null,r!==null))for(a=0;a<r.length;a++)h=r[a],h.ref.impl=h.nextImpl;break;case 11:case 15:break;case 1:if((r&1024)!==0&&g!==null){r=void 0,a=o,h=g.memoizedProps,g=g.memoizedState,f=a.stateNode;try{var fe=ts(a.type,h);r=f.getSnapshotBeforeUpdate(fe,g),f.__reactInternalSnapshotBeforeUpdate=r}catch(Ee){ct(a,a.return,Ee)}}break;case 3:if((r&1024)!==0){if(r=o.stateNode.containerInfo,a=r.nodeType,a===9)fp(r);else if(a===1)switch(r.nodeName){case"HEAD":case"HTML":case"BODY":fp(r);break;default:r.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((r&1024)!==0)throw Error(i(163))}if(r=o.sibling,r!==null){r.return=o.return,en=r;break}en=o.return}}function Jy(r,o,a){var f=a.flags;switch(a.tag){case 0:case 11:case 15:hi(r,a),f&4&&ma(5,a);break;case 1:if(hi(r,a),f&4)if(r=a.stateNode,o===null)try{r.componentDidMount()}catch(S){ct(a,a.return,S)}else{var h=ts(a.type,o.memoizedProps);o=o.memoizedState;try{r.componentDidUpdate(h,o,r.__reactInternalSnapshotBeforeUpdate)}catch(S){ct(a,a.return,S)}}f&64&&Fy(a),f&512&&ga(a,a.return);break;case 3:if(hi(r,a),f&64&&(r=a.updateQueue,r!==null)){if(o=null,a.child!==null)switch(a.child.tag){case 27:case 5:o=a.child.stateNode;break;case 1:o=a.child.stateNode}try{D0(r,o)}catch(S){ct(a,a.return,S)}}break;case 27:o===null&&f&4&&Ky(a);case 26:case 5:hi(r,a),o===null&&f&4&&$y(a),f&512&&ga(a,a.return);break;case 12:hi(r,a);break;case 31:hi(r,a),f&4&&eb(r,a);break;case 13:hi(r,a),f&4&&tb(r,a),f&64&&(r=a.memoizedState,r!==null&&(r=r.dehydrated,r!==null&&(a=HC.bind(null,a),oE(r,a))));break;case 22:if(f=a.memoizedState!==null||fi,!f){o=o!==null&&o.memoizedState!==null||Pt,h=fi;var g=Pt;fi=f,(Pt=o)&&!g?pi(r,a,(a.subtreeFlags&8772)!==0):hi(r,a),fi=h,Pt=g}break;case 30:break;default:hi(r,a)}}function Xy(r){var o=r.alternate;o!==null&&(r.alternate=null,Xy(o)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(o=r.stateNode,o!==null&&Wl(o)),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}var Ct=null,Nn=!1;function di(r,o,a){for(a=a.child;a!==null;)Zy(r,o,a),a=a.sibling}function Zy(r,o,a){if(Kt&&typeof Kt.onCommitFiberUnmount=="function")try{Kt.onCommitFiberUnmount(Do,a)}catch{}switch(a.tag){case 26:Pt||Ir(a,o),di(r,o,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:Pt||Ir(a,o);var f=Ct,h=Nn;io(a.type)&&(Ct=a.stateNode,Nn=!1),di(r,o,a),wa(a.stateNode),Ct=f,Nn=h;break;case 5:Pt||Ir(a,o);case 6:if(f=Ct,h=Nn,Ct=null,di(r,o,a),Ct=f,Nn=h,Ct!==null)if(Nn)try{(Ct.nodeType===9?Ct.body:Ct.nodeName==="HTML"?Ct.ownerDocument.body:Ct).removeChild(a.stateNode)}catch(g){ct(a,o,g)}else try{Ct.removeChild(a.stateNode)}catch(g){ct(a,o,g)}break;case 18:Ct!==null&&(Nn?(r=Ct,Fb(r.nodeType===9?r.body:r.nodeName==="HTML"?r.ownerDocument.body:r,a.stateNode),hl(r)):Fb(Ct,a.stateNode));break;case 4:f=Ct,h=Nn,Ct=a.stateNode.containerInfo,Nn=!0,di(r,o,a),Ct=f,Nn=h;break;case 0:case 11:case 14:case 15:Ji(2,a,o),Pt||Ji(4,a,o),di(r,o,a);break;case 1:Pt||(Ir(a,o),f=a.stateNode,typeof f.componentWillUnmount=="function"&&Gy(a,o,f)),di(r,o,a);break;case 21:di(r,o,a);break;case 22:Pt=(f=Pt)||a.memoizedState!==null,di(r,o,a),Pt=f;break;default:di(r,o,a)}}function eb(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null))){r=r.dehydrated;try{hl(r)}catch(a){ct(o,o.return,a)}}}function tb(r,o){if(o.memoizedState===null&&(r=o.alternate,r!==null&&(r=r.memoizedState,r!==null&&(r=r.dehydrated,r!==null))))try{hl(r)}catch(a){ct(o,o.return,a)}}function OC(r){switch(r.tag){case 31:case 13:case 19:var o=r.stateNode;return o===null&&(o=r.stateNode=new Qy),o;case 22:return r=r.stateNode,o=r._retryCache,o===null&&(o=r._retryCache=new Qy),o;default:throw Error(i(435,r.tag))}}function uu(r,o){var a=OC(r);o.forEach(function(f){if(!a.has(f)){a.add(f);var h=UC.bind(null,r,f);f.then(h,h)}})}function zn(r,o){var a=o.deletions;if(a!==null)for(var f=0;f<a.length;f++){var h=a[f],g=r,S=o,w=S;e:for(;w!==null;){switch(w.tag){case 27:if(io(w.type)){Ct=w.stateNode,Nn=!1;break e}break;case 5:Ct=w.stateNode,Nn=!1;break e;case 3:case 4:Ct=w.stateNode.containerInfo,Nn=!0;break e}w=w.return}if(Ct===null)throw Error(i(160));Zy(g,S,h),Ct=null,Nn=!1,g=h.alternate,g!==null&&(g.return=null),h.return=null}if(o.subtreeFlags&13886)for(o=o.child;o!==null;)nb(o,r),o=o.sibling}var kr=null;function nb(r,o){var a=r.alternate,f=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:zn(o,r),Rn(r),f&4&&(Ji(3,r,r.return),ma(3,r),Ji(5,r,r.return));break;case 1:zn(o,r),Rn(r),f&512&&(Pt||a===null||Ir(a,a.return)),f&64&&fi&&(r=r.updateQueue,r!==null&&(f=r.callbacks,f!==null&&(a=r.shared.hiddenCallbacks,r.shared.hiddenCallbacks=a===null?f:a.concat(f))));break;case 26:var h=kr;if(zn(o,r),Rn(r),f&512&&(Pt||a===null||Ir(a,a.return)),f&4){var g=a!==null?a.memoizedState:null;if(f=r.memoizedState,a===null)if(f===null)if(r.stateNode===null){e:{f=r.type,a=r.memoizedProps,h=h.ownerDocument||h;t:switch(f){case"title":g=h.getElementsByTagName("title")[0],(!g||g[Di]||g[It]||g.namespaceURI==="http://www.w3.org/2000/svg"||g.hasAttribute("itemprop"))&&(g=h.createElement(f),h.head.insertBefore(g,h.querySelector("head > title"))),fn(g,f,a),g[It]=r,Ht(g),f=g;break e;case"link":var S=n1("link","href",h).get(f+(a.href||""));if(S){for(var w=0;w<S.length;w++)if(g=S[w],g.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&g.getAttribute("rel")===(a.rel==null?null:a.rel)&&g.getAttribute("title")===(a.title==null?null:a.title)&&g.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){S.splice(w,1);break t}}g=h.createElement(f),fn(g,f,a),h.head.appendChild(g);break;case"meta":if(S=n1("meta","content",h).get(f+(a.content||""))){for(w=0;w<S.length;w++)if(g=S[w],g.getAttribute("content")===(a.content==null?null:""+a.content)&&g.getAttribute("name")===(a.name==null?null:a.name)&&g.getAttribute("property")===(a.property==null?null:a.property)&&g.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&g.getAttribute("charset")===(a.charSet==null?null:a.charSet)){S.splice(w,1);break t}}g=h.createElement(f),fn(g,f,a),h.head.appendChild(g);break;default:throw Error(i(468,f))}g[It]=r,Ht(g),f=g}r.stateNode=f}else r1(h,r.type,r.stateNode);else r.stateNode=t1(h,f,r.memoizedProps);else g!==f?(g===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):g.count--,f===null?r1(h,r.type,r.stateNode):t1(h,f,r.memoizedProps)):f===null&&r.stateNode!==null&&Bh(r,r.memoizedProps,a.memoizedProps)}break;case 27:zn(o,r),Rn(r),f&512&&(Pt||a===null||Ir(a,a.return)),a!==null&&f&4&&Bh(r,r.memoizedProps,a.memoizedProps);break;case 5:if(zn(o,r),Rn(r),f&512&&(Pt||a===null||Ir(a,a.return)),r.flags&32){h=r.stateNode;try{le(h,"")}catch(fe){ct(r,r.return,fe)}}f&4&&r.stateNode!=null&&(h=r.memoizedProps,Bh(r,h,a!==null?a.memoizedProps:h)),f&1024&&(Uh=!0);break;case 6:if(zn(o,r),Rn(r),f&4){if(r.stateNode===null)throw Error(i(162));f=r.memoizedProps,a=r.stateNode;try{a.nodeValue=f}catch(fe){ct(r,r.return,fe)}}break;case 3:if(Tu=null,h=kr,kr=Eu(o.containerInfo),zn(o,r),kr=h,Rn(r),f&4&&a!==null&&a.memoizedState.isDehydrated)try{hl(o.containerInfo)}catch(fe){ct(r,r.return,fe)}Uh&&(Uh=!1,rb(r));break;case 4:f=kr,kr=Eu(r.stateNode.containerInfo),zn(o,r),Rn(r),kr=f;break;case 12:zn(o,r),Rn(r);break;case 31:zn(o,r),Rn(r),f&4&&(f=r.updateQueue,f!==null&&(r.updateQueue=null,uu(r,f)));break;case 13:zn(o,r),Rn(r),r.child.flags&8192&&r.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(du=Zt()),f&4&&(f=r.updateQueue,f!==null&&(r.updateQueue=null,uu(r,f)));break;case 22:h=r.memoizedState!==null;var j=a!==null&&a.memoizedState!==null,H=fi,Y=Pt;if(fi=H||h,Pt=Y||j,zn(o,r),Pt=Y,fi=H,Rn(r),f&8192)e:for(o=r.stateNode,o._visibility=h?o._visibility&-2:o._visibility|1,h&&(a===null||j||fi||Pt||ns(r)),a=null,o=r;;){if(o.tag===5||o.tag===26){if(a===null){j=a=o;try{if(g=j.stateNode,h)S=g.style,typeof S.setProperty=="function"?S.setProperty("display","none","important"):S.display="none";else{w=j.stateNode;var Q=j.memoizedProps.style,U=Q!=null&&Q.hasOwnProperty("display")?Q.display:null;w.style.display=U==null||typeof U=="boolean"?"":(""+U).trim()}}catch(fe){ct(j,j.return,fe)}}}else if(o.tag===6){if(a===null){j=o;try{j.stateNode.nodeValue=h?"":j.memoizedProps}catch(fe){ct(j,j.return,fe)}}}else if(o.tag===18){if(a===null){j=o;try{var V=j.stateNode;h?Gb(V,!0):Gb(j.stateNode,!1)}catch(fe){ct(j,j.return,fe)}}}else if((o.tag!==22&&o.tag!==23||o.memoizedState===null||o===r)&&o.child!==null){o.child.return=o,o=o.child;continue}if(o===r)break e;for(;o.sibling===null;){if(o.return===null||o.return===r)break e;a===o&&(a=null),o=o.return}a===o&&(a=null),o.sibling.return=o.return,o=o.sibling}f&4&&(f=r.updateQueue,f!==null&&(a=f.retryQueue,a!==null&&(f.retryQueue=null,uu(r,a))));break;case 19:zn(o,r),Rn(r),f&4&&(f=r.updateQueue,f!==null&&(r.updateQueue=null,uu(r,f)));break;case 30:break;case 21:break;default:zn(o,r),Rn(r)}}function Rn(r){var o=r.flags;if(o&2){try{for(var a,f=r.return;f!==null;){if(Yy(f)){a=f;break}f=f.return}if(a==null)throw Error(i(160));switch(a.tag){case 27:var h=a.stateNode,g=Ih(r);cu(r,g,h);break;case 5:var S=a.stateNode;a.flags&32&&(le(S,""),a.flags&=-33);var w=Ih(r);cu(r,w,S);break;case 3:case 4:var j=a.stateNode.containerInfo,H=Ih(r);Hh(r,H,j);break;default:throw Error(i(161))}}catch(Y){ct(r,r.return,Y)}r.flags&=-3}o&4096&&(r.flags&=-4097)}function rb(r){if(r.subtreeFlags&1024)for(r=r.child;r!==null;){var o=r;rb(o),o.tag===5&&o.flags&1024&&o.stateNode.reset(),r=r.sibling}}function hi(r,o){if(o.subtreeFlags&8772)for(o=o.child;o!==null;)Jy(r,o.alternate,o),o=o.sibling}function ns(r){for(r=r.child;r!==null;){var o=r;switch(o.tag){case 0:case 11:case 14:case 15:Ji(4,o,o.return),ns(o);break;case 1:Ir(o,o.return);var a=o.stateNode;typeof a.componentWillUnmount=="function"&&Gy(o,o.return,a),ns(o);break;case 27:wa(o.stateNode);case 26:case 5:Ir(o,o.return),ns(o);break;case 22:o.memoizedState===null&&ns(o);break;case 30:ns(o);break;default:ns(o)}r=r.sibling}}function pi(r,o,a){for(a=a&&(o.subtreeFlags&8772)!==0,o=o.child;o!==null;){var f=o.alternate,h=r,g=o,S=g.flags;switch(g.tag){case 0:case 11:case 15:pi(h,g,a),ma(4,g);break;case 1:if(pi(h,g,a),f=g,h=f.stateNode,typeof h.componentDidMount=="function")try{h.componentDidMount()}catch(H){ct(f,f.return,H)}if(f=g,h=f.updateQueue,h!==null){var w=f.stateNode;try{var j=h.shared.hiddenCallbacks;if(j!==null)for(h.shared.hiddenCallbacks=null,h=0;h<j.length;h++)R0(j[h],w)}catch(H){ct(f,f.return,H)}}a&&S&64&&Fy(g),ga(g,g.return);break;case 27:Ky(g);case 26:case 5:pi(h,g,a),a&&f===null&&S&4&&$y(g),ga(g,g.return);break;case 12:pi(h,g,a);break;case 31:pi(h,g,a),a&&S&4&&eb(h,g);break;case 13:pi(h,g,a),a&&S&4&&tb(h,g);break;case 22:g.memoizedState===null&&pi(h,g,a),ga(g,g.return);break;case 30:break;default:pi(h,g,a)}o=o.sibling}}function qh(r,o){var a=null;r!==null&&r.memoizedState!==null&&r.memoizedState.cachePool!==null&&(a=r.memoizedState.cachePool.pool),r=null,o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(r=o.memoizedState.cachePool.pool),r!==a&&(r!=null&&r.refCount++,a!=null&&na(a))}function Vh(r,o){r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&na(r))}function Cr(r,o,a,f){if(o.subtreeFlags&10256)for(o=o.child;o!==null;)ib(r,o,a,f),o=o.sibling}function ib(r,o,a,f){var h=o.flags;switch(o.tag){case 0:case 11:case 15:Cr(r,o,a,f),h&2048&&ma(9,o);break;case 1:Cr(r,o,a,f);break;case 3:Cr(r,o,a,f),h&2048&&(r=null,o.alternate!==null&&(r=o.alternate.memoizedState.cache),o=o.memoizedState.cache,o!==r&&(o.refCount++,r!=null&&na(r)));break;case 12:if(h&2048){Cr(r,o,a,f),r=o.stateNode;try{var g=o.memoizedProps,S=g.id,w=g.onPostCommit;typeof w=="function"&&w(S,o.alternate===null?"mount":"update",r.passiveEffectDuration,-0)}catch(j){ct(o,o.return,j)}}else Cr(r,o,a,f);break;case 31:Cr(r,o,a,f);break;case 13:Cr(r,o,a,f);break;case 23:break;case 22:g=o.stateNode,S=o.alternate,o.memoizedState!==null?g._visibility&2?Cr(r,o,a,f):ya(r,o):g._visibility&2?Cr(r,o,a,f):(g._visibility|=2,nl(r,o,a,f,(o.subtreeFlags&10256)!==0||!1)),h&2048&&qh(S,o);break;case 24:Cr(r,o,a,f),h&2048&&Vh(o.alternate,o);break;default:Cr(r,o,a,f)}}function nl(r,o,a,f,h){for(h=h&&((o.subtreeFlags&10256)!==0||!1),o=o.child;o!==null;){var g=r,S=o,w=a,j=f,H=S.flags;switch(S.tag){case 0:case 11:case 15:nl(g,S,w,j,h),ma(8,S);break;case 23:break;case 22:var Y=S.stateNode;S.memoizedState!==null?Y._visibility&2?nl(g,S,w,j,h):ya(g,S):(Y._visibility|=2,nl(g,S,w,j,h)),h&&H&2048&&qh(S.alternate,S);break;case 24:nl(g,S,w,j,h),h&&H&2048&&Vh(S.alternate,S);break;default:nl(g,S,w,j,h)}o=o.sibling}}function ya(r,o){if(o.subtreeFlags&10256)for(o=o.child;o!==null;){var a=r,f=o,h=f.flags;switch(f.tag){case 22:ya(a,f),h&2048&&qh(f.alternate,f);break;case 24:ya(a,f),h&2048&&Vh(f.alternate,f);break;default:ya(a,f)}o=o.sibling}}var ba=8192;function rl(r,o,a){if(r.subtreeFlags&ba)for(r=r.child;r!==null;)ob(r,o,a),r=r.sibling}function ob(r,o,a){switch(r.tag){case 26:rl(r,o,a),r.flags&ba&&r.memoizedState!==null&&yE(a,kr,r.memoizedState,r.memoizedProps);break;case 5:rl(r,o,a);break;case 3:case 4:var f=kr;kr=Eu(r.stateNode.containerInfo),rl(r,o,a),kr=f;break;case 22:r.memoizedState===null&&(f=r.alternate,f!==null&&f.memoizedState!==null?(f=ba,ba=16777216,rl(r,o,a),ba=f):rl(r,o,a));break;default:rl(r,o,a)}}function sb(r){var o=r.alternate;if(o!==null&&(r=o.child,r!==null)){o.child=null;do o=r.sibling,r.sibling=null,r=o;while(r!==null)}}function va(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var a=0;a<o.length;a++){var f=o[a];en=f,ab(f,r)}sb(r)}if(r.subtreeFlags&10256)for(r=r.child;r!==null;)lb(r),r=r.sibling}function lb(r){switch(r.tag){case 0:case 11:case 15:va(r),r.flags&2048&&Ji(9,r,r.return);break;case 3:va(r);break;case 12:va(r);break;case 22:var o=r.stateNode;r.memoizedState!==null&&o._visibility&2&&(r.return===null||r.return.tag!==13)?(o._visibility&=-3,fu(r)):va(r);break;default:va(r)}}function fu(r){var o=r.deletions;if((r.flags&16)!==0){if(o!==null)for(var a=0;a<o.length;a++){var f=o[a];en=f,ab(f,r)}sb(r)}for(r=r.child;r!==null;){switch(o=r,o.tag){case 0:case 11:case 15:Ji(8,o,o.return),fu(o);break;case 22:a=o.stateNode,a._visibility&2&&(a._visibility&=-3,fu(o));break;default:fu(o)}r=r.sibling}}function ab(r,o){for(;en!==null;){var a=en;switch(a.tag){case 0:case 11:case 15:Ji(8,a,o);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var f=a.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:na(a.memoizedState.cache)}if(f=a.child,f!==null)f.return=a,en=f;else e:for(a=r;en!==null;){f=en;var h=f.sibling,g=f.return;if(Xy(f),f===a){en=null;break e}if(h!==null){h.return=g,en=h;break e}en=g}}}var NC={getCacheForType:function(r){var o=cn(Ut),a=o.data.get(r);return a===void 0&&(a=r(),o.data.set(r,a)),a},cacheSignal:function(){return cn(Ut).controller.signal}},zC=typeof WeakMap=="function"?WeakMap:Map,it=0,mt=null,Fe=null,Ye=0,at=0,Fn=null,Xi=!1,il=!1,Ph=!1,mi=0,Ot=0,Zi=0,rs=0,Wh=0,Gn=0,ol=0,xa=null,Dn=null,Fh=!1,du=0,cb=0,hu=1/0,pu=null,eo=null,Qt=0,to=null,sl=null,gi=0,Gh=0,$h=null,ub=null,Sa=0,Yh=null;function $n(){return(it&2)!==0&&Ye!==0?Ye&-Ye:F.T!==null?ep():kn()}function fb(){if(Gn===0)if((Ye&536870912)===0||Je){var r=Lo;Lo<<=1,(Lo&3932160)===0&&(Lo=262144),Gn=r}else Gn=536870912;return r=Pn.current,r!==null&&(r.flags|=32),Gn}function Ln(r,o,a){(r===mt&&(at===2||at===9)||r.cancelPendingCommit!==null)&&(ll(r,0),no(r,Ye,Gn,!1)),Xr(r,a),((it&2)===0||r!==mt)&&(r===mt&&((it&2)===0&&(rs|=a),Ot===4&&no(r,Ye,Gn,!1)),Hr(r))}function db(r,o,a){if((it&6)!==0)throw Error(i(327));var f=!a&&(o&127)===0&&(o&r.expiredLanes)===0||br(r,o),h=f?LC(r,o):Qh(r,o,!0),g=f;do{if(h===0){il&&!f&&no(r,o,0,!1);break}else{if(a=r.current.alternate,g&&!RC(a)){h=Qh(r,o,!1),g=!1;continue}if(h===2){if(g=o,r.errorRecoveryDisabledLanes&g)var S=0;else S=r.pendingLanes&-536870913,S=S!==0?S:S&536870912?536870912:0;if(S!==0){o=S;e:{var w=r;h=xa;var j=w.current.memoizedState.isDehydrated;if(j&&(ll(w,S).flags|=256),S=Qh(w,S,!1),S!==2){if(Ph&&!j){w.errorRecoveryDisabledLanes|=g,rs|=g,h=4;break e}g=Dn,Dn=h,g!==null&&(Dn===null?Dn=g:Dn.push.apply(Dn,g))}h=S}if(g=!1,h!==2)continue}}if(h===1){ll(r,0),no(r,o,0,!0);break}e:{switch(f=r,g=h,g){case 0:case 1:throw Error(i(345));case 4:if((o&4194048)!==o)break;case 6:no(f,o,Gn,!Xi);break e;case 2:Dn=null;break;case 3:case 5:break;default:throw Error(i(329))}if((o&62914560)===o&&(h=du+300-Zt(),10<h)){if(no(f,o,Gn,!Xi),zi(f,0,!0)!==0)break e;gi=o,f.timeoutHandle=Pb(hb.bind(null,f,a,Dn,pu,Fh,o,Gn,rs,ol,Xi,g,"Throttled",-0,0),h);break e}hb(f,a,Dn,pu,Fh,o,Gn,rs,ol,Xi,g,null,-0,0)}}break}while(!0);Hr(r)}function hb(r,o,a,f,h,g,S,w,j,H,Y,Q,U,V){if(r.timeoutHandle=-1,Q=o.subtreeFlags,Q&8192||(Q&16785408)===16785408){Q={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:me},ob(o,g,Q);var fe=(g&62914560)===g?du-Zt():(g&4194048)===g?cb-Zt():0;if(fe=bE(Q,fe),fe!==null){gi=g,r.cancelPendingCommit=fe(Sb.bind(null,r,o,g,a,f,h,S,w,j,Y,Q,null,U,V)),no(r,g,S,!H);return}}Sb(r,o,g,a,f,h,S,w,j)}function RC(r){for(var o=r;;){var a=o.tag;if((a===0||a===11||a===15)&&o.flags&16384&&(a=o.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var f=0;f<a.length;f++){var h=a[f],g=h.getSnapshot;h=h.value;try{if(!qn(g(),h))return!1}catch{return!1}}if(a=o.child,o.subtreeFlags&16384&&a!==null)a.return=o,o=a;else{if(o===r)break;for(;o.sibling===null;){if(o.return===null||o.return===r)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function no(r,o,a,f){o&=~Wh,o&=~rs,r.suspendedLanes|=o,r.pingedLanes&=~o,f&&(r.warmLanes|=o),f=r.expirationTimes;for(var h=o;0<h;){var g=31-Sn(h),S=1<<g;f[g]=-1,h&=~S}a!==0&&Cc(r,a,o)}function mu(){return(it&6)===0?(ka(0),!1):!0}function Kh(){if(Fe!==null){if(at===0)var r=Fe.return;else r=Fe,oi=Yo=null,fh(r),Js=null,ia=0,r=Fe;for(;r!==null;)Wy(r.alternate,r),r=r.return;Fe=null}}function ll(r,o){var a=r.timeoutHandle;a!==-1&&(r.timeoutHandle=-1,eE(a)),a=r.cancelPendingCommit,a!==null&&(r.cancelPendingCommit=null,a()),gi=0,Kh(),mt=r,Fe=a=ri(r.current,null),Ye=o,at=0,Fn=null,Xi=!1,il=br(r,o),Ph=!1,ol=Gn=Wh=rs=Zi=Ot=0,Dn=xa=null,Fh=!1,(o&8)!==0&&(o|=o&32);var f=r.entangledLanes;if(f!==0)for(r=r.entanglements,f&=o;0<f;){var h=31-Sn(f),g=1<<h;o|=r[h],f&=~g}return mi=o,Lc(),a}function pb(r,o){ze=null,F.H=da,o===Qs||o===Wc?(o=j0(),at=3):o===Zd?(o=j0(),at=4):at=o===Mh?8:o!==null&&typeof o=="object"&&typeof o.then=="function"?6:1,Fn=o,Fe===null&&(Ot=1,iu(r,nr(o,r.current)))}function mb(){var r=Pn.current;return r===null?!0:(Ye&4194048)===Ye?sr===null:(Ye&62914560)===Ye||(Ye&536870912)!==0?r===sr:!1}function gb(){var r=F.H;return F.H=da,r===null?da:r}function yb(){var r=F.A;return F.A=NC,r}function gu(){Ot=4,Xi||(Ye&4194048)!==Ye&&Pn.current!==null||(il=!0),(Zi&134217727)===0&&(rs&134217727)===0||mt===null||no(mt,Ye,Gn,!1)}function Qh(r,o,a){var f=it;it|=2;var h=gb(),g=yb();(mt!==r||Ye!==o)&&(pu=null,ll(r,o)),o=!1;var S=Ot;e:do try{if(at!==0&&Fe!==null){var w=Fe,j=Fn;switch(at){case 8:Kh(),S=6;break e;case 3:case 2:case 9:case 6:Pn.current===null&&(o=!0);var H=at;if(at=0,Fn=null,al(r,w,j,H),a&&il){S=0;break e}break;default:H=at,at=0,Fn=null,al(r,w,j,H)}}DC(),S=Ot;break}catch(Y){pb(r,Y)}while(!0);return o&&r.shellSuspendCounter++,oi=Yo=null,it=f,F.H=h,F.A=g,Fe===null&&(mt=null,Ye=0,Lc()),S}function DC(){for(;Fe!==null;)bb(Fe)}function LC(r,o){var a=it;it|=2;var f=gb(),h=yb();mt!==r||Ye!==o?(pu=null,hu=Zt()+500,ll(r,o)):il=br(r,o);e:do try{if(at!==0&&Fe!==null){o=Fe;var g=Fn;t:switch(at){case 1:at=0,Fn=null,al(r,o,g,1);break;case 2:case 9:if(A0(g)){at=0,Fn=null,vb(o);break}o=function(){at!==2&&at!==9||mt!==r||(at=7),Hr(r)},g.then(o,o);break e;case 3:at=7;break e;case 4:at=5;break e;case 7:A0(g)?(at=0,Fn=null,vb(o)):(at=0,Fn=null,al(r,o,g,7));break;case 5:var S=null;switch(Fe.tag){case 26:S=Fe.memoizedState;case 5:case 27:var w=Fe;if(S?i1(S):w.stateNode.complete){at=0,Fn=null;var j=w.sibling;if(j!==null)Fe=j;else{var H=w.return;H!==null?(Fe=H,yu(H)):Fe=null}break t}}at=0,Fn=null,al(r,o,g,5);break;case 6:at=0,Fn=null,al(r,o,g,6);break;case 8:Kh(),Ot=6;break e;default:throw Error(i(462))}}BC();break}catch(Y){pb(r,Y)}while(!0);return oi=Yo=null,F.H=f,F.A=h,it=a,Fe!==null?0:(mt=null,Ye=0,Lc(),Ot)}function BC(){for(;Fe!==null&&!Zn();)bb(Fe)}function bb(r){var o=Vy(r.alternate,r,mi);r.memoizedProps=r.pendingProps,o===null?yu(r):Fe=o}function vb(r){var o=r,a=o.alternate;switch(o.tag){case 15:case 0:o=Ly(a,o,o.pendingProps,o.type,void 0,Ye);break;case 11:o=Ly(a,o,o.pendingProps,o.type.render,o.ref,Ye);break;case 5:fh(o);default:Wy(a,o),o=Fe=y0(o,mi),o=Vy(a,o,mi)}r.memoizedProps=r.pendingProps,o===null?yu(r):Fe=o}function al(r,o,a,f){oi=Yo=null,fh(o),Js=null,ia=0;var h=o.return;try{if(wC(r,h,o,a,Ye)){Ot=1,iu(r,nr(a,r.current)),Fe=null;return}}catch(g){if(h!==null)throw Fe=h,g;Ot=1,iu(r,nr(a,r.current)),Fe=null;return}o.flags&32768?(Je||f===1?r=!0:il||(Ye&536870912)!==0?r=!1:(Xi=r=!0,(f===2||f===9||f===3||f===6)&&(f=Pn.current,f!==null&&f.tag===13&&(f.flags|=16384))),xb(o,r)):yu(o)}function yu(r){var o=r;do{if((o.flags&32768)!==0){xb(o,Xi);return}r=o.return;var a=AC(o.alternate,o,mi);if(a!==null){Fe=a;return}if(o=o.sibling,o!==null){Fe=o;return}Fe=o=r}while(o!==null);Ot===0&&(Ot=5)}function xb(r,o){do{var a=_C(r.alternate,r);if(a!==null){a.flags&=32767,Fe=a;return}if(a=r.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!o&&(r=r.sibling,r!==null)){Fe=r;return}Fe=r=a}while(r!==null);Ot=6,Fe=null}function Sb(r,o,a,f,h,g,S,w,j){r.cancelPendingCommit=null;do bu();while(Qt!==0);if((it&6)!==0)throw Error(i(327));if(o!==null){if(o===r.current)throw Error(i(177));if(g=o.lanes|o.childLanes,g|=Id,Ri(r,a,g,S,w,j),r===mt&&(Fe=mt=null,Ye=0),sl=o,to=r,gi=a,Gh=g,$h=h,ub=f,(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?(r.callbackNode=null,r.callbackPriority=0,qC(gn,function(){return Tb(),null})):(r.callbackNode=null,r.callbackPriority=0),f=(o.flags&13878)!==0,(o.subtreeFlags&13878)!==0||f){f=F.T,F.T=null,h=X.p,X.p=2,S=it,it|=4;try{jC(r,o,a)}finally{it=S,X.p=h,F.T=f}}Qt=1,kb(),Cb(),Eb()}}function kb(){if(Qt===1){Qt=0;var r=to,o=sl,a=(o.flags&13878)!==0;if((o.subtreeFlags&13878)!==0||a){a=F.T,F.T=null;var f=X.p;X.p=2;var h=it;it|=4;try{nb(o,r);var g=ap,S=a0(r.containerInfo),w=g.focusedElem,j=g.selectionRange;if(S!==w&&w&&w.ownerDocument&&l0(w.ownerDocument.documentElement,w)){if(j!==null&&zd(w)){var H=j.start,Y=j.end;if(Y===void 0&&(Y=H),"selectionStart"in w)w.selectionStart=H,w.selectionEnd=Math.min(Y,w.value.length);else{var Q=w.ownerDocument||document,U=Q&&Q.defaultView||window;if(U.getSelection){var V=U.getSelection(),fe=w.textContent.length,Ee=Math.min(j.start,fe),pt=j.end===void 0?Ee:Math.min(j.end,fe);!V.extend&&Ee>pt&&(S=pt,pt=Ee,Ee=S);var D=s0(w,Ee),z=s0(w,pt);if(D&&z&&(V.rangeCount!==1||V.anchorNode!==D.node||V.anchorOffset!==D.offset||V.focusNode!==z.node||V.focusOffset!==z.offset)){var I=Q.createRange();I.setStart(D.node,D.offset),V.removeAllRanges(),Ee>pt?(V.addRange(I),V.extend(z.node,z.offset)):(I.setEnd(z.node,z.offset),V.addRange(I))}}}}for(Q=[],V=w;V=V.parentNode;)V.nodeType===1&&Q.push({element:V,left:V.scrollLeft,top:V.scrollTop});for(typeof w.focus=="function"&&w.focus(),w=0;w<Q.length;w++){var K=Q[w];K.element.scrollLeft=K.left,K.element.scrollTop=K.top}}ju=!!lp,ap=lp=null}finally{it=h,X.p=f,F.T=a}}r.current=o,Qt=2}}function Cb(){if(Qt===2){Qt=0;var r=to,o=sl,a=(o.flags&8772)!==0;if((o.subtreeFlags&8772)!==0||a){a=F.T,F.T=null;var f=X.p;X.p=2;var h=it;it|=4;try{Jy(r,o.alternate,o)}finally{it=h,X.p=f,F.T=a}}Qt=3}}function Eb(){if(Qt===4||Qt===3){Qt=0,Qr();var r=to,o=sl,a=gi,f=ub;(o.subtreeFlags&10256)!==0||(o.flags&10256)!==0?Qt=5:(Qt=0,sl=to=null,wb(r,r.pendingLanes));var h=r.pendingLanes;if(h===0&&(eo=null),Pl(a),o=o.stateNode,Kt&&typeof Kt.onCommitFiberRoot=="function")try{Kt.onCommitFiberRoot(Do,o,void 0,(o.current.flags&128)===128)}catch{}if(f!==null){o=F.T,h=X.p,X.p=2,F.T=null;try{for(var g=r.onRecoverableError,S=0;S<f.length;S++){var w=f[S];g(w.value,{componentStack:w.stack})}}finally{F.T=o,X.p=h}}(gi&3)!==0&&bu(),Hr(r),h=r.pendingLanes,(a&261930)!==0&&(h&42)!==0?r===Yh?Sa++:(Sa=0,Yh=r):Sa=0,ka(0)}}function wb(r,o){(r.pooledCacheLanes&=o)===0&&(o=r.pooledCache,o!=null&&(r.pooledCache=null,na(o)))}function bu(){return kb(),Cb(),Eb(),Tb()}function Tb(){if(Qt!==5)return!1;var r=to,o=Gh;Gh=0;var a=Pl(gi),f=F.T,h=X.p;try{X.p=32>a?32:a,F.T=null,a=$h,$h=null;var g=to,S=gi;if(Qt=0,sl=to=null,gi=0,(it&6)!==0)throw Error(i(331));var w=it;if(it|=4,lb(g.current),ib(g,g.current,S,a),it=w,ka(0,!1),Kt&&typeof Kt.onPostCommitFiberRoot=="function")try{Kt.onPostCommitFiberRoot(Do,g)}catch{}return!0}finally{X.p=h,F.T=f,wb(r,o)}}function Mb(r,o,a){o=nr(a,o),o=Th(r.stateNode,o,2),r=Yi(r,o,2),r!==null&&(Xr(r,2),Hr(r))}function ct(r,o,a){if(r.tag===3)Mb(r,r,a);else for(;o!==null;){if(o.tag===3){Mb(o,r,a);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(eo===null||!eo.has(f))){r=nr(a,r),a=Ay(2),f=Yi(o,a,2),f!==null&&(_y(a,f,o,r),Xr(f,2),Hr(f));break}}o=o.return}}function Jh(r,o,a){var f=r.pingCache;if(f===null){f=r.pingCache=new zC;var h=new Set;f.set(o,h)}else h=f.get(o),h===void 0&&(h=new Set,f.set(o,h));h.has(a)||(Ph=!0,h.add(a),r=IC.bind(null,r,o,a),o.then(r,r))}function IC(r,o,a){var f=r.pingCache;f!==null&&f.delete(o),r.pingedLanes|=r.suspendedLanes&a,r.warmLanes&=~a,mt===r&&(Ye&a)===a&&(Ot===4||Ot===3&&(Ye&62914560)===Ye&&300>Zt()-du?(it&2)===0&&ll(r,0):Wh|=a,ol===Ye&&(ol=0)),Hr(r)}function Ab(r,o){o===0&&(o=kc()),r=Fo(r,o),r!==null&&(Xr(r,o),Hr(r))}function HC(r){var o=r.memoizedState,a=0;o!==null&&(a=o.retryLane),Ab(r,a)}function UC(r,o){var a=0;switch(r.tag){case 31:case 13:var f=r.stateNode,h=r.memoizedState;h!==null&&(a=h.retryLane);break;case 19:f=r.stateNode;break;case 22:f=r.stateNode._retryCache;break;default:throw Error(i(314))}f!==null&&f.delete(o),Ab(r,a)}function qC(r,o){return Xt(r,o)}var vu=null,cl=null,Xh=!1,xu=!1,Zh=!1,ro=0;function Hr(r){r!==cl&&r.next===null&&(cl===null?vu=cl=r:cl=cl.next=r),xu=!0,Xh||(Xh=!0,PC())}function ka(r,o){if(!Zh&&xu){Zh=!0;do for(var a=!1,f=vu;f!==null;){if(r!==0){var h=f.pendingLanes;if(h===0)var g=0;else{var S=f.suspendedLanes,w=f.pingedLanes;g=(1<<31-Sn(42|r)+1)-1,g&=h&~(S&~w),g=g&201326741?g&201326741|1:g?g|2:0}g!==0&&(a=!0,Nb(f,g))}else g=Ye,g=zi(f,f===mt?g:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(g&3)===0||br(f,g)||(a=!0,Nb(f,g));f=f.next}while(a);Zh=!1}}function VC(){_b()}function _b(){xu=Xh=!1;var r=0;ro!==0&&ZC()&&(r=ro);for(var o=Zt(),a=null,f=vu;f!==null;){var h=f.next,g=jb(f,o);g===0?(f.next=null,a===null?vu=h:a.next=h,h===null&&(cl=a)):(a=f,(r!==0||(g&3)!==0)&&(xu=!0)),f=h}Qt!==0&&Qt!==5||ka(r),ro!==0&&(ro=0)}function jb(r,o){for(var a=r.suspendedLanes,f=r.pingedLanes,h=r.expirationTimes,g=r.pendingLanes&-62914561;0<g;){var S=31-Sn(g),w=1<<S,j=h[S];j===-1?((w&a)===0||(w&f)!==0)&&(h[S]=Bo(w,o)):j<=o&&(r.expiredLanes|=w),g&=~w}if(o=mt,a=Ye,a=zi(r,r===o?a:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),f=r.callbackNode,a===0||r===o&&(at===2||at===9)||r.cancelPendingCommit!==null)return f!==null&&f!==null&&Un(f),r.callbackNode=null,r.callbackPriority=0;if((a&3)===0||br(r,a)){if(o=a&-a,o===r.callbackPriority)return o;switch(f!==null&&Un(f),Pl(a)){case 2:case 8:a=_r;break;case 32:a=gn;break;case 268435456:a=xc;break;default:a=gn}return f=Ob.bind(null,r),a=Xt(a,f),r.callbackPriority=o,r.callbackNode=a,o}return f!==null&&f!==null&&Un(f),r.callbackPriority=2,r.callbackNode=null,2}function Ob(r,o){if(Qt!==0&&Qt!==5)return r.callbackNode=null,r.callbackPriority=0,null;var a=r.callbackNode;if(bu()&&r.callbackNode!==a)return null;var f=Ye;return f=zi(r,r===mt?f:0,r.cancelPendingCommit!==null||r.timeoutHandle!==-1),f===0?null:(db(r,f,o),jb(r,Zt()),r.callbackNode!=null&&r.callbackNode===a?Ob.bind(null,r):null)}function Nb(r,o){if(bu())return null;db(r,o,!0)}function PC(){tE(function(){(it&6)!==0?Xt(Ro,VC):_b()})}function ep(){if(ro===0){var r=Ys;r===0&&(r=Ni,Ni<<=1,(Ni&261888)===0&&(Ni=256)),ro=r}return ro}function zb(r){return r==null||typeof r=="symbol"||typeof r=="boolean"?null:typeof r=="function"?r:ce(""+r)}function Rb(r,o){var a=o.ownerDocument.createElement("input");return a.name=o.name,a.value=o.value,r.id&&a.setAttribute("form",r.id),o.parentNode.insertBefore(a,o),r=new FormData(r),a.parentNode.removeChild(a),r}function WC(r,o,a,f,h){if(o==="submit"&&a&&a.stateNode===h){var g=zb((h[ln]||null).action),S=f.submitter;S&&(o=(o=S[ln]||null)?zb(o.formAction):S.getAttribute("formAction"),o!==null&&(g=o,S=null));var w=new Nc("action","action",null,f,h);r.push({event:w,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(ro!==0){var j=S?Rb(h,S):new FormData(h);xh(a,{pending:!0,data:j,method:h.method,action:g},null,j)}}else typeof g=="function"&&(w.preventDefault(),j=S?Rb(h,S):new FormData(h),xh(a,{pending:!0,data:j,method:h.method,action:g},g,j))},currentTarget:h}]})}}for(var tp=0;tp<Bd.length;tp++){var np=Bd[tp],FC=np.toLowerCase(),GC=np[0].toUpperCase()+np.slice(1);Sr(FC,"on"+GC)}Sr(f0,"onAnimationEnd"),Sr(d0,"onAnimationIteration"),Sr(h0,"onAnimationStart"),Sr("dblclick","onDoubleClick"),Sr("focusin","onFocus"),Sr("focusout","onBlur"),Sr(aC,"onTransitionRun"),Sr(cC,"onTransitionStart"),Sr(uC,"onTransitionCancel"),Sr(p0,"onTransitionEnd"),yn("onMouseEnter",["mouseout","mouseover"]),yn("onMouseLeave",["mouseout","mouseover"]),yn("onPointerEnter",["pointerout","pointerover"]),yn("onPointerLeave",["pointerout","pointerover"]),ei("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),ei("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),ei("onBeforeInput",["compositionend","keypress","textInput","paste"]),ei("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),ei("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),ei("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ca="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),$C=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ca));function Db(r,o){o=(o&4)!==0;for(var a=0;a<r.length;a++){var f=r[a],h=f.event;f=f.listeners;e:{var g=void 0;if(o)for(var S=f.length-1;0<=S;S--){var w=f[S],j=w.instance,H=w.currentTarget;if(w=w.listener,j!==g&&h.isPropagationStopped())break e;g=w,h.currentTarget=H;try{g(h)}catch(Y){Dc(Y)}h.currentTarget=null,g=j}else for(S=0;S<f.length;S++){if(w=f[S],j=w.instance,H=w.currentTarget,w=w.listener,j!==g&&h.isPropagationStopped())break e;g=w,h.currentTarget=H;try{g(h)}catch(Y){Dc(Y)}h.currentTarget=null,g=j}}}}function Ge(r,o){var a=o[Ls];a===void 0&&(a=o[Ls]=new Set);var f=r+"__bubble";a.has(f)||(Lb(o,r,2,!1),a.add(f))}function rp(r,o,a){var f=0;o&&(f|=4),Lb(a,r,f,o)}var Su="_reactListening"+Math.random().toString(36).slice(2);function ip(r){if(!r[Su]){r[Su]=!0,Mc.forEach(function(a){a!=="selectionchange"&&($C.has(a)||rp(a,!1,r),rp(a,!0,r))});var o=r.nodeType===9?r:r.ownerDocument;o===null||o[Su]||(o[Su]=!0,rp("selectionchange",!1,o))}}function Lb(r,o,a,f){switch(f1(o)){case 2:var h=SE;break;case 8:h=kE;break;default:h=vp}a=h.bind(null,o,a,r),h=void 0,!Ho||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(h=!0),f?h!==void 0?r.addEventListener(o,a,{capture:!0,passive:h}):r.addEventListener(o,a,!0):h!==void 0?r.addEventListener(o,a,{passive:h}):r.addEventListener(o,a,!1)}function op(r,o,a,f,h){var g=f;if((o&1)===0&&(o&2)===0&&f!==null)e:for(;;){if(f===null)return;var S=f.tag;if(S===3||S===4){var w=f.stateNode.containerInfo;if(w===h)break;if(S===4)for(S=f.return;S!==null;){var j=S.tag;if((j===3||j===4)&&S.stateNode.containerInfo===h)return;S=S.return}for(;w!==null;){if(S=Li(w),S===null)return;if(j=S.tag,j===5||j===6||j===26||j===27){f=g=S;continue e}w=w.parentNode}}f=f.return}Gl(function(){var H=g,Y=he(a),Q=[];e:{var U=m0.get(r);if(U!==void 0){var V=Nc,fe=r;switch(r){case"keypress":if(qo(a)===0)break e;case"keydown":case"keyup":V=Uk;break;case"focusin":fe="focus",V=Ad;break;case"focusout":fe="blur",V=Ad;break;case"beforeblur":case"afterblur":V=Ad;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":V=Wg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":V=Ak;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":V=Pk;break;case f0:case d0:case h0:V=Ok;break;case p0:V=Fk;break;case"scroll":case"scrollend":V=Tk;break;case"wheel":V=$k;break;case"copy":case"cut":case"paste":V=zk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":V=Gg;break;case"toggle":case"beforetoggle":V=Kk}var Ee=(o&4)!==0,pt=!Ee&&(r==="scroll"||r==="scrollend"),D=Ee?U!==null?U+"Capture":null:U;Ee=[];for(var z=H,I;z!==null;){var K=z;if(I=K.stateNode,K=K.tag,K!==5&&K!==26&&K!==27||I===null||D===null||(K=qi(z,D),K!=null&&Ee.push(Ea(z,K,I))),pt)break;z=z.return}0<Ee.length&&(U=new V(U,fe,null,a,Y),Q.push({event:U,listeners:Ee}))}}if((o&7)===0){e:{if(U=r==="mouseover"||r==="pointerover",V=r==="mouseout"||r==="pointerout",U&&a!==kt&&(fe=a.relatedTarget||a.fromElement)&&(Li(fe)||fe[Zr]))break e;if((V||U)&&(U=Y.window===Y?Y:(U=Y.ownerDocument)?U.defaultView||U.parentWindow:window,V?(fe=a.relatedTarget||a.toElement,V=H,fe=fe?Li(fe):null,fe!==null&&(pt=l(fe),Ee=fe.tag,fe!==pt||Ee!==5&&Ee!==27&&Ee!==6)&&(fe=null)):(V=null,fe=H),V!==fe)){if(Ee=Wg,K="onMouseLeave",D="onMouseEnter",z="mouse",(r==="pointerout"||r==="pointerover")&&(Ee=Gg,K="onPointerLeave",D="onPointerEnter",z="pointer"),pt=V==null?U:Io(V),I=fe==null?U:Io(fe),U=new Ee(K,z+"leave",V,a,Y),U.target=pt,U.relatedTarget=I,K=null,Li(Y)===H&&(Ee=new Ee(D,z+"enter",fe,a,Y),Ee.target=I,Ee.relatedTarget=pt,K=Ee),pt=K,V&&fe)t:{for(Ee=YC,D=V,z=fe,I=0,K=D;K;K=Ee(K))I++;K=0;for(var ke=z;ke;ke=Ee(ke))K++;for(;0<I-K;)D=Ee(D),I--;for(;0<K-I;)z=Ee(z),K--;for(;I--;){if(D===z||z!==null&&D===z.alternate){Ee=D;break t}D=Ee(D),z=Ee(z)}Ee=null}else Ee=null;V!==null&&Bb(Q,U,V,Ee,!1),fe!==null&&pt!==null&&Bb(Q,pt,fe,Ee,!0)}}e:{if(U=H?Io(H):window,V=U.nodeName&&U.nodeName.toLowerCase(),V==="select"||V==="input"&&U.type==="file")var nt=e0;else if(Xg(U))if(t0)nt=oC;else{nt=rC;var ge=nC}else V=U.nodeName,!V||V.toLowerCase()!=="input"||U.type!=="checkbox"&&U.type!=="radio"?H&&tt(H.elementType)&&(nt=e0):nt=iC;if(nt&&(nt=nt(r,H))){Zg(Q,nt,a,Y);break e}ge&&ge(r,U,H),r==="focusout"&&H&&U.type==="number"&&H.memoizedProps.value!=null&&q(U,"number",U.value)}switch(ge=H?Io(H):window,r){case"focusin":(Xg(ge)||ge.contentEditable==="true")&&(Us=ge,Rd=H,Zl=null);break;case"focusout":Zl=Rd=Us=null;break;case"mousedown":Dd=!0;break;case"contextmenu":case"mouseup":case"dragend":Dd=!1,c0(Q,a,Y);break;case"selectionchange":if(lC)break;case"keydown":case"keyup":c0(Q,a,Y)}var De;if(jd)e:{switch(r){case"compositionstart":var Ke="onCompositionStart";break e;case"compositionend":Ke="onCompositionEnd";break e;case"compositionupdate":Ke="onCompositionUpdate";break e}Ke=void 0}else Hs?Qg(r,a)&&(Ke="onCompositionEnd"):r==="keydown"&&a.keyCode===229&&(Ke="onCompositionStart");Ke&&($g&&a.locale!=="ko"&&(Hs||Ke!=="onCompositionStart"?Ke==="onCompositionEnd"&&Hs&&(De=ni()):(Dr=Y,se="value"in Dr?Dr.value:Dr.textContent,Hs=!0)),ge=ku(H,Ke),0<ge.length&&(Ke=new Fg(Ke,r,null,a,Y),Q.push({event:Ke,listeners:ge}),De?Ke.data=De:(De=Jg(a),De!==null&&(Ke.data=De)))),(De=Jk?Xk(r,a):Zk(r,a))&&(Ke=ku(H,"onBeforeInput"),0<Ke.length&&(ge=new Fg("onBeforeInput","beforeinput",null,a,Y),Q.push({event:ge,listeners:Ke}),ge.data=De)),WC(Q,r,H,a,Y)}Db(Q,o)})}function Ea(r,o,a){return{instance:r,listener:o,currentTarget:a}}function ku(r,o){for(var a=o+"Capture",f=[];r!==null;){var h=r,g=h.stateNode;if(h=h.tag,h!==5&&h!==26&&h!==27||g===null||(h=qi(r,a),h!=null&&f.unshift(Ea(r,h,g)),h=qi(r,o),h!=null&&f.push(Ea(r,h,g))),r.tag===3)return f;r=r.return}return[]}function YC(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5&&r.tag!==27);return r||null}function Bb(r,o,a,f,h){for(var g=o._reactName,S=[];a!==null&&a!==f;){var w=a,j=w.alternate,H=w.stateNode;if(w=w.tag,j!==null&&j===f)break;w!==5&&w!==26&&w!==27||H===null||(j=H,h?(H=qi(a,g),H!=null&&S.unshift(Ea(a,H,j))):h||(H=qi(a,g),H!=null&&S.push(Ea(a,H,j)))),a=a.return}S.length!==0&&r.push({event:o,listeners:S})}var KC=/\r\n?/g,QC=/\u0000|\uFFFD/g;function Ib(r){return(typeof r=="string"?r:""+r).replace(KC,`
`).replace(QC,"")}function Hb(r,o){return o=Ib(o),Ib(r)===o}function ht(r,o,a,f,h,g){switch(a){case"children":typeof f=="string"?o==="body"||o==="textarea"&&f===""||le(r,f):(typeof f=="number"||typeof f=="bigint")&&o!=="body"&&le(r,""+f);break;case"className":Rr(r,"class",f);break;case"tabIndex":Rr(r,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":Rr(r,a,f);break;case"style":Ve(r,f,g);break;case"data":if(o!=="object"){Rr(r,"data",f);break}case"src":case"href":if(f===""&&(o!=="a"||a!=="href")){r.removeAttribute(a);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){r.removeAttribute(a);break}f=ce(""+f),r.setAttribute(a,f);break;case"action":case"formAction":if(typeof f=="function"){r.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof g=="function"&&(a==="formAction"?(o!=="input"&&ht(r,o,"name",h.name,h,null),ht(r,o,"formEncType",h.formEncType,h,null),ht(r,o,"formMethod",h.formMethod,h,null),ht(r,o,"formTarget",h.formTarget,h,null)):(ht(r,o,"encType",h.encType,h,null),ht(r,o,"method",h.method,h,null),ht(r,o,"target",h.target,h,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){r.removeAttribute(a);break}f=ce(""+f),r.setAttribute(a,f);break;case"onClick":f!=null&&(r.onclick=me);break;case"onScroll":f!=null&&Ge("scroll",r);break;case"onScrollEnd":f!=null&&Ge("scrollend",r);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(i(61));if(a=f.__html,a!=null){if(h.children!=null)throw Error(i(60));r.innerHTML=a}}break;case"multiple":r.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":r.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){r.removeAttribute("xlink:href");break}a=ce(""+f),r.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?r.setAttribute(a,""+f):r.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?r.setAttribute(a,""):r.removeAttribute(a);break;case"capture":case"download":f===!0?r.setAttribute(a,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?r.setAttribute(a,f):r.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?r.setAttribute(a,f):r.removeAttribute(a);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?r.removeAttribute(a):r.setAttribute(a,f);break;case"popover":Ge("beforetoggle",r),Ge("toggle",r),Bs(r,"popover",f);break;case"xlinkActuate":vr(r,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":vr(r,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":vr(r,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":vr(r,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":vr(r,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":vr(r,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":vr(r,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":vr(r,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":vr(r,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":Bs(r,"is",f);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=Re.get(a)||a,Bs(r,a,f))}}function sp(r,o,a,f,h,g){switch(a){case"style":Ve(r,f,g);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(i(61));if(a=f.__html,a!=null){if(h.children!=null)throw Error(i(60));r.innerHTML=a}}break;case"children":typeof f=="string"?le(r,f):(typeof f=="number"||typeof f=="bigint")&&le(r,""+f);break;case"onScroll":f!=null&&Ge("scroll",r);break;case"onScrollEnd":f!=null&&Ge("scrollend",r);break;case"onClick":f!=null&&(r.onclick=me);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Hi.hasOwnProperty(a))e:{if(a[0]==="o"&&a[1]==="n"&&(h=a.endsWith("Capture"),o=a.slice(2,h?a.length-7:void 0),g=r[ln]||null,g=g!=null?g[a]:null,typeof g=="function"&&r.removeEventListener(o,g,h),typeof f=="function")){typeof g!="function"&&g!==null&&(a in r?r[a]=null:r.hasAttribute(a)&&r.removeAttribute(a)),r.addEventListener(o,f,h);break e}a in r?r[a]=f:f===!0?r.setAttribute(a,""):Bs(r,a,f)}}}function fn(r,o,a){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Ge("error",r),Ge("load",r);var f=!1,h=!1,g;for(g in a)if(a.hasOwnProperty(g)){var S=a[g];if(S!=null)switch(g){case"src":f=!0;break;case"srcSet":h=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:ht(r,o,g,S,a,null)}}h&&ht(r,o,"srcSet",a.srcSet,a,null),f&&ht(r,o,"src",a.src,a,null);return;case"input":Ge("invalid",r);var w=g=S=h=null,j=null,H=null;for(f in a)if(a.hasOwnProperty(f)){var Y=a[f];if(Y!=null)switch(f){case"name":h=Y;break;case"type":S=Y;break;case"checked":j=Y;break;case"defaultChecked":H=Y;break;case"value":g=Y;break;case"defaultValue":w=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(i(137,o));break;default:ht(r,o,f,Y,a,null)}}O(r,g,w,j,H,S,h,!1);return;case"select":Ge("invalid",r),f=S=g=null;for(h in a)if(a.hasOwnProperty(h)&&(w=a[h],w!=null))switch(h){case"value":g=w;break;case"defaultValue":S=w;break;case"multiple":f=w;default:ht(r,o,h,w,a,null)}o=g,a=S,r.multiple=!!f,o!=null?G(r,!!f,o,!1):a!=null&&G(r,!!f,a,!0);return;case"textarea":Ge("invalid",r),g=h=f=null;for(S in a)if(a.hasOwnProperty(S)&&(w=a[S],w!=null))switch(S){case"value":f=w;break;case"defaultValue":h=w;break;case"children":g=w;break;case"dangerouslySetInnerHTML":if(w!=null)throw Error(i(91));break;default:ht(r,o,S,w,a,null)}ue(r,f,h,g);return;case"option":for(j in a)if(a.hasOwnProperty(j)&&(f=a[j],f!=null))switch(j){case"selected":r.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:ht(r,o,j,f,a,null)}return;case"dialog":Ge("beforetoggle",r),Ge("toggle",r),Ge("cancel",r),Ge("close",r);break;case"iframe":case"object":Ge("load",r);break;case"video":case"audio":for(f=0;f<Ca.length;f++)Ge(Ca[f],r);break;case"image":Ge("error",r),Ge("load",r);break;case"details":Ge("toggle",r);break;case"embed":case"source":case"link":Ge("error",r),Ge("load",r);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(H in a)if(a.hasOwnProperty(H)&&(f=a[H],f!=null))switch(H){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,o));default:ht(r,o,H,f,a,null)}return;default:if(tt(o)){for(Y in a)a.hasOwnProperty(Y)&&(f=a[Y],f!==void 0&&sp(r,o,Y,f,a,void 0));return}}for(w in a)a.hasOwnProperty(w)&&(f=a[w],f!=null&&ht(r,o,w,f,a,null))}function JC(r,o,a,f){switch(o){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var h=null,g=null,S=null,w=null,j=null,H=null,Y=null;for(V in a){var Q=a[V];if(a.hasOwnProperty(V)&&Q!=null)switch(V){case"checked":break;case"value":break;case"defaultValue":j=Q;default:f.hasOwnProperty(V)||ht(r,o,V,null,f,Q)}}for(var U in f){var V=f[U];if(Q=a[U],f.hasOwnProperty(U)&&(V!=null||Q!=null))switch(U){case"type":g=V;break;case"name":h=V;break;case"checked":H=V;break;case"defaultChecked":Y=V;break;case"value":S=V;break;case"defaultValue":w=V;break;case"children":case"dangerouslySetInnerHTML":if(V!=null)throw Error(i(137,o));break;default:V!==Q&&ht(r,o,U,V,f,Q)}}A(r,S,w,j,H,Y,g,h);return;case"select":V=S=w=U=null;for(g in a)if(j=a[g],a.hasOwnProperty(g)&&j!=null)switch(g){case"value":break;case"multiple":V=j;default:f.hasOwnProperty(g)||ht(r,o,g,null,f,j)}for(h in f)if(g=f[h],j=a[h],f.hasOwnProperty(h)&&(g!=null||j!=null))switch(h){case"value":U=g;break;case"defaultValue":w=g;break;case"multiple":S=g;default:g!==j&&ht(r,o,h,g,f,j)}o=w,a=S,f=V,U!=null?G(r,!!a,U,!1):!!f!=!!a&&(o!=null?G(r,!!a,o,!0):G(r,!!a,a?[]:"",!1));return;case"textarea":V=U=null;for(w in a)if(h=a[w],a.hasOwnProperty(w)&&h!=null&&!f.hasOwnProperty(w))switch(w){case"value":break;case"children":break;default:ht(r,o,w,null,f,h)}for(S in f)if(h=f[S],g=a[S],f.hasOwnProperty(S)&&(h!=null||g!=null))switch(S){case"value":U=h;break;case"defaultValue":V=h;break;case"children":break;case"dangerouslySetInnerHTML":if(h!=null)throw Error(i(91));break;default:h!==g&&ht(r,o,S,h,f,g)}ie(r,U,V);return;case"option":for(var fe in a)if(U=a[fe],a.hasOwnProperty(fe)&&U!=null&&!f.hasOwnProperty(fe))switch(fe){case"selected":r.selected=!1;break;default:ht(r,o,fe,null,f,U)}for(j in f)if(U=f[j],V=a[j],f.hasOwnProperty(j)&&U!==V&&(U!=null||V!=null))switch(j){case"selected":r.selected=U&&typeof U!="function"&&typeof U!="symbol";break;default:ht(r,o,j,U,f,V)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Ee in a)U=a[Ee],a.hasOwnProperty(Ee)&&U!=null&&!f.hasOwnProperty(Ee)&&ht(r,o,Ee,null,f,U);for(H in f)if(U=f[H],V=a[H],f.hasOwnProperty(H)&&U!==V&&(U!=null||V!=null))switch(H){case"children":case"dangerouslySetInnerHTML":if(U!=null)throw Error(i(137,o));break;default:ht(r,o,H,U,f,V)}return;default:if(tt(o)){for(var pt in a)U=a[pt],a.hasOwnProperty(pt)&&U!==void 0&&!f.hasOwnProperty(pt)&&sp(r,o,pt,void 0,f,U);for(Y in f)U=f[Y],V=a[Y],!f.hasOwnProperty(Y)||U===V||U===void 0&&V===void 0||sp(r,o,Y,U,f,V);return}}for(var D in a)U=a[D],a.hasOwnProperty(D)&&U!=null&&!f.hasOwnProperty(D)&&ht(r,o,D,null,f,U);for(Q in f)U=f[Q],V=a[Q],!f.hasOwnProperty(Q)||U===V||U==null&&V==null||ht(r,o,Q,U,f,V)}function Ub(r){switch(r){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function XC(){if(typeof performance.getEntriesByType=="function"){for(var r=0,o=0,a=performance.getEntriesByType("resource"),f=0;f<a.length;f++){var h=a[f],g=h.transferSize,S=h.initiatorType,w=h.duration;if(g&&w&&Ub(S)){for(S=0,w=h.responseEnd,f+=1;f<a.length;f++){var j=a[f],H=j.startTime;if(H>w)break;var Y=j.transferSize,Q=j.initiatorType;Y&&Ub(Q)&&(j=j.responseEnd,S+=Y*(j<w?1:(w-H)/(j-H)))}if(--f,o+=8*(g+S)/(h.duration/1e3),r++,10<r)break}}if(0<r)return o/r/1e6}return navigator.connection&&(r=navigator.connection.downlink,typeof r=="number")?r:5}var lp=null,ap=null;function Cu(r){return r.nodeType===9?r:r.ownerDocument}function qb(r){switch(r){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Vb(r,o){if(r===0)switch(o){case"svg":return 1;case"math":return 2;default:return 0}return r===1&&o==="foreignObject"?0:r}function cp(r,o){return r==="textarea"||r==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.children=="bigint"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var up=null;function ZC(){var r=window.event;return r&&r.type==="popstate"?r===up?!1:(up=r,!0):(up=null,!1)}var Pb=typeof setTimeout=="function"?setTimeout:void 0,eE=typeof clearTimeout=="function"?clearTimeout:void 0,Wb=typeof Promise=="function"?Promise:void 0,tE=typeof queueMicrotask=="function"?queueMicrotask:typeof Wb<"u"?function(r){return Wb.resolve(null).then(r).catch(nE)}:Pb;function nE(r){setTimeout(function(){throw r})}function io(r){return r==="head"}function Fb(r,o){var a=o,f=0;do{var h=a.nextSibling;if(r.removeChild(a),h&&h.nodeType===8)if(a=h.data,a==="/$"||a==="/&"){if(f===0){r.removeChild(h),hl(o);return}f--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")f++;else if(a==="html")wa(r.ownerDocument.documentElement);else if(a==="head"){a=r.ownerDocument.head,wa(a);for(var g=a.firstChild;g;){var S=g.nextSibling,w=g.nodeName;g[Di]||w==="SCRIPT"||w==="STYLE"||w==="LINK"&&g.rel.toLowerCase()==="stylesheet"||a.removeChild(g),g=S}}else a==="body"&&wa(r.ownerDocument.body);a=h}while(a);hl(o)}function Gb(r,o){var a=r;r=0;do{var f=a.nextSibling;if(a.nodeType===1?o?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(o?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(r===0)break;r--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||r++;a=f}while(a)}function fp(r){var o=r.firstChild;for(o&&o.nodeType===10&&(o=o.nextSibling);o;){var a=o;switch(o=o.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":fp(a),Wl(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}r.removeChild(a)}}function rE(r,o,a,f){for(;r.nodeType===1;){var h=a;if(r.nodeName.toLowerCase()!==o.toLowerCase()){if(!f&&(r.nodeName!=="INPUT"||r.type!=="hidden"))break}else if(f){if(!r[Di])switch(o){case"meta":if(!r.hasAttribute("itemprop"))break;return r;case"link":if(g=r.getAttribute("rel"),g==="stylesheet"&&r.hasAttribute("data-precedence"))break;if(g!==h.rel||r.getAttribute("href")!==(h.href==null||h.href===""?null:h.href)||r.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin)||r.getAttribute("title")!==(h.title==null?null:h.title))break;return r;case"style":if(r.hasAttribute("data-precedence"))break;return r;case"script":if(g=r.getAttribute("src"),(g!==(h.src==null?null:h.src)||r.getAttribute("type")!==(h.type==null?null:h.type)||r.getAttribute("crossorigin")!==(h.crossOrigin==null?null:h.crossOrigin))&&g&&r.hasAttribute("async")&&!r.hasAttribute("itemprop"))break;return r;default:return r}}else if(o==="input"&&r.type==="hidden"){var g=h.name==null?null:""+h.name;if(h.type==="hidden"&&r.getAttribute("name")===g)return r}else return r;if(r=lr(r.nextSibling),r===null)break}return null}function iE(r,o,a){if(o==="")return null;for(;r.nodeType!==3;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!a||(r=lr(r.nextSibling),r===null))return null;return r}function $b(r,o){for(;r.nodeType!==8;)if((r.nodeType!==1||r.nodeName!=="INPUT"||r.type!=="hidden")&&!o||(r=lr(r.nextSibling),r===null))return null;return r}function dp(r){return r.data==="$?"||r.data==="$~"}function hp(r){return r.data==="$!"||r.data==="$?"&&r.ownerDocument.readyState!=="loading"}function oE(r,o){var a=r.ownerDocument;if(r.data==="$~")r._reactRetry=o;else if(r.data!=="$?"||a.readyState!=="loading")o();else{var f=function(){o(),a.removeEventListener("DOMContentLoaded",f)};a.addEventListener("DOMContentLoaded",f),r._reactRetry=f}}function lr(r){for(;r!=null;r=r.nextSibling){var o=r.nodeType;if(o===1||o===3)break;if(o===8){if(o=r.data,o==="$"||o==="$!"||o==="$?"||o==="$~"||o==="&"||o==="F!"||o==="F")break;if(o==="/$"||o==="/&")return null}}return r}var pp=null;function Yb(r){r=r.nextSibling;for(var o=0;r;){if(r.nodeType===8){var a=r.data;if(a==="/$"||a==="/&"){if(o===0)return lr(r.nextSibling);o--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||o++}r=r.nextSibling}return null}function Kb(r){r=r.previousSibling;for(var o=0;r;){if(r.nodeType===8){var a=r.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(o===0)return r;o--}else a!=="/$"&&a!=="/&"||o++}r=r.previousSibling}return null}function Qb(r,o,a){switch(o=Cu(a),r){case"html":if(r=o.documentElement,!r)throw Error(i(452));return r;case"head":if(r=o.head,!r)throw Error(i(453));return r;case"body":if(r=o.body,!r)throw Error(i(454));return r;default:throw Error(i(451))}}function wa(r){for(var o=r.attributes;o.length;)r.removeAttributeNode(o[0]);Wl(r)}var ar=new Map,Jb=new Set;function Eu(r){return typeof r.getRootNode=="function"?r.getRootNode():r.nodeType===9?r:r.ownerDocument}var yi=X.d;X.d={f:sE,r:lE,D:aE,C:cE,L:uE,m:fE,X:hE,S:dE,M:pE};function sE(){var r=yi.f(),o=mu();return r||o}function lE(r){var o=Bi(r);o!==null&&o.tag===5&&o.type==="form"?py(o):yi.r(r)}var ul=typeof document>"u"?null:document;function Xb(r,o,a){var f=ul;if(f&&typeof o=="string"&&o){var h=T(o);h='link[rel="'+r+'"][href="'+h+'"]',typeof a=="string"&&(h+='[crossorigin="'+a+'"]'),Jb.has(h)||(Jb.add(h),r={rel:r,crossOrigin:a,href:o},f.querySelector(h)===null&&(o=f.createElement("link"),fn(o,"link",r),Ht(o),f.head.appendChild(o)))}}function aE(r){yi.D(r),Xb("dns-prefetch",r,null)}function cE(r,o){yi.C(r,o),Xb("preconnect",r,o)}function uE(r,o,a){yi.L(r,o,a);var f=ul;if(f&&r&&o){var h='link[rel="preload"][as="'+T(o)+'"]';o==="image"&&a&&a.imageSrcSet?(h+='[imagesrcset="'+T(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(h+='[imagesizes="'+T(a.imageSizes)+'"]')):h+='[href="'+T(r)+'"]';var g=h;switch(o){case"style":g=fl(r);break;case"script":g=dl(r)}ar.has(g)||(r=b({rel:"preload",href:o==="image"&&a&&a.imageSrcSet?void 0:r,as:o},a),ar.set(g,r),f.querySelector(h)!==null||o==="style"&&f.querySelector(Ta(g))||o==="script"&&f.querySelector(Ma(g))||(o=f.createElement("link"),fn(o,"link",r),Ht(o),f.head.appendChild(o)))}}function fE(r,o){yi.m(r,o);var a=ul;if(a&&r){var f=o&&typeof o.as=="string"?o.as:"script",h='link[rel="modulepreload"][as="'+T(f)+'"][href="'+T(r)+'"]',g=h;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":g=dl(r)}if(!ar.has(g)&&(r=b({rel:"modulepreload",href:r},o),ar.set(g,r),a.querySelector(h)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Ma(g)))return}f=a.createElement("link"),fn(f,"link",r),Ht(f),a.head.appendChild(f)}}}function dE(r,o,a){yi.S(r,o,a);var f=ul;if(f&&r){var h=Ii(f).hoistableStyles,g=fl(r);o=o||"default";var S=h.get(g);if(!S){var w={loading:0,preload:null};if(S=f.querySelector(Ta(g)))w.loading=5;else{r=b({rel:"stylesheet",href:r,"data-precedence":o},a),(a=ar.get(g))&&mp(r,a);var j=S=f.createElement("link");Ht(j),fn(j,"link",r),j._p=new Promise(function(H,Y){j.onload=H,j.onerror=Y}),j.addEventListener("load",function(){w.loading|=1}),j.addEventListener("error",function(){w.loading|=2}),w.loading|=4,wu(S,o,f)}S={type:"stylesheet",instance:S,count:1,state:w},h.set(g,S)}}}function hE(r,o){yi.X(r,o);var a=ul;if(a&&r){var f=Ii(a).hoistableScripts,h=dl(r),g=f.get(h);g||(g=a.querySelector(Ma(h)),g||(r=b({src:r,async:!0},o),(o=ar.get(h))&&gp(r,o),g=a.createElement("script"),Ht(g),fn(g,"link",r),a.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},f.set(h,g))}}function pE(r,o){yi.M(r,o);var a=ul;if(a&&r){var f=Ii(a).hoistableScripts,h=dl(r),g=f.get(h);g||(g=a.querySelector(Ma(h)),g||(r=b({src:r,async:!0,type:"module"},o),(o=ar.get(h))&&gp(r,o),g=a.createElement("script"),Ht(g),fn(g,"link",r),a.head.appendChild(g)),g={type:"script",instance:g,count:1,state:null},f.set(h,g))}}function Zb(r,o,a,f){var h=(h=Yt.current)?Eu(h):null;if(!h)throw Error(i(446));switch(r){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(o=fl(a.href),a=Ii(h).hoistableStyles,f=a.get(o),f||(f={type:"style",instance:null,count:0,state:null},a.set(o,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){r=fl(a.href);var g=Ii(h).hoistableStyles,S=g.get(r);if(S||(h=h.ownerDocument||h,S={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},g.set(r,S),(g=h.querySelector(Ta(r)))&&!g._p&&(S.instance=g,S.state.loading=5),ar.has(r)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},ar.set(r,a),g||mE(h,r,a,S.state))),o&&f===null)throw Error(i(528,""));return S}if(o&&f!==null)throw Error(i(529,""));return null;case"script":return o=a.async,a=a.src,typeof a=="string"&&o&&typeof o!="function"&&typeof o!="symbol"?(o=dl(a),a=Ii(h).hoistableScripts,f=a.get(o),f||(f={type:"script",instance:null,count:0,state:null},a.set(o,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,r))}}function fl(r){return'href="'+T(r)+'"'}function Ta(r){return'link[rel="stylesheet"]['+r+"]"}function e1(r){return b({},r,{"data-precedence":r.precedence,precedence:null})}function mE(r,o,a,f){r.querySelector('link[rel="preload"][as="style"]['+o+"]")?f.loading=1:(o=r.createElement("link"),f.preload=o,o.addEventListener("load",function(){return f.loading|=1}),o.addEventListener("error",function(){return f.loading|=2}),fn(o,"link",a),Ht(o),r.head.appendChild(o))}function dl(r){return'[src="'+T(r)+'"]'}function Ma(r){return"script[async]"+r}function t1(r,o,a){if(o.count++,o.instance===null)switch(o.type){case"style":var f=r.querySelector('style[data-href~="'+T(a.href)+'"]');if(f)return o.instance=f,Ht(f),f;var h=b({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return f=(r.ownerDocument||r).createElement("style"),Ht(f),fn(f,"style",h),wu(f,a.precedence,r),o.instance=f;case"stylesheet":h=fl(a.href);var g=r.querySelector(Ta(h));if(g)return o.state.loading|=4,o.instance=g,Ht(g),g;f=e1(a),(h=ar.get(h))&&mp(f,h),g=(r.ownerDocument||r).createElement("link"),Ht(g);var S=g;return S._p=new Promise(function(w,j){S.onload=w,S.onerror=j}),fn(g,"link",f),o.state.loading|=4,wu(g,a.precedence,r),o.instance=g;case"script":return g=dl(a.src),(h=r.querySelector(Ma(g)))?(o.instance=h,Ht(h),h):(f=a,(h=ar.get(g))&&(f=b({},a),gp(f,h)),r=r.ownerDocument||r,h=r.createElement("script"),Ht(h),fn(h,"link",f),r.head.appendChild(h),o.instance=h);case"void":return null;default:throw Error(i(443,o.type))}else o.type==="stylesheet"&&(o.state.loading&4)===0&&(f=o.instance,o.state.loading|=4,wu(f,a.precedence,r));return o.instance}function wu(r,o,a){for(var f=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),h=f.length?f[f.length-1]:null,g=h,S=0;S<f.length;S++){var w=f[S];if(w.dataset.precedence===o)g=w;else if(g!==h)break}g?g.parentNode.insertBefore(r,g.nextSibling):(o=a.nodeType===9?a.head:a,o.insertBefore(r,o.firstChild))}function mp(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.title==null&&(r.title=o.title)}function gp(r,o){r.crossOrigin==null&&(r.crossOrigin=o.crossOrigin),r.referrerPolicy==null&&(r.referrerPolicy=o.referrerPolicy),r.integrity==null&&(r.integrity=o.integrity)}var Tu=null;function n1(r,o,a){if(Tu===null){var f=new Map,h=Tu=new Map;h.set(a,f)}else h=Tu,f=h.get(a),f||(f=new Map,h.set(a,f));if(f.has(r))return f;for(f.set(r,null),a=a.getElementsByTagName(r),h=0;h<a.length;h++){var g=a[h];if(!(g[Di]||g[It]||r==="link"&&g.getAttribute("rel")==="stylesheet")&&g.namespaceURI!=="http://www.w3.org/2000/svg"){var S=g.getAttribute(o)||"";S=r+S;var w=f.get(S);w?w.push(g):f.set(S,[g])}}return f}function r1(r,o,a){r=r.ownerDocument||r,r.head.insertBefore(a,o==="title"?r.querySelector("head > title"):null)}function gE(r,o,a){if(a===1||o.itemProp!=null)return!1;switch(r){case"meta":case"title":return!0;case"style":if(typeof o.precedence!="string"||typeof o.href!="string"||o.href==="")break;return!0;case"link":if(typeof o.rel!="string"||typeof o.href!="string"||o.href===""||o.onLoad||o.onError)break;switch(o.rel){case"stylesheet":return r=o.disabled,typeof o.precedence=="string"&&r==null;default:return!0}case"script":if(o.async&&typeof o.async!="function"&&typeof o.async!="symbol"&&!o.onLoad&&!o.onError&&o.src&&typeof o.src=="string")return!0}return!1}function i1(r){return!(r.type==="stylesheet"&&(r.state.loading&3)===0)}function yE(r,o,a,f){if(a.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var h=fl(f.href),g=o.querySelector(Ta(h));if(g){o=g._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(r.count++,r=Mu.bind(r),o.then(r,r)),a.state.loading|=4,a.instance=g,Ht(g);return}g=o.ownerDocument||o,f=e1(f),(h=ar.get(h))&&mp(f,h),g=g.createElement("link"),Ht(g);var S=g;S._p=new Promise(function(w,j){S.onload=w,S.onerror=j}),fn(g,"link",f),a.instance=g}r.stylesheets===null&&(r.stylesheets=new Map),r.stylesheets.set(a,o),(o=a.state.preload)&&(a.state.loading&3)===0&&(r.count++,a=Mu.bind(r),o.addEventListener("load",a),o.addEventListener("error",a))}}var yp=0;function bE(r,o){return r.stylesheets&&r.count===0&&_u(r,r.stylesheets),0<r.count||0<r.imgCount?function(a){var f=setTimeout(function(){if(r.stylesheets&&_u(r,r.stylesheets),r.unsuspend){var g=r.unsuspend;r.unsuspend=null,g()}},6e4+o);0<r.imgBytes&&yp===0&&(yp=62500*XC());var h=setTimeout(function(){if(r.waitingForImages=!1,r.count===0&&(r.stylesheets&&_u(r,r.stylesheets),r.unsuspend)){var g=r.unsuspend;r.unsuspend=null,g()}},(r.imgBytes>yp?50:800)+o);return r.unsuspend=a,function(){r.unsuspend=null,clearTimeout(f),clearTimeout(h)}}:null}function Mu(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)_u(this,this.stylesheets);else if(this.unsuspend){var r=this.unsuspend;this.unsuspend=null,r()}}}var Au=null;function _u(r,o){r.stylesheets=null,r.unsuspend!==null&&(r.count++,Au=new Map,o.forEach(vE,r),Au=null,Mu.call(r))}function vE(r,o){if(!(o.state.loading&4)){var a=Au.get(r);if(a)var f=a.get(null);else{a=new Map,Au.set(r,a);for(var h=r.querySelectorAll("link[data-precedence],style[data-precedence]"),g=0;g<h.length;g++){var S=h[g];(S.nodeName==="LINK"||S.getAttribute("media")!=="not all")&&(a.set(S.dataset.precedence,S),f=S)}f&&a.set(null,f)}h=o.instance,S=h.getAttribute("data-precedence"),g=a.get(S)||f,g===f&&a.set(null,h),a.set(S,h),this.count++,f=Mu.bind(this),h.addEventListener("load",f),h.addEventListener("error",f),g?g.parentNode.insertBefore(h,g.nextSibling):(r=r.nodeType===9?r.head:r,r.insertBefore(h,r.firstChild)),o.state.loading|=4}}var Aa={$$typeof:N,Provider:null,Consumer:null,_currentValue:be,_currentValue2:be,_threadCount:0};function xE(r,o,a,f,h,g,S,w,j){this.tag=1,this.containerInfo=r,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Rs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rs(0),this.hiddenUpdates=Rs(null),this.identifierPrefix=f,this.onUncaughtError=h,this.onCaughtError=g,this.onRecoverableError=S,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function o1(r,o,a,f,h,g,S,w,j,H,Y,Q){return r=new xE(r,o,a,S,j,H,Y,Q,w),o=1,g===!0&&(o|=24),g=Vn(3,null,null,o),r.current=g,g.stateNode=r,o=Qd(),o.refCount++,r.pooledCache=o,o.refCount++,g.memoizedState={element:f,isDehydrated:a,cache:o},eh(g),r}function s1(r){return r?(r=Ps,r):Ps}function l1(r,o,a,f,h,g){h=s1(h),f.context===null?f.context=h:f.pendingContext=h,f=$i(o),f.payload={element:a},g=g===void 0?null:g,g!==null&&(f.callback=g),a=Yi(r,f,o),a!==null&&(Ln(a,r,o),sa(a,r,o))}function a1(r,o){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var a=r.retryLane;r.retryLane=a!==0&&a<o?a:o}}function bp(r,o){a1(r,o),(r=r.alternate)&&a1(r,o)}function c1(r){if(r.tag===13||r.tag===31){var o=Fo(r,67108864);o!==null&&Ln(o,r,67108864),bp(r,67108864)}}function u1(r){if(r.tag===13||r.tag===31){var o=$n();o=Vl(o);var a=Fo(r,o);a!==null&&Ln(a,r,o),bp(r,o)}}var ju=!0;function SE(r,o,a,f){var h=F.T;F.T=null;var g=X.p;try{X.p=2,vp(r,o,a,f)}finally{X.p=g,F.T=h}}function kE(r,o,a,f){var h=F.T;F.T=null;var g=X.p;try{X.p=8,vp(r,o,a,f)}finally{X.p=g,F.T=h}}function vp(r,o,a,f){if(ju){var h=xp(f);if(h===null)op(r,o,f,Ou,a),d1(r,f);else if(EE(h,r,o,a,f))f.stopPropagation();else if(d1(r,f),o&4&&-1<CE.indexOf(r)){for(;h!==null;){var g=Bi(h);if(g!==null)switch(g.tag){case 3:if(g=g.stateNode,g.current.memoizedState.isDehydrated){var S=Nr(g.pendingLanes);if(S!==0){var w=g;for(w.pendingLanes|=2,w.entangledLanes|=2;S;){var j=1<<31-Sn(S);w.entanglements[1]|=j,S&=~j}Hr(g),(it&6)===0&&(hu=Zt()+500,ka(0))}}break;case 31:case 13:w=Fo(g,2),w!==null&&Ln(w,g,2),mu(),bp(g,2)}if(g=xp(f),g===null&&op(r,o,f,Ou,a),g===h)break;h=g}h!==null&&f.stopPropagation()}else op(r,o,f,null,a)}}function xp(r){return r=he(r),Sp(r)}var Ou=null;function Sp(r){if(Ou=null,r=Li(r),r!==null){var o=l(r);if(o===null)r=null;else{var a=o.tag;if(a===13){if(r=c(o),r!==null)return r;r=null}else if(a===31){if(r=u(o),r!==null)return r;r=null}else if(a===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;r=null}else o!==r&&(r=null)}}return Ou=r,null}function f1(r){switch(r){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Jr()){case Ro:return 2;case _r:return 8;case gn:case xd:return 32;case xc:return 268435456;default:return 32}default:return 32}}var kp=!1,oo=null,so=null,lo=null,_a=new Map,ja=new Map,ao=[],CE="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function d1(r,o){switch(r){case"focusin":case"focusout":oo=null;break;case"dragenter":case"dragleave":so=null;break;case"mouseover":case"mouseout":lo=null;break;case"pointerover":case"pointerout":_a.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":ja.delete(o.pointerId)}}function Oa(r,o,a,f,h,g){return r===null||r.nativeEvent!==g?(r={blockedOn:o,domEventName:a,eventSystemFlags:f,nativeEvent:g,targetContainers:[h]},o!==null&&(o=Bi(o),o!==null&&c1(o)),r):(r.eventSystemFlags|=f,o=r.targetContainers,h!==null&&o.indexOf(h)===-1&&o.push(h),r)}function EE(r,o,a,f,h){switch(o){case"focusin":return oo=Oa(oo,r,o,a,f,h),!0;case"dragenter":return so=Oa(so,r,o,a,f,h),!0;case"mouseover":return lo=Oa(lo,r,o,a,f,h),!0;case"pointerover":var g=h.pointerId;return _a.set(g,Oa(_a.get(g)||null,r,o,a,f,h)),!0;case"gotpointercapture":return g=h.pointerId,ja.set(g,Oa(ja.get(g)||null,r,o,a,f,h)),!0}return!1}function h1(r){var o=Li(r.target);if(o!==null){var a=l(o);if(a!==null){if(o=a.tag,o===13){if(o=c(a),o!==null){r.blockedOn=o,Ds(r.priority,function(){u1(a)});return}}else if(o===31){if(o=u(a),o!==null){r.blockedOn=o,Ds(r.priority,function(){u1(a)});return}}else if(o===3&&a.stateNode.current.memoizedState.isDehydrated){r.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Nu(r){if(r.blockedOn!==null)return!1;for(var o=r.targetContainers;0<o.length;){var a=xp(r.nativeEvent);if(a===null){a=r.nativeEvent;var f=new a.constructor(a.type,a);kt=f,a.target.dispatchEvent(f),kt=null}else return o=Bi(a),o!==null&&c1(o),r.blockedOn=a,!1;o.shift()}return!0}function p1(r,o,a){Nu(r)&&a.delete(o)}function wE(){kp=!1,oo!==null&&Nu(oo)&&(oo=null),so!==null&&Nu(so)&&(so=null),lo!==null&&Nu(lo)&&(lo=null),_a.forEach(p1),ja.forEach(p1)}function zu(r,o){r.blockedOn===o&&(r.blockedOn=null,kp||(kp=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,wE)))}var Ru=null;function m1(r){Ru!==r&&(Ru=r,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Ru===r&&(Ru=null);for(var o=0;o<r.length;o+=3){var a=r[o],f=r[o+1],h=r[o+2];if(typeof f!="function"){if(Sp(f||a)===null)continue;break}var g=Bi(a);g!==null&&(r.splice(o,3),o-=3,xh(g,{pending:!0,data:h,method:a.method,action:f},f,h))}}))}function hl(r){function o(j){return zu(j,r)}oo!==null&&zu(oo,r),so!==null&&zu(so,r),lo!==null&&zu(lo,r),_a.forEach(o),ja.forEach(o);for(var a=0;a<ao.length;a++){var f=ao[a];f.blockedOn===r&&(f.blockedOn=null)}for(;0<ao.length&&(a=ao[0],a.blockedOn===null);)h1(a),a.blockedOn===null&&ao.shift();if(a=(r.ownerDocument||r).$$reactFormReplay,a!=null)for(f=0;f<a.length;f+=3){var h=a[f],g=a[f+1],S=h[ln]||null;if(typeof g=="function")S||m1(a);else if(S){var w=null;if(g&&g.hasAttribute("formAction")){if(h=g,S=g[ln]||null)w=S.formAction;else if(Sp(h)!==null)continue}else w=S.action;typeof w=="function"?a[f+1]=w:(a.splice(f,3),f-=3),m1(a)}}}function g1(){function r(g){g.canIntercept&&g.info==="react-transition"&&g.intercept({handler:function(){return new Promise(function(S){return h=S})},focusReset:"manual",scroll:"manual"})}function o(){h!==null&&(h(),h=null),f||setTimeout(a,20)}function a(){if(!f&&!navigation.transition){var g=navigation.currentEntry;g&&g.url!=null&&navigation.navigate(g.url,{state:g.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var f=!1,h=null;return navigation.addEventListener("navigate",r),navigation.addEventListener("navigatesuccess",o),navigation.addEventListener("navigateerror",o),setTimeout(a,100),function(){f=!0,navigation.removeEventListener("navigate",r),navigation.removeEventListener("navigatesuccess",o),navigation.removeEventListener("navigateerror",o),h!==null&&(h(),h=null)}}}function Cp(r){this._internalRoot=r}Du.prototype.render=Cp.prototype.render=function(r){var o=this._internalRoot;if(o===null)throw Error(i(409));var a=o.current,f=$n();l1(a,f,r,o,null,null)},Du.prototype.unmount=Cp.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var o=r.containerInfo;l1(r.current,2,null,r,null,null),mu(),o[Zr]=null}};function Du(r){this._internalRoot=r}Du.prototype.unstable_scheduleHydration=function(r){if(r){var o=kn();r={blockedOn:null,target:r,priority:o};for(var a=0;a<ao.length&&o!==0&&o<ao[a].priority;a++);ao.splice(a,0,r),a===0&&h1(r)}};var y1=e.version;if(y1!=="19.2.0")throw Error(i(527,y1,"19.2.0"));X.findDOMNode=function(r){var o=r._reactInternals;if(o===void 0)throw typeof r.render=="function"?Error(i(188)):(r=Object.keys(r).join(","),Error(i(268,r)));return r=p(o),r=r!==null?y(r):null,r=r===null?null:r.stateNode,r};var TE={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:F,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Lu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Lu.isDisabled&&Lu.supportsFiber)try{Do=Lu.inject(TE),Kt=Lu}catch{}}return za.createRoot=function(r,o){if(!s(r))throw Error(i(299));var a=!1,f="",h=Ey,g=wy,S=Ty;return o!=null&&(o.unstable_strictMode===!0&&(a=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onUncaughtError!==void 0&&(h=o.onUncaughtError),o.onCaughtError!==void 0&&(g=o.onCaughtError),o.onRecoverableError!==void 0&&(S=o.onRecoverableError)),o=o1(r,1,!1,null,null,a,f,null,h,g,S,g1),r[Zr]=o.current,ip(r),new Cp(o)},za.hydrateRoot=function(r,o,a){if(!s(r))throw Error(i(299));var f=!1,h="",g=Ey,S=wy,w=Ty,j=null;return a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(h=a.identifierPrefix),a.onUncaughtError!==void 0&&(g=a.onUncaughtError),a.onCaughtError!==void 0&&(S=a.onCaughtError),a.onRecoverableError!==void 0&&(w=a.onRecoverableError),a.formState!==void 0&&(j=a.formState)),o=o1(r,1,!0,o,a??null,f,h,j,g,S,w,g1),o.context=s1(null),a=o.current,f=$n(),f=Vl(f),h=$i(f),h.callback=null,Yi(a,h,f),a=f,o.current.lanes=a,Xr(o,a),Hr(o),r[Zr]=o.current,ip(r),new Du(o)},za.version="19.2.0",za}var k1;function dw(){if(k1)return Ep.exports;k1=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Ep.exports=fw(),Ep.exports}var hw=dw(),Bu={},Ra={},C1={},E1;function pw(){return E1||(E1=1,(function(){var t={},e="";try{e=location.hash.toString()}catch{}var n=d(e),i=M("initParams");if(i)for(var s in i)typeof n[s]>"u"&&(n[s]=i[s]);E("initParams",n);var l=!1,c;try{if(l=window.parent!=null&&window!=window.parent,l){window.addEventListener("message",function(_){if(_.source===window.parent){try{var N=JSON.parse(_.data)}catch{return}if(!(!N||!N.eventType))if(N.eventType=="set_custom_style")_.origin==="https://web.telegram.org"&&(c.innerHTML=N.eventData);else if(N.eventType=="reload_iframe"){try{window.parent.postMessage(JSON.stringify({eventType:"iframe_will_reload"}),"*")}catch{}location.reload()}else v(N.eventType,N.eventData)}}),c=document.createElement("style"),document.head.appendChild(c);try{window.parent.postMessage(JSON.stringify({eventType:"iframe_ready",eventData:{reload_supported:!0}}),"*")}catch{}}}catch{}function u(_){try{return _=_.replace(/\+/g,"%20"),decodeURIComponent(_)}catch{return _}}function d(_){_=_.replace(/^#/,"");var N={};if(!_.length)return N;if(_.indexOf("=")<0&&_.indexOf("?")<0)return N._path=u(_),N;var B=_.indexOf("?");if(B>=0){var L=_.substr(0,B);N._path=u(L),_=_.substr(B+1)}var W=p(_);for(var $ in W)N[$]=W[$];return N}function p(_){var N={};if(!_.length)return N;var B=_.split("&"),L,W,$,ne;for(L=0;L<B.length;L++)W=B[L].split("="),$=u(W[0]),ne=W[1]==null?null:u(W[1]),N[$]=ne;return N}function y(_,N){var B=_.indexOf("#");if(B<0)return _+"#"+N;var L=_.substr(B+1);return L.indexOf("=")>=0||L.indexOf("?")>=0?_+"&"+N:L.length>0?_+"?"+N:_+N}function b(_,N,B){if(N||(N=function(){}),B===void 0&&(B=""),console.log("[Telegram.WebView] > postEvent",_,B),window.TelegramWebviewProxy!==void 0)TelegramWebviewProxy.postEvent(_,JSON.stringify(B)),N();else if(window.external&&"notify"in window.external)window.external.notify(JSON.stringify({eventType:_,eventData:B})),N();else if(l)try{var L="https://web.telegram.org";L="*",window.parent.postMessage(JSON.stringify({eventType:_,eventData:B}),L),N()}catch(W){N(W)}else N({notAvailable:!0})}function v(_,N){console.log("[Telegram.WebView] < receiveEvent",_,N),x(_,function(B){B(_,N)})}function x(_,N){var B=t[_];if(!(B===void 0||!B.length))for(var L=0;L<B.length;L++)try{N(B[L])}catch{}}function k(_,N){t[_]===void 0&&(t[_]=[]);var B=t[_].indexOf(N);B===-1&&t[_].push(N)}function C(_,N){if(t[_]!==void 0){var B=t[_].indexOf(N);B!==-1&&t[_].splice(B,1)}}function E(_,N){try{return window.sessionStorage.setItem("__telegram__"+_,JSON.stringify(N)),!0}catch{}return!1}function M(_){try{return JSON.parse(window.sessionStorage.getItem("__telegram__"+_))}catch{}return null}window.Telegram||(window.Telegram={}),window.Telegram.WebView={initParams:n,isIframe:l,onEvent:k,offEvent:C,postEvent:b,receiveEvent:v,callEventCallbacks:x},window.Telegram.Utils={urlSafeDecode:u,urlParseQueryString:p,urlParseHashParams:d,urlAppendHashParams:y,sessionStorageSet:E,sessionStorageGet:M},window.TelegramGameProxy_receiveEvent=v,window.TelegramGameProxy={receiveEvent:v}})(),(function(){var t=window.Telegram.Utils,e=window.Telegram.WebView,n=e.initParams,i=e.isIframe,s={},l="",c={},u={},d="light",p="6.0",y="unknown",b=!0,v=!1,x=!1,k="bg_color",C="bg_color",E=null;if(n.tgWebAppData&&n.tgWebAppData.length){l=n.tgWebAppData,c=t.urlParseQueryString(l);for(var M in c){var _=c[M];try{(_.substr(0,1)=="{"&&_.substr(-1)=="}"||_.substr(0,1)=="["&&_.substr(-1)=="]")&&(c[M]=JSON.parse(_))}catch{}}}var N=t.sessionStorageGet("themeParams");if(n.tgWebAppThemeParams&&n.tgWebAppThemeParams.length){var B=n.tgWebAppThemeParams;try{var L=JSON.parse(B);L&&Yt(L)}catch{}}N&&Yt(N);var W=t.sessionStorageGet("defaultColors");if(n.tgWebAppDefaultColors&&n.tgWebAppDefaultColors.length){var $=n.tgWebAppDefaultColors;try{var ne=JSON.parse($);ne&&Kr(ne)}catch{}}W&&Kr(W),n.tgWebAppVersion&&(p=n.tgWebAppVersion),n.tgWebAppPlatform&&(y=n.tgWebAppPlatform);var ve=t.sessionStorageGet("isFullscreen");n.tgWebAppFullscreen&&Xe(!0),ve&&Xe(ve=="yes");var qe=t.sessionStorageGet("isOrientationLocked");qe&&St(qe=="yes");function Te(T,A){A.theme_params&&(Yt(A.theme_params),window.Telegram.WebApp.MainButton.setParams({}),window.Telegram.WebApp.SecondaryButton.setParams({}),Ni(),zi(),Xr(),te("themeChanged"))}var ye=window.innerHeight;function lt(T,A){A.height&&(window.removeEventListener("resize",Qe),Oi(A))}function Qe(T){ye!=window.innerHeight&&(ye=window.innerHeight,te("viewportChanged",{isStateStable:!0}))}function Le(T,A){A&&Oe(A)}function F(T,A){A&&Ar(A)}function X(T,A){A.is_visible?(b=!0,te("activated")):(b=!1,te("deactivated"))}function be(T){if(!(T.metaKey||T.ctrlKey)){for(var A=T.target;A.tagName!="A"&&A.parentNode;)A=A.parentNode;A.tagName=="A"&&A.target!="_blank"&&(A.protocol=="http:"||A.protocol=="https:")&&A.hostname=="t.me"&&(s.openTgLink(A.href),T.preventDefault())}}function we(T){return T.toString().replace(/^\s+|\s+$/g,"")}function te(T){var A=Array.prototype.slice.call(arguments);T=A.shift(),e.callEventCallbacks("webview:"+T,function(O){O.apply(s,A)})}function xe(T,A){e.onEvent("webview:"+T,A)}function ee(T,A){e.offEvent("webview:"+T,A)}function re(T,A){var O=document.documentElement;O&&O.style&&O.style.setProperty&&O.style.setProperty("--tg-"+T,A)}function Xe(T){v=!!T,t.sessionStorageSet("isFullscreen",v?"yes":"no")}function St(T){x=!!T,t.sessionStorageSet("isOrientationLocked",x?"yes":"no")}function Yt(T){T.bg_color=="#1c1c1d"&&T.bg_color==T.secondary_bg_color&&(T.secondary_bg_color="#2c2c2e");var A;for(var O in T)(A=Ri(T[O]))&&(u[O]=A,O=="bg_color"&&(d=Cc(A)?"dark":"light",re("color-scheme",d)),O="theme-"+O.split("_").join("-"),re(O,A));t.sessionStorageSet("themeParams",u)}function Kr(T){d=="dark"?(T.bg_dark_color&&(k=T.bg_dark_color),T.header_dark_color&&(C=null,E=T.header_dark_color)):(T.bg_color&&(k=T.bg_color),T.header_color&&(C=null,E=T.header_color)),t.sessionStorageSet("defaultColors",T)}var sn={};function gr(T){for(var A=100;--A;){for(var O="",q="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",G=q.length,ie=0;ie<T;ie++)O+=q[Math.floor(Math.random()*G)];if(!sn[O])return sn[O]={},O}throw Error("WebAppCallbackIdGenerateFailed")}var Hn=!1,Jn=!1,ji=!0;function Oi(T){typeof T<"u"&&(ji=!!T.is_expanded,Hn=T.height,T.is_state_stable&&(Jn=T.height),te("viewportChanged",{isStateStable:!!T.is_state_stable}));var A,O;Hn!==!1?A=Hn-_t+"px":A=_t?"calc(100vh - "+_t+"px)":"100vh",Jn!==!1?O=Jn-_t+"px":O=_t?"calc(100vh - "+_t+"px)":"100vh",re("viewport-height",A),re("viewport-stable-height",O)}var Be={top:0,bottom:0,left:0,right:0};function Oe(T){typeof T<"u"&&(typeof T.top<"u"&&(Be.top=T.top),typeof T.bottom<"u"&&(Be.bottom=T.bottom),typeof T.left<"u"&&(Be.left=T.left),typeof T.right<"u"&&(Be.right=T.right),te("safeAreaChanged")),re("safe-area-inset-top",Be.top+"px"),re("safe-area-inset-bottom",Be.bottom+"px"),re("safe-area-inset-left",Be.left+"px"),re("safe-area-inset-right",Be.right+"px")}var et={top:0,bottom:0,left:0,right:0};function Ar(T){typeof T<"u"&&(typeof T.top<"u"&&(et.top=T.top),typeof T.bottom<"u"&&(et.bottom=T.bottom),typeof T.left<"u"&&(et.left=T.left),typeof T.right<"u"&&(et.right=T.right),te("contentSafeAreaChanged")),re("content-safe-area-inset-top",et.top+"px"),re("content-safe-area-inset-bottom",et.bottom+"px"),re("content-safe-area-inset-left",et.left+"px"),re("content-safe-area-inset-right",et.right+"px")}var Xn=!1;function yr(T){if(!je("6.2")){console.warn("[Telegram.WebApp] Closing confirmation is not supported in version "+p);return}Xn=!!T,e.postEvent("web_app_setup_closing_behavior",!1,{need_confirmation:Xn})}var Xt=!0;function Un(T){if(!je("7.7")){console.warn("[Telegram.WebApp] Changing swipes behavior is not supported in version "+p);return}Xt=!!T,e.postEvent("web_app_setup_swipe_behavior",!1,{allow_vertical_swipe:Xt})}function Zn(T,A){Xe(A.is_fullscreen),te("fullscreenChanged")}function Qr(T,A){A.error=="ALREADY_FULLSCREEN"&&!v&&Xe(!0),te("fullscreenFailed",{error:A.error})}function Zt(T){if(!je("8.0")){console.warn("[Telegram.WebApp] Orientation locking is not supported in version "+p);return}St(T),e.postEvent("web_app_toggle_orientation_lock",!1,{locked:x})}var Jr=[];function Ro(T,A){te("homeScreenAdded")}function _r(T,A){var O=A.status||"unknown";if(Jr.length>0){for(var q=0;q<Jr.length;q++){var G=Jr[q];G(O)}Jr=[]}te("homeScreenChecked",{status:O})}var gn=!1;function xd(T,A){if(gn){var O=gn;gn=!1,O.callback&&O.callback(!0),te("shareMessageSent")}}function xc(T,A){if(gn){var O=gn;gn=!1,O.callback&&O.callback(!1),te("shareMessageFailed",{error:A.error})}}var jr=!1;function Sd(T,A){if(jr){var O=jr;jr=!1,O.callback&&O.callback(!0),te("emojiStatusSet")}}function Do(T,A){if(jr){var O=jr;jr=!1,O.callback&&O.callback(!1),te("emojiStatusFailed",{error:A.error})}}var Kt=!1;function Or(T,A){if(Kt){var O=Kt;Kt=!1,O.callback&&O.callback(A.status=="allowed"),te("emojiStatusAccessRequested",{status:A.status})}}var yn=!1;function Sn(){return C=="secondary_bg_color"?u.secondary_bg_color:C=="bg_color"?u.bg_color:E}function kd(T){if(!je("6.1")){console.warn("[Telegram.WebApp] Header color is not supported in version "+p);return}je("6.9")||(u.bg_color&&u.bg_color==T?T="bg_color":u.secondary_bg_color&&u.secondary_bg_color==T&&(T="secondary_bg_color"));var A=null,O=null;if(T=="bg_color"||T=="secondary_bg_color")O=T;else if(je("6.9")&&(A=Ri(T),!A))throw console.error("[Telegram.WebApp] Header color format is invalid",T),Error("WebAppHeaderColorInvalid");if(!je("6.9")&&O!="bg_color"&&O!="secondary_bg_color")throw console.error("[Telegram.WebApp] Header color key should be one of Telegram.WebApp.themeParams.bg_color, Telegram.WebApp.themeParams.secondary_bg_color, 'bg_color', 'secondary_bg_color'",T),Error("WebAppHeaderColorKeyInvalid");C=O,E=A,Ni()}var Sc=null,ql=null;function Ni(){(Sc!=C||ql!=E)&&(Sc=C,ql=E,ql?e.postEvent("web_app_set_header_color",!1,{color:E}):e.postEvent("web_app_set_header_color",!1,{color_key:C}))}function Lo(){return k=="secondary_bg_color"?u.secondary_bg_color:k=="bg_color"?u.bg_color:k}function zs(T){if(!je("6.1")){console.warn("[Telegram.WebApp] Background color is not supported in version "+p);return}var A;if(T=="bg_color"||T=="secondary_bg_color")A=T;else if(A=Ri(T),!A)throw console.error("[Telegram.WebApp] Background color format is invalid",T),Error("WebAppBackgroundColorInvalid");k=A,zi()}var Nr=null;function zi(){var T=Lo();Nr!=T&&(Nr=T,e.postEvent("web_app_set_background_color",!1,{color:T}))}var br="bottom_bar_bg_color";function Bo(){return br=="bottom_bar_bg_color"?u.bottom_bar_bg_color||u.secondary_bg_color||"#ffffff":br=="secondary_bg_color"?u.secondary_bg_color:br=="bg_color"?u.bg_color:br}function kc(T){if(!je("7.10")){console.warn("[Telegram.WebApp] Bottom bar color is not supported in version "+p);return}var A;if(T=="bg_color"||T=="secondary_bg_color"||T=="bottom_bar_bg_color")A=T;else if(A=Ri(T),!A)throw console.error("[Telegram.WebApp] Bottom bar color format is invalid",T),Error("WebAppBottomBarColorInvalid");br=A,Xr(),window.Telegram.WebApp.SecondaryButton.setParams({})}var Rs=null;function Xr(){var T=Bo();Rs!=T&&(Rs=T,e.postEvent("web_app_set_bottom_bar_color",!1,{color:T})),n.tgWebAppDebug&&Ls()}function Ri(T){T+="";var A;if(A=/^\s*#([0-9a-f]{6})\s*$/i.exec(T))return"#"+A[1].toLowerCase();if(A=/^\s*#([0-9a-f])([0-9a-f])([0-9a-f])\s*$/i.exec(T))return("#"+A[1]+A[1]+A[2]+A[2]+A[3]+A[3]).toLowerCase();if(A=/^\s*rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+\.{0,1}\d*))?\)\s*$/.exec(T)){var O=parseInt(A[1]),q=parseInt(A[2]),G=parseInt(A[3]);return O=(O<16?"0":"")+O.toString(16),q=(q<16?"0":"")+q.toString(16),G=(G<16?"0":"")+G.toString(16),"#"+O+q+G}return!1}function Cc(T){T=T.replace(/[\s#]/g,""),T.length==3&&(T=T[0]+T[0]+T[1]+T[1]+T[2]+T[2]);var A=parseInt(T.substr(0,2),16),O=parseInt(T.substr(2,2),16),q=parseInt(T.substr(4,2),16),G=Math.sqrt(.299*(A*A)+.587*(O*O)+.114*(q*q));return G<120}function Ec(T,A){typeof T!="string"&&(T=""),typeof A!="string"&&(A=""),T=T.replace(/^\s+|\s+$/g,"").split("."),A=A.replace(/^\s+|\s+$/g,"").split(".");var O=Math.max(T.length,A.length),q,G,ie;for(q=0;q<O;q++)if(G=parseInt(T[q])||0,ie=parseInt(A[q])||0,G!=ie)return G>ie?1:-1;return 0}function je(T){return Ec(p,T)>=0}function Vl(T){if(window.Blob)try{return new Blob([T]).size}catch{}for(var A=T.length,O=T.length-1;O>=0;O--){var q=T.charCodeAt(O);q>127&&q<=2047?A++:q>2047&&q<=65535&&(A+=2),q>=56320&&q<=57343&&O--}return A}var Pl=(function(){var T=!1,A={};Object.defineProperty(A,"isVisible",{set:function(pe){We({is_visible:pe})},get:function(){return T},enumerable:!0});var O=null;e.onEvent("back_button_pressed",q);function q(){te("backButtonClicked")}function G(){return{is_visible:T}}function ie(pe){return typeof pe>"u"&&(pe=G()),JSON.stringify(pe)}function ue(){return je("6.1")?!0:(console.warn("[Telegram.WebApp] BackButton is not supported in version "+p),!1)}function le(){var pe=G(),Ve=ie(pe);O!==Ve&&(O=Ve,e.postEvent("web_app_setup_back_button",!1,pe))}function We(pe){return ue()&&(typeof pe.is_visible<"u"&&(T=!!pe.is_visible),le()),A}return A.onClick=function(pe){return ue()&&xe("backButtonClicked",pe),A},A.offClick=function(pe){return ue()&&ee("backButtonClicked",pe),A},A.show=function(){return We({is_visible:!0})},A.hide=function(){return We({is_visible:!1})},A})(),kn=null,Ds={},_t=0;if(n.tgWebAppDebug){kn=document.createElement("tg-bottom-bar");var It={display:"flex",gap:"7px",font:"600 14px/18px sans-serif",width:"100%",background:Bo(),position:"fixed",left:"0",right:"0",bottom:"0",margin:"0",padding:"7px",textAlign:"center",boxSizing:"border-box",zIndex:"10000"};for(var ln in It)kn.style[ln]=It[ln];document.addEventListener("DOMContentLoaded",function T(A){document.removeEventListener("DOMContentLoaded",T),document.body.appendChild(kn)});var Zr=document.createElement("style");Zr.innerHTML='tg-bottom-button.shine { position: relative; overflow: hidden; } tg-bottom-button.shine:before { content:""; position: absolute; top: 0; width: 100%; height: 100%; background: linear-gradient(120deg, transparent, rgba(255, 255, 255, .2), transparent); animation: tg-bottom-button-shine 5s ease-in-out infinite; } @-webkit-keyframes tg-bottom-button-shine { 0% {left: -100%;} 12%,100% {left: 100%}} @keyframes tg-bottom-button-shine { 0% {left: -100%;} 12%,100% {left: 100%}}',kn.appendChild(Zr)}function Ls(){var T=Ds.main._bottomButton,A=Ds.secondary._bottomButton;T.isVisible||A.isVisible?(kn.style.display="flex",_t=58,T.isVisible&&A.isVisible&&(A.position=="top"?(kn.style.flexDirection="column-reverse",_t+=51):A.position=="bottom"?(kn.style.flexDirection="column",_t+=51):A.position=="left"?kn.style.flexDirection="row-reverse":A.position=="right"&&(kn.style.flexDirection="row"))):(kn.style.display="none",_t=0),kn.style.background=Bo(),document.documentElement&&(document.documentElement.style.boxSizing="border-box",document.documentElement.style.paddingBottom=_t+"px"),Oi()}var wc=function(T){var A=T=="main";if(A)var O="web_app_setup_main_button",q="main_button_pressed",G="mainButtonClicked",ie="Continue",ue=function(){return u.button_color||"#2481cc"},le=function(){return u.button_text_color||"#ffffff"};else var O="web_app_setup_secondary_button",q="secondary_button_pressed",G="secondaryButtonClicked",ie="Cancel",ue=function(){return Bo()},le=function(){return u.button_color||"#2481cc"};var We=!1,pe=!0,Ve=!1,tt=!1,Re=T,oe=ie,ce=!1,me=!1,kt="left",he={};Object.defineProperty(he,"type",{get:function(){return Re},enumerable:!0}),Object.defineProperty(he,"text",{set:function(se){he.setParams({text:se})},get:function(){return oe},enumerable:!0}),Object.defineProperty(he,"color",{set:function(se){he.setParams({color:se})},get:function(){return ce||ue()},enumerable:!0}),Object.defineProperty(he,"textColor",{set:function(se){he.setParams({text_color:se})},get:function(){return me||le()},enumerable:!0}),Object.defineProperty(he,"isVisible",{set:function(se){he.setParams({is_visible:se})},get:function(){return We},enumerable:!0}),Object.defineProperty(he,"isProgressVisible",{get:function(){return tt},enumerable:!0}),Object.defineProperty(he,"isActive",{set:function(se){he.setParams({is_active:se})},get:function(){return pe},enumerable:!0}),Object.defineProperty(he,"hasShineEffect",{set:function(se){he.setParams({has_shine_effect:se})},get:function(){return Ve},enumerable:!0}),A||Object.defineProperty(he,"position",{set:function(se){he.setParams({position:se})},get:function(){return kt},enumerable:!0});var ft=null;e.onEvent(q,Gl);var Ne=null;if(n.tgWebAppDebug){Ne=document.createElement("tg-bottom-button");var Et={display:"none",width:"100%",height:"44px",borderRadius:"0",background:"no-repeat right center",padding:"13px 15px",textAlign:"center",boxSizing:"border-box"};for(var er in Et)Ne.style[er]=Et[er];kn.appendChild(Ne),Ne.addEventListener("click",Gl,!1),Ne._bottomButton=he,Ds[T]=Ne}function Gl(){pe&&te(G)}function qi(){var se=he.color,jn=he.textColor;if(We){var ni={is_visible:!0,is_active:pe,is_progress_visible:tt,text:oe,color:se,text_color:jn,has_shine_effect:Ve&&pe&&!tt};A||(ni.position=kt)}else var ni={is_visible:!1};return ni}function xr(se){return typeof se>"u"&&(se=qi()),JSON.stringify(se)}function Ho(){var se=qi(),jn=xr(se);ft!==jn&&(ft=jn,e.postEvent(O,!1,se),n.tgWebAppDebug&&Uo(se))}function Uo(se){se.is_visible?(Ne.style.display="block",Ne.style.opacity=se.is_active?"1":"0.8",Ne.style.cursor=se.is_active?"pointer":"auto",Ne.disabled=!se.is_active,Ne.innerText=se.text,Ne.className=se.has_shine_effect?"shine":"",Ne.style.backgroundImage=se.is_progress_visible?"url('data:image/svg+xml,"+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewport="0 0 48 48" width="48px" height="48px"><circle cx="50%" cy="50%" stroke="'+se.text_color+'" stroke-width="2.25" stroke-linecap="round" fill="none" stroke-dashoffset="106" r="9" stroke-dasharray="56.52" rotate="-90"><animate attributeName="stroke-dashoffset" attributeType="XML" dur="360s" from="0" to="12500" repeatCount="indefinite"></animate><animateTransform attributeName="transform" attributeType="XML" type="rotate" dur="1s" from="-90 24 24" to="630 24 24" repeatCount="indefinite"></animateTransform></circle></svg>')+"')":"none",Ne.style.backgroundColor=se.color,Ne.style.color=se.text_color):Ne.style.display="none",Ls()}function Dr(se){if(typeof se.text<"u"){var jn=we(se.text);if(!jn.length)throw console.error("[Telegram.WebApp] Bottom button text is required",se.text),Error("WebAppBottomButtonParamInvalid");if(jn.length>64)throw console.error("[Telegram.WebApp] Bottom button text is too long",jn),Error("WebAppBottomButtonParamInvalid");oe=jn}if(typeof se.color<"u")if(se.color===!1||se.color===null)ce=!1;else{var ni=Ri(se.color);if(!ni)throw console.error("[Telegram.WebApp] Bottom button color format is invalid",se.color),Error("WebAppBottomButtonParamInvalid");ce=ni}if(typeof se.text_color<"u")if(se.text_color===!1||se.text_color===null)me=!1;else{var qo=Ri(se.text_color);if(!qo)throw console.error("[Telegram.WebApp] Bottom button text color format is invalid",se.text_color),Error("WebAppBottomButtonParamInvalid");me=qo}if(typeof se.is_visible<"u"){if(se.is_visible&&!he.text.length)throw console.error("[Telegram.WebApp] Bottom button text is required"),Error("WebAppBottomButtonParamInvalid");We=!!se.is_visible}if(typeof se.has_shine_effect<"u"&&(Ve=!!se.has_shine_effect),!A&&typeof se.position<"u"){if(se.position!="left"&&se.position!="right"&&se.position!="top"&&se.position!="bottom")throw console.error("[Telegram.WebApp] Bottom button posiition is invalid",se.position),Error("WebAppBottomButtonParamInvalid");kt=se.position}return typeof se.is_active<"u"&&(pe=!!se.is_active),Ho(),he}return he.setText=function(se){return he.setParams({text:se})},he.onClick=function(se){return xe(G,se),he},he.offClick=function(se){return ee(G,se),he},he.show=function(){return he.setParams({is_visible:!0})},he.hide=function(){return he.setParams({is_visible:!1})},he.enable=function(){return he.setParams({is_active:!0})},he.disable=function(){return he.setParams({is_active:!1})},he.showProgress=function(se){return pe=!!se,tt=!0,Ho(),he},he.hideProgress=function(){return he.isActive||(pe=!0),tt=!1,Ho(),he},he.setParams=Dr,he},Cd=wc("main"),Tc=wc("secondary"),Di=(function(){var T=!1,A={};Object.defineProperty(A,"isVisible",{set:function(pe){We({is_visible:pe})},get:function(){return T},enumerable:!0});var O=null;e.onEvent("settings_button_pressed",q);function q(){te("settingsButtonClicked")}function G(){return{is_visible:T}}function ie(pe){return typeof pe>"u"&&(pe=G()),JSON.stringify(pe)}function ue(){return je("6.10")?!0:(console.warn("[Telegram.WebApp] SettingsButton is not supported in version "+p),!1)}function le(){var pe=G(),Ve=ie(pe);O!==Ve&&(O=Ve,e.postEvent("web_app_setup_settings_button",!1,pe))}function We(pe){return ue()&&(typeof pe.is_visible<"u"&&(T=!!pe.is_visible),le()),A}return A.onClick=function(pe){return ue()&&xe("settingsButtonClicked",pe),A},A.offClick=function(pe){return ue()&&ee("settingsButtonClicked",pe),A},A.show=function(){return We({is_visible:!0})},A.hide=function(){return We({is_visible:!1})},A})(),Wl=(function(){var T={};function A(O){if(!je("6.1"))return console.warn("[Telegram.WebApp] HapticFeedback is not supported in version "+p),T;if(O.type=="impact"){if(O.impact_style!="light"&&O.impact_style!="medium"&&O.impact_style!="heavy"&&O.impact_style!="rigid"&&O.impact_style!="soft")throw console.error("[Telegram.WebApp] Haptic impact style is invalid",O.impact_style),Error("WebAppHapticImpactStyleInvalid")}else if(O.type=="notification"){if(O.notification_type!="error"&&O.notification_type!="success"&&O.notification_type!="warning")throw console.error("[Telegram.WebApp] Haptic notification type is invalid",O.notification_type),Error("WebAppHapticNotificationTypeInvalid")}else if(O.type!="selection_change")throw console.error("[Telegram.WebApp] Haptic feedback type is invalid",O.type),Error("WebAppHapticFeedbackTypeInvalid");return e.postEvent("web_app_trigger_haptic_feedback",!1,O),T}return T.impactOccurred=function(O){return A({type:"impact",impact_style:O})},T.notificationOccurred=function(O){return A({type:"notification",notification_type:O})},T.selectionChanged=function(){return A({type:"selection_change"})},T})(),Li=(function(){var T={};function A(O,q,G){if(!je("6.9"))throw console.error("[Telegram.WebApp] CloudStorage is not supported in version "+p),Error("WebAppMethodUnsupported");return Fl(O,q,G),T}return T.setItem=function(O,q,G){return A("saveStorageValue",{key:O,value:q},G)},T.getItem=function(O,q){return T.getItems([O],q?function(G,ie){G?q(G):q(null,ie[O])}:null)},T.getItems=function(O,q){return A("getStorageValues",{keys:O},q)},T.removeItem=function(O,q){return T.removeItems([O],q)},T.removeItems=function(O,q){return A("deleteStorageValues",{keys:O},q)},T.getKeys=function(O){return A("getStorageKeys",{},O)},T})(),Bi=(function(){var T=!1,A=!1,O="unknown",q=!1,G=!1,ie=!1,ue="",le={};Object.defineProperty(le,"isInited",{get:function(){return T},enumerable:!0}),Object.defineProperty(le,"isBiometricAvailable",{get:function(){return T&&A},enumerable:!0}),Object.defineProperty(le,"biometricType",{get:function(){return O||"unknown"},enumerable:!0}),Object.defineProperty(le,"isAccessRequested",{get:function(){return q},enumerable:!0}),Object.defineProperty(le,"isAccessGranted",{get:function(){return q&&G},enumerable:!0}),Object.defineProperty(le,"isBiometricTokenSaved",{get:function(){return ie},enumerable:!0}),Object.defineProperty(le,"deviceId",{get:function(){return ue||""},enumerable:!0});var We={callbacks:[]},pe=!1,Ve=!1,tt=!1;e.onEvent("biometry_info_received",Re),e.onEvent("biometry_auth_requested",oe),e.onEvent("biometry_token_updated",ce);function Re(he,ft){if(T=!0,ft.available?(A=!0,O=ft.type||"unknown",ft.access_requested?(q=!0,G=!!ft.access_granted,ie=!!ft.token_saved):(q=!1,G=!1,ie=!1)):(A=!1,O="unknown",q=!1,G=!1,ie=!1),ue=ft.device_id||"",We.callbacks.length>0){for(var Ne=0;Ne<We.callbacks.length;Ne++){var Et=We.callbacks[Ne];Et()}We.callbacks=[]}if(pe){var er=pe;pe=!1,er.callback&&er.callback(G)}te("biometricManagerUpdated")}function oe(he,ft){var Ne=ft.status=="authorized",Et=ft.token||"";if(Ve){var er=Ve;Ve=!1,er.callback&&er.callback(Ne,Ne?Et:null)}te("biometricAuthRequested",Ne?{isAuthenticated:!0,biometricToken:Et}:{isAuthenticated:!1})}function ce(he,ft){var Ne=!1;if(A&&q&&(ft.status=="updated"?(ie=!0,Ne=!0):ft.status=="removed"&&(ie=!1,Ne=!0)),tt){var Et=tt;tt=!1,Et.callback&&Et.callback(Ne)}te("biometricTokenUpdated",{isUpdated:Ne})}function me(){return je("7.2")?!0:(console.warn("[Telegram.WebApp] BiometricManager is not supported in version "+p),!1)}function kt(){if(!T)throw console.error("[Telegram.WebApp] BiometricManager should be inited before using."),Error("WebAppBiometricManagerNotInited");return!0}return le.init=function(he){return!me()||T||(he&&We.callbacks.push(he),e.postEvent("web_app_biometry_get_info",!1)),le},le.requestAccess=function(he,ft){if(!me())return le;if(kt(),!A)throw console.error("[Telegram.WebApp] Biometrics is not available on this device."),Error("WebAppBiometricManagerBiometricsNotAvailable");if(pe)throw console.error("[Telegram.WebApp] Access is already requested"),Error("WebAppBiometricManagerAccessRequested");var Ne={};if(typeof he.reason<"u"){var Et=we(he.reason);if(Et.length>128)throw console.error("[Telegram.WebApp] Biometric reason is too long",Et),Error("WebAppBiometricRequestAccessParamInvalid");Et.length>0&&(Ne.reason=Et)}return pe={callback:ft},e.postEvent("web_app_biometry_request_access",!1,Ne),le},le.authenticate=function(he,ft){if(!me())return le;if(kt(),!A)throw console.error("[Telegram.WebApp] Biometrics is not available on this device."),Error("WebAppBiometricManagerBiometricsNotAvailable");if(!G)throw console.error("[Telegram.WebApp] Biometric access was not granted by the user."),Error("WebAppBiometricManagerBiometricAccessNotGranted");if(Ve)throw console.error("[Telegram.WebApp] Authentication request is already in progress."),Error("WebAppBiometricManagerAuthenticationRequested");var Ne={};if(typeof he.reason<"u"){var Et=we(he.reason);if(Et.length>128)throw console.error("[Telegram.WebApp] Biometric reason is too long",Et),Error("WebAppBiometricRequestAccessParamInvalid");Et.length>0&&(Ne.reason=Et)}return Ve={callback:ft},e.postEvent("web_app_biometry_request_auth",!1,Ne),le},le.updateBiometricToken=function(he,ft){if(!me())return le;if(he=he||"",he.length>1024)throw console.error("[Telegram.WebApp] Token is too long",he),Error("WebAppBiometricManagerTokenInvalid");if(kt(),!A)throw console.error("[Telegram.WebApp] Biometrics is not available on this device."),Error("WebAppBiometricManagerBiometricsNotAvailable");if(!G)throw console.error("[Telegram.WebApp] Biometric access was not granted by the user."),Error("WebAppBiometricManagerBiometricAccessNotGranted");if(tt)throw console.error("[Telegram.WebApp] Token request is already in progress."),Error("WebAppBiometricManagerTokenUpdateRequested");return tt={callback:ft},e.postEvent("web_app_biometry_update_token",!1,{token:he}),le},le.openSettings=function(){if(!me())return le;if(kt(),!A)throw console.error("[Telegram.WebApp] Biometrics is not available on this device."),Error("WebAppBiometricManagerBiometricsNotAvailable");if(!q)throw console.error("[Telegram.WebApp] Biometric access was not requested yet."),Error("WebAppBiometricManagerBiometricsAccessNotRequested");return G?(console.warn("[Telegram.WebApp] Biometric access was granted by the user, no need to go to settings."),le):(e.postEvent("web_app_biometry_open_settings",!1),le)},le})(),Io=(function(){var T=!1,A=!1,O=!1,q=!1,G={};Object.defineProperty(G,"isInited",{get:function(){return T},enumerable:!0}),Object.defineProperty(G,"isLocationAvailable",{get:function(){return T&&A},enumerable:!0}),Object.defineProperty(G,"isAccessRequested",{get:function(){return O},enumerable:!0}),Object.defineProperty(G,"isAccessGranted",{get:function(){return O&&q},enumerable:!0});var ie={callbacks:[]},ue={callbacks:[]};e.onEvent("location_checked",le),e.onEvent("location_requested",We);function le(Re,oe){if(T=!0,oe.available?(A=!0,oe.access_requested?(O=!0,q=!!oe.access_granted):(O=!1,q=!1)):(A=!1,O=!1,q=!1),ie.callbacks.length>0){for(var ce=0;ce<ie.callbacks.length;ce++){var me=ie.callbacks[ce];me()}ie.callbacks=[]}te("locationManagerUpdated")}function We(Re,oe){if(!oe.available)ce=null;else{var ce={latitude:oe.latitude,longitude:oe.longitude,altitude:null,course:null,speed:null,horizontal_accuracy:null,vertical_accuracy:null,course_accuracy:null,speed_accuracy:null};typeof oe.altitude<"u"&&oe.altitude!==null&&(ce.altitude=oe.altitude),typeof oe.course<"u"&&oe.course!==null&&(ce.course=oe.course%360),typeof oe.speed<"u"&&oe.speed!==null&&(ce.speed=oe.speed),typeof oe.horizontal_accuracy<"u"&&oe.horizontal_accuracy!==null&&(ce.horizontal_accuracy=oe.horizontal_accuracy),typeof oe.vertical_accuracy<"u"&&oe.vertical_accuracy!==null&&(ce.vertical_accuracy=oe.vertical_accuracy),typeof oe.course_accuracy<"u"&&oe.course_accuracy!==null&&(ce.course_accuracy=oe.course_accuracy),typeof oe.speed_accuracy<"u"&&oe.speed_accuracy!==null&&(ce.speed_accuracy=oe.speed_accuracy)}!oe.available||!A||!O||!q?(ie.callbacks.push(function(){pe(ce)}),e.postEvent("web_app_check_location",!1)):pe(ce)}function pe(Re){if(ue.callbacks.length>0){for(var oe=0;oe<ue.callbacks.length;oe++){var ce=ue.callbacks[oe];ce(Re)}ue.callbacks=[]}Re!==null&&te("locationRequested",{locationData:Re})}function Ve(){return je("8.0")?!0:(console.warn("[Telegram.WebApp] LocationManager is not supported in version "+p),!1)}function tt(){if(!T)throw console.error("[Telegram.WebApp] LocationManager should be inited before using."),Error("WebAppLocationManagerNotInited");return!0}return G.init=function(Re){return!Ve()||T||(Re&&ie.callbacks.push(Re),e.postEvent("web_app_check_location",!1)),G},G.getLocation=function(Re){if(!Ve())return G;if(tt(),!A)throw console.error("[Telegram.WebApp] Location is not available on this device."),Error("WebAppLocationManagerLocationNotAvailable");return ue.callbacks.push(Re),e.postEvent("web_app_request_location"),G},G.openSettings=function(){if(!Ve())return G;if(tt(),!A)throw console.error("[Telegram.WebApp] Location is not available on this device."),Error("WebAppLocationManagerLocationNotAvailable");if(!O)throw console.error("[Telegram.WebApp] Location access was not requested yet."),Error("WebAppLocationManagerLocationAccessNotRequested");return q?(console.warn("[Telegram.WebApp] Location access was granted by the user, no need to go to settings."),G):(e.postEvent("web_app_open_location_settings",!1),G)},G})(),Ii=(function(){var T=!1,A=null,O=null,q=null,G=[],ie=[],ue={};Object.defineProperty(ue,"isStarted",{get:function(){return T},enumerable:!0}),Object.defineProperty(ue,"x",{get:function(){return A},enumerable:!0}),Object.defineProperty(ue,"y",{get:function(){return O},enumerable:!0}),Object.defineProperty(ue,"z",{get:function(){return q},enumerable:!0}),e.onEvent("accelerometer_started",le),e.onEvent("accelerometer_stopped",We),e.onEvent("accelerometer_changed",pe),e.onEvent("accelerometer_failed",Ve);function le(Re,oe){if(T=!0,G.length>0){for(var ce=0;ce<G.length;ce++){var me=G[ce];me(!0)}G=[]}te("accelerometerStarted")}function We(Re,oe){if(T=!1,ie.length>0){for(var ce=0;ce<ie.length;ce++){var me=ie[ce];me(!0)}ie=[]}te("accelerometerStopped")}function pe(Re,oe){A=oe.x,O=oe.y,q=oe.z,te("accelerometerChanged")}function Ve(Re,oe){if(G.length>0){for(var ce=0;ce<G.length;ce++){var me=G[ce];me(!1)}G=[]}te("accelerometerFailed",{error:oe.error})}function tt(){return je("8.0")?!0:(console.warn("[Telegram.WebApp] Accelerometer is not supported in version "+p),!1)}return ue.start=function(Re,oe){if(Re=Re||{},!tt())return ue;var ce={},me=parseInt(Re.refresh_rate||1e3);return isNaN(me)||me<20||me>1e3?console.warn("[Telegram.WebApp] Accelerometer refresh_rate is invalid",me):ce.refresh_rate=me,oe&&G.push(oe),e.postEvent("web_app_start_accelerometer",!1,ce),ue},ue.stop=function(Re){return tt()&&(Re&&ie.push(Re),e.postEvent("web_app_stop_accelerometer")),ue},ue})(),Ht=(function(){var T=!1,A=null,O=null,q=null,G=!1,ie=[],ue=[],le={};Object.defineProperty(le,"isStarted",{get:function(){return T},enumerable:!0}),Object.defineProperty(le,"absolute",{get:function(){return G},enumerable:!0}),Object.defineProperty(le,"alpha",{get:function(){return A},enumerable:!0}),Object.defineProperty(le,"beta",{get:function(){return O},enumerable:!0}),Object.defineProperty(le,"gamma",{get:function(){return q},enumerable:!0}),e.onEvent("device_orientation_started",We),e.onEvent("device_orientation_stopped",pe),e.onEvent("device_orientation_changed",Ve),e.onEvent("device_orientation_failed",tt);function We(oe,ce){if(T=!0,ie.length>0){for(var me=0;me<ie.length;me++){var kt=ie[me];kt(!0)}ie=[]}te("deviceOrientationStarted")}function pe(oe,ce){if(T=!1,ue.length>0){for(var me=0;me<ue.length;me++){var kt=ue[me];kt(!0)}ue=[]}te("deviceOrientationStopped")}function Ve(oe,ce){G=!!ce.absolute,A=ce.alpha,O=ce.beta,q=ce.gamma,te("deviceOrientationChanged")}function tt(oe,ce){if(ie.length>0){for(var me=0;me<ie.length;me++){var kt=ie[me];kt(!1)}ie=[]}te("deviceOrientationFailed",{error:ce.error})}function Re(){return je("8.0")?!0:(console.warn("[Telegram.WebApp] DeviceOrientation is not supported in version "+p),!1)}return le.start=function(oe,ce){if(oe=oe||{},!Re())return le;var me={},kt=parseInt(oe.refresh_rate||1e3);return isNaN(kt)||kt<20||kt>1e3?console.warn("[Telegram.WebApp] DeviceOrientation refresh_rate is invalid",kt):me.refresh_rate=kt,me.need_absolute=!!oe.need_absolute,ce&&ie.push(ce),e.postEvent("web_app_start_device_orientation",!1,me),le},le.stop=function(oe){return Re()&&(oe&&ue.push(oe),e.postEvent("web_app_stop_device_orientation")),le},le})(),Mc=(function(){var T=!1,A=null,O=null,q=null,G=[],ie=[],ue={};Object.defineProperty(ue,"isStarted",{get:function(){return T},enumerable:!0}),Object.defineProperty(ue,"x",{get:function(){return A},enumerable:!0}),Object.defineProperty(ue,"y",{get:function(){return O},enumerable:!0}),Object.defineProperty(ue,"z",{get:function(){return q},enumerable:!0}),e.onEvent("gyroscope_started",le),e.onEvent("gyroscope_stopped",We),e.onEvent("gyroscope_changed",pe),e.onEvent("gyroscope_failed",Ve);function le(Re,oe){if(T=!0,G.length>0){for(var ce=0;ce<G.length;ce++){var me=G[ce];me(!0)}G=[]}te("gyroscopeStarted")}function We(Re,oe){if(T=!1,ie.length>0){for(var ce=0;ce<ie.length;ce++){var me=ie[ce];me(!0)}ie=[]}te("gyroscopeStopped")}function pe(Re,oe){A=oe.x,O=oe.y,q=oe.z,te("gyroscopeChanged")}function Ve(Re,oe){if(G.length>0){for(var ce=0;ce<G.length;ce++){var me=G[ce];me(!1)}G=[]}te("gyroscopeFailed",{error:oe.error})}function tt(){return je("8.0")?!0:(console.warn("[Telegram.WebApp] Gyroscope is not supported in version "+p),!1)}return ue.start=function(Re,oe){if(Re=Re||{},!tt())return ue;var ce={},me=parseInt(Re.refresh_rate||1e3);return isNaN(me)||me<20||me>1e3?console.warn("[Telegram.WebApp] Gyroscope refresh_rate is invalid",me):ce.refresh_rate=me,oe&&G.push(oe),e.postEvent("web_app_start_gyroscope",!1,ce),ue},ue.stop=function(Re){return tt()&&(Re&&ie.push(Re),e.postEvent("web_app_stop_gyroscope")),ue},ue})(),Hi={};function ei(T,A){if(A.slug&&Hi[A.slug]){var O=Hi[A.slug];delete Hi[A.slug],O.callback&&O.callback(A.status),te("invoiceClosed",{url:O.url,status:A.status})}}var yn=!1;function Ac(T,A){if(yn){var O=yn;yn=!1;var q=null;typeof A.button_id<"u"&&(q=A.button_id),O.callback&&O.callback(q),te("popupClosed",{button_id:q})}}var zr=!1;function _c(T,A){if(zr){var O=zr,q=null;typeof A.data<"u"&&(q=A.data),O.callback&&O.callback(q)&&(zr=!1,e.postEvent("web_app_close_scan_qr_popup",!1)),te("qrTextReceived",{data:q})}}function Ed(T,A){zr=!1,te("scanQrPopupClosed")}function Bs(T,A){if(A.req_id&&sn[A.req_id]){var O=sn[A.req_id];delete sn[A.req_id];var q=null;typeof A.data<"u"&&(q=A.data),O.callback&&O.callback(q),te("clipboardTextReceived",{data:q})}}var Rr=!1;function vr(T,A){if(Rr){var O=Rr;Rr=!1,O.callback&&O.callback(A.status=="allowed"),te("writeAccessRequested",{status:A.status})}}function _n(T,A){var O,q,G=0,ie=function(){Fl("getRequestedContact",{},function(le,We){We&&We.length?(clearTimeout(q),T(We)):(G+=50,O=setTimeout(ie,G))})},ue=function(){clearTimeout(O),T("")};q=setTimeout(ue,A),ie()}var Ui=!1;function wd(T,A){if(Ui){var O=Ui;Ui=!1;var q=A.status=="sent",G={status:A.status};q?_n(function(ie){if(ie&&ie.length){G.response=ie,G.responseUnsafe=t.urlParseQueryString(ie);for(var ue in G.responseUnsafe){var le=G.responseUnsafe[ue];try{(le.substr(0,1)=="{"&&le.substr(-1)=="}"||le.substr(0,1)=="["&&le.substr(-1)=="]")&&(G.responseUnsafe[ue]=JSON.parse(le))}catch{}}}O.callback&&O.callback(q,G),te("contactRequested",G)},3e3):(O.callback&&O.callback(q,G),te("contactRequested",G))}}var ti=!1;function jc(T,A){if(ti){var O=ti;ti=!1;var q=A.status=="downloading";O.callback&&O.callback(q),te("fileDownloadRequested",{status:q?"downloading":"cancelled"})}}function Is(T,A){if(A.req_id&&sn[A.req_id]){var O=sn[A.req_id];delete sn[A.req_id];var q=null,G=null;typeof A.result<"u"&&(q=A.result),typeof A.error<"u"&&(G=A.error),O.callback&&O.callback(G,q)}}function Fl(T,A,O){if(!je("6.9"))throw console.error("[Telegram.WebApp] Method invokeCustomMethod is not supported in version "+p),Error("WebAppMethodUnsupported");var q=gr(16),G={req_id:q,method:T,params:A||{}};sn[q]={callback:O},e.postEvent("web_app_invoke_custom_method",!1,G)}window.Telegram||(window.Telegram={}),Object.defineProperty(s,"initData",{get:function(){return l},enumerable:!0}),Object.defineProperty(s,"initDataUnsafe",{get:function(){return c},enumerable:!0}),Object.defineProperty(s,"version",{get:function(){return p},enumerable:!0}),Object.defineProperty(s,"platform",{get:function(){return y},enumerable:!0}),Object.defineProperty(s,"colorScheme",{get:function(){return d},enumerable:!0}),Object.defineProperty(s,"themeParams",{get:function(){return u},enumerable:!0}),Object.defineProperty(s,"isExpanded",{get:function(){return ji},enumerable:!0}),Object.defineProperty(s,"viewportHeight",{get:function(){return(Hn===!1?window.innerHeight:Hn)-_t},enumerable:!0}),Object.defineProperty(s,"viewportStableHeight",{get:function(){return(Jn===!1?window.innerHeight:Jn)-_t},enumerable:!0}),Object.defineProperty(s,"safeAreaInset",{get:function(){return Be},enumerable:!0}),Object.defineProperty(s,"contentSafeAreaInset",{get:function(){return et},enumerable:!0}),Object.defineProperty(s,"isClosingConfirmationEnabled",{set:function(T){yr(T)},get:function(){return Xn},enumerable:!0}),Object.defineProperty(s,"isVerticalSwipesEnabled",{set:function(T){Un(T)},get:function(){return Xt},enumerable:!0}),Object.defineProperty(s,"isFullscreen",{get:function(){return v},enumerable:!0}),Object.defineProperty(s,"isOrientationLocked",{set:function(T){Zt(T)},get:function(){return x},enumerable:!0}),Object.defineProperty(s,"isActive",{get:function(){return b},enumerable:!0}),Object.defineProperty(s,"headerColor",{set:function(T){kd(T)},get:function(){return Sn()},enumerable:!0}),Object.defineProperty(s,"backgroundColor",{set:function(T){zs(T)},get:function(){return Lo()},enumerable:!0}),Object.defineProperty(s,"bottomBarColor",{set:function(T){kc(T)},get:function(){return Bo()},enumerable:!0}),Object.defineProperty(s,"BackButton",{value:Pl,enumerable:!0}),Object.defineProperty(s,"MainButton",{value:Cd,enumerable:!0}),Object.defineProperty(s,"SecondaryButton",{value:Tc,enumerable:!0}),Object.defineProperty(s,"SettingsButton",{value:Di,enumerable:!0}),Object.defineProperty(s,"HapticFeedback",{value:Wl,enumerable:!0}),Object.defineProperty(s,"CloudStorage",{value:Li,enumerable:!0}),Object.defineProperty(s,"BiometricManager",{value:Bi,enumerable:!0}),Object.defineProperty(s,"Accelerometer",{value:Ii,enumerable:!0}),Object.defineProperty(s,"DeviceOrientation",{value:Ht,enumerable:!0}),Object.defineProperty(s,"Gyroscope",{value:Mc,enumerable:!0}),Object.defineProperty(s,"LocationManager",{value:Io,enumerable:!0}),s.isVersionAtLeast=function(T){return je(T)},s.setHeaderColor=function(T){s.headerColor=T},s.setBackgroundColor=function(T){s.backgroundColor=T},s.setBottomBarColor=function(T){s.bottomBarColor=T},s.enableClosingConfirmation=function(){s.isClosingConfirmationEnabled=!0},s.disableClosingConfirmation=function(){s.isClosingConfirmationEnabled=!1},s.enableVerticalSwipes=function(){s.isVerticalSwipesEnabled=!0},s.disableVerticalSwipes=function(){s.isVerticalSwipesEnabled=!1},s.lockOrientation=function(){s.isOrientationLocked=!0},s.unlockOrientation=function(){s.isOrientationLocked=!1},s.requestFullscreen=function(){if(!je("8.0"))throw console.error("[Telegram.WebApp] Method requestFullscreen is not supported in version "+p),Error("WebAppMethodUnsupported");e.postEvent("web_app_request_fullscreen")},s.exitFullscreen=function(){if(!je("8.0"))throw console.error("[Telegram.WebApp] Method exitFullscreen is not supported in version "+p),Error("WebAppMethodUnsupported");e.postEvent("web_app_exit_fullscreen")},s.addToHomeScreen=function(){if(!je("8.0"))throw console.error("[Telegram.WebApp] Method addToHomeScreen is not supported in version "+p),Error("WebAppMethodUnsupported");e.postEvent("web_app_add_to_home_screen")},s.checkHomeScreenStatus=function(T){if(!je("8.0"))throw console.error("[Telegram.WebApp] Method checkHomeScreenStatus is not supported in version "+p),Error("WebAppMethodUnsupported");T&&Jr.push(T),e.postEvent("web_app_check_home_screen")},s.onEvent=function(T,A){xe(T,A)},s.offEvent=function(T,A){ee(T,A)},s.sendData=function(T){if(!T||!T.length)throw console.error("[Telegram.WebApp] Data is required",T),Error("WebAppDataInvalid");if(Vl(T)>4096)throw console.error("[Telegram.WebApp] Data is too long",T),Error("WebAppDataInvalid");e.postEvent("web_app_data_send",!1,{data:T})},s.switchInlineQuery=function(T,A){if(!je("6.6"))throw console.error("[Telegram.WebApp] Method switchInlineQuery is not supported in version "+p),Error("WebAppMethodUnsupported");if(!n.tgWebAppBotInline)throw console.error("[Telegram.WebApp] Inline mode is disabled for this bot. Read more about inline mode: https://core.telegram.org/bots/inline"),Error("WebAppInlineModeDisabled");if(T=T||"",T.length>256)throw console.error("[Telegram.WebApp] Inline query is too long",T),Error("WebAppInlineQueryInvalid");var O=[];if(A){if(!Array.isArray(A))throw console.error("[Telegram.WebApp] Choose chat types should be an array",A),Error("WebAppInlineChooseChatTypesInvalid");for(var q={users:1,bots:1,groups:1,channels:1},G=0;G<A.length;G++){var ie=A[G];if(!q[ie])throw console.error("[Telegram.WebApp] Choose chat type is invalid",ie),Error("WebAppInlineChooseChatTypeInvalid");q[ie]!=2&&(q[ie]=2,O.push(ie))}}e.postEvent("web_app_switch_inline_query",!1,{query:T,chat_types:O})},s.openLink=function(q,A){var O=document.createElement("A");if(O.href=q,O.protocol!="http:"&&O.protocol!="https:")throw console.error("[Telegram.WebApp] Url protocol is not supported",q),Error("WebAppTgUrlInvalid");var q=O.href;if(A=A||{},je("6.1")){var G={url:q};je("6.4")&&A.try_instant_view&&(G.try_instant_view=!0),je("7.6")&&A.try_browser&&(G.try_browser=A.try_browser),e.postEvent("web_app_open_link",!1,G)}else window.open(q,"_blank")},s.openTelegramLink=function(T,A){var O=document.createElement("A");if(O.href=T,O.protocol!="http:"&&O.protocol!="https:")throw console.error("[Telegram.WebApp] Url protocol is not supported",T),Error("WebAppTgUrlInvalid");if(O.hostname!="t.me")throw console.error("[Telegram.WebApp] Url host is not supported",T),Error("WebAppTgUrlInvalid");var q=O.pathname+O.search;if(A=A||{},i||je("6.1")){var G={path_full:q};A.force_request&&(G.force_request=!0),e.postEvent("web_app_open_tg_link",!1,G)}else location.href="https://t.me"+q},s.openInvoice=function(T,A){var O=document.createElement("A"),q,G;if(O.href=T,O.protocol!="http:"&&O.protocol!="https:"||O.hostname!="t.me"||!(q=O.pathname.match(/^\/(\$|invoice\/)([A-Za-z0-9\-_=]+)$/))||!(G=q[2]))throw console.error("[Telegram.WebApp] Invoice url is invalid",T),Error("WebAppInvoiceUrlInvalid");if(!je("6.1"))throw console.error("[Telegram.WebApp] Method openInvoice is not supported in version "+p),Error("WebAppMethodUnsupported");if(Hi[G])throw console.error("[Telegram.WebApp] Invoice is already opened"),Error("WebAppInvoiceOpened");Hi[G]={url:T,callback:A},e.postEvent("web_app_open_invoice",!1,{slug:G})},s.showPopup=function(T,A){if(!je("6.2"))throw console.error("[Telegram.WebApp] Method showPopup is not supported in version "+p),Error("WebAppMethodUnsupported");if(yn)throw console.error("[Telegram.WebApp] Popup is already opened"),Error("WebAppPopupOpened");var O="",q="",G=[],ie={};if(typeof T.title<"u"){if(O=we(T.title),O.length>64)throw console.error("[Telegram.WebApp] Popup title is too long",O),Error("WebAppPopupParamInvalid");O.length>0&&(ie.title=O)}if(typeof T.message<"u"&&(q=we(T.message)),!q.length)throw console.error("[Telegram.WebApp] Popup message is required",T.message),Error("WebAppPopupParamInvalid");if(q.length>256)throw console.error("[Telegram.WebApp] Popup message is too long",q),Error("WebAppPopupParamInvalid");if(ie.message=q,typeof T.buttons<"u"){if(!Array.isArray(T.buttons))throw console.error("[Telegram.WebApp] Popup buttons should be an array",T.buttons),Error("WebAppPopupParamInvalid");for(var ue=0;ue<T.buttons.length;ue++){var le=T.buttons[ue],We={},pe="";if(typeof le.id<"u"&&(pe=le.id.toString(),pe.length>64))throw console.error("[Telegram.WebApp] Popup button id is too long",pe),Error("WebAppPopupParamInvalid");We.id=pe;var Ve=le.type;if(typeof Ve>"u"&&(Ve="default"),We.type=Ve,!(Ve=="ok"||Ve=="close"||Ve=="cancel"))if(Ve=="default"||Ve=="destructive"){var tt="";if(typeof le.text<"u"&&(tt=we(le.text)),!tt.length)throw console.error("[Telegram.WebApp] Popup button text is required for type "+Ve,le.text),Error("WebAppPopupParamInvalid");if(tt.length>64)throw console.error("[Telegram.WebApp] Popup button text is too long",tt),Error("WebAppPopupParamInvalid");We.text=tt}else throw console.error("[Telegram.WebApp] Popup button type is invalid",Ve),Error("WebAppPopupParamInvalid");G.push(We)}}else G.push({id:"",type:"close"});if(G.length<1)throw console.error("[Telegram.WebApp] Popup should have at least one button"),Error("WebAppPopupParamInvalid");if(G.length>3)throw console.error("[Telegram.WebApp] Popup should not have more than 3 buttons"),Error("WebAppPopupParamInvalid");ie.buttons=G,yn={callback:A},e.postEvent("web_app_open_popup",!1,ie)},s.showAlert=function(T,A){s.showPopup({message:T},A?function(){A()}:null)},s.showConfirm=function(T,A){s.showPopup({message:T,buttons:[{type:"ok",id:"ok"},{type:"cancel"}]},A?function(O){A(O=="ok")}:null)},s.showScanQrPopup=function(T,A){if(!je("6.4"))throw console.error("[Telegram.WebApp] Method showScanQrPopup is not supported in version "+p),Error("WebAppMethodUnsupported");if(zr)throw console.error("[Telegram.WebApp] Popup is already opened"),Error("WebAppScanQrPopupOpened");var O="",q={};if(typeof T.text<"u"){if(O=we(T.text),O.length>64)throw console.error("[Telegram.WebApp] Scan QR popup text is too long",O),Error("WebAppScanQrPopupParamInvalid");O.length>0&&(q.text=O)}zr={callback:A},e.postEvent("web_app_open_scan_qr_popup",!1,q)},s.closeScanQrPopup=function(){if(!je("6.4"))throw console.error("[Telegram.WebApp] Method closeScanQrPopup is not supported in version "+p),Error("WebAppMethodUnsupported");zr=!1,e.postEvent("web_app_close_scan_qr_popup",!1)},s.readTextFromClipboard=function(T){if(!je("6.4"))throw console.error("[Telegram.WebApp] Method readTextFromClipboard is not supported in version "+p),Error("WebAppMethodUnsupported");var A=gr(16),O={req_id:A};sn[A]={callback:T},e.postEvent("web_app_read_text_from_clipboard",!1,O)},s.requestWriteAccess=function(T){if(!je("6.9"))throw console.error("[Telegram.WebApp] Method requestWriteAccess is not supported in version "+p),Error("WebAppMethodUnsupported");if(Rr)throw console.error("[Telegram.WebApp] Write access is already requested"),Error("WebAppWriteAccessRequested");Rr={callback:T},e.postEvent("web_app_request_write_access")},s.requestContact=function(T){if(!je("6.9"))throw console.error("[Telegram.WebApp] Method requestContact is not supported in version "+p),Error("WebAppMethodUnsupported");if(Ui)throw console.error("[Telegram.WebApp] Contact is already requested"),Error("WebAppContactRequested");Ui={callback:T},e.postEvent("web_app_request_phone")},s.downloadFile=function(T,A){if(!je("8.0"))throw console.error("[Telegram.WebApp] Method downloadFile is not supported in version "+p),Error("WebAppMethodUnsupported");if(ti)throw console.error("[Telegram.WebApp] Popup is already opened"),Error("WebAppDownloadFilePopupOpened");var O=document.createElement("A"),q={};if(!T||!T.url||!T.url.length)throw console.error("[Telegram.WebApp] Url is required"),Error("WebAppDownloadFileParamInvalid");if(O.href=T.url,O.protocol!="https:")throw console.error("[Telegram.WebApp] Url protocol is not supported",url),Error("WebAppDownloadFileParamInvalid");if(q.url=O.href,!T||!T.file_name||!T.file_name.length)throw console.error("[Telegram.WebApp] File name is required"),Error("WebAppDownloadFileParamInvalid");q.file_name=T.file_name,ti={callback:A},e.postEvent("web_app_request_file_download",!1,q)},s.shareToStory=function(T,A){if(A=A||{},!je("7.8"))throw console.error("[Telegram.WebApp] Method shareToStory is not supported in version "+p),Error("WebAppMethodUnsupported");var O=document.createElement("A");if(O.href=T,O.protocol!="http:"&&O.protocol!="https:")throw console.error("[Telegram.WebApp] Media url protocol is not supported",url),Error("WebAppMediaUrlInvalid");var q={};if(q.media_url=O.href,typeof A.text<"u"){var G=we(A.text);if(G.length>2048)throw console.error("[Telegram.WebApp] Text is too long",G),Error("WebAppShareToStoryParamInvalid");G.length>0&&(q.text=G)}if(typeof A.widget_link<"u"){if(A.widget_link=A.widget_link||{},O.href=A.widget_link.url,O.protocol!="http:"&&O.protocol!="https:")throw console.error("[Telegram.WebApp] Link protocol is not supported",url),Error("WebAppShareToStoryParamInvalid");var ie={url:O.href};if(typeof A.widget_link.name<"u"){var ue=we(A.widget_link.name);if(ue.length>48)throw console.error("[Telegram.WebApp] Link name is too long",ue),Error("WebAppShareToStoryParamInvalid");ue.length>0&&(ie.name=ue)}q.widget_link=ie}e.postEvent("web_app_share_to_story",!1,q)},s.shareMessage=function(T,A){if(!je("8.0"))throw console.error("[Telegram.WebApp] Method shareMessage is not supported in version "+p),Error("WebAppMethodUnsupported");if(gn)throw console.error("[Telegram.WebApp] Share message is already opened"),Error("WebAppShareMessageOpened");gn={callback:A},e.postEvent("web_app_send_prepared_message",!1,{id:T})},s.setEmojiStatus=function(T,A,O){if(A=A||{},!je("8.0"))throw console.error("[Telegram.WebApp] Method setEmojiStatus is not supported in version "+p),Error("WebAppMethodUnsupported");var q={};if(q.custom_emoji_id=T,typeof A.duration<"u"&&(q.duration=A.duration),jr)throw console.error("[Telegram.WebApp] Emoji status is already requested"),Error("WebAppEmojiStatusRequested");jr={callback:O},e.postEvent("web_app_set_emoji_status",!1,q)},s.requestEmojiStatusAccess=function(T){if(!je("8.0"))throw console.error("[Telegram.WebApp] Method requestEmojiStatusAccess is not supported in version "+p),Error("WebAppMethodUnsupported");if(Kt)throw console.error("[Telegram.WebApp] Emoji status permission is already requested"),Error("WebAppEmojiStatusAccessRequested");Kt={callback:T},e.postEvent("web_app_request_emoji_status_access")},s.invokeCustomMethod=function(T,A,O){Fl(T,A,O)},s.ready=function(){e.postEvent("web_app_ready")},s.expand=function(){e.postEvent("web_app_expand")},s.close=function(T){T=T||{};var A={};je("7.6")&&T.return_back&&(A.return_back=!0),e.postEvent("web_app_close",!1,A)},window.Telegram.WebApp=s,Ni(),zi(),Xr(),Oi(),n.tgWebAppShowSettings&&Di.show(),window.addEventListener("resize",Qe),i&&document.addEventListener("click",be),e.onEvent("theme_changed",Te),e.onEvent("viewport_changed",lt),e.onEvent("safe_area_changed",Le),e.onEvent("content_safe_area_changed",F),e.onEvent("visibility_changed",X),e.onEvent("invoice_closed",ei),e.onEvent("popup_closed",Ac),e.onEvent("qr_text_received",_c),e.onEvent("scan_qr_popup_closed",Ed),e.onEvent("clipboard_text_received",Bs),e.onEvent("write_access_requested",vr),e.onEvent("phone_requested",wd),e.onEvent("file_download_requested",jc),e.onEvent("custom_method_invoked",Is),e.onEvent("fullscreen_changed",Zn),e.onEvent("fullscreen_failed",Qr),e.onEvent("home_screen_added",Ro),e.onEvent("home_screen_checked",_r),e.onEvent("prepared_message_sent",xd),e.onEvent("prepared_message_failed",xc),e.onEvent("emoji_status_set",Sd),e.onEvent("emoji_status_failed",Do),e.onEvent("emoji_status_access_requested",Or),e.postEvent("web_app_request_theme"),e.postEvent("web_app_request_viewport"),e.postEvent("web_app_request_safe_area"),e.postEvent("web_app_request_content_safe_area")})()),C1}var w1;function mw(){if(w1)return Ra;w1=1,Object.defineProperty(Ra,"__esModule",{value:!0}),Ra.WebApp=void 0,pw();var t=window;return Ra.WebApp=t.Telegram.WebApp,Ra}var T1;function gw(){if(T1)return Bu;T1=1,Object.defineProperty(Bu,"__esModule",{value:!0});var t=mw();return Bu.default=t.WebApp,Bu}var yw=gw();const Tt=rw(yw);function bw(t){let e=t,n=!1;const i=new Set;return{getState(){return e},updateState(s){e=typeof s=="function"?s(e):s},setState(s){this.updateState(s),i.forEach(l=>l(e))},initialize(s){n||(e=s,n=!0)},subscribe(s){return i.add(s),()=>i.delete(s)}}}function vw(t){return R.useSyncExternalStore(t.subscribe,()=>t.getState(),()=>t.getState())}function xw(t,e,n){const i=[],s=[],l={};for(const c of t){const u=c.position||e;l[u]=l[u]||0,l[u]+=1,l[u]<=n?s.push(c):i.push(c)}return{notifications:s,queue:i}}const Sw=()=>bw({notifications:[],queue:[],defaultPosition:"bottom-right",limit:5}),Ts=Sw(),kw=(t=Ts)=>vw(t);function Il(t,e){const n=t.getState(),i=e([...n.notifications,...n.queue]),s=xw(i,n.defaultPosition,n.limit);t.setState({notifications:s.notifications,queue:s.queue,limit:n.limit,defaultPosition:n.defaultPosition})}function Cw(t,e=Ts){const n=t.id||AE();return Il(e,i=>t.id&&i.some(s=>s.id===t.id)?i:[...i,{...t,id:n}]),n}function Nx(t,e=Ts){return Il(e,n=>n.filter(i=>i.id===t?(i.onClose?.(i),!1):!0)),t}function Ew(t,e=Ts){return Il(e,n=>n.map(i=>i.id===t.id?{...i,...t}:i)),t.id}function ww(t=Ts){Il(t,()=>[])}function Tw(t=Ts){Il(t,e=>e.slice(0,t.getState().limit))}const Wt={show:Cw,hide:Nx,update:Ew,clean:ww,cleanQueue:Tw,updateState:Il};function dm(t,e){return dm=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,i){return n.__proto__=i,n},dm(t,e)}function zx(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,dm(t,e)}var Mp={exports:{}},Ap,M1;function Mw(){if(M1)return Ap;M1=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Ap=t,Ap}var _p,A1;function Aw(){if(A1)return _p;A1=1;var t=Mw();function e(){}function n(){}return n.resetWarningCache=e,_p=function(){function i(c,u,d,p,y,b){if(b!==t){var v=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw v.name="Invariant Violation",v}}i.isRequired=i;function s(){return i}var l={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:s,element:i,elementType:i,instanceOf:s,node:i,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:n,resetWarningCache:e};return l.PropTypes=l,l},_p}var _1;function _w(){return _1||(_1=1,Mp.exports=Aw()()),Mp.exports}const j1={disabled:!1},af=vn.createContext(null);var jw=function(e){return e.scrollTop},Ua="unmounted",ss="exited",ls="entering",vl="entered",hm="exiting",Mi=(function(t){zx(e,t);function e(i,s){var l;l=t.call(this,i,s)||this;var c=s,u=c&&!c.isMounting?i.enter:i.appear,d;return l.appearStatus=null,i.in?u?(d=ss,l.appearStatus=ls):d=vl:i.unmountOnExit||i.mountOnEnter?d=Ua:d=ss,l.state={status:d},l.nextCallback=null,l}e.getDerivedStateFromProps=function(s,l){var c=s.in;return c&&l.status===Ua?{status:ss}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(s){var l=null;if(s!==this.props){var c=this.state.status;this.props.in?c!==ls&&c!==vl&&(l=ls):(c===ls||c===vl)&&(l=hm)}this.updateStatus(!1,l)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var s=this.props.timeout,l,c,u;return l=c=u=s,s!=null&&typeof s!="number"&&(l=s.exit,c=s.enter,u=s.appear!==void 0?s.appear:c),{exit:l,enter:c,appear:u}},n.updateStatus=function(s,l){if(s===void 0&&(s=!1),l!==null)if(this.cancelNextCallback(),l===ls){if(this.props.unmountOnExit||this.props.mountOnEnter){var c=this.props.nodeRef?this.props.nodeRef.current:Ha.findDOMNode(this);c&&jw(c)}this.performEnter(s)}else this.performExit();else this.props.unmountOnExit&&this.state.status===ss&&this.setState({status:Ua})},n.performEnter=function(s){var l=this,c=this.props.enter,u=this.context?this.context.isMounting:s,d=this.props.nodeRef?[u]:[Ha.findDOMNode(this),u],p=d[0],y=d[1],b=this.getTimeouts(),v=u?b.appear:b.enter;if(!s&&!c||j1.disabled){this.safeSetState({status:vl},function(){l.props.onEntered(p)});return}this.props.onEnter(p,y),this.safeSetState({status:ls},function(){l.props.onEntering(p,y),l.onTransitionEnd(v,function(){l.safeSetState({status:vl},function(){l.props.onEntered(p,y)})})})},n.performExit=function(){var s=this,l=this.props.exit,c=this.getTimeouts(),u=this.props.nodeRef?void 0:Ha.findDOMNode(this);if(!l||j1.disabled){this.safeSetState({status:ss},function(){s.props.onExited(u)});return}this.props.onExit(u),this.safeSetState({status:hm},function(){s.props.onExiting(u),s.onTransitionEnd(c.exit,function(){s.safeSetState({status:ss},function(){s.props.onExited(u)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(s,l){l=this.setNextCallback(l),this.setState(s,l)},n.setNextCallback=function(s){var l=this,c=!0;return this.nextCallback=function(u){c&&(c=!1,l.nextCallback=null,s(u))},this.nextCallback.cancel=function(){c=!1},this.nextCallback},n.onTransitionEnd=function(s,l){this.setNextCallback(l);var c=this.props.nodeRef?this.props.nodeRef.current:Ha.findDOMNode(this),u=s==null&&!this.props.addEndListener;if(!c||u){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var d=this.props.nodeRef?[this.nextCallback]:[c,this.nextCallback],p=d[0],y=d[1];this.props.addEndListener(p,y)}s!=null&&setTimeout(this.nextCallback,s)},n.render=function(){var s=this.state.status;if(s===Ua)return null;var l=this.props,c=l.children;l.in,l.mountOnEnter,l.unmountOnExit,l.appear,l.enter,l.exit,l.timeout,l.addEndListener,l.onEnter,l.onEntering,l.onEntered,l.onExit,l.onExiting,l.onExited,l.nodeRef;var u=Ex(l,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return vn.createElement(af.Provider,{value:null},typeof c=="function"?c(s,u):vn.cloneElement(vn.Children.only(c),u))},e})(vn.Component);Mi.contextType=af;Mi.propTypes={};function pl(){}Mi.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:pl,onEntering:pl,onEntered:pl,onExit:pl,onExiting:pl,onExited:pl};Mi.UNMOUNTED=Ua;Mi.EXITED=ss;Mi.ENTERING=ls;Mi.ENTERED=vl;Mi.EXITING=hm;function Ow(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Jm(t,e){var n=function(l){return e&&R.isValidElement(l)?e(l):l},i=Object.create(null);return t&&R.Children.map(t,function(s){return s}).forEach(function(s){i[s.key]=n(s)}),i}function Nw(t,e){t=t||{},e=e||{};function n(y){return y in e?e[y]:t[y]}var i=Object.create(null),s=[];for(var l in t)l in e?s.length&&(i[l]=s,s=[]):s.push(l);var c,u={};for(var d in e){if(i[d])for(c=0;c<i[d].length;c++){var p=i[d][c];u[i[d][c]]=n(p)}u[d]=n(d)}for(c=0;c<s.length;c++)u[s[c]]=n(s[c]);return u}function cs(t,e,n){return n[e]!=null?n[e]:t.props[e]}function zw(t,e){return Jm(t.children,function(n){return R.cloneElement(n,{onExited:e.bind(null,n),in:!0,appear:cs(n,"appear",t),enter:cs(n,"enter",t),exit:cs(n,"exit",t)})})}function Rw(t,e,n){var i=Jm(t.children),s=Nw(e,i);return Object.keys(s).forEach(function(l){var c=s[l];if(R.isValidElement(c)){var u=l in e,d=l in i,p=e[l],y=R.isValidElement(p)&&!p.props.in;d&&(!u||y)?s[l]=R.cloneElement(c,{onExited:n.bind(null,c),in:!0,exit:cs(c,"exit",t),enter:cs(c,"enter",t)}):!d&&u&&!y?s[l]=R.cloneElement(c,{in:!1}):d&&u&&R.isValidElement(p)&&(s[l]=R.cloneElement(c,{onExited:n.bind(null,c),in:p.props.in,exit:cs(c,"exit",t),enter:cs(c,"enter",t)}))}}),s}var Dw=Object.values||function(t){return Object.keys(t).map(function(e){return t[e]})},Lw={component:"div",childFactory:function(e){return e}},po=(function(t){zx(e,t);function e(i,s){var l;l=t.call(this,i,s)||this;var c=l.handleExited.bind(Ow(l));return l.state={contextValue:{isMounting:!0},handleExited:c,firstRender:!0},l}var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(s,l){var c=l.children,u=l.handleExited,d=l.firstRender;return{children:d?zw(s,u):Rw(s,c,u),firstRender:!1}},n.handleExited=function(s,l){var c=Jm(this.props.children);s.key in c||(s.props.onExited&&s.props.onExited(l),this.mounted&&this.setState(function(u){var d=_E({},u.children);return delete d[s.key],{children:d}}))},n.render=function(){var s=this.props,l=s.component,c=s.childFactory,u=Ex(s,["component","childFactory"]),d=this.state.contextValue,p=Dw(this.state.children).map(c);return delete u.appear,delete u.enter,delete u.exit,l===null?vn.createElement(af.Provider,{value:d},p):vn.createElement(af.Provider,{value:d},vn.createElement(l,u,p))},e})(vn.Component);po.propTypes={};po.defaultProps=Lw;const Rx=["bottom-center","bottom-left","bottom-right","top-center","top-left","top-right"];function Bw(t,e){return t.reduce((n,i)=>(n[i.position||e].push(i),n),Rx.reduce((n,i)=>(n[i]=[],n),{}))}const O1={left:"translateX(-100%)",right:"translateX(100%)","top-center":"translateY(-100%)","bottom-center":"translateY(100%)"},Iw={left:"translateX(0)",right:"translateX(0)","top-center":"translateY(0)","bottom-center":"translateY(0)"};function Hw({state:t,maxHeight:e,position:n,transitionDuration:i}){const[s,l]=n.split("-"),c=l==="center"?`${s}-center`:l,u={opacity:0,maxHeight:e,transform:O1[c],transitionDuration:`${i}ms, ${i}ms, ${i}ms`,transitionTimingFunction:"cubic-bezier(.51,.3,0,1.21), cubic-bezier(.51,.3,0,1.21), linear",transitionProperty:"opacity, transform, max-height"},d={opacity:1,transform:Iw[c]},p={opacity:0,maxHeight:0,transform:O1[c]};return{...u,...{entering:d,entered:d,exiting:p,exited:p}[t]}}function Uw(t,e){return typeof e=="number"?e:e===!1||t===!1?!1:t}const Dx=R.forwardRef(({data:t,onHide:e,autoClose:n,...i},s)=>{const{autoClose:l,message:c,...u}=t,d=Uw(n,t.autoClose),p=R.useRef(-1),y=()=>window.clearTimeout(p.current),b=()=>{e(t.id),y()},v=()=>{typeof d=="number"&&(p.current=window.setTimeout(b,d))};return R.useEffect(()=>{t.onOpen?.(t)},[]),R.useEffect(()=>(v(),y),[d]),m.jsx(jE,{...i,...u,onClose:b,ref:s,onMouseEnter:y,onMouseLeave:v,children:c})});Dx.displayName="@mantine/notifications/NotificationContainer";var Lx={root:"m_b37d9ac7",notification:"m_5ed0edd0"};const qw=Mi,Vw={position:"bottom-right",autoClose:4e3,transitionDuration:250,containerWidth:440,notificationMaxHeight:200,limit:5,zIndex:OE("overlay"),store:Ts,withinPortal:!0},Pw=BE((t,{zIndex:e,containerWidth:n})=>({root:{"--notifications-z-index":e?.toString(),"--notifications-container-width":wt(n)}})),Ai=ws((t,e)=>{const n=$r("Notifications",Vw,t),{classNames:i,className:s,style:l,styles:c,unstyled:u,vars:d,position:p,autoClose:y,transitionDuration:b,containerWidth:v,notificationMaxHeight:x,limit:k,zIndex:C,store:E,portalProps:M,withinPortal:_,...N}=n,B=NE(),L=kw(E),W=zE(),$=RE(),ne=R.useRef({}),ve=R.useRef(0),Te=(B.respectReducedMotion?$:!1)?1:b,ye=wx({name:"Notifications",classes:Lx,props:n,className:s,style:l,classNames:i,styles:c,unstyled:u,vars:d,varsResolver:Pw});R.useEffect(()=>{E?.updateState(Le=>({...Le,limit:k||5,defaultPosition:p}))},[k,p]),DE(()=>{L.notifications.length>ve.current&&setTimeout(()=>W(),0),ve.current=L.notifications.length},[L.notifications]);const lt=Bw(L.notifications,p),Qe=Rx.reduce((Le,F)=>(Le[F]=lt[F].map(({style:X,...be})=>m.jsx(qw,{timeout:Te,onEnter:()=>ne.current[be.id].offsetHeight,nodeRef:{current:ne.current[be.id]},children:we=>m.jsx(Dx,{ref:te=>{te&&(ne.current[be.id]=te)},data:be,onHide:te=>Nx(te,E),autoClose:y,...ye("notification",{style:{...Hw({state:we,position:F,transitionDuration:Te,maxHeight:x}),...X}})})},be.id)),Le),{});return m.jsxs(LE,{withinPortal:_,...M,children:[m.jsx(de,{...ye("root"),"data-position":"top-center",ref:e,...N,children:m.jsx(po,{children:Qe["top-center"]})}),m.jsx(de,{...ye("root"),"data-position":"top-left",...N,children:m.jsx(po,{children:Qe["top-left"]})}),m.jsx(de,{...ye("root",{className:b1.classNames.fullWidth}),"data-position":"top-right",...N,children:m.jsx(po,{children:Qe["top-right"]})}),m.jsx(de,{...ye("root",{className:b1.classNames.fullWidth}),"data-position":"bottom-right",...N,children:m.jsx(po,{children:Qe["bottom-right"]})}),m.jsx(de,{...ye("root"),"data-position":"bottom-left",...N,children:m.jsx(po,{children:Qe["bottom-left"]})}),m.jsx(de,{...ye("root"),"data-position":"bottom-center",...N,children:m.jsx(po,{children:Qe["bottom-center"]})})]})});Ai.classes=Lx;Ai.displayName="@mantine/notifications/Notifications";Ai.show=Wt.show;Ai.hide=Wt.hide;Ai.update=Wt.update;Ai.clean=Wt.clean;Ai.cleanQueue=Wt.cleanQueue;Ai.updateState=Wt.updateState;var pm=new Map,Iu=new WeakMap,N1=0,Ww;function Fw(t){return t?(Iu.has(t)||(N1+=1,Iu.set(t,N1.toString())),Iu.get(t)):"0"}function Gw(t){return Object.keys(t).sort().filter(e=>t[e]!==void 0).map(e=>`${e}_${e==="root"?Fw(t.root):t[e]}`).toString()}function $w(t){const e=Gw(t);let n=pm.get(e);if(!n){const i=new Map;let s;const l=new IntersectionObserver(c=>{c.forEach(u=>{var d;const p=u.isIntersecting&&s.some(y=>u.intersectionRatio>=y);t.trackVisibility&&typeof u.isVisible>"u"&&(u.isVisible=p),(d=i.get(u.target))==null||d.forEach(y=>{y(p,u)})})},t);s=l.thresholds||(Array.isArray(t.threshold)?t.threshold:[t.threshold||0]),n={id:e,observer:l,elements:i},pm.set(e,n)}return n}function Yw(t,e,n={},i=Ww){if(typeof window.IntersectionObserver>"u"&&i!==void 0){const d=t.getBoundingClientRect();return e(i,{isIntersecting:i,target:t,intersectionRatio:typeof n.threshold=="number"?n.threshold:0,time:0,boundingClientRect:d,intersectionRect:d,rootBounds:d}),()=>{}}const{id:s,observer:l,elements:c}=$w(n),u=c.get(t)||[];return c.has(t)||c.set(t,u),u.push(e),l.observe(t),function(){u.splice(u.indexOf(e),1),u.length===0&&(c.delete(t),l.unobserve(t)),c.size===0&&(l.disconnect(),pm.delete(s))}}function Kw({threshold:t,delay:e,trackVisibility:n,rootMargin:i,root:s,triggerOnce:l,skip:c,initialInView:u,fallbackInView:d,onChange:p}={}){var y;const[b,v]=R.useState(null),x=R.useRef(p),k=R.useRef(u),[C,E]=R.useState({inView:!!u,entry:void 0});x.current=p,R.useEffect(()=>{if(k.current===void 0&&(k.current=u),c||!b)return;let B;return B=Yw(b,(L,W)=>{const $=k.current;k.current=L,!($===void 0&&!L)&&(E({inView:L,entry:W}),x.current&&x.current(L,W),W.isIntersecting&&l&&B&&(B(),B=void 0))},{root:s,rootMargin:i,threshold:t,trackVisibility:n,delay:e},d),()=>{B&&B()}},[Array.isArray(t)?t.toString():t,b,s,i,l,c,n,d,e]);const M=(y=C.entry)==null?void 0:y.target,_=R.useRef(void 0);!b&&M&&!l&&!c&&_.current!==M&&(_.current=M,E({inView:!!u,entry:void 0}),k.current=u);const N=[v,C.inView,C.entry];return N.ref=N[0],N.inView=N[1],N.entry=N[2],N}const Bx="https://apiroleplay.capyhub.su",Ix=()=>Tt.initData||"";async function Lt(t,e={}){const n={"Content-Type":"application/json","X-Telegram-Init-Data":Ix()},i={...e,headers:{...n,...e.headers}},s=await fetch(`${Bx}${t}`,i);if(!s.ok)throw new Error(`API Error: ${s.status} ${s.statusText}`);return s.json()}async function Qw(t,e){const n=await fetch(`${Bx}${t}`,{method:"POST",headers:{"X-Telegram-Init-Data":Ix()},body:e});if(!n.ok){const i=await n.json().catch(()=>({}));throw new Error(i.message||` : ${n.status}`)}return n.json()}var Jw={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};const st=(t,e,n,i)=>{const s=R.forwardRef(({color:l="currentColor",size:c=24,stroke:u=2,title:d,className:p,children:y,...b},v)=>R.createElement("svg",{ref:v,...Jw[t],width:c,height:c,className:["tabler-icon",`tabler-icon-${e}`,p].join(" "),...t==="filled"?{fill:l}:{strokeWidth:u,stroke:l},...b},[d&&R.createElement("title",{key:"svg-title"},d),...i.map(([x,k])=>R.createElement(x,k)),...Array.isArray(y)?y:[y]]));return s.displayName=`${n}`,s};const Xw=[["path",{d:"M14 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M4 6l8 0",key:"svg-1"}],["path",{d:"M16 6l4 0",key:"svg-2"}],["path",{d:"M8 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-3"}],["path",{d:"M4 12l2 0",key:"svg-4"}],["path",{d:"M10 12l10 0",key:"svg-5"}],["path",{d:"M17 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-6"}],["path",{d:"M4 18l11 0",key:"svg-7"}],["path",{d:"M19 18l1 0",key:"svg-8"}]],Zw=st("outline","adjustments-horizontal","AdjustmentsHorizontal",Xw);const eT=[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]],mm=st("outline","alert-circle","AlertCircle",eT);const tT=[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]],nT=st("outline","alert-triangle","AlertTriangle",tT);const rT=[["path",{d:"M12 5l0 14",key:"svg-0"}],["path",{d:"M18 11l-6 -6",key:"svg-1"}],["path",{d:"M6 11l6 -6",key:"svg-2"}]],iT=st("outline","arrow-up","ArrowUp",rT);const oT=[["path",{d:"M3 9l4 -4l4 4m-4 -4v14",key:"svg-0"}],["path",{d:"M21 15l-4 4l-4 -4m4 4v-14",key:"svg-1"}]],sT=st("outline","arrows-sort","ArrowsSort",oT);const lT=[["path",{d:"M7 5h6a3.5 3.5 0 0 1 0 7h-6z",key:"svg-0"}],["path",{d:"M13 12h1a3.5 3.5 0 0 1 0 7h-7v-7",key:"svg-1"}]],aT=st("outline","bold","Bold",lT);const cT=[["path",{d:"M15 10l-4 4l6 6l4 -16l-18 7l4 2l2 6l3 -4",key:"svg-0"}]],uT=st("outline","brand-telegram","BrandTelegram",cT);const fT=[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]],nc=st("outline","check","Check",fT);const dT=[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]],Hx=st("outline","chevron-down","ChevronDown",dT);const hT=[["path",{d:"M6 15l6 -6l6 6",key:"svg-0"}]],pT=st("outline","chevron-up","ChevronUp",hT);const mT=[["path",{d:"M12 6l4 6l5 -4l-2 10h-14l-2 -10l5 4z",key:"svg-0"}]],z1=st("outline","crown","Crown",mT);const gT=[["path",{d:"M8 19v-14h6a3 3 0 0 1 0 6h-8",key:"svg-0"}],["path",{d:"M14 15h-8",key:"svg-1"}]],yT=st("outline","currency-rubel","CurrencyRubel",gT);const bT=[["path",{d:"M12 10.941c2.333 -3.308 .167 -7.823 -1 -8.941c0 3.395 -2.235 5.299 -3.667 6.706c-1.43 1.408 -2.333 3.621 -2.333 5.588c0 3.704 3.134 6.706 7 6.706s7 -3.002 7 -6.706c0 -1.712 -1.232 -4.403 -2.333 -5.588c-2.084 3.353 -3.257 3.353 -4.667 2.235",key:"svg-0"}]],vT=st("outline","flame","Flame",bT);const xT=[["path",{d:"M11 11m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M19 3l-5 5",key:"svg-1"}],["path",{d:"M15 3h4v4",key:"svg-2"}],["path",{d:"M11 16v6",key:"svg-3"}],["path",{d:"M8 19h6",key:"svg-4"}]],ST=st("outline","gender-bigender","GenderBigender",xT);const kT=[["path",{d:"M5 12l-2 0l9 -9l9 9l-2 0",key:"svg-0"}],["path",{d:"M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7",key:"svg-1"}],["path",{d:"M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6",key:"svg-2"}]],CT=st("outline","home","Home",kT);const ET=[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]],wT=st("outline","info-circle","InfoCircle",ET);const TT=[["path",{d:"M11 5l6 0",key:"svg-0"}],["path",{d:"M7 19l6 0",key:"svg-1"}],["path",{d:"M14 5l-4 14",key:"svg-2"}]],MT=st("outline","italic","Italic",TT);const AT=[["path",{d:"M3 20l1.3 -3.9c-2.324 -3.437 -1.426 -7.872 2.1 -10.374c3.526 -2.501 8.59 -2.296 11.845 .48c3.255 2.777 3.695 7.266 1.029 10.501c-2.666 3.235 -7.615 4.215 -11.574 2.293l-4.7 1",key:"svg-0"}]],cf=st("outline","message-circle","MessageCircle",AT);const _T=[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M9 10l.01 0",key:"svg-1"}],["path",{d:"M15 10l.01 0",key:"svg-2"}],["path",{d:"M9 15l6 0",key:"svg-3"}]],jT=st("outline","mood-empty","MoodEmpty",_T);const OT=[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]],NT=st("outline","search","Search",OT);const zT=[["path",{d:"M16 18a2 2 0 0 1 2 2a2 2 0 0 1 2 -2a2 2 0 0 1 -2 -2a2 2 0 0 1 -2 2zm0 -12a2 2 0 0 1 2 2a2 2 0 0 1 2 -2a2 2 0 0 1 -2 -2a2 2 0 0 1 -2 2zm-7 12a6 6 0 0 1 6 -6a6 6 0 0 1 -6 -6a6 6 0 0 1 -6 6a6 6 0 0 1 6 6z",key:"svg-0"}]],RT=st("outline","sparkles","Sparkles",zT);const DT=[["path",{d:"M12 17.75l-6.172 3.245l1.179 -6.873l-5 -4.867l6.9 -1l3.086 -6.253l3.086 6.253l6.9 1l-5 4.867l1.179 6.873z",key:"svg-0"}]],gm=st("outline","star","Star",DT);const LT=[["path",{d:"M3 8v4.172a2 2 0 0 0 .586 1.414l5.71 5.71a2.41 2.41 0 0 0 3.408 0l3.592 -3.592a2.41 2.41 0 0 0 0 -3.408l-5.71 -5.71a2 2 0 0 0 -1.414 -.586h-4.172a2 2 0 0 0 -2 2z",key:"svg-0"}],["path",{d:"M18 19l1.592 -1.592a4.82 4.82 0 0 0 0 -6.816l-4.592 -4.592",key:"svg-1"}],["path",{d:"M7 10h-.01",key:"svg-2"}]],BT=st("outline","tags","Tags",LT);const IT=[["path",{d:"M7 13v-8a1 1 0 0 0 -1 -1h-2a1 1 0 0 0 -1 1v7a1 1 0 0 0 1 1h3a4 4 0 0 1 4 4v1a2 2 0 0 0 4 0v-5h3a2 2 0 0 0 2 -2l-1 -5a2 3 0 0 0 -2 -2h-7a3 3 0 0 0 -3 3",key:"svg-0"}]],R1=st("outline","thumb-down","ThumbDown",IT);const HT=[["path",{d:"M7 11v8a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1v-7a1 1 0 0 1 1 -1h3a4 4 0 0 0 4 -4v-1a2 2 0 0 1 4 0v5h3a2 2 0 0 1 2 2l-1 5a2 3 0 0 1 -2 2h-7a3 3 0 0 1 -3 -3",key:"svg-0"}]],D1=st("outline","thumb-up","ThumbUp",HT);const UT=[["path",{d:"M4 7l16 0",key:"svg-0"}],["path",{d:"M10 11l0 6",key:"svg-1"}],["path",{d:"M14 11l0 6",key:"svg-2"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-3"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-4"}]],qT=st("outline","trash","Trash",UT);const VT=[["path",{d:"M9 7m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2",key:"svg-1"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"svg-2"}],["path",{d:"M21 21v-2a4 4 0 0 0 -3 -3.85",key:"svg-3"}]],PT=st("outline","users","Users",VT);const WT=[["path",{d:"M6 21l15 -15l-3 -3l-15 15l3 3",key:"svg-0"}],["path",{d:"M15 6l3 3",key:"svg-1"}],["path",{d:"M9 3a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2",key:"svg-2"}],["path",{d:"M19 13a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2",key:"svg-3"}]],L1=st("outline","wand","Wand",WT);const FT=[["path",{d:"M8.243 7.34l-6.38 .925l-.113 .023a1 1 0 0 0 -.44 1.684l4.622 4.499l-1.09 6.355l-.013 .11a1 1 0 0 0 1.464 .944l5.706 -3l5.693 3l.1 .046a1 1 0 0 0 1.352 -1.1l-1.091 -6.355l4.624 -4.5l.078 -.085a1 1 0 0 0 -.633 -1.62l-6.38 -.926l-2.852 -5.78a1 1 0 0 0 -1.794 0l-2.853 5.78z",key:"svg-0"}]],uf=st("filled","star-filled","StarFilled",FT);const GT=[["path",{d:"M13 3a3 3 0 0 1 2.995 2.824l.005 .176v4h2a3 3 0 0 1 2.98 2.65l.015 .174l.005 .176l-.02 .196l-1.006 5.032c-.381 1.626 -1.502 2.796 -2.81 2.78l-.164 -.008h-8a1 1 0 0 1 -.993 -.883l-.007 -.117l.001 -9.536a1 1 0 0 1 .5 -.865a2.998 2.998 0 0 0 1.492 -2.397l.007 -.202v-1a3 3 0 0 1 3 -3z",key:"svg-0"}],["path",{d:"M5 10a1 1 0 0 1 .993 .883l.007 .117v9a1 1 0 0 1 -.883 .993l-.117 .007h-1a2 2 0 0 1 -1.995 -1.85l-.005 -.15v-7a2 2 0 0 1 1.85 -1.995l.15 -.005h1z",key:"svg-1"}]],$T=st("filled","thumb-up-filled","ThumbUpFilled",GT),jp=t=>t?t>=1e3?(t/1e3).toFixed(1)+"k":t.toString():"0",YT={backgroundColor:"rgba(18, 18, 22, 0.5)",border:"1px solid rgba(39, 39, 42, 0.4)",cursor:"pointer",transition:"transform 0.25s cubic-bezier(0.165, 0.84, 0.44, 1), box-shadow 0.25s ease, background-color 0.25s ease",height:"100%",display:"flex",flexDirection:"column",overflow:"hidden",backdropFilter:"blur(8px)",fontFamily:'"Roboto", sans-serif'},KT={position:"absolute",bottom:0,left:0,right:0,height:"20%",background:"linear-gradient(to top, rgba(9, 9, 11, 0.9), transparent)",pointerEvents:"none"},QT={position:"absolute",inset:0,zIndex:1,background:"linear-gradient(90deg, #27272a 0%, #3f3f46 50%, #27272a 100%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"},JT={root:{textTransform:"none",backgroundColor:"rgba(255, 167, 38, 0.25)",color:"#ffcc80",fontWeight:500,padding:"0 12px",height:"26px",fontSize:"14px",fontFamily:"Roboto, sans-serif"}};if(typeof document<"u"&&!document.getElementById("shimmer-styles")){const t=document.createElement("style");t.id="shimmer-styles",t.textContent="@keyframes shimmer { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }",document.head.appendChild(t)}if(typeof document<"u"&&!document.getElementById("roboto-font")){const t=document.createElement("link");t.id="roboto-font",t.rel="stylesheet",t.href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;600;700&display=swap",document.head.appendChild(t)}const XT=R.memo(function({character:e,onOpen:n}){const[i,s]=R.useState(e.image),[l,c]=R.useState(!0),u=R.useRef(!1),d=R.useRef(!1),[p,y]=R.useState(e.likes??0),[b,v]=R.useState(e.favorites_count??0),[x,k]=R.useState(e.chats_count??0),{ref:C,inView:E}=Kw({triggerOnce:!0,threshold:.1,rootMargin:"200px"});R.useEffect(()=>{if(!(!E||u.current)&&e.file_id&&(!i||!i.includes("apiroleplay.capyhub.su"))){u.current=!0;let L=!0;return c(!0),Lt(`/v1/characters/photo?file_id=${e.file_id}`).then(W=>{if(L&&W.path){const $=`https://apiroleplay.capyhub.su/${W.path}`;s($),e.image=$}}).catch(W=>console.error(`Failed to load photo for ${e.name}`,W)),()=>{L=!1}}},[E,e.file_id,e.name,e.image,i]),R.useEffect(()=>{if(!E||d.current)return;d.current=!0;let L=!0;const W=e.id,$=Math.random()*500,ne=setTimeout(()=>{Lt(`/v1/characters/stats?public_id=${W}`).then(ve=>{L&&(v(ve.favorites_count),k(ve.selected_count))}).catch(()=>{}),Lt(`/v1/characters/reactions/count/${W}`).then(ve=>{L&&y(ve.likes_count)}).catch(()=>{})},$);return()=>{L=!1,clearTimeout(ne)}},[E,e.id]),R.useEffect(()=>{y(L=>e.likes??L),v(L=>e.favorites_count??L),k(L=>e.chats_count??L)},[e.likes,e.favorites_count,e.chats_count]);const M=R.useCallback(()=>c(!1),[]),_=R.useCallback(L=>{Object.assign(L.currentTarget.style,{transform:"translateY(-4px)",boxShadow:"0 10px 30px -10px rgba(0, 0, 0, 0.5)",borderColor:"rgba(63, 63, 70, 0.6)",backgroundColor:"rgba(24, 24, 28, 0.7)"})},[]),N=R.useCallback(L=>{Object.assign(L.currentTarget.style,{transform:"translateY(0)",boxShadow:"none",borderColor:"rgba(39, 39, 42, 0.4)",backgroundColor:"rgba(18, 18, 22, 0.5)"})},[]),B=R.useCallback(()=>{n()},[n]);return m.jsxs(En,{ref:C,onClick:B,padding:"0",radius:"lg",style:YT,onMouseEnter:_,onMouseLeave:N,children:[m.jsxs(de,{style:{position:"relative",backgroundColor:"#18181b"},children:[l&&m.jsx(de,{style:QT}),m.jsx(Tx,{ratio:1/1,children:m.jsx(Eo,{src:i,alt:e.name,loading:"lazy",onLoad:M,style:{objectFit:"contain",width:"100%",height:"100%",opacity:l?0:1,transition:"opacity 0.2s ease"}})}),m.jsx(de,{style:KT})]}),m.jsxs(de,{p:"sm",style:{display:"flex",flexDirection:"column",flex:1},children:[m.jsx(P,{fw:700,size:"lg",c:"#ffffff",lineClamp:1,mb:4,title:e.name,style:{fontFamily:"Roboto, sans-serif"},children:e.name}),m.jsx(P,{size:"md",c:"#e4e4e7",lineClamp:2,mb:"xs",style:{lineHeight:1.4,flex:1,fontFamily:"Roboto, sans-serif"},children:e.description||" "}),m.jsxs(de,{mt:"auto",children:[m.jsxs(He,{gap:"sm",mb:8,style:{color:"#d4d4d8",fontFamily:"Roboto, sans-serif"},children:[m.jsxs(He,{gap:5,align:"center",title:"",children:[m.jsx(cf,{size:18,stroke:1.5,style:{color:"#42a5f5"}}),m.jsx(P,{size:"md",fw:600,children:jp(x)})]}),m.jsxs(He,{gap:5,align:"center",title:"",children:[m.jsx($T,{size:16,style:{color:"#66bb6a"}}),m.jsx(P,{size:"md",fw:600,children:jp(p)})]}),m.jsxs(He,{gap:5,align:"center",title:" ",children:[m.jsx(uf,{size:16,style:{color:"#fdd835"}}),m.jsx(P,{size:"md",fw:600,children:jp(b)})]})]}),m.jsx(He,{gap:6,style:{flexWrap:"wrap"},children:e.tags?.map((L,W)=>m.jsx(Er,{variant:"filled",radius:"sm",size:"sm",styles:JT,children:L},W))})]})]})]})}),ZT={content:{backgroundColor:"#2b2b2b",borderRadius:"16px",overflow:"hidden"},body:{padding:0,display:"flex",flexDirection:"column"}},eM={position:"absolute",bottom:0,left:0,right:0,height:"80px",background:"linear-gradient(to bottom, transparent, rgba(43, 43, 43, 0.98))",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-end",paddingBottom:"12px",pointerEvents:"none",zIndex:10,gap:"4px"},tM={animation:"bounceDown 1.5s ease-in-out infinite",color:"rgba(255, 255, 255, 0.9)"},nM={fontSize:"12px",color:"rgba(255, 255, 255, 0.6)",fontWeight:500},rM={backgroundColor:"#2b2b2b",padding:"12px 24px 16px",borderTop:"1px solid rgba(255, 255, 255, 0.1)",flexShrink:0},iM={backgroundColor:"rgba(0, 0, 0, 0.5)",color:"white",padding:"8px",minWidth:"auto",height:"auto"},oM={radius:"sm",blur:2,backgroundOpacity:.5,color:"#2b2b2b"},sM={borderTopLeftRadius:"16px",borderTopRightRadius:"16px",overflow:"hidden",backgroundColor:"#1a1a1a"},lM={objectFit:"contain",width:"100%",height:"100%"},aM={backgroundColor:"rgba(255, 255, 255, 0.06)",borderRadius:"14px",border:"1px solid rgba(255, 255, 255, 0.08)",boxShadow:"inset 0 1px 0 rgba(255, 255, 255, 0.05)"},cM={backgroundColor:"rgba(255, 255, 255, 0.04)",borderRadius:"12px",padding:"12px 16px"},uM={fontFamily:'"Roboto", sans-serif',letterSpacing:"-0.01em"},fM={backgroundColor:"rgba(239, 68, 68, 0.1)",borderRadius:"12px",border:"1px solid rgba(239, 68, 68, 0.3)",padding:"16px"},dM="https://apiroleplay.capyhub.su/",Hu=R.memo(({icon:t,count:e,label:n})=>m.jsxs(de,{ta:"center",children:[m.jsxs(He,{gap:4,justify:"center",children:[t,m.jsx(P,{c:"white",size:"sm",fw:600,children:e})]}),m.jsx(P,{c:"dimmed",size:"xs",children:n})]})),hM=R.memo(function({character:e,opened:n,onClose:i,onCharacterUpdate:s,onStartChat:l,onCharacterDelete:c,filterType:u}){const[d,p]=R.useState(""),[y,b]=R.useState(!1),[v,x]=R.useState(0),[k,C]=R.useState(null),[E,M]=R.useState(0),[_,N]=R.useState(0),[B,L]=R.useState(0),[W,$]=R.useState(!1),[ne,ve]=R.useState(!1),[qe,Te]=R.useState(!1),[ye,lt]=R.useState(!1),[Qe,Le]=R.useState(!1),[F,X]=R.useState(null),[be,we]=R.useState(!0),te=R.useRef(e),xe=R.useRef(null),ee=R.useRef(null),re=u==="created";R.useEffect(()=>{te.current=e},[e]),R.useEffect(()=>{if(!e||!n||xe.current===e.id)return;xe.current=e.id,Te(!1),lt(!1),Le(!1),X(null),$(e.is_favorited||!1),L(e.favorites_count||0),x(e.chats_count||0),C(null),M(e.likes||0),N(e.dislikes||0),e.image?.includes("apiroleplay.capyhub.su")?p(e.image):e.file_id?(b(!0),Lt(`/v1/characters/photo?file_id=${e.file_id}`).then(Oe=>{const et=`${dM}/${Oe.path}`;p(et)}).catch(Oe=>console.error("Error loading modal photo",Oe)).finally(()=>b(!1))):p(e.image||"");const Be=e.id;Lt(`/v1/characters/stats?public_id=${Be}`).then(Oe=>{L(Oe.favorites_count),x(Oe.selected_count)}).catch(Oe=>console.error("Error loading character stats",Oe)),Lt(`/v1/characters/reactions/status/${Be}`).then(C).catch(Oe=>console.error("Error loading reaction status",Oe)),Lt(`/v1/characters/reactions/count/${Be}`).then(Oe=>{M(Oe.likes_count),N(Oe.dislikes_count)}).catch(Oe=>console.error("Error loading likes count",Oe))},[e?.id,n]),R.useEffect(()=>{n||(xe.current=null,Le(!1),X(null),we(!0))},[n]);const Xe=R.useCallback(Be=>{Be.y>50&&we(!1)},[]),St=R.useCallback((Be={})=>{const Oe=te.current;return Oe?{...Oe,likes:E,dislikes:_,favorites_count:B,chats_count:v,is_favorited:W,is_liked:k?.is_liked||!1,...Be}:null},[E,_,B,v,W,k]),Yt=R.useCallback(async Be=>{const Oe=te.current;if(!Oe)return;const et=Be==="like",Ar=k,Xn=E,yr=_,Xt=et?k?.is_liked:k?.is_disliked,Un=et?k?.is_disliked:k?.is_liked;let Zn=E,Qr=_;Xt?et?Zn-=1:Qr-=1:(et?Zn+=1:Qr+=1,Un&&(et?Qr-=1:Zn-=1)),M(Zn),N(Qr);const Zt=et?!Xt:!1,Jr=et?!1:!Xt;C({public_id:Oe.id,is_liked:Zt,is_disliked:Jr});const Ro=St({likes:Zn,dislikes:Qr,is_liked:Zt});Ro&&s?.(Ro);try{const _r=await Lt(`/v1/characters/reactions/${Be}`,{method:"POST",body:JSON.stringify({public_id:Oe.id})});C({public_id:_r.public_id,is_liked:_r.is_liked,is_disliked:_r.is_disliked})}catch(_r){console.error(`Failed to set ${Be}:`,_r),M(Xn),N(yr),C(Ar);const gn=St({likes:Xn,dislikes:yr,is_liked:Ar?.is_liked||!1});gn&&s?.(gn)}},[k,E,_,s,St]),Kr=R.useCallback(()=>Yt("like"),[Yt]),sn=R.useCallback(()=>Yt("dislike"),[Yt]),gr=R.useCallback(async()=>{const Be=te.current;if(!Be)return;const Oe=W,et=B,Ar=!W,Xn=Ar?B+1:B-1;$(Ar),L(Xn),ve(!0);const yr=St({is_favorited:Ar,favorites_count:Xn});yr&&s?.(yr);try{const Xt=await Lt(`/v1/characters/favorite/${Be.id}`,{method:"POST"});if(Xt.success){$(Xt.is_favorite);const Un=Xt.is_favorite?et+1:et-1;L(Un);const Zn=St({is_favorited:Xt.is_favorite,favorites_count:Un});Zn&&s?.(Zn)}}catch(Xt){console.error("Failed to toggle favorite:",Xt),$(Oe),L(et);const Un=St({is_favorited:Oe,favorites_count:et});Un&&s?.(Un)}finally{ve(!1)}},[W,B,s,St]),Hn=R.useCallback(async()=>{const Be=te.current;if(Be){Te(!0);try{const Oe=await Lt(`/v1/characters/${Be.id}/select`,{method:"POST"});if(Oe.detail==="BOT_BLOCKED"){Tt.showAlert(",  ?   ...     ,      ? "),Te(!1);return}if(Oe.detail==="MESSAGE_SEND_PERMISSION"){Tt.showAlert("   ,     !  :) "),Tt.requestWriteAccess(et=>{et?Hn():(Tt.showAlert(" ....      "),Te(!1))}),Te(!1);return}if(Oe.detail==="CHAT_NOT_FOUND"){Tt.showAlert(",   !     ?"),Tt.requestWriteAccess(et=>{et?Hn():(Tt.showAlert("      "),Te(!1))}),Te(!1);return}l?.(Be.id),Tt.close()}catch(Oe){console.error("Failed to start chat with character:",Oe),Tt.showAlert("-        .   ")}finally{Te(!1)}}},[l]),Jn=R.useCallback(()=>{Le(!0),X(null)},[]),ji=R.useCallback(()=>{Le(!1),X(null)},[]),Oi=R.useCallback(async()=>{const Be=te.current;if(Be){lt(!0),X(null);try{await Lt(`/v1/characters/${Be.id}`,{method:"DELETE"}),c?.(Be.id),i()}catch(Oe){console.error("Failed to delete character:",Oe),Oe?.status===403||Oe?.message?.includes("403")?Oe?.message?.includes("users are using it")||Oe?.detail?.includes("users are using it")?X("   :    50  .   ."):X("       ."):X("   .  .")}finally{lt(!1)}}},[c,i]);return e?m.jsxs(Ei,{opened:n,onClose:i,size:"lg",centered:!0,withCloseButton:!1,styles:ZT,children:[m.jsx("style",{children:`
          @keyframes bounceDown {
            0%, 100% { transform: translateY(0); opacity: 0.7; }
            50% { transform: translateY(6px); opacity: 1; }
          }
        `}),m.jsxs(de,{pos:"relative",style:{display:"flex",flexDirection:"column",maxHeight:"80vh",height:"80vh"},children:[m.jsx(IE,{type:"auto",viewportRef:ee,onScrollPositionChange:Xe,style:{flex:1,minHeight:0},children:m.jsxs(de,{pos:"relative",children:[m.jsx(de,{style:{position:"absolute",top:16,right:16,zIndex:10},children:m.jsx(Pe,{variant:"subtle",color:"gray",size:"sm",onClick:i,style:iM,children:""})}),m.jsxs(de,{pos:"relative",style:{minHeight:200,...sM},children:[m.jsx($m,{visible:y,zIndex:5,overlayProps:oM}),m.jsx(Tx,{ratio:1/1,children:m.jsx(Eo,{src:d,alt:e.name,fallbackSrc:"https://placehold.co/600x600/1a1a1a/666?text=No+Image",style:lM})}),be&&m.jsxs(de,{style:eM,children:[m.jsx(P,{style:nM,children:" "}),m.jsx(Hx,{size:24,style:tM})]})]}),m.jsxs(Ae,{gap:"md",p:"xl",pb:"md",children:[m.jsx(P,{c:"white",size:"xl",fw:700,ta:"center",style:uM,children:e.name}),m.jsx(de,{style:cM,children:m.jsxs(He,{justify:"space-around",children:[m.jsx(Hu,{icon:m.jsx(D1,{size:18,color:"#66bb6a"}),count:E,label:""}),m.jsx(Hu,{icon:m.jsx(R1,{size:18,color:"#ef5350"}),count:_,label:""}),m.jsx(Hu,{icon:m.jsx(gm,{size:18,color:"#fdd835"}),count:B,label:" "}),m.jsx(Hu,{icon:m.jsx(cf,{size:18,color:"#42a5f5"}),count:v,label:""})]})}),m.jsxs(He,{justify:"center",gap:"sm",children:[m.jsx(Pe,{leftSection:m.jsx(D1,{size:18}),variant:k?.is_liked?"filled":"light",color:"green",onClick:Kr,loading:!k,radius:"md",children:""}),m.jsx(Pe,{leftSection:m.jsx(R1,{size:18}),variant:k?.is_disliked?"filled":"light",color:"red",onClick:sn,loading:!k,radius:"md",children:""})]}),m.jsxs(de,{p:"md",style:aM,children:[m.jsx(P,{c:"dimmed",size:"xs",tt:"uppercase",fw:600,mb:"xs",style:{letterSpacing:"0.05em"},children:" "}),m.jsx(P,{c:"#e4e4e7",size:"sm",style:{lineHeight:1.7},children:e.description||" ."})]}),Qe&&m.jsxs(de,{style:fM,children:[m.jsxs(P,{c:"white",size:"sm",fw:500,mb:"sm",children:[' ,     "',e.name,'"?']}),m.jsx(P,{c:"dimmed",size:"xs",mb:"md",children:"   .     ."}),F&&m.jsx(P,{c:"red.4",size:"sm",mb:"md",children:F}),m.jsxs(He,{gap:"sm",children:[m.jsx(Pe,{variant:"filled",color:"red",size:"sm",onClick:Oi,loading:ye,children:", "}),m.jsx(Pe,{variant:"light",color:"gray",size:"sm",onClick:ji,disabled:ye,children:""})]})]}),m.jsxs(Ae,{gap:"sm",children:[m.jsx(Pe,{leftSection:W?m.jsx(uf,{size:20}):m.jsx(gm,{size:20}),size:"md",variant:W?"filled":"light",color:"yellow",fullWidth:!0,radius:"md",onClick:gr,loading:ne,children:W?"  ":" "}),re&&!Qe&&m.jsx(Pe,{leftSection:m.jsx(qT,{size:20}),size:"md",variant:"outline",color:"red",fullWidth:!0,radius:"md",onClick:Jn,children:" "})]})]})]})}),m.jsx(de,{style:rM,children:m.jsx(Pe,{leftSection:m.jsx(cf,{size:20}),size:"md",variant:"filled",color:"blue",fullWidth:!0,radius:"md",onClick:Hn,loading:qe,styles:{root:{fontWeight:600,boxShadow:"0 -2px 12px rgba(28, 126, 214, 0.35)"}},children:" "})})]})]}):null});function id(){const t=Bl(),[e,n]=R.useState(!1),i=new Date().getFullYear(),[s,l]=R.useState(!1),[c,u]=R.useState(""),d=["https://testapi.capyhub.su/photo/capy/1.jpg","https://testapi.capyhub.su/photo/capy/2.jpeg","https://testapi.capyhub.su/photo/capy/3.jpeg","https://testapi.capyhub.su/photo/capy/4.jpeg","https://testapi.capyhub.su/photo/capy/5.jpeg","https://testapi.capyhub.su/photo/capy/6.webp"],p=()=>{const M=Math.floor(Math.random()*d.length);return d[M]},[y,b]=R.useState(!1),[v,x]=R.useState(!1);R.useEffect(()=>(()=>{const N=localStorage.getItem("tg_ad_viewed_at"),B=4320*60*1e3;let L=!1;if(!N)L=!0;else{const{timestamp:W}=JSON.parse(N);new Date().getTime()-W>B&&(L=!0)}if(L){const W=setTimeout(()=>{x(!0)},2e4);return()=>clearTimeout(W)}})(),[]);const k=(M="close")=>{x(!1),localStorage.setItem("tg_ad_viewed_at",JSON.stringify({timestamp:new Date().getTime()})),M==="subscribe"&&Tt.openTelegramLink("https://t.me/AI_RolePlay_TG")},C={backgroundColor:"rgb(41, 41, 41)",borderRadius:"12px",padding:"12px 16px",cursor:"pointer",transition:"background-color 0.2s ease"},E={background:"linear-gradient(90deg, #2AABEE 0%, #229ED9 100%)",borderRadius:"12px",padding:"12px 16px",cursor:"pointer",boxShadow:"0 4px 15px rgba(34, 158, 217, 0.4)",transition:"transform 0.1s ease"};return m.jsxs(m.Fragment,{children:[m.jsx(de,{style:{backgroundColor:"rgb(28, 28, 28)",borderBottom:"1px solid rgb(28, 28, 28)",padding:"16px",position:"sticky",top:0,zIndex:100},children:m.jsxs(He,{justify:"space-between",children:[m.jsx(P,{size:"xl",fw:700,c:"white",children:" "}),m.jsx(HE,{opened:e,onClick:()=>n(!e),color:"white"})]})}),m.jsx(UE,{opened:e,onClose:()=>n(!1),position:"right",padding:"md",size:"300px",styles:{content:{backgroundColor:"rgb(28, 28, 28)"},header:{backgroundColor:"rgb(28, 28, 28)"},close:{color:"white"}},children:m.jsxs(Ae,{justify:"space-between",h:"calc(100vh - 80px)",children:[m.jsxs(Ae,{gap:"md",children:[m.jsx(de,{style:C,onClick:()=>{n(!1),t("/")},children:m.jsx(P,{c:"white",size:"lg",children:" "})}),m.jsx(de,{style:C,onClick:()=>{n(!1),t("/create")},children:m.jsx(P,{c:"white",size:"lg",children:"  "})}),m.jsx(de,{style:C,onClick:()=>{n(!1),t("/profile")},children:m.jsx(P,{c:"white",size:"lg",children:" "})}),m.jsx(de,{style:C,onClick:()=>{n(!1),t("/tariffs")},children:m.jsx(P,{c:"white",size:"lg",children:" "})}),m.jsx(de,{style:C,onClick:()=>{u(p()),l(!0)},children:m.jsx(P,{c:"white",size:"lg",children:"  ?"})}),m.jsx(de,{style:C,onClick:()=>{n(!1),b(!0)},children:m.jsx(P,{c:"white",size:"lg",children:"  "})}),m.jsxs(de,{style:E,onClick:()=>{n(!1),Tt.openTelegramLink("https://t.me/AI_RolePlay_TG")},children:[m.jsxs(He,{justify:"space-between",children:[m.jsx(P,{c:"white",size:"lg",fw:700,children:"  Telegram"}),m.jsx(P,{size:"xl",children:""})]}),m.jsx(P,{c:"white",size:"xs",opacity:.9,mt:4,children:"  "})]})]}),m.jsxs(Ae,{gap:"xs",align:"center",children:[m.jsx(Mx,{href:"https://t.me/aiogram_tgbots",c:"white",size:"sm",underline:"hover",target:"_blank",children:""}),m.jsxs(P,{size:"xs",c:"dimmed",ta:"center",children:[" ",i,"   "]})]})]})}),m.jsx(Ei,{opened:s,onClose:()=>l(!1),centered:!0,size:"lg",styles:{content:{backgroundColor:"rgb(28, 28, 28)"},header:{backgroundColor:"rgb(28, 28, 28)"},close:{color:"white"}},children:m.jsxs(Ae,{align:"center",gap:"md",children:[m.jsx(Eo,{src:c,alt:"",radius:"md",style:{maxWidth:"100%"}}),m.jsx(P,{c:"white",ta:"center",children:"      .     :)"})]})}),m.jsx(Ei,{opened:y,onClose:()=>b(!1),centered:!0,size:"lg",title:m.jsx(P,{c:"white",size:"xl",fw:700,children:"  "}),styles:{content:{backgroundColor:"rgb(28, 28, 28)"},header:{backgroundColor:"rgb(28, 28, 28)"},close:{color:"white"},title:{color:"white"}},children:m.jsxs(Ae,{gap:"xl",children:[m.jsx(P,{c:"white",size:"lg",ta:"center",fw:600,children:" "}),m.jsxs(He,{justify:"center",gap:"xl",children:[m.jsxs(Ae,{align:"center",gap:"md",style:{maxWidth:"200px"},children:[m.jsx(Eo,{src:"https://testapi.capyhub.su/photo/father/1.jpg",alt:" ",radius:"50%",w:150,h:150,fit:"cover"}),m.jsx(P,{c:"white",size:"lg",fw:600,ta:"center",children:" "}),m.jsx(P,{c:"dimmed",size:"sm",ta:"center",children:"    ,  ."})]}),m.jsxs(Ae,{align:"center",gap:"md",style:{maxWidth:"200px"},children:[m.jsx(Eo,{src:"https://testapi.capyhub.su/photo/father/2.jpg",alt:"",radius:"50%",w:150,h:150,fit:"cover"}),m.jsx(P,{c:"white",size:"lg",fw:600,ta:"center",children:""}),m.jsx(P,{c:"dimmed",size:"sm",ta:"center",children:"    ,   ."})]})]})]})}),m.jsx(Ei,{opened:v,onClose:()=>k("close"),centered:!0,withCloseButton:!1,size:"sm",padding:"0",radius:"xl",styles:{content:{backgroundColor:"rgb(32, 32, 32)",border:"1px solid rgb(45, 45, 45)",overflow:"visible"},overlay:{backgroundColor:"rgba(0, 0, 0, 0.7)",backdropFilter:"blur(3px)"}},children:m.jsxs(de,{pos:"relative",children:[m.jsx(de,{h:110,style:{background:"radial-gradient(circle at top right, #2AABEE 0%, #0077B5 100%)",borderRadius:"var(--mantine-radius-xl) var(--mantine-radius-xl) 0 0"}}),m.jsx(de,{style:{position:"absolute",top:50,left:"50%",transform:"translateX(-50%)",borderRadius:"50%",padding:"6px",backgroundColor:"rgb(32, 32, 32)",boxShadow:"0 -4px 12px rgba(0,0,0,0.2)"},children:m.jsx(Ax,{size:80,radius:"50%",variant:"gradient",gradient:{from:"#2AABEE",to:"#229ED9",deg:135},style:{boxShadow:"0 8px 20px rgba(42, 171, 238, 0.4)"},children:m.jsx(P,{size:wt(42),children:""})})}),m.jsxs(Ae,{px:"xl",pt:60,pb:"lg",align:"center",gap:"xs",children:[m.jsxs(P,{ta:"center",fw:900,size:wt(24),c:"white",style:{lineHeight:1.1},children:["! ",m.jsx("br",{}),m.jsx(P,{span:!0,variant:"gradient",gradient:{from:"yellow",to:"orange",deg:45},children:" ?"})]}),m.jsxs(P,{c:"dimmed",ta:"center",size:"sm",mt:"xs",lh:1.4,children:["  ,      . ",m.jsx("br",{}),m.jsx("b",{children:",    !"})]}),m.jsxs(Ae,{w:"100%",mt:"lg",gap:"sm",children:[m.jsx(Pe,{fullWidth:!0,size:"md",variant:"gradient",gradient:{from:"#2AABEE",to:"#0088cc",deg:90},radius:"xl",onClick:()=>k("subscribe"),styles:{root:{boxShadow:"0 4px 12px rgba(42, 171, 238, 0.3)"}},children:"   "}),m.jsx(Pe,{variant:"subtle",color:"gray",size:"sm",radius:"xl",onClick:()=>k("close"),children:"  "})]})]})]})})]})}function pM({onSearch:t}){const e=[": walter white",": genshin impact",":  ",": "],[n,i]=R.useState(e[Math.floor(Math.random()*e.length)]),[s,l]=R.useState(""),c=/^[a-zA-Z--0-9\s]*$/;R.useEffect(()=>{const b=setInterval(()=>{i(e[Math.floor(Math.random()*e.length)])},3e3);return()=>clearInterval(b)},[]);const u=b=>{const v=b.currentTarget.value;v.length<=20&&c.test(v)&&l(v)},d=()=>{t(s.trim())},p=b=>{b.key==="Enter"&&d()},y=()=>{l(""),t("")};return m.jsxs(He,{gap:"xs",mt:"xs",px:"md",children:[m.jsx(Ym,{value:s,onChange:u,onKeyDown:p,placeholder:n,size:"md",style:{flex:1},rightSection:s&&m.jsx(qE,{size:"sm",onClick:y}),styles:{input:{backgroundColor:"#2d2d2d",color:"white",borderColor:"#444",borderRadius:wt(24),paddingLeft:wt(20),paddingRight:wt(20),"&::placeholder":{color:"white",opacity:.7}}}}),m.jsx(bo,{size:42,radius:"xl",variant:"filled",color:"blue",onClick:d,loading:!1,children:m.jsx(NT,{style:{width:wt(20),height:wt(20)},stroke:1.5})})]})}function mM({selectedTags:t,onTagsChange:e,currentFilterType:n,onFilterTypeChange:i,sortBy:s,onSortChange:l,nsfwEnabled:c,onNsfwChange:u,selectedGender:d,onGenderChange:p}){const[y,b]=R.useState(!1),[v,x]=R.useState(!1),[k,C]=R.useState([]),[E,M]=R.useState(!1),[_,N]=R.useState(!1);R.useEffect(()=>{(async()=>{M(!0),N(!1);try{const ye=await Lt("/v1/characters/tags");C(ye.tags)}catch(ye){console.error("   :",ye),N(!0)}finally{M(!1)}})()},[]);const B=()=>{c?u(!1):localStorage.getItem("nsfw_accepted")==="true"?u(!0):x(!0)},L=()=>{localStorage.setItem("nsfw_accepted","true"),u(!0),x(!1)},W=Te=>{if(t.includes(Te))e(t.filter(ye=>ye!==Te));else{if(t.length>=5)return;e([...t,Te])}},$=()=>{switch(n){case"favorite":return"";case"created":return" ";case"selected":return" ";case"all":default:return" "}},ne=()=>{switch(s){case"top_liked":return" ()";case"top_disliked":return"";case"none":default:return" "}},ve=()=>{switch(d){case"":return"";case"":return"";default:return""}},qe={root:{backgroundColor:"#2a2a2a",color:"#e0e0e0",borderRadius:"15px",padding:"2px 12px",height:"32px",fontSize:"13px",border:"1px solid #3a3a3a",transition:"all 0.15s ease","&:hover":{backgroundColor:"#3a3a3a",borderColor:"#4a4a4a",transform:"translateY(-1px)"}}};return m.jsxs(m.Fragment,{children:[m.jsx("style",{children:`
                    .dark-menu-item {
                        color: white !important;
                        background-color: transparent !important;
                    }
                    .dark-menu-item:hover,
                    .dark-menu-item[data-hovered] {
                        background-color: #1c7ed6 !important;
                    }
                `}),m.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"0px 5px"},children:m.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",backgroundColor:"#1a1a1a",padding:"8px 15px",borderRadius:"20px",alignItems:"center",justifyContent:"center"},children:[m.jsx("div",{style:{display:"flex",alignItems:"center",color:"#888",marginRight:"4px"},children:m.jsx(Zw,{size:18,stroke:1.5})}),m.jsxs(yt,{shadow:"md",width:200,children:[m.jsx(yt.Target,{children:m.jsxs(Pe,{styles:qe,leftSection:m.jsx(sT,{size:14}),children:[ne()," ",m.jsx("span",{style:{marginLeft:"4px",fontSize:"10px"},children:""})]})}),m.jsxs(yt.Dropdown,{styles:{dropdown:{backgroundColor:"#2a2a2a",border:"1px solid #3a3a3a"}},children:[m.jsx(yt.Item,{onClick:()=>l("none"),className:"dark-menu-item",children:" "}),m.jsx(yt.Divider,{style:{borderColor:"#3a3a3a"}}),m.jsx(yt.Item,{onClick:()=>l("top_liked"),className:"dark-menu-item",children:" ( )"}),m.jsx(yt.Divider,{style:{borderColor:"#3a3a3a"}}),m.jsx(yt.Item,{onClick:()=>l("top_disliked"),className:"dark-menu-item",children:" ( )"})]})]}),m.jsxs(yt,{shadow:"md",width:200,children:[m.jsx(yt.Target,{children:m.jsxs(Pe,{leftSection:m.jsx(ST,{size:14}),styles:{root:{backgroundColor:d?"#1c7ed6":"#2a2a2a",color:d?"white":"#e0e0e0",borderRadius:"15px",padding:"2px 12px",height:"32px",fontSize:"13px",border:d?"1px solid #1c7ed6":"1px solid #3a3a3a",transition:"all 0.15s ease","&:hover":{backgroundColor:d?"#1864ab":"#3a3a3a",borderColor:d?"#1864ab":"#4a4a4a",transform:"translateY(-1px)"}}},children:[ve()," ",m.jsx("span",{style:{marginLeft:"4px",fontSize:"10px"},children:""})]})}),m.jsxs(yt.Dropdown,{styles:{dropdown:{backgroundColor:"#2a2a2a",border:"1px solid #3a3a3a"}},children:[m.jsx(yt.Item,{onClick:()=>p(null),className:"dark-menu-item",children:""}),m.jsx(yt.Divider,{style:{borderColor:"#3a3a3a"}}),m.jsx(yt.Item,{onClick:()=>p(""),className:"dark-menu-item",children:""}),m.jsx(yt.Divider,{style:{borderColor:"#3a3a3a"}}),m.jsx(yt.Item,{onClick:()=>p(""),className:"dark-menu-item",children:""})]})]}),!_&&m.jsxs(m.Fragment,{children:[m.jsx(Pe,{onClick:()=>b(!0),leftSection:m.jsx(BT,{size:14}),styles:{root:{backgroundColor:t.length>0?"#1c7ed6":"#2a2a2a",color:t.length>0?"white":"#e0e0e0",borderRadius:"15px",padding:"2px 12px",height:"32px",fontSize:"13px",border:t.length>0?"1px solid #1c7ed6":"1px solid #3a3a3a",transition:"all 0.15s ease","&:hover":{backgroundColor:t.length>0?"#1864ab":"#3a3a3a",borderColor:t.length>0?"#1864ab":"#4a4a4a",transform:"translateY(-1px)"}}},children:t.length>0?` (${t.length})`:""}),m.jsx(Ei,{opened:y,onClose:()=>b(!1),title:`  (${t.length}/5)`,centered:!0,styles:{content:{backgroundColor:"#2a2a2a"},header:{backgroundColor:"#2a2a2a",color:"white"},body:{backgroundColor:"#2a2a2a"}},children:E?m.jsx(de,{style:{display:"flex",justifyContent:"center",padding:"20px"},children:m.jsx(pc,{color:"blue"})}):m.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"10px"},children:[k.map(Te=>{const ye=t.includes(Te),lt=!ye&&t.length>=5;return m.jsx(Pe,{onClick:()=>W(Te),disabled:lt,styles:{root:{backgroundColor:ye?"#1c7ed6":"#3a3a3a",color:lt?"#666":"white",borderRadius:"20px",border:"none",opacity:lt?.5:1,cursor:lt?"not-allowed":"pointer","&:hover":{backgroundColor:ye?"#1864ab":lt?"#3a3a3a":"#4a4a4a"}}},children:Te},Te)}),k.length===0&&m.jsx(P,{c:"dimmed",children:"  "})]})})]}),m.jsxs(yt,{shadow:"md",width:200,children:[m.jsx(yt.Target,{children:m.jsxs(Pe,{leftSection:m.jsx(PT,{size:14}),styles:{root:{backgroundColor:n!=="all"?"#1c7ed6":"#2a2a2a",color:n!=="all"?"white":"#e0e0e0",borderRadius:"15px",padding:"2px 12px",height:"32px",fontSize:"13px",border:n!=="all"?"1px solid #1c7ed6":"1px solid #3a3a3a",transition:"all 0.15s ease","&:hover":{backgroundColor:n!=="all"?"#1864ab":"#3a3a3a",borderColor:n!=="all"?"#1864ab":"#4a4a4a",transform:"translateY(-1px)"}}},children:[$()," ",m.jsx("span",{style:{marginLeft:"4px",fontSize:"10px"},children:""})]})}),m.jsxs(yt.Dropdown,{styles:{dropdown:{backgroundColor:"#2a2a2a",border:"1px solid #3a3a3a"}},children:[m.jsx(yt.Item,{onClick:()=>i("all"),className:"dark-menu-item",children:" "}),m.jsx(yt.Divider,{style:{borderColor:"#3a3a3a"}}),m.jsx(yt.Item,{onClick:()=>i("favorite"),className:"dark-menu-item",children:" "}),m.jsx(yt.Divider,{style:{borderColor:"#3a3a3a"}}),m.jsx(yt.Item,{onClick:()=>i("created"),className:"dark-menu-item",children:"  "}),m.jsx(yt.Divider,{style:{borderColor:"#3a3a3a"}}),m.jsx(yt.Item,{onClick:()=>i("selected"),className:"dark-menu-item",children:"  "})]})]}),m.jsx(Pe,{onClick:B,leftSection:m.jsx(vT,{size:14}),styles:{root:{backgroundColor:c?"#fa5252":"#2a2a2a",color:c?"white":"#e0e0e0",borderRadius:"15px",padding:"2px 12px",height:"32px",fontSize:"13px",border:c?"1px solid #fa5252":"1px solid #3a3a3a",transition:"all 0.15s ease","&:hover":{backgroundColor:c?"#c92a2a":"#3a3a3a",borderColor:c?"#c92a2a":"#4a4a4a",transform:"translateY(-1px)"}}},children:"18+"})]})}),m.jsxs(Ei,{opened:v,onClose:()=>x(!1),title:" ",centered:!0,styles:{content:{backgroundColor:"#2a2a2a",color:"white"},header:{backgroundColor:"#2a2a2a",color:"white"}},children:[m.jsx(P,{size:"sm",mb:"lg",children:"   18 ?     ,    ?"}),m.jsxs(He,{justify:"flex-end",children:[m.jsx(Pe,{variant:"default",onClick:()=>x(!1),children:""}),m.jsx(Pe,{color:"red",onClick:L,children:",   18"})]})]})]})}const gM=20,yM={backgroundColor:"#111113",minHeight:"100vh",color:"#e4e4e7",paddingBottom:"4rem"},bM=`
  .custom-pagination .mantine-Pagination-control {
    background-color: #000000;
    border: 1px solid #3f3f46;
    color: #e4e4e7;
    transition: all 0.2s;
  }
  .custom-pagination .mantine-Pagination-control:not([data-active]):not([data-disabled]):hover {
    background-color: #18181b;
  }
  .custom-pagination .mantine-Pagination-control[data-active] {
    background-color: #228be6 !important;
    border-color: #228be6 !important;
    color: #ffffff !important;
  }
  .custom-pagination .mantine-Pagination-control[data-active]:hover {
    background-color: #1c7ed6 !important;
  }
  .custom-pagination .mantine-Pagination-control[data-disabled] {
    background-color: #000000 !important;
    border: 1px solid #3f3f46 !important;
    color: #52525b !important;
    opacity: 0.5;
    cursor: not-allowed;
  }
`,vM=t=>({id:t.public_id,name:t.name,description:t.description,image:t.file_id?`/api/files/${t.file_id}`:null,file_id:t.file_id,tags:t.tags??[],is_favorited:t.is_favorite,is_liked:!1,likes:t.likes_count??0,dislikes:t.dislikes_count??0,favorites_count:t.favorites_count??0,chats_count:t.chats_count??0});function B1(){const[t,e]=iw(),[n,i]=R.useState(1),[s,l]=R.useState([]),[c,u]=R.useState(!1),[d,p]=R.useState(null),[y,b]=R.useState(1),[v,x]=R.useState([]),[k,C]=R.useState(null),[E,M]=R.useState(""),[_,N]=R.useState("none"),[B,L]=R.useState(null),[W,$]=R.useState(!1),[ne,ve]=R.useState(()=>localStorage.getItem("nsfw_accepted")==="true"),[qe,Te]=R.useState(()=>t.get("filter")||"all"),[ye,lt]=R.useState(!1);R.useEffect(()=>{const ee=()=>{lt(window.scrollY>300)};return window.addEventListener("scroll",ee),()=>window.removeEventListener("scroll",ee)},[]);const Qe=R.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]),Le=R.useCallback(ee=>{Te(ee),ee==="all"?t.delete("filter"):t.set("filter",ee),e(t)},[t,e]);R.useEffect(()=>{i(1)},[v,k,qe,E,_,ne]),R.useEffect(()=>{(async()=>{u(!0),p(null);try{const re=new URLSearchParams({filter_type:qe,page:n.toString(),page_size:gM.toString(),sort_by:_,show_nsfw:ne.toString()});v.forEach(Yt=>re.append("tags",Yt)),k&&re.append("tags",k);const Xe=E.trim();Xe&&re.append("search_query",Xe);const St=await Lt(`/v1/characters/list?${re}`);b(St.total_pages),l(St.characters.map(vM))}catch(re){console.error("Failed to fetch characters:",re),p("   .")}finally{u(!1)}})(),window.scrollTo({top:0,behavior:"smooth"})},[n,v,k,qe,E,_,ne]);const F=R.useCallback(ee=>{L(ee),$(!0)},[]),X=R.useCallback(()=>$(!1),[]),be=R.useCallback(ee=>M(ee),[]),we=R.useCallback(ee=>{l(re=>re.map(Xe=>Xe.id===ee.id?ee:Xe)),L(ee)},[]),te=R.useCallback(ee=>{l(re=>re.filter(Xe=>Xe.id!==ee)),L(null)},[]),xe=R.useMemo(()=>E?`  "${E}"   `:"  ",[E]);return m.jsxs(de,{style:yM,children:[m.jsx("style",{children:bM}),m.jsx(id,{}),m.jsxs(vs,{size:"xl",pt:"md",children:[m.jsx(de,{mb:"sm",children:m.jsx(pM,{onSearch:be})}),m.jsx(de,{mb:"xl",children:m.jsx(mM,{selectedTags:v,onTagsChange:x,currentFilterType:qe,onFilterTypeChange:Le,sortBy:_,onSortChange:N,nsfwEnabled:ne,onNsfwChange:ve,selectedGender:k,onGenderChange:C})})]}),m.jsxs(vs,{size:"xl",style:{position:"relative",minHeight:"50vh"},children:[m.jsx($m,{visible:c,zIndex:1e3,overlayProps:{radius:"sm",blur:2,backgroundOpacity:.5,color:"#000"},loaderProps:{type:"bars",color:"blue"}}),d&&m.jsx(Tl,{h:200,children:m.jsx(P,{c:"red.4",size:"lg",fw:500,children:d})}),!c&&!d&&s.length===0&&m.jsxs(Tl,{h:300,style:{flexDirection:"column"},children:[m.jsx(jT,{size:48,stroke:1.5,color:"#52525b"}),m.jsx(P,{c:"dimmed",mt:"md",size:"lg",children:xe})]}),m.jsx(_x,{cols:{base:1,xs:2,sm:2,md:3,lg:4,xl:5},spacing:{base:"md",sm:"lg"},verticalSpacing:{base:"md",sm:"xl"},children:s.map(ee=>m.jsx(XT,{character:ee,onOpen:()=>F(ee)},ee.id))}),y>1&&m.jsx(Tl,{mt:50,children:m.jsx(VE,{total:y,value:n,onChange:i,size:"lg",radius:"md",withEdges:!0,withControls:!1,className:"custom-pagination"})}),m.jsx(hM,{character:B,opened:W,onClose:X,onCharacterUpdate:we,onCharacterDelete:te,filterType:qe})]}),m.jsx(PE,{mounted:ye,transition:"slide-up",duration:300,children:ee=>m.jsx(bo,{style:{...ee,position:"fixed",bottom:24,right:24,zIndex:1e3},size:48,radius:"xl",variant:"filled",color:"blue",onClick:Qe,"aria-label":" ",children:m.jsx(iT,{size:24})})})]})}function xM(){const t=Bl(),[e,n]=R.useState(null),[i,s]=R.useState(!0);if(R.useEffect(()=>(Tt.BackButton.show(),Tt.BackButton.onClick(()=>t("/")),(async()=>{try{const d=await Lt("/v1/profile/");n(d)}catch(d){console.error("  :",d)}finally{s(!1)}})(),()=>{Tt.BackButton.hide()}),[t]),i)return m.jsx(Tl,{style:{height:"100vh",background:"#1a1a1a"},children:m.jsx(pc,{size:"lg",color:"violet"})});if(!e)return m.jsx(vs,{size:"sm",py:"xl",style:{background:"#1a1a1a",minHeight:"100vh"},children:m.jsx(P,{c:"red",ta:"center",size:"lg",fw:600,style:{fontFamily:"Roboto, sans-serif"},children:"   "})});const l=Tt.initDataUnsafe.user,c=e.requests_used_today/e.daily_requests_limit*100;return m.jsxs(m.Fragment,{children:[m.jsx(id,{}),m.jsx(vs,{size:"sm",py:"lg",style:{background:"#1a1a1a",minHeight:"100vh",fontFamily:"Roboto, sans-serif"},children:m.jsxs(Ae,{gap:"lg",children:[m.jsx(qr,{p:"xl",radius:"xl",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",boxShadow:"0 8px 32px rgba(102, 126, 234, 0.3)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:m.jsxs(Ae,{align:"center",gap:"md",children:[m.jsx(WE,{src:l?.photo_url,size:90,radius:"50%",style:{border:"3px solid rgba(255, 255, 255, 0.9)",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.2)"},children:l?.first_name?.[0]}),m.jsxs(P,{size:"xl",fw:600,c:"white",ta:"center",style:{fontFamily:"Roboto, sans-serif"},children:[l?.first_name," ",l?.last_name]}),l?.username&&m.jsxs(P,{size:"md",c:"rgba(255,255,255,0.85)",ta:"center",fw:500,style:{fontFamily:"Roboto, sans-serif"},children:["@",l.username]}),m.jsxs(P,{size:"sm",c:"rgba(255,255,255,0.7)",ta:"center",fw:400,style:{fontFamily:"Roboto, sans-serif"},children:["ID: ",l?.id]})]})}),m.jsxs(qr,{p:"md",radius:"xl",style:{background:"linear-gradient(135deg, #2d2d2d 0%, #252525 100%)",border:"1px solid rgba(255, 255, 255, 0.08)",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.25)"},children:[m.jsx(P,{size:"sm",c:"#9ca3af",ta:"center",mb:"md",fw:500,style:{fontFamily:"Roboto, sans-serif"},children:"   "}),m.jsxs(He,{justify:"center",gap:"sm",children:[m.jsx(Pe,{variant:"gradient",gradient:{from:"#f59e0b",to:"#d97706"},radius:"xl",size:"md",leftSection:m.jsx(gm,{size:18}),onClick:()=>t("/?filter=favorite"),style:{fontFamily:"Roboto, sans-serif",fontWeight:600,boxShadow:"0 4px 15px rgba(245, 158, 11, 0.3)",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:u=>{u.currentTarget.style.transform="translateY(-2px)",u.currentTarget.style.boxShadow="0 6px 20px rgba(245, 158, 11, 0.4)"},onMouseLeave:u=>{u.currentTarget.style.transform="translateY(0)",u.currentTarget.style.boxShadow="0 4px 15px rgba(245, 158, 11, 0.3)"},children:""}),m.jsx(Pe,{variant:"gradient",gradient:{from:"#8b5cf6",to:"#7c3aed"},radius:"xl",size:"md",leftSection:m.jsx(RT,{size:18}),onClick:()=>t("/?filter=created"),style:{fontFamily:"Roboto, sans-serif",fontWeight:600,boxShadow:"0 4px 15px rgba(139, 92, 246, 0.3)",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:u=>{u.currentTarget.style.transform="translateY(-2px)",u.currentTarget.style.boxShadow="0 6px 20px rgba(139, 92, 246, 0.4)"},onMouseLeave:u=>{u.currentTarget.style.transform="translateY(0)",u.currentTarget.style.boxShadow="0 4px 15px rgba(139, 92, 246, 0.3)"},children:""}),m.jsx(Pe,{variant:"gradient",gradient:{from:"#06b6d4",to:"#0891b2"},radius:"xl",size:"md",leftSection:m.jsx(cf,{size:18}),onClick:()=>t("/?filter=selected"),style:{fontFamily:"Roboto, sans-serif",fontWeight:600,boxShadow:"0 4px 15px rgba(6, 182, 212, 0.3)",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:u=>{u.currentTarget.style.transform="translateY(-2px)",u.currentTarget.style.boxShadow="0 6px 20px rgba(6, 182, 212, 0.4)"},onMouseLeave:u=>{u.currentTarget.style.transform="translateY(0)",u.currentTarget.style.boxShadow="0 4px 15px rgba(6, 182, 212, 0.3)"},children:""})]})]}),m.jsx(qr,{p:"lg",radius:"xl",style:{background:"linear-gradient(135deg, #2d2d2d 0%, #252525 100%)",border:"1px solid rgba(255, 255, 255, 0.08)",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.25)"},children:m.jsxs(Ae,{gap:"md",children:[m.jsxs(He,{justify:"space-between",align:"center",children:[m.jsx(P,{size:"lg",fw:600,c:"#ffffff",style:{fontFamily:"Roboto, sans-serif"},children:""}),m.jsx(Er,{size:"lg",variant:"gradient",gradient:e.is_premium?{from:"yellow",to:"orange"}:{from:"gray",to:"dark"},style:{fontFamily:"Roboto, sans-serif",fontWeight:600,padding:"10px 16px",fontSize:"14px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.2)"},children:e.tariff_name})]}),e.is_premium&&e.subscription_end_date&&m.jsxs(de,{pt:"xs",children:[m.jsx(P,{size:"sm",c:"#9ca3af",fw:500,mb:6,style:{fontFamily:"Roboto, sans-serif"},children:" "}),m.jsx(P,{size:"md",fw:600,c:"#e5e7eb",style:{fontFamily:"Roboto, sans-serif"},children:new Date(e.subscription_end_date).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})})]})]})}),m.jsx(qr,{p:"lg",radius:"xl",style:{background:"linear-gradient(135deg, #2d2d2d 0%, #252525 100%)",border:"1px solid rgba(255, 255, 255, 0.08)",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.25)"},children:m.jsxs(Ae,{gap:"lg",children:[m.jsxs(He,{justify:"space-between",align:"center",children:[m.jsx(P,{size:"lg",fw:600,c:"#ffffff",style:{fontFamily:"Roboto, sans-serif"},children:""}),m.jsxs(Er,{size:"lg",variant:"light",color:c>80?"red":c>50?"orange":"green",style:{fontFamily:"Roboto, sans-serif",fontWeight:600,padding:"8px 14px",fontSize:"13px"},children:[Math.round(100-c),"% "]})]}),m.jsx(qr,{p:"lg",radius:"lg",style:{background:"linear-gradient(135deg, #3a3a3a 0%, #323232 100%)",border:"1px solid rgba(255, 255, 255, 0.05)",boxShadow:"0 2px 12px rgba(0, 0, 0, 0.15)"},children:m.jsxs(Ae,{gap:"md",children:[m.jsxs(He,{justify:"space-between",align:"center",children:[m.jsx(P,{size:"md",fw:600,c:"#ffffff",style:{fontFamily:"Roboto, sans-serif"},children:"  "}),m.jsxs(Er,{size:"md",variant:"filled",color:c>80?"red":c>50?"orange":"blue",style:{fontFamily:"Roboto, sans-serif",fontWeight:600,fontSize:"13px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.2)"},children:[e.requests_used_today," / ",e.daily_requests_limit]})]}),m.jsx(ef,{value:c,color:c>80?"red":c>50?"orange":"blue",size:"lg",radius:"xl",style:{boxShadow:"0 2px 10px rgba(0, 0, 0, 0.2)"}}),m.jsxs(He,{justify:"space-between",mt:4,children:[m.jsx(P,{size:"sm",c:"#c1c7cd",fw:500,style:{fontFamily:"Roboto, sans-serif"},children:"  "}),m.jsxs(P,{size:"md",fw:600,c:e.requests_remaining_today>10?"#60a5fa":"#f87171",style:{fontFamily:"Roboto, sans-serif"},children:[e.requests_remaining_today," "]})]})]})}),m.jsx(FE,{color:"rgba(255, 255, 255, 0.08)",size:"xs"}),m.jsx(qr,{p:"lg",radius:"lg",style:{background:"linear-gradient(135deg, #3a3a3a 0%, #323232 100%)",border:"1px solid rgba(255, 255, 255, 0.05)",boxShadow:"0 2px 12px rgba(0, 0, 0, 0.15)"},children:m.jsxs(He,{justify:"space-between",align:"center",wrap:"nowrap",children:[m.jsxs(de,{children:[m.jsx(P,{size:"sm",c:"#9ca3af",fw:500,mb:8,style:{fontFamily:"Roboto, sans-serif"},children:"  "}),m.jsx(P,{size:"xl",fw:600,c:"#ffffff",style:{fontFamily:"Roboto, sans-serif"},children:e.max_characters_create===null?" ":e.max_characters_create})]}),m.jsx(Er,{size:"md",variant:"light",color:e.max_characters_create===null?"green":"blue",style:{fontFamily:"Roboto, sans-serif",fontWeight:600,fontSize:"13px",padding:"8px 14px",whiteSpace:"nowrap"},children:e.max_characters_create===null?" ":` ${e.max_characters_create} .`})]})}),e.daily_photo_limit!==null&&e.daily_photo_limit>0&&m.jsx(qr,{p:"lg",radius:"lg",style:{background:"linear-gradient(135deg, #3a3a3a 0%, #323232 100%)",border:"1px solid rgba(255, 255, 255, 0.05)",boxShadow:"0 2px 12px rgba(0, 0, 0, 0.15)"},children:m.jsxs(Ae,{gap:"md",children:[m.jsxs(He,{justify:"space-between",align:"center",children:[m.jsx(P,{size:"md",fw:600,c:"#ffffff",style:{fontFamily:"Roboto, sans-serif"},children:"  "}),m.jsxs(Er,{size:"md",variant:"filled",color:e.photo_remaining_today!==null&&e.daily_photo_limit?e.photo_remaining_today/e.daily_photo_limit*100>50?"blue":e.photo_remaining_today/e.daily_photo_limit*100>20?"orange":"red":"gray",style:{fontFamily:"Roboto, sans-serif",fontWeight:600,fontSize:"13px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.2)"},children:[e.photo_used_today??0," / ",e.daily_photo_limit]})]}),m.jsx(ef,{value:e.photo_used_today!==null&&e.daily_photo_limit?e.photo_used_today/e.daily_photo_limit*100:0,color:e.photo_remaining_today!==null&&e.daily_photo_limit?e.photo_remaining_today/e.daily_photo_limit*100>50?"blue":e.photo_remaining_today/e.daily_photo_limit*100>20?"orange":"red":"gray",size:"lg",radius:"xl",style:{boxShadow:"0 2px 10px rgba(0, 0, 0, 0.2)"}}),m.jsxs(He,{justify:"space-between",mt:4,children:[m.jsx(P,{size:"sm",c:"#c1c7cd",fw:500,style:{fontFamily:"Roboto, sans-serif"},children:"  "}),m.jsxs(P,{size:"md",fw:600,c:e.photo_remaining_today!==null&&e.photo_remaining_today>5?"#60a5fa":"#f87171",style:{fontFamily:"Roboto, sans-serif"},children:[e.photo_remaining_today??0," "]})]})]})}),e.daily_voice_limit!==null&&e.daily_voice_limit>0&&m.jsx(qr,{p:"lg",radius:"lg",style:{background:"linear-gradient(135deg, #3a3a3a 0%, #323232 100%)",border:"1px solid rgba(255, 255, 255, 0.05)",boxShadow:"0 2px 12px rgba(0, 0, 0, 0.15)"},children:m.jsxs(Ae,{gap:"md",children:[m.jsxs(He,{justify:"space-between",align:"center",children:[m.jsx(P,{size:"md",fw:600,c:"#ffffff",style:{fontFamily:"Roboto, sans-serif"},children:"  "}),m.jsxs(Er,{size:"md",variant:"filled",color:e.voice_remaining_today!==null&&e.daily_voice_limit?e.voice_remaining_today/e.daily_voice_limit*100>50?"blue":e.voice_remaining_today/e.daily_voice_limit*100>20?"orange":"red":"gray",style:{fontFamily:"Roboto, sans-serif",fontWeight:600,fontSize:"13px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.2)"},children:[e.voice_used_today??0," / ",e.daily_voice_limit]})]}),m.jsx(ef,{value:e.voice_used_today!==null&&e.daily_voice_limit?e.voice_used_today/e.daily_voice_limit*100:0,color:e.voice_remaining_today!==null&&e.daily_voice_limit?e.voice_remaining_today/e.daily_voice_limit*100>50?"blue":e.voice_remaining_today/e.daily_voice_limit*100>20?"orange":"red":"gray",size:"lg",radius:"xl",style:{boxShadow:"0 2px 10px rgba(0, 0, 0, 0.2)"}}),m.jsxs(He,{justify:"space-between",mt:4,children:[m.jsx(P,{size:"sm",c:"#c1c7cd",fw:500,style:{fontFamily:"Roboto, sans-serif"},children:"  "}),m.jsxs(P,{size:"md",fw:600,c:e.voice_remaining_today!==null&&e.voice_remaining_today>5?"#60a5fa":"#f87171",style:{fontFamily:"Roboto, sans-serif"},children:[e.voice_remaining_today??0," "]})]})]})}),m.jsx(qr,{p:"lg",radius:"xl",style:{background:"linear-gradient(135deg, #0088cc 0%, #005580 100%)",border:"1px solid rgba(255, 255, 255, 0.15)",boxShadow:"0 4px 20px rgba(0, 136, 204, 0.3)",cursor:"pointer",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onClick:()=>Tt.openTelegramLink("https://t.me/AI_RolePlay_TG"),onMouseEnter:u=>{u.currentTarget.style.transform="translateY(-2px)",u.currentTarget.style.boxShadow="0 6px 28px rgba(0, 136, 204, 0.4)"},onMouseLeave:u=>{u.currentTarget.style.transform="translateY(0)",u.currentTarget.style.boxShadow="0 4px 20px rgba(0, 136, 204, 0.3)"},children:m.jsxs(Ae,{gap:"md",align:"center",children:[m.jsx(de,{style:{fontSize:"48px",lineHeight:1},children:""}),m.jsx(P,{size:"lg",fw:700,c:"white",ta:"center",style:{fontFamily:"Roboto, sans-serif"},children:"   !"}),m.jsx(P,{size:"sm",c:"rgba(255,255,255,0.9)",ta:"center",fw:500,style:{fontFamily:"Roboto, sans-serif"},children:"   Telegram       ,    "}),m.jsx(Er,{size:"lg",variant:"white",style:{fontFamily:"Roboto, sans-serif",fontWeight:600,padding:"12px 20px",fontSize:"14px",color:"#0088cc",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15)"},children:"@AI_RolePlay_TG"})]})})]})})]})})]})}const uo={fontFamily:"Roboto, sans-serif"},SM=m.jsx(Ax,{color:"dark.4",size:28,radius:"xl",children:m.jsx(nc,{size:16,color:"white"})}),kM={color:"#ced4da",fontSize:"1rem",lineHeight:1.5,fontFamily:"Roboto, sans-serif"},CM=t=>t.replace(/\n/g,"<br />"),cr="tariff-description";function EM({tariff:t,isActive:e,onToggle:n,loading:i}){const[s,l]=R.useState(null),c=R.useMemo(()=>({borderColor:e?"#3390ec":"#373A40",transition:"all 0.3s ease",cursor:"pointer",backgroundColor:e?"#2C2E33":"#25262b"}),[e]),u=R.useCallback(async(d,p)=>{d.stopPropagation();try{if(p==="stars"){const y=await Lt(`/v1/invoice/create-invoice?tariff_id=${t.id}&payment_type=${p}`,{method:"POST"});Tt.openInvoice(y.invoice_link,b=>{b==="paid"?Wt.show({title:"!",message:"  ",color:"teal"}):b==="cancelled"?Wt.show({title:"",message:"  ",color:"yellow"}):b==="failed"&&Wt.show({title:"",message:"   ",color:"red"})})}else if(p==="yookassa"){const y=await Lt(`/v1/invoice/create-invoice?tariff_id=${t.id}&payment_type=${p}`,{method:"POST"}),b=document.createElement("div");b.style.cssText=`
                    position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                    background: rgba(0, 0, 0, 0.8); display: flex; align-items: center;
                    justify-content: center; z-index: 9999; backdrop-filter: blur(5px);
                `;const v=document.createElement("div");v.style.cssText=`
                    background: white; border-radius: 16px; padding: 20px;
                    max-width: 500px; width: 90%; max-height: 90vh;
                    overflow-y: auto; box-shadow: 0 10px 25px rgba(0,0,0,0.5);
                `;const x=document.createElement("div");x.style.cssText="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;";const k=document.createElement("h3");k.textContent="  Kassa",k.style.margin="0",k.style.color="#000",k.style.fontFamily="Roboto, sans-serif";const C=document.createElement("button");C.innerHTML="&times;",C.style.cssText="background: none; border: none; font-size: 28px; cursor: pointer; color: #999; padding: 0; line-height: 1;";const E=()=>{document.body.contains(b)&&document.body.removeChild(b)};C.onclick=E,x.appendChild(k),x.appendChild(C),v.appendChild(x);const M=document.createElement("div");M.id="payment-form-container",v.appendChild(M),b.appendChild(v),document.body.appendChild(b);const _=new window.YooMoneyCheckoutWidget({confirmation_token:y.confirmation.confirmation_token,error_callback:function(N){console.error("YooKassa error:",N),Wt.show({title:"",message:"   ",color:"red"}),E()}});_.on("success",()=>{_.destroy(),E(),l("success")}),_.on("fail",()=>{_.destroy(),E(),l("fail")}),_.render("payment-form-container")}else{const y=await Lt(`/v1/invoice/create-invoice?tariff_id=${t.id}&payment_type=${p}`,{method:"POST"});if(!window.Robokassa){Wt.show({title:"",message:"    ",color:"red"});return}window.Robokassa.StartPayment({MerchantLogin:y.merchant_login,OutSum:y.out_sum,InvId:y.inv_id,Description:`  ${t.name}    RolePlayTopbot`,Shp_tariff_id:y.shp_tariff_id,Shp_user_id:y.shp_user_id,Culture:y.culture,Encoding:y.encoding,SignatureValue:y.signature_value,IsTest:1})}}catch(y){const b=y.message||" ";b.includes("404")?Wt.show({title:"",message:b.includes("User")?"  ":"  ",color:"red"}):b.includes("400")?Wt.show({title:"",message:" ",color:"red"}):b.includes("403")?Wt.show({title:" ",message:"      ",color:"red"}):Wt.show({title:"",message:b,color:"red"})}},[t.id,t.name]);return m.jsxs(m.Fragment,{children:[m.jsx("style",{children:`
                .${cr} p { margin: 0 0 0.5em 0; }
                .${cr} p:last-child { margin-bottom: 0; }
                .${cr} ul, .${cr} ol { margin: 0.5em 0; padding-left: 1.5em; }
                .${cr} li { margin: 0.25em 0; }
                .${cr} a { color: #FFC107; text-decoration: underline; }
                .${cr} a:hover { color: #FF9800; }
                .${cr} strong, .${cr} b { color: white; font-weight: 700; }
                .${cr} em, .${cr} i { font-style: italic; }
            `}),m.jsxs(En,{shadow:"sm",padding:"lg",radius:"lg",withBorder:!0,bg:"#25262b",style:c,onClick:n,children:[m.jsxs(He,{justify:"space-between",align:"center",wrap:"nowrap",children:[m.jsxs(Ae,{gap:4,children:[m.jsx(P,{fw:800,size:"xl",c:"white",style:{lineHeight:1.2,letterSpacing:"0.5px",...uo},children:t.name}),m.jsxs(He,{gap:8,align:"center",children:[m.jsxs(He,{gap:2,align:"center",children:[m.jsx(P,{size:"md",c:"white",fw:700,style:uo,children:t.price_rub}),m.jsx(yT,{size:14,color:"white"})]}),m.jsx(P,{size:"md",c:"dimmed",children:"|"}),m.jsxs(He,{gap:4,align:"center",children:[m.jsx(uf,{size:14,color:"#FFC107",style:{filter:"drop-shadow(0 0 4px rgba(255, 193, 7, 0.4))"}}),m.jsx(P,{size:"md",c:"white",fw:700,style:uo,children:t.price_stars})]})]})]}),m.jsxs(He,{gap:"xs",children:[m.jsxs(Er,{color:t.is_active?"teal":"gray",variant:"light",size:"lg",radius:"md",style:{textTransform:"none"},children:[t.duration_days," ."]}),e?m.jsx(pT,{size:24,color:"gray"}):m.jsx(Hx,{size:24,color:"gray"})]})]}),m.jsx(GE,{in:e,children:m.jsx(de,{pt:"lg",children:m.jsxs(Ae,{gap:"lg",children:[m.jsx(de,{className:cr,style:kM,dangerouslySetInnerHTML:{__html:CM(t.description)}}),m.jsxs(Na,{spacing:"xs",center:!0,icon:SM,children:[m.jsx(Na.Item,{children:m.jsxs(P,{c:"gray.3",size:"sm",style:uo,children:[m.jsx(P,{span:!0,c:"white",fw:700,inherit:!0,children:t.daily_requests_limit}),"   "]})}),t.max_characters_create!==null&&m.jsx(Na.Item,{children:m.jsxs(P,{c:"gray.3",size:"sm",style:uo,children:[" ",m.jsx(P,{span:!0,c:"white",fw:700,inherit:!0,children:t.max_characters_create})," "]})}),(t.daily_photo_limit||0)>0&&m.jsx(Na.Item,{children:m.jsxs(P,{c:"gray.3",size:"sm",style:uo,children:[m.jsx(P,{span:!0,c:"white",fw:700,inherit:!0,children:t.daily_photo_limit}),"   "]})}),(t.daily_voice_limit||0)>0&&m.jsx(Na.Item,{children:m.jsxs(P,{c:"gray.3",size:"sm",style:uo,children:[m.jsx(P,{span:!0,c:"white",fw:700,inherit:!0,children:t.daily_voice_limit}),"   "]})})]}),m.jsx(de,{bg:"rgba(51, 144, 236, 0.1)",p:"xs",style:{borderRadius:10,border:"1px solid rgba(51, 144, 236, 0.2)"},children:m.jsxs(He,{gap:10,wrap:"nowrap",align:"start",children:[m.jsx(wT,{size:20,color:"#3390ec",style:{flexShrink:0,marginTop:2}}),m.jsxs(P,{size:"xs",c:"gray.4",lh:1.4,style:uo,children:["  ",m.jsx(P,{span:!0,c:"#FFC107",fw:700,children:"Stars"}),"   .      ."]})]})}),m.jsxs(Ae,{gap:"sm",children:[m.jsxs(Pe,{fullWidth:!0,variant:"gradient",gradient:{from:"#3390ec",to:"#0e72d6",deg:135},size:"md",radius:"md",h:50,onClick:d=>u(d,"stars"),loading:i,leftSection:m.jsx(uf,{size:22,color:"#FFD700",style:{filter:"drop-shadow(0 1px 2px rgba(0,0,0,0.2))"}}),rightSection:m.jsx(uT,{size:24,color:"white",style:{opacity:.8}}),styles:{label:{fontWeight:700,fontSize:"1.1rem",color:"white"},root:{boxShadow:"0 4px 12px rgba(51, 144, 236, 0.3)"}},children:[t.price_stars," Stars"]}),m.jsxs(Pe,{fullWidth:!0,variant:"filled",color:"gray.0",size:"md",radius:"md",h:50,onClick:d=>u(d,"yookassa"),loading:i,styles:{root:{backgroundColor:"#F5F5F7",border:"1px solid #E0E0E0",justifyContent:"space-between",paddingLeft:20,paddingRight:20,color:"#000"},inner:{width:"100%",justifyContent:"space-between"},label:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"}},children:[m.jsx(Eo,{src:"https://yookassa.ru/files/Guide_files/logo-black.svg",h:24,w:"auto",fit:"contain",alt:"YooKassa"}),m.jsxs(P,{span:!0,fw:800,size:"1.1rem",c:"black",style:{fontFamily:"Roboto, sans-serif"},children:[t.price_rub," "]})]})]})]})})})]}),m.jsx(Ei,{opened:s!==null,onClose:()=>l(null),centered:!0,radius:"lg",padding:"xl",withCloseButton:!1,styles:{content:{backgroundColor:"#25262b",color:"white"},body:{padding:0}},children:m.jsxs(Ae,{align:"center",gap:"lg",pb:"xs",children:[s==="success"?m.jsxs(m.Fragment,{children:[m.jsx(Eo,{src:"https://img-webcalypt.ru/uploads/admin/images/meme-templates/ZTOJqQiNQt1acPkpWQevehKaauqNbvfp.jpeg",alt:"Success",radius:"md",w:"100%",h:250,fit:"cover"}),m.jsxs(Ae,{gap:4,align:"center",children:[m.jsx(lf,{order:3,ta:"center",c:"teal.4",children:",   !!!"}),m.jsx(P,{ta:"center",size:"sm",c:"gray.4",children:"   "})]})]}):m.jsxs(m.Fragment,{children:[m.jsx(Eo,{src:"https://img-webcalypt.ru/uploads/admin/images/meme-templates/ggzOBNp6OSXECHJygK0vif4kUI2LsNVy.jpeg",alt:"Fail",radius:"md",w:"100%",h:250,fit:"cover"}),m.jsxs(Ae,{gap:4,align:"center",children:[m.jsx(lf,{order:3,ta:"center",c:"red.4",children:",    :("}),m.jsx(P,{ta:"center",size:"sm",c:"gray.4",children:"-      "})]})]}),m.jsx(Pe,{fullWidth:!0,onClick:()=>l(null),variant:"light",color:s==="success"?"teal":"red",size:"md",children:""})]})})]})}const xl={fontFamily:"Roboto, sans-serif"},wM={radius:"sm",blur:2,backgroundOpacity:.1},TM={color:"yellow",type:"bars"},MM={display:"flex",alignItems:"center",justifyContent:"center"},AM={position:"relative",minHeight:"80vh"},_M={label:xl};function jM(){const t=Bl(),[e,n]=R.useState([]),[i,s]=R.useState(!1),[l,c]=R.useState(null),[u,d]=R.useState(!1),[p,y]=R.useState(null);R.useEffect(()=>{(async()=>{s(!0),d(!1);try{const M=(await Lt("/v1/tariffs/")).tariffs.filter(_=>_.is_active);n(M),M.length>0&&y(M[0].id)}catch(E){console.error(E),d(!0)}finally{s(!1)}})()},[]);const b=R.useCallback(C=>{y(E=>E===C?null:C)},[]),v=R.useCallback(C=>{const E=e.find(M=>M.id===C);E&&(c(C),Tt.openInvoice(E.invoice_link,M=>{M==="paid"&&Tt.close(),c(null)}))},[e]),x=R.useCallback(()=>{t("/")},[t]),k=R.useMemo(()=>e.map(C=>m.jsx(EM,{tariff:C,isActive:p===C.id,onToggle:()=>b(C.id),loading:l===C.id},C.id)),[e,p,b,v,l]);return u?m.jsx(vs,{size:"sm",h:"100vh",style:MM,children:m.jsxs(Ae,{align:"center",gap:"lg",ta:"center",children:[m.jsx(nT,{size:56,color:"orange"}),m.jsx(lf,{order:3,c:"white",style:xl,children:""}),m.jsx(P,{size:"lg",c:"gray.4",fw:500,style:xl,children:"Bruh,     .     "}),m.jsx(Pe,{leftSection:m.jsx(CT,{size:20}),variant:"white",color:"dark",size:"md",onClick:x,styles:_M,children:" "})]})}):m.jsxs(m.Fragment,{children:[m.jsx(id,{}),m.jsxs(vs,{size:"sm",py:"md",style:AM,children:[m.jsx($m,{visible:i,zIndex:1e3,overlayProps:wM,loaderProps:TM}),m.jsxs(de,{mb:"xl",mt:"sm",ta:"center",children:[m.jsx(lf,{order:2,mb:"xs",c:"white",style:xl,children:""}),m.jsx(P,{c:"dimmed",size:"md",style:xl,children:"      ,            : )"})]}),m.jsx(Ae,{gap:"md",children:k}),!i&&e.length===0&&!u&&m.jsx(Tl,{mt:"xl",children:m.jsx(P,{c:"dimmed",style:xl,children:"     ."})})]})]})}function dn(t){this.content=t}dn.prototype={constructor:dn,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var i=n&&n!=t?this.remove(n):this,s=i.find(t),l=i.content.slice();return s==-1?l.push(n||t,e):(l[s+1]=e,n&&(l[s]=n)),new dn(l)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new dn(n)},addToStart:function(t,e){return new dn([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new dn(n)},addBefore:function(t,e,n){var i=this.remove(e),s=i.content.slice(),l=i.find(t);return s.splice(l==-1?s.length:l,0,e,n),new dn(s)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=dn.from(t),t.size?new dn(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=dn.from(t),t.size?new dn(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=dn.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};dn.from=function(t){if(t instanceof dn)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new dn(e)};function Ux(t,e,n){for(let i=0;;i++){if(i==t.childCount||i==e.childCount)return t.childCount==e.childCount?null:n;let s=t.child(i),l=e.child(i);if(s==l){n+=s.nodeSize;continue}if(!s.sameMarkup(l))return n;if(s.isText&&s.text!=l.text){for(let c=0;s.text[c]==l.text[c];c++)n++;return n}if(s.content.size||l.content.size){let c=Ux(s.content,l.content,n+1);if(c!=null)return c}n+=s.nodeSize}}function qx(t,e,n,i){for(let s=t.childCount,l=e.childCount;;){if(s==0||l==0)return s==l?null:{a:n,b:i};let c=t.child(--s),u=e.child(--l),d=c.nodeSize;if(c==u){n-=d,i-=d;continue}if(!c.sameMarkup(u))return{a:n,b:i};if(c.isText&&c.text!=u.text){let p=0,y=Math.min(c.text.length,u.text.length);for(;p<y&&c.text[c.text.length-p-1]==u.text[u.text.length-p-1];)p++,n--,i--;return{a:n,b:i}}if(c.content.size||u.content.size){let p=qx(c.content,u.content,n-1,i-1);if(p)return p}n-=d,i-=d}}class J{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let i=0;i<e.length;i++)this.size+=e[i].nodeSize}nodesBetween(e,n,i,s=0,l){for(let c=0,u=0;u<n;c++){let d=this.content[c],p=u+d.nodeSize;if(p>e&&i(d,s+u,l||null,c)!==!1&&d.content.size){let y=u+1;d.nodesBetween(Math.max(0,e-y),Math.min(d.content.size,n-y),i,s+y)}u=p}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,i,s){let l="",c=!0;return this.nodesBetween(e,n,(u,d)=>{let p=u.isText?u.text.slice(Math.max(e,d)-d,n-d):u.isLeaf?s?typeof s=="function"?s(u):s:u.type.spec.leafText?u.type.spec.leafText(u):"":"";u.isBlock&&(u.isLeaf&&p||u.isTextblock)&&i&&(c?c=!1:l+=i),l+=p},0),l}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,i=e.firstChild,s=this.content.slice(),l=0;for(n.isText&&n.sameMarkup(i)&&(s[s.length-1]=n.withText(n.text+i.text),l=1);l<e.content.length;l++)s.push(e.content[l]);return new J(s,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let i=[],s=0;if(n>e)for(let l=0,c=0;c<n;l++){let u=this.content[l],d=c+u.nodeSize;d>e&&((c<e||d>n)&&(u.isText?u=u.cut(Math.max(0,e-c),Math.min(u.text.length,n-c)):u=u.cut(Math.max(0,e-c-1),Math.min(u.content.size,n-c-1))),i.push(u),s+=u.nodeSize),c=d}return new J(i,s)}cutByIndex(e,n){return e==n?J.empty:e==0&&n==this.content.length?this:new J(this.content.slice(e,n))}replaceChild(e,n){let i=this.content[e];if(i==n)return this;let s=this.content.slice(),l=this.size+n.nodeSize-i.nodeSize;return s[e]=n,new J(s,l)}addToStart(e){return new J([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new J(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,i=0;n<this.content.length;n++){let s=this.content[n];e(s,i,n),i+=s.nodeSize}}findDiffStart(e,n=0){return Ux(this,e,n)}findDiffEnd(e,n=this.size,i=e.size){return qx(this,e,n,i)}findIndex(e){if(e==0)return Uu(0,e);if(e==this.size)return Uu(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,i=0;;n++){let s=this.child(n),l=i+s.nodeSize;if(l>=e)return l==e?Uu(n+1,l):Uu(n,i);i=l}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return J.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new J(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return J.empty;let n,i=0;for(let s=0;s<e.length;s++){let l=e[s];i+=l.nodeSize,s&&l.isText&&e[s-1].sameMarkup(l)?(n||(n=e.slice(0,s)),n[n.length-1]=l.withText(n[n.length-1].text+l.text)):n&&n.push(l)}return new J(n||e,i)}static from(e){if(!e)return J.empty;if(e instanceof J)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new J([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}J.empty=new J([],0);const Op={index:0,offset:0};function Uu(t,e){return Op.index=t,Op.offset=e,Op}function ff(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let i=0;i<t.length;i++)if(!ff(t[i],e[i]))return!1}else{for(let i in t)if(!(i in e)||!ff(t[i],e[i]))return!1;for(let i in e)if(!(i in t))return!1}return!0}let gt=class ym{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,i=!1;for(let s=0;s<e.length;s++){let l=e[s];if(this.eq(l))return e;if(this.type.excludes(l.type))n||(n=e.slice(0,s));else{if(l.type.excludes(this.type))return e;!i&&l.type.rank>this.type.rank&&(n||(n=e.slice(0,s)),n.push(this),i=!0),n&&n.push(l)}}return n||(n=e.slice()),i||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&ff(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let i=e.marks[n.type];if(!i)throw new RangeError(`There is no mark type ${n.type} in this schema`);let s=i.create(n.attrs);return i.checkAttrs(s.attrs),s}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let i=0;i<e.length;i++)if(!e[i].eq(n[i]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return ym.none;if(e instanceof ym)return[e];let n=e.slice();return n.sort((i,s)=>i.type.rank-s.type.rank),n}};gt.none=[];class df extends Error{}class ae{constructor(e,n,i){this.content=e,this.openStart=n,this.openEnd=i}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let i=Px(this.content,e+this.openStart,n);return i&&new ae(i,this.openStart,this.openEnd)}removeBetween(e,n){return new ae(Vx(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return ae.empty;let i=n.openStart||0,s=n.openEnd||0;if(typeof i!="number"||typeof s!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new ae(J.fromJSON(e,n.content),i,s)}static maxOpen(e,n=!0){let i=0,s=0;for(let l=e.firstChild;l&&!l.isLeaf&&(n||!l.type.spec.isolating);l=l.firstChild)i++;for(let l=e.lastChild;l&&!l.isLeaf&&(n||!l.type.spec.isolating);l=l.lastChild)s++;return new ae(e,i,s)}}ae.empty=new ae(J.empty,0,0);function Vx(t,e,n){let{index:i,offset:s}=t.findIndex(e),l=t.maybeChild(i),{index:c,offset:u}=t.findIndex(n);if(s==e||l.isText){if(u!=n&&!t.child(c).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(i!=c)throw new RangeError("Removing non-flat range");return t.replaceChild(i,l.copy(Vx(l.content,e-s-1,n-s-1)))}function Px(t,e,n,i){let{index:s,offset:l}=t.findIndex(e),c=t.maybeChild(s);if(l==e||c.isText)return i&&!i.canReplace(s,s,n)?null:t.cut(0,e).append(n).append(t.cut(e));let u=Px(c.content,e-l-1,n,c);return u&&t.replaceChild(s,c.copy(u))}function OM(t,e,n){if(n.openStart>t.depth)throw new df("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new df("Inconsistent open depths");return Wx(t,e,n,0)}function Wx(t,e,n,i){let s=t.index(i),l=t.node(i);if(s==e.index(i)&&i<t.depth-n.openStart){let c=Wx(t,e,n,i+1);return l.copy(l.content.replaceChild(s,c))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==i&&e.depth==i){let c=t.parent,u=c.content;return ms(c,u.cut(0,t.parentOffset).append(n.content).append(u.cut(e.parentOffset)))}else{let{start:c,end:u}=NM(n,t);return ms(l,Gx(t,c,u,e,i))}else return ms(l,hf(t,e,i))}function Fx(t,e){if(!e.type.compatibleContent(t.type))throw new df("Cannot join "+e.type.name+" onto "+t.type.name)}function bm(t,e,n){let i=t.node(n);return Fx(i,e.node(n)),i}function ps(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function Fa(t,e,n,i){let s=(e||t).node(n),l=0,c=e?e.index(n):s.childCount;t&&(l=t.index(n),t.depth>n?l++:t.textOffset&&(ps(t.nodeAfter,i),l++));for(let u=l;u<c;u++)ps(s.child(u),i);e&&e.depth==n&&e.textOffset&&ps(e.nodeBefore,i)}function ms(t,e){return t.type.checkContent(e),t.copy(e)}function Gx(t,e,n,i,s){let l=t.depth>s&&bm(t,e,s+1),c=i.depth>s&&bm(n,i,s+1),u=[];return Fa(null,t,s,u),l&&c&&e.index(s)==n.index(s)?(Fx(l,c),ps(ms(l,Gx(t,e,n,i,s+1)),u)):(l&&ps(ms(l,hf(t,e,s+1)),u),Fa(e,n,s,u),c&&ps(ms(c,hf(n,i,s+1)),u)),Fa(i,null,s,u),new J(u)}function hf(t,e,n){let i=[];if(Fa(null,t,n,i),t.depth>n){let s=bm(t,e,n+1);ps(ms(s,hf(t,e,n+1)),i)}return Fa(e,null,n,i),new J(i)}function NM(t,e){let n=e.depth-t.openStart,s=e.node(n).copy(t.content);for(let l=n-1;l>=0;l--)s=e.node(l).copy(J.from(s));return{start:s.resolveNoCache(t.openStart+n),end:s.resolveNoCache(s.content.size-t.openEnd-n)}}class rc{constructor(e,n,i){this.pos=e,this.path=n,this.parentOffset=i,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let i=this.pos-this.path[this.path.length-1],s=e.child(n);return i?e.child(n).cut(i):s}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let i=this.path[n*3],s=n==0?0:this.path[n*3-1]+1;for(let l=0;l<e;l++)s+=i.child(l).nodeSize;return s}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return gt.none;if(this.textOffset)return e.child(n).marks;let i=e.maybeChild(n-1),s=e.maybeChild(n);if(!i){let u=i;i=s,s=u}let l=i.marks;for(var c=0;c<l.length;c++)l[c].type.spec.inclusive===!1&&(!s||!l[c].isInSet(s.marks))&&(l=l[c--].removeFromSet(l));return l}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let i=n.marks,s=e.parent.maybeChild(e.index());for(var l=0;l<i.length;l++)i[l].type.spec.inclusive===!1&&(!s||!i[l].isInSet(s.marks))&&(i=i[l--].removeFromSet(i));return i}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let i=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);i>=0;i--)if(e.pos<=this.end(i)&&(!n||n(this.node(i))))return new pf(this,e,i);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let i=[],s=0,l=n;for(let c=e;;){let{index:u,offset:d}=c.content.findIndex(l),p=l-d;if(i.push(c,u,s+d),!p||(c=c.child(u),c.isText))break;l=p-1,s+=d+1}return new rc(n,i,l)}static resolveCached(e,n){let i=I1.get(e);if(i)for(let l=0;l<i.elts.length;l++){let c=i.elts[l];if(c.pos==n)return c}else I1.set(e,i=new zM);let s=i.elts[i.i]=rc.resolve(e,n);return i.i=(i.i+1)%RM,s}}class zM{constructor(){this.elts=[],this.i=0}}const RM=12,I1=new WeakMap;class pf{constructor(e,n,i){this.$from=e,this.$to=n,this.depth=i}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const DM=Object.create(null);class Mr{constructor(e,n,i,s=gt.none){this.type=e,this.attrs=n,this.marks=s,this.content=i||J.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,i,s=0){this.content.nodesBetween(e,n,i,s,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,i,s){return this.content.textBetween(e,n,i,s)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,i){return this.type==e&&ff(this.attrs,n||e.defaultAttrs||DM)&&gt.sameSet(this.marks,i||gt.none)}copy(e=null){return e==this.content?this:new Mr(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new Mr(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,i=!1){if(e==n)return ae.empty;let s=this.resolve(e),l=this.resolve(n),c=i?0:s.sharedDepth(n),u=s.start(c),p=s.node(c).content.cut(s.pos-u,l.pos-u);return new ae(p,s.depth-c,l.depth-c)}replace(e,n,i){return OM(this.resolve(e),this.resolve(n),i)}nodeAt(e){for(let n=this;;){let{index:i,offset:s}=n.content.findIndex(e);if(n=n.maybeChild(i),!n)return null;if(s==e||n.isText)return n;e-=s+1}}childAfter(e){let{index:n,offset:i}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:i}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:i}=this.content.findIndex(e);if(i<e)return{node:this.content.child(n),index:n,offset:i};let s=this.content.child(n-1);return{node:s,index:n-1,offset:i-s.nodeSize}}resolve(e){return rc.resolveCached(this,e)}resolveNoCache(e){return rc.resolve(this,e)}rangeHasMark(e,n,i){let s=!1;return n>e&&this.nodesBetween(e,n,l=>(i.isInSet(l.marks)&&(s=!0),!s)),s}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),$x(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,i=J.empty,s=0,l=i.childCount){let c=this.contentMatchAt(e).matchFragment(i,s,l),u=c&&c.matchFragment(this.content,n);if(!u||!u.validEnd)return!1;for(let d=s;d<l;d++)if(!this.type.allowsMarks(i.child(d).marks))return!1;return!0}canReplaceWith(e,n,i,s){if(s&&!this.type.allowsMarks(s))return!1;let l=this.contentMatchAt(e).matchType(i),c=l&&l.matchFragment(this.content,n);return c?c.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=gt.none;for(let n=0;n<this.marks.length;n++){let i=this.marks[n];i.type.checkAttrs(i.attrs),e=i.addToSet(e)}if(!gt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let i;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");i=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,i)}let s=J.fromJSON(e,n.content),l=e.nodeType(n.type).create(n.attrs,s,i);return l.type.checkAttrs(l.attrs),l}}Mr.prototype.text=void 0;class mf extends Mr{constructor(e,n,i,s){if(super(e,n,null,s),!i)throw new RangeError("Empty text nodes are not allowed");this.text=i}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):$x(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new mf(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new mf(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function $x(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class xs{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let i=new LM(e,n);if(i.next==null)return xs.empty;let s=Yx(i);i.next&&i.err("Unexpected trailing text");let l=PM(VM(s));return WM(l,i),l}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,i=e.childCount){let s=this;for(let l=n;s&&l<i;l++)s=s.matchType(e.child(l).type);return s}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let i=0;i<e.next.length;i++)if(this.next[n].type==e.next[i].type)return!0;return!1}fillBefore(e,n=!1,i=0){let s=[this];function l(c,u){let d=c.matchFragment(e,i);if(d&&(!n||d.validEnd))return J.from(u.map(p=>p.createAndFill()));for(let p=0;p<c.next.length;p++){let{type:y,next:b}=c.next[p];if(!(y.isText||y.hasRequiredAttrs())&&s.indexOf(b)==-1){s.push(b);let v=l(b,u.concat(y));if(v)return v}}return null}return l(this,[])}findWrapping(e){for(let i=0;i<this.wrapCache.length;i+=2)if(this.wrapCache[i]==e)return this.wrapCache[i+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),i=[{match:this,type:null,via:null}];for(;i.length;){let s=i.shift(),l=s.match;if(l.matchType(e)){let c=[];for(let u=s;u.type;u=u.via)c.push(u.type);return c.reverse()}for(let c=0;c<l.next.length;c++){let{type:u,next:d}=l.next[c];!u.isLeaf&&!u.hasRequiredAttrs()&&!(u.name in n)&&(!s.type||d.validEnd)&&(i.push({match:u.contentMatch,type:u,via:s}),n[u.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(i){e.push(i);for(let s=0;s<i.next.length;s++)e.indexOf(i.next[s].next)==-1&&n(i.next[s].next)}return n(this),e.map((i,s)=>{let l=s+(i.validEnd?"*":" ")+" ";for(let c=0;c<i.next.length;c++)l+=(c?", ":"")+i.next[c].type.name+"->"+e.indexOf(i.next[c].next);return l}).join(`
`)}}xs.empty=new xs(!0);class LM{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function Yx(t){let e=[];do e.push(BM(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function BM(t){let e=[];do e.push(IM(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function IM(t){let e=qM(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=HM(t,e);else break;return e}function H1(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function HM(t,e){let n=H1(t),i=n;return t.eat(",")&&(t.next!="}"?i=H1(t):i=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:i,expr:e}}function UM(t,e){let n=t.nodeTypes,i=n[e];if(i)return[i];let s=[];for(let l in n){let c=n[l];c.isInGroup(e)&&s.push(c)}return s.length==0&&t.err("No node type or group '"+e+"' found"),s}function qM(t){if(t.eat("(")){let e=Yx(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=UM(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function VM(t){let e=[[]];return s(l(t,0),n()),e;function n(){return e.push([])-1}function i(c,u,d){let p={term:d,to:u};return e[c].push(p),p}function s(c,u){c.forEach(d=>d.to=u)}function l(c,u){if(c.type=="choice")return c.exprs.reduce((d,p)=>d.concat(l(p,u)),[]);if(c.type=="seq")for(let d=0;;d++){let p=l(c.exprs[d],u);if(d==c.exprs.length-1)return p;s(p,u=n())}else if(c.type=="star"){let d=n();return i(u,d),s(l(c.expr,d),d),[i(d)]}else if(c.type=="plus"){let d=n();return s(l(c.expr,u),d),s(l(c.expr,d),d),[i(d)]}else{if(c.type=="opt")return[i(u)].concat(l(c.expr,u));if(c.type=="range"){let d=u;for(let p=0;p<c.min;p++){let y=n();s(l(c.expr,d),y),d=y}if(c.max==-1)s(l(c.expr,d),d);else for(let p=c.min;p<c.max;p++){let y=n();i(d,y),s(l(c.expr,d),y),d=y}return[i(d)]}else{if(c.type=="name")return[i(u,void 0,c.value)];throw new Error("Unknown expr type")}}}}function Kx(t,e){return e-t}function U1(t,e){let n=[];return i(e),n.sort(Kx);function i(s){let l=t[s];if(l.length==1&&!l[0].term)return i(l[0].to);n.push(s);for(let c=0;c<l.length;c++){let{term:u,to:d}=l[c];!u&&n.indexOf(d)==-1&&i(d)}}}function PM(t){let e=Object.create(null);return n(U1(t,0));function n(i){let s=[];i.forEach(c=>{t[c].forEach(({term:u,to:d})=>{if(!u)return;let p;for(let y=0;y<s.length;y++)s[y][0]==u&&(p=s[y][1]);U1(t,d).forEach(y=>{p||s.push([u,p=[]]),p.indexOf(y)==-1&&p.push(y)})})});let l=e[i.join(",")]=new xs(i.indexOf(t.length-1)>-1);for(let c=0;c<s.length;c++){let u=s[c][1].sort(Kx);l.next.push({type:s[c][0],next:e[u.join(",")]||n(u)})}return l}}function WM(t,e){for(let n=0,i=[t];n<i.length;n++){let s=i[n],l=!s.validEnd,c=[];for(let u=0;u<s.next.length;u++){let{type:d,next:p}=s.next[u];c.push(d.name),l&&!(d.isText||d.hasRequiredAttrs())&&(l=!1),i.indexOf(p)==-1&&i.push(p)}l&&e.err("Only non-generatable nodes ("+c.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Qx(t){let e=Object.create(null);for(let n in t){let i=t[n];if(!i.hasDefault)return null;e[n]=i.default}return e}function Jx(t,e){let n=Object.create(null);for(let i in t){let s=e&&e[i];if(s===void 0){let l=t[i];if(l.hasDefault)s=l.default;else throw new RangeError("No value supplied for attribute "+i)}n[i]=s}return n}function Xx(t,e,n,i){for(let s in e)if(!(s in t))throw new RangeError(`Unsupported attribute ${s} for ${n} of type ${s}`);for(let s in t){let l=t[s];l.validate&&l.validate(e[s])}}function Zx(t,e){let n=Object.create(null);if(e)for(let i in e)n[i]=new GM(t,i,e[i]);return n}let q1=class eS{constructor(e,n,i){this.name=e,this.schema=n,this.spec=i,this.markSet=null,this.groups=i.group?i.group.split(" "):[],this.attrs=Zx(e,i.attrs),this.defaultAttrs=Qx(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(i.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==xs.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:Jx(this.attrs,e)}create(e=null,n,i){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Mr(this,this.computeAttrs(e),J.from(n),gt.setFrom(i))}createChecked(e=null,n,i){return n=J.from(n),this.checkContent(n),new Mr(this,this.computeAttrs(e),n,gt.setFrom(i))}createAndFill(e=null,n,i){if(e=this.computeAttrs(e),n=J.from(n),n.size){let c=this.contentMatch.fillBefore(n);if(!c)return null;n=c.append(n)}let s=this.contentMatch.matchFragment(n),l=s&&s.fillBefore(J.empty,!0);return l?new Mr(this,e,n.append(l),gt.setFrom(i)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let i=0;i<e.childCount;i++)if(!this.allowsMarks(e.child(i).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){Xx(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let i=0;i<e.length;i++)this.allowsMarkType(e[i].type)?n&&n.push(e[i]):n||(n=e.slice(0,i));return n?n.length?n:gt.none:e}static compile(e,n){let i=Object.create(null);e.forEach((l,c)=>i[l]=new eS(l,n,c));let s=n.spec.topNode||"doc";if(!i[s])throw new RangeError("Schema is missing its top node type ('"+s+"')");if(!i.text)throw new RangeError("Every schema needs a 'text' type");for(let l in i.text.attrs)throw new RangeError("The text node type should not have attributes");return i}};function FM(t,e,n){let i=n.split("|");return s=>{let l=s===null?"null":typeof s;if(i.indexOf(l)<0)throw new RangeError(`Expected value of type ${i} for attribute ${e} on type ${t}, got ${l}`)}}class GM{constructor(e,n,i){this.hasDefault=Object.prototype.hasOwnProperty.call(i,"default"),this.default=i.default,this.validate=typeof i.validate=="string"?FM(e,n,i.validate):i.validate}get isRequired(){return!this.hasDefault}}class od{constructor(e,n,i,s){this.name=e,this.rank=n,this.schema=i,this.spec=s,this.attrs=Zx(e,s.attrs),this.excluded=null;let l=Qx(this.attrs);this.instance=l?new gt(this,l):null}create(e=null){return!e&&this.instance?this.instance:new gt(this,Jx(this.attrs,e))}static compile(e,n){let i=Object.create(null),s=0;return e.forEach((l,c)=>i[l]=new od(l,s++,n,c)),i}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){Xx(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class tS{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let s in e)n[s]=e[s];n.nodes=dn.from(e.nodes),n.marks=dn.from(e.marks||{}),this.nodes=q1.compile(this.spec.nodes,this),this.marks=od.compile(this.spec.marks,this);let i=Object.create(null);for(let s in this.nodes){if(s in this.marks)throw new RangeError(s+" can not be both a node and a mark");let l=this.nodes[s],c=l.spec.content||"",u=l.spec.marks;if(l.contentMatch=i[c]||(i[c]=xs.parse(c,this.nodes)),l.inlineContent=l.contentMatch.inlineContent,l.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!l.isInline||!l.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=l}l.markSet=u=="_"?null:u?V1(this,u.split(" ")):u==""||!l.inlineContent?[]:null}for(let s in this.marks){let l=this.marks[s],c=l.spec.excludes;l.excluded=c==null?[l]:c==""?[]:V1(this,c.split(" "))}this.nodeFromJSON=s=>Mr.fromJSON(this,s),this.markFromJSON=s=>gt.fromJSON(this,s),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,i,s){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof q1){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,i,s)}text(e,n){let i=this.nodes.text;return new mf(i,i.defaultAttrs,e,gt.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function V1(t,e){let n=[];for(let i=0;i<e.length;i++){let s=e[i],l=t.marks[s],c=l;if(l)n.push(l);else for(let u in t.marks){let d=t.marks[u];(s=="_"||d.spec.group&&d.spec.group.split(" ").indexOf(s)>-1)&&n.push(c=d)}if(!c)throw new SyntaxError("Unknown mark type: '"+e[i]+"'")}return n}function $M(t){return t.tag!=null}function YM(t){return t.style!=null}class wo{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let i=this.matchedStyles=[];n.forEach(s=>{if($M(s))this.tags.push(s);else if(YM(s)){let l=/[^=]*/.exec(s.style)[0];i.indexOf(l)<0&&i.push(l),this.styles.push(s)}}),this.normalizeLists=!this.tags.some(s=>{if(!/^(ul|ol)\b/.test(s.tag)||!s.node)return!1;let l=e.nodes[s.node];return l.contentMatch.matchType(l)})}parse(e,n={}){let i=new W1(this,n,!1);return i.addAll(e,gt.none,n.from,n.to),i.finish()}parseSlice(e,n={}){let i=new W1(this,n,!0);return i.addAll(e,gt.none,n.from,n.to),ae.maxOpen(i.finish())}matchTag(e,n,i){for(let s=i?this.tags.indexOf(i)+1:0;s<this.tags.length;s++){let l=this.tags[s];if(JM(e,l.tag)&&(l.namespace===void 0||e.namespaceURI==l.namespace)&&(!l.context||n.matchesContext(l.context))){if(l.getAttrs){let c=l.getAttrs(e);if(c===!1)continue;l.attrs=c||void 0}return l}}}matchStyle(e,n,i,s){for(let l=s?this.styles.indexOf(s)+1:0;l<this.styles.length;l++){let c=this.styles[l],u=c.style;if(!(u.indexOf(e)!=0||c.context&&!i.matchesContext(c.context)||u.length>e.length&&(u.charCodeAt(e.length)!=61||u.slice(e.length+1)!=n))){if(c.getAttrs){let d=c.getAttrs(n);if(d===!1)continue;c.attrs=d||void 0}return c}}}static schemaRules(e){let n=[];function i(s){let l=s.priority==null?50:s.priority,c=0;for(;c<n.length;c++){let u=n[c];if((u.priority==null?50:u.priority)<l)break}n.splice(c,0,s)}for(let s in e.marks){let l=e.marks[s].spec.parseDOM;l&&l.forEach(c=>{i(c=F1(c)),c.mark||c.ignore||c.clearMark||(c.mark=s)})}for(let s in e.nodes){let l=e.nodes[s].spec.parseDOM;l&&l.forEach(c=>{i(c=F1(c)),c.node||c.ignore||c.mark||(c.node=s)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new wo(e,wo.schemaRules(e)))}}const nS={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},KM={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},rS={ol:!0,ul:!0},ic=1,vm=2,Ga=4;function P1(t,e,n){return e!=null?(e?ic:0)|(e==="full"?vm:0):t&&t.whitespace=="pre"?ic|vm:n&~Ga}class qu{constructor(e,n,i,s,l,c){this.type=e,this.attrs=n,this.marks=i,this.solid=s,this.options=c,this.content=[],this.activeMarks=gt.none,this.match=l||(c&Ga?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(J.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let i=this.type.contentMatch,s;return(s=i.findWrapping(e.type))?(this.match=i,s):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&ic)){let i=this.content[this.content.length-1],s;if(i&&i.isText&&(s=/[ \t\r\n\u000c]+$/.exec(i.text))){let l=i;i.text.length==s[0].length?this.content.pop():this.content[this.content.length-1]=l.withText(l.text.slice(0,l.text.length-s[0].length))}}let n=J.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(J.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!nS.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class W1{constructor(e,n,i){this.parser=e,this.options=n,this.isOpen=i,this.open=0,this.localPreserveWS=!1;let s=n.topNode,l,c=P1(null,n.preserveWhitespace,0)|(i?Ga:0);s?l=new qu(s.type,s.attrs,gt.none,!0,n.topMatch||s.type.contentMatch,c):i?l=new qu(null,null,gt.none,!0,null,c):l=new qu(e.schema.topNodeType,null,gt.none,!0,null,c),this.nodes=[l],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let i=e.nodeValue,s=this.top,l=s.options&vm?"full":this.localPreserveWS||(s.options&ic)>0,{schema:c}=this.parser;if(l==="full"||s.inlineContext(e)||/[^ \t\r\n\u000c]/.test(i)){if(l)if(l==="full")i=i.replace(/\r\n?/g,`
`);else if(c.linebreakReplacement&&/[\r\n]/.test(i)&&this.top.findWrapping(c.linebreakReplacement.create())){let u=i.split(/\r?\n|\r/);for(let d=0;d<u.length;d++)d&&this.insertNode(c.linebreakReplacement.create(),n,!0),u[d]&&this.insertNode(c.text(u[d]),n,!/\S/.test(u[d]));i=""}else i=i.replace(/\r?\n|\r/g," ");else if(i=i.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(i)&&this.open==this.nodes.length-1){let u=s.content[s.content.length-1],d=e.previousSibling;(!u||d&&d.nodeName=="BR"||u.isText&&/[ \t\r\n\u000c]$/.test(u.text))&&(i=i.slice(1))}i&&this.insertNode(c.text(i),n,!/\S/.test(i)),this.findInText(e)}else this.findInside(e)}addElement(e,n,i){let s=this.localPreserveWS,l=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let c=e.nodeName.toLowerCase(),u;rS.hasOwnProperty(c)&&this.parser.normalizeLists&&QM(e);let d=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(u=this.parser.matchTag(e,this,i));e:if(d?d.ignore:KM.hasOwnProperty(c))this.findInside(e),this.ignoreFallback(e,n);else if(!d||d.skip||d.closeParent){d&&d.closeParent?this.open=Math.max(0,this.open-1):d&&d.skip.nodeType&&(e=d.skip);let p,y=this.needsBlock;if(nS.hasOwnProperty(c))l.content.length&&l.content[0].isInline&&this.open&&(this.open--,l=this.top),p=!0,l.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let b=d&&d.skip?n:this.readStyles(e,n);b&&this.addAll(e,b),p&&this.sync(l),this.needsBlock=y}else{let p=this.readStyles(e,n);p&&this.addElementByRule(e,d,p,d.consuming===!1?u:void 0)}this.localPreserveWS=s}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let i=e.style;if(i&&i.length)for(let s=0;s<this.parser.matchedStyles.length;s++){let l=this.parser.matchedStyles[s],c=i.getPropertyValue(l);if(c)for(let u=void 0;;){let d=this.parser.matchStyle(l,c,this,u);if(!d)break;if(d.ignore)return null;if(d.clearMark?n=n.filter(p=>!d.clearMark(p)):n=n.concat(this.parser.schema.marks[d.mark].create(d.attrs)),d.consuming===!1)u=d;else break}}return n}addElementByRule(e,n,i,s){let l,c;if(n.node)if(c=this.parser.schema.nodes[n.node],c.isLeaf)this.insertNode(c.create(n.attrs),i,e.nodeName=="BR")||this.leafFallback(e,i);else{let d=this.enter(c,n.attrs||null,i,n.preserveWhitespace);d&&(l=!0,i=d)}else{let d=this.parser.schema.marks[n.mark];i=i.concat(d.create(n.attrs))}let u=this.top;if(c&&c.isLeaf)this.findInside(e);else if(s)this.addElement(e,i,s);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(d=>this.insertNode(d,i,!1));else{let d=e;typeof n.contentElement=="string"?d=e.querySelector(n.contentElement):typeof n.contentElement=="function"?d=n.contentElement(e):n.contentElement&&(d=n.contentElement),this.findAround(e,d,!0),this.addAll(d,i),this.findAround(e,d,!1)}l&&this.sync(u)&&this.open--}addAll(e,n,i,s){let l=i||0;for(let c=i?e.childNodes[i]:e.firstChild,u=s==null?null:e.childNodes[s];c!=u;c=c.nextSibling,++l)this.findAtPoint(e,l),this.addDOM(c,n);this.findAtPoint(e,l)}findPlace(e,n,i){let s,l;for(let c=this.open,u=0;c>=0;c--){let d=this.nodes[c],p=d.findWrapping(e);if(p&&(!s||s.length>p.length+u)&&(s=p,l=d,!p.length))break;if(d.solid){if(i)break;u+=2}}if(!s)return null;this.sync(l);for(let c=0;c<s.length;c++)n=this.enterInner(s[c],null,n,!1);return n}insertNode(e,n,i){if(e.isInline&&this.needsBlock&&!this.top.type){let l=this.textblockFromContext();l&&(n=this.enterInner(l,null,n))}let s=this.findPlace(e,n,i);if(s){this.closeExtra();let l=this.top;l.match&&(l.match=l.match.matchType(e.type));let c=gt.none;for(let u of s.concat(e.marks))(l.type?l.type.allowsMarkType(u.type):G1(u.type,e.type))&&(c=u.addToSet(c));return l.content.push(e.mark(c)),!0}return!1}enter(e,n,i,s){let l=this.findPlace(e.create(n),i,!1);return l&&(l=this.enterInner(e,n,i,!0,s)),l}enterInner(e,n,i,s=!1,l){this.closeExtra();let c=this.top;c.match=c.match&&c.match.matchType(e);let u=P1(e,l,c.options);c.options&Ga&&c.content.length==0&&(u|=Ga);let d=gt.none;return i=i.filter(p=>(c.type?c.type.allowsMarkType(p.type):G1(p.type,e))?(d=p.addToSet(d),!1):!0),this.nodes.push(new qu(e,n,d,s,null,u)),this.open++,i}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=ic)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let i=this.nodes[n].content;for(let s=i.length-1;s>=0;s--)e+=i[s].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let i=0;i<this.find.length;i++)this.find[i].node==e&&this.find[i].offset==n&&(this.find[i].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,i){if(e!=n&&this.find)for(let s=0;s<this.find.length;s++)this.find[s].pos==null&&e.nodeType==1&&e.contains(this.find[s].node)&&n.compareDocumentPosition(this.find[s].node)&(i?2:4)&&(this.find[s].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),i=this.options.context,s=!this.isOpen&&(!i||i.parent.type==this.nodes[0].type),l=-(i?i.depth+1:0)+(s?0:1),c=(u,d)=>{for(;u>=0;u--){let p=n[u];if(p==""){if(u==n.length-1||u==0)continue;for(;d>=l;d--)if(c(u-1,d))return!0;return!1}else{let y=d>0||d==0&&s?this.nodes[d].type:i&&d>=l?i.node(d-l).type:null;if(!y||y.name!=p&&!y.isInGroup(p))return!1;d--}}return!0};return c(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let i=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(i&&i.isTextblock&&i.defaultAttrs)return i}for(let n in this.parser.schema.nodes){let i=this.parser.schema.nodes[n];if(i.isTextblock&&i.defaultAttrs)return i}}}function QM(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let i=e.nodeType==1?e.nodeName.toLowerCase():null;i&&rS.hasOwnProperty(i)&&n?(n.appendChild(e),e=n):i=="li"?n=e:i&&(n=null)}}function JM(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function F1(t){let e={};for(let n in t)e[n]=t[n];return e}function G1(t,e){let n=e.schema.nodes;for(let i in n){let s=n[i];if(!s.allowsMarkType(t))continue;let l=[],c=u=>{l.push(u);for(let d=0;d<u.edgeCount;d++){let{type:p,next:y}=u.edge(d);if(p==e||l.indexOf(y)<0&&c(y))return!0}};if(c(s.contentMatch))return!0}}class Ms{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},i){i||(i=Np(n).createDocumentFragment());let s=i,l=[];return e.forEach(c=>{if(l.length||c.marks.length){let u=0,d=0;for(;u<l.length&&d<c.marks.length;){let p=c.marks[d];if(!this.marks[p.type.name]){d++;continue}if(!p.eq(l[u][0])||p.type.spec.spanning===!1)break;u++,d++}for(;u<l.length;)s=l.pop()[1];for(;d<c.marks.length;){let p=c.marks[d++],y=this.serializeMark(p,c.isInline,n);y&&(l.push([p,s]),s.appendChild(y.dom),s=y.contentDOM||y.dom)}}s.appendChild(this.serializeNodeInner(c,n))}),i}serializeNodeInner(e,n){let{dom:i,contentDOM:s}=tf(Np(n),this.nodes[e.type.name](e),null,e.attrs);if(s){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,s)}return i}serializeNode(e,n={}){let i=this.serializeNodeInner(e,n);for(let s=e.marks.length-1;s>=0;s--){let l=this.serializeMark(e.marks[s],e.isInline,n);l&&((l.contentDOM||l.dom).appendChild(i),i=l.dom)}return i}serializeMark(e,n,i={}){let s=this.marks[e.type.name];return s&&tf(Np(i),s(e,n),null,e.attrs)}static renderSpec(e,n,i=null,s){return tf(e,n,i,s)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Ms(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=$1(e.nodes);return n.text||(n.text=i=>i.text),n}static marksFromSchema(e){return $1(e.marks)}}function $1(t){let e={};for(let n in t){let i=t[n].spec.toDOM;i&&(e[n]=i)}return e}function Np(t){return t.document||window.document}const Y1=new WeakMap;function XM(t){let e=Y1.get(t);return e===void 0&&Y1.set(t,e=ZM(t)),e}function ZM(t){let e=null;function n(i){if(i&&typeof i=="object")if(Array.isArray(i))if(typeof i[0]=="string")e||(e=[]),e.push(i);else for(let s=0;s<i.length;s++)n(i[s]);else for(let s in i)n(i[s])}return n(t),e}function tf(t,e,n,i){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let s=e[0],l;if(typeof s!="string")throw new RangeError("Invalid array passed to renderSpec");if(i&&(l=XM(i))&&l.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let c=s.indexOf(" ");c>0&&(n=s.slice(0,c),s=s.slice(c+1));let u,d=n?t.createElementNS(n,s):t.createElement(s),p=e[1],y=1;if(p&&typeof p=="object"&&p.nodeType==null&&!Array.isArray(p)){y=2;for(let b in p)if(p[b]!=null){let v=b.indexOf(" ");v>0?d.setAttributeNS(b.slice(0,v),b.slice(v+1),p[b]):b=="style"&&d.style?d.style.cssText=p[b]:d.setAttribute(b,p[b])}}for(let b=y;b<e.length;b++){let v=e[b];if(v===0){if(b<e.length-1||b>y)throw new RangeError("Content hole must be the only child of its parent node");return{dom:d,contentDOM:d}}else{let{dom:x,contentDOM:k}=tf(t,v,n,i);if(d.appendChild(x),k){if(u)throw new RangeError("Multiple content holes");u=k}}}return{dom:d,contentDOM:u}}const iS=65535,oS=Math.pow(2,16);function eA(t,e){return t+e*oS}function K1(t){return t&iS}function tA(t){return(t-(t&iS))/oS}const sS=1,lS=2,nf=4,aS=8;class xm{constructor(e,n,i){this.pos=e,this.delInfo=n,this.recover=i}get deleted(){return(this.delInfo&aS)>0}get deletedBefore(){return(this.delInfo&(sS|nf))>0}get deletedAfter(){return(this.delInfo&(lS|nf))>0}get deletedAcross(){return(this.delInfo&nf)>0}}class Yn{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&Yn.empty)return Yn.empty}recover(e){let n=0,i=K1(e);if(!this.inverted)for(let s=0;s<i;s++)n+=this.ranges[s*3+2]-this.ranges[s*3+1];return this.ranges[i*3]+n+tA(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,i){let s=0,l=this.inverted?2:1,c=this.inverted?1:2;for(let u=0;u<this.ranges.length;u+=3){let d=this.ranges[u]-(this.inverted?s:0);if(d>e)break;let p=this.ranges[u+l],y=this.ranges[u+c],b=d+p;if(e<=b){let v=p?e==d?-1:e==b?1:n:n,x=d+s+(v<0?0:y);if(i)return x;let k=e==(n<0?d:b)?null:eA(u/3,e-d),C=e==d?lS:e==b?sS:nf;return(n<0?e!=d:e!=b)&&(C|=aS),new xm(x,C,k)}s+=y-p}return i?e+s:new xm(e+s,0,null)}touches(e,n){let i=0,s=K1(n),l=this.inverted?2:1,c=this.inverted?1:2;for(let u=0;u<this.ranges.length;u+=3){let d=this.ranges[u]-(this.inverted?i:0);if(d>e)break;let p=this.ranges[u+l],y=d+p;if(e<=y&&u==s*3)return!0;i+=this.ranges[u+c]-p}return!1}forEach(e){let n=this.inverted?2:1,i=this.inverted?1:2;for(let s=0,l=0;s<this.ranges.length;s+=3){let c=this.ranges[s],u=c-(this.inverted?l:0),d=c+(this.inverted?0:l),p=this.ranges[s+n],y=this.ranges[s+i];e(u,u+p,d,d+y),l+=y-p}}invert(){return new Yn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Yn.empty:new Yn(e<0?[0,-e,0]:[0,0,e])}}Yn.empty=new Yn([]);class oc{constructor(e,n,i=0,s=e?e.length:0){this.mirror=n,this.from=i,this.to=s,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new oc(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,i=this._maps.length;n<e._maps.length;n++){let s=e.getMirror(n);this.appendMap(e._maps[n],s!=null&&s<n?i+s:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,i=this._maps.length+e._maps.length;n>=0;n--){let s=e.getMirror(n);this.appendMap(e._maps[n].invert(),s!=null&&s>n?i-s-1:void 0)}}invert(){let e=new oc;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let i=this.from;i<this.to;i++)e=this._maps[i].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,i){let s=0;for(let l=this.from;l<this.to;l++){let c=this._maps[l],u=c.mapResult(e,n);if(u.recover!=null){let d=this.getMirror(l);if(d!=null&&d>l&&d<this.to){l=d,e=this._maps[d].recover(u.recover);continue}}s|=u.delInfo,e=u.pos}return i?e:new xm(e,s,null)}}const zp=Object.create(null);class xn{getMap(){return Yn.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let i=zp[n.stepType];if(!i)throw new RangeError(`No step type ${n.stepType} defined`);return i.fromJSON(e,n)}static jsonID(e,n){if(e in zp)throw new RangeError("Duplicate use of step JSON ID "+e);return zp[e]=n,n.prototype.jsonID=e,n}}class Ft{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new Ft(e,null)}static fail(e){return new Ft(null,e)}static fromReplace(e,n,i,s){try{return Ft.ok(e.replace(n,i,s))}catch(l){if(l instanceof df)return Ft.fail(l.message);throw l}}}function Xm(t,e,n){let i=[];for(let s=0;s<t.childCount;s++){let l=t.child(s);l.content.size&&(l=l.copy(Xm(l.content,e,l))),l.isInline&&(l=e(l,n,s)),i.push(l)}return J.fromArray(i)}class So extends xn{constructor(e,n,i){super(),this.from=e,this.to=n,this.mark=i}apply(e){let n=e.slice(this.from,this.to),i=e.resolve(this.from),s=i.node(i.sharedDepth(this.to)),l=new ae(Xm(n.content,(c,u)=>!c.isAtom||!u.type.allowsMarkType(this.mark.type)?c:c.mark(this.mark.addToSet(c.marks)),s),n.openStart,n.openEnd);return Ft.fromReplace(e,this.from,this.to,l)}invert(){return new Tr(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return n.deleted&&i.deleted||n.pos>=i.pos?null:new So(n.pos,i.pos,this.mark)}merge(e){return e instanceof So&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new So(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new So(n.from,n.to,e.markFromJSON(n.mark))}}xn.jsonID("addMark",So);class Tr extends xn{constructor(e,n,i){super(),this.from=e,this.to=n,this.mark=i}apply(e){let n=e.slice(this.from,this.to),i=new ae(Xm(n.content,s=>s.mark(this.mark.removeFromSet(s.marks)),e),n.openStart,n.openEnd);return Ft.fromReplace(e,this.from,this.to,i)}invert(){return new So(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return n.deleted&&i.deleted||n.pos>=i.pos?null:new Tr(n.pos,i.pos,this.mark)}merge(e){return e instanceof Tr&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Tr(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Tr(n.from,n.to,e.markFromJSON(n.mark))}}xn.jsonID("removeMark",Tr);class ko extends xn{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Ft.fail("No node at mark step's position");let i=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Ft.fromReplace(e,this.pos,this.pos+1,new ae(J.from(i),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let i=this.mark.addToSet(n.marks);if(i.length==n.marks.length){for(let s=0;s<n.marks.length;s++)if(!n.marks[s].isInSet(i))return new ko(this.pos,n.marks[s]);return new ko(this.pos,this.mark)}}return new Ss(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new ko(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new ko(n.pos,e.markFromJSON(n.mark))}}xn.jsonID("addNodeMark",ko);class Ss extends xn{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return Ft.fail("No node at mark step's position");let i=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Ft.fromReplace(e,this.pos,this.pos+1,new ae(J.from(i),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new ko(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Ss(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Ss(n.pos,e.markFromJSON(n.mark))}}xn.jsonID("removeNodeMark",Ss);class tn extends xn{constructor(e,n,i,s=!1){super(),this.from=e,this.to=n,this.slice=i,this.structure=s}apply(e){return this.structure&&Sm(e,this.from,this.to)?Ft.fail("Structure replace would overwrite content"):Ft.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Yn([this.from,this.to-this.from,this.slice.size])}invert(e){return new tn(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),i=e.mapResult(this.to,-1);return n.deletedAcross&&i.deletedAcross?null:new tn(n.pos,Math.max(n.pos,i.pos),this.slice,this.structure)}merge(e){if(!(e instanceof tn)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?ae.empty:new ae(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new tn(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?ae.empty:new ae(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new tn(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new tn(n.from,n.to,ae.fromJSON(e,n.slice),!!n.structure)}}xn.jsonID("replace",tn);class rn extends xn{constructor(e,n,i,s,l,c,u=!1){super(),this.from=e,this.to=n,this.gapFrom=i,this.gapTo=s,this.slice=l,this.insert=c,this.structure=u}apply(e){if(this.structure&&(Sm(e,this.from,this.gapFrom)||Sm(e,this.gapTo,this.to)))return Ft.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Ft.fail("Gap is not a flat range");let i=this.slice.insertAt(this.insert,n.content);return i?Ft.fromReplace(e,this.from,this.to,i):Ft.fail("Content does not fit in gap")}getMap(){return new Yn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new rn(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),i=e.mapResult(this.to,-1),s=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),l=this.to==this.gapTo?i.pos:e.map(this.gapTo,1);return n.deletedAcross&&i.deletedAcross||s<n.pos||l>i.pos?null:new rn(n.pos,i.pos,s,l,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new rn(n.from,n.to,n.gapFrom,n.gapTo,ae.fromJSON(e,n.slice),n.insert,!!n.structure)}}xn.jsonID("replaceAround",rn);function Sm(t,e,n){let i=t.resolve(e),s=n-e,l=i.depth;for(;s>0&&l>0&&i.indexAfter(l)==i.node(l).childCount;)l--,s--;if(s>0){let c=i.node(l).maybeChild(i.indexAfter(l));for(;s>0;){if(!c||c.isLeaf)return!0;c=c.firstChild,s--}}return!1}function nA(t,e,n,i){let s=[],l=[],c,u;t.doc.nodesBetween(e,n,(d,p,y)=>{if(!d.isInline)return;let b=d.marks;if(!i.isInSet(b)&&y.type.allowsMarkType(i.type)){let v=Math.max(p,e),x=Math.min(p+d.nodeSize,n),k=i.addToSet(b);for(let C=0;C<b.length;C++)b[C].isInSet(k)||(c&&c.to==v&&c.mark.eq(b[C])?c.to=x:s.push(c=new Tr(v,x,b[C])));u&&u.to==v?u.to=x:l.push(u=new So(v,x,i))}}),s.forEach(d=>t.step(d)),l.forEach(d=>t.step(d))}function rA(t,e,n,i){let s=[],l=0;t.doc.nodesBetween(e,n,(c,u)=>{if(!c.isInline)return;l++;let d=null;if(i instanceof od){let p=c.marks,y;for(;y=i.isInSet(p);)(d||(d=[])).push(y),p=y.removeFromSet(p)}else i?i.isInSet(c.marks)&&(d=[i]):d=c.marks;if(d&&d.length){let p=Math.min(u+c.nodeSize,n);for(let y=0;y<d.length;y++){let b=d[y],v;for(let x=0;x<s.length;x++){let k=s[x];k.step==l-1&&b.eq(s[x].style)&&(v=k)}v?(v.to=p,v.step=l):s.push({style:b,from:Math.max(u,e),to:p,step:l})}}}),s.forEach(c=>t.step(new Tr(c.from,c.to,c.style)))}function Zm(t,e,n,i=n.contentMatch,s=!0){let l=t.doc.nodeAt(e),c=[],u=e+1;for(let d=0;d<l.childCount;d++){let p=l.child(d),y=u+p.nodeSize,b=i.matchType(p.type);if(!b)c.push(new tn(u,y,ae.empty));else{i=b;for(let v=0;v<p.marks.length;v++)n.allowsMarkType(p.marks[v].type)||t.step(new Tr(u,y,p.marks[v]));if(s&&p.isText&&n.whitespace!="pre"){let v,x=/\r?\n|\r/g,k;for(;v=x.exec(p.text);)k||(k=new ae(J.from(n.schema.text(" ",n.allowedMarks(p.marks))),0,0)),c.push(new tn(u+v.index,u+v.index+v[0].length,k))}}u=y}if(!i.validEnd){let d=i.fillBefore(J.empty,!0);t.replace(u,u,new ae(d,0,0))}for(let d=c.length-1;d>=0;d--)t.step(c[d])}function iA(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function Hl(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let i=t.depth,s=0,l=0;;--i){let c=t.$from.node(i),u=t.$from.index(i)+s,d=t.$to.indexAfter(i)-l;if(i<t.depth&&c.canReplace(u,d,n))return i;if(i==0||c.type.spec.isolating||!iA(c,u,d))break;u&&(s=1),d<c.childCount&&(l=1)}return null}function oA(t,e,n){let{$from:i,$to:s,depth:l}=e,c=i.before(l+1),u=s.after(l+1),d=c,p=u,y=J.empty,b=0;for(let k=l,C=!1;k>n;k--)C||i.index(k)>0?(C=!0,y=J.from(i.node(k).copy(y)),b++):d--;let v=J.empty,x=0;for(let k=l,C=!1;k>n;k--)C||s.after(k+1)<s.end(k)?(C=!0,v=J.from(s.node(k).copy(v)),x++):p++;t.step(new rn(d,p,c,u,new ae(y.append(v),b,x),y.size-b,!0))}function eg(t,e,n=null,i=t){let s=sA(t,e),l=s&&lA(i,e);return l?s.map(Q1).concat({type:e,attrs:n}).concat(l.map(Q1)):null}function Q1(t){return{type:t,attrs:null}}function sA(t,e){let{parent:n,startIndex:i,endIndex:s}=t,l=n.contentMatchAt(i).findWrapping(e);if(!l)return null;let c=l.length?l[0]:e;return n.canReplaceWith(i,s,c)?l:null}function lA(t,e){let{parent:n,startIndex:i,endIndex:s}=t,l=n.child(i),c=e.contentMatch.findWrapping(l.type);if(!c)return null;let d=(c.length?c[c.length-1]:e).contentMatch;for(let p=i;d&&p<s;p++)d=d.matchType(n.child(p).type);return!d||!d.validEnd?null:c}function aA(t,e,n){let i=J.empty;for(let c=n.length-1;c>=0;c--){if(i.size){let u=n[c].type.contentMatch.matchFragment(i);if(!u||!u.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}i=J.from(n[c].type.create(n[c].attrs,i))}let s=e.start,l=e.end;t.step(new rn(s,l,s,l,new ae(i,0,0),n.length,!0))}function cA(t,e,n,i,s){if(!i.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let l=t.steps.length;t.doc.nodesBetween(e,n,(c,u)=>{let d=typeof s=="function"?s(c):s;if(c.isTextblock&&!c.hasMarkup(i,d)&&uA(t.doc,t.mapping.slice(l).map(u),i)){let p=null;if(i.schema.linebreakReplacement){let x=i.whitespace=="pre",k=!!i.contentMatch.matchType(i.schema.linebreakReplacement);x&&!k?p=!1:!x&&k&&(p=!0)}p===!1&&uS(t,c,u,l),Zm(t,t.mapping.slice(l).map(u,1),i,void 0,p===null);let y=t.mapping.slice(l),b=y.map(u,1),v=y.map(u+c.nodeSize,1);return t.step(new rn(b,v,b+1,v-1,new ae(J.from(i.create(d,null,c.marks)),0,0),1,!0)),p===!0&&cS(t,c,u,l),!1}})}function cS(t,e,n,i){e.forEach((s,l)=>{if(s.isText){let c,u=/\r?\n|\r/g;for(;c=u.exec(s.text);){let d=t.mapping.slice(i).map(n+1+l+c.index);t.replaceWith(d,d+1,e.type.schema.linebreakReplacement.create())}}})}function uS(t,e,n,i){e.forEach((s,l)=>{if(s.type==s.type.schema.linebreakReplacement){let c=t.mapping.slice(i).map(n+1+l);t.replaceWith(c,c+1,e.type.schema.text(`
`))}})}function uA(t,e,n){let i=t.resolve(e),s=i.index();return i.parent.canReplaceWith(s,s+1,n)}function fA(t,e,n,i,s){let l=t.doc.nodeAt(e);if(!l)throw new RangeError("No node at given position");n||(n=l.type);let c=n.create(i,null,s||l.marks);if(l.isLeaf)return t.replaceWith(e,e+l.nodeSize,c);if(!n.validContent(l.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new rn(e,e+l.nodeSize,e+1,e+l.nodeSize-1,new ae(J.from(c),0,0),1,!0))}function wi(t,e,n=1,i){let s=t.resolve(e),l=s.depth-n,c=i&&i[i.length-1]||s.parent;if(l<0||s.parent.type.spec.isolating||!s.parent.canReplace(s.index(),s.parent.childCount)||!c.type.validContent(s.parent.content.cutByIndex(s.index(),s.parent.childCount)))return!1;for(let p=s.depth-1,y=n-2;p>l;p--,y--){let b=s.node(p),v=s.index(p);if(b.type.spec.isolating)return!1;let x=b.content.cutByIndex(v,b.childCount),k=i&&i[y+1];k&&(x=x.replaceChild(0,k.type.create(k.attrs)));let C=i&&i[y]||b;if(!b.canReplace(v+1,b.childCount)||!C.type.validContent(x))return!1}let u=s.indexAfter(l),d=i&&i[0];return s.node(l).canReplaceWith(u,u,d?d.type:s.node(l+1).type)}function dA(t,e,n=1,i){let s=t.doc.resolve(e),l=J.empty,c=J.empty;for(let u=s.depth,d=s.depth-n,p=n-1;u>d;u--,p--){l=J.from(s.node(u).copy(l));let y=i&&i[p];c=J.from(y?y.type.create(y.attrs,c):s.node(u).copy(c))}t.step(new tn(e,e,new ae(l.append(c),n,n),!0))}function Oo(t,e){let n=t.resolve(e),i=n.index();return fS(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(i,i+1)}function hA(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:i}=t.type.schema;for(let s=0;s<e.childCount;s++){let l=e.child(s),c=l.type==i?t.type.schema.nodes.text:l.type;if(n=n.matchType(c),!n||!t.type.allowsMarks(l.marks))return!1}return n.validEnd}function fS(t,e){return!!(t&&e&&!t.isLeaf&&hA(t,e))}function sd(t,e,n=-1){let i=t.resolve(e);for(let s=i.depth;;s--){let l,c,u=i.index(s);if(s==i.depth?(l=i.nodeBefore,c=i.nodeAfter):n>0?(l=i.node(s+1),u++,c=i.node(s).maybeChild(u)):(l=i.node(s).maybeChild(u-1),c=i.node(s+1)),l&&!l.isTextblock&&fS(l,c)&&i.node(s).canReplace(u,u+1))return e;if(s==0)break;e=n<0?i.before(s):i.after(s)}}function pA(t,e,n){let i=null,{linebreakReplacement:s}=t.doc.type.schema,l=t.doc.resolve(e-n),c=l.node().type;if(s&&c.inlineContent){let y=c.whitespace=="pre",b=!!c.contentMatch.matchType(s);y&&!b?i=!1:!y&&b&&(i=!0)}let u=t.steps.length;if(i===!1){let y=t.doc.resolve(e+n);uS(t,y.node(),y.before(),u)}c.inlineContent&&Zm(t,e+n-1,c,l.node().contentMatchAt(l.index()),i==null);let d=t.mapping.slice(u),p=d.map(e-n);if(t.step(new tn(p,d.map(e+n,-1),ae.empty,!0)),i===!0){let y=t.doc.resolve(p);cS(t,y.node(),y.before(),t.steps.length)}return t}function mA(t,e,n){let i=t.resolve(e);if(i.parent.canReplaceWith(i.index(),i.index(),n))return e;if(i.parentOffset==0)for(let s=i.depth-1;s>=0;s--){let l=i.index(s);if(i.node(s).canReplaceWith(l,l,n))return i.before(s+1);if(l>0)return null}if(i.parentOffset==i.parent.content.size)for(let s=i.depth-1;s>=0;s--){let l=i.indexAfter(s);if(i.node(s).canReplaceWith(l,l,n))return i.after(s+1);if(l<i.node(s).childCount)return null}return null}function dS(t,e,n){let i=t.resolve(e);if(!n.content.size)return e;let s=n.content;for(let l=0;l<n.openStart;l++)s=s.firstChild.content;for(let l=1;l<=(n.openStart==0&&n.size?2:1);l++)for(let c=i.depth;c>=0;c--){let u=c==i.depth?0:i.pos<=(i.start(c+1)+i.end(c+1))/2?-1:1,d=i.index(c)+(u>0?1:0),p=i.node(c),y=!1;if(l==1)y=p.canReplace(d,d,s);else{let b=p.contentMatchAt(d).findWrapping(s.firstChild.type);y=b&&p.canReplaceWith(d,d,b[0])}if(y)return u==0?i.pos:u<0?i.before(c+1):i.after(c+1)}return null}function ld(t,e,n=e,i=ae.empty){if(e==n&&!i.size)return null;let s=t.resolve(e),l=t.resolve(n);return hS(s,l,i)?new tn(e,n,i):new gA(s,l,i).fit()}function hS(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class gA{constructor(e,n,i){this.$from=e,this.$to=n,this.unplaced=i,this.frontier=[],this.placed=J.empty;for(let s=0;s<=e.depth;s++){let l=e.node(s);this.frontier.push({type:l.type,match:l.contentMatchAt(e.indexAfter(s))})}for(let s=e.depth;s>0;s--)this.placed=J.from(e.node(s).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let p=this.findFittable();p?this.placeNodes(p):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,i=this.$from,s=this.close(e<0?this.$to:i.doc.resolve(e));if(!s)return null;let l=this.placed,c=i.depth,u=s.depth;for(;c&&u&&l.childCount==1;)l=l.firstChild.content,c--,u--;let d=new ae(l,c,u);return e>-1?new rn(i.pos,e,this.$to.pos,this.$to.end(),d,n):d.size||i.pos!=this.$to.pos?new tn(i.pos,s.pos,d):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,i=0,s=this.unplaced.openEnd;i<e;i++){let l=n.firstChild;if(n.childCount>1&&(s=0),l.type.spec.isolating&&s<=i){e=i;break}n=l.content}for(let n=1;n<=2;n++)for(let i=n==1?e:this.unplaced.openStart;i>=0;i--){let s,l=null;i?(l=Rp(this.unplaced.content,i-1).firstChild,s=l.content):s=this.unplaced.content;let c=s.firstChild;for(let u=this.depth;u>=0;u--){let{type:d,match:p}=this.frontier[u],y,b=null;if(n==1&&(c?p.matchType(c.type)||(b=p.fillBefore(J.from(c),!1)):l&&d.compatibleContent(l.type)))return{sliceDepth:i,frontierDepth:u,parent:l,inject:b};if(n==2&&c&&(y=p.findWrapping(c.type)))return{sliceDepth:i,frontierDepth:u,parent:l,wrap:y};if(l&&p.matchType(l.type))break}}}openMore(){let{content:e,openStart:n,openEnd:i}=this.unplaced,s=Rp(e,n);return!s.childCount||s.firstChild.isLeaf?!1:(this.unplaced=new ae(e,n+1,Math.max(i,s.size+n>=e.size-i?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:i}=this.unplaced,s=Rp(e,n);if(s.childCount<=1&&n>0){let l=e.size-n<=n+s.size;this.unplaced=new ae(qa(e,n-1,1),n-1,l?n-1:i)}else this.unplaced=new ae(qa(e,n,1),n,i)}placeNodes({sliceDepth:e,frontierDepth:n,parent:i,inject:s,wrap:l}){for(;this.depth>n;)this.closeFrontierNode();if(l)for(let C=0;C<l.length;C++)this.openFrontierNode(l[C]);let c=this.unplaced,u=i?i.content:c.content,d=c.openStart-e,p=0,y=[],{match:b,type:v}=this.frontier[n];if(s){for(let C=0;C<s.childCount;C++)y.push(s.child(C));b=b.matchFragment(s)}let x=u.size+e-(c.content.size-c.openEnd);for(;p<u.childCount;){let C=u.child(p),E=b.matchType(C.type);if(!E)break;p++,(p>1||d==0||C.content.size)&&(b=E,y.push(pS(C.mark(v.allowedMarks(C.marks)),p==1?d:0,p==u.childCount?x:-1)))}let k=p==u.childCount;k||(x=-1),this.placed=Va(this.placed,n,J.from(y)),this.frontier[n].match=b,k&&x<0&&i&&i.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let C=0,E=u;C<x;C++){let M=E.lastChild;this.frontier.push({type:M.type,match:M.contentMatchAt(M.childCount)}),E=M.content}this.unplaced=k?e==0?ae.empty:new ae(qa(c.content,e-1,1),e-1,x<0?c.openEnd:e-1):new ae(qa(c.content,e,p),c.openStart,c.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!Dp(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:i}=this.$to,s=this.$to.after(i);for(;i>1&&s==this.$to.end(--i);)++s;return s}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:i,type:s}=this.frontier[n],l=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),c=Dp(e,n,s,i,l);if(c){for(let u=n-1;u>=0;u--){let{match:d,type:p}=this.frontier[u],y=Dp(e,u,p,d,!0);if(!y||y.childCount)continue e}return{depth:n,fit:c,move:l?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Va(this.placed,n.depth,n.fit)),e=n.move;for(let i=n.depth+1;i<=e.depth;i++){let s=e.node(i),l=s.type.contentMatch.fillBefore(s.content,!0,e.index(i));this.openFrontierNode(s.type,s.attrs,l)}return e}openFrontierNode(e,n=null,i){let s=this.frontier[this.depth];s.match=s.match.matchType(e),this.placed=Va(this.placed,this.depth,J.from(e.create(n,i))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(J.empty,!0);n.childCount&&(this.placed=Va(this.placed,this.frontier.length,n))}}function qa(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(qa(t.firstChild.content,e-1,n)))}function Va(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Va(t.lastChild.content,e-1,n)))}function Rp(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function pS(t,e,n){if(e<=0)return t;let i=t.content;return e>1&&(i=i.replaceChild(0,pS(i.firstChild,e-1,i.childCount==1?n-1:0))),e>0&&(i=t.type.contentMatch.fillBefore(i).append(i),n<=0&&(i=i.append(t.type.contentMatch.matchFragment(i).fillBefore(J.empty,!0)))),t.copy(i)}function Dp(t,e,n,i,s){let l=t.node(e),c=s?t.indexAfter(e):t.index(e);if(c==l.childCount&&!n.compatibleContent(l.type))return null;let u=i.fillBefore(l.content,!0,c);return u&&!yA(n,l.content,c)?u:null}function yA(t,e,n){for(let i=n;i<e.childCount;i++)if(!t.allowsMarks(e.child(i).marks))return!0;return!1}function bA(t){return t.spec.defining||t.spec.definingForContent}function vA(t,e,n,i){if(!i.size)return t.deleteRange(e,n);let s=t.doc.resolve(e),l=t.doc.resolve(n);if(hS(s,l,i))return t.step(new tn(e,n,i));let c=gS(s,l);c[c.length-1]==0&&c.pop();let u=-(s.depth+1);c.unshift(u);for(let v=s.depth,x=s.pos-1;v>0;v--,x--){let k=s.node(v).type.spec;if(k.defining||k.definingAsContext||k.isolating)break;c.indexOf(v)>-1?u=v:s.before(v)==x&&c.splice(1,0,-v)}let d=c.indexOf(u),p=[],y=i.openStart;for(let v=i.content,x=0;;x++){let k=v.firstChild;if(p.push(k),x==i.openStart)break;v=k.content}for(let v=y-1;v>=0;v--){let x=p[v],k=bA(x.type);if(k&&!x.sameMarkup(s.node(Math.abs(u)-1)))y=v;else if(k||!x.type.isTextblock)break}for(let v=i.openStart;v>=0;v--){let x=(v+y+1)%(i.openStart+1),k=p[x];if(k)for(let C=0;C<c.length;C++){let E=c[(C+d)%c.length],M=!0;E<0&&(M=!1,E=-E);let _=s.node(E-1),N=s.index(E-1);if(_.canReplaceWith(N,N,k.type,k.marks))return t.replace(s.before(E),M?l.after(E):n,new ae(mS(i.content,0,i.openStart,x),x,i.openEnd))}}let b=t.steps.length;for(let v=c.length-1;v>=0&&(t.replace(e,n,i),!(t.steps.length>b));v--){let x=c[v];x<0||(e=s.before(x),n=l.after(x))}}function mS(t,e,n,i,s){if(e<n){let l=t.firstChild;t=t.replaceChild(0,l.copy(mS(l.content,e+1,n,i,l)))}if(e>i){let l=s.contentMatchAt(0),c=l.fillBefore(t).append(t);t=c.append(l.matchFragment(c).fillBefore(J.empty,!0))}return t}function xA(t,e,n,i){if(!i.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let s=mA(t.doc,e,i.type);s!=null&&(e=n=s)}t.replaceRange(e,n,new ae(J.from(i),0,0))}function SA(t,e,n){let i=t.doc.resolve(e),s=t.doc.resolve(n),l=gS(i,s);for(let c=0;c<l.length;c++){let u=l[c],d=c==l.length-1;if(d&&u==0||i.node(u).type.contentMatch.validEnd)return t.delete(i.start(u),s.end(u));if(u>0&&(d||i.node(u-1).canReplace(i.index(u-1),s.indexAfter(u-1))))return t.delete(i.before(u),s.after(u))}for(let c=1;c<=i.depth&&c<=s.depth;c++)if(e-i.start(c)==i.depth-c&&n>i.end(c)&&s.end(c)-n!=s.depth-c&&i.start(c-1)==s.start(c-1)&&i.node(c-1).canReplace(i.index(c-1),s.index(c-1)))return t.delete(i.before(c),n);t.delete(e,n)}function gS(t,e){let n=[],i=Math.min(t.depth,e.depth);for(let s=i;s>=0;s--){let l=t.start(s);if(l<t.pos-(t.depth-s)||e.end(s)>e.pos+(e.depth-s)||t.node(s).type.spec.isolating||e.node(s).type.spec.isolating)break;(l==e.start(s)||s==t.depth&&s==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&s&&e.start(s-1)==l-1)&&n.push(s)}return n}class Al extends xn{constructor(e,n,i){super(),this.pos=e,this.attr=n,this.value=i}apply(e){let n=e.nodeAt(this.pos);if(!n)return Ft.fail("No node at attribute step's position");let i=Object.create(null);for(let l in n.attrs)i[l]=n.attrs[l];i[this.attr]=this.value;let s=n.type.create(i,null,n.marks);return Ft.fromReplace(e,this.pos,this.pos+1,new ae(J.from(s),0,n.isLeaf?0:1))}getMap(){return Yn.empty}invert(e){return new Al(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Al(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Al(n.pos,n.attr,n.value)}}xn.jsonID("attr",Al);class sc extends xn{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let s in e.attrs)n[s]=e.attrs[s];n[this.attr]=this.value;let i=e.type.create(n,e.content,e.marks);return Ft.ok(i)}getMap(){return Yn.empty}invert(e){return new sc(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new sc(n.attr,n.value)}}xn.jsonID("docAttr",sc);let jl=class extends Error{};jl=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};jl.prototype=Object.create(Error.prototype);jl.prototype.constructor=jl;jl.prototype.name="TransformError";class yS{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new oc}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new jl(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}changedRange(){let e=1e9,n=-1e9;for(let i=0;i<this.mapping.maps.length;i++){let s=this.mapping.maps[i];i&&(e=s.map(e,1),n=s.map(n,-1)),s.forEach((l,c,u,d)=>{e=Math.min(e,u),n=Math.max(n,d)})}return e==1e9?null:{from:e,to:n}}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,i=ae.empty){let s=ld(this.doc,e,n,i);return s&&this.step(s),this}replaceWith(e,n,i){return this.replace(e,n,new ae(J.from(i),0,0))}delete(e,n){return this.replace(e,n,ae.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,i){return vA(this,e,n,i),this}replaceRangeWith(e,n,i){return xA(this,e,n,i),this}deleteRange(e,n){return SA(this,e,n),this}lift(e,n){return oA(this,e,n),this}join(e,n=1){return pA(this,e,n),this}wrap(e,n){return aA(this,e,n),this}setBlockType(e,n=e,i,s=null){return cA(this,e,n,i,s),this}setNodeMarkup(e,n,i=null,s){return fA(this,e,n,i,s),this}setNodeAttribute(e,n,i){return this.step(new Al(e,n,i)),this}setDocAttribute(e,n){return this.step(new sc(e,n)),this}addNodeMark(e,n){return this.step(new ko(e,n)),this}removeNodeMark(e,n){let i=this.doc.nodeAt(e);if(!i)throw new RangeError("No node at position "+e);if(n instanceof gt)n.isInSet(i.marks)&&this.step(new Ss(e,n));else{let s=i.marks,l,c=[];for(;l=n.isInSet(s);)c.push(new Ss(e,l)),s=l.removeFromSet(s);for(let u=c.length-1;u>=0;u--)this.step(c[u])}return this}split(e,n=1,i){return dA(this,e,n,i),this}addMark(e,n,i){return nA(this,e,n,i),this}removeMark(e,n,i){return rA(this,e,n,i),this}clearIncompatible(e,n,i){return Zm(this,e,n,i),this}}const Lp=Object.create(null);class Ue{constructor(e,n,i){this.$anchor=e,this.$head=n,this.ranges=i||[new kA(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=ae.empty){let i=n.content.lastChild,s=null;for(let u=0;u<n.openEnd;u++)s=i,i=i.lastChild;let l=e.steps.length,c=this.ranges;for(let u=0;u<c.length;u++){let{$from:d,$to:p}=c[u],y=e.mapping.slice(l);e.replaceRange(y.map(d.pos),y.map(p.pos),u?ae.empty:n),u==0&&Z1(e,l,(i?i.isInline:s&&s.isTextblock)?-1:1)}}replaceWith(e,n){let i=e.steps.length,s=this.ranges;for(let l=0;l<s.length;l++){let{$from:c,$to:u}=s[l],d=e.mapping.slice(i),p=d.map(c.pos),y=d.map(u.pos);l?e.deleteRange(p,y):(e.replaceRangeWith(p,y,n),Z1(e,i,n.isInline?-1:1))}}static findFrom(e,n,i=!1){let s=e.parent.inlineContent?new _e(e):Sl(e.node(0),e.parent,e.pos,e.index(),n,i);if(s)return s;for(let l=e.depth-1;l>=0;l--){let c=n<0?Sl(e.node(0),e.node(l),e.before(l+1),e.index(l),n,i):Sl(e.node(0),e.node(l),e.after(l+1),e.index(l)+1,n,i);if(c)return c}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new Kn(e.node(0))}static atStart(e){return Sl(e,e,0,0,1)||new Kn(e)}static atEnd(e){return Sl(e,e,e.content.size,e.childCount,-1)||new Kn(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let i=Lp[n.type];if(!i)throw new RangeError(`No selection type ${n.type} defined`);return i.fromJSON(e,n)}static jsonID(e,n){if(e in Lp)throw new RangeError("Duplicate use of selection JSON ID "+e);return Lp[e]=n,n.prototype.jsonID=e,n}getBookmark(){return _e.between(this.$anchor,this.$head).getBookmark()}}Ue.prototype.visible=!0;class kA{constructor(e,n){this.$from=e,this.$to=n}}let J1=!1;function X1(t){!J1&&!t.parent.inlineContent&&(J1=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class _e extends Ue{constructor(e,n=e){X1(e),X1(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let i=e.resolve(n.map(this.head));if(!i.parent.inlineContent)return Ue.near(i);let s=e.resolve(n.map(this.anchor));return new _e(s.parent.inlineContent?s:i,i)}replace(e,n=ae.empty){if(super.replace(e,n),n==ae.empty){let i=this.$from.marksAcross(this.$to);i&&e.ensureMarks(i)}}eq(e){return e instanceof _e&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new ad(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new _e(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,i=n){let s=e.resolve(n);return new this(s,i==n?s:e.resolve(i))}static between(e,n,i){let s=e.pos-n.pos;if((!i||s)&&(i=s>=0?1:-1),!n.parent.inlineContent){let l=Ue.findFrom(n,i,!0)||Ue.findFrom(n,-i,!0);if(l)n=l.$head;else return Ue.near(n,i)}return e.parent.inlineContent||(s==0?e=n:(e=(Ue.findFrom(e,-i,!0)||Ue.findFrom(e,i,!0)).$anchor,e.pos<n.pos!=s<0&&(e=n))),new _e(e,n)}}Ue.jsonID("text",_e);class ad{constructor(e,n){this.anchor=e,this.head=n}map(e){return new ad(e.map(this.anchor),e.map(this.head))}resolve(e){return _e.between(e.resolve(this.anchor),e.resolve(this.head))}}class Ce extends Ue{constructor(e){let n=e.nodeAfter,i=e.node(0).resolve(e.pos+n.nodeSize);super(e,i),this.node=n}map(e,n){let{deleted:i,pos:s}=n.mapResult(this.anchor),l=e.resolve(s);return i?Ue.near(l):new Ce(l)}content(){return new ae(J.from(this.node),0,0)}eq(e){return e instanceof Ce&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new tg(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Ce(e.resolve(n.anchor))}static create(e,n){return new Ce(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Ce.prototype.visible=!1;Ue.jsonID("node",Ce);class tg{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:i}=e.mapResult(this.anchor);return n?new ad(i,i):new tg(i)}resolve(e){let n=e.resolve(this.anchor),i=n.nodeAfter;return i&&Ce.isSelectable(i)?new Ce(n):Ue.near(n)}}class Kn extends Ue{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=ae.empty){if(n==ae.empty){e.delete(0,e.doc.content.size);let i=Ue.atStart(e.doc);i.eq(e.selection)||e.setSelection(i)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new Kn(e)}map(e){return new Kn(e)}eq(e){return e instanceof Kn}getBookmark(){return CA}}Ue.jsonID("all",Kn);const CA={map(){return this},resolve(t){return new Kn(t)}};function Sl(t,e,n,i,s,l=!1){if(e.inlineContent)return _e.create(t,n);for(let c=i-(s>0?0:1);s>0?c<e.childCount:c>=0;c+=s){let u=e.child(c);if(u.isAtom){if(!l&&Ce.isSelectable(u))return Ce.create(t,n-(s<0?u.nodeSize:0))}else{let d=Sl(t,u,n+s,s<0?u.childCount:0,s,l);if(d)return d}n+=u.nodeSize*s}return null}function Z1(t,e,n){let i=t.steps.length-1;if(i<e)return;let s=t.steps[i];if(!(s instanceof tn||s instanceof rn))return;let l=t.mapping.maps[i],c;l.forEach((u,d,p,y)=>{c==null&&(c=y)}),t.setSelection(Ue.near(t.doc.resolve(c),n))}const ev=1,Vu=2,tv=4;class EA extends yS{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|ev)&~Vu,this.storedMarks=null,this}get selectionSet(){return(this.updated&ev)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Vu,this}ensureMarks(e){return gt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Vu)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~Vu,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let i=this.selection;return n&&(e=e.mark(this.storedMarks||(i.empty?i.$from.marks():i.$from.marksAcross(i.$to)||gt.none))),i.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,i){let s=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(s.text(e),!0):this.deleteSelection();{if(i==null&&(i=n),!e)return this.deleteRange(n,i);let l=this.storedMarks;if(!l){let c=this.doc.resolve(n);l=i==n?c.marks():c.marksAcross(this.doc.resolve(i))}return this.replaceRangeWith(n,i,s.text(e,l)),!this.selection.empty&&this.selection.to==n+e.length&&this.setSelection(Ue.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=tv,this}get scrolledIntoView(){return(this.updated&tv)>0}}function nv(t,e){return!e||!t?t:t.bind(e)}class Pa{constructor(e,n,i){this.name=e,this.init=nv(n.init,i),this.apply=nv(n.apply,i)}}const wA=[new Pa("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new Pa("selection",{init(t,e){return t.selection||Ue.atStart(e.doc)},apply(t){return t.selection}}),new Pa("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,i){return i.selection.$cursor?t.storedMarks:null}}),new Pa("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class Bp{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=wA.slice(),n&&n.forEach(i=>{if(this.pluginsByKey[i.key])throw new RangeError("Adding different instances of a keyed plugin ("+i.key+")");this.plugins.push(i),this.pluginsByKey[i.key]=i,i.spec.state&&this.fields.push(new Pa(i.key,i.spec.state,i))})}}class wl{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let i=0;i<this.config.plugins.length;i++)if(i!=n){let s=this.config.plugins[i];if(s.spec.filterTransaction&&!s.spec.filterTransaction.call(s,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],i=this.applyInner(e),s=null;for(;;){let l=!1;for(let c=0;c<this.config.plugins.length;c++){let u=this.config.plugins[c];if(u.spec.appendTransaction){let d=s?s[c].n:0,p=s?s[c].state:this,y=d<n.length&&u.spec.appendTransaction.call(u,d?n.slice(d):n,p,i);if(y&&i.filterTransaction(y,c)){if(y.setMeta("appendedTransaction",e),!s){s=[];for(let b=0;b<this.config.plugins.length;b++)s.push(b<c?{state:i,n:n.length}:{state:this,n:0})}n.push(y),i=i.applyInner(y),l=!0}s&&(s[c]={state:i,n:n.length})}}if(!l)return{state:i,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new wl(this.config),i=this.config.fields;for(let s=0;s<i.length;s++){let l=i[s];n[l.name]=l.apply(e,this[l.name],this,n)}return n}get tr(){return new EA(this)}static create(e){let n=new Bp(e.doc?e.doc.type.schema:e.schema,e.plugins),i=new wl(n);for(let s=0;s<n.fields.length;s++)i[n.fields[s].name]=n.fields[s].init(e,i);return i}reconfigure(e){let n=new Bp(this.schema,e.plugins),i=n.fields,s=new wl(n);for(let l=0;l<i.length;l++){let c=i[l].name;s[c]=this.hasOwnProperty(c)?this[c]:i[l].init(e,s)}return s}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(i=>i.toJSON())),e&&typeof e=="object")for(let i in e){if(i=="doc"||i=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let s=e[i],l=s.spec.state;l&&l.toJSON&&(n[i]=l.toJSON.call(s,this[s.key]))}return n}static fromJSON(e,n,i){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let s=new Bp(e.schema,e.plugins),l=new wl(s);return s.fields.forEach(c=>{if(c.name=="doc")l.doc=Mr.fromJSON(e.schema,n.doc);else if(c.name=="selection")l.selection=Ue.fromJSON(l.doc,n.selection);else if(c.name=="storedMarks")n.storedMarks&&(l.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(i)for(let u in i){let d=i[u],p=d.spec.state;if(d.key==c.name&&p&&p.fromJSON&&Object.prototype.hasOwnProperty.call(n,u)){l[c.name]=p.fromJSON.call(d,e,n[u],l);return}}l[c.name]=c.init(e,l)}}),l}}function bS(t,e,n){for(let i in t){let s=t[i];s instanceof Function?s=s.bind(e):i=="handleDOMEvents"&&(s=bS(s,e,{})),n[i]=s}return n}class At{constructor(e){this.spec=e,this.props={},e.props&&bS(e.props,this,this.props),this.key=e.key?e.key.key:vS("plugin")}getState(e){return e[this.key]}}const Ip=Object.create(null);function vS(t){return t in Ip?t+"$"+ ++Ip[t]:(Ip[t]=0,t+"$")}class Jt{constructor(e="key"){this.key=vS(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const ng=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function xS(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const SS=(t,e,n)=>{let i=xS(t,n);if(!i)return!1;let s=rg(i);if(!s){let c=i.blockRange(),u=c&&Hl(c);return u==null?!1:(e&&e(t.tr.lift(c,u).scrollIntoView()),!0)}let l=s.nodeBefore;if(jS(t,s,e,-1))return!0;if(i.parent.content.size==0&&(Ol(l,"end")||Ce.isSelectable(l)))for(let c=i.depth;;c--){let u=ld(t.doc,i.before(c),i.after(c),ae.empty);if(u&&u.slice.size<u.to-u.from){if(e){let d=t.tr.step(u);d.setSelection(Ol(l,"end")?Ue.findFrom(d.doc.resolve(d.mapping.map(s.pos,-1)),-1):Ce.create(d.doc,s.pos-l.nodeSize)),e(d.scrollIntoView())}return!0}if(c==1||i.node(c-1).childCount>1)break}return l.isAtom&&s.depth==i.depth-1?(e&&e(t.tr.delete(s.pos-l.nodeSize,s.pos).scrollIntoView()),!0):!1},TA=(t,e,n)=>{let i=xS(t,n);if(!i)return!1;let s=rg(i);return s?kS(t,s,e):!1},MA=(t,e,n)=>{let i=ES(t,n);if(!i)return!1;let s=ig(i);return s?kS(t,s,e):!1};function kS(t,e,n){let i=e.nodeBefore,s=i,l=e.pos-1;for(;!s.isTextblock;l--){if(s.type.spec.isolating)return!1;let y=s.lastChild;if(!y)return!1;s=y}let c=e.nodeAfter,u=c,d=e.pos+1;for(;!u.isTextblock;d++){if(u.type.spec.isolating)return!1;let y=u.firstChild;if(!y)return!1;u=y}let p=ld(t.doc,l,d,ae.empty);if(!p||p.from!=l||p instanceof tn&&p.slice.size>=d-l)return!1;if(n){let y=t.tr.step(p);y.setSelection(_e.create(y.doc,l)),n(y.scrollIntoView())}return!0}function Ol(t,e,n=!1){for(let i=t;i;i=e=="start"?i.firstChild:i.lastChild){if(i.isTextblock)return!0;if(n&&i.childCount!=1)return!1}return!1}const CS=(t,e,n)=>{let{$head:i,empty:s}=t.selection,l=i;if(!s)return!1;if(i.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):i.parentOffset>0)return!1;l=rg(i)}let c=l&&l.nodeBefore;return!c||!Ce.isSelectable(c)?!1:(e&&e(t.tr.setSelection(Ce.create(t.doc,l.pos-c.nodeSize)).scrollIntoView()),!0)};function rg(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function ES(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const wS=(t,e,n)=>{let i=ES(t,n);if(!i)return!1;let s=ig(i);if(!s)return!1;let l=s.nodeAfter;if(jS(t,s,e,1))return!0;if(i.parent.content.size==0&&(Ol(l,"start")||Ce.isSelectable(l))){let c=ld(t.doc,i.before(),i.after(),ae.empty);if(c&&c.slice.size<c.to-c.from){if(e){let u=t.tr.step(c);u.setSelection(Ol(l,"start")?Ue.findFrom(u.doc.resolve(u.mapping.map(s.pos)),1):Ce.create(u.doc,u.mapping.map(s.pos))),e(u.scrollIntoView())}return!0}}return l.isAtom&&s.depth==i.depth-1?(e&&e(t.tr.delete(s.pos,s.pos+l.nodeSize).scrollIntoView()),!0):!1},TS=(t,e,n)=>{let{$head:i,empty:s}=t.selection,l=i;if(!s)return!1;if(i.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):i.parentOffset<i.parent.content.size)return!1;l=ig(i)}let c=l&&l.nodeAfter;return!c||!Ce.isSelectable(c)?!1:(e&&e(t.tr.setSelection(Ce.create(t.doc,l.pos)).scrollIntoView()),!0)};function ig(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const AA=(t,e)=>{let n=t.selection,i=n instanceof Ce,s;if(i){if(n.node.isTextblock||!Oo(t.doc,n.from))return!1;s=n.from}else if(s=sd(t.doc,n.from,-1),s==null)return!1;if(e){let l=t.tr.join(s);i&&l.setSelection(Ce.create(l.doc,s-t.doc.resolve(s).nodeBefore.nodeSize)),e(l.scrollIntoView())}return!0},_A=(t,e)=>{let n=t.selection,i;if(n instanceof Ce){if(n.node.isTextblock||!Oo(t.doc,n.to))return!1;i=n.to}else if(i=sd(t.doc,n.to,1),i==null)return!1;return e&&e(t.tr.join(i).scrollIntoView()),!0},jA=(t,e)=>{let{$from:n,$to:i}=t.selection,s=n.blockRange(i),l=s&&Hl(s);return l==null?!1:(e&&e(t.tr.lift(s,l).scrollIntoView()),!0)},MS=(t,e)=>{let{$head:n,$anchor:i}=t.selection;return!n.parent.type.spec.code||!n.sameParent(i)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function og(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const OA=(t,e)=>{let{$head:n,$anchor:i}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(i))return!1;let s=n.node(-1),l=n.indexAfter(-1),c=og(s.contentMatchAt(l));if(!c||!s.canReplaceWith(l,l,c))return!1;if(e){let u=n.after(),d=t.tr.replaceWith(u,u,c.createAndFill());d.setSelection(Ue.near(d.doc.resolve(u),1)),e(d.scrollIntoView())}return!0},AS=(t,e)=>{let n=t.selection,{$from:i,$to:s}=n;if(n instanceof Kn||i.parent.inlineContent||s.parent.inlineContent)return!1;let l=og(s.parent.contentMatchAt(s.indexAfter()));if(!l||!l.isTextblock)return!1;if(e){let c=(!i.parentOffset&&s.index()<s.parent.childCount?i:s).pos,u=t.tr.insert(c,l.createAndFill());u.setSelection(_e.create(u.doc,c+1)),e(u.scrollIntoView())}return!0},_S=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let l=n.before();if(wi(t.doc,l))return e&&e(t.tr.split(l).scrollIntoView()),!0}let i=n.blockRange(),s=i&&Hl(i);return s==null?!1:(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)};function NA(t){return(e,n)=>{let{$from:i,$to:s}=e.selection;if(e.selection instanceof Ce&&e.selection.node.isBlock)return!i.parentOffset||!wi(e.doc,i.pos)?!1:(n&&n(e.tr.split(i.pos).scrollIntoView()),!0);if(!i.depth)return!1;let l=[],c,u,d=!1,p=!1;for(let x=i.depth;;x--)if(i.node(x).isBlock){d=i.end(x)==i.pos+(i.depth-x),p=i.start(x)==i.pos-(i.depth-x),u=og(i.node(x-1).contentMatchAt(i.indexAfter(x-1))),l.unshift(d&&u?{type:u}:null),c=x;break}else{if(x==1)return!1;l.unshift(null)}let y=e.tr;(e.selection instanceof _e||e.selection instanceof Kn)&&y.deleteSelection();let b=y.mapping.map(i.pos),v=wi(y.doc,b,l.length,l);if(v||(l[0]=u?{type:u}:null,v=wi(y.doc,b,l.length,l)),!v)return!1;if(y.split(b,l.length,l),!d&&p&&i.node(c).type!=u){let x=y.mapping.map(i.before(c)),k=y.doc.resolve(x);u&&i.node(c-1).canReplaceWith(k.index(),k.index()+1,u)&&y.setNodeMarkup(y.mapping.map(i.before(c)),u)}return n&&n(y.scrollIntoView()),!0}}const zA=NA(),RA=(t,e)=>{let{$from:n,to:i}=t.selection,s,l=n.sharedDepth(i);return l==0?!1:(s=n.before(l),e&&e(t.tr.setSelection(Ce.create(t.doc,s))),!0)};function DA(t,e,n){let i=e.nodeBefore,s=e.nodeAfter,l=e.index();return!i||!s||!i.type.compatibleContent(s.type)?!1:!i.content.size&&e.parent.canReplace(l-1,l)?(n&&n(t.tr.delete(e.pos-i.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(l,l+1)||!(s.isTextblock||Oo(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function jS(t,e,n,i){let s=e.nodeBefore,l=e.nodeAfter,c,u,d=s.type.spec.isolating||l.type.spec.isolating;if(!d&&DA(t,e,n))return!0;let p=!d&&e.parent.canReplace(e.index(),e.index()+1);if(p&&(c=(u=s.contentMatchAt(s.childCount)).findWrapping(l.type))&&u.matchType(c[0]||l.type).validEnd){if(n){let x=e.pos+l.nodeSize,k=J.empty;for(let M=c.length-1;M>=0;M--)k=J.from(c[M].create(null,k));k=J.from(s.copy(k));let C=t.tr.step(new rn(e.pos-1,x,e.pos,x,new ae(k,1,0),c.length,!0)),E=C.doc.resolve(x+2*c.length);E.nodeAfter&&E.nodeAfter.type==s.type&&Oo(C.doc,E.pos)&&C.join(E.pos),n(C.scrollIntoView())}return!0}let y=l.type.spec.isolating||i>0&&d?null:Ue.findFrom(e,1),b=y&&y.$from.blockRange(y.$to),v=b&&Hl(b);if(v!=null&&v>=e.depth)return n&&n(t.tr.lift(b,v).scrollIntoView()),!0;if(p&&Ol(l,"start",!0)&&Ol(s,"end")){let x=s,k=[];for(;k.push(x),!x.isTextblock;)x=x.lastChild;let C=l,E=1;for(;!C.isTextblock;C=C.firstChild)E++;if(x.canReplace(x.childCount,x.childCount,C.content)){if(n){let M=J.empty;for(let N=k.length-1;N>=0;N--)M=J.from(k[N].copy(M));let _=t.tr.step(new rn(e.pos-k.length,e.pos+l.nodeSize,e.pos+E,e.pos+l.nodeSize-E,new ae(M,k.length,0),0,!0));n(_.scrollIntoView())}return!0}}return!1}function OS(t){return function(e,n){let i=e.selection,s=t<0?i.$from:i.$to,l=s.depth;for(;s.node(l).isInline;){if(!l)return!1;l--}return s.node(l).isTextblock?(n&&n(e.tr.setSelection(_e.create(e.doc,t<0?s.start(l):s.end(l)))),!0):!1}}const LA=OS(-1),BA=OS(1);function IA(t,e=null){return function(n,i){let{$from:s,$to:l}=n.selection,c=s.blockRange(l),u=c&&eg(c,t,e);return u?(i&&i(n.tr.wrap(c,u).scrollIntoView()),!0):!1}}function rv(t,e=null){return function(n,i){let s=!1;for(let l=0;l<n.selection.ranges.length&&!s;l++){let{$from:{pos:c},$to:{pos:u}}=n.selection.ranges[l];n.doc.nodesBetween(c,u,(d,p)=>{if(s)return!1;if(!(!d.isTextblock||d.hasMarkup(t,e)))if(d.type==t)s=!0;else{let y=n.doc.resolve(p),b=y.index();s=y.parent.canReplaceWith(b,b+1,t)}})}if(!s)return!1;if(i){let l=n.tr;for(let c=0;c<n.selection.ranges.length;c++){let{$from:{pos:u},$to:{pos:d}}=n.selection.ranges[c];l.setBlockType(u,d,t,e)}i(l.scrollIntoView())}return!0}}function sg(...t){return function(e,n,i){for(let s=0;s<t.length;s++)if(t[s](e,n,i))return!0;return!1}}sg(ng,SS,CS);sg(ng,wS,TS);sg(MS,AS,_S,zA);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function HA(t,e=null){return function(n,i){let{$from:s,$to:l}=n.selection,c=s.blockRange(l);if(!c)return!1;let u=i?n.tr:null;return UA(u,c,t,e)?(i&&i(u.scrollIntoView()),!0):!1}}function UA(t,e,n,i=null){let s=!1,l=e,c=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let d=c.resolve(e.start-2);l=new pf(d,d,e.depth),e.endIndex<e.parent.childCount&&(e=new pf(e.$from,c.resolve(e.$to.end(e.depth)),e.depth)),s=!0}let u=eg(l,n,i,e);return u?(t&&qA(t,e,u,s,n),!0):!1}function qA(t,e,n,i,s){let l=J.empty;for(let y=n.length-1;y>=0;y--)l=J.from(n[y].type.create(n[y].attrs,l));t.step(new rn(e.start-(i?2:0),e.end,e.start,e.end,new ae(l,0,0),n.length,!0));let c=0;for(let y=0;y<n.length;y++)n[y].type==s&&(c=y+1);let u=n.length-c,d=e.start+n.length-(i?2:0),p=e.parent;for(let y=e.startIndex,b=e.endIndex,v=!0;y<b;y++,v=!1)!v&&wi(t.doc,d,u)&&(t.split(d,u),d+=2*u),d+=p.child(y).nodeSize;return t}function VA(t){return function(e,n){let{$from:i,$to:s}=e.selection,l=i.blockRange(s,c=>c.childCount>0&&c.firstChild.type==t);return l?n?i.node(l.depth-1).type==t?PA(e,n,t,l):WA(e,n,l):!0:!1}}function PA(t,e,n,i){let s=t.tr,l=i.end,c=i.$to.end(i.depth);l<c&&(s.step(new rn(l-1,c,l,c,new ae(J.from(n.create(null,i.parent.copy())),1,0),1,!0)),i=new pf(s.doc.resolve(i.$from.pos),s.doc.resolve(c),i.depth));const u=Hl(i);if(u==null)return!1;s.lift(i,u);let d=s.doc.resolve(s.mapping.map(l,-1)-1);return Oo(s.doc,d.pos)&&d.nodeBefore.type==d.nodeAfter.type&&s.join(d.pos),e(s.scrollIntoView()),!0}function WA(t,e,n){let i=t.tr,s=n.parent;for(let x=n.end,k=n.endIndex-1,C=n.startIndex;k>C;k--)x-=s.child(k).nodeSize,i.delete(x-1,x+1);let l=i.doc.resolve(n.start),c=l.nodeAfter;if(i.mapping.map(n.end)!=n.start+l.nodeAfter.nodeSize)return!1;let u=n.startIndex==0,d=n.endIndex==s.childCount,p=l.node(-1),y=l.index(-1);if(!p.canReplace(y+(u?0:1),y+1,c.content.append(d?J.empty:J.from(s))))return!1;let b=l.pos,v=b+c.nodeSize;return i.step(new rn(b-(u?1:0),v+(d?1:0),b+1,v-1,new ae((u?J.empty:J.from(s.copy(J.empty))).append(d?J.empty:J.from(s.copy(J.empty))),u?0:1,d?0:1),u?0:1)),e(i.scrollIntoView()),!0}function FA(t){return function(e,n){let{$from:i,$to:s}=e.selection,l=i.blockRange(s,p=>p.childCount>0&&p.firstChild.type==t);if(!l)return!1;let c=l.startIndex;if(c==0)return!1;let u=l.parent,d=u.child(c-1);if(d.type!=t)return!1;if(n){let p=d.lastChild&&d.lastChild.type==u.type,y=J.from(p?t.create():null),b=new ae(J.from(t.create(null,J.from(u.type.create(null,y)))),p?3:1,0),v=l.start,x=l.end;n(e.tr.step(new rn(v-(p?3:1),x,v,x,b,1,!0)).scrollIntoView())}return!0}}const hn=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Nl=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let km=null;const ki=function(t,e,n){let i=km||(km=document.createRange());return i.setEnd(t,n??t.nodeValue.length),i.setStart(t,e||0),i},GA=function(){km=null},ks=function(t,e,n,i){return n&&(iv(t,e,n,i,-1)||iv(t,e,n,i,1))},$A=/^(img|br|input|textarea|hr)$/i;function iv(t,e,n,i,s){for(var l;;){if(t==n&&e==i)return!0;if(e==(s<0?0:hr(t))){let c=t.parentNode;if(!c||c.nodeType!=1||mc(t)||$A.test(t.nodeName)||t.contentEditable=="false")return!1;e=hn(t)+(s<0?0:1),t=c}else if(t.nodeType==1){let c=t.childNodes[e+(s<0?-1:0)];if(c.nodeType==1&&c.contentEditable=="false")if(!((l=c.pmViewDesc)===null||l===void 0)&&l.ignoreForSelection)e+=s;else return!1;else t=c,e=s<0?hr(t):0}else return!1}}function hr(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function YA(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=hr(t)}else if(t.parentNode&&!mc(t))e=hn(t),t=t.parentNode;else return null}}function KA(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!mc(t))e=hn(t)+1,t=t.parentNode;else return null}}function QA(t,e,n){for(let i=e==0,s=e==hr(t);i||s;){if(t==n)return!0;let l=hn(t);if(t=t.parentNode,!t)return!1;i=i&&l==0,s=s&&l==hr(t)}}function mc(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const cd=function(t){return t.focusNode&&ks(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function as(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function JA(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function XA(t,e,n){if(t.caretPositionFromPoint)try{let i=t.caretPositionFromPoint(e,n);if(i)return{node:i.offsetNode,offset:Math.min(hr(i.offsetNode),i.offset)}}catch{}if(t.caretRangeFromPoint){let i=t.caretRangeFromPoint(e,n);if(i)return{node:i.startContainer,offset:Math.min(hr(i.startContainer),i.startOffset)}}}const Fr=typeof navigator<"u"?navigator:null,ov=typeof document<"u"?document:null,No=Fr&&Fr.userAgent||"",Cm=/Edge\/(\d+)/.exec(No),NS=/MSIE \d/.exec(No),Em=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(No),In=!!(NS||Em||Cm),To=NS?document.documentMode:Em?+Em[1]:Cm?+Cm[1]:0,pr=!In&&/gecko\/(\d+)/i.test(No);pr&&+(/Firefox\/(\d+)/.exec(No)||[0,0])[1];const wm=!In&&/Chrome\/(\d+)/.exec(No),nn=!!wm,zS=wm?+wm[1]:0,mn=!In&&!!Fr&&/Apple Computer/.test(Fr.vendor),zl=mn&&(/Mobile\/\w+/.test(No)||!!Fr&&Fr.maxTouchPoints>2),dr=zl||(Fr?/Mac/.test(Fr.platform):!1),RS=Fr?/Win/.test(Fr.platform):!1,Ci=/Android \d/.test(No),gc=!!ov&&"webkitFontSmoothing"in ov.documentElement.style,ZA=gc?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function e_(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function bi(t,e){return typeof t=="number"?t:t[e]}function t_(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,i=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*i}}function sv(t,e,n){let i=t.someProp("scrollThreshold")||0,s=t.someProp("scrollMargin")||5,l=t.dom.ownerDocument;for(let c=n||t.dom;c;){if(c.nodeType!=1){c=Nl(c);continue}let u=c,d=u==l.body,p=d?e_(l):t_(u),y=0,b=0;if(e.top<p.top+bi(i,"top")?b=-(p.top-e.top+bi(s,"top")):e.bottom>p.bottom-bi(i,"bottom")&&(b=e.bottom-e.top>p.bottom-p.top?e.top+bi(s,"top")-p.top:e.bottom-p.bottom+bi(s,"bottom")),e.left<p.left+bi(i,"left")?y=-(p.left-e.left+bi(s,"left")):e.right>p.right-bi(i,"right")&&(y=e.right-p.right+bi(s,"right")),y||b)if(d)l.defaultView.scrollBy(y,b);else{let x=u.scrollLeft,k=u.scrollTop;b&&(u.scrollTop+=b),y&&(u.scrollLeft+=y);let C=u.scrollLeft-x,E=u.scrollTop-k;e={left:e.left-C,top:e.top-E,right:e.right-C,bottom:e.bottom-E}}let v=d?"fixed":getComputedStyle(c).position;if(/^(fixed|sticky)$/.test(v))break;c=v=="absolute"?c.offsetParent:Nl(c)}}function n_(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),i,s;for(let l=(e.left+e.right)/2,c=n+1;c<Math.min(innerHeight,e.bottom);c+=5){let u=t.root.elementFromPoint(l,c);if(!u||u==t.dom||!t.dom.contains(u))continue;let d=u.getBoundingClientRect();if(d.top>=n-20){i=u,s=d.top;break}}return{refDOM:i,refTop:s,stack:DS(t.dom)}}function DS(t){let e=[],n=t.ownerDocument;for(let i=t;i&&(e.push({dom:i,top:i.scrollTop,left:i.scrollLeft}),t!=n);i=Nl(i));return e}function r_({refDOM:t,refTop:e,stack:n}){let i=t?t.getBoundingClientRect().top:0;LS(n,i==0?0:i-e)}function LS(t,e){for(let n=0;n<t.length;n++){let{dom:i,top:s,left:l}=t[n];i.scrollTop!=s+e&&(i.scrollTop=s+e),i.scrollLeft!=l&&(i.scrollLeft=l)}}let ml=null;function i_(t){if(t.setActive)return t.setActive();if(ml)return t.focus(ml);let e=DS(t);t.focus(ml==null?{get preventScroll(){return ml={preventScroll:!0},!0}}:void 0),ml||(ml=!1,LS(e,0))}function BS(t,e){let n,i=2e8,s,l=0,c=e.top,u=e.top,d,p;for(let y=t.firstChild,b=0;y;y=y.nextSibling,b++){let v;if(y.nodeType==1)v=y.getClientRects();else if(y.nodeType==3)v=ki(y).getClientRects();else continue;for(let x=0;x<v.length;x++){let k=v[x];if(k.top<=c&&k.bottom>=u){c=Math.max(k.bottom,c),u=Math.min(k.top,u);let C=k.left>e.left?k.left-e.left:k.right<e.left?e.left-k.right:0;if(C<i){n=y,i=C,s=C&&n.nodeType==3?{left:k.right<e.left?k.right:k.left,top:e.top}:e,y.nodeType==1&&C&&(l=b+(e.left>=(k.left+k.right)/2?1:0));continue}}else k.top>e.top&&!d&&k.left<=e.left&&k.right>=e.left&&(d=y,p={left:Math.max(k.left,Math.min(k.right,e.left)),top:k.top});!n&&(e.left>=k.right&&e.top>=k.top||e.left>=k.left&&e.top>=k.bottom)&&(l=b+1)}}return!n&&d&&(n=d,s=p,i=0),n&&n.nodeType==3?o_(n,s):!n||i&&n.nodeType==1?{node:t,offset:l}:BS(n,s)}function o_(t,e){let n=t.nodeValue.length,i=document.createRange(),s;for(let l=0;l<n;l++){i.setEnd(t,l+1),i.setStart(t,l);let c=ho(i,1);if(c.top!=c.bottom&&lg(e,c)){s={node:t,offset:l+(e.left>=(c.left+c.right)/2?1:0)};break}}return i.detach(),s||{node:t,offset:0}}function lg(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function s_(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function l_(t,e,n){let{node:i,offset:s}=BS(e,n),l=-1;if(i.nodeType==1&&!i.firstChild){let c=i.getBoundingClientRect();l=c.left!=c.right&&n.left>(c.left+c.right)/2?1:-1}return t.docView.posFromDOM(i,s,l)}function a_(t,e,n,i){let s=-1;for(let l=e,c=!1;l!=t.dom;){let u=t.docView.nearestDesc(l,!0),d;if(!u)return null;if(u.dom.nodeType==1&&(u.node.isBlock&&u.parent||!u.contentDOM)&&((d=u.dom.getBoundingClientRect()).width||d.height)&&(u.node.isBlock&&u.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(u.dom.nodeName)&&(!c&&d.left>i.left||d.top>i.top?s=u.posBefore:(!c&&d.right<i.left||d.bottom<i.top)&&(s=u.posAfter),c=!0),!u.contentDOM&&s<0&&!u.node.isText))return(u.node.isBlock?i.top<(d.top+d.bottom)/2:i.left<(d.left+d.right)/2)?u.posBefore:u.posAfter;l=u.dom.parentNode}return s>-1?s:t.docView.posFromDOM(e,n,-1)}function IS(t,e,n){let i=t.childNodes.length;if(i&&n.top<n.bottom)for(let s=Math.max(0,Math.min(i-1,Math.floor(i*(e.top-n.top)/(n.bottom-n.top))-2)),l=s;;){let c=t.childNodes[l];if(c.nodeType==1){let u=c.getClientRects();for(let d=0;d<u.length;d++){let p=u[d];if(lg(e,p))return IS(c,e,p)}}if((l=(l+1)%i)==s)break}return t}function c_(t,e){let n=t.dom.ownerDocument,i,s=0,l=XA(n,e.left,e.top);l&&({node:i,offset:s}=l);let c=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),u;if(!c||!t.dom.contains(c.nodeType!=1?c.parentNode:c)){let p=t.dom.getBoundingClientRect();if(!lg(e,p)||(c=IS(t.dom,e,p),!c))return null}if(mn)for(let p=c;i&&p;p=Nl(p))p.draggable&&(i=void 0);if(c=s_(c,e),i){if(pr&&i.nodeType==1&&(s=Math.min(s,i.childNodes.length),s<i.childNodes.length)){let y=i.childNodes[s],b;y.nodeName=="IMG"&&(b=y.getBoundingClientRect()).right<=e.left&&b.bottom>e.top&&s++}let p;gc&&s&&i.nodeType==1&&(p=i.childNodes[s-1]).nodeType==1&&p.contentEditable=="false"&&p.getBoundingClientRect().top>=e.top&&s--,i==t.dom&&s==i.childNodes.length-1&&i.lastChild.nodeType==1&&e.top>i.lastChild.getBoundingClientRect().bottom?u=t.state.doc.content.size:(s==0||i.nodeType!=1||i.childNodes[s-1].nodeName!="BR")&&(u=a_(t,i,s,e))}u==null&&(u=l_(t,c,e));let d=t.docView.nearestDesc(c,!0);return{pos:u,inside:d?d.posAtStart-d.border:-1}}function lv(t){return t.top<t.bottom||t.left<t.right}function ho(t,e){let n=t.getClientRects();if(n.length){let i=n[e<0?0:n.length-1];if(lv(i))return i}return Array.prototype.find.call(n,lv)||t.getBoundingClientRect()}const u_=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function HS(t,e,n){let{node:i,offset:s,atom:l}=t.docView.domFromPos(e,n<0?-1:1),c=gc||pr;if(i.nodeType==3)if(c&&(u_.test(i.nodeValue)||(n<0?!s:s==i.nodeValue.length))){let d=ho(ki(i,s,s),n);if(pr&&s&&/\s/.test(i.nodeValue[s-1])&&s<i.nodeValue.length){let p=ho(ki(i,s-1,s-1),-1);if(p.top==d.top){let y=ho(ki(i,s,s+1),-1);if(y.top!=d.top)return Da(y,y.left<p.left)}}return d}else{let d=s,p=s,y=n<0?1:-1;return n<0&&!s?(p++,y=-1):n>=0&&s==i.nodeValue.length?(d--,y=1):n<0?d--:p++,Da(ho(ki(i,d,p),y),y<0)}if(!t.state.doc.resolve(e-(l||0)).parent.inlineContent){if(l==null&&s&&(n<0||s==hr(i))){let d=i.childNodes[s-1];if(d.nodeType==1)return Hp(d.getBoundingClientRect(),!1)}if(l==null&&s<hr(i)){let d=i.childNodes[s];if(d.nodeType==1)return Hp(d.getBoundingClientRect(),!0)}return Hp(i.getBoundingClientRect(),n>=0)}if(l==null&&s&&(n<0||s==hr(i))){let d=i.childNodes[s-1],p=d.nodeType==3?ki(d,hr(d)-(c?0:1)):d.nodeType==1&&(d.nodeName!="BR"||!d.nextSibling)?d:null;if(p)return Da(ho(p,1),!1)}if(l==null&&s<hr(i)){let d=i.childNodes[s];for(;d.pmViewDesc&&d.pmViewDesc.ignoreForCoords;)d=d.nextSibling;let p=d?d.nodeType==3?ki(d,0,c?0:1):d.nodeType==1?d:null:null;if(p)return Da(ho(p,-1),!0)}return Da(ho(i.nodeType==3?ki(i):i,-n),n>=0)}function Da(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function Hp(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function US(t,e,n){let i=t.state,s=t.root.activeElement;i!=e&&t.updateState(e),s!=t.dom&&t.focus();try{return n()}finally{i!=e&&t.updateState(i),s!=t.dom&&s&&s.focus()}}function f_(t,e,n){let i=e.selection,s=n=="up"?i.$from:i.$to;return US(t,e,()=>{let{node:l}=t.docView.domFromPos(s.pos,n=="up"?-1:1);for(;;){let u=t.docView.nearestDesc(l,!0);if(!u)break;if(u.node.isBlock){l=u.contentDOM||u.dom;break}l=u.dom.parentNode}let c=HS(t,s.pos,1);for(let u=l.firstChild;u;u=u.nextSibling){let d;if(u.nodeType==1)d=u.getClientRects();else if(u.nodeType==3)d=ki(u,0,u.nodeValue.length).getClientRects();else continue;for(let p=0;p<d.length;p++){let y=d[p];if(y.bottom>y.top+1&&(n=="up"?c.top-y.top>(y.bottom-c.top)*2:y.bottom-c.bottom>(c.bottom-y.top)*2))return!1}}return!0})}const d_=/[\u0590-\u08ac]/;function h_(t,e,n){let{$head:i}=e.selection;if(!i.parent.isTextblock)return!1;let s=i.parentOffset,l=!s,c=s==i.parent.content.size,u=t.domSelection();return u?!d_.test(i.parent.textContent)||!u.modify?n=="left"||n=="backward"?l:c:US(t,e,()=>{let{focusNode:d,focusOffset:p,anchorNode:y,anchorOffset:b}=t.domSelectionRange(),v=u.caretBidiLevel;u.modify("move",n,"character");let x=i.depth?t.docView.domAfterPos(i.before()):t.dom,{focusNode:k,focusOffset:C}=t.domSelectionRange(),E=k&&!x.contains(k.nodeType==1?k:k.parentNode)||d==k&&p==C;try{u.collapse(y,b),d&&(d!=y||p!=b)&&u.extend&&u.extend(d,p)}catch{}return v!=null&&(u.caretBidiLevel=v),E}):i.pos==i.start()||i.pos==i.end()}let av=null,cv=null,uv=!1;function p_(t,e,n){return av==e&&cv==n?uv:(av=e,cv=n,uv=n=="up"||n=="down"?f_(t,e,n):h_(t,e,n))}const mr=0,fv=1,us=2,Gr=3;class yc{constructor(e,n,i,s){this.parent=e,this.children=n,this.dom=i,this.contentDOM=s,this.dirty=mr,i.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,i){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,i=this.posAtStart;;n++){let s=this.children[n];if(s==e)return i;i+=s.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,i){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(i<0){let l,c;if(e==this.contentDOM)l=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;l=e.previousSibling}for(;l&&!((c=l.pmViewDesc)&&c.parent==this);)l=l.previousSibling;return l?this.posBeforeChild(c)+c.size:this.posAtStart}else{let l,c;if(e==this.contentDOM)l=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;l=e.nextSibling}for(;l&&!((c=l.pmViewDesc)&&c.parent==this);)l=l.nextSibling;return l?this.posBeforeChild(c):this.posAtEnd}let s;if(e==this.dom&&this.contentDOM)s=n>hn(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))s=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let l=e;;l=l.parentNode){if(l==this.dom){s=!1;break}if(l.previousSibling)break}if(s==null&&n==e.childNodes.length)for(let l=e;;l=l.parentNode){if(l==this.dom){s=!0;break}if(l.nextSibling)break}}return s??i>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let i=!0,s=e;s;s=s.parentNode){let l=this.getDesc(s),c;if(l&&(!n||l.node))if(i&&(c=l.nodeDOM)&&!(c.nodeType==1?c.contains(e.nodeType==1?e:e.parentNode):c==e))i=!1;else return l}}getDesc(e){let n=e.pmViewDesc;for(let i=n;i;i=i.parent)if(i==this)return n}posFromDOM(e,n,i){for(let s=e;s;s=s.parentNode){let l=this.getDesc(s);if(l)return l.localPosFromDOM(e,n,i)}return-1}descAt(e){for(let n=0,i=0;n<this.children.length;n++){let s=this.children[n],l=i+s.size;if(i==e&&l!=i){for(;!s.border&&s.children.length;)for(let c=0;c<s.children.length;c++){let u=s.children[c];if(u.size){s=u;break}}return s}if(e<l)return s.descAt(e-i-s.border);i=l}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let i=0,s=0;for(let l=0;i<this.children.length;i++){let c=this.children[i],u=l+c.size;if(u>e||c instanceof VS){s=e-l;break}l=u}if(s)return this.children[i].domFromPos(s-this.children[i].border,n);for(let l;i&&!(l=this.children[i-1]).size&&l instanceof qS&&l.side>=0;i--);if(n<=0){let l,c=!0;for(;l=i?this.children[i-1]:null,!(!l||l.dom.parentNode==this.contentDOM);i--,c=!1);return l&&n&&c&&!l.border&&!l.domAtom?l.domFromPos(l.size,n):{node:this.contentDOM,offset:l?hn(l.dom)+1:0}}else{let l,c=!0;for(;l=i<this.children.length?this.children[i]:null,!(!l||l.dom.parentNode==this.contentDOM);i++,c=!1);return l&&c&&!l.border&&!l.domAtom?l.domFromPos(0,n):{node:this.contentDOM,offset:l?hn(l.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,i=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let s=-1,l=-1;for(let c=i,u=0;;u++){let d=this.children[u],p=c+d.size;if(s==-1&&e<=p){let y=c+d.border;if(e>=y&&n<=p-d.border&&d.node&&d.contentDOM&&this.contentDOM.contains(d.contentDOM))return d.parseRange(e,n,y);e=c;for(let b=u;b>0;b--){let v=this.children[b-1];if(v.size&&v.dom.parentNode==this.contentDOM&&!v.emptyChildAt(1)){s=hn(v.dom)+1;break}e-=v.size}s==-1&&(s=0)}if(s>-1&&(p>n||u==this.children.length-1)){n=p;for(let y=u+1;y<this.children.length;y++){let b=this.children[y];if(b.size&&b.dom.parentNode==this.contentDOM&&!b.emptyChildAt(-1)){l=hn(b.dom);break}n+=b.size}l==-1&&(l=this.contentDOM.childNodes.length);break}c=p}return{node:this.contentDOM,from:e,to:n,fromOffset:s,toOffset:l}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:i}=this.domFromPos(e,0);if(n.nodeType!=1||i==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[i]}setSelection(e,n,i,s=!1){let l=Math.min(e,n),c=Math.max(e,n);for(let x=0,k=0;x<this.children.length;x++){let C=this.children[x],E=k+C.size;if(l>k&&c<E)return C.setSelection(e-k-C.border,n-k-C.border,i,s);k=E}let u=this.domFromPos(e,e?-1:1),d=n==e?u:this.domFromPos(n,n?-1:1),p=i.root.getSelection(),y=i.domSelectionRange(),b=!1;if((pr||mn)&&e==n){let{node:x,offset:k}=u;if(x.nodeType==3){if(b=!!(k&&x.nodeValue[k-1]==`
`),b&&k==x.nodeValue.length)for(let C=x,E;C;C=C.parentNode){if(E=C.nextSibling){E.nodeName=="BR"&&(u=d={node:E.parentNode,offset:hn(E)+1});break}let M=C.pmViewDesc;if(M&&M.node&&M.node.isBlock)break}}else{let C=x.childNodes[k-1];b=C&&(C.nodeName=="BR"||C.contentEditable=="false")}}if(pr&&y.focusNode&&y.focusNode!=d.node&&y.focusNode.nodeType==1){let x=y.focusNode.childNodes[y.focusOffset];x&&x.contentEditable=="false"&&(s=!0)}if(!(s||b&&mn)&&ks(u.node,u.offset,y.anchorNode,y.anchorOffset)&&ks(d.node,d.offset,y.focusNode,y.focusOffset))return;let v=!1;if((p.extend||e==n)&&!(b&&pr)){p.collapse(u.node,u.offset);try{e!=n&&p.extend(d.node,d.offset),v=!0}catch{}}if(!v){if(e>n){let k=u;u=d,d=k}let x=document.createRange();x.setEnd(d.node,d.offset),x.setStart(u.node,u.offset),p.removeAllRanges(),p.addRange(x)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let i=0,s=0;s<this.children.length;s++){let l=this.children[s],c=i+l.size;if(i==c?e<=c&&n>=i:e<c&&n>i){let u=i+l.border,d=c-l.border;if(e>=u&&n<=d){this.dirty=e==i||n==c?us:fv,e==u&&n==d&&(l.contentLost||l.dom.parentNode!=this.contentDOM)?l.dirty=Gr:l.markDirty(e-u,n-u);return}else l.dirty=l.dom==l.contentDOM&&l.dom.parentNode==this.contentDOM&&!l.children.length?us:Gr}i=c}this.dirty=us}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let i=e==1?us:fv;n.dirty<i&&(n.dirty=i)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class qS extends yc{constructor(e,n,i,s){let l,c=n.type.toDOM;if(typeof c=="function"&&(c=c(i,()=>{if(!l)return s;if(l.parent)return l.parent.posBeforeChild(l)})),!n.type.spec.raw){if(c.nodeType!=1){let u=document.createElement("span");u.appendChild(c),c=u}c.contentEditable="false",c.classList.add("ProseMirror-widget")}super(e,[],c,null),this.widget=n,this.widget=n,l=this}matchesWidget(e){return this.dirty==mr&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class m_ extends yc{constructor(e,n,i,s){super(e,[],n,null),this.textDOM=i,this.text=s}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class Cs extends yc{constructor(e,n,i,s,l){super(e,[],i,s),this.mark=n,this.spec=l}static create(e,n,i,s){let l=s.nodeViews[n.type.name],c=l&&l(n,s,i);return(!c||!c.dom)&&(c=Ms.renderSpec(document,n.type.spec.toDOM(n,i),null,n.attrs)),new Cs(e,n,c.dom,c.contentDOM||c.dom,c)}parseRule(){return this.dirty&Gr||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Gr&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=mr){let i=this.parent;for(;!i.node;)i=i.parent;i.dirty<this.dirty&&(i.dirty=this.dirty),this.dirty=mr}}slice(e,n,i){let s=Cs.create(this.parent,this.mark,!0,i),l=this.children,c=this.size;n<c&&(l=Mm(l,n,c,i)),e>0&&(l=Mm(l,0,e,i));for(let u=0;u<l.length;u++)l[u].parent=s;return s.children=l,s}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Mo extends yc{constructor(e,n,i,s,l,c,u,d,p){super(e,[],l,c),this.node=n,this.outerDeco=i,this.innerDeco=s,this.nodeDOM=u}static create(e,n,i,s,l,c){let u=l.nodeViews[n.type.name],d,p=u&&u(n,l,()=>{if(!d)return c;if(d.parent)return d.parent.posBeforeChild(d)},i,s),y=p&&p.dom,b=p&&p.contentDOM;if(n.isText){if(!y)y=document.createTextNode(n.text);else if(y.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else y||({dom:y,contentDOM:b}=Ms.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!b&&!n.isText&&y.nodeName!="BR"&&(y.hasAttribute("contenteditable")||(y.contentEditable="false"),n.type.spec.draggable&&(y.draggable=!0));let v=y;return y=FS(y,i,n),p?d=new g_(e,n,i,s,y,b||null,v,p,l,c+1):n.isText?new ud(e,n,i,s,y,v,l):new Mo(e,n,i,s,y,b||null,v,l,c+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let i=this.children[n];if(this.dom.contains(i.dom.parentNode)){e.contentElement=i.dom.parentNode;break}}e.contentElement||(e.getContent=()=>J.empty)}return e}matchesNode(e,n,i){return this.dirty==mr&&e.eq(this.node)&&gf(n,this.outerDeco)&&i.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let i=this.node.inlineContent,s=n,l=e.composing?this.localCompositionInfo(e,n):null,c=l&&l.pos>-1?l:null,u=l&&l.pos<0,d=new b_(this,c&&c.node,e);S_(this.node,this.innerDeco,(p,y,b)=>{p.spec.marks?d.syncToMarks(p.spec.marks,i,e,y):p.type.side>=0&&!b&&d.syncToMarks(y==this.node.childCount?gt.none:this.node.child(y).marks,i,e,y),d.placeWidget(p,e,s)},(p,y,b,v)=>{d.syncToMarks(p.marks,i,e,v);let x;d.findNodeMatch(p,y,b,v)||u&&e.state.selection.from>s&&e.state.selection.to<s+p.nodeSize&&(x=d.findIndexWithChild(l.node))>-1&&d.updateNodeAt(p,y,b,x,e)||d.updateNextNode(p,y,b,e,v,s)||d.addNode(p,y,b,e,s),s+=p.nodeSize}),d.syncToMarks([],i,e,0),this.node.isTextblock&&d.addTextblockHacks(),d.destroyRest(),(d.changed||this.dirty==us)&&(c&&this.protectLocalComposition(e,c),PS(this.contentDOM,this.children,e),zl&&k_(this.dom))}localCompositionInfo(e,n){let{from:i,to:s}=e.state.selection;if(!(e.state.selection instanceof _e)||i<n||s>n+this.node.content.size)return null;let l=e.input.compositionNode;if(!l||!this.dom.contains(l.parentNode))return null;if(this.node.inlineContent){let c=l.nodeValue,u=C_(this.node.content,c,i-n,s-n);return u<0?null:{node:l,pos:u,text:c}}else return{node:l,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:i,text:s}){if(this.getDesc(n))return;let l=n;for(;l.parentNode!=this.contentDOM;l=l.parentNode){for(;l.previousSibling;)l.parentNode.removeChild(l.previousSibling);for(;l.nextSibling;)l.parentNode.removeChild(l.nextSibling);l.pmViewDesc&&(l.pmViewDesc=void 0)}let c=new m_(this,l,n,s);e.input.compositionNodes.push(c),this.children=Mm(this.children,i,i+s.length,e,c)}update(e,n,i,s){return this.dirty==Gr||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,i,s),!0)}updateInner(e,n,i,s){this.updateOuterDeco(n),this.node=e,this.innerDeco=i,this.contentDOM&&this.updateChildren(s,this.posAtStart),this.dirty=mr}updateOuterDeco(e){if(gf(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,i=this.dom;this.dom=WS(this.dom,this.nodeDOM,Tm(this.outerDeco,this.node,n),Tm(e,this.node,n)),this.dom!=i&&(i.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function dv(t,e,n,i,s){FS(i,e,t);let l=new Mo(void 0,t,e,n,i,i,i,s,0);return l.contentDOM&&l.updateChildren(s,0),l}class ud extends Mo{constructor(e,n,i,s,l,c,u){super(e,n,i,s,l,null,c,u,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,i,s){return this.dirty==Gr||this.dirty!=mr&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=mr||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,s.trackWrites==this.nodeDOM&&(s.trackWrites=null)),this.node=e,this.dirty=mr,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,i){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,i)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,i){let s=this.node.cut(e,n),l=document.createTextNode(s.text);return new ud(this.parent,s,this.outerDeco,this.innerDeco,l,l,i)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Gr)}get domAtom(){return!1}isText(e){return this.node.text==e}}class VS extends yc{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==mr&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class g_ extends Mo{constructor(e,n,i,s,l,c,u,d,p,y){super(e,n,i,s,l,c,u,p,y),this.spec=d}update(e,n,i,s){if(this.dirty==Gr)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let l=this.spec.update(e,n,i);return l&&this.updateInner(e,n,i,s),l}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,i,s)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,i,s){this.spec.setSelection?this.spec.setSelection(e,n,i.root):super.setSelection(e,n,i,s)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function PS(t,e,n){let i=t.firstChild,s=!1;for(let l=0;l<e.length;l++){let c=e[l],u=c.dom;if(u.parentNode==t){for(;u!=i;)i=hv(i),s=!0;i=i.nextSibling}else s=!0,t.insertBefore(u,i);if(c instanceof Cs){let d=i?i.previousSibling:t.lastChild;PS(c.contentDOM,c.children,n),i=d?d.nextSibling:t.firstChild}}for(;i;)i=hv(i),s=!0;s&&n.trackWrites==t&&(n.trackWrites=null)}const $a=function(t){t&&(this.nodeName=t)};$a.prototype=Object.create(null);const fs=[new $a];function Tm(t,e,n){if(t.length==0)return fs;let i=n?fs[0]:new $a,s=[i];for(let l=0;l<t.length;l++){let c=t[l].type.attrs;if(c){c.nodeName&&s.push(i=new $a(c.nodeName));for(let u in c){let d=c[u];d!=null&&(n&&s.length==1&&s.push(i=new $a(e.isInline?"span":"div")),u=="class"?i.class=(i.class?i.class+" ":"")+d:u=="style"?i.style=(i.style?i.style+";":"")+d:u!="nodeName"&&(i[u]=d))}}}return s}function WS(t,e,n,i){if(n==fs&&i==fs)return e;let s=e;for(let l=0;l<i.length;l++){let c=i[l],u=n[l];if(l){let d;u&&u.nodeName==c.nodeName&&s!=t&&(d=s.parentNode)&&d.nodeName.toLowerCase()==c.nodeName||(d=document.createElement(c.nodeName),d.pmIsDeco=!0,d.appendChild(s),u=fs[0]),s=d}y_(s,u||fs[0],c)}return s}function y_(t,e,n){for(let i in e)i!="class"&&i!="style"&&i!="nodeName"&&!(i in n)&&t.removeAttribute(i);for(let i in n)i!="class"&&i!="style"&&i!="nodeName"&&n[i]!=e[i]&&t.setAttribute(i,n[i]);if(e.class!=n.class){let i=e.class?e.class.split(" ").filter(Boolean):[],s=n.class?n.class.split(" ").filter(Boolean):[];for(let l=0;l<i.length;l++)s.indexOf(i[l])==-1&&t.classList.remove(i[l]);for(let l=0;l<s.length;l++)i.indexOf(s[l])==-1&&t.classList.add(s[l]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let i=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,s;for(;s=i.exec(e.style);)t.style.removeProperty(s[1])}n.style&&(t.style.cssText+=n.style)}}function FS(t,e,n){return WS(t,t,fs,Tm(e,n,t.nodeType!=1))}function gf(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function hv(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class b_{constructor(e,n,i){this.lock=n,this.view=i,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=v_(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let i=e;i<n;i++)this.top.children[i].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,i,s){let l=0,c=this.stack.length>>1,u=Math.min(c,e.length);for(;l<u&&(l==c-1?this.top:this.stack[l+1<<1]).matchesMark(e[l])&&e[l].type.spec.spanning!==!1;)l++;for(;l<c;)this.destroyRest(),this.top.dirty=mr,this.index=this.stack.pop(),this.top=this.stack.pop(),c--;for(;c<e.length;){this.stack.push(this.top,this.index+1);let d=-1,p=this.top.children.length;s<this.preMatch.index&&(p=Math.min(this.index+3,p));for(let y=this.index;y<p;y++){let b=this.top.children[y];if(b.matchesMark(e[c])&&!this.isLocked(b.dom)){d=y;break}}if(d>-1)d>this.index&&(this.changed=!0,this.destroyBetween(this.index,d)),this.top=this.top.children[this.index];else{let y=Cs.create(this.top,e[c],n,i);this.top.children.splice(this.index,0,y),this.top=y,this.changed=!0}this.index=0,c++}}findNodeMatch(e,n,i,s){let l=-1,c;if(s>=this.preMatch.index&&(c=this.preMatch.matches[s-this.preMatch.index]).parent==this.top&&c.matchesNode(e,n,i))l=this.top.children.indexOf(c,this.index);else for(let u=this.index,d=Math.min(this.top.children.length,u+5);u<d;u++){let p=this.top.children[u];if(p.matchesNode(e,n,i)&&!this.preMatch.matched.has(p)){l=u;break}}return l<0?!1:(this.destroyBetween(this.index,l),this.index++,!0)}updateNodeAt(e,n,i,s,l){let c=this.top.children[s];return c.dirty==Gr&&c.dom==c.contentDOM&&(c.dirty=us),c.update(e,n,i,l)?(this.destroyBetween(this.index,s),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let i=e.pmViewDesc;if(i){for(let s=this.index;s<this.top.children.length;s++)if(this.top.children[s]==i)return s}return-1}e=n}}updateNextNode(e,n,i,s,l,c){for(let u=this.index;u<this.top.children.length;u++){let d=this.top.children[u];if(d instanceof Mo){let p=this.preMatch.matched.get(d);if(p!=null&&p!=l)return!1;let y=d.dom,b,v=this.isLocked(y)&&!(e.isText&&d.node&&d.node.isText&&d.nodeDOM.nodeValue==e.text&&d.dirty!=Gr&&gf(n,d.outerDeco));if(!v&&d.update(e,n,i,s))return this.destroyBetween(this.index,u),d.dom!=y&&(this.changed=!0),this.index++,!0;if(!v&&(b=this.recreateWrapper(d,e,n,i,s,c)))return this.destroyBetween(this.index,u),this.top.children[this.index]=b,b.contentDOM&&(b.dirty=us,b.updateChildren(s,c+1),b.dirty=mr),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,i,s,l,c){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!gf(i,e.outerDeco)||!s.eq(e.innerDeco))return null;let u=Mo.create(this.top,n,i,s,l,c);if(u.contentDOM){u.children=e.children,e.children=[];for(let d of u.children)d.parent=u}return e.destroy(),u}addNode(e,n,i,s,l){let c=Mo.create(this.top,e,n,i,s,l);c.contentDOM&&c.updateChildren(s,l+1),this.top.children.splice(this.index++,0,c),this.changed=!0}placeWidget(e,n,i){let s=this.index<this.top.children.length?this.top.children[this.index]:null;if(s&&s.matchesWidget(e)&&(e==s.widget||!s.widget.type.toDOM.parentNode))this.index++;else{let l=new qS(this.top,e,n,i);this.top.children.splice(this.index++,0,l),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof Cs;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof ud)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((mn||nn)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let i=document.createElement(e);e=="IMG"&&(i.className="ProseMirror-separator",i.alt=""),e=="BR"&&(i.className="ProseMirror-trailingBreak");let s=new VS(this.top,[],i,null);n!=this.top?n.children.push(s):n.children.splice(this.index++,0,s),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function v_(t,e){let n=e,i=n.children.length,s=t.childCount,l=new Map,c=[];e:for(;s>0;){let u;for(;;)if(i){let p=n.children[i-1];if(p instanceof Cs)n=p,i=p.children.length;else{u=p,i--;break}}else{if(n==e)break e;i=n.parent.children.indexOf(n),n=n.parent}let d=u.node;if(d){if(d!=t.child(s-1))break;--s,l.set(u,s),c.push(u)}}return{index:s,matched:l,matches:c.reverse()}}function x_(t,e){return t.type.side-e.type.side}function S_(t,e,n,i){let s=e.locals(t),l=0;if(s.length==0){for(let p=0;p<t.childCount;p++){let y=t.child(p);i(y,s,e.forChild(l,y),p),l+=y.nodeSize}return}let c=0,u=[],d=null;for(let p=0;;){let y,b;for(;c<s.length&&s[c].to==l;){let E=s[c++];E.widget&&(y?(b||(b=[y])).push(E):y=E)}if(y)if(b){b.sort(x_);for(let E=0;E<b.length;E++)n(b[E],p,!!d)}else n(y,p,!!d);let v,x;if(d)x=-1,v=d,d=null;else if(p<t.childCount)x=p,v=t.child(p++);else break;for(let E=0;E<u.length;E++)u[E].to<=l&&u.splice(E--,1);for(;c<s.length&&s[c].from<=l&&s[c].to>l;)u.push(s[c++]);let k=l+v.nodeSize;if(v.isText){let E=k;c<s.length&&s[c].from<E&&(E=s[c].from);for(let M=0;M<u.length;M++)u[M].to<E&&(E=u[M].to);E<k&&(d=v.cut(E-l),v=v.cut(0,E-l),k=E,x=-1)}else for(;c<s.length&&s[c].to<k;)c++;let C=v.isInline&&!v.isLeaf?u.filter(E=>!E.inline):u.slice();i(v,C,e.forChild(l,v),x),l=k}}function k_(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function C_(t,e,n,i){for(let s=0,l=0;s<t.childCount&&l<=i;){let c=t.child(s++),u=l;if(l+=c.nodeSize,!c.isText)continue;let d=c.text;for(;s<t.childCount;){let p=t.child(s++);if(l+=p.nodeSize,!p.isText)break;d+=p.text}if(l>=n){if(l>=i&&d.slice(i-e.length-u,i-u)==e)return i-e.length;let p=u<i?d.lastIndexOf(e,i-u-1):-1;if(p>=0&&p+e.length+u>=n)return u+p;if(n==i&&d.length>=i+e.length-u&&d.slice(i-u,i-u+e.length)==e)return i}}return-1}function Mm(t,e,n,i,s){let l=[];for(let c=0,u=0;c<t.length;c++){let d=t[c],p=u,y=u+=d.size;p>=n||y<=e?l.push(d):(p<e&&l.push(d.slice(0,e-p,i)),s&&(l.push(s),s=void 0),y>n&&l.push(d.slice(n-p,d.size,i)))}return l}function ag(t,e=null){let n=t.domSelectionRange(),i=t.state.doc;if(!n.focusNode)return null;let s=t.docView.nearestDesc(n.focusNode),l=s&&s.size==0,c=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(c<0)return null;let u=i.resolve(c),d,p;if(cd(n)){for(d=c;s&&!s.node;)s=s.parent;let b=s.node;if(s&&b.isAtom&&Ce.isSelectable(b)&&s.parent&&!(b.isInline&&QA(n.focusNode,n.focusOffset,s.dom))){let v=s.posBefore;p=new Ce(c==v?u:i.resolve(v))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let b=c,v=c;for(let x=0;x<n.rangeCount;x++){let k=n.getRangeAt(x);b=Math.min(b,t.docView.posFromDOM(k.startContainer,k.startOffset,1)),v=Math.max(v,t.docView.posFromDOM(k.endContainer,k.endOffset,-1))}if(b<0)return null;[d,c]=v==t.state.selection.anchor?[v,b]:[b,v],u=i.resolve(c)}else d=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(d<0)return null}let y=i.resolve(d);if(!p){let b=e=="pointer"||t.state.selection.head<u.pos&&!l?1:-1;p=cg(t,y,u,b)}return p}function GS(t){return t.editable?t.hasFocus():YS(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function Ti(t,e=!1){let n=t.state.selection;if($S(t,n),!!GS(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&nn){let i=t.domSelectionRange(),s=t.domObserver.currentSelection;if(i.anchorNode&&s.anchorNode&&ks(i.anchorNode,i.anchorOffset,s.anchorNode,s.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)w_(t);else{let{anchor:i,head:s}=n,l,c;pv&&!(n instanceof _e)&&(n.$from.parent.inlineContent||(l=mv(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(c=mv(t,n.to))),t.docView.setSelection(i,s,t,e),pv&&(l&&gv(l),c&&gv(c)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&E_(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const pv=mn||nn&&zS<63;function mv(t,e){let{node:n,offset:i}=t.docView.domFromPos(e,0),s=i<n.childNodes.length?n.childNodes[i]:null,l=i?n.childNodes[i-1]:null;if(mn&&s&&s.contentEditable=="false")return Up(s);if((!s||s.contentEditable=="false")&&(!l||l.contentEditable=="false")){if(s)return Up(s);if(l)return Up(l)}}function Up(t){return t.contentEditable="true",mn&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function gv(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function E_(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),i=n.anchorNode,s=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=i||n.anchorOffset!=s)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!GS(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function w_(t){let e=t.domSelection();if(!e)return;let n=t.cursorWrapper.dom,i=n.nodeName=="IMG";i?e.collapse(n.parentNode,hn(n)+1):e.collapse(n,0),!i&&!t.state.selection.visible&&In&&To<=11&&(n.disabled=!0,n.disabled=!1)}function $S(t,e){if(e instanceof Ce){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(yv(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else yv(t)}function yv(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function cg(t,e,n,i){return t.someProp("createSelectionBetween",s=>s(t,e,n))||_e.between(e,n,i)}function bv(t){return t.editable&&!t.hasFocus()?!1:YS(t)}function YS(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function T_(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return ks(e.node,e.offset,n.anchorNode,n.anchorOffset)}function Am(t,e){let{$anchor:n,$head:i}=t.selection,s=e>0?n.max(i):n.min(i),l=s.parent.inlineContent?s.depth?t.doc.resolve(e>0?s.after():s.before()):null:s;return l&&Ue.findFrom(l,e)}function mo(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function vv(t,e,n){let i=t.state.selection;if(i instanceof _e)if(n.indexOf("s")>-1){let{$head:s}=i,l=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter;if(!l||l.isText||!l.isLeaf)return!1;let c=t.state.doc.resolve(s.pos+l.nodeSize*(e<0?-1:1));return mo(t,new _e(i.$anchor,c))}else if(i.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let s=Am(t.state,e);return s&&s instanceof Ce?mo(t,s):!1}else if(!(dr&&n.indexOf("m")>-1)){let s=i.$head,l=s.textOffset?null:e<0?s.nodeBefore:s.nodeAfter,c;if(!l||l.isText)return!1;let u=e<0?s.pos-l.nodeSize:s.pos;return l.isAtom||(c=t.docView.descAt(u))&&!c.contentDOM?Ce.isSelectable(l)?mo(t,new Ce(e<0?t.state.doc.resolve(s.pos-l.nodeSize):s)):gc?mo(t,new _e(t.state.doc.resolve(e<0?u:u+l.nodeSize))):!1:!1}}else return!1;else{if(i instanceof Ce&&i.node.isInline)return mo(t,new _e(e>0?i.$to:i.$from));{let s=Am(t.state,e);return s?mo(t,s):!1}}}function yf(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function Ka(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function gl(t,e){return e<0?M_(t):A_(t)}function M_(t){let e=t.domSelectionRange(),n=e.focusNode,i=e.focusOffset;if(!n)return;let s,l,c=!1;for(pr&&n.nodeType==1&&i<yf(n)&&Ka(n.childNodes[i],-1)&&(c=!0);;)if(i>0){if(n.nodeType!=1)break;{let u=n.childNodes[i-1];if(Ka(u,-1))s=n,l=--i;else if(u.nodeType==3)n=u,i=n.nodeValue.length;else break}}else{if(KS(n))break;{let u=n.previousSibling;for(;u&&Ka(u,-1);)s=n.parentNode,l=hn(u),u=u.previousSibling;if(u)n=u,i=yf(n);else{if(n=n.parentNode,n==t.dom)break;i=0}}}c?_m(t,n,i):s&&_m(t,s,l)}function A_(t){let e=t.domSelectionRange(),n=e.focusNode,i=e.focusOffset;if(!n)return;let s=yf(n),l,c;for(;;)if(i<s){if(n.nodeType!=1)break;let u=n.childNodes[i];if(Ka(u,1))l=n,c=++i;else break}else{if(KS(n))break;{let u=n.nextSibling;for(;u&&Ka(u,1);)l=u.parentNode,c=hn(u)+1,u=u.nextSibling;if(u)n=u,i=0,s=yf(n);else{if(n=n.parentNode,n==t.dom)break;i=s=0}}}l&&_m(t,l,c)}function KS(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function __(t,e){for(;t&&e==t.childNodes.length&&!mc(t);)e=hn(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function j_(t,e){for(;t&&!e&&!mc(t);)e=hn(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function _m(t,e,n){if(e.nodeType!=3){let l,c;(c=__(e,n))?(e=c,n=0):(l=j_(e,n))&&(e=l,n=l.nodeValue.length)}let i=t.domSelection();if(!i)return;if(cd(i)){let l=document.createRange();l.setEnd(e,n),l.setStart(e,n),i.removeAllRanges(),i.addRange(l)}else i.extend&&i.extend(e,n);t.domObserver.setCurSelection();let{state:s}=t;setTimeout(()=>{t.state==s&&Ti(t)},50)}function xv(t,e){let n=t.state.doc.resolve(e);if(!(nn||RS)&&n.parent.inlineContent){let s=t.coordsAtPos(e);if(e>n.start()){let l=t.coordsAtPos(e-1),c=(l.top+l.bottom)/2;if(c>s.top&&c<s.bottom&&Math.abs(l.left-s.left)>1)return l.left<s.left?"ltr":"rtl"}if(e<n.end()){let l=t.coordsAtPos(e+1),c=(l.top+l.bottom)/2;if(c>s.top&&c<s.bottom&&Math.abs(l.left-s.left)>1)return l.left>s.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function Sv(t,e,n){let i=t.state.selection;if(i instanceof _e&&!i.empty||n.indexOf("s")>-1||dr&&n.indexOf("m")>-1)return!1;let{$from:s,$to:l}=i;if(!s.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let c=Am(t.state,e);if(c&&c instanceof Ce)return mo(t,c)}if(!s.parent.inlineContent){let c=e<0?s:l,u=i instanceof Kn?Ue.near(c,e):Ue.findFrom(c,e);return u?mo(t,u):!1}return!1}function kv(t,e){if(!(t.state.selection instanceof _e))return!0;let{$head:n,$anchor:i,empty:s}=t.state.selection;if(!n.sameParent(i))return!0;if(!s)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let l=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(l&&!l.isText){let c=t.state.tr;return e<0?c.delete(n.pos-l.nodeSize,n.pos):c.delete(n.pos,n.pos+l.nodeSize),t.dispatch(c),!0}return!1}function Cv(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function O_(t){if(!mn||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let i=e.firstChild;Cv(t,i,"true"),setTimeout(()=>Cv(t,i,"false"),20)}return!1}function N_(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function z_(t,e){let n=e.keyCode,i=N_(e);if(n==8||dr&&n==72&&i=="c")return kv(t,-1)||gl(t,-1);if(n==46&&!e.shiftKey||dr&&n==68&&i=="c")return kv(t,1)||gl(t,1);if(n==13||n==27)return!0;if(n==37||dr&&n==66&&i=="c"){let s=n==37?xv(t,t.state.selection.from)=="ltr"?-1:1:-1;return vv(t,s,i)||gl(t,s)}else if(n==39||dr&&n==70&&i=="c"){let s=n==39?xv(t,t.state.selection.from)=="ltr"?1:-1:1;return vv(t,s,i)||gl(t,s)}else{if(n==38||dr&&n==80&&i=="c")return Sv(t,-1,i)||gl(t,-1);if(n==40||dr&&n==78&&i=="c")return O_(t)||Sv(t,1,i)||gl(t,1);if(i==(dr?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function ug(t,e){t.someProp("transformCopied",x=>{e=x(e,t)});let n=[],{content:i,openStart:s,openEnd:l}=e;for(;s>1&&l>1&&i.childCount==1&&i.firstChild.childCount==1;){s--,l--;let x=i.firstChild;n.push(x.type.name,x.attrs!=x.type.defaultAttrs?x.attrs:null),i=x.content}let c=t.someProp("clipboardSerializer")||Ms.fromSchema(t.state.schema),u=t2(),d=u.createElement("div");d.appendChild(c.serializeFragment(i,{document:u}));let p=d.firstChild,y,b=0;for(;p&&p.nodeType==1&&(y=e2[p.nodeName.toLowerCase()]);){for(let x=y.length-1;x>=0;x--){let k=u.createElement(y[x]);for(;d.firstChild;)k.appendChild(d.firstChild);d.appendChild(k),b++}p=d.firstChild}p&&p.nodeType==1&&p.setAttribute("data-pm-slice",`${s} ${l}${b?` -${b}`:""} ${JSON.stringify(n)}`);let v=t.someProp("clipboardTextSerializer",x=>x(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:d,text:v,slice:e}}function QS(t,e,n,i,s){let l=s.parent.type.spec.code,c,u;if(!n&&!e)return null;let d=!!e&&(i||l||!n);if(d){if(t.someProp("transformPastedText",v=>{e=v(e,l||i,t)}),l)return u=new ae(J.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",v=>{u=v(u,t,!0)}),u;let b=t.someProp("clipboardTextParser",v=>v(e,s,i,t));if(b)u=b;else{let v=s.marks(),{schema:x}=t.state,k=Ms.fromSchema(x);c=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(C=>{let E=c.appendChild(document.createElement("p"));C&&E.appendChild(k.serializeNode(x.text(C,v)))})}}else t.someProp("transformPastedHTML",b=>{n=b(n,t)}),c=B_(n),gc&&I_(c);let p=c&&c.querySelector("[data-pm-slice]"),y=p&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(p.getAttribute("data-pm-slice")||"");if(y&&y[3])for(let b=+y[3];b>0;b--){let v=c.firstChild;for(;v&&v.nodeType!=1;)v=v.nextSibling;if(!v)break;c=v}if(u||(u=(t.someProp("clipboardParser")||t.someProp("domParser")||wo.fromSchema(t.state.schema)).parseSlice(c,{preserveWhitespace:!!(d||y),context:s,ruleFromNode(v){return v.nodeName=="BR"&&!v.nextSibling&&v.parentNode&&!R_.test(v.parentNode.nodeName)?{ignore:!0}:null}})),y)u=H_(Ev(u,+y[1],+y[2]),y[4]);else if(u=ae.maxOpen(D_(u.content,s),!0),u.openStart||u.openEnd){let b=0,v=0;for(let x=u.content.firstChild;b<u.openStart&&!x.type.spec.isolating;b++,x=x.firstChild);for(let x=u.content.lastChild;v<u.openEnd&&!x.type.spec.isolating;v++,x=x.lastChild);u=Ev(u,b,v)}return t.someProp("transformPasted",b=>{u=b(u,t,d)}),u}const R_=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function D_(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let s=e.node(n).contentMatchAt(e.index(n)),l,c=[];if(t.forEach(u=>{if(!c)return;let d=s.findWrapping(u.type),p;if(!d)return c=null;if(p=c.length&&l.length&&XS(d,l,u,c[c.length-1],0))c[c.length-1]=p;else{c.length&&(c[c.length-1]=ZS(c[c.length-1],l.length));let y=JS(u,d);c.push(y),s=s.matchType(y.type),l=d}}),c)return J.from(c)}return t}function JS(t,e,n=0){for(let i=e.length-1;i>=n;i--)t=e[i].create(null,J.from(t));return t}function XS(t,e,n,i,s){if(s<t.length&&s<e.length&&t[s]==e[s]){let l=XS(t,e,n,i.lastChild,s+1);if(l)return i.copy(i.content.replaceChild(i.childCount-1,l));if(i.contentMatchAt(i.childCount).matchType(s==t.length-1?n.type:t[s+1]))return i.copy(i.content.append(J.from(JS(n,t,s+1))))}}function ZS(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,ZS(t.lastChild,e-1)),i=t.contentMatchAt(t.childCount).fillBefore(J.empty,!0);return t.copy(n.append(i))}function jm(t,e,n,i,s,l){let c=e<0?t.firstChild:t.lastChild,u=c.content;return t.childCount>1&&(l=0),s<i-1&&(u=jm(u,e,n,i,s+1,l)),s>=n&&(u=e<0?c.contentMatchAt(0).fillBefore(u,l<=s).append(u):u.append(c.contentMatchAt(c.childCount).fillBefore(J.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,c.copy(u))}function Ev(t,e,n){return e<t.openStart&&(t=new ae(jm(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new ae(jm(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const e2={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let wv=null;function t2(){return wv||(wv=document.implementation.createHTMLDocument("title"))}let qp=null;function L_(t){let e=window.trustedTypes;return e?(qp||(qp=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),qp.createHTML(t)):t}function B_(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=t2().createElement("div"),i=/<([a-z][^>\s]+)/i.exec(t),s;if((s=i&&e2[i[1].toLowerCase()])&&(t=s.map(l=>"<"+l+">").join("")+t+s.map(l=>"</"+l+">").reverse().join("")),n.innerHTML=L_(t),s)for(let l=0;l<s.length;l++)n=n.querySelector(s[l])||n;return n}function I_(t){let e=t.querySelectorAll(nn?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let i=e[n];i.childNodes.length==1&&i.textContent==""&&i.parentNode&&i.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),i)}}function H_(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,i;try{i=JSON.parse(e)}catch{return t}let{content:s,openStart:l,openEnd:c}=t;for(let u=i.length-2;u>=0;u-=2){let d=n.nodes[i[u]];if(!d||d.hasRequiredAttrs())break;s=J.from(d.create(i[u+1],s)),l++,c++}return new ae(s,l,c)}const Mn={},An={},U_={touchstart:!0,touchmove:!0};class q_{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.badSafariComposition=!1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function V_(t){for(let e in Mn){let n=Mn[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=i=>{W_(t,i)&&!fg(t,i)&&(t.editable||!(i.type in An))&&n(t,i)},U_[e]?{passive:!0}:void 0)}mn&&t.dom.addEventListener("input",()=>null),Om(t)}function Co(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function P_(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function Om(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=i=>fg(t,i))})}function fg(t,e){return t.someProp("handleDOMEvents",n=>{let i=n[e.type];return i?i(t,e)||e.defaultPrevented:!1})}function W_(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function F_(t,e){!fg(t,e)&&Mn[e.type]&&(t.editable||!(e.type in An))&&Mn[e.type](t,e)}An.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!r2(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(Ci&&nn&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),zl&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let i=Date.now();t.input.lastIOSEnter=i,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==i&&(t.someProp("handleKeyDown",s=>s(t,as(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",i=>i(t,n))||z_(t,n)?n.preventDefault():Co(t,"key")};An.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};An.keypress=(t,e)=>{let n=e;if(r2(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||dr&&n.metaKey)return;if(t.someProp("handleKeyPress",s=>s(t,n))){n.preventDefault();return}let i=t.state.selection;if(!(i instanceof _e)||!i.$from.sameParent(i.$to)){let s=String.fromCharCode(n.charCode),l=()=>t.state.tr.insertText(s).scrollIntoView();!/[\r\n]/.test(s)&&!t.someProp("handleTextInput",c=>c(t,i.$from.pos,i.$to.pos,s,l))&&t.dispatch(l()),n.preventDefault()}};function fd(t){return{left:t.clientX,top:t.clientY}}function G_(t,e){let n=e.x-t.clientX,i=e.y-t.clientY;return n*n+i*i<100}function dg(t,e,n,i,s){if(i==-1)return!1;let l=t.state.doc.resolve(i);for(let c=l.depth+1;c>0;c--)if(t.someProp(e,u=>c>l.depth?u(t,n,l.nodeAfter,l.before(c),s,!0):u(t,n,l.node(c),l.before(c),s,!1)))return!0;return!1}function _l(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let i=t.state.tr.setSelection(e);i.setMeta("pointer",!0),t.dispatch(i)}function $_(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),i=n.nodeAfter;return i&&i.isAtom&&Ce.isSelectable(i)?(_l(t,new Ce(n)),!0):!1}function Y_(t,e){if(e==-1)return!1;let n=t.state.selection,i,s;n instanceof Ce&&(i=n.node);let l=t.state.doc.resolve(e);for(let c=l.depth+1;c>0;c--){let u=c>l.depth?l.nodeAfter:l.node(c);if(Ce.isSelectable(u)){i&&n.$from.depth>0&&c>=n.$from.depth&&l.before(n.$from.depth+1)==n.$from.pos?s=l.before(n.$from.depth):s=l.before(c);break}}return s!=null?(_l(t,Ce.create(t.state.doc,s)),!0):!1}function K_(t,e,n,i,s){return dg(t,"handleClickOn",e,n,i)||t.someProp("handleClick",l=>l(t,e,i))||(s?Y_(t,n):$_(t,n))}function Q_(t,e,n,i){return dg(t,"handleDoubleClickOn",e,n,i)||t.someProp("handleDoubleClick",s=>s(t,e,i))}function J_(t,e,n,i){return dg(t,"handleTripleClickOn",e,n,i)||t.someProp("handleTripleClick",s=>s(t,e,i))||X_(t,n,i)}function X_(t,e,n){if(n.button!=0)return!1;let i=t.state.doc;if(e==-1)return i.inlineContent?(_l(t,_e.create(i,0,i.content.size)),!0):!1;let s=i.resolve(e);for(let l=s.depth+1;l>0;l--){let c=l>s.depth?s.nodeAfter:s.node(l),u=s.before(l);if(c.inlineContent)_l(t,_e.create(i,u+1,u+1+c.content.size));else if(Ce.isSelectable(c))_l(t,Ce.create(i,u));else continue;return!0}}function hg(t){return bf(t)}const n2=dr?"metaKey":"ctrlKey";Mn.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let i=hg(t),s=Date.now(),l="singleClick";s-t.input.lastClick.time<500&&G_(n,t.input.lastClick)&&!n[n2]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?l="doubleClick":t.input.lastClick.type=="doubleClick"&&(l="tripleClick")),t.input.lastClick={time:s,x:n.clientX,y:n.clientY,type:l,button:n.button};let c=t.posAtCoords(fd(n));c&&(l=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new Z_(t,c,n,!!i)):(l=="doubleClick"?Q_:J_)(t,c.pos,c.inside,n)?n.preventDefault():Co(t,"pointer"))};class Z_{constructor(e,n,i,s){this.view=e,this.pos=n,this.event=i,this.flushed=s,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!i[n2],this.allowDefault=i.shiftKey;let l,c;if(n.inside>-1)l=e.state.doc.nodeAt(n.inside),c=n.inside;else{let y=e.state.doc.resolve(n.pos);l=y.parent,c=y.depth?y.before():0}const u=s?null:i.target,d=u?e.docView.nearestDesc(u,!0):null;this.target=d&&d.nodeDOM.nodeType==1?d.nodeDOM:null;let{selection:p}=e.state;(i.button==0&&l.type.spec.draggable&&l.type.spec.selectable!==!1||p instanceof Ce&&p.from<=c&&p.to>c)&&(this.mightDrag={node:l,pos:c,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&pr&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),Co(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Ti(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(fd(e))),this.updateAllowDefault(e),this.allowDefault||!n?Co(this.view,"pointer"):K_(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||mn&&this.mightDrag&&!this.mightDrag.node.isAtom||nn&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(_l(this.view,Ue.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):Co(this.view,"pointer")}move(e){this.updateAllowDefault(e),Co(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Mn.touchstart=t=>{t.input.lastTouch=Date.now(),hg(t),Co(t,"pointer")};Mn.touchmove=t=>{t.input.lastTouch=Date.now(),Co(t,"pointer")};Mn.contextmenu=t=>hg(t);function r2(t,e){return t.composing?!0:mn&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const ej=Ci?5e3:-1;An.compositionstart=An.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof _e&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(i=>i.type.spec.inclusive===!1)||nn&&RS&&tj(t)))t.markCursor=t.state.storedMarks||n.marks(),bf(t,!0),t.markCursor=null;else if(bf(t,!e.selection.empty),pr&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let i=t.domSelectionRange();for(let s=i.focusNode,l=i.focusOffset;s&&s.nodeType==1&&l!=0;){let c=l<0?s.lastChild:s.childNodes[l-1];if(!c)break;if(c.nodeType==3){let u=t.domSelection();u&&u.collapse(c,c.nodeValue.length);break}else s=c,l=-1}}t.input.composing=!0}i2(t,ej)};function tj(t){let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(!e||e.nodeType!=1||n>=e.childNodes.length)return!1;let i=e.childNodes[n];return i.nodeType==1&&i.contentEditable=="false"}An.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.badSafariComposition?t.domObserver.forceFlush():t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,i2(t,20))};function i2(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>bf(t),e))}function o2(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=rj());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function nj(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=YA(e.focusNode,e.focusOffset),i=KA(e.focusNode,e.focusOffset);if(n&&i&&n!=i){let s=i.pmViewDesc,l=t.domObserver.lastChangedTextNode;if(n==l||i==l)return l;if(!s||!s.isText(i.nodeValue))return i;if(t.input.compositionNode==i){let c=n.pmViewDesc;if(!(!c||!c.isText(n.nodeValue)))return i}}return n||i}function rj(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function bf(t,e=!1){if(!(Ci&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),o2(t),e||t.docView&&t.docView.dirty){let n=ag(t),i=t.state.selection;return n&&!n.eq(i)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!i.$from.node(i.$from.sharedDepth(i.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function ij(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let i=getSelection(),s=document.createRange();s.selectNodeContents(e),t.dom.blur(),i.removeAllRanges(),i.addRange(s),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const lc=In&&To<15||zl&&ZA<604;Mn.copy=An.cut=(t,e)=>{let n=e,i=t.state.selection,s=n.type=="cut";if(i.empty)return;let l=lc?null:n.clipboardData,c=i.content(),{dom:u,text:d}=ug(t,c);l?(n.preventDefault(),l.clearData(),l.setData("text/html",u.innerHTML),l.setData("text/plain",d)):ij(t,u),s&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function oj(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function sj(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,i=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(i.contentEditable="true"),i.style.cssText="position: fixed; left: -10000px; top: 10px",i.focus();let s=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),i.parentNode&&i.parentNode.removeChild(i),n?ac(t,i.value,null,s,e):ac(t,i.textContent,i.innerHTML,s,e)},50)}function ac(t,e,n,i,s){let l=QS(t,e,n,i,t.state.selection.$from);if(t.someProp("handlePaste",d=>d(t,s,l||ae.empty)))return!0;if(!l)return!1;let c=oj(l),u=c?t.state.tr.replaceSelectionWith(c,i):t.state.tr.replaceSelection(l);return t.dispatch(u.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function s2(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}An.paste=(t,e)=>{let n=e;if(t.composing&&!Ci)return;let i=lc?null:n.clipboardData,s=t.input.shiftKey&&t.input.lastKeyCode!=45;i&&ac(t,s2(i),i.getData("text/html"),s,n)?n.preventDefault():sj(t,n)};class l2{constructor(e,n,i){this.slice=e,this.move=n,this.node=i}}const lj=dr?"altKey":"ctrlKey";function a2(t,e){let n=t.someProp("dragCopies",i=>!i(e));return n??!e[lj]}Mn.dragstart=(t,e)=>{let n=e,i=t.input.mouseDown;if(i&&i.done(),!n.dataTransfer)return;let s=t.state.selection,l=s.empty?null:t.posAtCoords(fd(n)),c;if(!(l&&l.pos>=s.from&&l.pos<=(s instanceof Ce?s.to-1:s.to))){if(i&&i.mightDrag)c=Ce.create(t.state.doc,i.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let b=t.docView.nearestDesc(n.target,!0);b&&b.node.type.spec.draggable&&b!=t.docView&&(c=Ce.create(t.state.doc,b.posBefore))}}let u=(c||t.state.selection).content(),{dom:d,text:p,slice:y}=ug(t,u);(!n.dataTransfer.files.length||!nn||zS>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(lc?"Text":"text/html",d.innerHTML),n.dataTransfer.effectAllowed="copyMove",lc||n.dataTransfer.setData("text/plain",p),t.dragging=new l2(y,a2(t,n),c)};Mn.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};An.dragover=An.dragenter=(t,e)=>e.preventDefault();An.drop=(t,e)=>{try{aj(t,e,t.dragging)}finally{t.dragging=null}};function aj(t,e,n){if(!e.dataTransfer)return;let i=t.posAtCoords(fd(e));if(!i)return;let s=t.state.doc.resolve(i.pos),l=n&&n.slice;l?t.someProp("transformPasted",x=>{l=x(l,t,!1)}):l=QS(t,s2(e.dataTransfer),lc?null:e.dataTransfer.getData("text/html"),!1,s);let c=!!(n&&a2(t,e));if(t.someProp("handleDrop",x=>x(t,e,l||ae.empty,c))){e.preventDefault();return}if(!l)return;e.preventDefault();let u=l?dS(t.state.doc,s.pos,l):s.pos;u==null&&(u=s.pos);let d=t.state.tr;if(c){let{node:x}=n;x?x.replace(d):d.deleteSelection()}let p=d.mapping.map(u),y=l.openStart==0&&l.openEnd==0&&l.content.childCount==1,b=d.doc;if(y?d.replaceRangeWith(p,p,l.content.firstChild):d.replaceRange(p,p,l),d.doc.eq(b))return;let v=d.doc.resolve(p);if(y&&Ce.isSelectable(l.content.firstChild)&&v.nodeAfter&&v.nodeAfter.sameMarkup(l.content.firstChild))d.setSelection(new Ce(v));else{let x=d.mapping.map(u);d.mapping.maps[d.mapping.maps.length-1].forEach((k,C,E,M)=>x=M),d.setSelection(cg(t,v,d.doc.resolve(x)))}t.focus(),t.dispatch(d.setMeta("uiEvent","drop"))}Mn.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&Ti(t)},20))};Mn.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Mn.beforeinput=(t,e)=>{if(nn&&Ci&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:i}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=i||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",l=>l(t,as(8,"Backspace")))))return;let{$cursor:s}=t.state.selection;s&&s.pos>0&&t.dispatch(t.state.tr.delete(s.pos-1,s.pos).scrollIntoView())},50)}};for(let t in An)Mn[t]=An[t];function cc(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class vf{constructor(e,n){this.toDOM=e,this.spec=n||gs,this.side=this.spec.side||0}map(e,n,i,s){let{pos:l,deleted:c}=e.mapResult(n.from+s,this.side<0?-1:1);return c?null:new Tn(l-i,l-i,this)}valid(){return!0}eq(e){return this==e||e instanceof vf&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&cc(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class Ao{constructor(e,n){this.attrs=e,this.spec=n||gs}map(e,n,i,s){let l=e.map(n.from+s,this.spec.inclusiveStart?-1:1)-i,c=e.map(n.to+s,this.spec.inclusiveEnd?1:-1)-i;return l>=c?null:new Tn(l,c,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof Ao&&cc(this.attrs,e.attrs)&&cc(this.spec,e.spec)}static is(e){return e.type instanceof Ao}destroy(){}}class pg{constructor(e,n){this.attrs=e,this.spec=n||gs}map(e,n,i,s){let l=e.mapResult(n.from+s,1);if(l.deleted)return null;let c=e.mapResult(n.to+s,-1);return c.deleted||c.pos<=l.pos?null:new Tn(l.pos-i,c.pos-i,this)}valid(e,n){let{index:i,offset:s}=e.content.findIndex(n.from),l;return s==n.from&&!(l=e.child(i)).isText&&s+l.nodeSize==n.to}eq(e){return this==e||e instanceof pg&&cc(this.attrs,e.attrs)&&cc(this.spec,e.spec)}destroy(){}}class Tn{constructor(e,n,i){this.from=e,this.to=n,this.type=i}copy(e,n){return new Tn(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,i){return this.type.map(e,this,n,i)}static widget(e,n,i){return new Tn(e,e,new vf(n,i))}static inline(e,n,i,s){return new Tn(e,n,new Ao(i,s))}static node(e,n,i,s){return new Tn(e,n,new pg(i,s))}get spec(){return this.type.spec}get inline(){return this.type instanceof Ao}get widget(){return this.type instanceof vf}}const kl=[],gs={};class Mt{constructor(e,n){this.local=e.length?e:kl,this.children=n.length?n:kl}static create(e,n){return n.length?xf(n,e,0,gs):bn}find(e,n,i){let s=[];return this.findInner(e??0,n??1e9,s,0,i),s}findInner(e,n,i,s,l){for(let c=0;c<this.local.length;c++){let u=this.local[c];u.from<=n&&u.to>=e&&(!l||l(u.spec))&&i.push(u.copy(u.from+s,u.to+s))}for(let c=0;c<this.children.length;c+=3)if(this.children[c]<n&&this.children[c+1]>e){let u=this.children[c]+1;this.children[c+2].findInner(e-u,n-u,i,s+u,l)}}map(e,n,i){return this==bn||e.maps.length==0?this:this.mapInner(e,n,0,0,i||gs)}mapInner(e,n,i,s,l){let c;for(let u=0;u<this.local.length;u++){let d=this.local[u].map(e,i,s);d&&d.type.valid(n,d)?(c||(c=[])).push(d):l.onRemove&&l.onRemove(this.local[u].spec)}return this.children.length?cj(this.children,c||[],e,n,i,s,l):c?new Mt(c.sort(ys),kl):bn}add(e,n){return n.length?this==bn?Mt.create(e,n):this.addInner(e,n,0):this}addInner(e,n,i){let s,l=0;e.forEach((u,d)=>{let p=d+i,y;if(y=u2(n,u,p)){for(s||(s=this.children.slice());l<s.length&&s[l]<d;)l+=3;s[l]==d?s[l+2]=s[l+2].addInner(u,y,p+1):s.splice(l,0,d,d+u.nodeSize,xf(y,u,p+1,gs)),l+=3}});let c=c2(l?f2(n):n,-i);for(let u=0;u<c.length;u++)c[u].type.valid(e,c[u])||c.splice(u--,1);return new Mt(c.length?this.local.concat(c).sort(ys):this.local,s||this.children)}remove(e){return e.length==0||this==bn?this:this.removeInner(e,0)}removeInner(e,n){let i=this.children,s=this.local;for(let l=0;l<i.length;l+=3){let c,u=i[l]+n,d=i[l+1]+n;for(let y=0,b;y<e.length;y++)(b=e[y])&&b.from>u&&b.to<d&&(e[y]=null,(c||(c=[])).push(b));if(!c)continue;i==this.children&&(i=this.children.slice());let p=i[l+2].removeInner(c,u+1);p!=bn?i[l+2]=p:(i.splice(l,3),l-=3)}if(s.length){for(let l=0,c;l<e.length;l++)if(c=e[l])for(let u=0;u<s.length;u++)s[u].eq(c,n)&&(s==this.local&&(s=this.local.slice()),s.splice(u--,1))}return i==this.children&&s==this.local?this:s.length||i.length?new Mt(s,i):bn}forChild(e,n){if(this==bn)return this;if(n.isLeaf)return Mt.empty;let i,s;for(let u=0;u<this.children.length;u+=3)if(this.children[u]>=e){this.children[u]==e&&(i=this.children[u+2]);break}let l=e+1,c=l+n.content.size;for(let u=0;u<this.local.length;u++){let d=this.local[u];if(d.from<c&&d.to>l&&d.type instanceof Ao){let p=Math.max(l,d.from)-l,y=Math.min(c,d.to)-l;p<y&&(s||(s=[])).push(d.copy(p,y))}}if(s){let u=new Mt(s.sort(ys),kl);return i?new vo([u,i]):u}return i||bn}eq(e){if(this==e)return!0;if(!(e instanceof Mt)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return mg(this.localsInner(e))}localsInner(e){if(this==bn)return kl;if(e.inlineContent||!this.local.some(Ao.is))return this.local;let n=[];for(let i=0;i<this.local.length;i++)this.local[i].type instanceof Ao||n.push(this.local[i]);return n}forEachSet(e){e(this)}}Mt.empty=new Mt([],[]);Mt.removeOverlap=mg;const bn=Mt.empty;class vo{constructor(e){this.members=e}map(e,n){const i=this.members.map(s=>s.map(e,n,gs));return vo.from(i)}forChild(e,n){if(n.isLeaf)return Mt.empty;let i=[];for(let s=0;s<this.members.length;s++){let l=this.members[s].forChild(e,n);l!=bn&&(l instanceof vo?i=i.concat(l.members):i.push(l))}return vo.from(i)}eq(e){if(!(e instanceof vo)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,i=!0;for(let s=0;s<this.members.length;s++){let l=this.members[s].localsInner(e);if(l.length)if(!n)n=l;else{i&&(n=n.slice(),i=!1);for(let c=0;c<l.length;c++)n.push(l[c])}}return n?mg(i?n:n.sort(ys)):kl}static from(e){switch(e.length){case 0:return bn;case 1:return e[0];default:return new vo(e.every(n=>n instanceof Mt)?e:e.reduce((n,i)=>n.concat(i instanceof Mt?i:i.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function cj(t,e,n,i,s,l,c){let u=t.slice();for(let p=0,y=l;p<n.maps.length;p++){let b=0;n.maps[p].forEach((v,x,k,C)=>{let E=C-k-(x-v);for(let M=0;M<u.length;M+=3){let _=u[M+1];if(_<0||v>_+y-b)continue;let N=u[M]+y-b;x>=N?u[M+1]=v<=N?-2:-1:v>=y&&E&&(u[M]+=E,u[M+1]+=E)}b+=E}),y=n.maps[p].map(y,-1)}let d=!1;for(let p=0;p<u.length;p+=3)if(u[p+1]<0){if(u[p+1]==-2){d=!0,u[p+1]=-1;continue}let y=n.map(t[p]+l),b=y-s;if(b<0||b>=i.content.size){d=!0;continue}let v=n.map(t[p+1]+l,-1),x=v-s,{index:k,offset:C}=i.content.findIndex(b),E=i.maybeChild(k);if(E&&C==b&&C+E.nodeSize==x){let M=u[p+2].mapInner(n,E,y+1,t[p]+l+1,c);M!=bn?(u[p]=b,u[p+1]=x,u[p+2]=M):(u[p+1]=-2,d=!0)}else d=!0}if(d){let p=uj(u,t,e,n,s,l,c),y=xf(p,i,0,c);e=y.local;for(let b=0;b<u.length;b+=3)u[b+1]<0&&(u.splice(b,3),b-=3);for(let b=0,v=0;b<y.children.length;b+=3){let x=y.children[b];for(;v<u.length&&u[v]<x;)v+=3;u.splice(v,0,y.children[b],y.children[b+1],y.children[b+2])}}return new Mt(e.sort(ys),u)}function c2(t,e){if(!e||!t.length)return t;let n=[];for(let i=0;i<t.length;i++){let s=t[i];n.push(new Tn(s.from+e,s.to+e,s.type))}return n}function uj(t,e,n,i,s,l,c){function u(d,p){for(let y=0;y<d.local.length;y++){let b=d.local[y].map(i,s,p);b?n.push(b):c.onRemove&&c.onRemove(d.local[y].spec)}for(let y=0;y<d.children.length;y+=3)u(d.children[y+2],d.children[y]+p+1)}for(let d=0;d<t.length;d+=3)t[d+1]==-1&&u(t[d+2],e[d]+l+1);return n}function u2(t,e,n){if(e.isLeaf)return null;let i=n+e.nodeSize,s=null;for(let l=0,c;l<t.length;l++)(c=t[l])&&c.from>n&&c.to<i&&((s||(s=[])).push(c),t[l]=null);return s}function f2(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function xf(t,e,n,i){let s=[],l=!1;e.forEach((u,d)=>{let p=u2(t,u,d+n);if(p){l=!0;let y=xf(p,u,n+d+1,i);y!=bn&&s.push(d,d+u.nodeSize,y)}});let c=c2(l?f2(t):t,-n).sort(ys);for(let u=0;u<c.length;u++)c[u].type.valid(e,c[u])||(i.onRemove&&i.onRemove(c[u].spec),c.splice(u--,1));return c.length||s.length?new Mt(c,s):bn}function ys(t,e){return t.from-e.from||t.to-e.to}function mg(t){let e=t;for(let n=0;n<e.length-1;n++){let i=e[n];if(i.from!=i.to)for(let s=n+1;s<e.length;s++){let l=e[s];if(l.from==i.from){l.to!=i.to&&(e==t&&(e=t.slice()),e[s]=l.copy(l.from,i.to),Tv(e,s+1,l.copy(i.to,l.to)));continue}else{l.from<i.to&&(e==t&&(e=t.slice()),e[n]=i.copy(i.from,l.from),Tv(e,s,i.copy(l.from,i.to)));break}}}return e}function Tv(t,e,n){for(;e<t.length&&ys(n,t[e])>0;)e++;t.splice(e,0,n)}function Vp(t){let e=[];return t.someProp("decorations",n=>{let i=n(t.state);i&&i!=bn&&e.push(i)}),t.cursorWrapper&&e.push(Mt.create(t.state.doc,[t.cursorWrapper.deco])),vo.from(e)}const fj={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},dj=In&&To<=11;class hj{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class pj{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new hj,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(i=>{for(let s=0;s<i.length;s++)this.queue.push(i[s]);In&&To<=11&&i.some(s=>s.type=="childList"&&s.removedNodes.length||s.type=="characterData"&&s.oldValue.length>s.target.nodeValue.length)?this.flushSoon():mn&&e.composing&&i.some(s=>s.type=="childList"&&s.target.nodeName=="TR")?(e.input.badSafariComposition=!0,this.flushSoon()):this.flush()}),dj&&(this.onCharData=i=>{this.queue.push({target:i.target,type:"characterData",oldValue:i.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,fj)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(bv(this.view)){if(this.suppressingSelectionUpdates)return Ti(this.view);if(In&&To<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&ks(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,i;for(let l=e.focusNode;l;l=Nl(l))n.add(l);for(let l=e.anchorNode;l;l=Nl(l))if(n.has(l)){i=l;break}let s=i&&this.view.docView.nearestDesc(i);if(s&&s.ignoreMutation({type:"selection",target:i.nodeType==3?i.parentNode:i}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let i=e.domSelectionRange(),s=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(i)&&bv(e)&&!this.ignoreSelectionChange(i),l=-1,c=-1,u=!1,d=[];if(e.editable)for(let y=0;y<n.length;y++){let b=this.registerMutation(n[y],d);b&&(l=l<0?b.from:Math.min(b.from,l),c=c<0?b.to:Math.max(b.to,c),b.typeOver&&(u=!0))}if(pr&&d.length){let y=d.filter(b=>b.nodeName=="BR");if(y.length==2){let[b,v]=y;b.parentNode&&b.parentNode.parentNode==v.parentNode?v.remove():b.remove()}else{let{focusNode:b}=this.currentSelection;for(let v of y){let x=v.parentNode;x&&x.nodeName=="LI"&&(!b||yj(e,b)!=x)&&v.remove()}}}else if((nn||mn)&&d.some(y=>y.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let y of d)if(y.nodeName=="BR"&&y.parentNode){let b=y.nextSibling;b&&b.nodeType==1&&b.contentEditable=="false"&&y.parentNode.removeChild(y)}}let p=null;l<0&&s&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&cd(i)&&(p=ag(e))&&p.eq(Ue.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,Ti(e),this.currentSelection.set(i),e.scrollToSelection()):(l>-1||s)&&(l>-1&&(e.docView.markDirty(l,c),mj(e)),e.input.badSafariComposition&&(e.input.badSafariComposition=!1,bj(e,d)),this.handleDOMChange(l,c,u,d),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(i)||Ti(e),this.currentSelection.set(i))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let i=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(i==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!i||i.ignoreMutation(e))return null;if(e.type=="childList"){for(let y=0;y<e.addedNodes.length;y++){let b=e.addedNodes[y];n.push(b),b.nodeType==3&&(this.lastChangedTextNode=b)}if(i.contentDOM&&i.contentDOM!=i.dom&&!i.contentDOM.contains(e.target))return{from:i.posBefore,to:i.posAfter};let s=e.previousSibling,l=e.nextSibling;if(In&&To<=11&&e.addedNodes.length)for(let y=0;y<e.addedNodes.length;y++){let{previousSibling:b,nextSibling:v}=e.addedNodes[y];(!b||Array.prototype.indexOf.call(e.addedNodes,b)<0)&&(s=b),(!v||Array.prototype.indexOf.call(e.addedNodes,v)<0)&&(l=v)}let c=s&&s.parentNode==e.target?hn(s)+1:0,u=i.localPosFromDOM(e.target,c,-1),d=l&&l.parentNode==e.target?hn(l):e.target.childNodes.length,p=i.localPosFromDOM(e.target,d,1);return{from:u,to:p}}else return e.type=="attributes"?{from:i.posAtStart-i.border,to:i.posAtEnd+i.border}:(this.lastChangedTextNode=e.target,{from:i.posAtStart,to:i.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let Mv=new WeakMap,Av=!1;function mj(t){if(!Mv.has(t)&&(Mv.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=pr,Av)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Av=!0}}function _v(t,e){let n=e.startContainer,i=e.startOffset,s=e.endContainer,l=e.endOffset,c=t.domAtPos(t.state.selection.anchor);return ks(c.node,c.offset,s,l)&&([n,i,s,l]=[s,l,n,i]),{anchorNode:n,anchorOffset:i,focusNode:s,focusOffset:l}}function gj(t,e){if(e.getComposedRanges){let s=e.getComposedRanges(t.root)[0];if(s)return _v(t,s)}let n;function i(s){s.preventDefault(),s.stopImmediatePropagation(),n=s.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",i,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",i,!0),n?_v(t,n):null}function yj(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let i=t.docView.nearestDesc(n,!0);if(i&&i.node.isBlock)return n}return null}function bj(t,e){var n;let{focusNode:i,focusOffset:s}=t.domSelectionRange();for(let l of e)if(((n=l.parentNode)===null||n===void 0?void 0:n.nodeName)=="TR"){let c=l.nextSibling;for(;c&&c.nodeName!="TD"&&c.nodeName!="TH";)c=c.nextSibling;if(c){let u=c;for(;;){let d=u.firstChild;if(!d||d.nodeType!=1||d.contentEditable=="false"||/^(BR|IMG)$/.test(d.nodeName))break;u=d}u.insertBefore(l,u.firstChild),i==l&&t.domSelection().collapse(l,s)}else l.parentNode.removeChild(l)}}function vj(t,e,n){let{node:i,fromOffset:s,toOffset:l,from:c,to:u}=t.docView.parseRange(e,n),d=t.domSelectionRange(),p,y=d.anchorNode;if(y&&t.dom.contains(y.nodeType==1?y:y.parentNode)&&(p=[{node:y,offset:d.anchorOffset}],cd(d)||p.push({node:d.focusNode,offset:d.focusOffset})),nn&&t.input.lastKeyCode===8)for(let E=l;E>s;E--){let M=i.childNodes[E-1],_=M.pmViewDesc;if(M.nodeName=="BR"&&!_){l=E;break}if(!_||_.size)break}let b=t.state.doc,v=t.someProp("domParser")||wo.fromSchema(t.state.schema),x=b.resolve(c),k=null,C=v.parse(i,{topNode:x.parent,topMatch:x.parent.contentMatchAt(x.index()),topOpen:!0,from:s,to:l,preserveWhitespace:x.parent.type.whitespace=="pre"?"full":!0,findPositions:p,ruleFromNode:xj,context:x});if(p&&p[0].pos!=null){let E=p[0].pos,M=p[1]&&p[1].pos;M==null&&(M=E),k={anchor:E+c,head:M+c}}return{doc:C,sel:k,from:c,to:u}}function xj(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(mn&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||mn&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const Sj=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function kj(t,e,n,i,s){let l=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let $=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,ne=ag(t,$);if(ne&&!t.state.selection.eq(ne)){if(nn&&Ci&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",qe=>qe(t,as(13,"Enter"))))return;let ve=t.state.tr.setSelection(ne);$=="pointer"?ve.setMeta("pointer",!0):$=="key"&&ve.scrollIntoView(),l&&ve.setMeta("composition",l),t.dispatch(ve)}return}let c=t.state.doc.resolve(e),u=c.sharedDepth(n);e=c.before(u+1),n=t.state.doc.resolve(n).after(u+1);let d=t.state.selection,p=vj(t,e,n),y=t.state.doc,b=y.slice(p.from,p.to),v,x;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(v=t.state.selection.to,x="end"):(v=t.state.selection.from,x="start"),t.input.lastKeyCode=null;let k=wj(b.content,p.doc.content,p.from,v,x);if(k&&t.input.domChangeCount++,(zl&&t.input.lastIOSEnter>Date.now()-225||Ci)&&s.some($=>$.nodeType==1&&!Sj.test($.nodeName))&&(!k||k.endA>=k.endB)&&t.someProp("handleKeyDown",$=>$(t,as(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!k)if(i&&d instanceof _e&&!d.empty&&d.$head.sameParent(d.$anchor)&&!t.composing&&!(p.sel&&p.sel.anchor!=p.sel.head))k={start:d.from,endA:d.to,endB:d.to};else{if(p.sel){let $=jv(t,t.state.doc,p.sel);if($&&!$.eq(t.state.selection)){let ne=t.state.tr.setSelection($);l&&ne.setMeta("composition",l),t.dispatch(ne)}}return}t.state.selection.from<t.state.selection.to&&k.start==k.endB&&t.state.selection instanceof _e&&(k.start>t.state.selection.from&&k.start<=t.state.selection.from+2&&t.state.selection.from>=p.from?k.start=t.state.selection.from:k.endA<t.state.selection.to&&k.endA>=t.state.selection.to-2&&t.state.selection.to<=p.to&&(k.endB+=t.state.selection.to-k.endA,k.endA=t.state.selection.to)),In&&To<=11&&k.endB==k.start+1&&k.endA==k.start&&k.start>p.from&&p.doc.textBetween(k.start-p.from-1,k.start-p.from+1)==" "&&(k.start--,k.endA--,k.endB--);let C=p.doc.resolveNoCache(k.start-p.from),E=p.doc.resolveNoCache(k.endB-p.from),M=y.resolve(k.start),_=C.sameParent(E)&&C.parent.inlineContent&&M.end()>=k.endA;if((zl&&t.input.lastIOSEnter>Date.now()-225&&(!_||s.some($=>$.nodeName=="DIV"||$.nodeName=="P"))||!_&&C.pos<p.doc.content.size&&(!C.sameParent(E)||!C.parent.inlineContent)&&C.pos<E.pos&&!/\S/.test(p.doc.textBetween(C.pos,E.pos,"","")))&&t.someProp("handleKeyDown",$=>$(t,as(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>k.start&&Ej(y,k.start,k.endA,C,E)&&t.someProp("handleKeyDown",$=>$(t,as(8,"Backspace")))){Ci&&nn&&t.domObserver.suppressSelectionUpdates();return}nn&&k.endB==k.start&&(t.input.lastChromeDelete=Date.now()),Ci&&!_&&C.start()!=E.start()&&E.parentOffset==0&&C.depth==E.depth&&p.sel&&p.sel.anchor==p.sel.head&&p.sel.head==k.endA&&(k.endB-=2,E=p.doc.resolveNoCache(k.endB-p.from),setTimeout(()=>{t.someProp("handleKeyDown",function($){return $(t,as(13,"Enter"))})},20));let N=k.start,B=k.endA,L=$=>{let ne=$||t.state.tr.replace(N,B,p.doc.slice(k.start-p.from,k.endB-p.from));if(p.sel){let ve=jv(t,ne.doc,p.sel);ve&&!(nn&&t.composing&&ve.empty&&(k.start!=k.endB||t.input.lastChromeDelete<Date.now()-100)&&(ve.head==N||ve.head==ne.mapping.map(B)-1)||In&&ve.empty&&ve.head==N)&&ne.setSelection(ve)}return l&&ne.setMeta("composition",l),ne.scrollIntoView()},W;if(_)if(C.pos==E.pos){In&&To<=11&&C.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>Ti(t),20));let $=L(t.state.tr.delete(N,B)),ne=y.resolve(k.start).marksAcross(y.resolve(k.endA));ne&&$.ensureMarks(ne),t.dispatch($)}else if(k.endA==k.endB&&(W=Cj(C.parent.content.cut(C.parentOffset,E.parentOffset),M.parent.content.cut(M.parentOffset,k.endA-M.start())))){let $=L(t.state.tr);W.type=="add"?$.addMark(N,B,W.mark):$.removeMark(N,B,W.mark),t.dispatch($)}else if(C.parent.child(C.index()).isText&&C.index()==E.index()-(E.textOffset?0:1)){let $=C.parent.textBetween(C.parentOffset,E.parentOffset),ne=()=>L(t.state.tr.insertText($,N,B));t.someProp("handleTextInput",ve=>ve(t,N,B,$,ne))||t.dispatch(ne())}else t.dispatch(L());else t.dispatch(L())}function jv(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:cg(t,e.resolve(n.anchor),e.resolve(n.head))}function Cj(t,e){let n=t.firstChild.marks,i=e.firstChild.marks,s=n,l=i,c,u,d;for(let y=0;y<i.length;y++)s=i[y].removeFromSet(s);for(let y=0;y<n.length;y++)l=n[y].removeFromSet(l);if(s.length==1&&l.length==0)u=s[0],c="add",d=y=>y.mark(u.addToSet(y.marks));else if(s.length==0&&l.length==1)u=l[0],c="remove",d=y=>y.mark(u.removeFromSet(y.marks));else return null;let p=[];for(let y=0;y<e.childCount;y++)p.push(d(e.child(y)));if(J.from(p).eq(t))return{mark:u,type:c}}function Ej(t,e,n,i,s){if(n-e<=s.pos-i.pos||Pp(i,!0,!1)<s.pos)return!1;let l=t.resolve(e);if(!i.parent.isTextblock){let u=l.nodeAfter;return u!=null&&n==e+u.nodeSize}if(l.parentOffset<l.parent.content.size||!l.parent.isTextblock)return!1;let c=t.resolve(Pp(l,!0,!0));return!c.parent.isTextblock||c.pos>n||Pp(c,!0,!1)<n?!1:i.parent.content.cut(i.parentOffset).eq(c.parent.content)}function Pp(t,e,n){let i=t.depth,s=e?t.end():t.pos;for(;i>0&&(e||t.indexAfter(i)==t.node(i).childCount);)i--,s++,e=!1;if(n){let l=t.node(i).maybeChild(t.indexAfter(i));for(;l&&!l.isLeaf;)l=l.firstChild,s++}return s}function wj(t,e,n,i,s){let l=t.findDiffStart(e,n);if(l==null)return null;let{a:c,b:u}=t.findDiffEnd(e,n+t.size,n+e.size);if(s=="end"){let d=Math.max(0,l-Math.min(c,u));i-=c+d-l}if(c<l&&t.size<e.size){let d=i<=l&&i>=c?l-i:0;l-=d,l&&l<e.size&&Ov(e.textBetween(l-1,l+1))&&(l+=d?1:-1),u=l+(u-c),c=l}else if(u<l){let d=i<=l&&i>=u?l-i:0;l-=d,l&&l<t.size&&Ov(t.textBetween(l-1,l+1))&&(l+=d?1:-1),c=l+(c-u),u=l}return{start:l,endA:c,endB:u}}function Ov(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class d2{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new q_,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(Lv),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=Rv(this),zv(this),this.nodeViews=Dv(this),this.docView=dv(this.state.doc,Nv(this),Vp(this),this.dom,this),this.domObserver=new pj(this,(i,s,l,c)=>kj(this,i,s,l,c)),this.domObserver.start(),V_(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Om(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(Lv),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let i in this._props)n[i]=this._props[i];n.state=this.state;for(let i in e)n[i]=e[i];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var i;let s=this.state,l=!1,c=!1;e.storedMarks&&this.composing&&(o2(this),c=!0),this.state=e;let u=s.plugins!=e.plugins||this._props.plugins!=n.plugins;if(u||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let x=Dv(this);Mj(x,this.nodeViews)&&(this.nodeViews=x,l=!0)}(u||n.handleDOMEvents!=this._props.handleDOMEvents)&&Om(this),this.editable=Rv(this),zv(this);let d=Vp(this),p=Nv(this),y=s.plugins!=e.plugins&&!s.doc.eq(e.doc)?"reset":e.scrollToSelection>s.scrollToSelection?"to selection":"preserve",b=l||!this.docView.matchesNode(e.doc,p,d);(b||!e.selection.eq(s.selection))&&(c=!0);let v=y=="preserve"&&c&&this.dom.style.overflowAnchor==null&&n_(this);if(c){this.domObserver.stop();let x=b&&(In||nn)&&!this.composing&&!s.selection.empty&&!e.selection.empty&&Tj(s.selection,e.selection);if(b){let k=nn?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=nj(this)),(l||!this.docView.update(e.doc,p,d,this))&&(this.docView.updateOuterDeco(p),this.docView.destroy(),this.docView=dv(e.doc,p,d,this.dom,this)),k&&(!this.trackWrites||!this.dom.contains(this.trackWrites))&&(x=!0)}x||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&T_(this))?Ti(this,x):($S(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(s),!((i=this.dragging)===null||i===void 0)&&i.node&&!s.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,s),y=="reset"?this.dom.scrollTop=0:y=="to selection"?this.scrollToSelection():v&&r_(v)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof Ce){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&sv(this,n.getBoundingClientRect(),e)}else sv(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let i=this.directPlugins[n];i.spec.view&&this.pluginViews.push(i.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let i=this.state.plugins[n];i.spec.view&&this.pluginViews.push(i.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let i=this.pluginViews[n];i.update&&i.update(this,e)}}updateDraggedNode(e,n){let i=e.node,s=-1;if(this.state.doc.nodeAt(i.from)==i.node)s=i.from;else{let l=i.from+(this.state.doc.content.size-n.doc.content.size);(l>0&&this.state.doc.nodeAt(l))==i.node&&(s=l)}this.dragging=new l2(e.slice,e.move,s<0?void 0:Ce.create(this.state.doc,s))}someProp(e,n){let i=this._props&&this._props[e],s;if(i!=null&&(s=n?n(i):i))return s;for(let c=0;c<this.directPlugins.length;c++){let u=this.directPlugins[c].props[e];if(u!=null&&(s=n?n(u):u))return s}let l=this.state.plugins;if(l)for(let c=0;c<l.length;c++){let u=l[c].props[e];if(u!=null&&(s=n?n(u):u))return s}}hasFocus(){if(In){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&i_(this.dom),Ti(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return c_(this,e)}coordsAtPos(e,n=1){return HS(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,i=-1){let s=this.docView.posFromDOM(e,n,i);if(s==null)throw new RangeError("DOM position not inside the editor");return s}endOfTextblock(e,n){return p_(this,n||this.state,e)}pasteHTML(e,n){return ac(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return ac(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return ug(this,e)}destroy(){this.docView&&(P_(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Vp(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,GA())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return F_(this,e)}domSelectionRange(){let e=this.domSelection();return e?mn&&this.root.nodeType===11&&JA(this.dom.ownerDocument)==this.dom&&gj(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}d2.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function Nv(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let i in n)i=="class"?e.class+=" "+n[i]:i=="style"?e.style=(e.style?e.style+";":"")+n[i]:!e[i]&&i!="contenteditable"&&i!="nodeName"&&(e[i]=String(n[i]))}),e.translate||(e.translate="no"),[Tn.node(0,t.state.doc.content.size,e)]}function zv(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:Tn.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function Rv(t){return!t.someProp("editable",e=>e(t.state)===!1)}function Tj(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function Dv(t){let e=Object.create(null);function n(i){for(let s in i)Object.prototype.hasOwnProperty.call(e,s)||(e[s]=i[s])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function Mj(t,e){let n=0,i=0;for(let s in t){if(t[s]!=e[s])return!0;n++}for(let s in e)i++;return n!=i}function Lv(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var _o={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Sf={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},Aj=typeof navigator<"u"&&/Mac/.test(navigator.platform),_j=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var pn=0;pn<10;pn++)_o[48+pn]=_o[96+pn]=String(pn);for(var pn=1;pn<=24;pn++)_o[pn+111]="F"+pn;for(var pn=65;pn<=90;pn++)_o[pn]=String.fromCharCode(pn+32),Sf[pn]=String.fromCharCode(pn);for(var Wp in _o)Sf.hasOwnProperty(Wp)||(Sf[Wp]=_o[Wp]);function jj(t){var e=Aj&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||_j&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Sf:_o)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const Oj=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),Nj=typeof navigator<"u"&&/Win/.test(navigator.platform);function zj(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let i,s,l,c;for(let u=0;u<e.length-1;u++){let d=e[u];if(/^(cmd|meta|m)$/i.test(d))c=!0;else if(/^a(lt)?$/i.test(d))i=!0;else if(/^(c|ctrl|control)$/i.test(d))s=!0;else if(/^s(hift)?$/i.test(d))l=!0;else if(/^mod$/i.test(d))Oj?c=!0:s=!0;else throw new Error("Unrecognized modifier name: "+d)}return i&&(n="Alt-"+n),s&&(n="Ctrl-"+n),c&&(n="Meta-"+n),l&&(n="Shift-"+n),n}function Rj(t){let e=Object.create(null);for(let n in t)e[zj(n)]=t[n];return e}function Fp(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function Dj(t){return new At({props:{handleKeyDown:h2(t)}})}function h2(t){let e=Rj(t);return function(n,i){let s=jj(i),l,c=e[Fp(s,i)];if(c&&c(n.state,n.dispatch,n))return!0;if(s.length==1&&s!=" "){if(i.shiftKey){let u=e[Fp(s,i,!1)];if(u&&u(n.state,n.dispatch,n))return!0}if((i.altKey||i.metaKey||i.ctrlKey)&&!(Nj&&i.ctrlKey&&i.altKey)&&(l=_o[i.keyCode])&&l!=s){let u=e[Fp(l,i)];if(u&&u(n.state,n.dispatch,n))return!0}}return!1}}var Lj=Object.defineProperty,gg=(t,e)=>{for(var n in e)Lj(t,n,{get:e[n],enumerable:!0})};function dd(t){const{state:e,transaction:n}=t;let{selection:i}=n,{doc:s}=n,{storedMarks:l}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return l},get selection(){return i},get doc(){return s},get tr(){return i=n.selection,s=n.doc,l=n.storedMarks,n}}}var hd=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:n}=this,{view:i}=e,{tr:s}=n,l=this.buildProps(s);return Object.fromEntries(Object.entries(t).map(([c,u])=>[c,(...p)=>{const y=u(...p)(l);return!s.getMeta("preventDispatch")&&!this.hasCustomState&&i.dispatch(s),y}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:n,editor:i,state:s}=this,{view:l}=i,c=[],u=!!t,d=t||s.tr,p=()=>(!u&&e&&!d.getMeta("preventDispatch")&&!this.hasCustomState&&l.dispatch(d),c.every(b=>b===!0)),y={...Object.fromEntries(Object.entries(n).map(([b,v])=>[b,(...k)=>{const C=this.buildProps(d,e),E=v(...k)(C);return c.push(E),y}])),run:p};return y}createCan(t){const{rawCommands:e,state:n}=this,i=!1,s=t||n.tr,l=this.buildProps(s,i);return{...Object.fromEntries(Object.entries(e).map(([u,d])=>[u,(...p)=>d(...p)({...l,dispatch:void 0})])),chain:()=>this.createChain(s,i)}}buildProps(t,e=!0){const{rawCommands:n,editor:i,state:s}=this,{view:l}=i,c={tr:t,editor:i,view:l,state:dd({state:s,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(n).map(([u,d])=>[u,(...p)=>d(...p)(c)]))}};return c}},p2={};gg(p2,{blur:()=>Bj,clearContent:()=>Ij,clearNodes:()=>Hj,command:()=>Uj,createParagraphNear:()=>qj,cut:()=>Vj,deleteCurrentNode:()=>Pj,deleteNode:()=>Wj,deleteRange:()=>Fj,deleteSelection:()=>Gj,enter:()=>$j,exitCode:()=>Yj,extendMarkRange:()=>Kj,first:()=>Qj,focus:()=>Xj,forEach:()=>Zj,insertContent:()=>eO,insertContentAt:()=>rO,joinBackward:()=>sO,joinDown:()=>oO,joinForward:()=>lO,joinItemBackward:()=>aO,joinItemForward:()=>cO,joinTextblockBackward:()=>uO,joinTextblockForward:()=>fO,joinUp:()=>iO,keyboardShortcut:()=>hO,lift:()=>pO,liftEmptyBlock:()=>mO,liftListItem:()=>gO,newlineInCode:()=>yO,resetAttributes:()=>bO,scrollIntoView:()=>vO,selectAll:()=>xO,selectNodeBackward:()=>SO,selectNodeForward:()=>kO,selectParentNode:()=>CO,selectTextblockEnd:()=>EO,selectTextblockStart:()=>wO,setContent:()=>TO,setMark:()=>GO,setMeta:()=>$O,setNode:()=>YO,setNodeSelection:()=>KO,setTextDirection:()=>QO,setTextSelection:()=>JO,sinkListItem:()=>XO,splitBlock:()=>ZO,splitListItem:()=>e3,toggleList:()=>t3,toggleMark:()=>n3,toggleNode:()=>r3,toggleWrap:()=>i3,undoInputRule:()=>o3,unsetAllMarks:()=>s3,unsetMark:()=>l3,unsetTextDirection:()=>a3,updateAttributes:()=>c3,wrapIn:()=>u3,wrapInList:()=>f3});var Bj=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window?.getSelection())==null||n.removeAllRanges())}),!0),Ij=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),Hj=()=>({state:t,tr:e,dispatch:n})=>{const{selection:i}=e,{ranges:s}=i;return n&&s.forEach(({$from:l,$to:c})=>{t.doc.nodesBetween(l.pos,c.pos,(u,d)=>{if(u.type.isText)return;const{doc:p,mapping:y}=e,b=p.resolve(y.map(d)),v=p.resolve(y.map(d+u.nodeSize)),x=b.blockRange(v);if(!x)return;const k=Hl(x);if(u.type.isTextblock){const{defaultType:C}=b.parent.contentMatchAt(b.index());e.setNodeMarkup(x.start,C)}(k||k===0)&&e.lift(x,k)})}),!0},Uj=t=>e=>t(e),qj=()=>({state:t,dispatch:e})=>AS(t,e),Vj=(t,e)=>({editor:n,tr:i})=>{const{state:s}=n,l=s.doc.slice(t.from,t.to);i.deleteRange(t.from,t.to);const c=i.mapping.map(e);return i.insert(c,l.content),i.setSelection(new _e(i.doc.resolve(Math.max(c-1,0)))),!0},Pj=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,i=n.$anchor.node();if(i.content.size>0)return!1;const s=t.selection.$anchor;for(let l=s.depth;l>0;l-=1)if(s.node(l).type===i.type){if(e){const u=s.before(l),d=s.after(l);t.delete(u,d).scrollIntoView()}return!0}return!1};function Gt(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}var Wj=t=>({tr:e,state:n,dispatch:i})=>{const s=Gt(t,n.schema),l=e.selection.$anchor;for(let c=l.depth;c>0;c-=1)if(l.node(c).type===s){if(i){const d=l.before(c),p=l.after(c);e.delete(d,p).scrollIntoView()}return!0}return!1},Fj=t=>({tr:e,dispatch:n})=>{const{from:i,to:s}=t;return n&&e.delete(i,s),!0},Gj=()=>({state:t,dispatch:e})=>ng(t,e),$j=()=>({commands:t})=>t.keyboardShortcut("Enter"),Yj=()=>({state:t,dispatch:e})=>OA(t,e);function yg(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function kf(t,e,n={strict:!0}){const i=Object.keys(e);return i.length?i.every(s=>n.strict?e[s]===t[s]:yg(e[s])?e[s].test(t[s]):e[s]===t[s]):!0}function m2(t,e,n={}){return t.find(i=>i.type===e&&kf(Object.fromEntries(Object.keys(n).map(s=>[s,i.attrs[s]])),n))}function Bv(t,e,n={}){return!!m2(t,e,n)}function bg(t,e,n){var i;if(!t||!e)return;let s=t.parent.childAfter(t.parentOffset);if((!s.node||!s.node.marks.some(y=>y.type===e))&&(s=t.parent.childBefore(t.parentOffset)),!s.node||!s.node.marks.some(y=>y.type===e)||(n=n||((i=s.node.marks[0])==null?void 0:i.attrs),!m2([...s.node.marks],e,n)))return;let c=s.index,u=t.start()+s.offset,d=c+1,p=u+s.node.nodeSize;for(;c>0&&Bv([...t.parent.child(c-1).marks],e,n);)c-=1,u-=t.parent.child(c).nodeSize;for(;d<t.parent.childCount&&Bv([...t.parent.child(d).marks],e,n);)p+=t.parent.child(d).nodeSize,d+=1;return{from:u,to:p}}function _i(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}var Kj=(t,e={})=>({tr:n,state:i,dispatch:s})=>{const l=_i(t,i.schema),{doc:c,selection:u}=n,{$from:d,from:p,to:y}=u;if(s){const b=bg(d,l,e);if(b&&b.from<=p&&b.to>=y){const v=_e.create(c,b.from,b.to);n.setSelection(v)}}return!0},Qj=t=>e=>{const n=typeof t=="function"?t(e):t;for(let i=0;i<n.length;i+=1)if(n[i](e))return!0;return!1};function g2(t){return t instanceof _e}function ds(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function y2(t,e=null){if(!e)return null;const n=Ue.atStart(t),i=Ue.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return i;const s=n.from,l=i.to;return e==="all"?_e.create(t,ds(0,s,l),ds(t.content.size,s,l)):_e.create(t,ds(e,s,l),ds(e,s,l))}function Iv(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function Cf(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function Jj(){return typeof navigator<"u"?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}var Xj=(t=null,e={})=>({editor:n,view:i,tr:s,dispatch:l})=>{e={scrollIntoView:!0,...e};const c=()=>{(Cf()||Iv())&&i.dom.focus(),Jj()&&!Cf()&&!Iv()&&i.dom.focus({preventScroll:!0}),requestAnimationFrame(()=>{n.isDestroyed||(i.focus(),e?.scrollIntoView&&n.commands.scrollIntoView())})};if(i.hasFocus()&&t===null||t===!1)return!0;if(l&&t===null&&!g2(n.state.selection))return c(),!0;const u=y2(s.doc,t)||n.state.selection,d=n.state.selection.eq(u);return l&&(d||s.setSelection(u),d&&s.storedMarks&&s.setStoredMarks(s.storedMarks),c()),!0},Zj=(t,e)=>n=>t.every((i,s)=>e(i,{...n,index:s})),eO=(t,e)=>({tr:n,commands:i})=>i.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),b2=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const i=e[n];i.nodeType===3&&i.nodeValue&&/^(\n\s\s|\n)$/.test(i.nodeValue)?t.removeChild(i):i.nodeType===1&&b2(i)}return t};function Pu(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return b2(n)}function uc(t,e,n){if(t instanceof Mr||t instanceof J)return t;n={slice:!0,parseOptions:{},...n};const i=typeof t=="object"&&t!==null,s=typeof t=="string";if(i)try{if(Array.isArray(t)&&t.length>0)return J.fromArray(t.map(u=>e.nodeFromJSON(u)));const c=e.nodeFromJSON(t);return n.errorOnInvalidContent&&c.check(),c}catch(l){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:l});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",l),uc("",e,n)}if(s){if(n.errorOnInvalidContent){let c=!1,u="";const d=new tS({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:p=>(c=!0,u=typeof p=="string"?p:p.outerHTML,null)}]}})});if(n.slice?wo.fromSchema(d).parseSlice(Pu(t),n.parseOptions):wo.fromSchema(d).parse(Pu(t),n.parseOptions),n.errorOnInvalidContent&&c)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${u}`)})}const l=wo.fromSchema(e);return n.slice?l.parseSlice(Pu(t),n.parseOptions).content:l.parse(Pu(t),n.parseOptions)}return uc("",e,n)}function tO(t,e,n){const i=t.steps.length-1;if(i<e)return;const s=t.steps[i];if(!(s instanceof tn||s instanceof rn))return;const l=t.mapping.maps[i];let c=0;l.forEach((u,d,p,y)=>{c===0&&(c=y)}),t.setSelection(Ue.near(t.doc.resolve(c),n))}var nO=t=>!("type"in t),rO=(t,e,n)=>({tr:i,dispatch:s,editor:l})=>{var c;if(s){n={parseOptions:l.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let u;const d=E=>{l.emit("contentError",{editor:l,error:E,disableCollaboration:()=>{"collaboration"in l.storage&&typeof l.storage.collaboration=="object"&&l.storage.collaboration&&(l.storage.collaboration.isDisabled=!0)}})},p={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!l.options.enableContentCheck&&l.options.emitContentError)try{uc(e,l.schema,{parseOptions:p,errorOnInvalidContent:!0})}catch(E){d(E)}try{u=uc(e,l.schema,{parseOptions:p,errorOnInvalidContent:(c=n.errorOnInvalidContent)!=null?c:l.options.enableContentCheck})}catch(E){return d(E),!1}let{from:y,to:b}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},v=!0,x=!0;if((nO(u)?u:[u]).forEach(E=>{E.check(),v=v?E.isText&&E.marks.length===0:!1,x=x?E.isBlock:!1}),y===b&&x){const{parent:E}=i.doc.resolve(y);E.isTextblock&&!E.type.spec.code&&!E.childCount&&(y-=1,b+=1)}let C;if(v){if(Array.isArray(e))C=e.map(E=>E.text||"").join("");else if(e instanceof J){let E="";e.forEach(M=>{M.text&&(E+=M.text)}),C=E}else typeof e=="object"&&e&&e.text?C=e.text:C=e;i.insertText(C,y,b)}else{C=u;const E=i.doc.resolve(y),M=E.node(),_=E.parentOffset===0,N=M.isText||M.isTextblock,B=M.content.size>0;_&&N&&B&&(y=Math.max(0,y-1)),i.replaceWith(y,b,C)}n.updateSelection&&tO(i,i.steps.length-1,-1),n.applyInputRules&&i.setMeta("applyInputRules",{from:y,text:C}),n.applyPasteRules&&i.setMeta("applyPasteRules",{from:y,text:C})}return!0},iO=()=>({state:t,dispatch:e})=>AA(t,e),oO=()=>({state:t,dispatch:e})=>_A(t,e),sO=()=>({state:t,dispatch:e})=>SS(t,e),lO=()=>({state:t,dispatch:e})=>wS(t,e),aO=()=>({state:t,dispatch:e,tr:n})=>{try{const i=sd(t.doc,t.selection.$from.pos,-1);return i==null?!1:(n.join(i,2),e&&e(n),!0)}catch{return!1}},cO=()=>({state:t,dispatch:e,tr:n})=>{try{const i=sd(t.doc,t.selection.$from.pos,1);return i==null?!1:(n.join(i,2),e&&e(n),!0)}catch{return!1}},uO=()=>({state:t,dispatch:e})=>TA(t,e),fO=()=>({state:t,dispatch:e})=>MA(t,e);function v2(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function dO(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let i,s,l,c;for(let u=0;u<e.length-1;u+=1){const d=e[u];if(/^(cmd|meta|m)$/i.test(d))c=!0;else if(/^a(lt)?$/i.test(d))i=!0;else if(/^(c|ctrl|control)$/i.test(d))s=!0;else if(/^s(hift)?$/i.test(d))l=!0;else if(/^mod$/i.test(d))Cf()||v2()?c=!0:s=!0;else throw new Error(`Unrecognized modifier name: ${d}`)}return i&&(n=`Alt-${n}`),s&&(n=`Ctrl-${n}`),c&&(n=`Meta-${n}`),l&&(n=`Shift-${n}`),n}var hO=t=>({editor:e,view:n,tr:i,dispatch:s})=>{const l=dO(t).split(/-(?!$)/),c=l.find(p=>!["Alt","Ctrl","Meta","Shift"].includes(p)),u=new KeyboardEvent("keydown",{key:c==="Space"?" ":c,altKey:l.includes("Alt"),ctrlKey:l.includes("Ctrl"),metaKey:l.includes("Meta"),shiftKey:l.includes("Shift"),bubbles:!0,cancelable:!0}),d=e.captureTransaction(()=>{n.someProp("handleKeyDown",p=>p(n,u))});return d?.steps.forEach(p=>{const y=p.map(i.mapping);y&&s&&i.maybeStep(y)}),!0};function jo(t,e,n={}){const{from:i,to:s,empty:l}=t.selection,c=e?Gt(e,t.schema):null,u=[];t.doc.nodesBetween(i,s,(b,v)=>{if(b.isText)return;const x=Math.max(i,v),k=Math.min(s,v+b.nodeSize);u.push({node:b,from:x,to:k})});const d=s-i,p=u.filter(b=>c?c.name===b.node.type.name:!0).filter(b=>kf(b.node.attrs,n,{strict:!1}));return l?!!p.length:p.reduce((b,v)=>b+v.to-v.from,0)>=d}var pO=(t,e={})=>({state:n,dispatch:i})=>{const s=Gt(t,n.schema);return jo(n,s,e)?jA(n,i):!1},mO=()=>({state:t,dispatch:e})=>_S(t,e),gO=t=>({state:e,dispatch:n})=>{const i=Gt(t,e.schema);return VA(i)(e,n)},yO=()=>({state:t,dispatch:e})=>MS(t,e);function pd(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function Hv(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((i,s)=>(n.includes(s)||(i[s]=t[s]),i),{})}var bO=(t,e)=>({tr:n,state:i,dispatch:s})=>{let l=null,c=null;const u=pd(typeof t=="string"?t:t.name,i.schema);if(!u)return!1;u==="node"&&(l=Gt(t,i.schema)),u==="mark"&&(c=_i(t,i.schema));let d=!1;return n.selection.ranges.forEach(p=>{i.doc.nodesBetween(p.$from.pos,p.$to.pos,(y,b)=>{l&&l===y.type&&(d=!0,s&&n.setNodeMarkup(b,void 0,Hv(y.attrs,e))),c&&y.marks.length&&y.marks.forEach(v=>{c===v.type&&(d=!0,s&&n.addMark(b,b+y.nodeSize,c.create(Hv(v.attrs,e))))})})}),d},vO=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),xO=()=>({tr:t,dispatch:e})=>{if(e){const n=new Kn(t.doc);t.setSelection(n)}return!0},SO=()=>({state:t,dispatch:e})=>CS(t,e),kO=()=>({state:t,dispatch:e})=>TS(t,e),CO=()=>({state:t,dispatch:e})=>RA(t,e),EO=()=>({state:t,dispatch:e})=>BA(t,e),wO=()=>({state:t,dispatch:e})=>LA(t,e);function Nm(t,e,n={},i={}){return uc(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:i.errorOnInvalidContent})}var TO=(t,{errorOnInvalidContent:e,emitUpdate:n=!0,parseOptions:i={}}={})=>({editor:s,tr:l,dispatch:c,commands:u})=>{const{doc:d}=l;if(i.preserveWhitespace!=="full"){const p=Nm(t,s.schema,i,{errorOnInvalidContent:e??s.options.enableContentCheck});return c&&l.replaceWith(0,d.content.size,p).setMeta("preventUpdate",!n),!0}return c&&l.setMeta("preventUpdate",!n),u.insertContentAt({from:0,to:d.content.size},t,{parseOptions:i,errorOnInvalidContent:e??s.options.enableContentCheck})};function x2(t,e){const n=_i(e,t.schema),{from:i,to:s,empty:l}=t.selection,c=[];l?(t.storedMarks&&c.push(...t.storedMarks),c.push(...t.selection.$head.marks())):t.doc.nodesBetween(i,s,d=>{c.push(...d.marks)});const u=c.find(d=>d.type.name===n.name);return u?{...u.attrs}:{}}function S2(t,e){const n=new yS(t);return e.forEach(i=>{i.steps.forEach(s=>{n.step(s)})}),n}function MO(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function AO(t,e,n){const i=[];return t.nodesBetween(e.from,e.to,(s,l)=>{n(s)&&i.push({node:s,pos:l})}),i}function _O(t,e){for(let n=t.depth;n>0;n-=1){const i=t.node(n);if(e(i))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:i}}}function md(t){return e=>_O(e.$from,t)}function Se(t,e,n){return t.config[e]===void 0&&t.parent?Se(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?Se(t.parent,e,n):null}):t.config[e]}function vg(t){return t.map(e=>{const n={name:e.name,options:e.options,storage:e.storage},i=Se(e,"addExtensions",n);return i?[e,...vg(i())]:e}).flat(10)}function xg(t,e){const n=Ms.fromSchema(e).serializeFragment(t),s=document.implementation.createHTMLDocument().createElement("div");return s.appendChild(n),s.innerHTML}function k2(t){return typeof t=="function"}function ut(t,e=void 0,...n){return k2(t)?e?t.bind(e)(...n):t(...n):t}function jO(t={}){return Object.keys(t).length===0&&t.constructor===Object}function Rl(t){const e=t.filter(s=>s.type==="extension"),n=t.filter(s=>s.type==="node"),i=t.filter(s=>s.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:i}}function C2(t){const e=[],{nodeExtensions:n,markExtensions:i}=Rl(t),s=[...n,...i],l={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(c=>{const u={name:c.name,options:c.options,storage:c.storage,extensions:s},d=Se(c,"addGlobalAttributes",u);if(!d)return;d().forEach(y=>{y.types.forEach(b=>{Object.entries(y.attributes).forEach(([v,x])=>{e.push({type:b,name:v,attribute:{...l,...x}})})})})}),s.forEach(c=>{const u={name:c.name,options:c.options,storage:c.storage},d=Se(c,"addAttributes",u);if(!d)return;const p=d();Object.entries(p).forEach(([y,b])=>{const v={...l,...b};typeof v?.default=="function"&&(v.default=v.default()),v?.isRequired&&v?.default===void 0&&delete v.default,e.push({type:c.name,name:y,attribute:v})})}),e}function $t(...t){return t.filter(e=>!!e).reduce((e,n)=>{const i={...e};return Object.entries(n).forEach(([s,l])=>{if(!i[s]){i[s]=l;return}if(s==="class"){const u=l?String(l).split(" "):[],d=i[s]?i[s].split(" "):[],p=u.filter(y=>!d.includes(y));i[s]=[...d,...p].join(" ")}else if(s==="style"){const u=l?l.split(";").map(y=>y.trim()).filter(Boolean):[],d=i[s]?i[s].split(";").map(y=>y.trim()).filter(Boolean):[],p=new Map;d.forEach(y=>{const[b,v]=y.split(":").map(x=>x.trim());p.set(b,v)}),u.forEach(y=>{const[b,v]=y.split(":").map(x=>x.trim());p.set(b,v)}),i[s]=Array.from(p.entries()).map(([y,b])=>`${y}: ${b}`).join("; ")}else i[s]=l}),i},{})}function fc(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,i)=>$t(n,i),{})}function OO(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function Uv(t,e){return"style"in t?t:{...t,getAttrs:n=>{const i=t.getAttrs?t.getAttrs(n):t.attrs;if(i===!1)return!1;const s=e.reduce((l,c)=>{const u=c.attribute.parseHTML?c.attribute.parseHTML(n):OO(n.getAttribute(c.name));return u==null?l:{...l,[c.name]:u}},{});return{...i,...s}}}}function qv(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&jO(n)?!1:n!=null))}function Vv(t){var e,n;const i={};return!((e=t?.attribute)!=null&&e.isRequired)&&"default"in(t?.attribute||{})&&(i.default=t.attribute.default),((n=t?.attribute)==null?void 0:n.validate)!==void 0&&(i.validate=t.attribute.validate),[t.name,i]}function NO(t,e){var n;const i=C2(t),{nodeExtensions:s,markExtensions:l}=Rl(t),c=(n=s.find(p=>Se(p,"topNode")))==null?void 0:n.name,u=Object.fromEntries(s.map(p=>{const y=i.filter(M=>M.type===p.name),b={name:p.name,options:p.options,storage:p.storage,editor:e},v=t.reduce((M,_)=>{const N=Se(_,"extendNodeSchema",b);return{...M,...N?N(p):{}}},{}),x=qv({...v,content:ut(Se(p,"content",b)),marks:ut(Se(p,"marks",b)),group:ut(Se(p,"group",b)),inline:ut(Se(p,"inline",b)),atom:ut(Se(p,"atom",b)),selectable:ut(Se(p,"selectable",b)),draggable:ut(Se(p,"draggable",b)),code:ut(Se(p,"code",b)),whitespace:ut(Se(p,"whitespace",b)),linebreakReplacement:ut(Se(p,"linebreakReplacement",b)),defining:ut(Se(p,"defining",b)),isolating:ut(Se(p,"isolating",b)),attrs:Object.fromEntries(y.map(Vv))}),k=ut(Se(p,"parseHTML",b));k&&(x.parseDOM=k.map(M=>Uv(M,y)));const C=Se(p,"renderHTML",b);C&&(x.toDOM=M=>C({node:M,HTMLAttributes:fc(M,y)}));const E=Se(p,"renderText",b);return E&&(x.toText=E),[p.name,x]})),d=Object.fromEntries(l.map(p=>{const y=i.filter(E=>E.type===p.name),b={name:p.name,options:p.options,storage:p.storage,editor:e},v=t.reduce((E,M)=>{const _=Se(M,"extendMarkSchema",b);return{...E,..._?_(p):{}}},{}),x=qv({...v,inclusive:ut(Se(p,"inclusive",b)),excludes:ut(Se(p,"excludes",b)),group:ut(Se(p,"group",b)),spanning:ut(Se(p,"spanning",b)),code:ut(Se(p,"code",b)),attrs:Object.fromEntries(y.map(Vv))}),k=ut(Se(p,"parseHTML",b));k&&(x.parseDOM=k.map(E=>Uv(E,y)));const C=Se(p,"renderHTML",b);return C&&(x.toDOM=E=>C({mark:E,HTMLAttributes:fc(E,y)})),[p.name,x]}));return new tS({topNode:c,nodes:u,marks:d})}function zO(t){const e=t.filter((n,i)=>t.indexOf(n)!==i);return Array.from(new Set(e))}function Ef(t){return t.sort((n,i)=>{const s=Se(n,"priority")||100,l=Se(i,"priority")||100;return s>l?-1:s<l?1:0})}function E2(t){const e=Ef(vg(t)),n=zO(e.map(i=>i.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(i=>`'${i}'`).join(", ")}]. This can lead to issues.`),e}function w2(t,e,n){const{from:i,to:s}=e,{blockSeparator:l=`

`,textSerializers:c={}}=n||{};let u="";return t.nodesBetween(i,s,(d,p,y,b)=>{var v;d.isBlock&&p>i&&(u+=l);const x=c?.[d.type.name];if(x)return y&&(u+=x({node:d,pos:p,parent:y,index:b,range:e})),!1;d.isText&&(u+=(v=d?.text)==null?void 0:v.slice(Math.max(i,p)-p,s-p))}),u}function RO(t,e){const n={from:0,to:t.content.size};return w2(t,n,e)}function T2(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}function DO(t,e){const n=Gt(e,t.schema),{from:i,to:s}=t.selection,l=[];t.doc.nodesBetween(i,s,u=>{l.push(u)});const c=l.reverse().find(u=>u.type.name===n.name);return c?{...c.attrs}:{}}function M2(t,e){const n=pd(typeof e=="string"?e:e.name,t.schema);return n==="node"?DO(t,e):n==="mark"?x2(t,e):{}}function LO(t,e=JSON.stringify){const n={};return t.filter(i=>{const s=e(i);return Object.prototype.hasOwnProperty.call(n,s)?!1:n[s]=!0})}function BO(t){const e=LO(t);return e.length===1?e:e.filter((n,i)=>!e.filter((l,c)=>c!==i).some(l=>n.oldRange.from>=l.oldRange.from&&n.oldRange.to<=l.oldRange.to&&n.newRange.from>=l.newRange.from&&n.newRange.to<=l.newRange.to))}function A2(t){const{mapping:e,steps:n}=t,i=[];return e.maps.forEach((s,l)=>{const c=[];if(s.ranges.length)s.forEach((u,d)=>{c.push({from:u,to:d})});else{const{from:u,to:d}=n[l];if(u===void 0||d===void 0)return;c.push({from:u,to:d})}c.forEach(({from:u,to:d})=>{const p=e.slice(l).map(u,-1),y=e.slice(l).map(d),b=e.invert().map(p,-1),v=e.invert().map(y);i.push({oldRange:{from:b,to:v},newRange:{from:p,to:y}})})}),BO(i)}function Sg(t,e,n){const i=[];return t===e?n.resolve(t).marks().forEach(s=>{const l=n.resolve(t),c=bg(l,s.type);c&&i.push({mark:s,...c})}):n.nodesBetween(t,e,(s,l)=>{!s||s?.nodeSize===void 0||i.push(...s.marks.map(c=>({from:l,to:l+s.nodeSize,mark:c})))}),i}var IO=(t,e,n,i=20)=>{const s=t.doc.resolve(n);let l=i,c=null;for(;l>0&&c===null;){const u=s.node(l);u?.type.name===e?c=u:l-=1}return[c,l]};function Wu(t,e){return e.nodes[t]||e.marks[t]||null}function rf(t,e,n){return Object.fromEntries(Object.entries(n).filter(([i])=>{const s=t.find(l=>l.type===e&&l.name===i);return s?s.attribute.keepOnSplit:!1}))}var HO=(t,e=500)=>{let n="";const i=t.parentOffset;return t.parent.nodesBetween(Math.max(0,i-e),i,(s,l,c,u)=>{var d,p;const y=((p=(d=s.type.spec).toText)==null?void 0:p.call(d,{node:s,pos:l,parent:c,index:u}))||s.textContent||"%leaf%";n+=s.isAtom&&!s.isText?y:y.slice(0,Math.max(0,i-l))}),n};function zm(t,e,n={}){const{empty:i,ranges:s}=t.selection,l=e?_i(e,t.schema):null;if(i)return!!(t.storedMarks||t.selection.$from.marks()).filter(b=>l?l.name===b.type.name:!0).find(b=>kf(b.attrs,n,{strict:!1}));let c=0;const u=[];if(s.forEach(({$from:b,$to:v})=>{const x=b.pos,k=v.pos;t.doc.nodesBetween(x,k,(C,E)=>{if(!C.isText&&!C.marks.length)return;const M=Math.max(x,E),_=Math.min(k,E+C.nodeSize),N=_-M;c+=N,u.push(...C.marks.map(B=>({mark:B,from:M,to:_})))})}),c===0)return!1;const d=u.filter(b=>l?l.name===b.mark.type.name:!0).filter(b=>kf(b.mark.attrs,n,{strict:!1})).reduce((b,v)=>b+v.to-v.from,0),p=u.filter(b=>l?b.mark.type!==l&&b.mark.type.excludes(l):!0).reduce((b,v)=>b+v.to-v.from,0);return(d>0?d+p:d)>=c}function UO(t,e,n={}){if(!e)return jo(t,null,n)||zm(t,null,n);const i=pd(e,t.schema);return i==="node"?jo(t,e,n):i==="mark"?zm(t,e,n):!1}var qO=(t,e)=>{const{$from:n,$to:i,$anchor:s}=t.selection;if(e){const l=md(u=>u.type.name===e)(t.selection);if(!l)return!1;const c=t.doc.resolve(l.pos+1);return s.pos+1===c.end()}return!(i.parentOffset<i.parent.nodeSize-2||n.pos!==i.pos)},VO=t=>{const{$from:e,$to:n}=t.selection;return!(e.parentOffset>0||e.pos!==n.pos)};function Pv(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function Wv(t,e){const{nodeExtensions:n}=Rl(e),i=n.find(c=>c.name===t);if(!i)return!1;const s={name:i.name,options:i.options,storage:i.storage},l=ut(Se(i,"group",s));return typeof l!="string"?!1:l.split(" ").includes("list")}function gd(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var i;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((i=t.text)!=null?i:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let s=!0;return t.content.forEach(l=>{s!==!1&&(gd(l,{ignoreWhitespace:n,checkChildren:e})||(s=!1))}),s}return!1}function _2(t){return t instanceof Ce}var j2=class O2{constructor(e){this.position=e}static fromJSON(e){return new O2(e.position)}toJSON(){return{position:this.position}}};function PO(t,e){const n=e.mapping.mapResult(t.position);return{position:new j2(n.pos),mapResult:n}}function WO(t){return new j2(t)}function FO(t,e,n){var i;const{selection:s}=e;let l=null;if(g2(s)&&(l=s.$cursor),l){const u=(i=t.storedMarks)!=null?i:l.marks();return l.parent.type.allowsMarkType(n)&&(!!n.isInSet(u)||!u.some(p=>p.type.excludes(n)))}const{ranges:c}=s;return c.some(({$from:u,$to:d})=>{let p=u.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(u.pos,d.pos,(y,b,v)=>{if(p)return!1;if(y.isInline){const x=!v||v.type.allowsMarkType(n),k=!!n.isInSet(y.marks)||!y.marks.some(C=>C.type.excludes(n));p=x&&k}return!p}),p})}var GO=(t,e={})=>({tr:n,state:i,dispatch:s})=>{const{selection:l}=n,{empty:c,ranges:u}=l,d=_i(t,i.schema);if(s)if(c){const p=x2(i,d);n.addStoredMark(d.create({...p,...e}))}else u.forEach(p=>{const y=p.$from.pos,b=p.$to.pos;i.doc.nodesBetween(y,b,(v,x)=>{const k=Math.max(x,y),C=Math.min(x+v.nodeSize,b);v.marks.find(M=>M.type===d)?v.marks.forEach(M=>{d===M.type&&n.addMark(k,C,d.create({...M.attrs,...e}))}):n.addMark(k,C,d.create(e))})});return FO(i,n,d)},$O=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),YO=(t,e={})=>({state:n,dispatch:i,chain:s})=>{const l=Gt(t,n.schema);let c;return n.selection.$anchor.sameParent(n.selection.$head)&&(c=n.selection.$anchor.parent.attrs),l.isTextblock?s().command(({commands:u})=>rv(l,{...c,...e})(n)?!0:u.clearNodes()).command(({state:u})=>rv(l,{...c,...e})(u,i)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},KO=t=>({tr:e,dispatch:n})=>{if(n){const{doc:i}=e,s=ds(t,0,i.content.size),l=Ce.create(i,s);e.setSelection(l)}return!0},QO=(t,e)=>({tr:n,state:i,dispatch:s})=>{const{selection:l}=i;let c,u;return typeof e=="number"?(c=e,u=e):e&&"from"in e&&"to"in e?(c=e.from,u=e.to):(c=l.from,u=l.to),s&&n.doc.nodesBetween(c,u,(d,p)=>{d.isText||n.setNodeMarkup(p,void 0,{...d.attrs,dir:t})}),!0},JO=t=>({tr:e,dispatch:n})=>{if(n){const{doc:i}=e,{from:s,to:l}=typeof t=="number"?{from:t,to:t}:t,c=_e.atStart(i).from,u=_e.atEnd(i).to,d=ds(s,c,u),p=ds(l,c,u),y=_e.create(i,d,p);e.setSelection(y)}return!0},XO=t=>({state:e,dispatch:n})=>{const i=Gt(t,e.schema);return FA(i)(e,n)};function Fv(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const i=n.filter(s=>e?.includes(s.type.name));t.tr.ensureMarks(i)}}var ZO=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:i,editor:s})=>{const{selection:l,doc:c}=e,{$from:u,$to:d}=l,p=s.extensionManager.attributes,y=rf(p,u.node().type.name,u.node().attrs);if(l instanceof Ce&&l.node.isBlock)return!u.parentOffset||!wi(c,u.pos)?!1:(i&&(t&&Fv(n,s.extensionManager.splittableMarks),e.split(u.pos).scrollIntoView()),!0);if(!u.parent.isBlock)return!1;const b=d.parentOffset===d.parent.content.size,v=u.depth===0?void 0:MO(u.node(-1).contentMatchAt(u.indexAfter(-1)));let x=b&&v?[{type:v,attrs:y}]:void 0,k=wi(e.doc,e.mapping.map(u.pos),1,x);if(!x&&!k&&wi(e.doc,e.mapping.map(u.pos),1,v?[{type:v}]:void 0)&&(k=!0,x=v?[{type:v,attrs:y}]:void 0),i){if(k&&(l instanceof _e&&e.deleteSelection(),e.split(e.mapping.map(u.pos),1,x),v&&!b&&!u.parentOffset&&u.parent.type!==v)){const C=e.mapping.map(u.before()),E=e.doc.resolve(C);u.node(-1).canReplaceWith(E.index(),E.index()+1,v)&&e.setNodeMarkup(e.mapping.map(u.before()),v)}t&&Fv(n,s.extensionManager.splittableMarks),e.scrollIntoView()}return k},e3=(t,e={})=>({tr:n,state:i,dispatch:s,editor:l})=>{var c;const u=Gt(t,i.schema),{$from:d,$to:p}=i.selection,y=i.selection.node;if(y&&y.isBlock||d.depth<2||!d.sameParent(p))return!1;const b=d.node(-1);if(b.type!==u)return!1;const v=l.extensionManager.attributes;if(d.parent.content.size===0&&d.node(-1).childCount===d.indexAfter(-1)){if(d.depth===2||d.node(-3).type!==u||d.index(-2)!==d.node(-2).childCount-1)return!1;if(s){let M=J.empty;const _=d.index(-1)?1:d.index(-2)?2:3;for(let ne=d.depth-_;ne>=d.depth-3;ne-=1)M=J.from(d.node(ne).copy(M));const N=d.indexAfter(-1)<d.node(-2).childCount?1:d.indexAfter(-2)<d.node(-3).childCount?2:3,B={...rf(v,d.node().type.name,d.node().attrs),...e},L=((c=u.contentMatch.defaultType)==null?void 0:c.createAndFill(B))||void 0;M=M.append(J.from(u.createAndFill(null,L)||void 0));const W=d.before(d.depth-(_-1));n.replace(W,d.after(-N),new ae(M,4-_,0));let $=-1;n.doc.nodesBetween(W,n.doc.content.size,(ne,ve)=>{if($>-1)return!1;ne.isTextblock&&ne.content.size===0&&($=ve+1)}),$>-1&&n.setSelection(_e.near(n.doc.resolve($))),n.scrollIntoView()}return!0}const x=p.pos===d.end()?b.contentMatchAt(0).defaultType:null,k={...rf(v,b.type.name,b.attrs),...e},C={...rf(v,d.node().type.name,d.node().attrs),...e};n.delete(d.pos,p.pos);const E=x?[{type:u,attrs:k},{type:x,attrs:C}]:[{type:u,attrs:k}];if(!wi(n.doc,d.pos,2))return!1;if(s){const{selection:M,storedMarks:_}=i,{splittableMarks:N}=l.extensionManager,B=_||M.$to.parentOffset&&M.$from.marks();if(n.split(d.pos,2,E).scrollIntoView(),!B||!s)return!0;const L=B.filter(W=>N.includes(W.type.name));n.ensureMarks(L)}return!0},Gp=(t,e)=>{const n=md(c=>c.type===e)(t.selection);if(!n)return!0;const i=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(i===void 0)return!0;const s=t.doc.nodeAt(i);return n.node.type===s?.type&&Oo(t.doc,n.pos)&&t.join(n.pos),!0},$p=(t,e)=>{const n=md(c=>c.type===e)(t.selection);if(!n)return!0;const i=t.doc.resolve(n.start).after(n.depth);if(i===void 0)return!0;const s=t.doc.nodeAt(i);return n.node.type===s?.type&&Oo(t.doc,i)&&t.join(i),!0},t3=(t,e,n,i={})=>({editor:s,tr:l,state:c,dispatch:u,chain:d,commands:p,can:y})=>{const{extensions:b,splittableMarks:v}=s.extensionManager,x=Gt(t,c.schema),k=Gt(e,c.schema),{selection:C,storedMarks:E}=c,{$from:M,$to:_}=C,N=M.blockRange(_),B=E||C.$to.parentOffset&&C.$from.marks();if(!N)return!1;const L=md(W=>Wv(W.type.name,b))(C);if(N.depth>=1&&L&&N.depth-L.depth<=1){if(L.node.type===x)return p.liftListItem(k);if(Wv(L.node.type.name,b)&&x.validContent(L.node.content)&&u)return d().command(()=>(l.setNodeMarkup(L.pos,x),!0)).command(()=>Gp(l,x)).command(()=>$p(l,x)).run()}return!n||!B||!u?d().command(()=>y().wrapInList(x,i)?!0:p.clearNodes()).wrapInList(x,i).command(()=>Gp(l,x)).command(()=>$p(l,x)).run():d().command(()=>{const W=y().wrapInList(x,i),$=B.filter(ne=>v.includes(ne.type.name));return l.ensureMarks($),W?!0:p.clearNodes()}).wrapInList(x,i).command(()=>Gp(l,x)).command(()=>$p(l,x)).run()},n3=(t,e={},n={})=>({state:i,commands:s})=>{const{extendEmptyMarkRange:l=!1}=n,c=_i(t,i.schema);return zm(i,c,e)?s.unsetMark(c,{extendEmptyMarkRange:l}):s.setMark(c,e)},r3=(t,e,n={})=>({state:i,commands:s})=>{const l=Gt(t,i.schema),c=Gt(e,i.schema),u=jo(i,l,n);let d;return i.selection.$anchor.sameParent(i.selection.$head)&&(d=i.selection.$anchor.parent.attrs),u?s.setNode(c,d):s.setNode(l,{...d,...n})},i3=(t,e={})=>({state:n,commands:i})=>{const s=Gt(t,n.schema);return jo(n,s,e)?i.lift(s):i.wrapIn(s,e)},o3=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let i=0;i<n.length;i+=1){const s=n[i];let l;if(s.spec.isInputRules&&(l=s.getState(t))){if(e){const c=t.tr,u=l.transform;for(let d=u.steps.length-1;d>=0;d-=1)c.step(u.steps[d].invert(u.docs[d]));if(l.text){const d=c.doc.resolve(l.from).marks();c.replaceWith(l.from,l.to,t.schema.text(l.text,d))}else c.delete(l.from,l.to)}return!0}}return!1},s3=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:i,ranges:s}=n;return i||e&&s.forEach(l=>{t.removeMark(l.$from.pos,l.$to.pos)}),!0},l3=(t,e={})=>({tr:n,state:i,dispatch:s})=>{var l;const{extendEmptyMarkRange:c=!1}=e,{selection:u}=n,d=_i(t,i.schema),{$from:p,empty:y,ranges:b}=u;if(!s)return!0;if(y&&c){let{from:v,to:x}=u;const k=(l=p.marks().find(E=>E.type===d))==null?void 0:l.attrs,C=bg(p,d,k);C&&(v=C.from,x=C.to),n.removeMark(v,x,d)}else b.forEach(v=>{n.removeMark(v.$from.pos,v.$to.pos,d)});return n.removeStoredMark(d),!0},a3=t=>({tr:e,state:n,dispatch:i})=>{const{selection:s}=n;let l,c;return typeof t=="number"?(l=t,c=t):t&&"from"in t&&"to"in t?(l=t.from,c=t.to):(l=s.from,c=s.to),i&&e.doc.nodesBetween(l,c,(u,d)=>{if(u.isText)return;const p={...u.attrs};delete p.dir,e.setNodeMarkup(d,void 0,p)}),!0},c3=(t,e={})=>({tr:n,state:i,dispatch:s})=>{let l=null,c=null;const u=pd(typeof t=="string"?t:t.name,i.schema);if(!u)return!1;u==="node"&&(l=Gt(t,i.schema)),u==="mark"&&(c=_i(t,i.schema));let d=!1;return n.selection.ranges.forEach(p=>{const y=p.$from.pos,b=p.$to.pos;let v,x,k,C;n.selection.empty?i.doc.nodesBetween(y,b,(E,M)=>{l&&l===E.type&&(d=!0,k=Math.max(M,y),C=Math.min(M+E.nodeSize,b),v=M,x=E)}):i.doc.nodesBetween(y,b,(E,M)=>{M<y&&l&&l===E.type&&(d=!0,k=Math.max(M,y),C=Math.min(M+E.nodeSize,b),v=M,x=E),M>=y&&M<=b&&(l&&l===E.type&&(d=!0,s&&n.setNodeMarkup(M,void 0,{...E.attrs,...e})),c&&E.marks.length&&E.marks.forEach(_=>{if(c===_.type&&(d=!0,s)){const N=Math.max(M,y),B=Math.min(M+E.nodeSize,b);n.addMark(N,B,c.create({..._.attrs,...e}))}}))}),x&&(v!==void 0&&s&&n.setNodeMarkup(v,void 0,{...x.attrs,...e}),c&&x.marks.length&&x.marks.forEach(E=>{c===E.type&&s&&n.addMark(k,C,c.create({...E.attrs,...e}))}))}),d},u3=(t,e={})=>({state:n,dispatch:i})=>{const s=Gt(t,n.schema);return IA(s,e)(n,i)},f3=(t,e={})=>({state:n,dispatch:i})=>{const s=Gt(t,n.schema);return HA(s,e)(n,i)},d3=class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const n=this.callbacks[t];return n&&n.forEach(i=>i.apply(this,e)),this}off(t,e){const n=this.callbacks[t];return n&&(e?this.callbacks[t]=n.filter(i=>i!==e):delete this.callbacks[t]),this}once(t,e){const n=(...i)=>{this.off(t,n),e.apply(this,i)};return this.on(t,n)}removeAllListeners(){this.callbacks={}}},yd=class{constructor(t){var e;this.find=t.find,this.handler=t.handler,this.undoable=(e=t.undoable)!=null?e:!0}},h3=(t,e)=>{if(yg(e))return e.exec(t);const n=e(t);if(!n)return null;const i=[n.text];return i.index=n.index,i.input=t,i.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),i.push(n.replaceWith)),i};function Fu(t){var e;const{editor:n,from:i,to:s,text:l,rules:c,plugin:u}=t,{view:d}=n;if(d.composing)return!1;const p=d.state.doc.resolve(i);if(p.parent.type.spec.code||(e=p.nodeBefore||p.nodeAfter)!=null&&e.marks.find(v=>v.type.spec.code))return!1;let y=!1;const b=HO(p)+l;return c.forEach(v=>{if(y)return;const x=h3(b,v.find);if(!x)return;const k=d.state.tr,C=dd({state:d.state,transaction:k}),E={from:i-(x[0].length-l.length),to:s},{commands:M,chain:_,can:N}=new hd({editor:n,state:C});v.handler({state:C,range:E,match:x,commands:M,chain:_,can:N})===null||!k.steps.length||(v.undoable&&k.setMeta(u,{transform:k,from:i,to:s,text:l}),d.dispatch(k),y=!0)}),y}function p3(t){const{editor:e,rules:n}=t,i=new At({state:{init(){return null},apply(s,l,c){const u=s.getMeta(i);if(u)return u;const d=s.getMeta("applyInputRules");return!!d&&setTimeout(()=>{let{text:y}=d;typeof y=="string"?y=y:y=xg(J.from(y),c.schema);const{from:b}=d,v=b+y.length;Fu({editor:e,from:b,to:v,text:y,rules:n,plugin:i})}),s.selectionSet||s.docChanged?null:l}},props:{handleTextInput(s,l,c,u){return Fu({editor:e,from:l,to:c,text:u,rules:n,plugin:i})},handleDOMEvents:{compositionend:s=>(setTimeout(()=>{const{$cursor:l}=s.state.selection;l&&Fu({editor:e,from:l.pos,to:l.pos,text:"",rules:n,plugin:i})}),!1)},handleKeyDown(s,l){if(l.key!=="Enter")return!1;const{$cursor:c}=s.state.selection;return c?Fu({editor:e,from:c.pos,to:c.pos,text:`
`,rules:n,plugin:i}):!1}},isInputRules:!0});return i}function m3(t){return Object.prototype.toString.call(t).slice(8,-1)}function Gu(t){return m3(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function N2(t,e){const n={...t};return Gu(t)&&Gu(e)&&Object.keys(e).forEach(i=>{Gu(e[i])&&Gu(t[i])?n[i]=N2(t[i],e[i]):n[i]=e[i]}),n}var kg=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...ut(Se(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...ut(Se(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>N2(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},As=class z2 extends kg{constructor(){super(...arguments),this.type="mark"}static create(e={}){const n=typeof e=="function"?e():e;return new z2(n)}static handleExit({editor:e,mark:n}){const{tr:i}=e.state,s=e.state.selection.$from;if(s.pos===s.end()){const c=s.marks();if(!!!c.find(p=>p?.type.name===n.name))return!1;const d=c.find(p=>p?.type.name===n.name);return d&&i.removeStoredMark(d),i.insertText(" ",s.pos),e.view.dispatch(i),!0}return!1}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function g3(t){return typeof t=="number"}var y3=class{constructor(t){this.find=t.find,this.handler=t.handler}},b3=(t,e,n)=>{if(yg(e))return[...t.matchAll(e)];const i=e(t,n);return i?i.map(s=>{const l=[s.text];return l.index=s.index,l.input=t,l.data=s.data,s.replaceWith&&(s.text.includes(s.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),l.push(s.replaceWith)),l}):[]};function v3(t){const{editor:e,state:n,from:i,to:s,rule:l,pasteEvent:c,dropEvent:u}=t,{commands:d,chain:p,can:y}=new hd({editor:e,state:n}),b=[];return n.doc.nodesBetween(i,s,(x,k)=>{var C,E,M,_,N;if((E=(C=x.type)==null?void 0:C.spec)!=null&&E.code||!(x.isText||x.isTextblock||x.isInline))return;const B=(N=(_=(M=x.content)==null?void 0:M.size)!=null?_:x.nodeSize)!=null?N:0,L=Math.max(i,k),W=Math.min(s,k+B);if(L>=W)return;const $=x.isText?x.text||"":x.textBetween(L-k,W-k,void 0,"");b3($,l.find,c).forEach(ve=>{if(ve.index===void 0)return;const qe=L+ve.index+1,Te=qe+ve[0].length,ye={from:n.tr.mapping.map(qe),to:n.tr.mapping.map(Te)},lt=l.handler({state:n,range:ye,match:ve,commands:d,chain:p,can:y,pasteEvent:c,dropEvent:u});b.push(lt)})}),b.every(x=>x!==null)}var $u=null,x3=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)==null||e.setData("text/html",t),n};function S3(t){const{editor:e,rules:n}=t;let i=null,s=!1,l=!1,c=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,u;try{u=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{u=null}const d=({state:y,from:b,to:v,rule:x,pasteEvt:k})=>{const C=y.tr,E=dd({state:y,transaction:C});if(!(!v3({editor:e,state:E,from:Math.max(b-1,0),to:v.b-1,rule:x,pasteEvent:k,dropEvent:u})||!C.steps.length)){try{u=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{u=null}return c=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,C}};return n.map(y=>new At({view(b){const v=k=>{var C;i=(C=b.dom.parentElement)!=null&&C.contains(k.target)?b.dom.parentElement:null,i&&($u=e)},x=()=>{$u&&($u=null)};return window.addEventListener("dragstart",v),window.addEventListener("dragend",x),{destroy(){window.removeEventListener("dragstart",v),window.removeEventListener("dragend",x)}}},props:{handleDOMEvents:{drop:(b,v)=>{if(l=i===b.dom.parentElement,u=v,!l){const x=$u;x?.isEditable&&setTimeout(()=>{const k=x.state.selection;k&&x.commands.deleteRange({from:k.from,to:k.to})},10)}return!1},paste:(b,v)=>{var x;const k=(x=v.clipboardData)==null?void 0:x.getData("text/html");return c=v,s=!!k?.includes("data-pm-slice"),!1}}},appendTransaction:(b,v,x)=>{const k=b[0],C=k.getMeta("uiEvent")==="paste"&&!s,E=k.getMeta("uiEvent")==="drop"&&!l,M=k.getMeta("applyPasteRules"),_=!!M;if(!C&&!E&&!_)return;if(_){let{text:L}=M;typeof L=="string"?L=L:L=xg(J.from(L),x.schema);const{from:W}=M,$=W+L.length,ne=x3(L);return d({rule:y,state:x,from:W,to:{b:$},pasteEvt:ne})}const N=v.doc.content.findDiffStart(x.doc.content),B=v.doc.content.findDiffEnd(x.doc.content);if(!(!g3(N)||!B||N===B.b))return d({rule:y,state:x,from:N,to:B,pasteEvt:c})}}))}var bd=class{constructor(t,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=t,this.extensions=E2(t),this.schema=NO(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((t,e)=>{const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:Wu(e.name,this.schema)},i=Se(e,"addCommands",n);return i?{...t,...i()}:t},{})}get plugins(){const{editor:t}=this;return Ef([...this.extensions].reverse()).flatMap(i=>{const s={name:i.name,options:i.options,storage:this.editor.extensionStorage[i.name],editor:t,type:Wu(i.name,this.schema)},l=[],c=Se(i,"addKeyboardShortcuts",s);let u={};if(i.type==="mark"&&Se(i,"exitable",s)&&(u.ArrowRight=()=>As.handleExit({editor:t,mark:i})),c){const v=Object.fromEntries(Object.entries(c()).map(([x,k])=>[x,()=>k({editor:t})]));u={...u,...v}}const d=Dj(u);l.push(d);const p=Se(i,"addInputRules",s);if(Pv(i,t.options.enableInputRules)&&p){const v=p();if(v&&v.length){const x=p3({editor:t,rules:v}),k=Array.isArray(x)?x:[x];l.push(...k)}}const y=Se(i,"addPasteRules",s);if(Pv(i,t.options.enablePasteRules)&&y){const v=y();if(v&&v.length){const x=S3({editor:t,rules:v});l.push(...x)}}const b=Se(i,"addProseMirrorPlugins",s);if(b){const v=b();l.push(...v)}return l})}get attributes(){return C2(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=Rl(this.extensions);return Object.fromEntries(e.filter(n=>!!Se(n,"addNodeView")).map(n=>{const i=this.attributes.filter(d=>d.type===n.name),s={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:Gt(n.name,this.schema)},l=Se(n,"addNodeView",s);if(!l)return[];const c=l();if(!c)return[];const u=(d,p,y,b,v)=>{const x=fc(d,i);return c({node:d,view:p,getPos:y,decorations:b,innerDecorations:v,editor:t,extension:n,HTMLAttributes:x})};return[n.name,u]}))}dispatchTransaction(t){const{editor:e}=this;return Ef([...this.extensions].reverse()).reduceRight((i,s)=>{const l={name:s.name,options:s.options,storage:this.editor.extensionStorage[s.name],editor:e,type:Wu(s.name,this.schema)},c=Se(s,"dispatchTransaction",l);return c?u=>{c.call(l,{transaction:u,next:i})}:i},t)}get markViews(){const{editor:t}=this,{markExtensions:e}=Rl(this.extensions);return Object.fromEntries(e.filter(n=>!!Se(n,"addMarkView")).map(n=>{const i=this.attributes.filter(u=>u.type===n.name),s={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:_i(n.name,this.schema)},l=Se(n,"addMarkView",s);if(!l)return[];const c=(u,d,p)=>{const y=fc(u,i);return l()({mark:u,view:d,inline:p,editor:t,extension:n,HTMLAttributes:y,updateAttributes:b=>{D3(u,t,b)}})};return[n.name,c]}))}setupExtensions(){const t=this.extensions;this.editor.extensionStorage=Object.fromEntries(t.map(e=>[e.name,e.storage])),t.forEach(e=>{var n;const i={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:Wu(e.name,this.schema)};e.type==="mark"&&((n=ut(Se(e,"keepOnSplit",i)))==null||n)&&this.splittableMarks.push(e.name);const s=Se(e,"onBeforeCreate",i),l=Se(e,"onCreate",i),c=Se(e,"onUpdate",i),u=Se(e,"onSelectionUpdate",i),d=Se(e,"onTransaction",i),p=Se(e,"onFocus",i),y=Se(e,"onBlur",i),b=Se(e,"onDestroy",i);s&&this.editor.on("beforeCreate",s),l&&this.editor.on("create",l),c&&this.editor.on("update",c),u&&this.editor.on("selectionUpdate",u),d&&this.editor.on("transaction",d),p&&this.editor.on("focus",p),y&&this.editor.on("blur",y),b&&this.editor.on("destroy",b)})}};bd.resolve=E2;bd.sort=Ef;bd.flatten=vg;var k3={};gg(k3,{ClipboardTextSerializer:()=>D2,Commands:()=>L2,Delete:()=>B2,Drop:()=>I2,Editable:()=>H2,FocusEvents:()=>q2,Keymap:()=>V2,Paste:()=>P2,Tabindex:()=>W2,TextDirection:()=>F2,focusEventsPluginKey:()=>U2});var Bt=class R2 extends kg{constructor(){super(...arguments),this.type="extension"}static create(e={}){const n=typeof e=="function"?e():e;return new R2(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}},D2=Bt.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new At({key:new Jt("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:i,selection:s}=e,{ranges:l}=s,c=Math.min(...l.map(y=>y.$from.pos)),u=Math.max(...l.map(y=>y.$to.pos)),d=T2(n);return w2(i,{from:c,to:u},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:d})}}})]}}),L2=Bt.create({name:"commands",addCommands(){return{...p2}}}),B2=Bt.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var n,i,s;const l=()=>{var c,u,d,p;if((p=(d=(u=(c=this.editor.options.coreExtensionOptions)==null?void 0:c.delete)==null?void 0:u.filterTransaction)==null?void 0:d.call(u,t))!=null?p:t.getMeta("y-sync$"))return;const y=S2(t.before,[t,...e]);A2(y).forEach(x=>{y.mapping.mapResult(x.oldRange.from).deletedAfter&&y.mapping.mapResult(x.oldRange.to).deletedBefore&&y.before.nodesBetween(x.oldRange.from,x.oldRange.to,(k,C)=>{const E=C+k.nodeSize-2,M=x.oldRange.from<=C&&E<=x.oldRange.to;this.editor.emit("delete",{type:"node",node:k,from:C,to:E,newFrom:y.mapping.map(C),newTo:y.mapping.map(E),deletedRange:x.oldRange,newRange:x.newRange,partial:!M,editor:this.editor,transaction:t,combinedTransform:y})})});const v=y.mapping;y.steps.forEach((x,k)=>{var C,E;if(x instanceof Tr){const M=v.slice(k).map(x.from,-1),_=v.slice(k).map(x.to),N=v.invert().map(M,-1),B=v.invert().map(_),L=(C=y.doc.nodeAt(M-1))==null?void 0:C.marks.some($=>$.eq(x.mark)),W=(E=y.doc.nodeAt(_))==null?void 0:E.marks.some($=>$.eq(x.mark));this.editor.emit("delete",{type:"mark",mark:x.mark,from:x.from,to:x.to,deletedRange:{from:N,to:B},newRange:{from:M,to:_},partial:!!(W||L),editor:this.editor,transaction:t,combinedTransform:y})}})};(s=(i=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:i.async)==null||s?setTimeout(l,0):l()}}),I2=Bt.create({name:"drop",addProseMirrorPlugins(){return[new At({key:new Jt("tiptapDrop"),props:{handleDrop:(t,e,n,i)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:i})}}})]}}),H2=Bt.create({name:"editable",addProseMirrorPlugins(){return[new At({key:new Jt("editable"),props:{editable:()=>this.editor.options.editable}})]}}),U2=new Jt("focusEvents"),q2=Bt.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new At({key:U2,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const i=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(i),!1},blur:(e,n)=>{t.isFocused=!1;const i=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(i),!1}}}})]}}),V2=Bt.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:c})=>[()=>c.undoInputRule(),()=>c.command(({tr:u})=>{const{selection:d,doc:p}=u,{empty:y,$anchor:b}=d,{pos:v,parent:x}=b,k=b.parent.isTextblock&&v>0?u.doc.resolve(v-1):b,C=k.parent.type.spec.isolating,E=b.pos-b.parentOffset,M=C&&k.parent.childCount===1?E===b.pos:Ue.atStart(p).from===v;return!y||!x.type.isTextblock||x.textContent.length||!M||M&&b.parent.type.name==="paragraph"?!1:c.clearNodes()}),()=>c.deleteSelection(),()=>c.joinBackward(),()=>c.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:c})=>[()=>c.deleteSelection(),()=>c.deleteCurrentNode(),()=>c.joinForward(),()=>c.selectNodeForward()]),i={Enter:()=>this.editor.commands.first(({commands:c})=>[()=>c.newlineInCode(),()=>c.createParagraphNear(),()=>c.liftEmptyBlock(),()=>c.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},s={...i},l={...i,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Cf()||v2()?l:s},addProseMirrorPlugins(){return[new At({key:new Jt("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(C=>C.getMeta("composition")))return;const i=t.some(C=>C.docChanged)&&!e.doc.eq(n.doc),s=t.some(C=>C.getMeta("preventClearDocument"));if(!i||s)return;const{empty:l,from:c,to:u}=e.selection,d=Ue.atStart(e.doc).from,p=Ue.atEnd(e.doc).to;if(l||!(c===d&&u===p)||!gd(n.doc))return;const v=n.tr,x=dd({state:n,transaction:v}),{commands:k}=new hd({editor:this.editor,state:x});if(k.clearNodes(),!!v.steps.length)return v}})]}}),P2=Bt.create({name:"paste",addProseMirrorPlugins(){return[new At({key:new Jt("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),W2=Bt.create({name:"tabindex",addProseMirrorPlugins(){return[new At({key:new Jt("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),F2=Bt.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:t}=Rl(this.extensions);return[{types:t.filter(e=>e.name!=="text").map(e=>e.name),attributes:{dir:{default:this.options.direction,parseHTML:e=>{const n=e.getAttribute("dir");return n&&(n==="ltr"||n==="rtl"||n==="auto")?n:this.options.direction},renderHTML:e=>e.dir?{dir:e.dir}:{}}}}]},addProseMirrorPlugins(){return[new At({key:new Jt("textDirection"),props:{attributes:()=>{const t=this.options.direction;return t?{dir:t}:{}}}})]}}),C3=class Cl{constructor(e,n,i=!1,s=null){this.currentNode=null,this.actualDepth=null,this.isBlock=i,this.resolvedPos=e,this.editor=n,this.currentNode=s}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,i=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,i=this.to-1}this.editor.commands.insertContentAt({from:n,to:i},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new Cl(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Cl(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Cl(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,i)=>{const s=n.isBlock&&!n.isTextblock,l=n.isAtom&&!n.isText,c=this.pos+i+(l?0:1);if(c<0||c>this.resolvedPos.doc.nodeSize-2)return;const u=this.resolvedPos.doc.resolve(c);if(!s&&u.depth<=this.depth)return;const d=new Cl(u,this.editor,s,s?n:null);s&&(d.actualDepth=this.depth+1),e.push(new Cl(u,this.editor,s,s?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let i=null,s=this.parent;for(;s&&!i;){if(s.node.type.name===e)if(Object.keys(n).length>0){const l=s.node.attrs,c=Object.keys(n);for(let u=0;u<c.length;u+=1){const d=c[u];if(l[d]!==n[d])break}}else i=s;s=s.parent}return i}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},i=!1){let s=[];if(!this.children||this.children.length===0)return s;const l=Object.keys(n);return this.children.forEach(c=>{i&&s.length>0||(c.node.type.name===e&&l.every(d=>n[d]===c.node.attrs[d])&&s.push(c),!(i&&s.length>0)&&(s=s.concat(c.querySelectorAll(e,n,i))))}),s}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}},E3=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function w3(t,e,n){const i=document.querySelector("style[data-tiptap-style]");if(i!==null)return i;const s=document.createElement("style");return e&&s.setAttribute("nonce",e),s.setAttribute("data-tiptap-style",""),s.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(s),s}var T3=class extends d3{constructor(t={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:i})=>{throw i},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null,enableExtensionDispatchTransaction:!0},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:PO,createMappablePosition:WO},this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:i,slice:s,moved:l})=>this.options.onDrop(i,s,l)),this.on("paste",({event:i,slice:s})=>this.options.onPaste(i,s)),this.on("delete",this.options.onDelete);const e=this.createDoc(),n=y2(e,this.options.autofocus);this.editorState=wl.create({doc:e,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(t){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(t),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const t=this.editorView.dom;t?.editor&&delete t.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(t){console.warn("Failed to remove CSS element:",t)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=w3(E3,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:t=>{this.editorState=t},dispatch:t=>{this.dispatchTransaction(t)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(t,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in t)return Reflect.get(t,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(t,e){const n=k2(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],i=this.state.reconfigure({plugins:n});return this.view.updateState(i),i}unregisterPlugin(t){if(this.isDestroyed)return;const e=this.state.plugins;let n=e;if([].concat(t).forEach(s=>{const l=typeof s=="string"?`${s}$`:s.key;n=n.filter(c=>!c.key.startsWith(l))}),e.length===n.length)return;const i=this.state.reconfigure({plugins:n});return this.view.updateState(i),i}createExtensionManager(){var t,e;const i=[...this.options.enableCoreExtensions?[H2,D2.configure({blockSeparator:(e=(t=this.options.coreExtensionOptions)==null?void 0:t.clipboardTextSerializer)==null?void 0:e.blockSeparator}),L2,q2,V2,W2,I2,P2,B2,F2.configure({direction:this.options.textDirection})].filter(s=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[s.name]!==!1:!0):[],...this.options.extensions].filter(s=>["extension","node","mark"].includes(s?.type));this.extensionManager=new bd(i,this)}createCommandManager(){this.commandManager=new hd({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let t;try{t=Nm(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),t=Nm(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return t}createView(t){const{editorProps:e,enableExtensionDispatchTransaction:n}=this.options,i=e.dispatchTransaction||this.dispatchTransaction.bind(this),s=n?this.extensionManager.dispatchTransaction(i):i;this.editorView=new d2(t,{...e,attributes:{role:"textbox",...e?.attributes},dispatchTransaction:s,state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const l=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(l),this.prependClass(),this.injectCSS();const c=this.view.dom;c.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(p=>{var y;return(y=this.capturedTransaction)==null?void 0:y.step(p)});return}const{state:e,transactions:n}=this.state.applyTransaction(t),i=!this.state.selection.eq(e.selection),s=n.includes(t),l=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:t,nextState:e}),!s)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t,appendedTransactions:n.slice(1)}),i&&this.emit("selectionUpdate",{editor:this,transaction:t});const c=n.findLast(p=>p.getMeta("focus")||p.getMeta("blur")),u=c?.getMeta("focus"),d=c?.getMeta("blur");u&&this.emit("focus",{editor:this,event:u.event,transaction:c}),d&&this.emit("blur",{editor:this,event:d.event,transaction:c}),!(t.getMeta("preventUpdate")||!n.some(p=>p.docChanged)||l.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:t,appendedTransactions:n.slice(1)})}getAttributes(t){return M2(this.state,t)}isActive(t,e){const n=typeof t=="string"?t:null,i=typeof t=="string"?e:t;return UO(this.state,n,i)}getJSON(){return this.state.doc.toJSON()}getHTML(){return xg(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:n={}}=t||{};return RO(this.state.doc,{blockSeparator:e,textSerializers:{...T2(this.schema),...n}})}get isEmpty(){return gd(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var t,e;return(e=(t=this.editorView)==null?void 0:t.isDestroyed)!=null?e:!0}$node(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelector(t,e))||null}$nodes(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(t,e))||null}$pos(t){const e=this.state.doc.resolve(t);return new C3(e,this)}get $doc(){return this.$pos(0)}};function Dl(t){return new yd({find:t.find,handler:({state:e,range:n,match:i})=>{const s=ut(t.getAttributes,void 0,i);if(s===!1||s===null)return null;const{tr:l}=e,c=i[i.length-1],u=i[0];if(c){const d=u.search(/\S/),p=n.from+u.indexOf(c),y=p+c.length;if(Sg(n.from,n.to,e.doc).filter(x=>x.mark.type.excluded.find(C=>C===t.type&&C!==x.mark.type)).filter(x=>x.to>p).length)return null;y<n.to&&l.delete(y,n.to),p>n.from&&l.delete(n.from+d,p);const v=n.from+d+c.length;l.addMark(n.from+d,v,t.type.create(s||{})),l.removeStoredMark(t.type)}},undoable:t.undoable})}function M3(t){return new yd({find:t.find,handler:({state:e,range:n,match:i})=>{const s=ut(t.getAttributes,void 0,i)||{},{tr:l}=e,c=n.from;let u=n.to;const d=t.type.create(s);if(i[1]){const p=i[0].lastIndexOf(i[1]);let y=c+p;y>u?y=u:u=y+i[1].length;const b=i[0][i[0].length-1];l.insertText(b,c+i[0].length-1),l.replaceWith(y,u,d)}else if(i[0]){const p=t.type.isInline?c:c-1;l.insert(p,t.type.create(s)).delete(l.mapping.map(c),l.mapping.map(u))}l.scrollIntoView()},undoable:t.undoable})}function Rm(t){return new yd({find:t.find,handler:({state:e,range:n,match:i})=>{const s=e.doc.resolve(n.from),l=ut(t.getAttributes,void 0,i)||{};if(!s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,l)},undoable:t.undoable})}function Ll(t){return new yd({find:t.find,handler:({state:e,range:n,match:i,chain:s})=>{const l=ut(t.getAttributes,void 0,i)||{},c=e.tr.delete(n.from,n.to),d=c.doc.resolve(n.from).blockRange(),p=d&&eg(d,t.type,l);if(!p)return null;if(c.wrap(d,p),t.keepMarks&&t.editor){const{selection:b,storedMarks:v}=e,{splittableMarks:x}=t.editor.extensionManager,k=v||b.$to.parentOffset&&b.$from.marks();if(k){const C=k.filter(E=>x.includes(E.type.name));c.ensureMarks(C)}}if(t.keepAttributes){const b=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";s().updateAttributes(b,l).run()}const y=c.doc.resolve(n.from-1).nodeBefore;y&&y.type===t.type&&Oo(c.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(i,y))&&c.join(n.from-1)},undoable:t.undoable})}function A3(t,e){const{selection:n}=t,{$from:i}=n;if(n instanceof Ce){const l=i.index();return i.parent.canReplaceWith(l,l+1,e)}let s=i.depth;for(;s>=0;){const l=i.index(s);if(i.node(s).contentMatchAt(l).matchType(e))return!0;s-=1}return!1}var _3={};gg(_3,{createAtomBlockMarkdownSpec:()=>j3,createBlockMarkdownSpec:()=>O3,createInlineMarkdownSpec:()=>R3,parseAttributes:()=>Cg,parseIndentedBlocks:()=>Dm,renderNestedMarkdownContent:()=>wg,serializeAttributes:()=>Eg});function Cg(t){if(!t?.trim())return{};const e={},n=[],i=t.replace(/["']([^"']*)["']/g,p=>(n.push(p),`__QUOTED_${n.length-1}__`)),s=i.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(s){const p=s.map(y=>y.trim().slice(1));e.class=p.join(" ")}const l=i.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);l&&(e.id=l[1]);const c=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(i.matchAll(c)).forEach(([,p,y])=>{var b;const v=parseInt(((b=y.match(/__QUOTED_(\d+)__/))==null?void 0:b[1])||"0",10),x=n[v];x&&(e[p]=x.slice(1,-1))});const d=i.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return d&&d.split(/\s+/).filter(Boolean).forEach(y=>{y.match(/^[a-zA-Z][\w-]*$/)&&(e[y]=!0)}),e}function Eg(t){if(!t||Object.keys(t).length===0)return"";const e=[];return t.class&&String(t.class).split(/\s+/).filter(Boolean).forEach(i=>e.push(`.${i}`)),t.id&&e.push(`#${t.id}`),Object.entries(t).forEach(([n,i])=>{n==="class"||n==="id"||(i===!0?e.push(n):i!==!1&&i!=null&&e.push(`${n}="${String(i)}"`))}),e.join(" ")}function j3(t){const{nodeName:e,name:n,parseAttributes:i=Cg,serializeAttributes:s=Eg,defaultAttributes:l={},requiredAttributes:c=[],allowedAttributes:u}=t,d=n||e,p=y=>{if(!u)return y;const b={};return u.forEach(v=>{v in y&&(b[v]=y[v])}),b};return{parseMarkdown:(y,b)=>{const v={...l,...y.attributes};return b.createNode(e,v,[])},markdownTokenizer:{name:e,level:"block",start(y){var b;const v=new RegExp(`^:::${d}(?:\\s|$)`,"m"),x=(b=y.match(v))==null?void 0:b.index;return x!==void 0?x:-1},tokenize(y,b,v){const x=new RegExp(`^:::${d}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),k=y.match(x);if(!k)return;const C=k[1]||"",E=i(C);if(!c.find(_=>!(_ in E)))return{type:e,raw:k[0],attributes:E}}},renderMarkdown:y=>{const b=p(y.attrs||{}),v=s(b),x=v?` {${v}}`:"";return`:::${d}${x} :::`}}}function O3(t){const{nodeName:e,name:n,getContent:i,parseAttributes:s=Cg,serializeAttributes:l=Eg,defaultAttributes:c={},content:u="block",allowedAttributes:d}=t,p=n||e,y=b=>{if(!d)return b;const v={};return d.forEach(x=>{x in b&&(v[x]=b[x])}),v};return{parseMarkdown:(b,v)=>{let x;if(i){const C=i(b);x=typeof C=="string"?[{type:"text",text:C}]:C}else u==="block"?x=v.parseChildren(b.tokens||[]):x=v.parseInline(b.tokens||[]);const k={...c,...b.attributes};return v.createNode(e,k,x)},markdownTokenizer:{name:e,level:"block",start(b){var v;const x=new RegExp(`^:::${p}`,"m"),k=(v=b.match(x))==null?void 0:v.index;return k!==void 0?k:-1},tokenize(b,v,x){var k;const C=new RegExp(`^:::${p}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),E=b.match(C);if(!E)return;const[M,_=""]=E,N=s(_);let B=1;const L=M.length;let W="";const $=/^:::([\w-]*)(\s.*)?/gm,ne=b.slice(L);for($.lastIndex=0;;){const ve=$.exec(ne);if(ve===null)break;const qe=ve.index,Te=ve[1];if(!((k=ve[2])!=null&&k.endsWith(":::"))){if(Te)B+=1;else if(B-=1,B===0){const ye=ne.slice(0,qe);W=ye.trim();const lt=b.slice(0,L+qe+ve[0].length);let Qe=[];if(W)if(u==="block")for(Qe=x.blockTokens(ye),Qe.forEach(Le=>{Le.text&&(!Le.tokens||Le.tokens.length===0)&&(Le.tokens=x.inlineTokens(Le.text))});Qe.length>0;){const Le=Qe[Qe.length-1];if(Le.type==="paragraph"&&(!Le.text||Le.text.trim()===""))Qe.pop();else break}else Qe=x.inlineTokens(W);return{type:e,raw:lt,attributes:N,content:W,tokens:Qe}}}}}},renderMarkdown:(b,v)=>{const x=y(b.attrs||{}),k=l(x),C=k?` {${k}}`:"",E=v.renderChildren(b.content||[],`

`);return`:::${p}${C}

${E}

:::`}}}function N3(t){if(!t.trim())return{};const e={},n=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let i=n.exec(t);for(;i!==null;){const[,s,l,c]=i;e[s]=l||c,i=n.exec(t)}return e}function z3(t){return Object.entries(t).filter(([,e])=>e!=null).map(([e,n])=>`${e}="${n}"`).join(" ")}function R3(t){const{nodeName:e,name:n,getContent:i,parseAttributes:s=N3,serializeAttributes:l=z3,defaultAttributes:c={},selfClosing:u=!1,allowedAttributes:d}=t,p=n||e,y=v=>{if(!d)return v;const x={};return d.forEach(k=>{const C=typeof k=="string"?k:k.name,E=typeof k=="string"?void 0:k.skipIfDefault;if(C in v){const M=v[C];if(E!==void 0&&M===E)return;x[C]=M}}),x},b=p.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(v,x)=>{const k={...c,...v.attributes};if(u)return x.createNode(e,k);const C=i?i(v):v.content||"";return C?x.createNode(e,k,[x.createTextNode(C)]):x.createNode(e,k,[])},markdownTokenizer:{name:e,level:"inline",start(v){const x=u?new RegExp(`\\[${b}\\s*[^\\]]*\\]`):new RegExp(`\\[${b}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${b}\\]`),k=v.match(x),C=k?.index;return C!==void 0?C:-1},tokenize(v,x,k){const C=u?new RegExp(`^\\[${b}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${b}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${b}\\]`),E=v.match(C);if(!E)return;let M="",_="";if(u){const[,B]=E;_=B}else{const[,B,L]=E;_=B,M=L||""}const N=s(_.trim());return{type:e,raw:E[0],content:M.trim(),attributes:N}}},renderMarkdown:v=>{let x="";i?x=i(v):v.content&&v.content.length>0&&(x=v.content.filter(M=>M.type==="text").map(M=>M.text).join(""));const k=y(v.attrs||{}),C=l(k),E=C?` ${C}`:"";return u?`[${p}${E}]`:`[${p}${E}]${x}[/${p}]`}}}function Dm(t,e,n){var i,s,l,c;const u=t.split(`
`),d=[];let p="",y=0;const b=e.baseIndentSize||2;for(;y<u.length;){const v=u[y],x=v.match(e.itemPattern);if(!x){if(d.length>0)break;if(v.trim()===""){y+=1,p=`${p}${v}
`;continue}else return}const k=e.extractItemData(x),{indentLevel:C,mainContent:E}=k;p=`${p}${v}
`;const M=[E];for(y+=1;y<u.length;){const L=u[y];if(L.trim()===""){const $=u.slice(y+1).findIndex(qe=>qe.trim()!=="");if($===-1)break;if((((s=(i=u[y+1+$].match(/^(\s*)/))==null?void 0:i[1])==null?void 0:s.length)||0)>C){M.push(L),p=`${p}${L}
`,y+=1;continue}else break}if((((c=(l=L.match(/^(\s*)/))==null?void 0:l[1])==null?void 0:c.length)||0)>C)M.push(L),p=`${p}${L}
`,y+=1;else break}let _;const N=M.slice(1);if(N.length>0){const L=N.map(W=>W.slice(C+b)).join(`
`);L.trim()&&(e.customNestedParser?_=e.customNestedParser(L):_=n.blockTokens(L))}const B=e.createToken(k,_);d.push(B)}if(d.length!==0)return{items:d,raw:p}}function wg(t,e,n,i){if(!t||!Array.isArray(t.content))return"";const s=typeof n=="function"?n(i):n,[l,...c]=t.content,u=e.renderChildren([l]),d=[`${s}${u}`];return c&&c.length>0&&c.forEach(p=>{const y=e.renderChildren([p]);if(y){const b=y.split(`
`).map(v=>v?e.indent(v):"").join(`
`);d.push(b)}}),d.join(`
`)}function D3(t,e,n={}){const{state:i}=e,{doc:s,tr:l}=i,c=t;s.descendants((u,d)=>{const p=l.mapping.map(d),y=l.mapping.map(d)+u.nodeSize;let b=null;if(u.marks.forEach(x=>{if(x!==c)return!1;b=x}),!b)return;let v=!1;if(Object.keys(n).forEach(x=>{n[x]!==b.attrs[x]&&(v=!0)}),v){const x=t.type.create({...t.attrs,...n});l.removeMark(p,y,t.type),l.addMark(p,y,x)}}),l.docChanged&&e.view.dispatch(l)}var Qn=class G2 extends kg{constructor(){super(...arguments),this.type="node"}static create(e={}){const n=typeof e=="function"?e():e;return new G2(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function Es(t){return new y3({find:t.find,handler:({state:e,range:n,match:i,pasteEvent:s})=>{const l=ut(t.getAttributes,void 0,i,s);if(l===!1||l===null)return null;const{tr:c}=e,u=i[i.length-1],d=i[0];let p=n.to;if(u){const y=d.search(/\S/),b=n.from+d.indexOf(u),v=b+u.length;if(Sg(n.from,n.to,e.doc).filter(k=>k.mark.type.excluded.find(E=>E===t.type&&E!==k.mark.type)).filter(k=>k.to>b).length)return null;v<n.to&&c.delete(v,n.to),b>n.from&&c.delete(n.from+y,b),p=n.from+y+u.length,c.addMark(n.from+y,p,t.type.create(l||{})),c.removeStoredMark(t.type)}}})}const L3="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",B3="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",Lm="numeric",Bm="ascii",Im="alpha",Qa="asciinumeric",Wa="alphanumeric",Hm="domain",$2="emoji",I3="scheme",H3="slashscheme",Yp="whitespace";function U3(t,e){return t in e||(e[t]=[]),e[t]}function hs(t,e,n){e[Lm]&&(e[Qa]=!0,e[Wa]=!0),e[Bm]&&(e[Qa]=!0,e[Im]=!0),e[Qa]&&(e[Wa]=!0),e[Im]&&(e[Wa]=!0),e[Wa]&&(e[Hm]=!0),e[$2]&&(e[Hm]=!0);for(const i in e){const s=U3(i,n);s.indexOf(t)<0&&s.push(t)}}function q3(t,e){const n={};for(const i in e)e[i].indexOf(t)>=0&&(n[i]=!0);return n}function Bn(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}Bn.groups={};Bn.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let i=0;i<e.jr.length;i++){const s=e.jr[i][0],l=e.jr[i][1];if(l&&s.test(t))return l}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,i){for(let s=0;s<t.length;s++)this.tt(t[s],e,n,i)},tr(t,e,n,i){i=i||Bn.groups;let s;return e&&e.j?s=e:(s=new Bn(e),n&&i&&hs(e,n,i)),this.jr.push([t,s]),s},ts(t,e,n,i){let s=this;const l=t.length;if(!l)return s;for(let c=0;c<l-1;c++)s=s.tt(t[c]);return s.tt(t[l-1],e,n,i)},tt(t,e,n,i){i=i||Bn.groups;const s=this;if(e&&e.j)return s.j[t]=e,e;const l=e;let c,u=s.go(t);if(u?(c=new Bn,Object.assign(c.j,u.j),c.jr.push.apply(c.jr,u.jr),c.jd=u.jd,c.t=u.t):c=new Bn,l){if(i)if(c.t&&typeof c.t=="string"){const d=Object.assign(q3(c.t,i),n);hs(l,d,i)}else n&&hs(l,n,i);c.t=l}return s.j[t]=c,c}};const Ie=(t,e,n,i,s)=>t.ta(e,n,i,s),Nt=(t,e,n,i,s)=>t.tr(e,n,i,s),Gv=(t,e,n,i,s)=>t.ts(e,n,i,s),Z=(t,e,n,i,s)=>t.tt(e,n,i,s),Si="WORD",Um="UWORD",Y2="ASCIINUMERICAL",K2="ALPHANUMERICAL",dc="LOCALHOST",qm="TLD",Vm="UTLD",of="SCHEME",El="SLASH_SCHEME",Tg="NUM",Pm="WS",Mg="NL",Ja="OPENBRACE",Xa="CLOSEBRACE",wf="OPENBRACKET",Tf="CLOSEBRACKET",Mf="OPENPAREN",Af="CLOSEPAREN",_f="OPENANGLEBRACKET",jf="CLOSEANGLEBRACKET",Of="FULLWIDTHLEFTPAREN",Nf="FULLWIDTHRIGHTPAREN",zf="LEFTCORNERBRACKET",Rf="RIGHTCORNERBRACKET",Df="LEFTWHITECORNERBRACKET",Lf="RIGHTWHITECORNERBRACKET",Bf="FULLWIDTHLESSTHAN",If="FULLWIDTHGREATERTHAN",Hf="AMPERSAND",Uf="APOSTROPHE",qf="ASTERISK",go="AT",Vf="BACKSLASH",Pf="BACKTICK",Wf="CARET",xo="COLON",Ag="COMMA",Ff="DOLLAR",Vr="DOT",Gf="EQUALS",_g="EXCLAMATION",fr="HYPHEN",Za="PERCENT",$f="PIPE",Yf="PLUS",Kf="POUND",ec="QUERY",jg="QUOTE",Q2="FULLWIDTHMIDDLEDOT",Og="SEMI",Pr="SLASH",tc="TILDE",Qf="UNDERSCORE",J2="EMOJI",Jf="SYM";var X2=Object.freeze({__proto__:null,ALPHANUMERICAL:K2,AMPERSAND:Hf,APOSTROPHE:Uf,ASCIINUMERICAL:Y2,ASTERISK:qf,AT:go,BACKSLASH:Vf,BACKTICK:Pf,CARET:Wf,CLOSEANGLEBRACKET:jf,CLOSEBRACE:Xa,CLOSEBRACKET:Tf,CLOSEPAREN:Af,COLON:xo,COMMA:Ag,DOLLAR:Ff,DOT:Vr,EMOJI:J2,EQUALS:Gf,EXCLAMATION:_g,FULLWIDTHGREATERTHAN:If,FULLWIDTHLEFTPAREN:Of,FULLWIDTHLESSTHAN:Bf,FULLWIDTHMIDDLEDOT:Q2,FULLWIDTHRIGHTPAREN:Nf,HYPHEN:fr,LEFTCORNERBRACKET:zf,LEFTWHITECORNERBRACKET:Df,LOCALHOST:dc,NL:Mg,NUM:Tg,OPENANGLEBRACKET:_f,OPENBRACE:Ja,OPENBRACKET:wf,OPENPAREN:Mf,PERCENT:Za,PIPE:$f,PLUS:Yf,POUND:Kf,QUERY:ec,QUOTE:jg,RIGHTCORNERBRACKET:Rf,RIGHTWHITECORNERBRACKET:Lf,SCHEME:of,SEMI:Og,SLASH:Pr,SLASH_SCHEME:El,SYM:Jf,TILDE:tc,TLD:qm,UNDERSCORE:Qf,UTLD:Vm,UWORD:Um,WORD:Si,WS:Pm});const vi=/[a-z]/,La=new RegExp("\\p{L}","u"),Kp=new RegExp("\\p{Emoji}","u"),xi=/\d/,Qp=/\s/,$v="\r",Jp=`
`,V3="",P3="",Xp="";let Yu=null,Ku=null;function W3(t=[]){const e={};Bn.groups=e;const n=new Bn;Yu==null&&(Yu=Yv(L3)),Ku==null&&(Ku=Yv(B3)),Z(n,"'",Uf),Z(n,"{",Ja),Z(n,"}",Xa),Z(n,"[",wf),Z(n,"]",Tf),Z(n,"(",Mf),Z(n,")",Af),Z(n,"<",_f),Z(n,">",jf),Z(n,"",Of),Z(n,"",Nf),Z(n,"",zf),Z(n,"",Rf),Z(n,"",Df),Z(n,"",Lf),Z(n,"",Bf),Z(n,"",If),Z(n,"&",Hf),Z(n,"*",qf),Z(n,"@",go),Z(n,"`",Pf),Z(n,"^",Wf),Z(n,":",xo),Z(n,",",Ag),Z(n,"$",Ff),Z(n,".",Vr),Z(n,"=",Gf),Z(n,"!",_g),Z(n,"-",fr),Z(n,"%",Za),Z(n,"|",$f),Z(n,"+",Yf),Z(n,"#",Kf),Z(n,"?",ec),Z(n,'"',jg),Z(n,"/",Pr),Z(n,";",Og),Z(n,"~",tc),Z(n,"_",Qf),Z(n,"\\",Vf),Z(n,"",Q2);const i=Nt(n,xi,Tg,{[Lm]:!0});Nt(i,xi,i);const s=Nt(i,vi,Y2,{[Qa]:!0}),l=Nt(i,La,K2,{[Wa]:!0}),c=Nt(n,vi,Si,{[Bm]:!0});Nt(c,xi,s),Nt(c,vi,c),Nt(s,xi,s),Nt(s,vi,s);const u=Nt(n,La,Um,{[Im]:!0});Nt(u,vi),Nt(u,xi,l),Nt(u,La,u),Nt(l,xi,l),Nt(l,vi),Nt(l,La,l);const d=Z(n,Jp,Mg,{[Yp]:!0}),p=Z(n,$v,Pm,{[Yp]:!0}),y=Nt(n,Qp,Pm,{[Yp]:!0});Z(n,Xp,y),Z(p,Jp,d),Z(p,Xp,y),Nt(p,Qp,y),Z(y,$v),Z(y,Jp),Nt(y,Qp,y),Z(y,Xp,y);const b=Nt(n,Kp,J2,{[$2]:!0});Z(b,"#"),Nt(b,Kp,b),Z(b,V3,b);const v=Z(b,P3);Z(v,"#"),Nt(v,Kp,b);const x=[[vi,c],[xi,s]],k=[[vi,null],[La,u],[xi,l]];for(let C=0;C<Yu.length;C++)fo(n,Yu[C],qm,Si,x);for(let C=0;C<Ku.length;C++)fo(n,Ku[C],Vm,Um,k);hs(qm,{tld:!0,ascii:!0},e),hs(Vm,{utld:!0,alpha:!0},e),fo(n,"file",of,Si,x),fo(n,"mailto",of,Si,x),fo(n,"http",El,Si,x),fo(n,"https",El,Si,x),fo(n,"ftp",El,Si,x),fo(n,"ftps",El,Si,x),hs(of,{scheme:!0,ascii:!0},e),hs(El,{slashscheme:!0,ascii:!0},e),t=t.sort((C,E)=>C[0]>E[0]?1:-1);for(let C=0;C<t.length;C++){const E=t[C][0],_=t[C][1]?{[I3]:!0}:{[H3]:!0};E.indexOf("-")>=0?_[Hm]=!0:vi.test(E)?xi.test(E)?_[Qa]=!0:_[Bm]=!0:_[Lm]=!0,Gv(n,E,E,_)}return Gv(n,"localhost",dc,{ascii:!0}),n.jd=new Bn(Jf),{start:n,tokens:Object.assign({groups:e},X2)}}function Z2(t,e){const n=F3(e.replace(/[A-Z]/g,u=>u.toLowerCase())),i=n.length,s=[];let l=0,c=0;for(;c<i;){let u=t,d=null,p=0,y=null,b=-1,v=-1;for(;c<i&&(d=u.go(n[c]));)u=d,u.accepts()?(b=0,v=0,y=u):b>=0&&(b+=n[c].length,v++),p+=n[c].length,l+=n[c].length,c++;l-=b,c-=v,p-=b,s.push({t:y.t,v:e.slice(l-p,l),s:l-p,e:l})}return s}function F3(t){const e=[],n=t.length;let i=0;for(;i<n;){let s=t.charCodeAt(i),l,c=s<55296||s>56319||i+1===n||(l=t.charCodeAt(i+1))<56320||l>57343?t[i]:t.slice(i,i+2);e.push(c),i+=c.length}return e}function fo(t,e,n,i,s){let l;const c=e.length;for(let u=0;u<c-1;u++){const d=e[u];t.j[d]?l=t.j[d]:(l=new Bn(i),l.jr=s.slice(),t.j[d]=l),t=l}return l=new Bn(n),l.jr=s.slice(),t.j[e[c-1]]=l,l}function Yv(t){const e=[],n=[];let i=0,s="0123456789";for(;i<t.length;){let l=0;for(;s.indexOf(t[i+l])>=0;)l++;if(l>0){e.push(n.join(""));for(let c=parseInt(t.substring(i,i+l),10);c>0;c--)n.pop();i+=l}else n.push(t[i]),i++}return e}const hc={defaultProtocol:"http",events:null,format:Kv,formatHref:Kv,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Ng(t,e=null){let n=Object.assign({},hc);t&&(n=Object.assign(n,t instanceof Ng?t.o:t));const i=n.ignoreTags,s=[];for(let l=0;l<i.length;l++)s.push(i[l].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=s}Ng.prototype={o:hc,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const i=e!=null;let s=this.o[t];return s&&(typeof s=="object"?(s=n.t in s?s[n.t]:hc[t],typeof s=="function"&&i&&(s=s(e,n))):typeof s=="function"&&i&&(s=s(e,n.t,n)),s)},getObj(t,e,n){let i=this.o[t];return typeof i=="function"&&e!=null&&(i=i(e,n.t,n)),i},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function Kv(t){return t}function ek(t,e){this.t="token",this.v=t,this.tk=e}ek.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),i=t.get("format",e,this);return n&&i.length>n?i.substring(0,n)+"":i},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=hc.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),i=t.get("formatHref",n,this),s=t.get("tagName",n,e),l=this.toFormattedString(t),c={},u=t.get("className",n,e),d=t.get("target",n,e),p=t.get("rel",n,e),y=t.getObj("attributes",n,e),b=t.getObj("events",n,e);return c.href=i,u&&(c.class=u),d&&(c.target=d),p&&(c.rel=p),y&&Object.assign(c,y),{tagName:s,attributes:c,content:l,eventListeners:b}}};function vd(t,e){class n extends ek{constructor(s,l){super(s,l),this.t=t}}for(const i in e)n.prototype[i]=e[i];return n.t=t,n}const Qv=vd("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Jv=vd("text"),G3=vd("nl"),Qu=vd("url",{isLink:!0,toHref(t=hc.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==dc&&t[1].t===xo}}),ur=t=>new Bn(t);function $3({groups:t}){const e=t.domain.concat([Hf,qf,go,Vf,Pf,Wf,Ff,Gf,fr,Tg,Za,$f,Yf,Kf,Pr,Jf,tc,Qf]),n=[Uf,xo,Ag,Vr,_g,Za,ec,jg,Og,_f,jf,Ja,Xa,Tf,wf,Mf,Af,Of,Nf,zf,Rf,Df,Lf,Bf,If],i=[Hf,Uf,qf,Vf,Pf,Wf,Ff,Gf,fr,Ja,Xa,Za,$f,Yf,Kf,ec,Pr,Jf,tc,Qf],s=ur(),l=Z(s,tc);Ie(l,i,l),Ie(l,t.domain,l);const c=ur(),u=ur(),d=ur();Ie(s,t.domain,c),Ie(s,t.scheme,u),Ie(s,t.slashscheme,d),Ie(c,i,l),Ie(c,t.domain,c);const p=Z(c,go);Z(l,go,p),Z(u,go,p),Z(d,go,p);const y=Z(l,Vr);Ie(y,i,l),Ie(y,t.domain,l);const b=ur();Ie(p,t.domain,b),Ie(b,t.domain,b);const v=Z(b,Vr);Ie(v,t.domain,b);const x=ur(Qv);Ie(v,t.tld,x),Ie(v,t.utld,x),Z(p,dc,x);const k=Z(b,fr);Z(k,fr,k),Ie(k,t.domain,b),Ie(x,t.domain,b),Z(x,Vr,v),Z(x,fr,k);const C=Z(x,xo);Ie(C,t.numeric,Qv);const E=Z(c,fr),M=Z(c,Vr);Z(E,fr,E),Ie(E,t.domain,c),Ie(M,i,l),Ie(M,t.domain,c);const _=ur(Qu);Ie(M,t.tld,_),Ie(M,t.utld,_),Ie(_,t.domain,c),Ie(_,i,l),Z(_,Vr,M),Z(_,fr,E),Z(_,go,p);const N=Z(_,xo),B=ur(Qu);Ie(N,t.numeric,B);const L=ur(Qu),W=ur();Ie(L,e,L),Ie(L,n,W),Ie(W,e,L),Ie(W,n,W),Z(_,Pr,L),Z(B,Pr,L);const $=Z(u,xo),ne=Z(d,xo),ve=Z(ne,Pr),qe=Z(ve,Pr);Ie(u,t.domain,c),Z(u,Vr,M),Z(u,fr,E),Ie(d,t.domain,c),Z(d,Vr,M),Z(d,fr,E),Ie($,t.domain,L),Z($,Pr,L),Z($,ec,L),Ie(qe,t.domain,L),Ie(qe,e,L),Z(qe,Pr,L);const Te=[[Ja,Xa],[wf,Tf],[Mf,Af],[_f,jf],[Of,Nf],[zf,Rf],[Df,Lf],[Bf,If]];for(let ye=0;ye<Te.length;ye++){const[lt,Qe]=Te[ye],Le=Z(L,lt);Z(W,lt,Le),Z(Le,Qe,L);const F=ur(Qu);Ie(Le,e,F);const X=ur();Ie(Le,n),Ie(F,e,F),Ie(F,n,X),Ie(X,e,F),Ie(X,n,X),Z(F,Qe,L),Z(X,Qe,L)}return Z(s,dc,_),Z(s,Mg,G3),{start:s,tokens:X2}}function Y3(t,e,n){let i=n.length,s=0,l=[],c=[];for(;s<i;){let u=t,d=null,p=null,y=0,b=null,v=-1;for(;s<i&&!(d=u.go(n[s].t));)c.push(n[s++]);for(;s<i&&(p=d||u.go(n[s].t));)d=null,u=p,u.accepts()?(v=0,b=u):v>=0&&v++,s++,y++;if(v<0)s-=y,s<i&&(c.push(n[s]),s++);else{c.length>0&&(l.push(Zp(Jv,e,c)),c=[]),s-=v,y-=v;const x=b.t,k=n.slice(s-y,s);l.push(Zp(x,e,k))}}return c.length>0&&l.push(Zp(Jv,e,c)),l}function Zp(t,e,n){const i=n[0].s,s=n[n.length-1].e,l=e.slice(i,s);return new t(l,n)}const K3=typeof console<"u"&&console&&console.warn||(()=>{}),Q3="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",xt={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function J3(){return Bn.groups={},xt.scanner=null,xt.parser=null,xt.tokenQueue=[],xt.pluginQueue=[],xt.customSchemes=[],xt.initialized=!1,xt}function Xv(t,e=!1){if(xt.initialized&&K3(`linkifyjs: already initialized - will not register custom scheme "${t}" ${Q3}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);xt.customSchemes.push([t,e])}function X3(){xt.scanner=W3(xt.customSchemes);for(let t=0;t<xt.tokenQueue.length;t++)xt.tokenQueue[t][1]({scanner:xt.scanner});xt.parser=$3(xt.scanner.tokens);for(let t=0;t<xt.pluginQueue.length;t++)xt.pluginQueue[t][1]({scanner:xt.scanner,parser:xt.parser});return xt.initialized=!0,xt}function zg(t){return xt.initialized||X3(),Y3(xt.parser.start,t,Z2(xt.scanner.start,t))}zg.scan=Z2;function tk(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const i=new Ng(n),s=zg(t),l=[];for(let c=0;c<s.length;c++){const u=s[c];u.isLink&&(!e||u.t===e)&&i.check(u)&&l.push(u.toFormattedObject(i))}return l}var Rg="[\0- -\u2029]",Z3=new RegExp(Rg),e4=new RegExp(`${Rg}$`),t4=new RegExp(Rg,"g");function n4(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function r4(t){return new At({key:new Jt("autolink"),appendTransaction:(e,n,i)=>{const s=e.some(p=>p.docChanged)&&!n.doc.eq(i.doc),l=e.some(p=>p.getMeta("preventAutolink"));if(!s||l)return;const{tr:c}=i,u=S2(n.doc,[...e]);if(A2(u).forEach(({newRange:p})=>{const y=AO(i.doc,p,x=>x.isTextblock);let b,v;if(y.length>1)b=y[0],v=i.doc.textBetween(b.pos,b.pos+b.node.nodeSize,void 0," ");else if(y.length){const x=i.doc.textBetween(p.from,p.to," "," ");if(!e4.test(x))return;b=y[0],v=i.doc.textBetween(b.pos,p.to,void 0," ")}if(b&&v){const x=v.split(Z3).filter(Boolean);if(x.length<=0)return!1;const k=x[x.length-1],C=b.pos+v.lastIndexOf(k);if(!k)return!1;const E=zg(k).map(M=>M.toObject(t.defaultProtocol));if(!n4(E))return!1;E.filter(M=>M.isLink).map(M=>({...M,from:C+M.start+1,to:C+M.end+1})).filter(M=>i.schema.marks.code?!i.doc.rangeHasMark(M.from,M.to,i.schema.marks.code):!0).filter(M=>t.validate(M.value)).filter(M=>t.shouldAutoLink(M.value)).forEach(M=>{Sg(M.from,M.to,i.doc).some(_=>_.mark.type===t.type)||c.addMark(M.from,M.to,t.type.create({href:M.href}))})}}),!!c.steps.length)return c}})}function i4(t){return new At({key:new Jt("handleClickLink"),props:{handleClick:(e,n,i)=>{var s,l;if(i.button!==0||!e.editable)return!1;let c=null;if(i.target instanceof HTMLAnchorElement)c=i.target;else{const d=i.target;if(!d)return!1;const p=t.editor.view.dom;c=d.closest("a"),c&&!p.contains(c)&&(c=null)}if(!c)return!1;let u=!1;if(t.enableClickSelection&&(u=t.editor.commands.extendMarkRange(t.type.name)),t.openOnClick){const d=M2(e.state,t.type.name),p=(s=c.href)!=null?s:d.href,y=(l=c.target)!=null?l:d.target;p&&(window.open(p,y),u=!0)}return u}}})}function o4(t){return new At({key:new Jt("handlePasteLink"),props:{handlePaste:(e,n,i)=>{const{shouldAutoLink:s}=t,{state:l}=e,{selection:c}=l,{empty:u}=c;if(u)return!1;let d="";i.content.forEach(y=>{d+=y.textContent});const p=tk(d,{defaultProtocol:t.defaultProtocol}).find(y=>y.isLink&&y.value===d);return!d||!p||s!==void 0&&!s(p.value)?!1:t.editor.commands.setMark(t.type,{href:p.href})}}})}function is(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(i=>{const s=typeof i=="string"?i:i.scheme;s&&n.push(s)}),!t||t.replace(t4,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var s4=As.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){Xv(t);return}Xv(t.scheme,t.optionalSlashes)})},onDestroy(){J3()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!is(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>{const e=/^[a-z][a-z0-9+.-]*:\/\//i.test(t),n=/^[a-z][a-z0-9+.-]*:/i.test(t);if(e||n&&!t.includes("@"))return!0;const s=(t.includes("@")?t.split("@").pop():t).split(/[/?#:]/)[0];return!(/^\d{1,3}(\.\d{1,3}){3}$/.test(s)||!/\./.test(s))}}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:n=>!!is(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!is(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",$t(this.options.HTMLAttributes,t),0]:["a",$t(this.options.HTMLAttributes,{...t,href:""}),0]},markdownTokenName:"link",parseMarkdown:(t,e)=>e.applyMark("link",e.parseInline(t.tokens||[]),{href:t.href,title:t.title||null}),renderMarkdown:(t,e)=>{var n;const i=((n=t.attrs)==null?void 0:n.href)||"";return`[${e.renderChildren(t)}](${i})`},addCommands(){return{setLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:i=>!!is(i,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:n}=t||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:i=>!!is(i,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Es({find:t=>{const e=[];if(t){const{protocols:n,defaultProtocol:i}=this.options,s=tk(t).filter(l=>l.isLink&&this.options.isAllowedUri(l.value,{defaultValidate:c=>!!is(c,n),protocols:n,defaultProtocol:i}));s.length&&s.forEach(l=>{this.options.shouldAutoLink(l.value)&&e.push({text:l.value,data:{href:l.href},index:l.start})})}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:n}=this.options;return this.options.autolink&&t.push(r4({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:i=>this.options.isAllowedUri(i,{defaultValidate:s=>!!is(s,e),protocols:e,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),t.push(i4({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(o4({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),t}}),_s={root:"m_dd3f7539",Typography:"m_f2016866",content:"m_c2204cc2",linkEditorDropdown:"m_8a991b4f",control:"m_c2207da6",controlIcon:"m_9cdfeb3f",controlsGroup:"m_2ab47ef2",linkEditor:"m_b67b711e",linkEditorInput:"m_296cf94c",linkEditorExternalControl:"m_cfef614",linkEditorSave:"m_3b28e7bb",toolbar:"m_4574a3c4",taskList:"m_8b44009a"};const l4={linkControlLabel:"Link",colorPickerControlLabel:"Text color",highlightControlLabel:"Highlight text",colorControlLabel:t=>`Set text color ${t}`,boldControlLabel:"Bold",italicControlLabel:"Italic",underlineControlLabel:"Underline",strikeControlLabel:"Strikethrough",clearFormattingControlLabel:"Clear formatting",unlinkControlLabel:"Remove link",bulletListControlLabel:"Bullet list",orderedListControlLabel:"Ordered list",sourceCodeControlLabel:"Switch between text/source code",h1ControlLabel:"Heading 1",h2ControlLabel:"Heading 2",h3ControlLabel:"Heading 3",h4ControlLabel:"Heading 4",h5ControlLabel:"Heading 5",h6ControlLabel:"Heading 6",blockquoteControlLabel:"Blockquote",alignLeftControlLabel:"Align text: left",alignCenterControlLabel:"Align text: center",alignRightControlLabel:"Align text: right",alignJustifyControlLabel:"Align text: justify",codeControlLabel:"Code",codeBlockControlLabel:"Code block",subscriptControlLabel:"Subscript",superscriptControlLabel:"Superscript",unsetColorControlLabel:"Unset color",hrControlLabel:"Horizontal line",undoControlLabel:"Undo",redoControlLabel:"Redo",tasksControlLabel:"Task list",tasksSinkLabel:"Decrease task level",tasksLiftLabel:"Increase task level",linkEditorInputLabel:"Enter URL",linkEditorInputPlaceholder:"https://example.com/",linkEditorExternalLink:"Open link in a new tab",linkEditorInternalLink:"Open link in the same tab",linkEditorSave:"Save",colorPickerCancel:"Cancel",colorPickerClear:"Clear color",colorPickerColorPicker:"Color picker",colorPickerPalette:"Color palette",colorPickerSave:"Save",colorPickerColorLabel:t=>`Set text color ${t}`},[a4,Yr]=$E("RichTextEditor component was not found in tree");var em={exports:{}},tm={};var Zv;function c4(){if(Zv)return tm;Zv=1;var t=rd();function e(b,v){return b===v&&(b!==0||1/b===1/v)||b!==b&&v!==v}var n=typeof Object.is=="function"?Object.is:e,i=t.useState,s=t.useEffect,l=t.useLayoutEffect,c=t.useDebugValue;function u(b,v){var x=v(),k=i({inst:{value:x,getSnapshot:v}}),C=k[0].inst,E=k[1];return l(function(){C.value=x,C.getSnapshot=v,d(C)&&E({inst:C})},[b,x,v]),s(function(){return d(C)&&E({inst:C}),b(function(){d(C)&&E({inst:C})})},[b]),c(x),x}function d(b){var v=b.getSnapshot;b=b.value;try{var x=v();return!n(b,x)}catch{return!0}}function p(b,v){return v()}var y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?p:u;return tm.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:y,tm}var ex;function nk(){return ex||(ex=1,em.exports=c4()),em.exports}var rk=nk();const{getOwnPropertyNames:u4,getOwnPropertySymbols:f4}=Object,{hasOwnProperty:d4}=Object.prototype;function nm(t,e){return function(i,s,l){return t(i,s,l)&&e(i,s,l)}}function Ju(t){return function(n,i,s){if(!n||!i||typeof n!="object"||typeof i!="object")return t(n,i,s);const{cache:l}=s,c=l.get(n),u=l.get(i);if(c&&u)return c===i&&u===n;l.set(n,i),l.set(i,n);const d=t(n,i,s);return l.delete(n),l.delete(i),d}}function h4(t){return t?.[Symbol.toStringTag]}function tx(t){return u4(t).concat(f4(t))}const p4=Object.hasOwn||((t,e)=>d4.call(t,e));function js(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const m4="__v",g4="__o",y4="_owner",{getOwnPropertyDescriptor:nx,keys:rx}=Object;function b4(t,e){return t.byteLength===e.byteLength&&Xf(new Uint8Array(t),new Uint8Array(e))}function v4(t,e,n){let i=t.length;if(e.length!==i)return!1;for(;i-- >0;)if(!n.equals(t[i],e[i],i,i,t,e,n))return!1;return!0}function x4(t,e){return t.byteLength===e.byteLength&&Xf(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function S4(t,e){return js(t.getTime(),e.getTime())}function k4(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function C4(t,e){return t===e}function ix(t,e,n){const i=t.size;if(i!==e.size)return!1;if(!i)return!0;const s=new Array(i),l=t.entries();let c,u,d=0;for(;(c=l.next())&&!c.done;){const p=e.entries();let y=!1,b=0;for(;(u=p.next())&&!u.done;){if(s[b]){b++;continue}const v=c.value,x=u.value;if(n.equals(v[0],x[0],d,b,t,e,n)&&n.equals(v[1],x[1],v[0],x[0],t,e,n)){y=s[b]=!0;break}b++}if(!y)return!1;d++}return!0}const E4=js;function w4(t,e,n){const i=rx(t);let s=i.length;if(rx(e).length!==s)return!1;for(;s-- >0;)if(!ik(t,e,n,i[s]))return!1;return!0}function Ba(t,e,n){const i=tx(t);let s=i.length;if(tx(e).length!==s)return!1;let l,c,u;for(;s-- >0;)if(l=i[s],!ik(t,e,n,l)||(c=nx(t,l),u=nx(e,l),(c||u)&&(!c||!u||c.configurable!==u.configurable||c.enumerable!==u.enumerable||c.writable!==u.writable)))return!1;return!0}function T4(t,e){return js(t.valueOf(),e.valueOf())}function M4(t,e){return t.source===e.source&&t.flags===e.flags}function ox(t,e,n){const i=t.size;if(i!==e.size)return!1;if(!i)return!0;const s=new Array(i),l=t.values();let c,u;for(;(c=l.next())&&!c.done;){const d=e.values();let p=!1,y=0;for(;(u=d.next())&&!u.done;){if(!s[y]&&n.equals(c.value,u.value,c.value,u.value,t,e,n)){p=s[y]=!0;break}y++}if(!p)return!1}return!0}function Xf(t,e){let n=t.byteLength;if(e.byteLength!==n||t.byteOffset!==e.byteOffset)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function A4(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function ik(t,e,n,i){return(i===y4||i===g4||i===m4)&&(t.$$typeof||e.$$typeof)?!0:p4(e,i)&&n.equals(t[i],e[i],i,i,t,e,n)}const _4="[object ArrayBuffer]",j4="[object Arguments]",O4="[object Boolean]",N4="[object DataView]",z4="[object Date]",R4="[object Error]",D4="[object Map]",L4="[object Number]",B4="[object Object]",I4="[object RegExp]",H4="[object Set]",U4="[object String]",q4={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},V4="[object URL]",P4=Object.prototype.toString;function W4({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:n,areDatesEqual:i,areErrorsEqual:s,areFunctionsEqual:l,areMapsEqual:c,areNumbersEqual:u,areObjectsEqual:d,arePrimitiveWrappersEqual:p,areRegExpsEqual:y,areSetsEqual:b,areTypedArraysEqual:v,areUrlsEqual:x,unknownTagComparators:k}){return function(E,M,_){if(E===M)return!0;if(E==null||M==null)return!1;const N=typeof E;if(N!==typeof M)return!1;if(N!=="object")return N==="number"?u(E,M,_):N==="function"?l(E,M,_):!1;const B=E.constructor;if(B!==M.constructor)return!1;if(B===Object)return d(E,M,_);if(Array.isArray(E))return e(E,M,_);if(B===Date)return i(E,M,_);if(B===RegExp)return y(E,M,_);if(B===Map)return c(E,M,_);if(B===Set)return b(E,M,_);const L=P4.call(E);if(L===z4)return i(E,M,_);if(L===I4)return y(E,M,_);if(L===D4)return c(E,M,_);if(L===H4)return b(E,M,_);if(L===B4)return typeof E.then!="function"&&typeof M.then!="function"&&d(E,M,_);if(L===V4)return x(E,M,_);if(L===R4)return s(E,M,_);if(L===j4)return d(E,M,_);if(q4[L])return v(E,M,_);if(L===_4)return t(E,M,_);if(L===N4)return n(E,M,_);if(L===O4||L===L4||L===U4)return p(E,M,_);if(k){let W=k[L];if(!W){const $=h4(E);$&&(W=k[$])}if(W)return W(E,M,_)}return!1}}function F4({circular:t,createCustomConfig:e,strict:n}){let i={areArrayBuffersEqual:b4,areArraysEqual:n?Ba:v4,areDataViewsEqual:x4,areDatesEqual:S4,areErrorsEqual:k4,areFunctionsEqual:C4,areMapsEqual:n?nm(ix,Ba):ix,areNumbersEqual:E4,areObjectsEqual:n?Ba:w4,arePrimitiveWrappersEqual:T4,areRegExpsEqual:M4,areSetsEqual:n?nm(ox,Ba):ox,areTypedArraysEqual:n?nm(Xf,Ba):Xf,areUrlsEqual:A4,unknownTagComparators:void 0};if(e&&(i=Object.assign({},i,e(i))),t){const s=Ju(i.areArraysEqual),l=Ju(i.areMapsEqual),c=Ju(i.areObjectsEqual),u=Ju(i.areSetsEqual);i=Object.assign({},i,{areArraysEqual:s,areMapsEqual:l,areObjectsEqual:c,areSetsEqual:u})}return i}function G4(t){return function(e,n,i,s,l,c,u){return t(e,n,u)}}function $4({circular:t,comparator:e,createState:n,equals:i,strict:s}){if(n)return function(u,d){const{cache:p=t?new WeakMap:void 0,meta:y}=n();return e(u,d,{cache:p,equals:i,meta:y,strict:s})};if(t)return function(u,d){return e(u,d,{cache:new WeakMap,equals:i,meta:void 0,strict:s})};const l={cache:void 0,equals:i,meta:void 0,strict:s};return function(u,d){return e(u,d,l)}}const Y4=zo();zo({strict:!0});zo({circular:!0});zo({circular:!0,strict:!0});zo({createInternalComparator:()=>js});zo({strict:!0,createInternalComparator:()=>js});zo({circular:!0,createInternalComparator:()=>js});zo({circular:!0,createInternalComparator:()=>js,strict:!0});function zo(t={}){const{circular:e=!1,createInternalComparator:n,createState:i,strict:s=!1}=t,l=F4(t),c=W4(l),u=n?n(c):G4(c);return $4({circular:e,comparator:c,createState:i,equals:u,strict:s})}var rm={exports:{}},im={};var sx;function K4(){if(sx)return im;sx=1;var t=rd(),e=nk();function n(p,y){return p===y&&(p!==0||1/p===1/y)||p!==p&&y!==y}var i=typeof Object.is=="function"?Object.is:n,s=e.useSyncExternalStore,l=t.useRef,c=t.useEffect,u=t.useMemo,d=t.useDebugValue;return im.useSyncExternalStoreWithSelector=function(p,y,b,v,x){var k=l(null);if(k.current===null){var C={hasValue:!1,value:null};k.current=C}else C=k.current;k=u(function(){function M(W){if(!_){if(_=!0,N=W,W=v(W),x!==void 0&&C.hasValue){var $=C.value;if(x($,W))return B=$}return B=W}if($=B,i(N,W))return $;var ne=v(W);return x!==void 0&&x($,ne)?(N=W,$):(N=W,B=ne)}var _=!1,N,B,L=b===void 0?null:b;return[function(){return M(y())},L===null?void 0:function(){return M(L())}]},[y,b,v,x]);var E=s(p,k[0],k[1]);return c(function(){C.hasValue=!0,C.value=E},[E]),d(E),E},im}var lx;function Q4(){return lx||(lx=1,rm.exports=K4()),rm.exports}var J4=Q4(),X4=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},Z4=({contentComponent:t})=>{const e=rk.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return m.jsx(m.Fragment,{children:Object.values(e)})};function eN(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,i){e={...e,[n]:Ha.createPortal(i.reactElement,i.element,n)},t.forEach(s=>s())},removeRenderer(n){const i={...e};delete i[n],e=i,t.forEach(s=>s())}}}var tN=class extends vn.Component{constructor(t){var e;super(t),this.editorContentRef=vn.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=t.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){var t;const e=this.props.editor;if(e&&!e.isDestroyed&&((t=e.view.dom)!=null&&t.parentNode)){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:n}),e.contentComponent=eN(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(i=>i.hasContentComponentInitialized?i:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var t;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((t=e.view.dom)!=null&&t.parentNode))return;const n=document.createElement("div");n.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:n})}catch{}}}render(){const{editor:t,innerRef:e,...n}=this.props;return m.jsxs(m.Fragment,{children:[m.jsx("div",{ref:X4(e,this.editorContentRef),...n}),t?.contentComponent&&m.jsx(Z4,{contentComponent:t.contentComponent})]})}},nN=R.forwardRef((t,e)=>{const n=vn.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return vn.createElement(tN,{key:n,innerRef:e,...t})}),ax=vn.memo(nN),rN=typeof window<"u"?R.useLayoutEffect:R.useEffect,iN=class{constructor(t){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=t,this.lastSnapshot={editor:t,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}watch(t){if(this.editor=t,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(i=>i())},n=this.editor;return n.on("transaction",e),()=>{n.off("transaction",e)}}}};function oN(t){var e;const[n]=R.useState(()=>new iN(t.editor)),i=J4.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!=null?e:Y4);return rN(()=>n.watch(t.editor),[t.editor,n]),R.useDebugValue(i),i}var sN=!1,Wm=typeof window>"u",lN=Wm||!!(typeof window<"u"&&window.next),aN=class ok{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?Wm||lN?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...i)=>{var s,l;return(l=(s=this.options.current).onBeforeCreate)==null?void 0:l.call(s,...i)},onBlur:(...i)=>{var s,l;return(l=(s=this.options.current).onBlur)==null?void 0:l.call(s,...i)},onCreate:(...i)=>{var s,l;return(l=(s=this.options.current).onCreate)==null?void 0:l.call(s,...i)},onDestroy:(...i)=>{var s,l;return(l=(s=this.options.current).onDestroy)==null?void 0:l.call(s,...i)},onFocus:(...i)=>{var s,l;return(l=(s=this.options.current).onFocus)==null?void 0:l.call(s,...i)},onSelectionUpdate:(...i)=>{var s,l;return(l=(s=this.options.current).onSelectionUpdate)==null?void 0:l.call(s,...i)},onTransaction:(...i)=>{var s,l;return(l=(s=this.options.current).onTransaction)==null?void 0:l.call(s,...i)},onUpdate:(...i)=>{var s,l;return(l=(s=this.options.current).onUpdate)==null?void 0:l.call(s,...i)},onContentError:(...i)=>{var s,l;return(l=(s=this.options.current).onContentError)==null?void 0:l.call(s,...i)},onDrop:(...i)=>{var s,l;return(l=(s=this.options.current).onDrop)==null?void 0:l.call(s,...i)},onPaste:(...i)=>{var s,l;return(l=(s=this.options.current).onPaste)==null?void 0:l.call(s,...i)},onDelete:(...i)=>{var s,l;return(l=(s=this.options.current).onDelete)==null?void 0:l.call(s,...i)}};return new T3(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,n){return Object.keys(e).every(i=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(i)?!0:i==="extensions"&&e.extensions&&n.extensions?e.extensions.length!==n.extensions.length?!1:e.extensions.every((s,l)=>{var c;return s===((c=n.extensions)==null?void 0:c[l])}):e[i]===n[i])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?ok.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((i,s)=>i===e[s]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function cN(t={},e=[]){const n=R.useRef(t);n.current=t;const[i]=R.useState(()=>new aN(n)),s=rk.useSyncExternalStore(i.subscribe,i.getEditor,i.getServerSnapshot);return R.useDebugValue(s),R.useEffect(i.onRender(e)),oN({editor:s,selector:({transactionNumber:l})=>t.shouldRerenderOnTransaction===!1||t.shouldRerenderOnTransaction===void 0?null:t.immediatelyRender&&l===0?0:l+1}),s}var uN=R.createContext({editor:null});uN.Consumer;var fN=R.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),dN=()=>R.useContext(fN);vn.forwardRef((t,e)=>{const{onDragStart:n}=dN(),i=t.as||"div";return m.jsx(i,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});vn.createContext({markViewContentRef:()=>{}});const Dg=ws((t,e)=>{const n=$r("RichTextEditorContent",null,t),{classNames:i,className:s,style:l,styles:c,vars:u,...d}=n,p=Yr();return p.withTypographyStyles?m.jsx(YE,{...p.getStyles("Typography",{className:s,style:l,styles:c,classNames:i}),unstyled:p.unstyled,ref:e,children:m.jsx(de,{component:ax,editor:p.editor,...p.getStyles("content",{classNames:i,styles:c}),...d})}):m.jsx(de,{component:ax,editor:p.editor,...p.getStyles("content",{classNames:i,styles:c,className:s,style:l}),...d})});Dg.classes=_s;Dg.displayName="@mantine/tiptap/RichTextEditorContent";function $e(t){return m.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"})}function hN(t){return m.jsxs($e,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M7 5h6a3.5 3.5 0 0 1 0 7h-6z"}),m.jsx("path",{d:"M13 12h1a3.5 3.5 0 0 1 0 7h-7v-7"})]})}function pN(t){return m.jsxs($e,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M11 5l6 0"}),m.jsx("path",{d:"M7 19l6 0"}),m.jsx("path",{d:"M14 5l-4 14"})]})}function mN(t){return m.jsxs($e,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M7 5v5a5 5 0 0 0 10 0v-5"}),m.jsx("path",{d:"M5 19h14"})]})}function gN(t){return m.jsxs($e,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M5 12l14 0"}),m.jsx("path",{d:"M16 6.5a4 2 0 0 0 -4 -1.5h-1a3.5 3.5 0 0 0 0 7h2a3.5 3.5 0 0 1 0 7h-1.5a4 2 0 0 1 -4 -1.5"})]})}function yN(t){return m.jsxs($e,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M17 15l4 4m0 -4l-4 4"}),m.jsx("path",{d:"M7 6v-1h11v1"}),m.jsx("path",{d:"M7 19l4 0"}),m.jsx("path",{d:"M13 5l-4 14"})]})}function bN(t){return m.jsxs($e,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M19 18v-8l-2 2"}),m.jsx("path",{d:"M4 6v12"}),m.jsx("path",{d:"M12 6v12"}),m.jsx("path",{d:"M11 18h2"}),m.jsx("path",{d:"M3 18h2"}),m.jsx("path",{d:"M4 12h8"}),m.jsx("path",{d:"M3 6h2"}),m.jsx("path",{d:"M11 6h2"})]})}function vN(t){return m.jsxs($e,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M17 12a2 2 0 1 1 4 0c0 .591 -.417 1.318 -.816 1.858l-3.184 4.143l4 0"}),m.jsx("path",{d:"M4 6v12"}),m.jsx("path",{d:"M12 6v12"}),m.jsx("path",{d:"M11 18h2"}),m.jsx("path",{d:"M3 18h2"}),m.jsx("path",{d:"M4 12h8"}),m.jsx("path",{d:"M3 6h2"}),m.jsx("path",{d:"M11 6h2"})]})}function xN(t){return m.jsxs($e,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M19 14a2 2 0 1 0 -2 -2"}),m.jsx("path",{d:"M17 16a2 2 0 1 0 2 -2"}),m.jsx("path",{d:"M4 6v12"}),m.jsx("path",{d:"M12 6v12"}),m.jsx("path",{d:"M11 18h2"}),m.jsx("path",{d:"M3 18h2"}),m.jsx("path",{d:"M4 12h8"}),m.jsx("path",{d:"M3 6h2"}),m.jsx("path",{d:"M11 6h2"})]})}function SN(t){return m.jsxs($e,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M20 18v-8l-4 6h5"}),m.jsx("path",{d:"M4 6v12"}),m.jsx("path",{d:"M12 6v12"}),m.jsx("path",{d:"M11 18h2"}),m.jsx("path",{d:"M3 18h2"}),m.jsx("path",{d:"M4 12h8"}),m.jsx("path",{d:"M3 6h2"}),m.jsx("path",{d:"M11 6h2"})]})}function kN(t){return m.jsxs($e,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M17 18h2a2 2 0 1 0 0 -4h-2v-4h4"}),m.jsx("path",{d:"M4 6v12"}),m.jsx("path",{d:"M12 6v12"}),m.jsx("path",{d:"M11 18h2"}),m.jsx("path",{d:"M3 18h2"}),m.jsx("path",{d:"M4 12h8"}),m.jsx("path",{d:"M3 6h2"}),m.jsx("path",{d:"M11 6h2"})]})}function CN(t){return m.jsxs($e,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M19 14a2 2 0 1 0 0 4a2 2 0 0 0 0 -4z"}),m.jsx("path",{d:"M21 12a2 2 0 1 0 -4 0v4"}),m.jsx("path",{d:"M4 6v12"}),m.jsx("path",{d:"M12 6v12"}),m.jsx("path",{d:"M11 18h2"}),m.jsx("path",{d:"M3 18h2"}),m.jsx("path",{d:"M4 12h8"}),m.jsx("path",{d:"M3 6h2"}),m.jsx("path",{d:"M11 6h2"})]})}function EN(t){return m.jsxs($e,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M9 6l11 0"}),m.jsx("path",{d:"M9 12l11 0"}),m.jsx("path",{d:"M9 18l11 0"}),m.jsx("path",{d:"M5 6l0 .01"}),m.jsx("path",{d:"M5 12l0 .01"}),m.jsx("path",{d:"M5 18l0 .01"})]})}function wN(t){return m.jsxs($e,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M11 6h9"}),m.jsx("path",{d:"M11 12h9"}),m.jsx("path",{d:"M12 18h8"}),m.jsx("path",{d:"M4 16a2 2 0 1 1 4 0c0 .591 -.5 1 -1 1.5l-3 2.5h4"}),m.jsx("path",{d:"M6 10v-6l-2 2"})]})}function TN(t){return m.jsxs($e,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M17 22v-2"}),m.jsx("path",{d:"M9 15l6 -6"}),m.jsx("path",{d:"M11 6l.463 -.536a5 5 0 0 1 7.071 7.072l-.534 .464"}),m.jsx("path",{d:"M13 18l-.397 .534a5.068 5.068 0 0 1 -7.127 0a4.972 4.972 0 0 1 0 -7.071l.524 -.463"}),m.jsx("path",{d:"M20 17h2"}),m.jsx("path",{d:"M2 7h2"}),m.jsx("path",{d:"M7 2v2"})]})}function MN(t){return m.jsxs($e,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M6 15h15"}),m.jsx("path",{d:"M21 19h-15"}),m.jsx("path",{d:"M15 11h6"}),m.jsx("path",{d:"M21 7h-6"}),m.jsx("path",{d:"M9 9h1a1 1 0 1 1 -1 1v-2.5a2 2 0 0 1 2 -2"}),m.jsx("path",{d:"M3 9h1a1 1 0 1 1 -1 1v-2.5a2 2 0 0 1 2 -2"})]})}function AN(t){return m.jsxs($e,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M4 6l16 0"}),m.jsx("path",{d:"M4 12l10 0"}),m.jsx("path",{d:"M4 18l14 0"})]})}function _N(t){return m.jsxs($e,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M4 6l16 0"}),m.jsx("path",{d:"M10 12l10 0"}),m.jsx("path",{d:"M6 18l14 0"})]})}function jN(t){return m.jsxs($e,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M4 6l16 0"}),m.jsx("path",{d:"M8 12l8 0"}),m.jsx("path",{d:"M6 18l12 0"})]})}function ON(t){return m.jsxs($e,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M4 6l16 0"}),m.jsx("path",{d:"M4 12l16 0"}),m.jsx("path",{d:"M4 18l12 0"})]})}function NN(t){return m.jsxs($e,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M5 7l8 10m-8 0l8 -10"}),m.jsx("path",{d:"M21 20h-4l3.5 -4a1.73 1.73 0 0 0 -3.5 -2"})]})}function zN(t){return m.jsxs($e,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M5 7l8 10m-8 0l8 -10"}),m.jsx("path",{d:"M21 11h-4l3.5 -4a1.73 1.73 0 0 0 -3.5 -2"})]})}function sk(t){return m.jsxs($e,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M7 8l-4 4l4 4"}),m.jsx("path",{d:"M17 8l4 4l-4 4"}),m.jsx("path",{d:"M14 4l-4 16"})]})}function RN(t){return m.jsxs($e,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M3 19h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4"}),m.jsx("path",{d:"M12.5 5.5l4 4"}),m.jsx("path",{d:"M4.5 13.5l4 4"}),m.jsx("path",{d:"M21 15v4h-8l4 -4z"})]})}function DN(t){return m.jsxs($e,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M5 12h2"}),m.jsx("path",{d:"M17 12h2"}),m.jsx("path",{d:"M11 12h2"})]})}function lk(t){return m.jsxs($e,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M20.042 16.045a9 9 0 0 0 -12.087 -12.087m-2.318 1.677a9 9 0 1 0 12.725 12.73"}),m.jsx("path",{d:"M3 3l18 18"})]})}function LN(t){return m.jsxs($e,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M11 7l6 6"}),m.jsx("path",{d:"M4 16l11.7 -11.7a1 1 0 0 1 1.4 0l2.6 2.6a1 1 0 0 1 0 1.4l-11.7 11.7h-4v-4z"})]})}function BN(t){return m.jsxs($e,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M18 6l-12 12"}),m.jsx("path",{d:"M6 6l12 12"})]})}function IN(t){return m.jsxs($e,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M12 21a9 9 0 0 1 0 -18c4.97 0 9 3.582 9 8c0 1.06 -.474 2.078 -1.318 2.828c-.844 .75 -1.989 1.172 -3.182 1.172h-2.5a2 2 0 0 0 -1 3.75a1.3 1.3 0 0 1 -1 2.25"}),m.jsx("path",{d:"M8.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),m.jsx("path",{d:"M12.5 7.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),m.jsx("path",{d:"M16.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"})]})}function HN(t){return m.jsxs($e,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M5 12l5 5l10 -10"})]})}function UN(t){return m.jsxs($e,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M9 15l6 -6"}),m.jsx("path",{d:"M11 6l.463 -.536a5 5 0 0 1 7.071 7.072l-.534 .464"}),m.jsx("path",{d:"M13 18l-.397 .534a5.068 5.068 0 0 1 -7.127 0a4.972 4.972 0 0 1 0 -7.071l.524 -.463"})]})}function qN(t){return m.jsxs($e,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M12 6h-6a2 2 0 0 0 -2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-6"}),m.jsx("path",{d:"M11 13l9 -9"}),m.jsx("path",{d:"M15 4h5v5"})]})}function VN(t){return m.jsxs($e,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M9 14l-4 -4l4 -4"}),m.jsx("path",{d:"M5 10h11a4 4 0 1 1 0 8h-1"})]})}function PN(t){return m.jsxs($e,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M15 14l4 -4l-4 -4"}),m.jsx("path",{d:"M19 10h-11a4 4 0 1 0 0 8h1"})]})}function WN(t){return m.jsxs($e,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M3.5 5.5l1.5 1.5l2.5 -2.5"}),m.jsx("path",{d:"M3.5 11.5l1.5 1.5l2.5 -2.5"}),m.jsx("path",{d:"M3.5 17.5l1.5 1.5l2.5 -2.5"}),m.jsx("path",{d:"M11 6l9 0"}),m.jsx("path",{d:"M11 12l9 0"}),m.jsx("path",{d:"M11 18l9 0"})]})}function FN(t){return m.jsxs($e,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M20 6l-11 0"}),m.jsx("path",{d:"M20 12l-7 0"}),m.jsx("path",{d:"M20 18l-11 0"}),m.jsx("path",{d:"M4 8l4 4l-4 4"})]})}function GN(t){return m.jsxs($e,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M20 6l-7 0"}),m.jsx("path",{d:"M20 12l-9 0"}),m.jsx("path",{d:"M20 18l-7 0"}),m.jsx("path",{d:"M8 8l-4 4l4 4"})]})}function $N(t){return m.jsxs($e,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:`M19 3v16a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V7.914
           a1 1 0 0 1 .293-.707l3.914-3.914A1 1 0 0 1 9.914 3H18
           a1 1 0 0 1 1 1Z`}),m.jsx("path",{d:"M10 11l-2 2 2 2"}),m.jsx("path",{d:"M14 11l2 2-2 2"})]})}const YN={interactive:!0},Os=ws((t,e)=>{const n=$r("RichTextEditorControl",YN,t),{classNames:i,className:s,style:l,styles:c,vars:u,interactive:d,active:p,onMouseDown:y,disabled:b,...v}=n,x=Yr();return m.jsx(jx,{...v,...x.getStyles("control",{className:s,style:l,classNames:i,styles:c}),disabled:b,"data-rich-text-editor-control":!0,tabIndex:d?0:-1,"data-interactive":d||void 0,"data-disabled":b||void 0,"data-active":p||void 0,"aria-pressed":p&&d||void 0,"aria-hidden":!d||void 0,ref:e,unstyled:x.unstyled,variant:x.variant||"default",onMouseDown:k=>{k.preventDefault(),y?.(k)}})});Os.classes=_s;Os.displayName="@mantine/tiptap/RichTextEditorControl";const Lg=R.forwardRef(({className:t,icon:e,...n},i)=>{const s=Yr();return m.jsx(Os,{ref:i,...n,children:m.jsx(e,{...s.getStyles("controlIcon")})})});Lg.displayName="@mantine/tiptap/RichTextEditorControlBase";function ot({label:t,isActive:e,operation:n,icon:i,isDisabled:s}){const l=R.forwardRef((c,u)=>{const{editor:d,labels:p}=Yr(),y=p[t];return m.jsx(Lg,{"aria-label":y,title:y,active:e?.name?d?.isActive(e.name,e.attributes):!1,ref:u,icon:c.icon||i,disabled:s?.(d)||!1,...c,onClick:()=>d?.chain().focus()[n.name](n.attributes).run()})});return l.displayName=`@mantine/tiptap/${t}`,l}const KN=ot({label:"boldControlLabel",icon:t=>m.jsx(hN,{...t}),isActive:{name:"bold"},operation:{name:"toggleBold"}}),QN=ot({label:"italicControlLabel",icon:t=>m.jsx(pN,{...t}),isActive:{name:"italic"},operation:{name:"toggleItalic"}}),JN=ot({label:"underlineControlLabel",icon:t=>m.jsx(mN,{...t}),isActive:{name:"underline"},operation:{name:"toggleUnderline"}}),XN=ot({label:"strikeControlLabel",icon:t=>m.jsx(gN,{...t}),isActive:{name:"strike"},operation:{name:"toggleStrike"}}),ZN=ot({label:"clearFormattingControlLabel",icon:t=>m.jsx(yN,{...t}),operation:{name:"unsetAllMarks"}}),e5=ot({label:"unlinkControlLabel",icon:t=>m.jsx(TN,{...t}),operation:{name:"unsetLink"}}),t5=ot({label:"bulletListControlLabel",icon:t=>m.jsx(EN,{...t}),isActive:{name:"bulletList"},operation:{name:"toggleBulletList"}}),n5=ot({label:"orderedListControlLabel",icon:t=>m.jsx(wN,{...t}),isActive:{name:"orderedList"},operation:{name:"toggleOrderedList"}}),r5=ot({label:"h1ControlLabel",icon:t=>m.jsx(bN,{...t}),isActive:{name:"heading",attributes:{level:1}},operation:{name:"toggleHeading",attributes:{level:1}}}),i5=ot({label:"h2ControlLabel",icon:t=>m.jsx(vN,{...t}),isActive:{name:"heading",attributes:{level:2}},operation:{name:"toggleHeading",attributes:{level:2}}}),o5=ot({label:"h3ControlLabel",icon:t=>m.jsx(xN,{...t}),isActive:{name:"heading",attributes:{level:3}},operation:{name:"toggleHeading",attributes:{level:3}}}),s5=ot({label:"h4ControlLabel",icon:t=>m.jsx(SN,{...t}),isActive:{name:"heading",attributes:{level:4}},operation:{name:"toggleHeading",attributes:{level:4}}}),l5=ot({label:"h5ControlLabel",icon:t=>m.jsx(kN,{...t}),isActive:{name:"heading",attributes:{level:5}},operation:{name:"toggleHeading",attributes:{level:5}}}),a5=ot({label:"h6ControlLabel",icon:t=>m.jsx(CN,{...t}),isActive:{name:"heading",attributes:{level:6}},operation:{name:"toggleHeading",attributes:{level:6}}}),c5=ot({label:"blockquoteControlLabel",icon:t=>m.jsx(MN,{...t}),isActive:{name:"blockquote"},operation:{name:"toggleBlockquote"}}),u5=ot({label:"alignLeftControlLabel",icon:t=>m.jsx(AN,{...t}),operation:{name:"setTextAlign",attributes:"left"}}),f5=ot({label:"alignRightControlLabel",icon:t=>m.jsx(_N,{...t}),operation:{name:"setTextAlign",attributes:"right"}}),d5=ot({label:"alignCenterControlLabel",icon:t=>m.jsx(jN,{...t}),operation:{name:"setTextAlign",attributes:"center"}}),h5=ot({label:"alignJustifyControlLabel",icon:t=>m.jsx(ON,{...t}),operation:{name:"setTextAlign",attributes:"justify"}}),p5=ot({label:"subscriptControlLabel",icon:t=>m.jsx(NN,{...t}),isActive:{name:"subscript"},operation:{name:"toggleSubscript"}}),m5=ot({label:"superscriptControlLabel",icon:t=>m.jsx(zN,{...t}),isActive:{name:"superscript"},operation:{name:"toggleSuperscript"}}),g5=ot({label:"codeControlLabel",icon:t=>m.jsx(sk,{...t}),isActive:{name:"code"},operation:{name:"toggleCode"}}),y5=ot({label:"codeBlockControlLabel",icon:t=>m.jsx(sk,{...t}),isActive:{name:"codeBlock"},operation:{name:"toggleCodeBlock"}}),b5=ot({label:"highlightControlLabel",icon:t=>m.jsx(RN,{...t}),isActive:{name:"highlight"},operation:{name:"toggleHighlight"}}),v5=ot({label:"hrControlLabel",icon:t=>m.jsx(DN,{...t}),operation:{name:"setHorizontalRule"}}),x5=ot({label:"unsetColorControlLabel",icon:t=>m.jsx(lk,{...t}),operation:{name:"unsetColor"}}),S5=ot({label:"undoControlLabel",icon:t=>m.jsx(VN,{...t}),isDisabled:t=>!t?.can().undo(),operation:{name:"undo"}}),k5=ot({label:"redoControlLabel",icon:t=>m.jsx(PN,{...t}),isDisabled:t=>!t?.can().redo(),operation:{name:"redo"}}),C5=ot({label:"tasksControlLabel",icon:t=>m.jsx(WN,{...t}),isActive:{name:"taskList"},operation:{name:"toggleTaskList"}}),E5=ot({label:"tasksSinkLabel",icon:t=>m.jsx(FN,{...t}),operation:{name:"sinkListItem",attributes:"taskItem"},isDisabled:t=>!t?.can().sinkListItem("taskItem")}),w5=ot({label:"tasksLiftLabel",icon:t=>m.jsx(GN,{...t}),operation:{name:"liftListItem",attributes:"taskItem"},isDisabled:t=>!t?.can().liftListItem("taskItem")}),T5=t=>m.jsx(UN,{...t}),Bg=ws((t,e)=>{const n=$r("RichTextEditorLinkControl",null,t),{classNames:i,className:s,style:l,styles:c,vars:u,icon:d,popoverProps:p,disableTooltips:y,initialExternal:b,...v}=n,x=Yr(),k={classNames:i,styles:c},[C,E]=KE(""),[M,_]=R.useState(b),[N,{open:B,close:L}]=Ox(!1),W=()=>{B();const ye=x.editor?.getAttributes("link");E(ye?.href||""),_(ye?.href?ye?.target==="_blank":b)},$=()=>{L(),E(""),_(b)},ne=()=>{$(),C===""?x.editor?.chain().focus().extendMarkRange("link").unsetLink().run():x.editor?.chain().focus().extendMarkRange("link").setLink({href:C,target:M?"_blank":null}).run()},ve=ye=>{ye.key==="Enter"&&(ye.preventDefault(),ne())};QE("edit-link",W,!1);const{resolvedClassNames:qe,resolvedStyles:Te}=JE({classNames:i,styles:c,props:n});return m.jsxs(Ml,{trapFocus:!0,shadow:"md",withinPortal:!0,opened:N,onChange:ye=>!ye&&$(),offset:-44,zIndex:1e4,...p,children:[m.jsx(Ml.Target,{children:m.jsx(Lg,{icon:d||T5,...v,"aria-label":x.labels.linkControlLabel,title:x.labels.linkControlLabel,onClick:W,active:x.editor?.isActive("link"),ref:e,classNames:qe,styles:Te,className:s,style:l,variant:x.variant})}),m.jsx(Ml.Dropdown,{...x.getStyles("linkEditorDropdown",k),children:m.jsxs("div",{...x.getStyles("linkEditor",k),children:[m.jsx(Ym,{placeholder:x.labels.linkEditorInputPlaceholder,"aria-label":x.labels.linkEditorInputLabel,type:"url",value:C,onChange:E,classNames:{input:x.getStyles("linkEditorInput",k).className},onKeyDown:ve,rightSection:m.jsx(Km,{label:M?x.labels.linkEditorExternalLink:x.labels.linkEditorInternalLink,events:{hover:!0,focus:!0,touch:!0},withinPortal:!0,withArrow:!0,disabled:y,zIndex:1e4,children:m.jsx(jx,{onClick:()=>_(ye=>!ye),"data-active":M||void 0,...x.getStyles("linkEditorExternalControl",k),children:m.jsx(qN,{style:{width:wt(14),height:wt(14)}})})})}),m.jsx(Pe,{variant:"default",onClick:ne,...x.getStyles("linkEditorSave",k),children:x.labels.linkEditorSave})]})})]})});Bg.classes=_s;Bg.displayName="@mantine/tiptap/RichTextEditorLinkControl";const ak=R.forwardRef((t,e)=>{const{popoverProps:n,colors:i,colorPickerProps:s,...l}=$r("RichTextEditorColorPickerControl",null,t),{editor:c,labels:u,getStyles:d,variant:p}=Yr(),[y,{toggle:b,close:v}]=Ox(!1),[x,k]=R.useState("palette"),C=c?.getAttributes("textStyle").color||"var(--mantine-color-text)",E=(N,B=!0)=>{(c?.chain()).focus().setColor(N).run(),B&&v()},M=()=>{(c?.chain()).focus().unsetColor().run(),v()},_=i.map((N,B)=>m.jsx(um,{component:"button",color:N,onClick:()=>E(N),size:26,radius:"xs",style:{cursor:"pointer"},title:u.colorPickerColorLabel(N),"aria-label":u.colorPickerColorLabel(N)},B));return m.jsxs(Ml,{opened:y,withinPortal:!0,trapFocus:!0,onChange:N=>!N&&v(),...n,children:[m.jsx(Ml.Target,{children:m.jsx(Os,{...l,variant:p,"aria-label":u.colorPickerControlLabel,title:u.colorPickerControlLabel,ref:e,onClick:b,children:m.jsx(um,{color:C,size:14})})}),m.jsxs(Ml.Dropdown,{...d("linkEditorDropdown"),children:[x==="palette"&&m.jsx(_x,{cols:7,spacing:2,children:_}),x==="colorPicker"&&m.jsx(XE,{defaultValue:C,onChange:N=>E(N,!1),...s}),m.jsx(Km.Group,{closeDelay:200,children:m.jsxs(He,{justify:"flex-end",gap:"xs",mt:"sm",children:[x==="palette"&&m.jsx(bo,{variant:"default",onClick:v,title:u.colorPickerCancel,"aria-label":u.colorPickerCancel,children:m.jsx(BN,{style:{width:wt(16),height:wt(16)}})}),m.jsx(bo,{variant:"default",onClick:M,title:u.colorPickerClear,"aria-label":u.colorPickerClear,children:m.jsx(lk,{style:{width:wt(16),height:wt(16)}})}),x==="palette"?m.jsx(bo,{variant:"default",onClick:()=>k("colorPicker"),title:u.colorPickerColorPicker,"aria-label":u.colorPickerColorPicker,children:m.jsx(LN,{style:{width:wt(16),height:wt(16)}})}):m.jsx(bo,{variant:"default",onClick:()=>k("palette"),"aria-label":u.colorPickerPalette,title:u.colorPickerPalette,children:m.jsx(IN,{style:{width:wt(16),height:wt(16)}})}),x==="colorPicker"&&m.jsx(bo,{variant:"default",onClick:v,title:u.colorPickerSave,"aria-label":u.colorPickerSave,children:m.jsx(HN,{style:{width:wt(16),height:wt(16)}})})]})})]})]})});ak.displayName="@mantine/tiptap/ColorPickerControl";const ck=R.forwardRef((t,e)=>{const{color:n,...i}=$r("RichTextEditorColorControl",null,t),{editor:s,labels:l,variant:c}=Yr(),u=s?.getAttributes("textStyle").color||null,d=l.colorControlLabel(n);return m.jsx(Os,{...i,variant:c,active:u===n,"aria-label":d,title:d,onClick:()=>(s?.chain()).focus().setColor(n).run(),ref:e,children:m.jsx(um,{color:n,size:14})})});ck.displayName="@mantine/tiptap/RichTextEditorColorControl";const M5={},uk=R.forwardRef((t,e)=>{const{...n}=$r("RichTextEditorSourceCodeControl",M5,t),{editor:i,labels:s,variant:l,onSourceCodeTextSwitch:c}=Yr(),[u,d]=R.useState(!1),p=()=>{u?i?.commands.setContent(i.getText(),{emitUpdate:!0}):i?.commands.setContent(`<textarea>${i.getHTML()}</textarea>`);const y=!u;d(y),c?.(y)};return m.jsx(Os,{...n,variant:l,active:u,"aria-label":s.sourceCodeControlLabel,title:s.sourceCodeControlLabel,onClick:()=>p(),ref:e,children:m.jsx($N,{style:{width:wt(16),height:wt(16)}})})});uk.displayName="@mantine/tiptap/RichTextEditorSourceCodeControl";const Ig=ws((t,e)=>{const n=$r("RichTextEditorControlsGroup",null,t),{classNames:i,className:s,style:l,styles:c,vars:u,variant:d,...p}=n,y=Yr();return m.jsx(de,{ref:e,variant:d||y.variant,...y.getStyles("controlsGroup",{className:s,style:l,styles:c,classNames:i}),...p})});Ig.classes=_s;Ig.displayName="@mantine/tiptap/RichTextEditorControlsGroup";const Hg=ws((t,e)=>{const n=$r("RichTextEditorToolbar",null,t),{classNames:i,className:s,style:l,styles:c,vars:u,sticky:d,stickyOffset:p,mod:y,variant:b,...v}=n,x=Yr();return m.jsx(de,{ref:e,mod:[{sticky:d},y],variant:b||x.variant,...x.getStyles("toolbar",{className:s,style:l,styles:c,classNames:i}),...v,__vars:{"--rte-sticky-offset":wt(p)}})});Hg.classes=_s;Hg.displayName="@mantine/tiptap/RichTextEditorToolbar";const A5={withCodeHighlightStyles:!0,withTypographyStyles:!0,variant:"default"},Me=ws((t,e)=>{const n=$r("RichTextEditor",A5,t),{classNames:i,className:s,style:l,styles:c,unstyled:u,vars:d,editor:p,withCodeHighlightStyles:y,withTypographyStyles:b,onSourceCodeTextSwitch:v,labels:x,children:k,variant:C,attributes:E,...M}=n,_=wx({name:"RichTextEditor",classes:_s,props:n,className:s,style:l,classNames:i,styles:c,unstyled:u,attributes:E,vars:d}),N=R.useMemo(()=>({...l4,...x}),[x]);return m.jsx(a4,{value:{editor:p,getStyles:_,labels:N,withCodeHighlightStyles:y,withTypographyStyles:b,onSourceCodeTextSwitch:v,unstyled:u,variant:C},children:m.jsx(de,{..._("root"),...M,ref:e,children:k})})});Me.classes=_s;Me.displayName="@mantine/tiptap/RichTextEditor";Me.Content=Dg;Me.Control=Os;Me.Toolbar=Hg;Me.ControlsGroup=Ig;Me.Bold=KN;Me.Italic=QN;Me.Strikethrough=XN;Me.Underline=JN;Me.ClearFormatting=ZN;Me.H1=r5;Me.H2=i5;Me.H3=o5;Me.H4=s5;Me.H5=l5;Me.H6=a5;Me.BulletList=t5;Me.OrderedList=n5;Me.Link=Bg;Me.Unlink=e5;Me.Blockquote=c5;Me.AlignLeft=u5;Me.AlignRight=f5;Me.AlignCenter=d5;Me.AlignJustify=h5;Me.Superscript=m5;Me.Subscript=p5;Me.Code=g5;Me.CodeBlock=y5;Me.ColorPicker=ak;Me.Color=ck;Me.Highlight=b5;Me.Hr=v5;Me.UnsetColor=x5;Me.Undo=S5;Me.Redo=k5;Me.TaskList=C5;Me.TaskListSink=E5;Me.TaskListLift=w5;Me.SourceCode=uk;var Zf=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:n,...i}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,i,n]},_5=/^\s*>\s$/,j5=Qn.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return Zf("blockquote",{...$t(this.options.HTMLAttributes,t),children:Zf("slot",{})})},parseMarkdown:(t,e)=>e.createNode("blockquote",void 0,e.parseChildren(t.tokens||[])),renderMarkdown:(t,e)=>{if(!t.content)return"";const n=">",i=[];return t.content.forEach(s=>{const u=e.renderChildren([s]).split(`
`).map(d=>d.trim()===""?n:`${n} ${d}`);i.push(u.join(`
`))}),i.join(`
${n}
`)},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Ll({find:_5,type:this.type})]}}),O5=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,N5=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,z5=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,R5=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,D5=As.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return Zf("strong",{...$t(this.options.HTMLAttributes,t),children:Zf("slot",{})})},markdownTokenName:"strong",parseMarkdown:(t,e)=>e.applyMark("bold",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`**${e.renderChildren(t)}**`,addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Dl({find:O5,type:this.type}),Dl({find:z5,type:this.type})]},addPasteRules(){return[Es({find:N5,type:this.type}),Es({find:R5,type:this.type})]}}),L5=/(^|[^`])`([^`]+)`(?!`)$/,B5=/(^|[^`])`([^`]+)`(?!`)/g,I5=As.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",$t(this.options.HTMLAttributes,t),0]},markdownTokenName:"codespan",parseMarkdown:(t,e)=>e.applyMark("code",[{type:"text",text:t.text||""}]),renderMarkdown:(t,e)=>t.content?`\`${e.renderChildren(t.content)}\``:"",addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Dl({find:L5,type:this.type})]},addPasteRules(){return[Es({find:B5,type:this.type})]}}),om=4,H5=/^```([a-z]+)?[\s\n]$/,U5=/^~~~([a-z]+)?[\s\n]$/,q5=Qn.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:om,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options;if(!n)return null;const l=[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(c=>c.startsWith(n)).map(c=>c.replace(n,""))[0];return l||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",$t(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(t,e)=>{var n;return((n=t.raw)==null?void 0:n.startsWith("```"))===!1&&t.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:t.lang||null},t.text?[e.createTextNode(t.text)]:[])},renderMarkdown:(t,e)=>{var n;let i="";const s=((n=t.attrs)==null?void 0:n.language)||"";return t.content?i=[`\`\`\`${s}`,e.renderChildren(t.content),"```"].join(`
`):i=`\`\`\`${s}

\`\`\``,i},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:om,{state:i}=t,{selection:s}=i,{$from:l,empty:c}=s;if(l.parent.type!==this.type)return!1;const u=" ".repeat(n);return c?t.commands.insertContent(u):t.commands.command(({tr:d})=>{const{from:p,to:y}=s,x=i.doc.textBetween(p,y,`
`,`
`).split(`
`).map(k=>u+k).join(`
`);return d.replaceWith(p,y,i.schema.text(x)),!0})},"Shift-Tab":({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:om,{state:i}=t,{selection:s}=i,{$from:l,empty:c}=s;return l.parent.type!==this.type?!1:c?t.commands.command(({tr:u})=>{var d;const{pos:p}=l,y=l.start(),b=l.end(),x=i.doc.textBetween(y,b,`
`,`
`).split(`
`);let k=0,C=0;const E=p-y;for(let W=0;W<x.length;W+=1){if(C+x[W].length>=E){k=W;break}C+=x[W].length+1}const _=((d=x[k].match(/^ */))==null?void 0:d[0])||"",N=Math.min(_.length,n);if(N===0)return!0;let B=y;for(let W=0;W<k;W+=1)B+=x[W].length+1;return u.delete(B,B+N),p-B<=N&&u.setSelection(_e.create(u.doc,B)),!0}):t.commands.command(({tr:u})=>{const{from:d,to:p}=s,v=i.doc.textBetween(d,p,`
`,`
`).split(`
`).map(x=>{var k;const C=((k=x.match(/^ */))==null?void 0:k[0])||"",E=Math.min(C.length,n);return x.slice(E)}).join(`
`);return u.replaceWith(d,p,i.schema.text(v)),!0})},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:i,empty:s}=n;if(!s||i.parent.type!==this.type)return!1;const l=i.parentOffset===i.parent.nodeSize-2,c=i.parent.textContent.endsWith(`

`);return!l||!c?!1:t.chain().command(({tr:u})=>(u.delete(i.pos-2,i.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:i}=e,{$from:s,empty:l}=n;if(!l||s.parent.type!==this.type||!(s.parentOffset===s.parent.nodeSize-2))return!1;const u=s.after();return u===void 0?!1:i.nodeAt(u)?t.commands.command(({tr:p})=>(p.setSelection(Ue.near(i.resolve(u))),!0)):t.commands.exitCode()}}},addInputRules(){return[Rm({find:H5,type:this.type,getAttributes:t=>({language:t[1]})}),Rm({find:U5,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new At({key:new Jt("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),i=e.clipboardData.getData("vscode-editor-data"),s=i?JSON.parse(i):void 0,l=s?.mode;if(!n||!l)return!1;const{tr:c,schema:u}=t.state,d=u.text(n.replace(/\r\n?/g,`
`));return c.replaceSelectionWith(this.type.create({language:l},d)),c.selection.$from.parent.type!==this.type&&c.setSelection(_e.near(c.doc.resolve(Math.max(0,c.selection.from-2)))),c.setMeta("paste",!0),t.dispatch(c),!0}}})]}}),V5=Qn.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`

`):""}),P5=Qn.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",$t(this.options.HTMLAttributes,t)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:i})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:s,storedMarks:l}=n;if(s.$from.parent.type.spec.isolating)return!1;const{keepMarks:c}=this.options,{splittableMarks:u}=i.extensionManager,d=l||s.$to.parentOffset&&s.$from.marks();return e().insertContent({type:this.name}).command(({tr:p,dispatch:y})=>{if(y&&d&&c){const b=d.filter(v=>u.includes(v.type.name));p.ensureMarks(b)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),W5=Qn.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,$t(this.options.HTMLAttributes,e),0]},parseMarkdown:(t,e)=>e.createNode("heading",{level:t.depth||1},e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>{var n;const i=(n=t.attrs)!=null&&n.level?parseInt(t.attrs.level,10):1,s="#".repeat(i);return t.content?`${s} ${e.renderChildren(t.content)}`:""},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>Rm({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),F5=Qn.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",$t(this.options.HTMLAttributes,t)]},markdownTokenName:"hr",parseMarkdown:(t,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!A3(e,e.schema.nodes[this.name]))return!1;const{selection:n}=e,{$to:i}=n,s=t();return _2(n)?s.insertContentAt(i.pos,{type:this.name}):s.insertContent({type:this.name}),s.command(({state:l,tr:c,dispatch:u})=>{if(u){const{$to:d}=c.selection,p=d.end();if(d.nodeAfter)d.nodeAfter.isTextblock?c.setSelection(_e.create(c.doc,d.pos+1)):d.nodeAfter.isBlock?c.setSelection(Ce.create(c.doc,d.pos)):c.setSelection(_e.create(c.doc,d.pos));else{const y=l.schema.nodes[this.options.nextNodeType]||d.parent.type.contentMatch.defaultType,b=y?.create();b&&(c.insert(p,b),c.setSelection(_e.create(c.doc,p+1)))}c.scrollIntoView()}return!0}).run()}}},addInputRules(){return[M3({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),G5=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,$5=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,Y5=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,K5=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,Q5=As.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",$t(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(t,e)=>e.applyMark("italic",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`*${e.renderChildren(t)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Dl({find:G5,type:this.type}),Dl({find:Y5,type:this.type})]},addPasteRules(){return[Es({find:$5,type:this.type}),Es({find:K5,type:this.type})]}}),J5=Object.defineProperty,X5=(t,e)=>{for(var n in e)J5(t,n,{get:e[n],enumerable:!0})},Z5="listItem",cx="textStyle",ux=/^\s*([-+*])\s$/,fk=Qn.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",$t(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>t.type!=="list"||t.ordered?[]:{type:"bulletList",content:t.items?e.parseChildren(t.items):[]},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(Z5,this.editor.getAttributes(cx)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=Ll({find:ux,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Ll({find:ux,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(cx),editor:this.editor})),[t]}}),dk=Qn.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",$t(this.options.HTMLAttributes,t),0]},markdownTokenName:"list_item",parseMarkdown:(t,e)=>{if(t.type!=="list_item")return[];let n=[];if(t.tokens&&t.tokens.length>0)if(t.tokens.some(s=>s.type==="paragraph"))n=e.parseChildren(t.tokens);else{const s=t.tokens[0];if(s&&s.type==="text"&&s.tokens&&s.tokens.length>0){if(n=[{type:"paragraph",content:e.parseInline(s.tokens)}],t.tokens.length>1){const c=t.tokens.slice(1),u=e.parseChildren(c);n.push(...u)}}else n=e.parseChildren(t.tokens)}return n.length===0&&(n=[{type:"paragraph",content:[]}]),{type:"listItem",content:n}},renderMarkdown:(t,e,n)=>wg(t,e,i=>i.parentType==="bulletList"?"- ":i.parentType==="orderedList"?`${i.index+1}. `:"- ",n),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),ez={};X5(ez,{findListItemPos:()=>bc,getNextListDepth:()=>Ug,handleBackspace:()=>Fm,handleDelete:()=>Gm,hasListBefore:()=>hk,hasListItemAfter:()=>tz,hasListItemBefore:()=>pk,listItemHasSubList:()=>mk,nextListIsDeeper:()=>gk,nextListIsHigher:()=>yk});var bc=(t,e)=>{const{$from:n}=e.selection,i=Gt(t,e.schema);let s=null,l=n.depth,c=n.pos,u=null;for(;l>0&&u===null;)s=n.node(l),s.type===i?u=l:(l-=1,c-=1);return u===null?null:{$pos:e.doc.resolve(c),depth:u}},Ug=(t,e)=>{const n=bc(t,e);if(!n)return!1;const[,i]=IO(e,t,n.$pos.pos+4);return i},hk=(t,e,n)=>{const{$anchor:i}=t.selection,s=Math.max(0,i.pos-2),l=t.doc.resolve(s).node();return!(!l||!n.includes(l.type.name))},pk=(t,e)=>{var n;const{$anchor:i}=e.selection,s=e.doc.resolve(i.pos-2);return!(s.index()===0||((n=s.nodeBefore)==null?void 0:n.type.name)!==t)},mk=(t,e,n)=>{if(!n)return!1;const i=Gt(t,e.schema);let s=!1;return n.descendants(l=>{l.type===i&&(s=!0)}),s},Fm=(t,e,n)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!jo(t.state,e)&&hk(t.state,e,n)){const{$anchor:u}=t.state.selection,d=t.state.doc.resolve(u.before()-1),p=[];d.node().descendants((v,x)=>{v.type.name===e&&p.push({node:v,pos:x})});const y=p.at(-1);if(!y)return!1;const b=t.state.doc.resolve(d.start()+y.pos+1);return t.chain().cut({from:u.start()-1,to:u.end()+1},b.end()).joinForward().run()}if(!jo(t.state,e)||!VO(t.state))return!1;const i=bc(e,t.state);if(!i)return!1;const l=t.state.doc.resolve(i.$pos.pos-2).node(i.depth),c=mk(e,t.state,l);return pk(e,t.state)&&!c?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},gk=(t,e)=>{const n=Ug(t,e),i=bc(t,e);return!i||!n?!1:n>i.depth},yk=(t,e)=>{const n=Ug(t,e),i=bc(t,e);return!i||!n?!1:n<i.depth},Gm=(t,e)=>{if(!jo(t.state,e)||!qO(t.state,e))return!1;const{selection:n}=t.state,{$from:i,$to:s}=n;return!n.empty&&i.sameParent(s)?!1:gk(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():yk(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},tz=(t,e)=>{var n;const{$anchor:i}=e.selection,s=e.doc.resolve(i.pos-i.parentOffset-2);return!(s.index()===s.parent.childCount-1||((n=s.nodeAfter)==null?void 0:n.type.name)!==t)},bk=Bt.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&Gm(t,n)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&Gm(t,n)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:i})=>{t.state.schema.nodes[n]!==void 0&&Fm(t,n,i)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:i})=>{t.state.schema.nodes[n]!==void 0&&Fm(t,n,i)&&(e=!0)}),e}}}}),fx=/^(\s*)(\d+)\.\s+(.*)$/,nz=/^\s/;function rz(t){const e=[];let n=0,i=0;for(;n<t.length;){const s=t[n],l=s.match(fx);if(!l)break;const[,c,u,d]=l,p=c.length;let y=d,b=n+1;const v=[s];for(;b<t.length;){const x=t[b];if(x.match(fx))break;if(x.trim()==="")v.push(x),y+=`
`,b+=1;else if(x.match(nz))v.push(x),y+=`
${x.slice(p+2)}`,b+=1;else break}e.push({indent:p,number:parseInt(u,10),content:y.trim(),raw:v.join(`
`)}),i=b,n=b}return[e,i]}function vk(t,e,n){var i;const s=[];let l=0;for(;l<t.length;){const c=t[l];if(c.indent===e){const u=c.content.split(`
`),d=((i=u[0])==null?void 0:i.trim())||"",p=[];d&&p.push({type:"paragraph",raw:d,tokens:n.inlineTokens(d)});const y=u.slice(1).join(`
`).trim();if(y){const x=n.blockTokens(y);p.push(...x)}let b=l+1;const v=[];for(;b<t.length&&t[b].indent>e;)v.push(t[b]),b+=1;if(v.length>0){const x=Math.min(...v.map(C=>C.indent)),k=vk(v,x,n);p.push({type:"list",ordered:!0,start:v[0].number,items:k,raw:v.map(C=>C.raw).join(`
`)})}s.push({type:"list_item",raw:c.raw,tokens:p}),l=b}else l+=1}return s}function iz(t,e){return t.map(n=>{if(n.type!=="list_item")return e.parseChildren([n])[0];const i=[];return n.tokens&&n.tokens.length>0&&n.tokens.forEach(s=>{if(s.type==="paragraph"||s.type==="list"||s.type==="blockquote"||s.type==="code")i.push(...e.parseChildren([s]));else if(s.type==="text"&&s.tokens){const l=e.parseChildren([s]);i.push({type:"paragraph",content:l})}else{const l=e.parseChildren([s]);l.length>0&&i.push(...l)}}),{type:"listItem",content:i}})}var oz="listItem",dx="textStyle",hx=/^(\d+)\.\s$/,xk=Qn.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",$t(this.options.HTMLAttributes,n),0]:["ol",$t(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>{if(t.type!=="list"||!t.ordered)return[];const n=t.start||1,i=t.items?iz(t.items,e):[];return n!==1?{type:"orderedList",attrs:{start:n},content:i}:{type:"orderedList",content:i}},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:t=>{const e=t.match(/^(\s*)(\d+)\.\s+/),n=e?.index;return n!==void 0?n:-1},tokenize:(t,e,n)=>{var i;const s=t.split(`
`),[l,c]=rz(s);if(l.length===0)return;const u=vk(l,0,n);return u.length===0?void 0:{type:"list",ordered:!0,start:((i=l[0])==null?void 0:i.number)||1,items:u,raw:s.slice(0,c).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(oz,this.editor.getAttributes(dx)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=Ll({find:hx,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=Ll({find:hx,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(dx)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),sz=/^\s*(\[([( |x])?\])\s$/,lz=Qn.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",$t(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(t,e)=>{const n=[];if(t.tokens&&t.tokens.length>0?n.push(e.createNode("paragraph",{},e.parseInline(t.tokens))):t.text?n.push(e.createNode("paragraph",{},[e.createNode("text",{text:t.text})])):n.push(e.createNode("paragraph",{},[])),t.nestedTokens&&t.nestedTokens.length>0){const i=e.parseChildren(t.nestedTokens);n.push(...i)}return e.createNode("taskItem",{checked:t.checked||!1},n)},renderMarkdown:(t,e)=>{var n;const s=`- [${(n=t.attrs)!=null&&n.checked?"x":" "}] `;return wg(t,e,s)},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:n,editor:i})=>{const s=document.createElement("li"),l=document.createElement("label"),c=document.createElement("span"),u=document.createElement("input"),d=document.createElement("div"),p=b=>{var v,x;u.ariaLabel=((x=(v=this.options.a11y)==null?void 0:v.checkboxLabel)==null?void 0:x.call(v,b,u.checked))||`Task item checkbox for ${b.textContent||"empty task item"}`};p(t),l.contentEditable="false",u.type="checkbox",u.addEventListener("mousedown",b=>b.preventDefault()),u.addEventListener("change",b=>{if(!i.isEditable&&!this.options.onReadOnlyChecked){u.checked=!u.checked;return}const{checked:v}=b.target;i.isEditable&&typeof n=="function"&&i.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:x})=>{const k=n();if(typeof k!="number")return!1;const C=x.doc.nodeAt(k);return x.setNodeMarkup(k,void 0,{...C?.attrs,checked:v}),!0}).run(),!i.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,v)||(u.checked=!u.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([b,v])=>{s.setAttribute(b,v)}),s.dataset.checked=t.attrs.checked,u.checked=t.attrs.checked,l.append(u,c),s.append(l,d),Object.entries(e).forEach(([b,v])=>{s.setAttribute(b,v)});let y=new Set(Object.keys(e));return{dom:s,contentDOM:d,update:b=>{if(b.type!==this.type)return!1;s.dataset.checked=b.attrs.checked,u.checked=b.attrs.checked,p(b);const v=i.extensionManager.attributes,x=fc(b,v),k=new Set(Object.keys(x)),C=this.options.HTMLAttributes;return y.forEach(E=>{k.has(E)||(E in C?s.setAttribute(E,C[E]):s.removeAttribute(E))}),Object.entries(x).forEach(([E,M])=>{M==null?E in C?s.setAttribute(E,C[E]):s.removeAttribute(E):s.setAttribute(E,M)}),y=k,!0}}}},addInputRules(){return[Ll({find:sz,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),az=Qn.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",$t(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},parseMarkdown:(t,e)=>e.createNode("taskList",{},e.parseChildren(t.items||[])),renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(t){var e;const n=(e=t.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return n!==void 0?n:-1},tokenize(t,e,n){const i=l=>{const c=Dm(l,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:u=>({indentLevel:u[1].length,mainContent:u[4],checked:u[3].toLowerCase()==="x"}),createToken:(u,d)=>({type:"taskItem",raw:"",mainContent:u.mainContent,indentLevel:u.indentLevel,checked:u.checked,text:u.mainContent,tokens:n.inlineTokens(u.mainContent),nestedTokens:d}),customNestedParser:i},n);return c?[{type:"taskList",raw:c.raw,items:c.items}]:n.blockTokens(l)},s=Dm(t,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:l=>({indentLevel:l[1].length,mainContent:l[4],checked:l[3].toLowerCase()==="x"}),createToken:(l,c)=>({type:"taskItem",raw:"",mainContent:l.mainContent,indentLevel:l.indentLevel,checked:l.checked,text:l.mainContent,tokens:n.inlineTokens(l.mainContent),nestedTokens:c}),customNestedParser:i},n);if(s)return{type:"taskList",raw:s.raw,items:s.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});Bt.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push(fk.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push(dk.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(bk.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push(xk.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push(lz.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push(az.configure(this.options.taskList)),t}});var cz=Qn.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",$t(this.options.HTMLAttributes,t),0]},parseMarkdown:(t,e)=>{const n=t.tokens||[];return n.length===1&&n[0].type==="image"?e.parseChildren([n[0]]):e.createNode("paragraph",void 0,e.parseInline(n))},renderMarkdown:(t,e)=>!t||!Array.isArray(t.content)?"":e.renderChildren(t.content),addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),uz=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,fz=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,dz=As.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",$t(this.options.HTMLAttributes,t),0]},markdownTokenName:"del",parseMarkdown:(t,e)=>e.applyMark("strike",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`~~${e.renderChildren(t)}~~`,addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Dl({find:uz,type:this.type})]},addPasteRules(){return[Es({find:fz,type:this.type})]}}),hz=Qn.create({name:"text",group:"inline",parseMarkdown:t=>({type:"text",text:t.text||""}),renderMarkdown:t=>t.text||""}),pz=As.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",$t(this.options.HTMLAttributes,t),0]},parseMarkdown(t,e){return e.applyMark(this.name||"underline",e.parseInline(t.tokens||[]))},renderMarkdown(t,e){return`++${e.renderChildren(t)}++`},markdownTokenizer:{name:"underline",level:"inline",start(t){return t.indexOf("++")},tokenize(t,e,n){const s=/^(\+\+)([\s\S]+?)(\+\+)/.exec(t);if(!s)return;const l=s[2].trim();return{type:"underline",raw:s[0],text:l,tokens:n.inlineTokens(l)}}},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function mz(t={}){return new At({view(e){return new gz(e,t)}})}class gz{constructor(e,n){var i;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(i=n.width)!==null&&i!==void 0?i:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(s=>{let l=c=>{this[s](c)};return e.dom.addEventListener(s,l),{name:s,handler:l}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,i,s=this.editorView.dom,l=s.getBoundingClientRect(),c=l.width/s.offsetWidth,u=l.height/s.offsetHeight;if(n){let b=e.nodeBefore,v=e.nodeAfter;if(b||v){let x=this.editorView.nodeDOM(this.cursorPos-(b?b.nodeSize:0));if(x){let k=x.getBoundingClientRect(),C=b?k.bottom:k.top;b&&v&&(C=(C+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let E=this.width/2*u;i={left:k.left,right:k.right,top:C-E,bottom:C+E}}}}if(!i){let b=this.editorView.coordsAtPos(this.cursorPos),v=this.width/2*c;i={left:b.left-v,right:b.left+v,top:b.top,bottom:b.bottom}}let d=this.editorView.dom.offsetParent;this.element||(this.element=d.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let p,y;if(!d||d==document.body&&getComputedStyle(d).position=="static")p=-pageXOffset,y=-pageYOffset;else{let b=d.getBoundingClientRect(),v=b.width/d.offsetWidth,x=b.height/d.offsetHeight;p=b.left-d.scrollLeft*v,y=b.top-d.scrollTop*x}this.element.style.left=(i.left-p)/c+"px",this.element.style.top=(i.top-y)/u+"px",this.element.style.width=(i.right-i.left)/c+"px",this.element.style.height=(i.bottom-i.top)/u+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),i=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),s=i&&i.type.spec.disableDropCursor,l=typeof s=="function"?s(this.editorView,n,e):s;if(n&&!l){let c=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let u=dS(this.editorView.state.doc,c,this.editorView.dragging.slice);u!=null&&(c=u)}this.setCursor(c),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class zt extends Ue{constructor(e){super(e,e)}map(e,n){let i=e.resolve(n.map(this.head));return zt.valid(i)?new zt(i):Ue.near(i)}content(){return ae.empty}eq(e){return e instanceof zt&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new zt(e.resolve(n.pos))}getBookmark(){return new qg(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!yz(e)||!bz(e))return!1;let i=n.type.spec.allowGapCursor;if(i!=null)return i;let s=n.contentMatchAt(e.index()).defaultType;return s&&s.isTextblock}static findGapCursorFrom(e,n,i=!1){e:for(;;){if(!i&&zt.valid(e))return e;let s=e.pos,l=null;for(let c=e.depth;;c--){let u=e.node(c);if(n>0?e.indexAfter(c)<u.childCount:e.index(c)>0){l=u.child(n>0?e.indexAfter(c):e.index(c)-1);break}else if(c==0)return null;s+=n;let d=e.doc.resolve(s);if(zt.valid(d))return d}for(;;){let c=n>0?l.firstChild:l.lastChild;if(!c){if(l.isAtom&&!l.isText&&!Ce.isSelectable(l)){e=e.doc.resolve(s+l.nodeSize*n),i=!1;continue e}break}l=c,s+=n;let u=e.doc.resolve(s);if(zt.valid(u))return u}return null}}}zt.prototype.visible=!1;zt.findFrom=zt.findGapCursorFrom;Ue.jsonID("gapcursor",zt);class qg{constructor(e){this.pos=e}map(e){return new qg(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return zt.valid(n)?new zt(n):Ue.near(n)}}function Sk(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function yz(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),i=t.node(e);if(n==0){if(i.type.spec.isolating)return!0;continue}for(let s=i.child(n-1);;s=s.lastChild){if(s.childCount==0&&!s.inlineContent||Sk(s.type))return!0;if(s.inlineContent)return!1}}return!0}function bz(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),i=t.node(e);if(n==i.childCount){if(i.type.spec.isolating)return!0;continue}for(let s=i.child(n);;s=s.firstChild){if(s.childCount==0&&!s.inlineContent||Sk(s.type))return!0;if(s.inlineContent)return!1}}return!0}function vz(){return new At({props:{decorations:Cz,createSelectionBetween(t,e,n){return e.pos==n.pos&&zt.valid(n)?new zt(n):null},handleClick:Sz,handleKeyDown:xz,handleDOMEvents:{beforeinput:kz}}})}const xz=h2({ArrowLeft:Xu("horiz",-1),ArrowRight:Xu("horiz",1),ArrowUp:Xu("vert",-1),ArrowDown:Xu("vert",1)});function Xu(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(i,s,l){let c=i.selection,u=e>0?c.$to:c.$from,d=c.empty;if(c instanceof _e){if(!l.endOfTextblock(n)||u.depth==0)return!1;d=!1,u=i.doc.resolve(e>0?u.after():u.before())}let p=zt.findGapCursorFrom(u,e,d);return p?(s&&s(i.tr.setSelection(new zt(p))),!0):!1}}function Sz(t,e,n){if(!t||!t.editable)return!1;let i=t.state.doc.resolve(e);if(!zt.valid(i))return!1;let s=t.posAtCoords({left:n.clientX,top:n.clientY});return s&&s.inside>-1&&Ce.isSelectable(t.state.doc.nodeAt(s.inside))?!1:(t.dispatch(t.state.tr.setSelection(new zt(i))),!0)}function kz(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof zt))return!1;let{$from:n}=t.state.selection,i=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!i)return!1;let s=J.empty;for(let c=i.length-1;c>=0;c--)s=J.from(i[c].createAndFill(null,s));let l=t.state.tr.replace(n.pos,n.pos,new ae(s,0,0));return l.setSelection(_e.near(l.doc.resolve(n.pos+1))),t.dispatch(l),!1}function Cz(t){if(!(t.selection instanceof zt))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",Mt.create(t.doc,[Tn.widget(t.selection.head,e,{key:"gapcursor"})])}var ed=200,on=function(){};on.prototype.append=function(e){return e.length?(e=on.from(e),!this.length&&e||e.length<ed&&this.leafAppend(e)||this.length<ed&&e.leafPrepend(this)||this.appendInner(e)):this};on.prototype.prepend=function(e){return e.length?on.from(e).append(this):this};on.prototype.appendInner=function(e){return new Ez(this,e)};on.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?on.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};on.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};on.prototype.forEach=function(e,n,i){n===void 0&&(n=0),i===void 0&&(i=this.length),n<=i?this.forEachInner(e,n,i,0):this.forEachInvertedInner(e,n,i,0)};on.prototype.map=function(e,n,i){n===void 0&&(n=0),i===void 0&&(i=this.length);var s=[];return this.forEach(function(l,c){return s.push(e(l,c))},n,i),s};on.from=function(e){return e instanceof on?e:e&&e.length?new kk(e):on.empty};var kk=(function(t){function e(i){t.call(this),this.values=i}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(s,l){return s==0&&l==this.length?this:new e(this.values.slice(s,l))},e.prototype.getInner=function(s){return this.values[s]},e.prototype.forEachInner=function(s,l,c,u){for(var d=l;d<c;d++)if(s(this.values[d],u+d)===!1)return!1},e.prototype.forEachInvertedInner=function(s,l,c,u){for(var d=l-1;d>=c;d--)if(s(this.values[d],u+d)===!1)return!1},e.prototype.leafAppend=function(s){if(this.length+s.length<=ed)return new e(this.values.concat(s.flatten()))},e.prototype.leafPrepend=function(s){if(this.length+s.length<=ed)return new e(s.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e})(on);on.empty=new kk([]);var Ez=(function(t){function e(n,i){t.call(this),this.left=n,this.right=i,this.length=n.length+i.length,this.depth=Math.max(n.depth,i.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(i){return i<this.left.length?this.left.get(i):this.right.get(i-this.left.length)},e.prototype.forEachInner=function(i,s,l,c){var u=this.left.length;if(s<u&&this.left.forEachInner(i,s,Math.min(l,u),c)===!1||l>u&&this.right.forEachInner(i,Math.max(s-u,0),Math.min(this.length,l)-u,c+u)===!1)return!1},e.prototype.forEachInvertedInner=function(i,s,l,c){var u=this.left.length;if(s>u&&this.right.forEachInvertedInner(i,s-u,Math.max(l,u)-u,c+u)===!1||l<u&&this.left.forEachInvertedInner(i,Math.min(s,u),l,c)===!1)return!1},e.prototype.sliceInner=function(i,s){if(i==0&&s==this.length)return this;var l=this.left.length;return s<=l?this.left.slice(i,s):i>=l?this.right.slice(i-l,s-l):this.left.slice(i,l).append(this.right.slice(0,s-l))},e.prototype.leafAppend=function(i){var s=this.right.leafAppend(i);if(s)return new e(this.left,s)},e.prototype.leafPrepend=function(i){var s=this.left.leafPrepend(i);if(s)return new e(s,this.right)},e.prototype.appendInner=function(i){return this.left.depth>=Math.max(this.right.depth,i.depth)+1?new e(this.left,new e(this.right,i)):new e(this,i)},e})(on);const wz=500;class wr{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let i=this.items.length;for(;;i--)if(this.items.get(i-1).selection){--i;break}let s,l;n&&(s=this.remapping(i,this.items.length),l=s.maps.length);let c=e.tr,u,d,p=[],y=[];return this.items.forEach((b,v)=>{if(!b.step){s||(s=this.remapping(i,v+1),l=s.maps.length),l--,y.push(b);return}if(s){y.push(new Wr(b.map));let x=b.step.map(s.slice(l)),k;x&&c.maybeStep(x).doc&&(k=c.mapping.maps[c.mapping.maps.length-1],p.push(new Wr(k,void 0,void 0,p.length+y.length))),l--,k&&s.appendMap(k,l)}else c.maybeStep(b.step);if(b.selection)return u=s?b.selection.map(s.slice(l)):b.selection,d=new wr(this.items.slice(0,i).append(y.reverse().concat(p)),this.eventCount-1),!1},this.items.length,0),{remaining:d,transform:c,selection:u}}addTransform(e,n,i,s){let l=[],c=this.eventCount,u=this.items,d=!s&&u.length?u.get(u.length-1):null;for(let y=0;y<e.steps.length;y++){let b=e.steps[y].invert(e.docs[y]),v=new Wr(e.mapping.maps[y],b,n),x;(x=d&&d.merge(v))&&(v=x,y?l.pop():u=u.slice(0,u.length-1)),l.push(v),n&&(c++,n=void 0),s||(d=v)}let p=c-i.depth;return p>Mz&&(u=Tz(u,p),c-=p),new wr(u.append(l),c)}remapping(e,n){let i=new oc;return this.items.forEach((s,l)=>{let c=s.mirrorOffset!=null&&l-s.mirrorOffset>=e?i.maps.length-s.mirrorOffset:void 0;i.appendMap(s.map,c)},e,n),i}addMaps(e){return this.eventCount==0?this:new wr(this.items.append(e.map(n=>new Wr(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let i=[],s=Math.max(0,this.items.length-n),l=e.mapping,c=e.steps.length,u=this.eventCount;this.items.forEach(v=>{v.selection&&u--},s);let d=n;this.items.forEach(v=>{let x=l.getMirror(--d);if(x==null)return;c=Math.min(c,x);let k=l.maps[x];if(v.step){let C=e.steps[x].invert(e.docs[x]),E=v.selection&&v.selection.map(l.slice(d+1,x));E&&u++,i.push(new Wr(k,C,E))}else i.push(new Wr(k))},s);let p=[];for(let v=n;v<c;v++)p.push(new Wr(l.maps[v]));let y=this.items.slice(0,s).append(p).append(i),b=new wr(y,u);return b.emptyItemCount()>wz&&(b=b.compress(this.items.length-i.length)),b}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),i=n.maps.length,s=[],l=0;return this.items.forEach((c,u)=>{if(u>=e)s.push(c),c.selection&&l++;else if(c.step){let d=c.step.map(n.slice(i)),p=d&&d.getMap();if(i--,p&&n.appendMap(p,i),d){let y=c.selection&&c.selection.map(n.slice(i));y&&l++;let b=new Wr(p.invert(),d,y),v,x=s.length-1;(v=s.length&&s[x].merge(b))?s[x]=v:s.push(b)}}else c.map&&i--},this.items.length,0),new wr(on.from(s.reverse()),l)}}wr.empty=new wr(on.empty,0);function Tz(t,e){let n;return t.forEach((i,s)=>{if(i.selection&&e--==0)return n=s,!1}),t.slice(n)}class Wr{constructor(e,n,i,s){this.map=e,this.step=n,this.selection=i,this.mirrorOffset=s}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new Wr(n.getMap().invert(),n,this.selection)}}}class yo{constructor(e,n,i,s,l){this.done=e,this.undone=n,this.prevRanges=i,this.prevTime=s,this.prevComposition=l}}const Mz=20;function Az(t,e,n,i){let s=n.getMeta(bs),l;if(s)return s.historyState;n.getMeta(Oz)&&(t=new yo(t.done,t.undone,null,0,-1));let c=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(c&&c.getMeta(bs))return c.getMeta(bs).redo?new yo(t.done.addTransform(n,void 0,i,sf(e)),t.undone,px(n.mapping.maps),t.prevTime,t.prevComposition):new yo(t.done,t.undone.addTransform(n,void 0,i,sf(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(c&&c.getMeta("addToHistory")===!1)){let u=n.getMeta("composition"),d=t.prevTime==0||!c&&t.prevComposition!=u&&(t.prevTime<(n.time||0)-i.newGroupDelay||!_z(n,t.prevRanges)),p=c?sm(t.prevRanges,n.mapping):px(n.mapping.maps);return new yo(t.done.addTransform(n,d?e.selection.getBookmark():void 0,i,sf(e)),wr.empty,p,n.time,u??t.prevComposition)}else return(l=n.getMeta("rebased"))?new yo(t.done.rebased(n,l),t.undone.rebased(n,l),sm(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new yo(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),sm(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function _z(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((i,s)=>{for(let l=0;l<e.length;l+=2)i<=e[l+1]&&s>=e[l]&&(n=!0)}),n}function px(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((i,s,l,c)=>e.push(l,c));return e}function sm(t,e){if(!t)return null;let n=[];for(let i=0;i<t.length;i+=2){let s=e.map(t[i],1),l=e.map(t[i+1],-1);s<=l&&n.push(s,l)}return n}function jz(t,e,n){let i=sf(e),s=bs.get(e).spec.config,l=(n?t.undone:t.done).popEvent(e,i);if(!l)return null;let c=l.selection.resolve(l.transform.doc),u=(n?t.done:t.undone).addTransform(l.transform,e.selection.getBookmark(),s,i),d=new yo(n?u:l.remaining,n?l.remaining:u,null,0,-1);return l.transform.setSelection(c).setMeta(bs,{redo:n,historyState:d})}let lm=!1,mx=null;function sf(t){let e=t.plugins;if(mx!=e){lm=!1,mx=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){lm=!0;break}}return lm}const bs=new Jt("history"),Oz=new Jt("closeHistory");function Nz(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new At({key:bs,state:{init(){return new yo(wr.empty,wr.empty,null,0,-1)},apply(e,n,i){return Az(n,i,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let i=n.inputType,s=i=="historyUndo"?Ek:i=="historyRedo"?wk:null;return!s||!e.editable?!1:(n.preventDefault(),s(e.state,e.dispatch))}}}})}function Ck(t,e){return(n,i)=>{let s=bs.getState(n);if(!s||(t?s.undone:s.done).eventCount==0)return!1;if(i){let l=jz(s,n,t);l&&i(e?l.scrollIntoView():l)}return!0}}const Ek=Ck(!1,!0),wk=Ck(!0,!0);Bt.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=t?.node||this.editor.state.doc;if((t?.mode||this.options.mode)==="textSize"){const i=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(i)}return e.nodeSize},this.storage.words=t=>{const e=t?.node||this.editor.state.doc,n=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let t=!1;return[new At({key:new Jt("characterCount"),appendTransaction:(e,n,i)=>{if(t)return;const s=this.options.limit;if(s==null||s===0){t=!0;return}const l=this.storage.characters({node:i.doc});if(l>s){const c=l-s,u=0,d=c;console.warn(`[CharacterCount] Initial content exceeded limit of ${s} characters. Content was automatically trimmed.`);const p=i.tr.deleteRange(u,d);return t=!0,p}t=!0},filterTransaction:(e,n)=>{const i=this.options.limit;if(!e.docChanged||i===0||i===null||i===void 0)return!0;const s=this.storage.characters({node:n.doc}),l=this.storage.characters({node:e.doc});if(l<=i||s>i&&l>i&&l<=s)return!0;if(s>i&&l>i&&l>s||!e.getMeta("paste"))return!1;const u=e.selection.$head.pos,d=l-i,p=u-d,y=u;return e.deleteRange(p,y),!(this.storage.characters({node:e.doc})>i)}})]}});var zz=Bt.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[mz(this.options)]}});Bt.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new At({key:new Jt("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:n,isFocused:i}=this.editor,{anchor:s}=e,l=[];if(!n||!i)return Mt.create(t,[]);let c=0;this.options.mode==="deepest"&&t.descendants((d,p)=>{if(d.isText)return;if(!(s>=p&&s<=p+d.nodeSize-1))return!1;c+=1});let u=0;return t.descendants((d,p)=>{if(d.isText||!(s>=p&&s<=p+d.nodeSize-1))return!1;if(u+=1,this.options.mode==="deepest"&&c-u>0||this.options.mode==="shallowest"&&u>1)return this.options.mode==="deepest";l.push(Tn.node(p,p+d.nodeSize,{class:this.options.className}))}),Mt.create(t,l)}}})]}});var Rz=Bt.create({name:"gapCursor",addProseMirrorPlugins(){return[vz()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=ut(Se(t,"allowGapCursor",n)))!=null?e:null}}});Bt.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new At({key:new Jt("placeholder"),props:{decorations:({doc:t,selection:e})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:i}=e,s=[];if(!n)return null;const l=this.editor.isEmpty;return t.descendants((c,u)=>{const d=i>=u&&i<=u+c.nodeSize,p=!c.isLeaf&&gd(c);if((d||!this.options.showOnlyCurrent)&&p){const y=[this.options.emptyNodeClass];l&&y.push(this.options.emptyEditorClass);const b=Tn.node(u,u+c.nodeSize,{class:y.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:c,pos:u,hasAnchor:d}):this.options.placeholder});s.push(b)}return this.options.includeChildren}),Mt.create(t,s)}}})]}});Bt.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new At({key:new Jt("selection"),props:{decorations(n){return n.selection.empty||t.isFocused||!t.isEditable||_2(n.selection)||t.view.dragging?null:Mt.create(n.doc,[Tn.inline(n.selection.from,n.selection.to,{class:e.className})])}}})]}});function gx({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||e?.type===t}var Dz=Bt.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var t;const e=new Jt(this.name),n=this.options.node||((t=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:t.name)||"paragraph",i=Object.entries(this.editor.schema.nodes).map(([,s])=>s).filter(s=>(this.options.notAfter||[]).concat(n).includes(s.name));return[new At({key:e,appendTransaction:(s,l,c)=>{const{doc:u,tr:d,schema:p}=c,y=e.getState(c),b=u.content.size,v=p.nodes[n];if(y)return d.insert(b,v.create())},state:{init:(s,l)=>{const c=l.tr.doc.lastChild;return!gx({node:c,types:i})},apply:(s,l)=>{if(!s.docChanged||s.getMeta("__uniqueIDTransaction"))return l;const c=s.doc.lastChild;return!gx({node:c,types:i})}}})]}}),Lz=Bt.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>Ek(t,e),redo:()=>({state:t,dispatch:e})=>wk(t,e)}},addProseMirrorPlugins(){return[Nz(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),Bz=Bt.create({name:"starterKit",addExtensions(){var t,e,n,i;const s=[];return this.options.bold!==!1&&s.push(D5.configure(this.options.bold)),this.options.blockquote!==!1&&s.push(j5.configure(this.options.blockquote)),this.options.bulletList!==!1&&s.push(fk.configure(this.options.bulletList)),this.options.code!==!1&&s.push(I5.configure(this.options.code)),this.options.codeBlock!==!1&&s.push(q5.configure(this.options.codeBlock)),this.options.document!==!1&&s.push(V5.configure(this.options.document)),this.options.dropcursor!==!1&&s.push(zz.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&s.push(Rz.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&s.push(P5.configure(this.options.hardBreak)),this.options.heading!==!1&&s.push(W5.configure(this.options.heading)),this.options.undoRedo!==!1&&s.push(Lz.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&s.push(F5.configure(this.options.horizontalRule)),this.options.italic!==!1&&s.push(Q5.configure(this.options.italic)),this.options.listItem!==!1&&s.push(dk.configure(this.options.listItem)),this.options.listKeymap!==!1&&s.push(bk.configure((t=this.options)==null?void 0:t.listKeymap)),this.options.link!==!1&&s.push(s4.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&s.push(xk.configure(this.options.orderedList)),this.options.paragraph!==!1&&s.push(cz.configure(this.options.paragraph)),this.options.strike!==!1&&s.push(dz.configure(this.options.strike)),this.options.text!==!1&&s.push(hz.configure(this.options.text)),this.options.underline!==!1&&s.push(pz.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&s.push(Dz.configure((i=this.options)==null?void 0:i.trailingNode)),s}}),Iz=Bz;const Hz={name:"",description:"",is_world:!1,ai_prompt:"",greeting:"",tags:[],is_public:!0,photo:null,appearance:""},Ze={name:{min:5,max:100},description:{min:30,max:500},ai_prompt:{min:30,max:1e3},greeting:{min:30,max:1e3},appearance:{min:30,max:1e3},tags:{maxCount:5}};async function Uz(t){const e=new FormData;return e.append("name",t.name.trim()),e.append("description",t.description.trim()),e.append("is_world",String(t.is_world)),e.append("ai_prompt",t.ai_prompt.trim()),e.append("greeting",t.greeting.trim()),e.append("is_public",String(t.is_public)),e.append("appearance",t.appearance.trim()),t.tags.length>0&&t.tags.forEach(n=>e.append("tags",n)),t.photo&&e.append("photo",t.photo),Qw("/v1/create",e)}const Zu=7,td="create_character_draft",qz=300*1e3,yx="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;600;700&display=swap",wn={input:{input:{backgroundColor:"rgb(41, 41, 41)",color:"white",borderColor:"rgb(55, 55, 55)"},label:{color:"white",fontSize:"15px"}},card:{backgroundColor:"rgb(41, 41, 41)"},tipCard:{backgroundColor:"rgb(35, 30, 45)",border:"1px solid rgb(88, 70, 120)",boxShadow:"0 2px 8px rgba(139, 92, 246, 0.15)"},modal:{content:{backgroundColor:"rgb(28, 28, 28)"},header:{backgroundColor:"rgb(28, 28, 28)",color:"white"},body:{backgroundColor:"rgb(28, 28, 28)"},title:{color:"white",fontWeight:600},close:{color:"white"}}};function vc({children:t}){return m.jsx(En,{padding:"md",radius:"md",style:wn.tipCard,children:m.jsxs(P,{size:"sm",c:"rgb(200, 180, 230)",children:[" ",m.jsx("b",{style:{color:"rgb(180, 140, 255)"},children:":"})," ",t]})})}function Ns({children:t}){return m.jsx(P,{size:"1.5rem",fw:700,c:"white",children:t})}function Ul({children:t}){return m.jsx(P,{size:"md",c:"rgb(180, 180, 180)",children:t})}function nd({label:t,placeholder:e,value:n,onChange:i,error:s,maxLength:l,minLength:c,minRows:u,multiline:d}){const p=d?fm:Ym,y=n.trim().length,b=c&&y<c&&y>0,v=c?`${y}/${l}  (. ${c})`:`${n.length}/${l} `;return m.jsx(p,{label:t,placeholder:e,value:n,onChange:x=>i(x.target.value),error:s,maxLength:l,description:v,...d&&{minRows:u,autosize:!0},styles:{...wn.input,description:{color:b?"rgb(250, 128, 114)":"rgb(160, 160, 160)"}}})}const Vz={1:t=>{const e={},n=t.name.trim(),i=t.description.trim();return n?n.length<Ze.name.min?e.name=` ${Ze.name.min} `:n.length>Ze.name.max&&(e.name=` ${Ze.name.max} `):e.name=" ",i?i.length<Ze.description.min?e.description=` ${Ze.description.min} `:i.length>Ze.description.max&&(e.description=` ${Ze.description.max} `):e.description=" ",e},2:t=>{const e=t.appearance||"",n=e.trim();return e.length>0&&n.length===0?{appearance:" ,    "}:n&&n.length<Ze.appearance.min?{appearance:` ${Ze.appearance.min} `}:n.length>Ze.appearance.max?{appearance:` ${Ze.appearance.max} `}:{}},3:t=>{const e=t.ai_prompt.trim();return e?e.length<Ze.ai_prompt.min?{ai_prompt:` ${Ze.ai_prompt.min} `}:e.length>Ze.ai_prompt.max?{ai_prompt:` ${Ze.ai_prompt.max} `}:{}:{ai_prompt:" "}},4:t=>{const e=t.greeting.trim();return e?e.length<Ze.greeting.min?{greeting:` ${Ze.greeting.min} `}:e.length>Ze.greeting.max?{greeting:` ${Ze.greeting.max} `}:{}:{greeting:" "}},5:()=>({}),6:t=>t.photo?{}:{photo:" "}};function Pz(t,e){const{photo:n,...i}=t,s={form:i,step:e,timestamp:Date.now()};try{localStorage.setItem(td,JSON.stringify(s))}catch(l){console.error("Failed to save draft:",l)}}function Wz(){try{const t=localStorage.getItem(td);if(!t)return null;const e=JSON.parse(t);return Date.now()-e.timestamp>qz?(localStorage.removeItem(td),null):{form:e.form,step:e.step}}catch(t){return console.error("Failed to load draft:",t),null}}function Fz(){localStorage.removeItem(td)}function Gz(){const t=Bl(),[e,n]=R.useState(0),[i,s]=R.useState(Hz),[l,c]=R.useState({}),[u,d]=R.useState(!1),[p,y]=R.useState(null),[b,v]=R.useState([]),[x,k]=R.useState(!1),[C,E]=R.useState(!1),[M,_]=R.useState(!1),[N,B]=R.useState("left"),[L,W]=R.useState(!1),$=R.useMemo(()=>i.is_world?"":"",[i.is_world]),ne=R.useMemo(()=>i.is_world?"":"",[i.is_world]);R.useEffect(()=>{if(!document.querySelector(`link[href="${yx}"]`)){const xe=document.createElement("link");xe.href=yx,xe.rel="stylesheet",document.head.appendChild(xe)}},[]),R.useEffect(()=>{const xe=Wz();xe&&(s(ee=>({...ee,...xe.form})),n(xe.step),W(!0))},[]),R.useEffect(()=>{(L||i.name||i.description||i.ai_prompt||i.greeting)&&Pz(i,e)},[i,e,L]),R.useEffect(()=>{(async()=>{k(!0);try{const ee=await Lt("/v1/characters/tags");ee&&Array.isArray(ee.tags)&&v(ee.tags)}catch(ee){console.error("   :",ee)}finally{k(!1)}})()},[]);const ve=R.useCallback((xe,ee)=>{s(re=>({...re,[xe]:ee})),c(re=>({...re,[xe]:void 0}))},[]),qe=R.useCallback(()=>{const xe=Vz[e];if(!xe)return!0;const ee=xe(i);return c(ee),Object.keys(ee).length===0},[e,i]),Te=R.useCallback((xe,ee)=>{B(xe),_(!0),setTimeout(()=>{ee(),setTimeout(()=>{_(!1)},50)},150)},[]),ye=R.useCallback(()=>{(e===0||qe())&&Te("left",()=>{n(xe=>Math.min(xe+1,Zu-1))})},[e,qe,Te]),lt=R.useCallback(()=>{Te("right",()=>{n(xe=>Math.max(xe-1,0))})},[Te]),Qe=R.useCallback(xe=>{s(ee=>ee.tags.includes(xe)?{...ee,tags:ee.tags.filter(re=>re!==xe)}:ee.tags.length>=Ze.tags.maxCount?ee:{...ee,tags:[...ee.tags,xe]})},[]),Le=R.useCallback(xe=>{s(ee=>({...ee,tags:ee.tags.filter(re=>re!==xe)}))},[]),F=R.useCallback(async()=>{if(qe()){d(!0),y(null);try{const xe={...i,tags:[i.tags.join(", ")]};await Uz(xe),Fz(),i.is_public?Wt.show({title:`${i.is_world?"":""}  !`,message:"    Telegram-",color:"teal",icon:m.jsx(nc,{size:18}),autoClose:5e3,withCloseButton:!0,withBorder:!0,styles:{root:{backgroundColor:"rgb(20, 83, 45)",borderColor:"rgb(34, 197, 94)"},title:{color:"white",fontWeight:600},description:{color:"rgb(187, 247, 208)"},closeButton:{color:"white","&:hover":{backgroundColor:"rgb(22, 101, 52)"}}}}):Wt.show({title:`${i.is_world?"":""}  !`,message:"    ",color:"teal",icon:m.jsx(nc,{size:18}),autoClose:5e3,withCloseButton:!0,withBorder:!0,styles:{root:{backgroundColor:"rgb(20, 83, 45)",borderColor:"rgb(34, 197, 94)"},title:{color:"white",fontWeight:600},description:{color:"rgb(187, 247, 208)"},closeButton:{color:"white","&:hover":{backgroundColor:"rgb(22, 101, 52)"}}}}),t("/?filter=created")}catch(xe){console.error("Create character error:",xe);let ee=", -    ";if(xe instanceof Error){const re=xe.message.toLowerCase();re.includes("401")||re.includes("unauthorized")||re.includes("403")||re.includes("forbidden")?ee=`, -    
      WebApp`:re.includes("413")||re.includes("too large")?ee=`, -    
   `:re.includes("422")||re.includes("validation")?ee=`, -    
   `:re.includes("429")||re.includes("rate limit")?ee=`, -    
  ,  `:re.includes("500")||re.includes("server error")?ee=`, -    
  ,  `:(re.includes("network")||re.includes("fetch"))&&(ee=`, -    
   `)}y(ee),Wt.show({title:" ",message:ee,color:"red",icon:m.jsx(mm,{size:18}),autoClose:7e3,withCloseButton:!0,withBorder:!0,styles:{root:{backgroundColor:"rgb(127, 29, 29)",borderColor:"rgb(239, 68, 68)"},title:{color:"white",fontWeight:600},description:{color:"rgb(254, 202, 202)"},closeButton:{color:"white","&:hover":{backgroundColor:"rgb(153, 27, 27)"}}}})}finally{d(!1)}}},[i,qe,t]),X=(e+1)/Zu*100,be=e===Zu-1,we={form:i,errors:l,updateField:ve,entityName:$,entityNameGen:ne},te={transition:"all 0.15s ease-out",opacity:M?0:1,transform:M?`translateX(${N==="left"?"-20px":"20px"})`:"translateX(0)"};return m.jsxs(de,{style:{backgroundColor:"rgb(18, 18, 18)",minHeight:"100vh",fontFamily:"'Roboto', sans-serif"},children:[m.jsx(id,{}),m.jsx(de,{p:"md",children:m.jsxs(Ae,{gap:"md",children:[m.jsxs(de,{children:[m.jsxs(He,{justify:"space-between",mb:4,children:[m.jsxs(P,{size:"sm",c:"rgb(160, 160, 160)",children:[" ",e+1,"  ",Zu]}),m.jsxs(P,{size:"sm",c:"rgb(160, 160, 160)",children:[Math.round(X),"%"]})]}),m.jsx(ef,{value:X,color:"violet",size:"sm",radius:"xl"})]}),m.jsxs(de,{style:te,children:[e===0&&m.jsx($z,{...we}),e===1&&m.jsx(Yz,{...we}),e===2&&m.jsx(Kz,{...we}),e===3&&m.jsx(Qz,{...we}),e===4&&m.jsx(Jz,{...we}),e===5&&m.jsx(Xz,{...we,availableTags:b,loadingTags:x,tagsModalOpened:C,setTagsModalOpened:E,onToggleTag:Qe,onRemoveTag:Le}),e===6&&m.jsx(Zz,{...we})]}),p&&m.jsx(Qm,{color:"red",variant:"light",icon:m.jsx(mm,{size:16}),children:p}),m.jsxs(He,{justify:e===0?"flex-end":"space-between",mt:"md",children:[e!==0&&m.jsx(Pe,{variant:"subtle",color:"gray",onClick:lt,disabled:u||M,styles:{root:{transition:"none",backgroundColor:"transparent",border:"none",outline:"none",boxShadow:"none","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.1)"},"&:disabled":{backgroundColor:"transparent"},"&:focus":{outline:"none",boxShadow:"none"},"&:focus-visible":{outline:"none",boxShadow:"none"}}},children:" "}),be?m.jsx(Pe,{color:"violet",onClick:F,loading:u,disabled:u,children:u?"...":""}):m.jsx(Pe,{color:"violet",onClick:ye,disabled:M,children:" "})]})]})})]})}function $z({form:t,updateField:e}){const n=[{isWorld:!1,icon:"",title:"",desc:"AI-   ",disabled:!1},{isWorld:!0,icon:"",title:"",desc:"   ",disabled:!0}],i=t.is_world?`   
    
    `:`     
    
    `;return m.jsxs(Ae,{gap:"lg",children:[m.jsx(Ns,{children:"   ?"}),m.jsx(Ul,{children:"   .    AI-    .      ,      ."}),m.jsx(He,{gap:"md",grow:!0,style:{alignItems:"stretch"},children:n.map(({isWorld:s,icon:l,title:c,desc:u,disabled:d})=>{const p=t.is_world===s;return m.jsxs(de,{style:{position:"relative"},children:[m.jsx(En,{padding:"lg",radius:"md",style:{backgroundColor:p?"rgb(88, 28, 135)":"rgb(41, 41, 41)",cursor:d?"not-allowed":"pointer",border:p?"2px solid rgb(139, 92, 246)":"2px solid transparent",minHeight:"160px",display:"flex",flexDirection:"column",justifyContent:"center",opacity:d?.5:1,filter:d?"grayscale(0.5)":"none"},onClick:()=>!d&&e("is_world",s),children:m.jsxs(Ae,{align:"center",gap:"xs",children:[m.jsx(P,{size:"2.5rem",children:l}),m.jsx(P,{fw:700,c:"white",size:"lg",children:c}),m.jsx(P,{size:"sm",c:"rgb(180, 180, 180)",ta:"center",children:u})]})}),d&&m.jsx(Er,{size:"lg",variant:"filled",style:{position:"absolute",top:"10px",right:"10px",background:"linear-gradient(135deg, rgb(234, 179, 8) 0%, rgb(245, 158, 11) 100%)",color:"black",fontWeight:600,padding:"8px 12px",boxShadow:"0 2px 8px rgba(234, 179, 8, 0.4)"},children:"  "})]},c)})}),m.jsxs(En,{padding:"md",radius:"md",style:wn.card,children:[m.jsx(P,{size:"md",c:"white",fw:600,mb:"xs",children:t.is_world?"     :":"     :"}),m.jsx(P,{size:"md",c:"rgb(180, 180, 180)",style:{whiteSpace:"pre-line"},children:i})]})]})}function Yz({form:t,errors:e,updateField:n,entityNameGen:i}){return m.jsxs(Ae,{gap:"md",children:[m.jsx(Ns,{children:" "}),m.jsxs(de,{children:[m.jsx(En,{padding:"sm",radius:"md",style:{...wn.tipCard,marginBottom:"8px"},children:m.jsxs(P,{size:"sm",c:"rgb(200, 180, 230)",children:[m.jsx("b",{style:{color:"rgb(180, 140, 255)"},children:":"}),"             ",i,"  ."]})}),m.jsx(nd,{label:` ${i}`,placeholder:t.is_world?":   2084":": ",value:t.name,onChange:s=>n("name",s),error:e.name,maxLength:Ze.name.max,minLength:Ze.name.min})]}),m.jsxs(de,{children:[m.jsx(En,{padding:"sm",radius:"md",style:{...wn.tipCard,marginBottom:"8px"},children:m.jsxs(P,{size:"sm",c:"rgb(200, 180, 230)",children:[m.jsx("b",{style:{color:"rgb(180, 140, 255)"},children:":"}),"     (     //)   /  ."]})}),m.jsx(nd,{label:" ",placeholder:t.is_world?"  : , , ...":"  ?  ?  ?",value:t.description,onChange:s=>n("description",s),error:e.description,maxLength:Ze.description.max,minLength:Ze.description.min,multiline:!0,minRows:4})]}),m.jsxs(vc,{children:["   .   ,      ",i,"."]})]})}function Kz({form:t,errors:e,updateField:n,entityNameGen:i}){return m.jsxs(Ae,{gap:"md",children:[m.jsx(Ns,{children:" "}),m.jsxs(Ul,{children:["     ",i,".   AI        ."]}),m.jsxs(En,{padding:"sm",radius:"md",style:{...wn.tipCard,marginBottom:"8px"},children:[m.jsx(P,{size:"sm",c:"rgb(200, 180, 230)",mb:"xs",children:m.jsx("b",{style:{color:"rgb(180, 140, 255)"},children:"   ( ):"})}),m.jsxs(Ae,{gap:6,children:[m.jsxs(P,{size:"sm",c:"rgb(200, 180, 230)",children:["1. ",m.jsx("b",{children:":"})," ,     .       ."]}),m.jsxs(P,{size:"sm",c:"rgb(200, 180, 230)",children:["2. ",m.jsx("b",{children:":"}),"    (, )    ."]}),m.jsxs(P,{size:"sm",c:"rgb(200, 180, 230)",children:["3. ",m.jsx("b",{children:":"}),"   ,    (: ",m.jsx("i",{children:" , ,  "}),")."]})]})]}),m.jsx(nd,{label:"  ",placeholder:" ,    ...",value:t.appearance||"",onChange:s=>n("appearance",s),error:e.appearance,maxLength:Ze.appearance.max,minLength:Ze.appearance.min,multiline:!0,minRows:5})]})}function Qz({form:t,errors:e,updateField:n,entityName:i}){const s=Bl(),[l,c]=R.useState(!1),[u,d]=R.useState(!1),[p,y]=R.useState(""),[b,v]=R.useState(""),[x,k]=R.useState(null),[C,E]=R.useState(!1),[M,_]=R.useState(!1),N=R.useCallback(()=>{if(!t.ai_prompt.trim()){Wt.show({title:" ",message:"  ,   ",color:"yellow"});return}y(t.ai_prompt),v(""),k(null),E(!1),_(!1),c(!0)},[t.ai_prompt]),B=R.useCallback(async()=>{if(p.trim()){if(p.length>1e3){k("   ( 1000 )");return}d(!0),k(null),v(""),E(!1),_(!1);try{const $=await Lt("/v1/prompt/improve-prompt",{method:"POST",body:JSON.stringify({prompt:p})});$&&$.improved_prompt?v($.improved_prompt):k("    ")}catch($){console.error("Improve Prompt API Error:",$);const ne=$.message||"";ne.includes("403")?E(!0):ne.includes("429")?_(!0):ne.includes("422")?k(" .     "):ne.includes("404")?k("  "):ne.includes("500")?k(" .  "):k(" .  ")}finally{d(!1)}}},[p]),L=R.useCallback(()=>{b&&(n("ai_prompt",b),c(!1),Wt.show({title:" ",message:"    ",color:"teal",icon:m.jsx(nc,{size:18})}))},[b,n]),W=R.useCallback(()=>{s("/tariffs")},[s]);return m.jsxs(Ae,{gap:"md",children:[m.jsx(Ns,{children:"  AI"}),m.jsxs(Ul,{children:[",     ",i,".     AI,    ."]}),m.jsxs(de,{children:[m.jsxs(En,{padding:"sm",radius:"md",style:{...wn.tipCard,marginBottom:"8px"},children:[m.jsx(P,{size:"sm",c:"rgb(200, 180, 230)",mb:"xs",children:m.jsx("b",{style:{color:"rgb(180, 140, 255)"},children:"  ( ):"})}),m.jsxs(Ae,{gap:4,children:[m.jsxs(P,{size:"sm",c:"rgb(200, 180, 230)",children:["1. ",m.jsx("b",{children:":"})," ,     ( , , )   ."]}),m.jsxs(P,{size:"sm",c:"rgb(200, 180, 230)",children:["2. ",m.jsx("b",{children:":"}),"   ,  (/)   ."]}),m.jsxs(P,{size:"sm",c:"rgb(200, 180, 230)",children:["3. ",m.jsx("b",{children:":"}),"   ,   ."]}),m.jsxs(P,{size:"sm",c:"rgb(200, 180, 230)",children:["4. ",m.jsx("b",{children:":"})," , .  NSFW      ."]})]})]}),m.jsxs(de,{children:[m.jsx(nd,{label:"AI ",placeholder:"",value:t.ai_prompt,onChange:$=>n("ai_prompt",$),error:e.ai_prompt,maxLength:Ze.ai_prompt.max,minLength:Ze.ai_prompt.min,multiline:!0,minRows:6}),m.jsx(He,{justify:"flex-end",mt:8,children:m.jsx(Km,{label:"    AI",position:"left",children:m.jsx(Pe,{variant:"filled",size:"xs",onClick:N,style:{background:"linear-gradient(135deg, rgb(139, 92, 246) 0%, rgb(236, 72, 153) 100%)",border:"none"},leftSection:m.jsx(L1,{size:14}),children:""})})})]})]}),m.jsxs(vc,{children:["  ,   AI  ",t.is_world?" ":" ",".   , , ."]}),m.jsx(Ei,{opened:l,onClose:()=>c(!1),title:"  ",closeOnClickOutside:!u,centered:!0,size:"lg",styles:wn.modal,children:m.jsxs(Ae,{gap:"md",children:[!C&&!b&&m.jsx(En,{padding:"md",radius:"md",style:{backgroundColor:"rgb(35, 30, 45)",border:"1px solid rgb(88, 70, 120)"},children:m.jsx(P,{size:"sm",c:"rgb(200, 180, 230)",children:"AI        :   ,  ,     ,     ."})}),!C&&m.jsxs(m.Fragment,{children:[m.jsxs(de,{children:[m.jsx(P,{size:"sm",c:"white",fw:500,mb:6,children:" "}),m.jsx(fm,{value:p,onChange:$=>y($.target.value),minRows:4,autosize:!0,maxRows:8,styles:wn.input,placeholder:" ...",error:p.length>1e3?"  ":void 0}),m.jsxs(P,{size:"xs",c:p.length>1e3?"red":"dimmed",ta:"right",children:[p.length,"/1000"]})]}),u?m.jsx(Ae,{gap:"sm",children:m.jsxs(He,{justify:"center",gap:"xs",children:[m.jsx(pc,{size:"sm",color:"violet"}),m.jsx(P,{size:"sm",c:"dimmed",children:"    30 ..."})]})}):!b&&m.jsx(Pe,{style:{background:"linear-gradient(135deg, rgb(139, 92, 246) 0%, rgb(236, 72, 153) 100%)",border:"none"},onClick:B,disabled:!p.trim()||p.length>1e3,leftSection:m.jsx(L1,{size:16}),fullWidth:!0,children:"   AI"})]}),x&&m.jsx(Qm,{color:"red",variant:"light",radius:"md",icon:m.jsx(mm,{size:16}),children:x}),M&&m.jsx(En,{padding:"lg",radius:"md",style:{backgroundColor:"rgb(45, 40, 30)",border:"1px solid rgb(234, 179, 8)"},children:m.jsxs(Ae,{gap:"md",align:"center",children:[m.jsx(P,{size:"3rem",children:""}),m.jsx(P,{size:"lg",fw:600,c:"white",ta:"center",children:"-, !"}),m.jsx(P,{size:"md",c:"rgb(230, 210, 150)",ta:"center",children:"  .  AI    ."}),m.jsx(P,{size:"sm",c:"rgb(200, 180, 120)",ta:"center",children:" 10     "})]})}),C&&m.jsx(En,{padding:"lg",radius:"md",style:{backgroundColor:"rgb(45, 30, 60)",border:"1px solid rgb(139, 92, 246)"},children:m.jsxs(Ae,{gap:"md",children:[m.jsxs(He,{gap:"sm",children:[m.jsx(z1,{size:24,color:"rgb(250, 204, 21)"}),m.jsx(P,{size:"lg",fw:600,c:"white",children:" !"})]}),m.jsx(P,{size:"md",c:"rgb(200, 180, 230)",children:"   .      "}),m.jsxs(En,{padding:"sm",radius:"sm",style:{backgroundColor:"rgb(35, 25, 50)"},children:[m.jsx(P,{size:"sm",c:"rgb(180, 160, 210)",fw:500,mb:"xs",children:"     ?"}),m.jsx(P,{size:"sm",c:"rgb(160, 140, 190)",children:"  ,    ."})]}),m.jsx(P,{size:"sm",c:"rgb(236, 72, 153)",ta:"center",style:{fontStyle:"italic"},children:"    , )) "}),m.jsx(Pe,{style:{background:"linear-gradient(135deg, rgb(250, 204, 21) 0%, rgb(245, 158, 11) 100%)",border:"none",color:"black"},onClick:W,leftSection:m.jsx(z1,{size:18}),fullWidth:!0,size:"md",children:" "})]})}),b&&m.jsxs(m.Fragment,{children:[m.jsxs(de,{children:[m.jsx(P,{size:"sm",c:"white",fw:500,mb:6,children:" "}),m.jsx(fm,{value:b,onChange:$=>v($.target.value),minRows:4,autosize:!0,maxRows:10,styles:{...wn.input,input:{...wn.input.input,borderColor:"rgb(139, 92, 246)"}}})]}),m.jsxs(He,{justify:"flex-end",gap:"sm",children:[m.jsx(Pe,{variant:"subtle",color:"gray",onClick:()=>c(!1),children:""}),m.jsx(Pe,{color:"violet",onClick:L,leftSection:m.jsx(nc,{size:16}),children:""})]})]})]})})]})}function bx(t){return t?t.replace(/<br\s*\/?>/gi,`
`).replace(/<\/p>\s*<p>/gi,`
`).replace(/<strong>/gi,"<b>").replace(/<\/strong>/gi,"</b>").replace(/<em>/gi,"<i>").replace(/<\/em>/gi,"</i>").replace(/<p>/gi,"").replace(/<\/p>/gi,"").replace(/<(?!\/?[bi]>)[^>]+>/gi,"").replace(/&nbsp;/gi," ").replace(/&amp;/gi,"&").replace(/&lt;/gi,"<").replace(/&gt;/gi,">").replace(/&quot;/gi,'"').trim():""}function vx(t){return t?"<p>"+t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&lt;b&gt;/gi,"<strong>").replace(/&lt;\/b&gt;/gi,"</strong>").replace(/&lt;i&gt;/gi,"<em>").replace(/&lt;\/i&gt;/gi,"</em>").replace(/\n/g,"</p><p>")+"</p>":"<p></p>"}function Jz({form:t,errors:e,updateField:n}){const[i,s]=R.useState(!1),[l,c]=R.useState(!1),u=cN({extensions:[Iz.configure({heading:!1,bulletList:!1,orderedList:!1,listItem:!1,blockquote:!1,codeBlock:!1,code:!1,horizontalRule:!1})],content:vx(t.greeting),onUpdate:({editor:x})=>{const k=x.getHTML(),C=bx(k);n("greeting",C)},onSelectionUpdate:({editor:x})=>{s(x.isActive("bold")),c(x.isActive("italic"))},onTransaction:({editor:x})=>{const k=x.state.storedMarks;if(k){const C=k.some(M=>M.type.name==="bold"),E=k.some(M=>M.type.name==="italic");s(C),c(E)}else s(x.isActive("bold")),c(x.isActive("italic"))}});R.useEffect(()=>{u&&!u.isFocused&&bx(u.getHTML())!==t.greeting&&u.commands.setContent(vx(t.greeting))},[t.greeting,u]);const d=R.useCallback(()=>{u&&(s(x=>!x),u.chain().focus().toggleBold().run())},[u]),p=R.useCallback(()=>{u&&(c(x=>!x),u.chain().focus().toggleItalic().run())},[u]),y=t.greeting.trim().length,b=y>Ze.greeting.max,v=y<Ze.greeting.min&&y>0;return m.jsxs(Ae,{gap:"md",children:[m.jsx(Ns,{children:" "}),m.jsx(Ul,{children:"      .   !"}),m.jsxs(En,{padding:"sm",radius:"md",style:{...wn.tipCard,marginBottom:"8px"},children:[m.jsxs(P,{size:"sm",c:"rgb(200, 180, 230)",mb:"xs",children:[m.jsx("b",{style:{color:"rgb(180, 140, 255)"},children:":"}),"       ,        ()."]}),m.jsxs(P,{size:"sm",c:"rgb(200, 180, 230)",children:[m.jsx("b",{children:":"}),"            ."]})]}),m.jsxs(de,{className:`greeting-editor ${e.greeting?"has-error":""}`,children:[m.jsx(P,{size:"sm",c:"white",fw:500,mb:6,children:""}),m.jsxs(Me,{editor:u,children:[m.jsx(Me.Toolbar,{sticky:!0,stickyOffset:0,children:m.jsxs(Me.ControlsGroup,{children:[m.jsx(Me.Control,{onClick:d,active:i,"aria-label":"Bold",children:m.jsx(aT,{size:16})}),m.jsx(Me.Control,{onClick:p,active:l,"aria-label":"Italic",children:m.jsx(MT,{size:16})})]})}),m.jsx(Me.Content,{})]}),m.jsxs(P,{size:"xs",c:b?"red":v?"rgb(250, 128, 114)":"dimmed",mt:4,children:[y,"/",Ze.greeting.max,"  (. ",Ze.greeting.min,")"]}),e.greeting&&m.jsx(P,{size:"xs",c:"red",mt:4,children:e.greeting})]}),m.jsxs(vc,{children:[" ",m.jsx("b",{children:""}),"  ",m.jsx("i",{children:""}),"    .     ,    ."]})]})}function Xz({form:t,updateField:e,entityNameGen:n,availableTags:i,loadingTags:s,tagsModalOpened:l,setTagsModalOpened:c,onToggleTag:u,onRemoveTag:d}){return m.jsxs(Ae,{gap:"md",children:[m.jsx(Ns,{children:"  "}),m.jsxs(Ul,{children:["  5 ,        ",n,"."]}),t.tags.length>0&&m.jsx(He,{gap:"xs",children:t.tags.map(p=>m.jsx(Er,{color:"violet",variant:"light",size:"lg",rightSection:m.jsx(bo,{size:"xs",color:"violet",variant:"transparent",onClick:()=>d(p),children:""}),children:p},p))}),m.jsx(Pe,{variant:"light",color:"violet",onClick:()=>c(!0),fullWidth:!0,styles:{root:{backgroundColor:"rgb(41, 41, 41)",border:"1px dashed rgb(139, 92, 246)"}},children:t.tags.length>0?` : ${t.tags.length}/5  `:"+  "}),m.jsxs(vc,{children:["   ,        ",n,"  ."]}),m.jsxs(Ei,{opened:l,onClose:()=>c(!1),title:`  (${t.tags.length}/5)`,centered:!0,size:"lg",styles:wn.modal,children:[s?m.jsx(de,{style:{display:"flex",justifyContent:"center",padding:"40px"},children:m.jsx(pc,{color:"violet"})}):m.jsx(de,{style:{display:"flex",flexWrap:"wrap",gap:"10px"},children:i.length===0?m.jsxs(P,{c:"dimmed",ta:"center",w:"100%",children:["      .",m.jsx("br",{}),"     ."]}):i.map(p=>{const y=t.tags.includes(p),b=!y&&t.tags.length>=5;return m.jsxs(Pe,{onClick:()=>u(p),disabled:b,size:"sm",radius:"xl",styles:{root:{backgroundColor:y?"rgb(139, 92, 246)":"rgb(41, 41, 41)",color:b?"rgb(100, 100, 100)":"white",border:y?"1px solid rgb(139, 92, 246)":"1px solid rgb(55, 55, 55)",opacity:b?.5:1,cursor:b?"not-allowed":"pointer","&:hover":{backgroundColor:y?"rgb(124, 77, 231)":b?"rgb(41, 41, 41)":"rgb(55, 55, 55)"}}},children:[y&&" ",p]},p)})}),m.jsx(Pe,{color:"violet",fullWidth:!0,mt:"lg",onClick:()=>c(!1),children:""})]}),m.jsx(de,{style:{backgroundColor:"rgb(41, 41, 41)",borderRadius:"8px",padding:"16px"},children:m.jsxs(He,{justify:"space-between",children:[m.jsxs(de,{children:[m.jsxs(P,{size:"sm",c:"white",fw:500,children:[" ",t.is_world?"":""]}),m.jsx(P,{size:"xs",c:"dimmed",children:t.is_public?"     ":"   "})]}),m.jsx(ZE,{checked:t.is_public,onChange:p=>e("is_public",p.currentTarget.checked),color:"violet"})]})})]})}function Zz({form:t,errors:e,updateField:n,entityNameGen:i}){const s=R.useMemo(()=>t.photo?URL.createObjectURL(t.photo):null,[t.photo]),[l,c]=R.useState(null);R.useEffect(()=>()=>{s&&URL.revokeObjectURL(s)},[s]);const u=R.useCallback(d=>{if(c(null),!d){n("photo",null);return}if(!["image/png","image/jpeg","image/jpg","image/webp"].includes(d.type.toLowerCase())){c(" .  PNG, JPG  WebP");return}const y=5*1024*1024;if(d.size>y){c("  .  : 5 ");return}n("photo",d)},[n]);return m.jsxs(Ae,{gap:"md",children:[m.jsx(Ns,{children:" "}),m.jsxs(Ul,{children:["    ",i,".  JPG, PNG, WebP."]}),s?m.jsxs(de,{children:[m.jsx(P,{size:"sm",c:"white",fw:500,mb:6,children:""}),m.jsx(En,{padding:"md",radius:"md",style:{...wn.card,cursor:"pointer",border:"2px dashed rgb(139, 92, 246)",transition:"all 0.2s"},onClick:()=>document.getElementById("hidden-file-input")?.click(),onMouseEnter:d=>{d.currentTarget.style.borderColor="rgb(167, 139, 250)",d.currentTarget.style.backgroundColor="rgb(45, 41, 51)"},onMouseLeave:d=>{d.currentTarget.style.borderColor="rgb(139, 92, 246)",d.currentTarget.style.backgroundColor="rgb(41, 41, 41)"},children:m.jsxs(Ae,{align:"center",gap:"sm",children:[m.jsx("img",{src:s,alt:"Preview",style:{maxWidth:"200px",maxHeight:"200px",borderRadius:"8px",objectFit:"cover"}}),m.jsx(P,{size:"sm",c:"dimmed",children:t.photo?.name}),m.jsx(P,{size:"xs",c:"rgb(139, 92, 246)",fw:500,children:" ,    "})]})}),m.jsx("input",{id:"hidden-file-input",type:"file",accept:"image/png,image/jpeg,image/jpg,image/webp",style:{display:"none"},onChange:d=>{const p=d.target.files?.[0]||null;u(p),d.target.value=""}}),l&&m.jsx(P,{size:"xs",c:"red",mt:4,children:l})]}):m.jsx(ew,{label:"",placeholder:",   ",accept:"image/png,image/jpeg,image/jpg,image/webp",value:t.photo,onChange:u,error:e.photo||l,styles:wn.input}),m.jsx(vc,{children:"    .  : 512512 .   : 5 ."})]})}const eR={root:{backgroundColor:"rgb(20, 83, 45)",border:"1px solid rgb(34, 197, 94)"},title:{color:"white"},message:{color:"rgb(187, 247, 208)"},closeButton:{color:"white"}};R.memo(function({isWorld:e,onDismiss:n}){const i=e?"":"";return m.jsx(Qm,{color:"green",variant:"light",withCloseButton:!0,onClose:n,title:`${e?"":""}  ! `,radius:"md",styles:eR,children:m.jsxs(Ae,{gap:"xs",children:[m.jsxs(P,{size:"sm",children:[" ",i,"     .        !"]}),m.jsx(P,{size:"sm",children:"        Telegram-."}),m.jsxs(P,{size:"sm",children:["     ,  "," ",m.jsx(Mx,{href:"https://t.me/aiogram_tgbots",target:"_blank",c:"rgb(134, 239, 172)",underline:"hover",children:""}),"."]})]})})});const tR=`
  @keyframes float {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-20px); }
  }

  @keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
  }

  @keyframes shimmer {
    0% { background-position: -200% 0; }
    100% { background-position: 200% 0; }
  }

  .float-animation {
    animation: float 3s ease-in-out infinite;
  }

  .pulse-animation {
    animation: pulse 2s ease-in-out infinite;
  }

  .shimmer-animation {
    animation: shimmer 3s ease-in-out infinite;
  }
`;function nR(){const t=Bl(),[e,n]=R.useState(!1);return R.useEffect(()=>{const i=document.createElement("style");return i.textContent=tR,document.head.appendChild(i),(async()=>{try{const l=Tt.initDataUnsafe?.start_param,c=new Promise((p,y)=>setTimeout(()=>y(new Error("Timeout")),3e4)),u={};l&&(u.referrer=l);const d=Lt("/v1/user/register",{method:"POST",body:JSON.stringify(u)});await Promise.race([d,c]),t("/",{replace:!0})}catch(l){if(console.error("Registration error:",l),l?.status===409){t("/",{replace:!0});return}n(!0)}})(),()=>{document.head.removeChild(i)}},[t]),e?m.jsx(vs,{size:"sm",style:{paddingTop:"100px"},children:m.jsx(qr,{shadow:"md",p:"xl",withBorder:!0,children:m.jsxs(Ae,{align:"center",gap:"md",children:[m.jsx(P,{size:"xl",fw:600,children:", -   "}),m.jsx(P,{c:"dimmed",ta:"center",children:" WebApp,    ."}),m.jsxs(P,{c:"dimmed",ta:"center",children:[" :"," ",m.jsx("a",{href:"https://t.me/aiogram_tgbots",target:"_blank",rel:"noopener noreferrer",style:{color:"inherit"},children:"https://t.me/aiogram_tgbots"})]}),m.jsx(Pe,{onClick:()=>window.location.reload(),variant:"filled",fullWidth:!0,children:""})]})})}):m.jsx(Tl,{style:{height:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:m.jsxs(Ae,{align:"center",gap:"xl",children:[m.jsxs("div",{className:"float-animation",style:{position:"relative"},children:[m.jsx(pc,{size:80,color:"white",type:"dots"}),m.jsx("div",{className:"pulse-animation",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"120px",height:"120px",borderRadius:"50%",background:"rgba(255, 255, 255, 0.1)",zIndex:-1}})]}),m.jsx(P,{size:"32px",fw:700,className:"shimmer-animation",style:{background:"linear-gradient(90deg, #fff, #e0e0e0, #fff)",backgroundSize:"200% 100%",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",textAlign:"center",letterSpacing:"2px"},children:"  "}),m.jsx(P,{size:"lg",c:"white",className:"pulse-animation",style:{opacity:.9,textAlign:"center"},children:"    ..."})]})})}function rR(){const t=aw();return R.useEffect(()=>{window.ym&&window.ym(106082581,"hit",t.pathname)},[t]),null}function yl({children:t}){return m.jsxs(m.Fragment,{children:[m.jsx(rR,{}),t]})}function bl(){const t=lw();return console.error(t),m.jsxs("div",{style:{padding:"20px",textAlign:"center"},children:[m.jsx("h1",{children:" "}),m.jsx("p",{children:",   "})]})}const iR=ow([{path:"/",element:m.jsx(yl,{children:m.jsx(B1,{})}),errorElement:m.jsx(bl,{})},{path:"/auth",element:m.jsx(yl,{children:m.jsx(nR,{})}),errorElement:m.jsx(bl,{})},{path:"/profile",element:m.jsx(yl,{children:m.jsx(xM,{})}),errorElement:m.jsx(bl,{})},{path:"/tariffs",element:m.jsx(yl,{children:m.jsx(jM,{})}),errorElement:m.jsx(bl,{})},{path:"/create",element:m.jsx(yl,{children:m.jsx(Gz,{})}),errorElement:m.jsx(bl,{})},{path:"*",element:m.jsx(yl,{children:m.jsx(B1,{})}),errorElement:m.jsx(bl,{})}]);function oR(){return m.jsx(sw,{router:iR})}var am={},Ur={},xx;function Vg(){if(xx)return Ur;xx=1,Object.defineProperty(Ur,"__esModule",{value:!0}),Ur.callbackQueueName=n,Ur.scriptPath=i,Ur.trackerConstructorName=s,Ur.trackerInstanceName=l,Ur.trackerVersionName=c,Ur.accountListName=void 0;var t="yandex_metrika_accounts";Ur.accountListName=t;function e(){throw new Error("invalid Ya.Metrika version")}function n(u){if(u==="1")return"yandex_metrika_callbacks";if(u==="2")return"yandex_metrika_callbacks2";e()}function i(u){if(u==="1")return"https://mc.yandex.ru/metrika/watch.js";if(u==="2")return"https://mc.yandex.ru/metrika/tag.js";e()}function s(u){if(u==="1")return"Metrika";if(u==="2")return"Metrika2";e()}function l(u){return"yaCounter".concat(u)}function c(u){return"yaCounterVersion".concat(u)}return Ur}var Ia={},cm={},Sx;function sR(){return Sx||(Sx=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var e=Vg();function n(i){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},l=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"1",c=(0,e.callbackQueueName)(l);window[e.accountListName]=window[e.accountListName]||[],window[e.accountListName]=window[e.accountListName].concat(i),window[c]=window[c]||[],window[c].push(function(){i.forEach(function(u){var d={id:u};try{window[(0,e.trackerInstanceName)(u)]=new Ya[(0,e.trackerConstructorName)(l)](Object.assign(d,s))}catch(p){console.warn(p)}})}),i.forEach(function(u){window[(0,e.trackerVersionName)(u)]=l})}})(cm)),cm}var kx;function lR(){if(kx)return Ia;kx=1,Object.defineProperty(Ia,"__esModule",{value:!0}),Ia.YMInitializer=void 0;var t=c(rd()),e=s(_w()),n=s(sR()),i=Vg();function s(M){return M&&M.__esModule?M:{default:M}}function l(){if(typeof WeakMap!="function")return null;var M=new WeakMap;return l=function(){return M},M}function c(M){if(M&&M.__esModule)return M;if(M===null||u(M)!=="object"&&typeof M!="function")return{default:M};var _=l();if(_&&_.has(M))return _.get(M);var N={},B=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var L in M)if(Object.prototype.hasOwnProperty.call(M,L)){var W=B?Object.getOwnPropertyDescriptor(M,L):null;W&&(W.get||W.set)?Object.defineProperty(N,L,W):N[L]=M[L]}return N.default=M,_&&_.set(M,N),N}function u(M){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?u=function(N){return typeof N}:u=function(N){return N&&typeof Symbol=="function"&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N},u(M)}function d(M,_){if(!(M instanceof _))throw new TypeError("Cannot call a class as a function")}function p(M,_){for(var N=0;N<_.length;N++){var B=_[N];B.enumerable=B.enumerable||!1,B.configurable=!0,"value"in B&&(B.writable=!0),Object.defineProperty(M,B.key,B)}}function y(M,_,N){return _&&p(M.prototype,_),M}function b(M,_){return _&&(u(_)==="object"||typeof _=="function")?_:v(M)}function v(M){if(M===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return M}function x(M){return x=Object.setPrototypeOf?Object.getPrototypeOf:function(N){return N.__proto__||Object.getPrototypeOf(N)},x(M)}function k(M,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function");M.prototype=Object.create(_&&_.prototype,{constructor:{value:M,writable:!0,configurable:!0}}),_&&C(M,_)}function C(M,_){return C=Object.setPrototypeOf||function(B,L){return B.__proto__=L,B},C(M,_)}var E=(function(M){k(_,M);function _(){return d(this,_),b(this,x(_).apply(this,arguments))}return y(_,[{key:"componentDidMount",value:function(){(0,n.default)(this.props.accounts,this.props.options,this.props.version);var B=document.createElement("script"),L=this.props.attrs;B.type="text/javascript",B.async=!0,B.src=(0,i.scriptPath)(this.props.version),Object.keys(L).map(function(W){B.__proto__.hasOwnProperty(W)&&B.setAttribute(W,L[W])}),this.insertPoint.insertBefore(B,null)}},{key:"render",value:function(){var B=this,L=function($){B.insertPoint=$};return t.default.createElement(this.props.containerElement,{ref:L},this.props.children)}}]),_})(t.Component);return Ia.YMInitializer=E,E.displayName="YMInitializer",E.propTypes={accounts:e.default.arrayOf(e.default.number).isRequired,containerElement:e.default.string,options:e.default.object,attrs:e.default.object,version:e.default.oneOf(["1","2"])},E.defaultProps={containerElement:"div",options:{},attrs:{},version:"1"},Ia}var Cx;function aR(){return Cx||(Cx=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.withId=u,t.withFilter=d,Object.defineProperty(t,"YMInitializer",{enumerable:!0,get:function(){return n.YMInitializer}}),t.default=void 0;var e=Vg(),n=lR();function i(y,b){try{for(var v,x=arguments.length,k=new Array(x>2?x-2:0),C=2;C<x;C++)k[C-2]=arguments[C];(v=window[(0,e.trackerInstanceName)(y)])[b].apply(v,k)}catch(E){console.warn(E)}}function s(){return typeof window<"u"?window[e.accountListName]:[]}function l(y){return function(){for(var b=arguments.length,v=new Array(b),x=0;x<b;x++)v[x]=arguments[x];y.forEach(function(k){var C=window[(0,e.trackerVersionName)(k)],E=window[(0,e.callbackQueueName)(C)];E?E.push(function(){return i.apply(void 0,[k].concat(v))}):i.apply(void 0,[k].concat(v))})}}function c(){return l(s()).apply(void 0,arguments)}function u(y){return d(function(b){return y===b})}function d(y){return l(s().filter(y))}var p=c;t.default=p})(am)),am}var cR=aR();function uR(){return R.useEffect(()=>{Tt.ready(),Tt.expand()},[]),m.jsxs(tw,{children:[m.jsx(cR.YMInitializer,{accounts:[106082581],options:{webvisor:!0,clickmap:!0,trackLinks:!0,accurateTrackBounce:!0,ecommerce:"dataLayer"},version:"2"}),m.jsx(Ai,{position:"top-center",autoClose:4e3}),m.jsx(oR,{})]})}hw.createRoot(document.getElementById("root")).render(m.jsx(uR,{}));
