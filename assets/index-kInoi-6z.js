import{r as uM,_ as aT,a as dM,j as m,N as fM,f as fa,u as ki,g as hM,b as pM,c as mM,d as gM,e as lT,h as vM,O as yM,B as pe,R as Xx,i as bM,k as Gt,C as Hn,A as cT,I as to,T as U,G as Re,l as xn,m as Ze,n as de,o as yt,p as ze,q as ie,s as re,t as Rf,v as ha,M as as,S as xM,w as He,L as Lh,x as Ee,y as SM,D as EM,z as uT,E as ls,F as o0,H as kM,J as Xo,K as jt,P as Rl,Q as Yn,U as Zs,V as dT,W as TM,X as wM,Y as lr,Z as CM,$ as bf,a0 as AM,a1 as _M,a2 as Mc,a3 as Qi,a4 as MM,a5 as OM,a6 as fT,a7 as jM,a8 as hT,a9 as RM,aa as NM,ab as yl,ac as s0,ad as cv,ae as DM,af as a0,ag as uv,ah as LM,ai as zM,aj as IM}from"./vendor-mantine-DWnQRu85.js";import{d as zh,e as BM,g as PM,r as D,R as qn,c as qc,u as pa,f as pT,h as UM,i as HM,j as qM,k as VM}from"./vendor-react-I0OoOxXB.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&r(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(o){if(o.ep)return;o.ep=!0;const s=n(o);fetch(o.href,s)}})();var sg={exports:{}},Oc={},ag={exports:{}},lg={};var Jx;function FM(){return Jx||(Jx=1,(function(t){function e(H,ne){var ce=H.length;H.push(ne);e:for(;0<ce;){var Ce=ce-1>>>1,ae=H[Ce];if(0<o(ae,ne))H[Ce]=ne,H[ce]=ae,ce=Ce;else break e}}function n(H){return H.length===0?null:H[0]}function r(H){if(H.length===0)return null;var ne=H[0],ce=H.pop();if(ce!==ne){H[0]=ce;e:for(var Ce=0,ae=H.length,ve=ae>>>1;Ce<ve;){var fe=2*(Ce+1)-1,ue=H[fe],We=fe+1,Ue=H[We];if(0>o(ue,ce))We<ae&&0>o(Ue,ue)?(H[Ce]=Ue,H[We]=ce,Ce=We):(H[Ce]=ue,H[fe]=ce,Ce=fe);else if(We<ae&&0>o(Ue,ce))H[Ce]=Ue,H[We]=ce,Ce=We;else break e}}return ne}function o(H,ne){var ce=H.sortIndex-ne.sortIndex;return ce!==0?ce:H.id-ne.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var l=Date,u=l.now();t.unstable_now=function(){return l.now()-u}}var d=[],h=[],p=1,g=null,y=3,x=!1,S=!1,E=!1,k=!1,w=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,_=typeof setImmediate<"u"?setImmediate:null;function R(H){for(var ne=n(h);ne!==null;){if(ne.callback===null)r(h);else if(ne.startTime<=H)r(h),ne.sortIndex=ne.expirationTime,e(d,ne);else break;ne=n(h)}}function j(H){if(E=!1,R(H),!S)if(n(d)!==null)S=!0,z||(z=!0,te());else{var ne=n(h);ne!==null&&me(j,ne.startTime-H)}}var z=!1,B=-1,K=5,W=-1;function J(){return k?!0:!(t.unstable_now()-W<K)}function Z(){if(k=!1,z){var H=t.unstable_now();W=H;var ne=!0;try{e:{S=!1,E&&(E=!1,C(B),B=-1),x=!0;var ce=y;try{t:{for(R(H),g=n(d);g!==null&&!(g.expirationTime>H&&J());){var Ce=g.callback;if(typeof Ce=="function"){g.callback=null,y=g.priorityLevel;var ae=Ce(g.expirationTime<=H);if(H=t.unstable_now(),typeof ae=="function"){g.callback=ae,R(H),ne=!0;break t}g===n(d)&&r(d),R(H)}else r(d);g=n(d)}if(g!==null)ne=!0;else{var ve=n(h);ve!==null&&me(j,ve.startTime-H),ne=!1}}break e}finally{g=null,y=ce,x=!1}ne=void 0}}finally{ne?te():z=!1}}}var te;if(typeof _=="function")te=function(){_(Z)};else if(typeof MessageChannel<"u"){var je=new MessageChannel,ke=je.port2;je.port1.onmessage=Z,te=function(){ke.postMessage(null)}}else te=function(){w(Z,0)};function me(H,ne){B=w(function(){H(t.unstable_now())},ne)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(H){H.callback=null},t.unstable_forceFrameRate=function(H){0>H||125<H?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):K=0<H?Math.floor(1e3/H):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_next=function(H){switch(y){case 1:case 2:case 3:var ne=3;break;default:ne=y}var ce=y;y=ne;try{return H()}finally{y=ce}},t.unstable_requestPaint=function(){k=!0},t.unstable_runWithPriority=function(H,ne){switch(H){case 1:case 2:case 3:case 4:case 5:break;default:H=3}var ce=y;y=H;try{return ne()}finally{y=ce}},t.unstable_scheduleCallback=function(H,ne,ce){var Ce=t.unstable_now();switch(typeof ce=="object"&&ce!==null?(ce=ce.delay,ce=typeof ce=="number"&&0<ce?Ce+ce:Ce):ce=Ce,H){case 1:var ae=-1;break;case 2:ae=250;break;case 5:ae=1073741823;break;case 4:ae=1e4;break;default:ae=5e3}return ae=ce+ae,H={id:p++,callback:ne,priorityLevel:H,startTime:ce,expirationTime:ae,sortIndex:-1},ce>Ce?(H.sortIndex=ce,e(h,H),n(d)===null&&H===n(h)&&(E?(C(B),B=-1):E=!0,me(j,ce-Ce))):(H.sortIndex=ae,e(d,H),S||x||(S=!0,z||(z=!0,te()))),H},t.unstable_shouldYield=J,t.unstable_wrapCallback=function(H){var ne=y;return function(){var ce=y;y=ne;try{return H.apply(this,arguments)}finally{y=ce}}}})(lg)),lg}var Qx;function WM(){return Qx||(Qx=1,ag.exports=FM()),ag.exports}var Zx;function GM(){if(Zx)return Oc;Zx=1;var t=WM(),e=zh(),n=BM();function r(i){var a="https://react.dev/errors/"+i;if(1<arguments.length){a+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)a+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+i+"; visit "+a+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function s(i){var a=i,c=i;if(i.alternate)for(;a.return;)a=a.return;else{i=a;do a=i,(a.flags&4098)!==0&&(c=a.return),i=a.return;while(i)}return a.tag===3?c:null}function l(i){if(i.tag===13){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function u(i){if(i.tag===31){var a=i.memoizedState;if(a===null&&(i=i.alternate,i!==null&&(a=i.memoizedState)),a!==null)return a.dehydrated}return null}function d(i){if(s(i)!==i)throw Error(r(188))}function h(i){var a=i.alternate;if(!a){if(a=s(i),a===null)throw Error(r(188));return a!==i?null:i}for(var c=i,f=a;;){var v=c.return;if(v===null)break;var b=v.alternate;if(b===null){if(f=v.return,f!==null){c=f;continue}break}if(v.child===b.child){for(b=v.child;b;){if(b===c)return d(v),i;if(b===f)return d(v),a;b=b.sibling}throw Error(r(188))}if(c.return!==f.return)c=v,f=b;else{for(var T=!1,A=v.child;A;){if(A===c){T=!0,c=v,f=b;break}if(A===f){T=!0,f=v,c=b;break}A=A.sibling}if(!T){for(A=b.child;A;){if(A===c){T=!0,c=b,f=v;break}if(A===f){T=!0,f=b,c=v;break}A=A.sibling}if(!T)throw Error(r(189))}}if(c.alternate!==f)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?i:a}function p(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i;for(i=i.child;i!==null;){if(a=p(i),a!==null)return a;i=i.sibling}return null}var g=Object.assign,y=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),S=Symbol.for("react.portal"),E=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),C=Symbol.for("react.consumer"),_=Symbol.for("react.context"),R=Symbol.for("react.forward_ref"),j=Symbol.for("react.suspense"),z=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),K=Symbol.for("react.lazy"),W=Symbol.for("react.activity"),J=Symbol.for("react.memo_cache_sentinel"),Z=Symbol.iterator;function te(i){return i===null||typeof i!="object"?null:(i=Z&&i[Z]||i["@@iterator"],typeof i=="function"?i:null)}var je=Symbol.for("react.client.reference");function ke(i){if(i==null)return null;if(typeof i=="function")return i.$$typeof===je?null:i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case E:return"Fragment";case w:return"Profiler";case k:return"StrictMode";case j:return"Suspense";case z:return"SuspenseList";case W:return"Activity"}if(typeof i=="object")switch(i.$$typeof){case S:return"Portal";case _:return i.displayName||"Context";case C:return(i._context.displayName||"Context")+".Consumer";case R:var a=i.render;return i=i.displayName,i||(i=a.displayName||a.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case B:return a=i.displayName||null,a!==null?a:ke(i.type)||"Memo";case K:a=i._payload,i=i._init;try{return ke(i(a))}catch{}}return null}var me=Array.isArray,H=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ne=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ce={pending:!1,data:null,method:null,action:null},Ce=[],ae=-1;function ve(i){return{current:i}}function fe(i){0>ae||(i.current=Ce[ae],Ce[ae]=null,ae--)}function ue(i,a){ae++,Ce[ae]=i.current,i.current=a}var We=ve(null),Ue=ve(null),se=ve(null),dt=ve(null);function mt(i,a){switch(ue(se,a),ue(Ue,i),ue(We,null),a.nodeType){case 9:case 11:i=(i=a.documentElement)&&(i=i.namespaceURI)?bx(i):0;break;default:if(i=a.tagName,a=a.namespaceURI)a=bx(a),i=xx(a,i);else switch(i){case"svg":i=1;break;case"math":i=2;break;default:i=0}}fe(We),ue(We,i)}function wn(){fe(We),fe(Ue),fe(se)}function Wn(i){i.memoizedState!==null&&ue(dt,i);var a=We.current,c=xx(a,i.type);a!==c&&(ue(Ue,i),ue(We,c))}function yn(i){Ue.current===i&&(fe(We),fe(Ue)),dt.current===i&&(fe(dt),wc._currentValue=ce)}var Tr,wr;function Ut(i){if(Tr===void 0)try{throw Error()}catch(c){var a=c.stack.trim().match(/\n( *(at )?)/);Tr=a&&a[1]||"",wr=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Tr+i+wr}var qr=!1;function Le(i,a){if(!i||qr)return"";qr=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var f={DetermineComponentFrameRoot:function(){try{if(a){var ee=function(){throw Error()};if(Object.defineProperty(ee.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(ee,[])}catch($){var F=$}Reflect.construct(i,[],ee)}else{try{ee.call()}catch($){F=$}i.call(ee.prototype)}}else{try{throw Error()}catch($){F=$}(ee=i())&&typeof ee.catch=="function"&&ee.catch(function(){})}}catch($){if($&&F&&typeof $.stack=="string")return[$.stack,F.stack]}return[null,null]}};f.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(f.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(f.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var b=f.DetermineComponentFrameRoot(),T=b[0],A=b[1];if(T&&A){var N=T.split(`
`),V=A.split(`
`);for(v=f=0;f<N.length&&!N[f].includes("DetermineComponentFrameRoot");)f++;for(;v<V.length&&!V[v].includes("DetermineComponentFrameRoot");)v++;if(f===N.length||v===V.length)for(f=N.length-1,v=V.length-1;1<=f&&0<=v&&N[f]!==V[v];)v--;for(;1<=f&&0<=v;f--,v--)if(N[f]!==V[v]){if(f!==1||v!==1)do if(f--,v--,0>v||N[f]!==V[v]){var X=`
`+N[f].replace(" at new "," at ");return i.displayName&&X.includes("<anonymous>")&&(X=X.replace("<anonymous>",i.displayName)),X}while(1<=f&&0<=v);break}}}finally{qr=!1,Error.prepareStackTrace=c}return(c=i?i.displayName||i.name:"")?Ut(c):""}function Be(i,a){switch(i.tag){case 26:case 27:case 5:return Ut(i.type);case 16:return Ut("Lazy");case 13:return i.child!==a&&a!==null?Ut("Suspense Fallback"):Ut("Suspense");case 19:return Ut("SuspenseList");case 0:case 15:return Le(i.type,!1);case 11:return Le(i.type.render,!1);case 1:return Le(i.type,!0);case 31:return Ut("Activity");default:return""}}function gt(i){try{var a="",c=null;do a+=Be(i,c),c=i,i=i.return;while(i);return a}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}var Ht=Object.prototype.hasOwnProperty,Cn=t.unstable_scheduleCallback,zn=t.unstable_cancelCallback,In=t.unstable_shouldYield,Vr=t.unstable_requestPaint,It=t.unstable_now,fr=t.unstable_getCurrentPriorityLevel,ys=t.unstable_ImmediatePriority,Ea=t.unstable_UserBlockingPriority,Bn=t.unstable_NormalPriority,Ci=t.unstable_LowPriority,bs=t.unstable_IdlePriority,ri=t.log,rp=t.unstable_setDisableYieldValue,xs=null,mn=null;function ii(i){if(typeof ri=="function"&&rp(i),mn&&typeof mn.setStrictMode=="function")try{mn.setStrictMode(xs,i)}catch{}}var Gn=Math.clz32?Math.clz32:Bl,ip=Math.log,ju=Math.LN2;function Bl(i){return i>>>=0,i===0?32:31-(ip(i)/ju|0)|0}var ao=256,Ss=262144,ka=4194304;function oi(i){var a=i&42;if(a!==0)return a;switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return i&261888;case 262144:case 524288:case 1048576:case 2097152:return i&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return i&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return i}}function lo(i,a,c){var f=i.pendingLanes;if(f===0)return 0;var v=0,b=i.suspendedLanes,T=i.pingedLanes;i=i.warmLanes;var A=f&134217727;return A!==0?(f=A&~b,f!==0?v=oi(f):(T&=A,T!==0?v=oi(T):c||(c=A&~i,c!==0&&(v=oi(c))))):(A=f&~b,A!==0?v=oi(A):T!==0?v=oi(T):c||(c=f&~i,c!==0&&(v=oi(c)))),v===0?0:a!==0&&a!==v&&(a&b)===0&&(b=v&-v,c=a&-a,b>=c||b===32&&(c&4194048)!==0)?a:v}function Fr(i,a){return(i.pendingLanes&~(i.suspendedLanes&~i.pingedLanes)&a)===0}function Es(i,a){switch(i){case 1:case 2:case 4:case 8:case 64:return a+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ru(){var i=ka;return ka<<=1,(ka&62914560)===0&&(ka=4194304),i}function Ta(i){for(var a=[],c=0;31>c;c++)a.push(i);return a}function Ai(i,a){i.pendingLanes|=a,a!==268435456&&(i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0)}function co(i,a,c,f,v,b){var T=i.pendingLanes;i.pendingLanes=c,i.suspendedLanes=0,i.pingedLanes=0,i.warmLanes=0,i.expiredLanes&=c,i.entangledLanes&=c,i.errorRecoveryDisabledLanes&=c,i.shellSuspendCounter=0;var A=i.entanglements,N=i.expirationTimes,V=i.hiddenUpdates;for(c=T&~c;0<c;){var X=31-Gn(c),ee=1<<X;A[X]=0,N[X]=-1;var F=V[X];if(F!==null)for(V[X]=null,X=0;X<F.length;X++){var $=F[X];$!==null&&($.lane&=-536870913)}c&=~ee}f!==0&&Nu(i,f,0),b!==0&&v===0&&i.tag!==0&&(i.suspendedLanes|=b&~(T&~a))}function Nu(i,a,c){i.pendingLanes|=a,i.suspendedLanes&=~a;var f=31-Gn(a);i.entangledLanes|=a,i.entanglements[f]=i.entanglements[f]|1073741824|c&261930}function Du(i,a){var c=i.entangledLanes|=a;for(i=i.entanglements;c;){var f=31-Gn(c),v=1<<f;v&a|i[f]&a&&(i[f]|=a),c&=~v}}function Fe(i,a){var c=a&-a;return c=(c&42)!==0?1:Pl(c),(c&(i.suspendedLanes|a))!==0?0:c}function Pl(i){switch(i){case 2:i=1;break;case 8:i=4;break;case 32:i=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:i=128;break;case 268435456:i=134217728;break;default:i=0}return i}function Ul(i){return i&=-i,2<i?8<i?(i&134217727)!==0?32:268435456:8:2}function $n(){var i=ne.p;return i!==0?i:(i=window.event,i===void 0?32:Vx(i.type))}function wa(i,a){var c=ne.p;try{return ne.p=i,a()}finally{ne.p=c}}var Yt=Math.random().toString(36).slice(2),on="__reactFiber$"+Yt,An="__reactProps$"+Yt,_i="__reactContainer$"+Yt,Ca="__reactEvents$"+Yt,Lu="__reactListeners$"+Yt,op="__reactHandles$"+Yt,zu="__reactResources$"+Yt,uo="__reactMarker$"+Yt;function Hl(i){delete i[on],delete i[An],delete i[Ca],delete i[Lu],delete i[op]}function fo(i){var a=i[on];if(a)return a;for(var c=i.parentNode;c;){if(a=c[_i]||c[on]){if(c=a.alternate,a.child!==null||c!==null&&c.child!==null)for(i=Ax(i);i!==null;){if(c=i[on])return c;i=Ax(i)}return a}i=c,c=i.parentNode}return null}function ho(i){if(i=i[on]||i[_i]){var a=i.tag;if(a===5||a===6||a===13||a===31||a===26||a===27||a===3)return i}return null}function ks(i){var a=i.tag;if(a===5||a===26||a===27||a===6)return i.stateNode;throw Error(r(33))}function po(i){var a=i[zu];return a||(a=i[zu]={hoistableStyles:new Map,hoistableScripts:new Map}),a}function sn(i){i[uo]=!0}var Iu=new Set,mo={};function Mi(i,a){Pn(i,a),Pn(i+"Capture",a)}function Pn(i,a){for(mo[i]=a,i=0;i<a.length;i++)Iu.add(a[i])}var Bu=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),si={},Pu={};function sp(i){return Ht.call(Pu,i)?!0:Ht.call(si,i)?!1:Bu.test(i)?Pu[i]=!0:(si[i]=!0,!1)}function Aa(i,a,c){if(sp(a))if(c===null)i.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":i.removeAttribute(a);return;case"boolean":var f=a.toLowerCase().slice(0,5);if(f!=="data-"&&f!=="aria-"){i.removeAttribute(a);return}}i.setAttribute(a,""+c)}}function ai(i,a,c){if(c===null)i.removeAttribute(a);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(a);return}i.setAttribute(a,""+c)}}function Wr(i,a,c,f){if(f===null)i.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":i.removeAttribute(c);return}i.setAttributeNS(a,c,""+f)}}function er(i){switch(typeof i){case"bigint":case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function go(i){var a=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(a==="checkbox"||a==="radio")}function ap(i,a,c){var f=Object.getOwnPropertyDescriptor(i.constructor.prototype,a);if(!i.hasOwnProperty(a)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var v=f.get,b=f.set;return Object.defineProperty(i,a,{configurable:!0,get:function(){return v.call(this)},set:function(T){c=""+T,b.call(this,T)}}),Object.defineProperty(i,a,{enumerable:f.enumerable}),{getValue:function(){return c},setValue:function(T){c=""+T},stopTracking:function(){i._valueTracker=null,delete i[a]}}}}function Oi(i){if(!i._valueTracker){var a=go(i)?"checked":"value";i._valueTracker=ap(i,a,""+i[a])}}function Uu(i){if(!i)return!1;var a=i._valueTracker;if(!a)return!0;var c=a.getValue(),f="";return i&&(f=go(i)?i.checked?"true":"false":i.value),i=f,i!==c?(a.setValue(i),!0):!1}function _a(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}var ql=/[\n"\\]/g;function M(i){return i.replace(ql,function(a){return"\\"+a.charCodeAt(0).toString(16)+" "})}function O(i,a,c,f,v,b,T,A){i.name="",T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?i.type=T:i.removeAttribute("type"),a!=null?T==="number"?(a===0&&i.value===""||i.value!=a)&&(i.value=""+er(a)):i.value!==""+er(a)&&(i.value=""+er(a)):T!=="submit"&&T!=="reset"||i.removeAttribute("value"),a!=null?G(i,T,er(a)):c!=null?G(i,T,er(c)):f!=null&&i.removeAttribute("value"),v==null&&b!=null&&(i.defaultChecked=!!b),v!=null&&(i.checked=v&&typeof v!="function"&&typeof v!="symbol"),A!=null&&typeof A!="function"&&typeof A!="symbol"&&typeof A!="boolean"?i.name=""+er(A):i.removeAttribute("name")}function L(i,a,c,f,v,b,T,A){if(b!=null&&typeof b!="function"&&typeof b!="symbol"&&typeof b!="boolean"&&(i.type=b),a!=null||c!=null){if(!(b!=="submit"&&b!=="reset"||a!=null)){Oi(i);return}c=c!=null?""+er(c):"",a=a!=null?""+er(a):c,A||a===i.value||(i.value=a),i.defaultValue=a}f=f??v,f=typeof f!="function"&&typeof f!="symbol"&&!!f,i.checked=A?i.checked:!!f,i.defaultChecked=!!f,T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(i.name=T),Oi(i)}function G(i,a,c){a==="number"&&_a(i.ownerDocument)===i||i.defaultValue===""+c||(i.defaultValue=""+c)}function Y(i,a,c,f){if(i=i.options,a){a={};for(var v=0;v<c.length;v++)a["$"+c[v]]=!0;for(c=0;c<i.length;c++)v=a.hasOwnProperty("$"+i[c].value),i[c].selected!==v&&(i[c].selected=v),v&&f&&(i[c].defaultSelected=!0)}else{for(c=""+er(c),a=null,v=0;v<i.length;v++){if(i[v].value===c){i[v].selected=!0,f&&(i[v].defaultSelected=!0);return}a!==null||i[v].disabled||(a=i[v])}a!==null&&(a.selected=!0)}}function he(i,a,c){if(a!=null&&(a=""+er(a),a!==i.value&&(i.value=a),c==null)){i.defaultValue!==a&&(i.defaultValue=a);return}i.defaultValue=c!=null?""+er(c):""}function Te(i,a,c,f){if(a==null){if(f!=null){if(c!=null)throw Error(r(92));if(me(f)){if(1<f.length)throw Error(r(93));f=f[0]}c=f}c==null&&(c=""),a=c}c=er(a),i.defaultValue=c,f=i.textContent,f===c&&f!==""&&f!==null&&(i.value=f),Oi(i)}function be(i,a){if(a){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=a;return}}i.textContent=a}var et=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function _e(i,a,c){var f=a.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?f?i.setProperty(a,""):a==="float"?i.cssFloat="":i[a]="":f?i.setProperty(a,c):typeof c!="number"||c===0||et.has(a)?a==="float"?i.cssFloat=c:i[a]=(""+c).trim():i[a]=c+"px"}function Qe(i,a,c){if(a!=null&&typeof a!="object")throw Error(r(62));if(i=i.style,c!=null){for(var f in c)!c.hasOwnProperty(f)||a!=null&&a.hasOwnProperty(f)||(f.indexOf("--")===0?i.setProperty(f,""):f==="float"?i.cssFloat="":i[f]="");for(var v in a)f=a[v],a.hasOwnProperty(v)&&c[v]!==f&&_e(i,v,f)}else for(var b in a)a.hasOwnProperty(b)&&_e(i,b,a[b])}function ft(i){if(i.indexOf("-")===-1)return!1;switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ke=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ge=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Se(i){return ge.test(""+i)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":i}function Me(){}var Bt=null;function Ae(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Tt=null,Ge=null;function qt(i){var a=ho(i);if(a&&(i=a.stateNode)){var c=i[An]||null;e:switch(i=a.stateNode,a.type){case"input":if(O(i,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),a=c.name,c.type==="radio"&&a!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+M(""+a)+'"][type="radio"]'),a=0;a<c.length;a++){var f=c[a];if(f!==i&&f.form===i.form){var v=f[An]||null;if(!v)throw Error(r(90));O(f,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(a=0;a<c.length;a++)f=c[a],f.form===i.form&&Uu(f)}break e;case"textarea":he(i,c.value,c.defaultValue);break e;case"select":a=c.value,a!=null&&Y(i,!!c.multiple,a,!1)}}}var Cr=!1;function Vl(i,a,c){if(Cr)return i(a,c);Cr=!0;try{var f=i(a);return f}finally{if(Cr=!1,(Tt!==null||Ge!==null)&&(wd(),Tt&&(a=Tt,i=Ge,Ge=Tt=null,qt(a),i)))for(a=0;a<i.length;a++)qt(i[a])}}function vo(i,a){var c=i.stateNode;if(c===null)return null;var f=c[An]||null;if(f===null)return null;c=f[a];e:switch(a){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(r(231,a,typeof c));return c}var Gr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ts=!1;if(Gr)try{var ws={};Object.defineProperty(ws,"passive",{get:function(){Ts=!0}}),window.addEventListener("test",ws,ws),window.removeEventListener("test",ws,ws)}catch{Ts=!1}var li=null,ye=null,tr=null;function ji(){if(tr)return tr;var i,a=ye,c=a.length,f,v="value"in li?li.value:li.textContent,b=v.length;for(i=0;i<c&&a[i]===v[i];i++);var T=c-i;for(f=1;f<=T&&a[c-f]===v[b-f];f++);return tr=v.slice(i,1<f?1-f:void 0)}function Cs(i){var a=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&a===13&&(i=13)):i=a,i===10&&(i=13),32<=i||i===13?i:0}function Hu(){return!0}function Sy(){return!1}function nr(i){function a(c,f,v,b,T){this._reactName=c,this._targetInst=v,this.type=f,this.nativeEvent=b,this.target=T,this.currentTarget=null;for(var A in i)i.hasOwnProperty(A)&&(c=i[A],this[A]=c?c(b):b[A]);return this.isDefaultPrevented=(b.defaultPrevented!=null?b.defaultPrevented:b.returnValue===!1)?Hu:Sy,this.isPropagationStopped=Sy,this}return g(a.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Hu)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Hu)},persist:function(){},isPersistent:Hu}),a}var As={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},qu=nr(As),Fl=g({},As,{view:0,detail:0}),lA=nr(Fl),lp,cp,Wl,Vu=g({},Fl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:dp,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Wl&&(Wl&&i.type==="mousemove"?(lp=i.screenX-Wl.screenX,cp=i.screenY-Wl.screenY):cp=lp=0,Wl=i),lp)},movementY:function(i){return"movementY"in i?i.movementY:cp}}),Ey=nr(Vu),cA=g({},Vu,{dataTransfer:0}),uA=nr(cA),dA=g({},Fl,{relatedTarget:0}),up=nr(dA),fA=g({},As,{animationName:0,elapsedTime:0,pseudoElement:0}),hA=nr(fA),pA=g({},As,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),mA=nr(pA),gA=g({},As,{data:0}),ky=nr(gA),vA={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},yA={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},bA={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xA(i){var a=this.nativeEvent;return a.getModifierState?a.getModifierState(i):(i=bA[i])?!!a[i]:!1}function dp(){return xA}var SA=g({},Fl,{key:function(i){if(i.key){var a=vA[i.key]||i.key;if(a!=="Unidentified")return a}return i.type==="keypress"?(i=Cs(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?yA[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:dp,charCode:function(i){return i.type==="keypress"?Cs(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Cs(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),EA=nr(SA),kA=g({},Vu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ty=nr(kA),TA=g({},Fl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:dp}),wA=nr(TA),CA=g({},As,{propertyName:0,elapsedTime:0,pseudoElement:0}),AA=nr(CA),_A=g({},Vu,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),MA=nr(_A),OA=g({},As,{newState:0,oldState:0}),jA=nr(OA),RA=[9,13,27,32],fp=Gr&&"CompositionEvent"in window,Gl=null;Gr&&"documentMode"in document&&(Gl=document.documentMode);var NA=Gr&&"TextEvent"in window&&!Gl,wy=Gr&&(!fp||Gl&&8<Gl&&11>=Gl),Cy=" ",Ay=!1;function _y(i,a){switch(i){case"keyup":return RA.indexOf(a.keyCode)!==-1;case"keydown":return a.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function My(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Ma=!1;function DA(i,a){switch(i){case"compositionend":return My(a);case"keypress":return a.which!==32?null:(Ay=!0,Cy);case"textInput":return i=a.data,i===Cy&&Ay?null:i;default:return null}}function LA(i,a){if(Ma)return i==="compositionend"||!fp&&_y(i,a)?(i=ji(),tr=ye=li=null,Ma=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(a.ctrlKey||a.altKey||a.metaKey)||a.ctrlKey&&a.altKey){if(a.char&&1<a.char.length)return a.char;if(a.which)return String.fromCharCode(a.which)}return null;case"compositionend":return wy&&a.locale!=="ko"?null:a.data;default:return null}}var zA={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Oy(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a==="input"?!!zA[i.type]:a==="textarea"}function jy(i,a,c,f){Tt?Ge?Ge.push(f):Ge=[f]:Tt=f,a=Rd(a,"onChange"),0<a.length&&(c=new qu("onChange","change",null,c,f),i.push({event:c,listeners:a}))}var $l=null,Kl=null;function IA(i){hx(i,0)}function Fu(i){var a=ks(i);if(Uu(a))return i}function Ry(i,a){if(i==="change")return a}var Ny=!1;if(Gr){var hp;if(Gr){var pp="oninput"in document;if(!pp){var Dy=document.createElement("div");Dy.setAttribute("oninput","return;"),pp=typeof Dy.oninput=="function"}hp=pp}else hp=!1;Ny=hp&&(!document.documentMode||9<document.documentMode)}function Ly(){$l&&($l.detachEvent("onpropertychange",zy),Kl=$l=null)}function zy(i){if(i.propertyName==="value"&&Fu(Kl)){var a=[];jy(a,Kl,i,Ae(i)),Vl(IA,a)}}function BA(i,a,c){i==="focusin"?(Ly(),$l=a,Kl=c,$l.attachEvent("onpropertychange",zy)):i==="focusout"&&Ly()}function PA(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Fu(Kl)}function UA(i,a){if(i==="click")return Fu(a)}function HA(i,a){if(i==="input"||i==="change")return Fu(a)}function qA(i,a){return i===a&&(i!==0||1/i===1/a)||i!==i&&a!==a}var hr=typeof Object.is=="function"?Object.is:qA;function Yl(i,a){if(hr(i,a))return!0;if(typeof i!="object"||i===null||typeof a!="object"||a===null)return!1;var c=Object.keys(i),f=Object.keys(a);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var v=c[f];if(!Ht.call(a,v)||!hr(i[v],a[v]))return!1}return!0}function Iy(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function By(i,a){var c=Iy(i);i=0;for(var f;c;){if(c.nodeType===3){if(f=i+c.textContent.length,i<=a&&f>=a)return{node:c,offset:a-i};i=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Iy(c)}}function Py(i,a){return i&&a?i===a?!0:i&&i.nodeType===3?!1:a&&a.nodeType===3?Py(i,a.parentNode):"contains"in i?i.contains(a):i.compareDocumentPosition?!!(i.compareDocumentPosition(a)&16):!1:!1}function Uy(i){i=i!=null&&i.ownerDocument!=null&&i.ownerDocument.defaultView!=null?i.ownerDocument.defaultView:window;for(var a=_a(i.document);a instanceof i.HTMLIFrameElement;){try{var c=typeof a.contentWindow.location.href=="string"}catch{c=!1}if(c)i=a.contentWindow;else break;a=_a(i.document)}return a}function mp(i){var a=i&&i.nodeName&&i.nodeName.toLowerCase();return a&&(a==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||a==="textarea"||i.contentEditable==="true")}var VA=Gr&&"documentMode"in document&&11>=document.documentMode,Oa=null,gp=null,Xl=null,vp=!1;function Hy(i,a,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;vp||Oa==null||Oa!==_a(f)||(f=Oa,"selectionStart"in f&&mp(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Xl&&Yl(Xl,f)||(Xl=f,f=Rd(gp,"onSelect"),0<f.length&&(a=new qu("onSelect","select",null,a,c),i.push({event:a,listeners:f}),a.target=Oa)))}function _s(i,a){var c={};return c[i.toLowerCase()]=a.toLowerCase(),c["Webkit"+i]="webkit"+a,c["Moz"+i]="moz"+a,c}var ja={animationend:_s("Animation","AnimationEnd"),animationiteration:_s("Animation","AnimationIteration"),animationstart:_s("Animation","AnimationStart"),transitionrun:_s("Transition","TransitionRun"),transitionstart:_s("Transition","TransitionStart"),transitioncancel:_s("Transition","TransitionCancel"),transitionend:_s("Transition","TransitionEnd")},yp={},qy={};Gr&&(qy=document.createElement("div").style,"AnimationEvent"in window||(delete ja.animationend.animation,delete ja.animationiteration.animation,delete ja.animationstart.animation),"TransitionEvent"in window||delete ja.transitionend.transition);function Ms(i){if(yp[i])return yp[i];if(!ja[i])return i;var a=ja[i],c;for(c in a)if(a.hasOwnProperty(c)&&c in qy)return yp[i]=a[c];return i}var Vy=Ms("animationend"),Fy=Ms("animationiteration"),Wy=Ms("animationstart"),FA=Ms("transitionrun"),WA=Ms("transitionstart"),GA=Ms("transitioncancel"),Gy=Ms("transitionend"),$y=new Map,bp="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");bp.push("scrollEnd");function $r(i,a){$y.set(i,a),Mi(a,[i])}var Wu=typeof reportError=="function"?reportError:function(i){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var a=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof i=="object"&&i!==null&&typeof i.message=="string"?String(i.message):String(i),error:i});if(!window.dispatchEvent(a))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",i);return}console.error(i)},Ar=[],Ra=0,xp=0;function Gu(){for(var i=Ra,a=xp=Ra=0;a<i;){var c=Ar[a];Ar[a++]=null;var f=Ar[a];Ar[a++]=null;var v=Ar[a];Ar[a++]=null;var b=Ar[a];if(Ar[a++]=null,f!==null&&v!==null){var T=f.pending;T===null?v.next=v:(v.next=T.next,T.next=v),f.pending=v}b!==0&&Ky(c,v,b)}}function $u(i,a,c,f){Ar[Ra++]=i,Ar[Ra++]=a,Ar[Ra++]=c,Ar[Ra++]=f,xp|=f,i.lanes|=f,i=i.alternate,i!==null&&(i.lanes|=f)}function Sp(i,a,c,f){return $u(i,a,c,f),Ku(i)}function Os(i,a){return $u(i,null,null,a),Ku(i)}function Ky(i,a,c){i.lanes|=c;var f=i.alternate;f!==null&&(f.lanes|=c);for(var v=!1,b=i.return;b!==null;)b.childLanes|=c,f=b.alternate,f!==null&&(f.childLanes|=c),b.tag===22&&(i=b.stateNode,i===null||i._visibility&1||(v=!0)),i=b,b=b.return;return i.tag===3?(b=i.stateNode,v&&a!==null&&(v=31-Gn(c),i=b.hiddenUpdates,f=i[v],f===null?i[v]=[a]:f.push(a),a.lane=c|536870912),b):null}function Ku(i){if(50<yc)throw yc=0,Om=null,Error(r(185));for(var a=i.return;a!==null;)i=a,a=i.return;return i.tag===3?i.stateNode:null}var Na={};function $A(i,a,c,f){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=a,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pr(i,a,c,f){return new $A(i,a,c,f)}function Ep(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Ri(i,a){var c=i.alternate;return c===null?(c=pr(i.tag,a,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=a,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&65011712,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,a=i.dependencies,c.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c.refCleanup=i.refCleanup,c}function Yy(i,a){i.flags&=65011714;var c=i.alternate;return c===null?(i.childLanes=0,i.lanes=a,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=c.childLanes,i.lanes=c.lanes,i.child=c.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=c.memoizedProps,i.memoizedState=c.memoizedState,i.updateQueue=c.updateQueue,i.type=c.type,a=c.dependencies,i.dependencies=a===null?null:{lanes:a.lanes,firstContext:a.firstContext}),i}function Yu(i,a,c,f,v,b){var T=0;if(f=i,typeof i=="function")Ep(i)&&(T=1);else if(typeof i=="string")T=Q_(i,c,We.current)?26:i==="html"||i==="head"||i==="body"?27:5;else e:switch(i){case W:return i=pr(31,c,a,v),i.elementType=W,i.lanes=b,i;case E:return js(c.children,v,b,a);case k:T=8,v|=24;break;case w:return i=pr(12,c,a,v|2),i.elementType=w,i.lanes=b,i;case j:return i=pr(13,c,a,v),i.elementType=j,i.lanes=b,i;case z:return i=pr(19,c,a,v),i.elementType=z,i.lanes=b,i;default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case _:T=10;break e;case C:T=9;break e;case R:T=11;break e;case B:T=14;break e;case K:T=16,f=null;break e}T=29,c=Error(r(130,i===null?"null":typeof i,"")),f=null}return a=pr(T,c,a,v),a.elementType=i,a.type=f,a.lanes=b,a}function js(i,a,c,f){return i=pr(7,i,f,a),i.lanes=c,i}function kp(i,a,c){return i=pr(6,i,null,a),i.lanes=c,i}function Xy(i){var a=pr(18,null,null,0);return a.stateNode=i,a}function Tp(i,a,c){return a=pr(4,i.children!==null?i.children:[],i.key,a),a.lanes=c,a.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},a}var Jy=new WeakMap;function _r(i,a){if(typeof i=="object"&&i!==null){var c=Jy.get(i);return c!==void 0?c:(a={value:i,source:a,stack:gt(a)},Jy.set(i,a),a)}return{value:i,source:a,stack:gt(a)}}var Da=[],La=0,Xu=null,Jl=0,Mr=[],Or=0,yo=null,ci=1,ui="";function Ni(i,a){Da[La++]=Jl,Da[La++]=Xu,Xu=i,Jl=a}function Qy(i,a,c){Mr[Or++]=ci,Mr[Or++]=ui,Mr[Or++]=yo,yo=i;var f=ci;i=ui;var v=32-Gn(f)-1;f&=~(1<<v),c+=1;var b=32-Gn(a)+v;if(30<b){var T=v-v%5;b=(f&(1<<T)-1).toString(32),f>>=T,v-=T,ci=1<<32-Gn(a)+v|c<<v|f,ui=b+i}else ci=1<<b|c<<v|f,ui=i}function wp(i){i.return!==null&&(Ni(i,1),Qy(i,1,0))}function Cp(i){for(;i===Xu;)Xu=Da[--La],Da[La]=null,Jl=Da[--La],Da[La]=null;for(;i===yo;)yo=Mr[--Or],Mr[Or]=null,ui=Mr[--Or],Mr[Or]=null,ci=Mr[--Or],Mr[Or]=null}function Zy(i,a){Mr[Or++]=ci,Mr[Or++]=ui,Mr[Or++]=yo,ci=a.id,ui=a.overflow,yo=i}var _n=null,Nt=null,lt=!1,bo=null,jr=!1,Ap=Error(r(519));function xo(i){var a=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Ql(_r(a,i)),Ap}function eb(i){var a=i.stateNode,c=i.type,f=i.memoizedProps;switch(a[on]=i,a[An]=f,c){case"dialog":nt("cancel",a),nt("close",a);break;case"iframe":case"object":case"embed":nt("load",a);break;case"video":case"audio":for(c=0;c<xc.length;c++)nt(xc[c],a);break;case"source":nt("error",a);break;case"img":case"image":case"link":nt("error",a),nt("load",a);break;case"details":nt("toggle",a);break;case"input":nt("invalid",a),L(a,f.value,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name,!0);break;case"select":nt("invalid",a);break;case"textarea":nt("invalid",a),Te(a,f.value,f.defaultValue,f.children)}c=f.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||a.textContent===""+c||f.suppressHydrationWarning===!0||vx(a.textContent,c)?(f.popover!=null&&(nt("beforetoggle",a),nt("toggle",a)),f.onScroll!=null&&nt("scroll",a),f.onScrollEnd!=null&&nt("scrollend",a),f.onClick!=null&&(a.onclick=Me),a=!0):a=!1,a||xo(i,!0)}function tb(i){for(_n=i.return;_n;)switch(_n.tag){case 5:case 31:case 13:jr=!1;return;case 27:case 3:jr=!0;return;default:_n=_n.return}}function za(i){if(i!==_n)return!1;if(!lt)return tb(i),lt=!0,!1;var a=i.tag,c;if((c=a!==3&&a!==27)&&((c=a===5)&&(c=i.type,c=!(c!=="form"&&c!=="button")||Wm(i.type,i.memoizedProps)),c=!c),c&&Nt&&xo(i),tb(i),a===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));Nt=Cx(i)}else if(a===31){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(317));Nt=Cx(i)}else a===27?(a=Nt,Do(i.type)?(i=Xm,Xm=null,Nt=i):Nt=a):Nt=_n?Nr(i.stateNode.nextSibling):null;return!0}function Rs(){Nt=_n=null,lt=!1}function _p(){var i=bo;return i!==null&&(sr===null?sr=i:sr.push.apply(sr,i),bo=null),i}function Ql(i){bo===null?bo=[i]:bo.push(i)}var Mp=ve(null),Ns=null,Di=null;function So(i,a,c){ue(Mp,a._currentValue),a._currentValue=c}function Li(i){i._currentValue=Mp.current,fe(Mp)}function Op(i,a,c){for(;i!==null;){var f=i.alternate;if((i.childLanes&a)!==a?(i.childLanes|=a,f!==null&&(f.childLanes|=a)):f!==null&&(f.childLanes&a)!==a&&(f.childLanes|=a),i===c)break;i=i.return}}function jp(i,a,c,f){var v=i.child;for(v!==null&&(v.return=i);v!==null;){var b=v.dependencies;if(b!==null){var T=v.child;b=b.firstContext;e:for(;b!==null;){var A=b;b=v;for(var N=0;N<a.length;N++)if(A.context===a[N]){b.lanes|=c,A=b.alternate,A!==null&&(A.lanes|=c),Op(b.return,c,i),f||(T=null);break e}b=A.next}}else if(v.tag===18){if(T=v.return,T===null)throw Error(r(341));T.lanes|=c,b=T.alternate,b!==null&&(b.lanes|=c),Op(T,c,i),T=null}else T=v.child;if(T!==null)T.return=v;else for(T=v;T!==null;){if(T===i){T=null;break}if(v=T.sibling,v!==null){v.return=T.return,T=v;break}T=T.return}v=T}}function Ia(i,a,c,f){i=null;for(var v=a,b=!1;v!==null;){if(!b){if((v.flags&524288)!==0)b=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var T=v.alternate;if(T===null)throw Error(r(387));if(T=T.memoizedProps,T!==null){var A=v.type;hr(v.pendingProps.value,T.value)||(i!==null?i.push(A):i=[A])}}else if(v===dt.current){if(T=v.alternate,T===null)throw Error(r(387));T.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(i!==null?i.push(wc):i=[wc])}v=v.return}i!==null&&jp(a,i,c,f),a.flags|=262144}function Ju(i){for(i=i.firstContext;i!==null;){if(!hr(i.context._currentValue,i.memoizedValue))return!0;i=i.next}return!1}function Ds(i){Ns=i,Di=null,i=i.dependencies,i!==null&&(i.firstContext=null)}function Mn(i){return nb(Ns,i)}function Qu(i,a){return Ns===null&&Ds(i),nb(i,a)}function nb(i,a){var c=a._currentValue;if(a={context:a,memoizedValue:c,next:null},Di===null){if(i===null)throw Error(r(308));Di=a,i.dependencies={lanes:0,firstContext:a},i.flags|=524288}else Di=Di.next=a;return c}var KA=typeof AbortController<"u"?AbortController:function(){var i=[],a=this.signal={aborted:!1,addEventListener:function(c,f){i.push(f)}};this.abort=function(){a.aborted=!0,i.forEach(function(c){return c()})}},YA=t.unstable_scheduleCallback,XA=t.unstable_NormalPriority,an={$$typeof:_,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Rp(){return{controller:new KA,data:new Map,refCount:0}}function Zl(i){i.refCount--,i.refCount===0&&YA(XA,function(){i.controller.abort()})}var ec=null,Np=0,Ba=0,Pa=null;function JA(i,a){if(ec===null){var c=ec=[];Np=0,Ba=zm(),Pa={status:"pending",value:void 0,then:function(f){c.push(f)}}}return Np++,a.then(rb,rb),a}function rb(){if(--Np===0&&ec!==null){Pa!==null&&(Pa.status="fulfilled");var i=ec;ec=null,Ba=0,Pa=null;for(var a=0;a<i.length;a++)(0,i[a])()}}function QA(i,a){var c=[],f={status:"pending",value:null,reason:null,then:function(v){c.push(v)}};return i.then(function(){f.status="fulfilled",f.value=a;for(var v=0;v<c.length;v++)(0,c[v])(a)},function(v){for(f.status="rejected",f.reason=v,v=0;v<c.length;v++)(0,c[v])(void 0)}),f}var ib=H.S;H.S=function(i,a){H1=It(),typeof a=="object"&&a!==null&&typeof a.then=="function"&&JA(i,a),ib!==null&&ib(i,a)};var Ls=ve(null);function Dp(){var i=Ls.current;return i!==null?i:_t.pooledCache}function Zu(i,a){a===null?ue(Ls,Ls.current):ue(Ls,a.pool)}function ob(){var i=Dp();return i===null?null:{parent:an._currentValue,pool:i}}var Ua=Error(r(460)),Lp=Error(r(474)),ed=Error(r(542)),td={then:function(){}};function sb(i){return i=i.status,i==="fulfilled"||i==="rejected"}function ab(i,a,c){switch(c=i[c],c===void 0?i.push(a):c!==a&&(a.then(Me,Me),a=c),a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,cb(i),i;default:if(typeof a.status=="string")a.then(Me,Me);else{if(i=_t,i!==null&&100<i.shellSuspendCounter)throw Error(r(482));i=a,i.status="pending",i.then(function(f){if(a.status==="pending"){var v=a;v.status="fulfilled",v.value=f}},function(f){if(a.status==="pending"){var v=a;v.status="rejected",v.reason=f}})}switch(a.status){case"fulfilled":return a.value;case"rejected":throw i=a.reason,cb(i),i}throw Is=a,Ua}}function zs(i){try{var a=i._init;return a(i._payload)}catch(c){throw c!==null&&typeof c=="object"&&typeof c.then=="function"?(Is=c,Ua):c}}var Is=null;function lb(){if(Is===null)throw Error(r(459));var i=Is;return Is=null,i}function cb(i){if(i===Ua||i===ed)throw Error(r(483))}var Ha=null,tc=0;function nd(i){var a=tc;return tc+=1,Ha===null&&(Ha=[]),ab(Ha,i,a)}function nc(i,a){a=a.props.ref,i.ref=a!==void 0?a:null}function rd(i,a){throw a.$$typeof===y?Error(r(525)):(i=Object.prototype.toString.call(a),Error(r(31,i==="[object Object]"?"object with keys {"+Object.keys(a).join(", ")+"}":i)))}function ub(i){function a(P,I){if(i){var q=P.deletions;q===null?(P.deletions=[I],P.flags|=16):q.push(I)}}function c(P,I){if(!i)return null;for(;I!==null;)a(P,I),I=I.sibling;return null}function f(P){for(var I=new Map;P!==null;)P.key!==null?I.set(P.key,P):I.set(P.index,P),P=P.sibling;return I}function v(P,I){return P=Ri(P,I),P.index=0,P.sibling=null,P}function b(P,I,q){return P.index=q,i?(q=P.alternate,q!==null?(q=q.index,q<I?(P.flags|=67108866,I):q):(P.flags|=67108866,I)):(P.flags|=1048576,I)}function T(P){return i&&P.alternate===null&&(P.flags|=67108866),P}function A(P,I,q,Q){return I===null||I.tag!==6?(I=kp(q,P.mode,Q),I.return=P,I):(I=v(I,q),I.return=P,I)}function N(P,I,q,Q){var De=q.type;return De===E?X(P,I,q.props.children,Q,q.key):I!==null&&(I.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===K&&zs(De)===I.type)?(I=v(I,q.props),nc(I,q),I.return=P,I):(I=Yu(q.type,q.key,q.props,null,P.mode,Q),nc(I,q),I.return=P,I)}function V(P,I,q,Q){return I===null||I.tag!==4||I.stateNode.containerInfo!==q.containerInfo||I.stateNode.implementation!==q.implementation?(I=Tp(q,P.mode,Q),I.return=P,I):(I=v(I,q.children||[]),I.return=P,I)}function X(P,I,q,Q,De){return I===null||I.tag!==7?(I=js(q,P.mode,Q,De),I.return=P,I):(I=v(I,q),I.return=P,I)}function ee(P,I,q){if(typeof I=="string"&&I!==""||typeof I=="number"||typeof I=="bigint")return I=kp(""+I,P.mode,q),I.return=P,I;if(typeof I=="object"&&I!==null){switch(I.$$typeof){case x:return q=Yu(I.type,I.key,I.props,null,P.mode,q),nc(q,I),q.return=P,q;case S:return I=Tp(I,P.mode,q),I.return=P,I;case K:return I=zs(I),ee(P,I,q)}if(me(I)||te(I))return I=js(I,P.mode,q,null),I.return=P,I;if(typeof I.then=="function")return ee(P,nd(I),q);if(I.$$typeof===_)return ee(P,Qu(P,I),q);rd(P,I)}return null}function F(P,I,q,Q){var De=I!==null?I.key:null;if(typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint")return De!==null?null:A(P,I,""+q,Q);if(typeof q=="object"&&q!==null){switch(q.$$typeof){case x:return q.key===De?N(P,I,q,Q):null;case S:return q.key===De?V(P,I,q,Q):null;case K:return q=zs(q),F(P,I,q,Q)}if(me(q)||te(q))return De!==null?null:X(P,I,q,Q,null);if(typeof q.then=="function")return F(P,I,nd(q),Q);if(q.$$typeof===_)return F(P,I,Qu(P,q),Q);rd(P,q)}return null}function $(P,I,q,Q,De){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return P=P.get(q)||null,A(I,P,""+Q,De);if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case x:return P=P.get(Q.key===null?q:Q.key)||null,N(I,P,Q,De);case S:return P=P.get(Q.key===null?q:Q.key)||null,V(I,P,Q,De);case K:return Q=zs(Q),$(P,I,q,Q,De)}if(me(Q)||te(Q))return P=P.get(q)||null,X(I,P,Q,De,null);if(typeof Q.then=="function")return $(P,I,q,nd(Q),De);if(Q.$$typeof===_)return $(P,I,q,Qu(I,Q),De);rd(I,Q)}return null}function we(P,I,q,Q){for(var De=null,ht=null,Oe=I,Ye=I=0,at=null;Oe!==null&&Ye<q.length;Ye++){Oe.index>Ye?(at=Oe,Oe=null):at=Oe.sibling;var pt=F(P,Oe,q[Ye],Q);if(pt===null){Oe===null&&(Oe=at);break}i&&Oe&&pt.alternate===null&&a(P,Oe),I=b(pt,I,Ye),ht===null?De=pt:ht.sibling=pt,ht=pt,Oe=at}if(Ye===q.length)return c(P,Oe),lt&&Ni(P,Ye),De;if(Oe===null){for(;Ye<q.length;Ye++)Oe=ee(P,q[Ye],Q),Oe!==null&&(I=b(Oe,I,Ye),ht===null?De=Oe:ht.sibling=Oe,ht=Oe);return lt&&Ni(P,Ye),De}for(Oe=f(Oe);Ye<q.length;Ye++)at=$(Oe,P,Ye,q[Ye],Q),at!==null&&(i&&at.alternate!==null&&Oe.delete(at.key===null?Ye:at.key),I=b(at,I,Ye),ht===null?De=at:ht.sibling=at,ht=at);return i&&Oe.forEach(function(Po){return a(P,Po)}),lt&&Ni(P,Ye),De}function Pe(P,I,q,Q){if(q==null)throw Error(r(151));for(var De=null,ht=null,Oe=I,Ye=I=0,at=null,pt=q.next();Oe!==null&&!pt.done;Ye++,pt=q.next()){Oe.index>Ye?(at=Oe,Oe=null):at=Oe.sibling;var Po=F(P,Oe,pt.value,Q);if(Po===null){Oe===null&&(Oe=at);break}i&&Oe&&Po.alternate===null&&a(P,Oe),I=b(Po,I,Ye),ht===null?De=Po:ht.sibling=Po,ht=Po,Oe=at}if(pt.done)return c(P,Oe),lt&&Ni(P,Ye),De;if(Oe===null){for(;!pt.done;Ye++,pt=q.next())pt=ee(P,pt.value,Q),pt!==null&&(I=b(pt,I,Ye),ht===null?De=pt:ht.sibling=pt,ht=pt);return lt&&Ni(P,Ye),De}for(Oe=f(Oe);!pt.done;Ye++,pt=q.next())pt=$(Oe,P,Ye,pt.value,Q),pt!==null&&(i&&pt.alternate!==null&&Oe.delete(pt.key===null?Ye:pt.key),I=b(pt,I,Ye),ht===null?De=pt:ht.sibling=pt,ht=pt);return i&&Oe.forEach(function(cM){return a(P,cM)}),lt&&Ni(P,Ye),De}function At(P,I,q,Q){if(typeof q=="object"&&q!==null&&q.type===E&&q.key===null&&(q=q.props.children),typeof q=="object"&&q!==null){switch(q.$$typeof){case x:e:{for(var De=q.key;I!==null;){if(I.key===De){if(De=q.type,De===E){if(I.tag===7){c(P,I.sibling),Q=v(I,q.props.children),Q.return=P,P=Q;break e}}else if(I.elementType===De||typeof De=="object"&&De!==null&&De.$$typeof===K&&zs(De)===I.type){c(P,I.sibling),Q=v(I,q.props),nc(Q,q),Q.return=P,P=Q;break e}c(P,I);break}else a(P,I);I=I.sibling}q.type===E?(Q=js(q.props.children,P.mode,Q,q.key),Q.return=P,P=Q):(Q=Yu(q.type,q.key,q.props,null,P.mode,Q),nc(Q,q),Q.return=P,P=Q)}return T(P);case S:e:{for(De=q.key;I!==null;){if(I.key===De)if(I.tag===4&&I.stateNode.containerInfo===q.containerInfo&&I.stateNode.implementation===q.implementation){c(P,I.sibling),Q=v(I,q.children||[]),Q.return=P,P=Q;break e}else{c(P,I);break}else a(P,I);I=I.sibling}Q=Tp(q,P.mode,Q),Q.return=P,P=Q}return T(P);case K:return q=zs(q),At(P,I,q,Q)}if(me(q))return we(P,I,q,Q);if(te(q)){if(De=te(q),typeof De!="function")throw Error(r(150));return q=De.call(q),Pe(P,I,q,Q)}if(typeof q.then=="function")return At(P,I,nd(q),Q);if(q.$$typeof===_)return At(P,I,Qu(P,q),Q);rd(P,q)}return typeof q=="string"&&q!==""||typeof q=="number"||typeof q=="bigint"?(q=""+q,I!==null&&I.tag===6?(c(P,I.sibling),Q=v(I,q),Q.return=P,P=Q):(c(P,I),Q=kp(q,P.mode,Q),Q.return=P,P=Q),T(P)):c(P,I)}return function(P,I,q,Q){try{tc=0;var De=At(P,I,q,Q);return Ha=null,De}catch(Oe){if(Oe===Ua||Oe===ed)throw Oe;var ht=pr(29,Oe,null,P.mode);return ht.lanes=Q,ht.return=P,ht}finally{}}}var Bs=ub(!0),db=ub(!1),Eo=!1;function zp(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Ip(i,a){i=i.updateQueue,a.updateQueue===i&&(a.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,callbacks:null})}function ko(i){return{lane:i,tag:0,payload:null,callback:null,next:null}}function To(i,a,c){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,(vt&2)!==0){var v=f.pending;return v===null?a.next=a:(a.next=v.next,v.next=a),f.pending=a,a=Ku(i),Ky(i,null,c),a}return $u(i,f,a,c),Ku(i)}function rc(i,a,c){if(a=a.updateQueue,a!==null&&(a=a.shared,(c&4194048)!==0)){var f=a.lanes;f&=i.pendingLanes,c|=f,a.lanes=c,Du(i,c)}}function Bp(i,a){var c=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var v=null,b=null;if(c=c.firstBaseUpdate,c!==null){do{var T={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};b===null?v=b=T:b=b.next=T,c=c.next}while(c!==null);b===null?v=b=a:b=b.next=a}else v=b=a;c={baseState:f.baseState,firstBaseUpdate:v,lastBaseUpdate:b,shared:f.shared,callbacks:f.callbacks},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=a:i.next=a,c.lastBaseUpdate=a}var Pp=!1;function ic(){if(Pp){var i=Pa;if(i!==null)throw i}}function oc(i,a,c,f){Pp=!1;var v=i.updateQueue;Eo=!1;var b=v.firstBaseUpdate,T=v.lastBaseUpdate,A=v.shared.pending;if(A!==null){v.shared.pending=null;var N=A,V=N.next;N.next=null,T===null?b=V:T.next=V,T=N;var X=i.alternate;X!==null&&(X=X.updateQueue,A=X.lastBaseUpdate,A!==T&&(A===null?X.firstBaseUpdate=V:A.next=V,X.lastBaseUpdate=N))}if(b!==null){var ee=v.baseState;T=0,X=V=N=null,A=b;do{var F=A.lane&-536870913,$=F!==A.lane;if($?(st&F)===F:(f&F)===F){F!==0&&F===Ba&&(Pp=!0),X!==null&&(X=X.next={lane:0,tag:A.tag,payload:A.payload,callback:null,next:null});e:{var we=i,Pe=A;F=a;var At=c;switch(Pe.tag){case 1:if(we=Pe.payload,typeof we=="function"){ee=we.call(At,ee,F);break e}ee=we;break e;case 3:we.flags=we.flags&-65537|128;case 0:if(we=Pe.payload,F=typeof we=="function"?we.call(At,ee,F):we,F==null)break e;ee=g({},ee,F);break e;case 2:Eo=!0}}F=A.callback,F!==null&&(i.flags|=64,$&&(i.flags|=8192),$=v.callbacks,$===null?v.callbacks=[F]:$.push(F))}else $={lane:F,tag:A.tag,payload:A.payload,callback:A.callback,next:null},X===null?(V=X=$,N=ee):X=X.next=$,T|=F;if(A=A.next,A===null){if(A=v.shared.pending,A===null)break;$=A,A=$.next,$.next=null,v.lastBaseUpdate=$,v.shared.pending=null}}while(!0);X===null&&(N=ee),v.baseState=N,v.firstBaseUpdate=V,v.lastBaseUpdate=X,b===null&&(v.shared.lanes=0),Mo|=T,i.lanes=T,i.memoizedState=ee}}function fb(i,a){if(typeof i!="function")throw Error(r(191,i));i.call(a)}function hb(i,a){var c=i.callbacks;if(c!==null)for(i.callbacks=null,i=0;i<c.length;i++)fb(c[i],a)}var qa=ve(null),id=ve(0);function pb(i,a){i=Fi,ue(id,i),ue(qa,a),Fi=i|a.baseLanes}function Up(){ue(id,Fi),ue(qa,qa.current)}function Hp(){Fi=id.current,fe(qa),fe(id)}var mr=ve(null),Rr=null;function wo(i){var a=i.alternate;ue(tn,tn.current&1),ue(mr,i),Rr===null&&(a===null||qa.current!==null||a.memoizedState!==null)&&(Rr=i)}function qp(i){ue(tn,tn.current),ue(mr,i),Rr===null&&(Rr=i)}function mb(i){i.tag===22?(ue(tn,tn.current),ue(mr,i),Rr===null&&(Rr=i)):Co()}function Co(){ue(tn,tn.current),ue(mr,mr.current)}function gr(i){fe(mr),Rr===i&&(Rr=null),fe(tn)}var tn=ve(0);function od(i){for(var a=i;a!==null;){if(a.tag===13){var c=a.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||Km(c)||Ym(c)))return a}else if(a.tag===19&&(a.memoizedProps.revealOrder==="forwards"||a.memoizedProps.revealOrder==="backwards"||a.memoizedProps.revealOrder==="unstable_legacy-backwards"||a.memoizedProps.revealOrder==="together")){if((a.flags&128)!==0)return a}else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return null;a=a.return}a.sibling.return=a.return,a=a.sibling}return null}var zi=0,$e=null,wt=null,ln=null,sd=!1,Va=!1,Ps=!1,ad=0,sc=0,Fa=null,ZA=0;function Xt(){throw Error(r(321))}function Vp(i,a){if(a===null)return!1;for(var c=0;c<a.length&&c<i.length;c++)if(!hr(i[c],a[c]))return!1;return!0}function Fp(i,a,c,f,v,b){return zi=b,$e=a,a.memoizedState=null,a.updateQueue=null,a.lanes=0,H.H=i===null||i.memoizedState===null?Qb:om,Ps=!1,b=c(f,v),Ps=!1,Va&&(b=vb(a,c,f,v)),gb(i),b}function gb(i){H.H=cc;var a=wt!==null&&wt.next!==null;if(zi=0,ln=wt=$e=null,sd=!1,sc=0,Fa=null,a)throw Error(r(300));i===null||cn||(i=i.dependencies,i!==null&&Ju(i)&&(cn=!0))}function vb(i,a,c,f){$e=i;var v=0;do{if(Va&&(Fa=null),sc=0,Va=!1,25<=v)throw Error(r(301));if(v+=1,ln=wt=null,i.updateQueue!=null){var b=i.updateQueue;b.lastEffect=null,b.events=null,b.stores=null,b.memoCache!=null&&(b.memoCache.index=0)}H.H=Zb,b=a(c,f)}while(Va);return b}function e_(){var i=H.H,a=i.useState()[0];return a=typeof a.then=="function"?ac(a):a,i=i.useState()[0],(wt!==null?wt.memoizedState:null)!==i&&($e.flags|=1024),a}function Wp(){var i=ad!==0;return ad=0,i}function Gp(i,a,c){a.updateQueue=i.updateQueue,a.flags&=-2053,i.lanes&=~c}function $p(i){if(sd){for(i=i.memoizedState;i!==null;){var a=i.queue;a!==null&&(a.pending=null),i=i.next}sd=!1}zi=0,ln=wt=$e=null,Va=!1,sc=ad=0,Fa=null}function Kn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ln===null?$e.memoizedState=ln=i:ln=ln.next=i,ln}function nn(){if(wt===null){var i=$e.alternate;i=i!==null?i.memoizedState:null}else i=wt.next;var a=ln===null?$e.memoizedState:ln.next;if(a!==null)ln=a,wt=i;else{if(i===null)throw $e.alternate===null?Error(r(467)):Error(r(310));wt=i,i={memoizedState:wt.memoizedState,baseState:wt.baseState,baseQueue:wt.baseQueue,queue:wt.queue,next:null},ln===null?$e.memoizedState=ln=i:ln=ln.next=i}return ln}function ld(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ac(i){var a=sc;return sc+=1,Fa===null&&(Fa=[]),i=ab(Fa,i,a),a=$e,(ln===null?a.memoizedState:ln.next)===null&&(a=a.alternate,H.H=a===null||a.memoizedState===null?Qb:om),i}function cd(i){if(i!==null&&typeof i=="object"){if(typeof i.then=="function")return ac(i);if(i.$$typeof===_)return Mn(i)}throw Error(r(438,String(i)))}function Kp(i){var a=null,c=$e.updateQueue;if(c!==null&&(a=c.memoCache),a==null){var f=$e.alternate;f!==null&&(f=f.updateQueue,f!==null&&(f=f.memoCache,f!=null&&(a={data:f.data.map(function(v){return v.slice()}),index:0})))}if(a==null&&(a={data:[],index:0}),c===null&&(c=ld(),$e.updateQueue=c),c.memoCache=a,c=a.data[a.index],c===void 0)for(c=a.data[a.index]=Array(i),f=0;f<i;f++)c[f]=J;return a.index++,c}function Ii(i,a){return typeof a=="function"?a(i):a}function ud(i){var a=nn();return Yp(a,wt,i)}function Yp(i,a,c){var f=i.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=c;var v=i.baseQueue,b=f.pending;if(b!==null){if(v!==null){var T=v.next;v.next=b.next,b.next=T}a.baseQueue=v=b,f.pending=null}if(b=i.baseState,v===null)i.memoizedState=b;else{a=v.next;var A=T=null,N=null,V=a,X=!1;do{var ee=V.lane&-536870913;if(ee!==V.lane?(st&ee)===ee:(zi&ee)===ee){var F=V.revertLane;if(F===0)N!==null&&(N=N.next={lane:0,revertLane:0,gesture:null,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null}),ee===Ba&&(X=!0);else if((zi&F)===F){V=V.next,F===Ba&&(X=!0);continue}else ee={lane:0,revertLane:V.revertLane,gesture:null,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null},N===null?(A=N=ee,T=b):N=N.next=ee,$e.lanes|=F,Mo|=F;ee=V.action,Ps&&c(b,ee),b=V.hasEagerState?V.eagerState:c(b,ee)}else F={lane:ee,revertLane:V.revertLane,gesture:V.gesture,action:V.action,hasEagerState:V.hasEagerState,eagerState:V.eagerState,next:null},N===null?(A=N=F,T=b):N=N.next=F,$e.lanes|=ee,Mo|=ee;V=V.next}while(V!==null&&V!==a);if(N===null?T=b:N.next=A,!hr(b,i.memoizedState)&&(cn=!0,X&&(c=Pa,c!==null)))throw c;i.memoizedState=b,i.baseState=T,i.baseQueue=N,f.lastRenderedState=b}return v===null&&(f.lanes=0),[i.memoizedState,f.dispatch]}function Xp(i){var a=nn(),c=a.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=i;var f=c.dispatch,v=c.pending,b=a.memoizedState;if(v!==null){c.pending=null;var T=v=v.next;do b=i(b,T.action),T=T.next;while(T!==v);hr(b,a.memoizedState)||(cn=!0),a.memoizedState=b,a.baseQueue===null&&(a.baseState=b),c.lastRenderedState=b}return[b,f]}function yb(i,a,c){var f=$e,v=nn(),b=lt;if(b){if(c===void 0)throw Error(r(407));c=c()}else c=a();var T=!hr((wt||v).memoizedState,c);if(T&&(v.memoizedState=c,cn=!0),v=v.queue,Zp(Sb.bind(null,f,v,i),[i]),v.getSnapshot!==a||T||ln!==null&&ln.memoizedState.tag&1){if(f.flags|=2048,Wa(9,{destroy:void 0},xb.bind(null,f,v,c,a),null),_t===null)throw Error(r(349));b||(zi&127)!==0||bb(f,a,c)}return c}function bb(i,a,c){i.flags|=16384,i={getSnapshot:a,value:c},a=$e.updateQueue,a===null?(a=ld(),$e.updateQueue=a,a.stores=[i]):(c=a.stores,c===null?a.stores=[i]:c.push(i))}function xb(i,a,c,f){a.value=c,a.getSnapshot=f,Eb(a)&&kb(i)}function Sb(i,a,c){return c(function(){Eb(a)&&kb(i)})}function Eb(i){var a=i.getSnapshot;i=i.value;try{var c=a();return!hr(i,c)}catch{return!0}}function kb(i){var a=Os(i,2);a!==null&&ar(a,i,2)}function Jp(i){var a=Kn();if(typeof i=="function"){var c=i;if(i=c(),Ps){ii(!0);try{c()}finally{ii(!1)}}}return a.memoizedState=a.baseState=i,a.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:i},a}function Tb(i,a,c,f){return i.baseState=c,Yp(i,wt,typeof f=="function"?f:Ii)}function t_(i,a,c,f,v){if(hd(i))throw Error(r(485));if(i=a.action,i!==null){var b={payload:v,action:i,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(T){b.listeners.push(T)}};H.T!==null?c(!0):b.isTransition=!1,f(b),c=a.pending,c===null?(b.next=a.pending=b,wb(a,b)):(b.next=c.next,a.pending=c.next=b)}}function wb(i,a){var c=a.action,f=a.payload,v=i.state;if(a.isTransition){var b=H.T,T={};H.T=T;try{var A=c(v,f),N=H.S;N!==null&&N(T,A),Cb(i,a,A)}catch(V){Qp(i,a,V)}finally{b!==null&&T.types!==null&&(b.types=T.types),H.T=b}}else try{b=c(v,f),Cb(i,a,b)}catch(V){Qp(i,a,V)}}function Cb(i,a,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(f){Ab(i,a,f)},function(f){return Qp(i,a,f)}):Ab(i,a,c)}function Ab(i,a,c){a.status="fulfilled",a.value=c,_b(a),i.state=c,a=i.pending,a!==null&&(c=a.next,c===a?i.pending=null:(c=c.next,a.next=c,wb(i,c)))}function Qp(i,a,c){var f=i.pending;if(i.pending=null,f!==null){f=f.next;do a.status="rejected",a.reason=c,_b(a),a=a.next;while(a!==f)}i.action=null}function _b(i){i=i.listeners;for(var a=0;a<i.length;a++)(0,i[a])()}function Mb(i,a){return a}function Ob(i,a){if(lt){var c=_t.formState;if(c!==null){e:{var f=$e;if(lt){if(Nt){t:{for(var v=Nt,b=jr;v.nodeType!==8;){if(!b){v=null;break t}if(v=Nr(v.nextSibling),v===null){v=null;break t}}b=v.data,v=b==="F!"||b==="F"?v:null}if(v){Nt=Nr(v.nextSibling),f=v.data==="F!";break e}}xo(f)}f=!1}f&&(a=c[0])}}return c=Kn(),c.memoizedState=c.baseState=a,f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Mb,lastRenderedState:a},c.queue=f,c=Yb.bind(null,$e,f),f.dispatch=c,f=Jp(!1),b=im.bind(null,$e,!1,f.queue),f=Kn(),v={state:a,dispatch:null,action:i,pending:null},f.queue=v,c=t_.bind(null,$e,v,b,c),v.dispatch=c,f.memoizedState=i,[a,c,!1]}function jb(i){var a=nn();return Rb(a,wt,i)}function Rb(i,a,c){if(a=Yp(i,a,Mb)[0],i=ud(Ii)[0],typeof a=="object"&&a!==null&&typeof a.then=="function")try{var f=ac(a)}catch(T){throw T===Ua?ed:T}else f=a;a=nn();var v=a.queue,b=v.dispatch;return c!==a.memoizedState&&($e.flags|=2048,Wa(9,{destroy:void 0},n_.bind(null,v,c),null)),[f,b,i]}function n_(i,a){i.action=a}function Nb(i){var a=nn(),c=wt;if(c!==null)return Rb(a,c,i);nn(),a=a.memoizedState,c=nn();var f=c.queue.dispatch;return c.memoizedState=i,[a,f,!1]}function Wa(i,a,c,f){return i={tag:i,create:c,deps:f,inst:a,next:null},a=$e.updateQueue,a===null&&(a=ld(),$e.updateQueue=a),c=a.lastEffect,c===null?a.lastEffect=i.next=i:(f=c.next,c.next=i,i.next=f,a.lastEffect=i),i}function Db(){return nn().memoizedState}function dd(i,a,c,f){var v=Kn();$e.flags|=i,v.memoizedState=Wa(1|a,{destroy:void 0},c,f===void 0?null:f)}function fd(i,a,c,f){var v=nn();f=f===void 0?null:f;var b=v.memoizedState.inst;wt!==null&&f!==null&&Vp(f,wt.memoizedState.deps)?v.memoizedState=Wa(a,b,c,f):($e.flags|=i,v.memoizedState=Wa(1|a,b,c,f))}function Lb(i,a){dd(8390656,8,i,a)}function Zp(i,a){fd(2048,8,i,a)}function r_(i){$e.flags|=4;var a=$e.updateQueue;if(a===null)a=ld(),$e.updateQueue=a,a.events=[i];else{var c=a.events;c===null?a.events=[i]:c.push(i)}}function zb(i){var a=nn().memoizedState;return r_({ref:a,nextImpl:i}),function(){if((vt&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}function Ib(i,a){return fd(4,2,i,a)}function Bb(i,a){return fd(4,4,i,a)}function Pb(i,a){if(typeof a=="function"){i=i();var c=a(i);return function(){typeof c=="function"?c():a(null)}}if(a!=null)return i=i(),a.current=i,function(){a.current=null}}function Ub(i,a,c){c=c!=null?c.concat([i]):null,fd(4,4,Pb.bind(null,a,i),c)}function em(){}function Hb(i,a){var c=nn();a=a===void 0?null:a;var f=c.memoizedState;return a!==null&&Vp(a,f[1])?f[0]:(c.memoizedState=[i,a],i)}function qb(i,a){var c=nn();a=a===void 0?null:a;var f=c.memoizedState;if(a!==null&&Vp(a,f[1]))return f[0];if(f=i(),Ps){ii(!0);try{i()}finally{ii(!1)}}return c.memoizedState=[f,a],f}function tm(i,a,c){return c===void 0||(zi&1073741824)!==0&&(st&261930)===0?i.memoizedState=a:(i.memoizedState=c,i=V1(),$e.lanes|=i,Mo|=i,c)}function Vb(i,a,c,f){return hr(c,a)?c:qa.current!==null?(i=tm(i,c,f),hr(i,a)||(cn=!0),i):(zi&42)===0||(zi&1073741824)!==0&&(st&261930)===0?(cn=!0,i.memoizedState=c):(i=V1(),$e.lanes|=i,Mo|=i,a)}function Fb(i,a,c,f,v){var b=ne.p;ne.p=b!==0&&8>b?b:8;var T=H.T,A={};H.T=A,im(i,!1,a,c);try{var N=v(),V=H.S;if(V!==null&&V(A,N),N!==null&&typeof N=="object"&&typeof N.then=="function"){var X=QA(N,f);lc(i,a,X,br(i))}else lc(i,a,f,br(i))}catch(ee){lc(i,a,{then:function(){},status:"rejected",reason:ee},br())}finally{ne.p=b,T!==null&&A.types!==null&&(T.types=A.types),H.T=T}}function i_(){}function nm(i,a,c,f){if(i.tag!==5)throw Error(r(476));var v=Wb(i).queue;Fb(i,v,a,ce,c===null?i_:function(){return Gb(i),c(f)})}function Wb(i){var a=i.memoizedState;if(a!==null)return a;a={memoizedState:ce,baseState:ce,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:ce},next:null};var c={};return a.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ii,lastRenderedState:c},next:null},i.memoizedState=a,i=i.alternate,i!==null&&(i.memoizedState=a),a}function Gb(i){var a=Wb(i);a.next===null&&(a=i.alternate.memoizedState),lc(i,a.next.queue,{},br())}function rm(){return Mn(wc)}function $b(){return nn().memoizedState}function Kb(){return nn().memoizedState}function o_(i){for(var a=i.return;a!==null;){switch(a.tag){case 24:case 3:var c=br();i=ko(c);var f=To(a,i,c);f!==null&&(ar(f,a,c),rc(f,a,c)),a={cache:Rp()},i.payload=a;return}a=a.return}}function s_(i,a,c){var f=br();c={lane:f,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null},hd(i)?Xb(a,c):(c=Sp(i,a,c,f),c!==null&&(ar(c,i,f),Jb(c,a,f)))}function Yb(i,a,c){var f=br();lc(i,a,c,f)}function lc(i,a,c,f){var v={lane:f,revertLane:0,gesture:null,action:c,hasEagerState:!1,eagerState:null,next:null};if(hd(i))Xb(a,v);else{var b=i.alternate;if(i.lanes===0&&(b===null||b.lanes===0)&&(b=a.lastRenderedReducer,b!==null))try{var T=a.lastRenderedState,A=b(T,c);if(v.hasEagerState=!0,v.eagerState=A,hr(A,T))return $u(i,a,v,0),_t===null&&Gu(),!1}catch{}finally{}if(c=Sp(i,a,v,f),c!==null)return ar(c,i,f),Jb(c,a,f),!0}return!1}function im(i,a,c,f){if(f={lane:2,revertLane:zm(),gesture:null,action:f,hasEagerState:!1,eagerState:null,next:null},hd(i)){if(a)throw Error(r(479))}else a=Sp(i,c,f,2),a!==null&&ar(a,i,2)}function hd(i){var a=i.alternate;return i===$e||a!==null&&a===$e}function Xb(i,a){Va=sd=!0;var c=i.pending;c===null?a.next=a:(a.next=c.next,c.next=a),i.pending=a}function Jb(i,a,c){if((c&4194048)!==0){var f=a.lanes;f&=i.pendingLanes,c|=f,a.lanes=c,Du(i,c)}}var cc={readContext:Mn,use:cd,useCallback:Xt,useContext:Xt,useEffect:Xt,useImperativeHandle:Xt,useLayoutEffect:Xt,useInsertionEffect:Xt,useMemo:Xt,useReducer:Xt,useRef:Xt,useState:Xt,useDebugValue:Xt,useDeferredValue:Xt,useTransition:Xt,useSyncExternalStore:Xt,useId:Xt,useHostTransitionStatus:Xt,useFormState:Xt,useActionState:Xt,useOptimistic:Xt,useMemoCache:Xt,useCacheRefresh:Xt};cc.useEffectEvent=Xt;var Qb={readContext:Mn,use:cd,useCallback:function(i,a){return Kn().memoizedState=[i,a===void 0?null:a],i},useContext:Mn,useEffect:Lb,useImperativeHandle:function(i,a,c){c=c!=null?c.concat([i]):null,dd(4194308,4,Pb.bind(null,a,i),c)},useLayoutEffect:function(i,a){return dd(4194308,4,i,a)},useInsertionEffect:function(i,a){dd(4,2,i,a)},useMemo:function(i,a){var c=Kn();a=a===void 0?null:a;var f=i();if(Ps){ii(!0);try{i()}finally{ii(!1)}}return c.memoizedState=[f,a],f},useReducer:function(i,a,c){var f=Kn();if(c!==void 0){var v=c(a);if(Ps){ii(!0);try{c(a)}finally{ii(!1)}}}else v=a;return f.memoizedState=f.baseState=v,i={pending:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:v},f.queue=i,i=i.dispatch=s_.bind(null,$e,i),[f.memoizedState,i]},useRef:function(i){var a=Kn();return i={current:i},a.memoizedState=i},useState:function(i){i=Jp(i);var a=i.queue,c=Yb.bind(null,$e,a);return a.dispatch=c,[i.memoizedState,c]},useDebugValue:em,useDeferredValue:function(i,a){var c=Kn();return tm(c,i,a)},useTransition:function(){var i=Jp(!1);return i=Fb.bind(null,$e,i.queue,!0,!1),Kn().memoizedState=i,[!1,i]},useSyncExternalStore:function(i,a,c){var f=$e,v=Kn();if(lt){if(c===void 0)throw Error(r(407));c=c()}else{if(c=a(),_t===null)throw Error(r(349));(st&127)!==0||bb(f,a,c)}v.memoizedState=c;var b={value:c,getSnapshot:a};return v.queue=b,Lb(Sb.bind(null,f,b,i),[i]),f.flags|=2048,Wa(9,{destroy:void 0},xb.bind(null,f,b,c,a),null),c},useId:function(){var i=Kn(),a=_t.identifierPrefix;if(lt){var c=ui,f=ci;c=(f&~(1<<32-Gn(f)-1)).toString(32)+c,a="_"+a+"R_"+c,c=ad++,0<c&&(a+="H"+c.toString(32)),a+="_"}else c=ZA++,a="_"+a+"r_"+c.toString(32)+"_";return i.memoizedState=a},useHostTransitionStatus:rm,useFormState:Ob,useActionState:Ob,useOptimistic:function(i){var a=Kn();a.memoizedState=a.baseState=i;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return a.queue=c,a=im.bind(null,$e,!0,c),c.dispatch=a,[i,a]},useMemoCache:Kp,useCacheRefresh:function(){return Kn().memoizedState=o_.bind(null,$e)},useEffectEvent:function(i){var a=Kn(),c={impl:i};return a.memoizedState=c,function(){if((vt&2)!==0)throw Error(r(440));return c.impl.apply(void 0,arguments)}}},om={readContext:Mn,use:cd,useCallback:Hb,useContext:Mn,useEffect:Zp,useImperativeHandle:Ub,useInsertionEffect:Ib,useLayoutEffect:Bb,useMemo:qb,useReducer:ud,useRef:Db,useState:function(){return ud(Ii)},useDebugValue:em,useDeferredValue:function(i,a){var c=nn();return Vb(c,wt.memoizedState,i,a)},useTransition:function(){var i=ud(Ii)[0],a=nn().memoizedState;return[typeof i=="boolean"?i:ac(i),a]},useSyncExternalStore:yb,useId:$b,useHostTransitionStatus:rm,useFormState:jb,useActionState:jb,useOptimistic:function(i,a){var c=nn();return Tb(c,wt,i,a)},useMemoCache:Kp,useCacheRefresh:Kb};om.useEffectEvent=zb;var Zb={readContext:Mn,use:cd,useCallback:Hb,useContext:Mn,useEffect:Zp,useImperativeHandle:Ub,useInsertionEffect:Ib,useLayoutEffect:Bb,useMemo:qb,useReducer:Xp,useRef:Db,useState:function(){return Xp(Ii)},useDebugValue:em,useDeferredValue:function(i,a){var c=nn();return wt===null?tm(c,i,a):Vb(c,wt.memoizedState,i,a)},useTransition:function(){var i=Xp(Ii)[0],a=nn().memoizedState;return[typeof i=="boolean"?i:ac(i),a]},useSyncExternalStore:yb,useId:$b,useHostTransitionStatus:rm,useFormState:Nb,useActionState:Nb,useOptimistic:function(i,a){var c=nn();return wt!==null?Tb(c,wt,i,a):(c.baseState=i,[i,c.queue.dispatch])},useMemoCache:Kp,useCacheRefresh:Kb};Zb.useEffectEvent=zb;function sm(i,a,c,f){a=i.memoizedState,c=c(f,a),c=c==null?a:g({},a,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var am={enqueueSetState:function(i,a,c){i=i._reactInternals;var f=br(),v=ko(f);v.payload=a,c!=null&&(v.callback=c),a=To(i,v,f),a!==null&&(ar(a,i,f),rc(a,i,f))},enqueueReplaceState:function(i,a,c){i=i._reactInternals;var f=br(),v=ko(f);v.tag=1,v.payload=a,c!=null&&(v.callback=c),a=To(i,v,f),a!==null&&(ar(a,i,f),rc(a,i,f))},enqueueForceUpdate:function(i,a){i=i._reactInternals;var c=br(),f=ko(c);f.tag=2,a!=null&&(f.callback=a),a=To(i,f,c),a!==null&&(ar(a,i,c),rc(a,i,c))}};function e1(i,a,c,f,v,b,T){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,b,T):a.prototype&&a.prototype.isPureReactComponent?!Yl(c,f)||!Yl(v,b):!0}function t1(i,a,c,f){i=a.state,typeof a.componentWillReceiveProps=="function"&&a.componentWillReceiveProps(c,f),typeof a.UNSAFE_componentWillReceiveProps=="function"&&a.UNSAFE_componentWillReceiveProps(c,f),a.state!==i&&am.enqueueReplaceState(a,a.state,null)}function Us(i,a){var c=a;if("ref"in a){c={};for(var f in a)f!=="ref"&&(c[f]=a[f])}if(i=i.defaultProps){c===a&&(c=g({},c));for(var v in i)c[v]===void 0&&(c[v]=i[v])}return c}function n1(i){Wu(i)}function r1(i){console.error(i)}function i1(i){Wu(i)}function pd(i,a){try{var c=i.onUncaughtError;c(a.value,{componentStack:a.stack})}catch(f){setTimeout(function(){throw f})}}function o1(i,a,c){try{var f=i.onCaughtError;f(c.value,{componentStack:c.stack,errorBoundary:a.tag===1?a.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function lm(i,a,c){return c=ko(c),c.tag=3,c.payload={element:null},c.callback=function(){pd(i,a)},c}function s1(i){return i=ko(i),i.tag=3,i}function a1(i,a,c,f){var v=c.type.getDerivedStateFromError;if(typeof v=="function"){var b=f.value;i.payload=function(){return v(b)},i.callback=function(){o1(a,c,f)}}var T=c.stateNode;T!==null&&typeof T.componentDidCatch=="function"&&(i.callback=function(){o1(a,c,f),typeof v!="function"&&(Oo===null?Oo=new Set([this]):Oo.add(this));var A=f.stack;this.componentDidCatch(f.value,{componentStack:A!==null?A:""})})}function a_(i,a,c,f,v){if(c.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){if(a=c.alternate,a!==null&&Ia(a,c,v,!0),c=mr.current,c!==null){switch(c.tag){case 31:case 13:return Rr===null?Cd():c.alternate===null&&Jt===0&&(Jt=3),c.flags&=-257,c.flags|=65536,c.lanes=v,f===td?c.flags|=16384:(a=c.updateQueue,a===null?c.updateQueue=new Set([f]):a.add(f),Nm(i,f,v)),!1;case 22:return c.flags|=65536,f===td?c.flags|=16384:(a=c.updateQueue,a===null?(a={transitions:null,markerInstances:null,retryQueue:new Set([f])},c.updateQueue=a):(c=a.retryQueue,c===null?a.retryQueue=new Set([f]):c.add(f)),Nm(i,f,v)),!1}throw Error(r(435,c.tag))}return Nm(i,f,v),Cd(),!1}if(lt)return a=mr.current,a!==null?((a.flags&65536)===0&&(a.flags|=256),a.flags|=65536,a.lanes=v,f!==Ap&&(i=Error(r(422),{cause:f}),Ql(_r(i,c)))):(f!==Ap&&(a=Error(r(423),{cause:f}),Ql(_r(a,c))),i=i.current.alternate,i.flags|=65536,v&=-v,i.lanes|=v,f=_r(f,c),v=lm(i.stateNode,f,v),Bp(i,v),Jt!==4&&(Jt=2)),!1;var b=Error(r(520),{cause:f});if(b=_r(b,c),vc===null?vc=[b]:vc.push(b),Jt!==4&&(Jt=2),a===null)return!0;f=_r(f,c),c=a;do{switch(c.tag){case 3:return c.flags|=65536,i=v&-v,c.lanes|=i,i=lm(c.stateNode,f,i),Bp(c,i),!1;case 1:if(a=c.type,b=c.stateNode,(c.flags&128)===0&&(typeof a.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Oo===null||!Oo.has(b))))return c.flags|=65536,v&=-v,c.lanes|=v,v=s1(v),a1(v,i,c,f),Bp(c,v),!1}c=c.return}while(c!==null);return!1}var cm=Error(r(461)),cn=!1;function On(i,a,c,f){a.child=i===null?db(a,null,c,f):Bs(a,i.child,c,f)}function l1(i,a,c,f,v){c=c.render;var b=a.ref;if("ref"in f){var T={};for(var A in f)A!=="ref"&&(T[A]=f[A])}else T=f;return Ds(a),f=Fp(i,a,c,T,b,v),A=Wp(),i!==null&&!cn?(Gp(i,a,v),Bi(i,a,v)):(lt&&A&&wp(a),a.flags|=1,On(i,a,f,v),a.child)}function c1(i,a,c,f,v){if(i===null){var b=c.type;return typeof b=="function"&&!Ep(b)&&b.defaultProps===void 0&&c.compare===null?(a.tag=15,a.type=b,u1(i,a,b,f,v)):(i=Yu(c.type,null,f,a,a.mode,v),i.ref=a.ref,i.return=a,a.child=i)}if(b=i.child,!vm(i,v)){var T=b.memoizedProps;if(c=c.compare,c=c!==null?c:Yl,c(T,f)&&i.ref===a.ref)return Bi(i,a,v)}return a.flags|=1,i=Ri(b,f),i.ref=a.ref,i.return=a,a.child=i}function u1(i,a,c,f,v){if(i!==null){var b=i.memoizedProps;if(Yl(b,f)&&i.ref===a.ref)if(cn=!1,a.pendingProps=f=b,vm(i,v))(i.flags&131072)!==0&&(cn=!0);else return a.lanes=i.lanes,Bi(i,a,v)}return um(i,a,c,f,v)}function d1(i,a,c,f){var v=f.children,b=i!==null?i.memoizedState:null;if(i===null&&a.stateNode===null&&(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),f.mode==="hidden"){if((a.flags&128)!==0){if(b=b!==null?b.baseLanes|c:c,i!==null){for(f=a.child=i.child,v=0;f!==null;)v=v|f.lanes|f.childLanes,f=f.sibling;f=v&~b}else f=0,a.child=null;return f1(i,a,b,c,f)}if((c&536870912)!==0)a.memoizedState={baseLanes:0,cachePool:null},i!==null&&Zu(a,b!==null?b.cachePool:null),b!==null?pb(a,b):Up(),mb(a);else return f=a.lanes=536870912,f1(i,a,b!==null?b.baseLanes|c:c,c,f)}else b!==null?(Zu(a,b.cachePool),pb(a,b),Co(),a.memoizedState=null):(i!==null&&Zu(a,null),Up(),Co());return On(i,a,v,c),a.child}function uc(i,a){return i!==null&&i.tag===22||a.stateNode!==null||(a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),a.sibling}function f1(i,a,c,f,v){var b=Dp();return b=b===null?null:{parent:an._currentValue,pool:b},a.memoizedState={baseLanes:c,cachePool:b},i!==null&&Zu(a,null),Up(),mb(a),i!==null&&Ia(i,a,f,!0),a.childLanes=v,null}function md(i,a){return a=vd({mode:a.mode,children:a.children},i.mode),a.ref=i.ref,i.child=a,a.return=i,a}function h1(i,a,c){return Bs(a,i.child,null,c),i=md(a,a.pendingProps),i.flags|=2,gr(a),a.memoizedState=null,i}function l_(i,a,c){var f=a.pendingProps,v=(a.flags&128)!==0;if(a.flags&=-129,i===null){if(lt){if(f.mode==="hidden")return i=md(a,f),a.lanes=536870912,uc(null,i);if(qp(a),(i=Nt)?(i=wx(i,jr),i=i!==null&&i.data==="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:yo!==null?{id:ci,overflow:ui}:null,retryLane:536870912,hydrationErrors:null},c=Xy(i),c.return=a,a.child=c,_n=a,Nt=null)):i=null,i===null)throw xo(a);return a.lanes=536870912,null}return md(a,f)}var b=i.memoizedState;if(b!==null){var T=b.dehydrated;if(qp(a),v)if(a.flags&256)a.flags&=-257,a=h1(i,a,c);else if(a.memoizedState!==null)a.child=i.child,a.flags|=128,a=null;else throw Error(r(558));else if(cn||Ia(i,a,c,!1),v=(c&i.childLanes)!==0,cn||v){if(f=_t,f!==null&&(T=Fe(f,c),T!==0&&T!==b.retryLane))throw b.retryLane=T,Os(i,T),ar(f,i,T),cm;Cd(),a=h1(i,a,c)}else i=b.treeContext,Nt=Nr(T.nextSibling),_n=a,lt=!0,bo=null,jr=!1,i!==null&&Zy(a,i),a=md(a,f),a.flags|=4096;return a}return i=Ri(i.child,{mode:f.mode,children:f.children}),i.ref=a.ref,a.child=i,i.return=a,i}function gd(i,a){var c=a.ref;if(c===null)i!==null&&i.ref!==null&&(a.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(r(284));(i===null||i.ref!==c)&&(a.flags|=4194816)}}function um(i,a,c,f,v){return Ds(a),c=Fp(i,a,c,f,void 0,v),f=Wp(),i!==null&&!cn?(Gp(i,a,v),Bi(i,a,v)):(lt&&f&&wp(a),a.flags|=1,On(i,a,c,v),a.child)}function p1(i,a,c,f,v,b){return Ds(a),a.updateQueue=null,c=vb(a,f,c,v),gb(i),f=Wp(),i!==null&&!cn?(Gp(i,a,b),Bi(i,a,b)):(lt&&f&&wp(a),a.flags|=1,On(i,a,c,b),a.child)}function m1(i,a,c,f,v){if(Ds(a),a.stateNode===null){var b=Na,T=c.contextType;typeof T=="object"&&T!==null&&(b=Mn(T)),b=new c(f,b),a.memoizedState=b.state!==null&&b.state!==void 0?b.state:null,b.updater=am,a.stateNode=b,b._reactInternals=a,b=a.stateNode,b.props=f,b.state=a.memoizedState,b.refs={},zp(a),T=c.contextType,b.context=typeof T=="object"&&T!==null?Mn(T):Na,b.state=a.memoizedState,T=c.getDerivedStateFromProps,typeof T=="function"&&(sm(a,c,T,f),b.state=a.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof b.getSnapshotBeforeUpdate=="function"||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(T=b.state,typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount(),T!==b.state&&am.enqueueReplaceState(b,b.state,null),oc(a,f,b,v),ic(),b.state=a.memoizedState),typeof b.componentDidMount=="function"&&(a.flags|=4194308),f=!0}else if(i===null){b=a.stateNode;var A=a.memoizedProps,N=Us(c,A);b.props=N;var V=b.context,X=c.contextType;T=Na,typeof X=="object"&&X!==null&&(T=Mn(X));var ee=c.getDerivedStateFromProps;X=typeof ee=="function"||typeof b.getSnapshotBeforeUpdate=="function",A=a.pendingProps!==A,X||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(A||V!==T)&&t1(a,b,f,T),Eo=!1;var F=a.memoizedState;b.state=F,oc(a,f,b,v),ic(),V=a.memoizedState,A||F!==V||Eo?(typeof ee=="function"&&(sm(a,c,ee,f),V=a.memoizedState),(N=Eo||e1(a,c,N,f,F,V,T))?(X||typeof b.UNSAFE_componentWillMount!="function"&&typeof b.componentWillMount!="function"||(typeof b.componentWillMount=="function"&&b.componentWillMount(),typeof b.UNSAFE_componentWillMount=="function"&&b.UNSAFE_componentWillMount()),typeof b.componentDidMount=="function"&&(a.flags|=4194308)):(typeof b.componentDidMount=="function"&&(a.flags|=4194308),a.memoizedProps=f,a.memoizedState=V),b.props=f,b.state=V,b.context=T,f=N):(typeof b.componentDidMount=="function"&&(a.flags|=4194308),f=!1)}else{b=a.stateNode,Ip(i,a),T=a.memoizedProps,X=Us(c,T),b.props=X,ee=a.pendingProps,F=b.context,V=c.contextType,N=Na,typeof V=="object"&&V!==null&&(N=Mn(V)),A=c.getDerivedStateFromProps,(V=typeof A=="function"||typeof b.getSnapshotBeforeUpdate=="function")||typeof b.UNSAFE_componentWillReceiveProps!="function"&&typeof b.componentWillReceiveProps!="function"||(T!==ee||F!==N)&&t1(a,b,f,N),Eo=!1,F=a.memoizedState,b.state=F,oc(a,f,b,v),ic();var $=a.memoizedState;T!==ee||F!==$||Eo||i!==null&&i.dependencies!==null&&Ju(i.dependencies)?(typeof A=="function"&&(sm(a,c,A,f),$=a.memoizedState),(X=Eo||e1(a,c,X,f,F,$,N)||i!==null&&i.dependencies!==null&&Ju(i.dependencies))?(V||typeof b.UNSAFE_componentWillUpdate!="function"&&typeof b.componentWillUpdate!="function"||(typeof b.componentWillUpdate=="function"&&b.componentWillUpdate(f,$,N),typeof b.UNSAFE_componentWillUpdate=="function"&&b.UNSAFE_componentWillUpdate(f,$,N)),typeof b.componentDidUpdate=="function"&&(a.flags|=4),typeof b.getSnapshotBeforeUpdate=="function"&&(a.flags|=1024)):(typeof b.componentDidUpdate!="function"||T===i.memoizedProps&&F===i.memoizedState||(a.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&F===i.memoizedState||(a.flags|=1024),a.memoizedProps=f,a.memoizedState=$),b.props=f,b.state=$,b.context=N,f=X):(typeof b.componentDidUpdate!="function"||T===i.memoizedProps&&F===i.memoizedState||(a.flags|=4),typeof b.getSnapshotBeforeUpdate!="function"||T===i.memoizedProps&&F===i.memoizedState||(a.flags|=1024),f=!1)}return b=f,gd(i,a),f=(a.flags&128)!==0,b||f?(b=a.stateNode,c=f&&typeof c.getDerivedStateFromError!="function"?null:b.render(),a.flags|=1,i!==null&&f?(a.child=Bs(a,i.child,null,v),a.child=Bs(a,null,c,v)):On(i,a,c,v),a.memoizedState=b.state,i=a.child):i=Bi(i,a,v),i}function g1(i,a,c,f){return Rs(),a.flags|=256,On(i,a,c,f),a.child}var dm={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function fm(i){return{baseLanes:i,cachePool:ob()}}function hm(i,a,c){return i=i!==null?i.childLanes&~c:0,a&&(i|=yr),i}function v1(i,a,c){var f=a.pendingProps,v=!1,b=(a.flags&128)!==0,T;if((T=b)||(T=i!==null&&i.memoizedState===null?!1:(tn.current&2)!==0),T&&(v=!0,a.flags&=-129),T=(a.flags&32)!==0,a.flags&=-33,i===null){if(lt){if(v?wo(a):Co(),(i=Nt)?(i=wx(i,jr),i=i!==null&&i.data!=="&"?i:null,i!==null&&(a.memoizedState={dehydrated:i,treeContext:yo!==null?{id:ci,overflow:ui}:null,retryLane:536870912,hydrationErrors:null},c=Xy(i),c.return=a,a.child=c,_n=a,Nt=null)):i=null,i===null)throw xo(a);return Ym(i)?a.lanes=32:a.lanes=536870912,null}var A=f.children;return f=f.fallback,v?(Co(),v=a.mode,A=vd({mode:"hidden",children:A},v),f=js(f,v,c,null),A.return=a,f.return=a,A.sibling=f,a.child=A,f=a.child,f.memoizedState=fm(c),f.childLanes=hm(i,T,c),a.memoizedState=dm,uc(null,f)):(wo(a),pm(a,A))}var N=i.memoizedState;if(N!==null&&(A=N.dehydrated,A!==null)){if(b)a.flags&256?(wo(a),a.flags&=-257,a=mm(i,a,c)):a.memoizedState!==null?(Co(),a.child=i.child,a.flags|=128,a=null):(Co(),A=f.fallback,v=a.mode,f=vd({mode:"visible",children:f.children},v),A=js(A,v,c,null),A.flags|=2,f.return=a,A.return=a,f.sibling=A,a.child=f,Bs(a,i.child,null,c),f=a.child,f.memoizedState=fm(c),f.childLanes=hm(i,T,c),a.memoizedState=dm,a=uc(null,f));else if(wo(a),Ym(A)){if(T=A.nextSibling&&A.nextSibling.dataset,T)var V=T.dgst;T=V,f=Error(r(419)),f.stack="",f.digest=T,Ql({value:f,source:null,stack:null}),a=mm(i,a,c)}else if(cn||Ia(i,a,c,!1),T=(c&i.childLanes)!==0,cn||T){if(T=_t,T!==null&&(f=Fe(T,c),f!==0&&f!==N.retryLane))throw N.retryLane=f,Os(i,f),ar(T,i,f),cm;Km(A)||Cd(),a=mm(i,a,c)}else Km(A)?(a.flags|=192,a.child=i.child,a=null):(i=N.treeContext,Nt=Nr(A.nextSibling),_n=a,lt=!0,bo=null,jr=!1,i!==null&&Zy(a,i),a=pm(a,f.children),a.flags|=4096);return a}return v?(Co(),A=f.fallback,v=a.mode,N=i.child,V=N.sibling,f=Ri(N,{mode:"hidden",children:f.children}),f.subtreeFlags=N.subtreeFlags&65011712,V!==null?A=Ri(V,A):(A=js(A,v,c,null),A.flags|=2),A.return=a,f.return=a,f.sibling=A,a.child=f,uc(null,f),f=a.child,A=i.child.memoizedState,A===null?A=fm(c):(v=A.cachePool,v!==null?(N=an._currentValue,v=v.parent!==N?{parent:N,pool:N}:v):v=ob(),A={baseLanes:A.baseLanes|c,cachePool:v}),f.memoizedState=A,f.childLanes=hm(i,T,c),a.memoizedState=dm,uc(i.child,f)):(wo(a),c=i.child,i=c.sibling,c=Ri(c,{mode:"visible",children:f.children}),c.return=a,c.sibling=null,i!==null&&(T=a.deletions,T===null?(a.deletions=[i],a.flags|=16):T.push(i)),a.child=c,a.memoizedState=null,c)}function pm(i,a){return a=vd({mode:"visible",children:a},i.mode),a.return=i,i.child=a}function vd(i,a){return i=pr(22,i,null,a),i.lanes=0,i}function mm(i,a,c){return Bs(a,i.child,null,c),i=pm(a,a.pendingProps.children),i.flags|=2,a.memoizedState=null,i}function y1(i,a,c){i.lanes|=a;var f=i.alternate;f!==null&&(f.lanes|=a),Op(i.return,a,c)}function gm(i,a,c,f,v,b){var T=i.memoizedState;T===null?i.memoizedState={isBackwards:a,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:v,treeForkCount:b}:(T.isBackwards=a,T.rendering=null,T.renderingStartTime=0,T.last=f,T.tail=c,T.tailMode=v,T.treeForkCount=b)}function b1(i,a,c){var f=a.pendingProps,v=f.revealOrder,b=f.tail;f=f.children;var T=tn.current,A=(T&2)!==0;if(A?(T=T&1|2,a.flags|=128):T&=1,ue(tn,T),On(i,a,f,c),f=lt?Jl:0,!A&&i!==null&&(i.flags&128)!==0)e:for(i=a.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&y1(i,c,a);else if(i.tag===19)y1(i,c,a);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===a)break e;for(;i.sibling===null;){if(i.return===null||i.return===a)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}switch(v){case"forwards":for(c=a.child,v=null;c!==null;)i=c.alternate,i!==null&&od(i)===null&&(v=c),c=c.sibling;c=v,c===null?(v=a.child,a.child=null):(v=c.sibling,c.sibling=null),gm(a,!1,v,c,b,f);break;case"backwards":case"unstable_legacy-backwards":for(c=null,v=a.child,a.child=null;v!==null;){if(i=v.alternate,i!==null&&od(i)===null){a.child=v;break}i=v.sibling,v.sibling=c,c=v,v=i}gm(a,!0,c,null,b,f);break;case"together":gm(a,!1,null,null,void 0,f);break;default:a.memoizedState=null}return a.child}function Bi(i,a,c){if(i!==null&&(a.dependencies=i.dependencies),Mo|=a.lanes,(c&a.childLanes)===0)if(i!==null){if(Ia(i,a,c,!1),(c&a.childLanes)===0)return null}else return null;if(i!==null&&a.child!==i.child)throw Error(r(153));if(a.child!==null){for(i=a.child,c=Ri(i,i.pendingProps),a.child=c,c.return=a;i.sibling!==null;)i=i.sibling,c=c.sibling=Ri(i,i.pendingProps),c.return=a;c.sibling=null}return a.child}function vm(i,a){return(i.lanes&a)!==0?!0:(i=i.dependencies,!!(i!==null&&Ju(i)))}function c_(i,a,c){switch(a.tag){case 3:mt(a,a.stateNode.containerInfo),So(a,an,i.memoizedState.cache),Rs();break;case 27:case 5:Wn(a);break;case 4:mt(a,a.stateNode.containerInfo);break;case 10:So(a,a.type,a.memoizedProps.value);break;case 31:if(a.memoizedState!==null)return a.flags|=128,qp(a),null;break;case 13:var f=a.memoizedState;if(f!==null)return f.dehydrated!==null?(wo(a),a.flags|=128,null):(c&a.child.childLanes)!==0?v1(i,a,c):(wo(a),i=Bi(i,a,c),i!==null?i.sibling:null);wo(a);break;case 19:var v=(i.flags&128)!==0;if(f=(c&a.childLanes)!==0,f||(Ia(i,a,c,!1),f=(c&a.childLanes)!==0),v){if(f)return b1(i,a,c);a.flags|=128}if(v=a.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),ue(tn,tn.current),f)break;return null;case 22:return a.lanes=0,d1(i,a,c,a.pendingProps);case 24:So(a,an,i.memoizedState.cache)}return Bi(i,a,c)}function x1(i,a,c){if(i!==null)if(i.memoizedProps!==a.pendingProps)cn=!0;else{if(!vm(i,c)&&(a.flags&128)===0)return cn=!1,c_(i,a,c);cn=(i.flags&131072)!==0}else cn=!1,lt&&(a.flags&1048576)!==0&&Qy(a,Jl,a.index);switch(a.lanes=0,a.tag){case 16:e:{var f=a.pendingProps;if(i=zs(a.elementType),a.type=i,typeof i=="function")Ep(i)?(f=Us(i,f),a.tag=1,a=m1(null,a,i,f,c)):(a.tag=0,a=um(null,a,i,f,c));else{if(i!=null){var v=i.$$typeof;if(v===R){a.tag=11,a=l1(null,a,i,f,c);break e}else if(v===B){a.tag=14,a=c1(null,a,i,f,c);break e}}throw a=ke(i)||i,Error(r(306,a,""))}}return a;case 0:return um(i,a,a.type,a.pendingProps,c);case 1:return f=a.type,v=Us(f,a.pendingProps),m1(i,a,f,v,c);case 3:e:{if(mt(a,a.stateNode.containerInfo),i===null)throw Error(r(387));f=a.pendingProps;var b=a.memoizedState;v=b.element,Ip(i,a),oc(a,f,null,c);var T=a.memoizedState;if(f=T.cache,So(a,an,f),f!==b.cache&&jp(a,[an],c,!0),ic(),f=T.element,b.isDehydrated)if(b={element:f,isDehydrated:!1,cache:T.cache},a.updateQueue.baseState=b,a.memoizedState=b,a.flags&256){a=g1(i,a,f,c);break e}else if(f!==v){v=_r(Error(r(424)),a),Ql(v),a=g1(i,a,f,c);break e}else{switch(i=a.stateNode.containerInfo,i.nodeType){case 9:i=i.body;break;default:i=i.nodeName==="HTML"?i.ownerDocument.body:i}for(Nt=Nr(i.firstChild),_n=a,lt=!0,bo=null,jr=!0,c=db(a,null,f,c),a.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(Rs(),f===v){a=Bi(i,a,c);break e}On(i,a,f,c)}a=a.child}return a;case 26:return gd(i,a),i===null?(c=jx(a.type,null,a.pendingProps,null))?a.memoizedState=c:lt||(c=a.type,i=a.pendingProps,f=Nd(se.current).createElement(c),f[on]=a,f[An]=i,jn(f,c,i),sn(f),a.stateNode=f):a.memoizedState=jx(a.type,i.memoizedProps,a.pendingProps,i.memoizedState),null;case 27:return Wn(a),i===null&&lt&&(f=a.stateNode=_x(a.type,a.pendingProps,se.current),_n=a,jr=!0,v=Nt,Do(a.type)?(Xm=v,Nt=Nr(f.firstChild)):Nt=v),On(i,a,a.pendingProps.children,c),gd(i,a),i===null&&(a.flags|=4194304),a.child;case 5:return i===null&&lt&&((v=f=Nt)&&(f=P_(f,a.type,a.pendingProps,jr),f!==null?(a.stateNode=f,_n=a,Nt=Nr(f.firstChild),jr=!1,v=!0):v=!1),v||xo(a)),Wn(a),v=a.type,b=a.pendingProps,T=i!==null?i.memoizedProps:null,f=b.children,Wm(v,b)?f=null:T!==null&&Wm(v,T)&&(a.flags|=32),a.memoizedState!==null&&(v=Fp(i,a,e_,null,null,c),wc._currentValue=v),gd(i,a),On(i,a,f,c),a.child;case 6:return i===null&&lt&&((i=c=Nt)&&(c=U_(c,a.pendingProps,jr),c!==null?(a.stateNode=c,_n=a,Nt=null,i=!0):i=!1),i||xo(a)),null;case 13:return v1(i,a,c);case 4:return mt(a,a.stateNode.containerInfo),f=a.pendingProps,i===null?a.child=Bs(a,null,f,c):On(i,a,f,c),a.child;case 11:return l1(i,a,a.type,a.pendingProps,c);case 7:return On(i,a,a.pendingProps,c),a.child;case 8:return On(i,a,a.pendingProps.children,c),a.child;case 12:return On(i,a,a.pendingProps.children,c),a.child;case 10:return f=a.pendingProps,So(a,a.type,f.value),On(i,a,f.children,c),a.child;case 9:return v=a.type._context,f=a.pendingProps.children,Ds(a),v=Mn(v),f=f(v),a.flags|=1,On(i,a,f,c),a.child;case 14:return c1(i,a,a.type,a.pendingProps,c);case 15:return u1(i,a,a.type,a.pendingProps,c);case 19:return b1(i,a,c);case 31:return l_(i,a,c);case 22:return d1(i,a,c,a.pendingProps);case 24:return Ds(a),f=Mn(an),i===null?(v=Dp(),v===null&&(v=_t,b=Rp(),v.pooledCache=b,b.refCount++,b!==null&&(v.pooledCacheLanes|=c),v=b),a.memoizedState={parent:f,cache:v},zp(a),So(a,an,v)):((i.lanes&c)!==0&&(Ip(i,a),oc(a,null,null,c),ic()),v=i.memoizedState,b=a.memoizedState,v.parent!==f?(v={parent:f,cache:f},a.memoizedState=v,a.lanes===0&&(a.memoizedState=a.updateQueue.baseState=v),So(a,an,f)):(f=b.cache,So(a,an,f),f!==v.cache&&jp(a,[an],c,!0))),On(i,a,a.pendingProps.children,c),a.child;case 29:throw a.pendingProps}throw Error(r(156,a.tag))}function Pi(i){i.flags|=4}function ym(i,a,c,f,v){if((a=(i.mode&32)!==0)&&(a=!1),a){if(i.flags|=16777216,(v&335544128)===v)if(i.stateNode.complete)i.flags|=8192;else if($1())i.flags|=8192;else throw Is=td,Lp}else i.flags&=-16777217}function S1(i,a){if(a.type!=="stylesheet"||(a.state.loading&4)!==0)i.flags&=-16777217;else if(i.flags|=16777216,!zx(a))if($1())i.flags|=8192;else throw Is=td,Lp}function yd(i,a){a!==null&&(i.flags|=4),i.flags&16384&&(a=i.tag!==22?Ru():536870912,i.lanes|=a,Xa|=a)}function dc(i,a){if(!lt)switch(i.tailMode){case"hidden":a=i.tail;for(var c=null;a!==null;)a.alternate!==null&&(c=a),a=a.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?a||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function Dt(i){var a=i.alternate!==null&&i.alternate.child===i.child,c=0,f=0;if(a)for(var v=i.child;v!==null;)c|=v.lanes|v.childLanes,f|=v.subtreeFlags&65011712,f|=v.flags&65011712,v.return=i,v=v.sibling;else for(v=i.child;v!==null;)c|=v.lanes|v.childLanes,f|=v.subtreeFlags,f|=v.flags,v.return=i,v=v.sibling;return i.subtreeFlags|=f,i.childLanes=c,a}function u_(i,a,c){var f=a.pendingProps;switch(Cp(a),a.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(a),null;case 1:return Dt(a),null;case 3:return c=a.stateNode,f=null,i!==null&&(f=i.memoizedState.cache),a.memoizedState.cache!==f&&(a.flags|=2048),Li(an),wn(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(i===null||i.child===null)&&(za(a)?Pi(a):i===null||i.memoizedState.isDehydrated&&(a.flags&256)===0||(a.flags|=1024,_p())),Dt(a),null;case 26:var v=a.type,b=a.memoizedState;return i===null?(Pi(a),b!==null?(Dt(a),S1(a,b)):(Dt(a),ym(a,v,null,f,c))):b?b!==i.memoizedState?(Pi(a),Dt(a),S1(a,b)):(Dt(a),a.flags&=-16777217):(i=i.memoizedProps,i!==f&&Pi(a),Dt(a),ym(a,v,i,f,c)),null;case 27:if(yn(a),c=se.current,v=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==f&&Pi(a);else{if(!f){if(a.stateNode===null)throw Error(r(166));return Dt(a),null}i=We.current,za(a)?eb(a):(i=_x(v,f,c),a.stateNode=i,Pi(a))}return Dt(a),null;case 5:if(yn(a),v=a.type,i!==null&&a.stateNode!=null)i.memoizedProps!==f&&Pi(a);else{if(!f){if(a.stateNode===null)throw Error(r(166));return Dt(a),null}if(b=We.current,za(a))eb(a);else{var T=Nd(se.current);switch(b){case 1:b=T.createElementNS("http://www.w3.org/2000/svg",v);break;case 2:b=T.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;default:switch(v){case"svg":b=T.createElementNS("http://www.w3.org/2000/svg",v);break;case"math":b=T.createElementNS("http://www.w3.org/1998/Math/MathML",v);break;case"script":b=T.createElement("div"),b.innerHTML="<script><\/script>",b=b.removeChild(b.firstChild);break;case"select":b=typeof f.is=="string"?T.createElement("select",{is:f.is}):T.createElement("select"),f.multiple?b.multiple=!0:f.size&&(b.size=f.size);break;default:b=typeof f.is=="string"?T.createElement(v,{is:f.is}):T.createElement(v)}}b[on]=a,b[An]=f;e:for(T=a.child;T!==null;){if(T.tag===5||T.tag===6)b.appendChild(T.stateNode);else if(T.tag!==4&&T.tag!==27&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===a)break e;for(;T.sibling===null;){if(T.return===null||T.return===a)break e;T=T.return}T.sibling.return=T.return,T=T.sibling}a.stateNode=b;e:switch(jn(b,v,f),v){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}f&&Pi(a)}}return Dt(a),ym(a,a.type,i===null?null:i.memoizedProps,a.pendingProps,c),null;case 6:if(i&&a.stateNode!=null)i.memoizedProps!==f&&Pi(a);else{if(typeof f!="string"&&a.stateNode===null)throw Error(r(166));if(i=se.current,za(a)){if(i=a.stateNode,c=a.memoizedProps,f=null,v=_n,v!==null)switch(v.tag){case 27:case 5:f=v.memoizedProps}i[on]=a,i=!!(i.nodeValue===c||f!==null&&f.suppressHydrationWarning===!0||vx(i.nodeValue,c)),i||xo(a,!0)}else i=Nd(i).createTextNode(f),i[on]=a,a.stateNode=i}return Dt(a),null;case 31:if(c=a.memoizedState,i===null||i.memoizedState!==null){if(f=za(a),c!==null){if(i===null){if(!f)throw Error(r(318));if(i=a.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(r(557));i[on]=a}else Rs(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Dt(a),i=!1}else c=_p(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=c),i=!0;if(!i)return a.flags&256?(gr(a),a):(gr(a),null);if((a.flags&128)!==0)throw Error(r(558))}return Dt(a),null;case 13:if(f=a.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(v=za(a),f!==null&&f.dehydrated!==null){if(i===null){if(!v)throw Error(r(318));if(v=a.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(r(317));v[on]=a}else Rs(),(a.flags&128)===0&&(a.memoizedState=null),a.flags|=4;Dt(a),v=!1}else v=_p(),i!==null&&i.memoizedState!==null&&(i.memoizedState.hydrationErrors=v),v=!0;if(!v)return a.flags&256?(gr(a),a):(gr(a),null)}return gr(a),(a.flags&128)!==0?(a.lanes=c,a):(c=f!==null,i=i!==null&&i.memoizedState!==null,c&&(f=a.child,v=null,f.alternate!==null&&f.alternate.memoizedState!==null&&f.alternate.memoizedState.cachePool!==null&&(v=f.alternate.memoizedState.cachePool.pool),b=null,f.memoizedState!==null&&f.memoizedState.cachePool!==null&&(b=f.memoizedState.cachePool.pool),b!==v&&(f.flags|=2048)),c!==i&&c&&(a.child.flags|=8192),yd(a,a.updateQueue),Dt(a),null);case 4:return wn(),i===null&&Um(a.stateNode.containerInfo),Dt(a),null;case 10:return Li(a.type),Dt(a),null;case 19:if(fe(tn),f=a.memoizedState,f===null)return Dt(a),null;if(v=(a.flags&128)!==0,b=f.rendering,b===null)if(v)dc(f,!1);else{if(Jt!==0||i!==null&&(i.flags&128)!==0)for(i=a.child;i!==null;){if(b=od(i),b!==null){for(a.flags|=128,dc(f,!1),i=b.updateQueue,a.updateQueue=i,yd(a,i),a.subtreeFlags=0,i=c,c=a.child;c!==null;)Yy(c,i),c=c.sibling;return ue(tn,tn.current&1|2),lt&&Ni(a,f.treeForkCount),a.child}i=i.sibling}f.tail!==null&&It()>kd&&(a.flags|=128,v=!0,dc(f,!1),a.lanes=4194304)}else{if(!v)if(i=od(b),i!==null){if(a.flags|=128,v=!0,i=i.updateQueue,a.updateQueue=i,yd(a,i),dc(f,!0),f.tail===null&&f.tailMode==="hidden"&&!b.alternate&&!lt)return Dt(a),null}else 2*It()-f.renderingStartTime>kd&&c!==536870912&&(a.flags|=128,v=!0,dc(f,!1),a.lanes=4194304);f.isBackwards?(b.sibling=a.child,a.child=b):(i=f.last,i!==null?i.sibling=b:a.child=b,f.last=b)}return f.tail!==null?(i=f.tail,f.rendering=i,f.tail=i.sibling,f.renderingStartTime=It(),i.sibling=null,c=tn.current,ue(tn,v?c&1|2:c&1),lt&&Ni(a,f.treeForkCount),i):(Dt(a),null);case 22:case 23:return gr(a),Hp(),f=a.memoizedState!==null,i!==null?i.memoizedState!==null!==f&&(a.flags|=8192):f&&(a.flags|=8192),f?(c&536870912)!==0&&(a.flags&128)===0&&(Dt(a),a.subtreeFlags&6&&(a.flags|=8192)):Dt(a),c=a.updateQueue,c!==null&&yd(a,c.retryQueue),c=null,i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),f=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),f!==c&&(a.flags|=2048),i!==null&&fe(Ls),null;case 24:return c=null,i!==null&&(c=i.memoizedState.cache),a.memoizedState.cache!==c&&(a.flags|=2048),Li(an),Dt(a),null;case 25:return null;case 30:return null}throw Error(r(156,a.tag))}function d_(i,a){switch(Cp(a),a.tag){case 1:return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 3:return Li(an),wn(),i=a.flags,(i&65536)!==0&&(i&128)===0?(a.flags=i&-65537|128,a):null;case 26:case 27:case 5:return yn(a),null;case 31:if(a.memoizedState!==null){if(gr(a),a.alternate===null)throw Error(r(340));Rs()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 13:if(gr(a),i=a.memoizedState,i!==null&&i.dehydrated!==null){if(a.alternate===null)throw Error(r(340));Rs()}return i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 19:return fe(tn),null;case 4:return wn(),null;case 10:return Li(a.type),null;case 22:case 23:return gr(a),Hp(),i!==null&&fe(Ls),i=a.flags,i&65536?(a.flags=i&-65537|128,a):null;case 24:return Li(an),null;case 25:return null;default:return null}}function E1(i,a){switch(Cp(a),a.tag){case 3:Li(an),wn();break;case 26:case 27:case 5:yn(a);break;case 4:wn();break;case 31:a.memoizedState!==null&&gr(a);break;case 13:gr(a);break;case 19:fe(tn);break;case 10:Li(a.type);break;case 22:case 23:gr(a),Hp(),i!==null&&fe(Ls);break;case 24:Li(an)}}function fc(i,a){try{var c=a.updateQueue,f=c!==null?c.lastEffect:null;if(f!==null){var v=f.next;c=v;do{if((c.tag&i)===i){f=void 0;var b=c.create,T=c.inst;f=b(),T.destroy=f}c=c.next}while(c!==v)}}catch(A){St(a,a.return,A)}}function Ao(i,a,c){try{var f=a.updateQueue,v=f!==null?f.lastEffect:null;if(v!==null){var b=v.next;f=b;do{if((f.tag&i)===i){var T=f.inst,A=T.destroy;if(A!==void 0){T.destroy=void 0,v=a;var N=c,V=A;try{V()}catch(X){St(v,N,X)}}}f=f.next}while(f!==b)}}catch(X){St(a,a.return,X)}}function k1(i){var a=i.updateQueue;if(a!==null){var c=i.stateNode;try{hb(a,c)}catch(f){St(i,i.return,f)}}}function T1(i,a,c){c.props=Us(i.type,i.memoizedProps),c.state=i.memoizedState;try{c.componentWillUnmount()}catch(f){St(i,a,f)}}function hc(i,a){try{var c=i.ref;if(c!==null){switch(i.tag){case 26:case 27:case 5:var f=i.stateNode;break;case 30:f=i.stateNode;break;default:f=i.stateNode}typeof c=="function"?i.refCleanup=c(f):c.current=f}}catch(v){St(i,a,v)}}function di(i,a){var c=i.ref,f=i.refCleanup;if(c!==null)if(typeof f=="function")try{f()}catch(v){St(i,a,v)}finally{i.refCleanup=null,i=i.alternate,i!=null&&(i.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(v){St(i,a,v)}else c.current=null}function w1(i){var a=i.type,c=i.memoizedProps,f=i.stateNode;try{e:switch(a){case"button":case"input":case"select":case"textarea":c.autoFocus&&f.focus();break e;case"img":c.src?f.src=c.src:c.srcSet&&(f.srcset=c.srcSet)}}catch(v){St(i,i.return,v)}}function bm(i,a,c){try{var f=i.stateNode;N_(f,i.type,c,a),f[An]=a}catch(v){St(i,i.return,v)}}function C1(i){return i.tag===5||i.tag===3||i.tag===26||i.tag===27&&Do(i.type)||i.tag===4}function xm(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||C1(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.tag===27&&Do(i.type)||i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Sm(i,a,c){var f=i.tag;if(f===5||f===6)i=i.stateNode,a?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(i,a):(a=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,a.appendChild(i),c=c._reactRootContainer,c!=null||a.onclick!==null||(a.onclick=Me));else if(f!==4&&(f===27&&Do(i.type)&&(c=i.stateNode,a=null),i=i.child,i!==null))for(Sm(i,a,c),i=i.sibling;i!==null;)Sm(i,a,c),i=i.sibling}function bd(i,a,c){var f=i.tag;if(f===5||f===6)i=i.stateNode,a?c.insertBefore(i,a):c.appendChild(i);else if(f!==4&&(f===27&&Do(i.type)&&(c=i.stateNode),i=i.child,i!==null))for(bd(i,a,c),i=i.sibling;i!==null;)bd(i,a,c),i=i.sibling}function A1(i){var a=i.stateNode,c=i.memoizedProps;try{for(var f=i.type,v=a.attributes;v.length;)a.removeAttributeNode(v[0]);jn(a,f,c),a[on]=i,a[An]=c}catch(b){St(i,i.return,b)}}var Ui=!1,un=!1,Em=!1,_1=typeof WeakSet=="function"?WeakSet:Set,bn=null;function f_(i,a){if(i=i.containerInfo,Vm=Ud,i=Uy(i),mp(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var v=f.anchorOffset,b=f.focusNode;f=f.focusOffset;try{c.nodeType,b.nodeType}catch{c=null;break e}var T=0,A=-1,N=-1,V=0,X=0,ee=i,F=null;t:for(;;){for(var $;ee!==c||v!==0&&ee.nodeType!==3||(A=T+v),ee!==b||f!==0&&ee.nodeType!==3||(N=T+f),ee.nodeType===3&&(T+=ee.nodeValue.length),($=ee.firstChild)!==null;)F=ee,ee=$;for(;;){if(ee===i)break t;if(F===c&&++V===v&&(A=T),F===b&&++X===f&&(N=T),($=ee.nextSibling)!==null)break;ee=F,F=ee.parentNode}ee=$}c=A===-1||N===-1?null:{start:A,end:N}}else c=null}c=c||{start:0,end:0}}else c=null;for(Fm={focusedElem:i,selectionRange:c},Ud=!1,bn=a;bn!==null;)if(a=bn,i=a.child,(a.subtreeFlags&1028)!==0&&i!==null)i.return=a,bn=i;else for(;bn!==null;){switch(a=bn,b=a.alternate,i=a.flags,a.tag){case 0:if((i&4)!==0&&(i=a.updateQueue,i=i!==null?i.events:null,i!==null))for(c=0;c<i.length;c++)v=i[c],v.ref.impl=v.nextImpl;break;case 11:case 15:break;case 1:if((i&1024)!==0&&b!==null){i=void 0,c=a,v=b.memoizedProps,b=b.memoizedState,f=c.stateNode;try{var we=Us(c.type,v);i=f.getSnapshotBeforeUpdate(we,b),f.__reactInternalSnapshotBeforeUpdate=i}catch(Pe){St(c,c.return,Pe)}}break;case 3:if((i&1024)!==0){if(i=a.stateNode.containerInfo,c=i.nodeType,c===9)$m(i);else if(c===1)switch(i.nodeName){case"HEAD":case"HTML":case"BODY":$m(i);break;default:i.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((i&1024)!==0)throw Error(r(163))}if(i=a.sibling,i!==null){i.return=a.return,bn=i;break}bn=a.return}}function M1(i,a,c){var f=c.flags;switch(c.tag){case 0:case 11:case 15:qi(i,c),f&4&&fc(5,c);break;case 1:if(qi(i,c),f&4)if(i=c.stateNode,a===null)try{i.componentDidMount()}catch(T){St(c,c.return,T)}else{var v=Us(c.type,a.memoizedProps);a=a.memoizedState;try{i.componentDidUpdate(v,a,i.__reactInternalSnapshotBeforeUpdate)}catch(T){St(c,c.return,T)}}f&64&&k1(c),f&512&&hc(c,c.return);break;case 3:if(qi(i,c),f&64&&(i=c.updateQueue,i!==null)){if(a=null,c.child!==null)switch(c.child.tag){case 27:case 5:a=c.child.stateNode;break;case 1:a=c.child.stateNode}try{hb(i,a)}catch(T){St(c,c.return,T)}}break;case 27:a===null&&f&4&&A1(c);case 26:case 5:qi(i,c),a===null&&f&4&&w1(c),f&512&&hc(c,c.return);break;case 12:qi(i,c);break;case 31:qi(i,c),f&4&&R1(i,c);break;case 13:qi(i,c),f&4&&N1(i,c),f&64&&(i=c.memoizedState,i!==null&&(i=i.dehydrated,i!==null&&(c=S_.bind(null,c),H_(i,c))));break;case 22:if(f=c.memoizedState!==null||Ui,!f){a=a!==null&&a.memoizedState!==null||un,v=Ui;var b=un;Ui=f,(un=a)&&!b?Vi(i,c,(c.subtreeFlags&8772)!==0):qi(i,c),Ui=v,un=b}break;case 30:break;default:qi(i,c)}}function O1(i){var a=i.alternate;a!==null&&(i.alternate=null,O1(a)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(a=i.stateNode,a!==null&&Hl(a)),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}var Pt=null,rr=!1;function Hi(i,a,c){for(c=c.child;c!==null;)j1(i,a,c),c=c.sibling}function j1(i,a,c){if(mn&&typeof mn.onCommitFiberUnmount=="function")try{mn.onCommitFiberUnmount(xs,c)}catch{}switch(c.tag){case 26:un||di(c,a),Hi(i,a,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:un||di(c,a);var f=Pt,v=rr;Do(c.type)&&(Pt=c.stateNode,rr=!1),Hi(i,a,c),Ec(c.stateNode),Pt=f,rr=v;break;case 5:un||di(c,a);case 6:if(f=Pt,v=rr,Pt=null,Hi(i,a,c),Pt=f,rr=v,Pt!==null)if(rr)try{(Pt.nodeType===9?Pt.body:Pt.nodeName==="HTML"?Pt.ownerDocument.body:Pt).removeChild(c.stateNode)}catch(b){St(c,a,b)}else try{Pt.removeChild(c.stateNode)}catch(b){St(c,a,b)}break;case 18:Pt!==null&&(rr?(i=Pt,kx(i.nodeType===9?i.body:i.nodeName==="HTML"?i.ownerDocument.body:i,c.stateNode),il(i)):kx(Pt,c.stateNode));break;case 4:f=Pt,v=rr,Pt=c.stateNode.containerInfo,rr=!0,Hi(i,a,c),Pt=f,rr=v;break;case 0:case 11:case 14:case 15:Ao(2,c,a),un||Ao(4,c,a),Hi(i,a,c);break;case 1:un||(di(c,a),f=c.stateNode,typeof f.componentWillUnmount=="function"&&T1(c,a,f)),Hi(i,a,c);break;case 21:Hi(i,a,c);break;case 22:un=(f=un)||c.memoizedState!==null,Hi(i,a,c),un=f;break;default:Hi(i,a,c)}}function R1(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null))){i=i.dehydrated;try{il(i)}catch(c){St(a,a.return,c)}}}function N1(i,a){if(a.memoizedState===null&&(i=a.alternate,i!==null&&(i=i.memoizedState,i!==null&&(i=i.dehydrated,i!==null))))try{il(i)}catch(c){St(a,a.return,c)}}function h_(i){switch(i.tag){case 31:case 13:case 19:var a=i.stateNode;return a===null&&(a=i.stateNode=new _1),a;case 22:return i=i.stateNode,a=i._retryCache,a===null&&(a=i._retryCache=new _1),a;default:throw Error(r(435,i.tag))}}function xd(i,a){var c=h_(i);a.forEach(function(f){if(!c.has(f)){c.add(f);var v=E_.bind(null,i,f);f.then(v,v)}})}function ir(i,a){var c=a.deletions;if(c!==null)for(var f=0;f<c.length;f++){var v=c[f],b=i,T=a,A=T;e:for(;A!==null;){switch(A.tag){case 27:if(Do(A.type)){Pt=A.stateNode,rr=!1;break e}break;case 5:Pt=A.stateNode,rr=!1;break e;case 3:case 4:Pt=A.stateNode.containerInfo,rr=!0;break e}A=A.return}if(Pt===null)throw Error(r(160));j1(b,T,v),Pt=null,rr=!1,b=v.alternate,b!==null&&(b.return=null),v.return=null}if(a.subtreeFlags&13886)for(a=a.child;a!==null;)D1(a,i),a=a.sibling}var Kr=null;function D1(i,a){var c=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:ir(a,i),or(i),f&4&&(Ao(3,i,i.return),fc(3,i),Ao(5,i,i.return));break;case 1:ir(a,i),or(i),f&512&&(un||c===null||di(c,c.return)),f&64&&Ui&&(i=i.updateQueue,i!==null&&(f=i.callbacks,f!==null&&(c=i.shared.hiddenCallbacks,i.shared.hiddenCallbacks=c===null?f:c.concat(f))));break;case 26:var v=Kr;if(ir(a,i),or(i),f&512&&(un||c===null||di(c,c.return)),f&4){var b=c!==null?c.memoizedState:null;if(f=i.memoizedState,c===null)if(f===null)if(i.stateNode===null){e:{f=i.type,c=i.memoizedProps,v=v.ownerDocument||v;t:switch(f){case"title":b=v.getElementsByTagName("title")[0],(!b||b[uo]||b[on]||b.namespaceURI==="http://www.w3.org/2000/svg"||b.hasAttribute("itemprop"))&&(b=v.createElement(f),v.head.insertBefore(b,v.querySelector("head > title"))),jn(b,f,c),b[on]=i,sn(b),f=b;break e;case"link":var T=Dx("link","href",v).get(f+(c.href||""));if(T){for(var A=0;A<T.length;A++)if(b=T[A],b.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&b.getAttribute("rel")===(c.rel==null?null:c.rel)&&b.getAttribute("title")===(c.title==null?null:c.title)&&b.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){T.splice(A,1);break t}}b=v.createElement(f),jn(b,f,c),v.head.appendChild(b);break;case"meta":if(T=Dx("meta","content",v).get(f+(c.content||""))){for(A=0;A<T.length;A++)if(b=T[A],b.getAttribute("content")===(c.content==null?null:""+c.content)&&b.getAttribute("name")===(c.name==null?null:c.name)&&b.getAttribute("property")===(c.property==null?null:c.property)&&b.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&b.getAttribute("charset")===(c.charSet==null?null:c.charSet)){T.splice(A,1);break t}}b=v.createElement(f),jn(b,f,c),v.head.appendChild(b);break;default:throw Error(r(468,f))}b[on]=i,sn(b),f=b}i.stateNode=f}else Lx(v,i.type,i.stateNode);else i.stateNode=Nx(v,f,i.memoizedProps);else b!==f?(b===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):b.count--,f===null?Lx(v,i.type,i.stateNode):Nx(v,f,i.memoizedProps)):f===null&&i.stateNode!==null&&bm(i,i.memoizedProps,c.memoizedProps)}break;case 27:ir(a,i),or(i),f&512&&(un||c===null||di(c,c.return)),c!==null&&f&4&&bm(i,i.memoizedProps,c.memoizedProps);break;case 5:if(ir(a,i),or(i),f&512&&(un||c===null||di(c,c.return)),i.flags&32){v=i.stateNode;try{be(v,"")}catch(we){St(i,i.return,we)}}f&4&&i.stateNode!=null&&(v=i.memoizedProps,bm(i,v,c!==null?c.memoizedProps:v)),f&1024&&(Em=!0);break;case 6:if(ir(a,i),or(i),f&4){if(i.stateNode===null)throw Error(r(162));f=i.memoizedProps,c=i.stateNode;try{c.nodeValue=f}catch(we){St(i,i.return,we)}}break;case 3:if(zd=null,v=Kr,Kr=Dd(a.containerInfo),ir(a,i),Kr=v,or(i),f&4&&c!==null&&c.memoizedState.isDehydrated)try{il(a.containerInfo)}catch(we){St(i,i.return,we)}Em&&(Em=!1,L1(i));break;case 4:f=Kr,Kr=Dd(i.stateNode.containerInfo),ir(a,i),or(i),Kr=f;break;case 12:ir(a,i),or(i);break;case 31:ir(a,i),or(i),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,xd(i,f)));break;case 13:ir(a,i),or(i),i.child.flags&8192&&i.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Ed=It()),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,xd(i,f)));break;case 22:v=i.memoizedState!==null;var N=c!==null&&c.memoizedState!==null,V=Ui,X=un;if(Ui=V||v,un=X||N,ir(a,i),un=X,Ui=V,or(i),f&8192)e:for(a=i.stateNode,a._visibility=v?a._visibility&-2:a._visibility|1,v&&(c===null||N||Ui||un||Hs(i)),c=null,a=i;;){if(a.tag===5||a.tag===26){if(c===null){N=c=a;try{if(b=N.stateNode,v)T=b.style,typeof T.setProperty=="function"?T.setProperty("display","none","important"):T.display="none";else{A=N.stateNode;var ee=N.memoizedProps.style,F=ee!=null&&ee.hasOwnProperty("display")?ee.display:null;A.style.display=F==null||typeof F=="boolean"?"":(""+F).trim()}}catch(we){St(N,N.return,we)}}}else if(a.tag===6){if(c===null){N=a;try{N.stateNode.nodeValue=v?"":N.memoizedProps}catch(we){St(N,N.return,we)}}}else if(a.tag===18){if(c===null){N=a;try{var $=N.stateNode;v?Tx($,!0):Tx(N.stateNode,!1)}catch(we){St(N,N.return,we)}}}else if((a.tag!==22&&a.tag!==23||a.memoizedState===null||a===i)&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break e;for(;a.sibling===null;){if(a.return===null||a.return===i)break e;c===a&&(c=null),a=a.return}c===a&&(c=null),a.sibling.return=a.return,a=a.sibling}f&4&&(f=i.updateQueue,f!==null&&(c=f.retryQueue,c!==null&&(f.retryQueue=null,xd(i,c))));break;case 19:ir(a,i),or(i),f&4&&(f=i.updateQueue,f!==null&&(i.updateQueue=null,xd(i,f)));break;case 30:break;case 21:break;default:ir(a,i),or(i)}}function or(i){var a=i.flags;if(a&2){try{for(var c,f=i.return;f!==null;){if(C1(f)){c=f;break}f=f.return}if(c==null)throw Error(r(160));switch(c.tag){case 27:var v=c.stateNode,b=xm(i);bd(i,b,v);break;case 5:var T=c.stateNode;c.flags&32&&(be(T,""),c.flags&=-33);var A=xm(i);bd(i,A,T);break;case 3:case 4:var N=c.stateNode.containerInfo,V=xm(i);Sm(i,V,N);break;default:throw Error(r(161))}}catch(X){St(i,i.return,X)}i.flags&=-3}a&4096&&(i.flags&=-4097)}function L1(i){if(i.subtreeFlags&1024)for(i=i.child;i!==null;){var a=i;L1(a),a.tag===5&&a.flags&1024&&a.stateNode.reset(),i=i.sibling}}function qi(i,a){if(a.subtreeFlags&8772)for(a=a.child;a!==null;)M1(i,a.alternate,a),a=a.sibling}function Hs(i){for(i=i.child;i!==null;){var a=i;switch(a.tag){case 0:case 11:case 14:case 15:Ao(4,a,a.return),Hs(a);break;case 1:di(a,a.return);var c=a.stateNode;typeof c.componentWillUnmount=="function"&&T1(a,a.return,c),Hs(a);break;case 27:Ec(a.stateNode);case 26:case 5:di(a,a.return),Hs(a);break;case 22:a.memoizedState===null&&Hs(a);break;case 30:Hs(a);break;default:Hs(a)}i=i.sibling}}function Vi(i,a,c){for(c=c&&(a.subtreeFlags&8772)!==0,a=a.child;a!==null;){var f=a.alternate,v=i,b=a,T=b.flags;switch(b.tag){case 0:case 11:case 15:Vi(v,b,c),fc(4,b);break;case 1:if(Vi(v,b,c),f=b,v=f.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(V){St(f,f.return,V)}if(f=b,v=f.updateQueue,v!==null){var A=f.stateNode;try{var N=v.shared.hiddenCallbacks;if(N!==null)for(v.shared.hiddenCallbacks=null,v=0;v<N.length;v++)fb(N[v],A)}catch(V){St(f,f.return,V)}}c&&T&64&&k1(b),hc(b,b.return);break;case 27:A1(b);case 26:case 5:Vi(v,b,c),c&&f===null&&T&4&&w1(b),hc(b,b.return);break;case 12:Vi(v,b,c);break;case 31:Vi(v,b,c),c&&T&4&&R1(v,b);break;case 13:Vi(v,b,c),c&&T&4&&N1(v,b);break;case 22:b.memoizedState===null&&Vi(v,b,c),hc(b,b.return);break;case 30:break;default:Vi(v,b,c)}a=a.sibling}}function km(i,a){var c=null;i!==null&&i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(c=i.memoizedState.cachePool.pool),i=null,a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(i=a.memoizedState.cachePool.pool),i!==c&&(i!=null&&i.refCount++,c!=null&&Zl(c))}function Tm(i,a){i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&Zl(i))}function Yr(i,a,c,f){if(a.subtreeFlags&10256)for(a=a.child;a!==null;)z1(i,a,c,f),a=a.sibling}function z1(i,a,c,f){var v=a.flags;switch(a.tag){case 0:case 11:case 15:Yr(i,a,c,f),v&2048&&fc(9,a);break;case 1:Yr(i,a,c,f);break;case 3:Yr(i,a,c,f),v&2048&&(i=null,a.alternate!==null&&(i=a.alternate.memoizedState.cache),a=a.memoizedState.cache,a!==i&&(a.refCount++,i!=null&&Zl(i)));break;case 12:if(v&2048){Yr(i,a,c,f),i=a.stateNode;try{var b=a.memoizedProps,T=b.id,A=b.onPostCommit;typeof A=="function"&&A(T,a.alternate===null?"mount":"update",i.passiveEffectDuration,-0)}catch(N){St(a,a.return,N)}}else Yr(i,a,c,f);break;case 31:Yr(i,a,c,f);break;case 13:Yr(i,a,c,f);break;case 23:break;case 22:b=a.stateNode,T=a.alternate,a.memoizedState!==null?b._visibility&2?Yr(i,a,c,f):pc(i,a):b._visibility&2?Yr(i,a,c,f):(b._visibility|=2,Ga(i,a,c,f,(a.subtreeFlags&10256)!==0||!1)),v&2048&&km(T,a);break;case 24:Yr(i,a,c,f),v&2048&&Tm(a.alternate,a);break;default:Yr(i,a,c,f)}}function Ga(i,a,c,f,v){for(v=v&&((a.subtreeFlags&10256)!==0||!1),a=a.child;a!==null;){var b=i,T=a,A=c,N=f,V=T.flags;switch(T.tag){case 0:case 11:case 15:Ga(b,T,A,N,v),fc(8,T);break;case 23:break;case 22:var X=T.stateNode;T.memoizedState!==null?X._visibility&2?Ga(b,T,A,N,v):pc(b,T):(X._visibility|=2,Ga(b,T,A,N,v)),v&&V&2048&&km(T.alternate,T);break;case 24:Ga(b,T,A,N,v),v&&V&2048&&Tm(T.alternate,T);break;default:Ga(b,T,A,N,v)}a=a.sibling}}function pc(i,a){if(a.subtreeFlags&10256)for(a=a.child;a!==null;){var c=i,f=a,v=f.flags;switch(f.tag){case 22:pc(c,f),v&2048&&km(f.alternate,f);break;case 24:pc(c,f),v&2048&&Tm(f.alternate,f);break;default:pc(c,f)}a=a.sibling}}var mc=8192;function $a(i,a,c){if(i.subtreeFlags&mc)for(i=i.child;i!==null;)I1(i,a,c),i=i.sibling}function I1(i,a,c){switch(i.tag){case 26:$a(i,a,c),i.flags&mc&&i.memoizedState!==null&&Z_(c,Kr,i.memoizedState,i.memoizedProps);break;case 5:$a(i,a,c);break;case 3:case 4:var f=Kr;Kr=Dd(i.stateNode.containerInfo),$a(i,a,c),Kr=f;break;case 22:i.memoizedState===null&&(f=i.alternate,f!==null&&f.memoizedState!==null?(f=mc,mc=16777216,$a(i,a,c),mc=f):$a(i,a,c));break;default:$a(i,a,c)}}function B1(i){var a=i.alternate;if(a!==null&&(i=a.child,i!==null)){a.child=null;do a=i.sibling,i.sibling=null,i=a;while(i!==null)}}function gc(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var f=a[c];bn=f,U1(f,i)}B1(i)}if(i.subtreeFlags&10256)for(i=i.child;i!==null;)P1(i),i=i.sibling}function P1(i){switch(i.tag){case 0:case 11:case 15:gc(i),i.flags&2048&&Ao(9,i,i.return);break;case 3:gc(i);break;case 12:gc(i);break;case 22:var a=i.stateNode;i.memoizedState!==null&&a._visibility&2&&(i.return===null||i.return.tag!==13)?(a._visibility&=-3,Sd(i)):gc(i);break;default:gc(i)}}function Sd(i){var a=i.deletions;if((i.flags&16)!==0){if(a!==null)for(var c=0;c<a.length;c++){var f=a[c];bn=f,U1(f,i)}B1(i)}for(i=i.child;i!==null;){switch(a=i,a.tag){case 0:case 11:case 15:Ao(8,a,a.return),Sd(a);break;case 22:c=a.stateNode,c._visibility&2&&(c._visibility&=-3,Sd(a));break;default:Sd(a)}i=i.sibling}}function U1(i,a){for(;bn!==null;){var c=bn;switch(c.tag){case 0:case 11:case 15:Ao(8,c,a);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var f=c.memoizedState.cachePool.pool;f!=null&&f.refCount++}break;case 24:Zl(c.memoizedState.cache)}if(f=c.child,f!==null)f.return=c,bn=f;else e:for(c=i;bn!==null;){f=bn;var v=f.sibling,b=f.return;if(O1(f),f===c){bn=null;break e}if(v!==null){v.return=b,bn=v;break e}bn=b}}}var p_={getCacheForType:function(i){var a=Mn(an),c=a.data.get(i);return c===void 0&&(c=i(),a.data.set(i,c)),c},cacheSignal:function(){return Mn(an).controller.signal}},m_=typeof WeakMap=="function"?WeakMap:Map,vt=0,_t=null,tt=null,st=0,xt=0,vr=null,_o=!1,Ka=!1,wm=!1,Fi=0,Jt=0,Mo=0,qs=0,Cm=0,yr=0,Xa=0,vc=null,sr=null,Am=!1,Ed=0,H1=0,kd=1/0,Td=null,Oo=null,gn=0,jo=null,Ja=null,Wi=0,_m=0,Mm=null,q1=null,yc=0,Om=null;function br(){return(vt&2)!==0&&st!==0?st&-st:H.T!==null?zm():$n()}function V1(){if(yr===0)if((st&536870912)===0||lt){var i=Ss;Ss<<=1,(Ss&3932160)===0&&(Ss=262144),yr=i}else yr=536870912;return i=mr.current,i!==null&&(i.flags|=32),yr}function ar(i,a,c){(i===_t&&(xt===2||xt===9)||i.cancelPendingCommit!==null)&&(Qa(i,0),Ro(i,st,yr,!1)),Ai(i,c),((vt&2)===0||i!==_t)&&(i===_t&&((vt&2)===0&&(qs|=c),Jt===4&&Ro(i,st,yr,!1)),fi(i))}function F1(i,a,c){if((vt&6)!==0)throw Error(r(327));var f=!c&&(a&127)===0&&(a&i.expiredLanes)===0||Fr(i,a),v=f?y_(i,a):Rm(i,a,!0),b=f;do{if(v===0){Ka&&!f&&Ro(i,a,0,!1);break}else{if(c=i.current.alternate,b&&!g_(c)){v=Rm(i,a,!1),b=!1;continue}if(v===2){if(b=a,i.errorRecoveryDisabledLanes&b)var T=0;else T=i.pendingLanes&-536870913,T=T!==0?T:T&536870912?536870912:0;if(T!==0){a=T;e:{var A=i;v=vc;var N=A.current.memoizedState.isDehydrated;if(N&&(Qa(A,T).flags|=256),T=Rm(A,T,!1),T!==2){if(wm&&!N){A.errorRecoveryDisabledLanes|=b,qs|=b,v=4;break e}b=sr,sr=v,b!==null&&(sr===null?sr=b:sr.push.apply(sr,b))}v=T}if(b=!1,v!==2)continue}}if(v===1){Qa(i,0),Ro(i,a,0,!0);break}e:{switch(f=i,b=v,b){case 0:case 1:throw Error(r(345));case 4:if((a&4194048)!==a)break;case 6:Ro(f,a,yr,!_o);break e;case 2:sr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((a&62914560)===a&&(v=Ed+300-It(),10<v)){if(Ro(f,a,yr,!_o),lo(f,0,!0)!==0)break e;Wi=a,f.timeoutHandle=Sx(W1.bind(null,f,c,sr,Td,Am,a,yr,qs,Xa,_o,b,"Throttled",-0,0),v);break e}W1(f,c,sr,Td,Am,a,yr,qs,Xa,_o,b,null,-0,0)}}break}while(!0);fi(i)}function W1(i,a,c,f,v,b,T,A,N,V,X,ee,F,$){if(i.timeoutHandle=-1,ee=a.subtreeFlags,ee&8192||(ee&16785408)===16785408){ee={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Me},I1(a,b,ee);var we=(b&62914560)===b?Ed-It():(b&4194048)===b?H1-It():0;if(we=eM(ee,we),we!==null){Wi=b,i.cancelPendingCommit=we(Z1.bind(null,i,a,b,c,f,v,T,A,N,X,ee,null,F,$)),Ro(i,b,T,!V);return}}Z1(i,a,b,c,f,v,T,A,N)}function g_(i){for(var a=i;;){var c=a.tag;if((c===0||c===11||c===15)&&a.flags&16384&&(c=a.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var f=0;f<c.length;f++){var v=c[f],b=v.getSnapshot;v=v.value;try{if(!hr(b(),v))return!1}catch{return!1}}if(c=a.child,a.subtreeFlags&16384&&c!==null)c.return=a,a=c;else{if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return!0;a=a.return}a.sibling.return=a.return,a=a.sibling}}return!0}function Ro(i,a,c,f){a&=~Cm,a&=~qs,i.suspendedLanes|=a,i.pingedLanes&=~a,f&&(i.warmLanes|=a),f=i.expirationTimes;for(var v=a;0<v;){var b=31-Gn(v),T=1<<b;f[b]=-1,v&=~T}c!==0&&Nu(i,c,a)}function wd(){return(vt&6)===0?(bc(0),!1):!0}function jm(){if(tt!==null){if(xt===0)var i=tt.return;else i=tt,Di=Ns=null,$p(i),Ha=null,tc=0,i=tt;for(;i!==null;)E1(i.alternate,i),i=i.return;tt=null}}function Qa(i,a){var c=i.timeoutHandle;c!==-1&&(i.timeoutHandle=-1,z_(c)),c=i.cancelPendingCommit,c!==null&&(i.cancelPendingCommit=null,c()),Wi=0,jm(),_t=i,tt=c=Ri(i.current,null),st=a,xt=0,vr=null,_o=!1,Ka=Fr(i,a),wm=!1,Xa=yr=Cm=qs=Mo=Jt=0,sr=vc=null,Am=!1,(a&8)!==0&&(a|=a&32);var f=i.entangledLanes;if(f!==0)for(i=i.entanglements,f&=a;0<f;){var v=31-Gn(f),b=1<<v;a|=i[v],f&=~b}return Fi=a,Gu(),c}function G1(i,a){$e=null,H.H=cc,a===Ua||a===ed?(a=lb(),xt=3):a===Lp?(a=lb(),xt=4):xt=a===cm?8:a!==null&&typeof a=="object"&&typeof a.then=="function"?6:1,vr=a,tt===null&&(Jt=1,pd(i,_r(a,i.current)))}function $1(){var i=mr.current;return i===null?!0:(st&4194048)===st?Rr===null:(st&62914560)===st||(st&536870912)!==0?i===Rr:!1}function K1(){var i=H.H;return H.H=cc,i===null?cc:i}function Y1(){var i=H.A;return H.A=p_,i}function Cd(){Jt=4,_o||(st&4194048)!==st&&mr.current!==null||(Ka=!0),(Mo&134217727)===0&&(qs&134217727)===0||_t===null||Ro(_t,st,yr,!1)}function Rm(i,a,c){var f=vt;vt|=2;var v=K1(),b=Y1();(_t!==i||st!==a)&&(Td=null,Qa(i,a)),a=!1;var T=Jt;e:do try{if(xt!==0&&tt!==null){var A=tt,N=vr;switch(xt){case 8:jm(),T=6;break e;case 3:case 2:case 9:case 6:mr.current===null&&(a=!0);var V=xt;if(xt=0,vr=null,Za(i,A,N,V),c&&Ka){T=0;break e}break;default:V=xt,xt=0,vr=null,Za(i,A,N,V)}}v_(),T=Jt;break}catch(X){G1(i,X)}while(!0);return a&&i.shellSuspendCounter++,Di=Ns=null,vt=f,H.H=v,H.A=b,tt===null&&(_t=null,st=0,Gu()),T}function v_(){for(;tt!==null;)X1(tt)}function y_(i,a){var c=vt;vt|=2;var f=K1(),v=Y1();_t!==i||st!==a?(Td=null,kd=It()+500,Qa(i,a)):Ka=Fr(i,a);e:do try{if(xt!==0&&tt!==null){a=tt;var b=vr;t:switch(xt){case 1:xt=0,vr=null,Za(i,a,b,1);break;case 2:case 9:if(sb(b)){xt=0,vr=null,J1(a);break}a=function(){xt!==2&&xt!==9||_t!==i||(xt=7),fi(i)},b.then(a,a);break e;case 3:xt=7;break e;case 4:xt=5;break e;case 7:sb(b)?(xt=0,vr=null,J1(a)):(xt=0,vr=null,Za(i,a,b,7));break;case 5:var T=null;switch(tt.tag){case 26:T=tt.memoizedState;case 5:case 27:var A=tt;if(T?zx(T):A.stateNode.complete){xt=0,vr=null;var N=A.sibling;if(N!==null)tt=N;else{var V=A.return;V!==null?(tt=V,Ad(V)):tt=null}break t}}xt=0,vr=null,Za(i,a,b,5);break;case 6:xt=0,vr=null,Za(i,a,b,6);break;case 8:jm(),Jt=6;break e;default:throw Error(r(462))}}b_();break}catch(X){G1(i,X)}while(!0);return Di=Ns=null,H.H=f,H.A=v,vt=c,tt!==null?0:(_t=null,st=0,Gu(),Jt)}function b_(){for(;tt!==null&&!In();)X1(tt)}function X1(i){var a=x1(i.alternate,i,Fi);i.memoizedProps=i.pendingProps,a===null?Ad(i):tt=a}function J1(i){var a=i,c=a.alternate;switch(a.tag){case 15:case 0:a=p1(c,a,a.pendingProps,a.type,void 0,st);break;case 11:a=p1(c,a,a.pendingProps,a.type.render,a.ref,st);break;case 5:$p(a);default:E1(c,a),a=tt=Yy(a,Fi),a=x1(c,a,Fi)}i.memoizedProps=i.pendingProps,a===null?Ad(i):tt=a}function Za(i,a,c,f){Di=Ns=null,$p(a),Ha=null,tc=0;var v=a.return;try{if(a_(i,v,a,c,st)){Jt=1,pd(i,_r(c,i.current)),tt=null;return}}catch(b){if(v!==null)throw tt=v,b;Jt=1,pd(i,_r(c,i.current)),tt=null;return}a.flags&32768?(lt||f===1?i=!0:Ka||(st&536870912)!==0?i=!1:(_o=i=!0,(f===2||f===9||f===3||f===6)&&(f=mr.current,f!==null&&f.tag===13&&(f.flags|=16384))),Q1(a,i)):Ad(a)}function Ad(i){var a=i;do{if((a.flags&32768)!==0){Q1(a,_o);return}i=a.return;var c=u_(a.alternate,a,Fi);if(c!==null){tt=c;return}if(a=a.sibling,a!==null){tt=a;return}tt=a=i}while(a!==null);Jt===0&&(Jt=5)}function Q1(i,a){do{var c=d_(i.alternate,i);if(c!==null){c.flags&=32767,tt=c;return}if(c=i.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!a&&(i=i.sibling,i!==null)){tt=i;return}tt=i=c}while(i!==null);Jt=6,tt=null}function Z1(i,a,c,f,v,b,T,A,N){i.cancelPendingCommit=null;do _d();while(gn!==0);if((vt&6)!==0)throw Error(r(327));if(a!==null){if(a===i.current)throw Error(r(177));if(b=a.lanes|a.childLanes,b|=xp,co(i,c,b,T,A,N),i===_t&&(tt=_t=null,st=0),Ja=a,jo=i,Wi=c,_m=b,Mm=v,q1=f,(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?(i.callbackNode=null,i.callbackPriority=0,k_(Bn,function(){return ix(),null})):(i.callbackNode=null,i.callbackPriority=0),f=(a.flags&13878)!==0,(a.subtreeFlags&13878)!==0||f){f=H.T,H.T=null,v=ne.p,ne.p=2,T=vt,vt|=4;try{f_(i,a,c)}finally{vt=T,ne.p=v,H.T=f}}gn=1,ex(),tx(),nx()}}function ex(){if(gn===1){gn=0;var i=jo,a=Ja,c=(a.flags&13878)!==0;if((a.subtreeFlags&13878)!==0||c){c=H.T,H.T=null;var f=ne.p;ne.p=2;var v=vt;vt|=4;try{D1(a,i);var b=Fm,T=Uy(i.containerInfo),A=b.focusedElem,N=b.selectionRange;if(T!==A&&A&&A.ownerDocument&&Py(A.ownerDocument.documentElement,A)){if(N!==null&&mp(A)){var V=N.start,X=N.end;if(X===void 0&&(X=V),"selectionStart"in A)A.selectionStart=V,A.selectionEnd=Math.min(X,A.value.length);else{var ee=A.ownerDocument||document,F=ee&&ee.defaultView||window;if(F.getSelection){var $=F.getSelection(),we=A.textContent.length,Pe=Math.min(N.start,we),At=N.end===void 0?Pe:Math.min(N.end,we);!$.extend&&Pe>At&&(T=At,At=Pe,Pe=T);var P=By(A,Pe),I=By(A,At);if(P&&I&&($.rangeCount!==1||$.anchorNode!==P.node||$.anchorOffset!==P.offset||$.focusNode!==I.node||$.focusOffset!==I.offset)){var q=ee.createRange();q.setStart(P.node,P.offset),$.removeAllRanges(),Pe>At?($.addRange(q),$.extend(I.node,I.offset)):(q.setEnd(I.node,I.offset),$.addRange(q))}}}}for(ee=[],$=A;$=$.parentNode;)$.nodeType===1&&ee.push({element:$,left:$.scrollLeft,top:$.scrollTop});for(typeof A.focus=="function"&&A.focus(),A=0;A<ee.length;A++){var Q=ee[A];Q.element.scrollLeft=Q.left,Q.element.scrollTop=Q.top}}Ud=!!Vm,Fm=Vm=null}finally{vt=v,ne.p=f,H.T=c}}i.current=a,gn=2}}function tx(){if(gn===2){gn=0;var i=jo,a=Ja,c=(a.flags&8772)!==0;if((a.subtreeFlags&8772)!==0||c){c=H.T,H.T=null;var f=ne.p;ne.p=2;var v=vt;vt|=4;try{M1(i,a.alternate,a)}finally{vt=v,ne.p=f,H.T=c}}gn=3}}function nx(){if(gn===4||gn===3){gn=0,Vr();var i=jo,a=Ja,c=Wi,f=q1;(a.subtreeFlags&10256)!==0||(a.flags&10256)!==0?gn=5:(gn=0,Ja=jo=null,rx(i,i.pendingLanes));var v=i.pendingLanes;if(v===0&&(Oo=null),Ul(c),a=a.stateNode,mn&&typeof mn.onCommitFiberRoot=="function")try{mn.onCommitFiberRoot(xs,a,void 0,(a.current.flags&128)===128)}catch{}if(f!==null){a=H.T,v=ne.p,ne.p=2,H.T=null;try{for(var b=i.onRecoverableError,T=0;T<f.length;T++){var A=f[T];b(A.value,{componentStack:A.stack})}}finally{H.T=a,ne.p=v}}(Wi&3)!==0&&_d(),fi(i),v=i.pendingLanes,(c&261930)!==0&&(v&42)!==0?i===Om?yc++:(yc=0,Om=i):yc=0,bc(0)}}function rx(i,a){(i.pooledCacheLanes&=a)===0&&(a=i.pooledCache,a!=null&&(i.pooledCache=null,Zl(a)))}function _d(){return ex(),tx(),nx(),ix()}function ix(){if(gn!==5)return!1;var i=jo,a=_m;_m=0;var c=Ul(Wi),f=H.T,v=ne.p;try{ne.p=32>c?32:c,H.T=null,c=Mm,Mm=null;var b=jo,T=Wi;if(gn=0,Ja=jo=null,Wi=0,(vt&6)!==0)throw Error(r(331));var A=vt;if(vt|=4,P1(b.current),z1(b,b.current,T,c),vt=A,bc(0,!1),mn&&typeof mn.onPostCommitFiberRoot=="function")try{mn.onPostCommitFiberRoot(xs,b)}catch{}return!0}finally{ne.p=v,H.T=f,rx(i,a)}}function ox(i,a,c){a=_r(c,a),a=lm(i.stateNode,a,2),i=To(i,a,2),i!==null&&(Ai(i,2),fi(i))}function St(i,a,c){if(i.tag===3)ox(i,i,c);else for(;a!==null;){if(a.tag===3){ox(a,i,c);break}else if(a.tag===1){var f=a.stateNode;if(typeof a.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Oo===null||!Oo.has(f))){i=_r(c,i),c=s1(2),f=To(a,c,2),f!==null&&(a1(c,f,a,i),Ai(f,2),fi(f));break}}a=a.return}}function Nm(i,a,c){var f=i.pingCache;if(f===null){f=i.pingCache=new m_;var v=new Set;f.set(a,v)}else v=f.get(a),v===void 0&&(v=new Set,f.set(a,v));v.has(c)||(wm=!0,v.add(c),i=x_.bind(null,i,a,c),a.then(i,i))}function x_(i,a,c){var f=i.pingCache;f!==null&&f.delete(a),i.pingedLanes|=i.suspendedLanes&c,i.warmLanes&=~c,_t===i&&(st&c)===c&&(Jt===4||Jt===3&&(st&62914560)===st&&300>It()-Ed?(vt&2)===0&&Qa(i,0):Cm|=c,Xa===st&&(Xa=0)),fi(i)}function sx(i,a){a===0&&(a=Ru()),i=Os(i,a),i!==null&&(Ai(i,a),fi(i))}function S_(i){var a=i.memoizedState,c=0;a!==null&&(c=a.retryLane),sx(i,c)}function E_(i,a){var c=0;switch(i.tag){case 31:case 13:var f=i.stateNode,v=i.memoizedState;v!==null&&(c=v.retryLane);break;case 19:f=i.stateNode;break;case 22:f=i.stateNode._retryCache;break;default:throw Error(r(314))}f!==null&&f.delete(a),sx(i,c)}function k_(i,a){return Cn(i,a)}var Md=null,el=null,Dm=!1,Od=!1,Lm=!1,No=0;function fi(i){i!==el&&i.next===null&&(el===null?Md=el=i:el=el.next=i),Od=!0,Dm||(Dm=!0,w_())}function bc(i,a){if(!Lm&&Od){Lm=!0;do for(var c=!1,f=Md;f!==null;){if(i!==0){var v=f.pendingLanes;if(v===0)var b=0;else{var T=f.suspendedLanes,A=f.pingedLanes;b=(1<<31-Gn(42|i)+1)-1,b&=v&~(T&~A),b=b&201326741?b&201326741|1:b?b|2:0}b!==0&&(c=!0,ux(f,b))}else b=st,b=lo(f,f===_t?b:0,f.cancelPendingCommit!==null||f.timeoutHandle!==-1),(b&3)===0||Fr(f,b)||(c=!0,ux(f,b));f=f.next}while(c);Lm=!1}}function T_(){ax()}function ax(){Od=Dm=!1;var i=0;No!==0&&L_()&&(i=No);for(var a=It(),c=null,f=Md;f!==null;){var v=f.next,b=lx(f,a);b===0?(f.next=null,c===null?Md=v:c.next=v,v===null&&(el=c)):(c=f,(i!==0||(b&3)!==0)&&(Od=!0)),f=v}gn!==0&&gn!==5||bc(i),No!==0&&(No=0)}function lx(i,a){for(var c=i.suspendedLanes,f=i.pingedLanes,v=i.expirationTimes,b=i.pendingLanes&-62914561;0<b;){var T=31-Gn(b),A=1<<T,N=v[T];N===-1?((A&c)===0||(A&f)!==0)&&(v[T]=Es(A,a)):N<=a&&(i.expiredLanes|=A),b&=~A}if(a=_t,c=st,c=lo(i,i===a?c:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f=i.callbackNode,c===0||i===a&&(xt===2||xt===9)||i.cancelPendingCommit!==null)return f!==null&&f!==null&&zn(f),i.callbackNode=null,i.callbackPriority=0;if((c&3)===0||Fr(i,c)){if(a=c&-c,a===i.callbackPriority)return a;switch(f!==null&&zn(f),Ul(c)){case 2:case 8:c=Ea;break;case 32:c=Bn;break;case 268435456:c=bs;break;default:c=Bn}return f=cx.bind(null,i),c=Cn(c,f),i.callbackPriority=a,i.callbackNode=c,a}return f!==null&&f!==null&&zn(f),i.callbackPriority=2,i.callbackNode=null,2}function cx(i,a){if(gn!==0&&gn!==5)return i.callbackNode=null,i.callbackPriority=0,null;var c=i.callbackNode;if(_d()&&i.callbackNode!==c)return null;var f=st;return f=lo(i,i===_t?f:0,i.cancelPendingCommit!==null||i.timeoutHandle!==-1),f===0?null:(F1(i,f,a),lx(i,It()),i.callbackNode!=null&&i.callbackNode===c?cx.bind(null,i):null)}function ux(i,a){if(_d())return null;F1(i,a,!0)}function w_(){I_(function(){(vt&6)!==0?Cn(ys,T_):ax()})}function zm(){if(No===0){var i=Ba;i===0&&(i=ao,ao<<=1,(ao&261888)===0&&(ao=256)),No=i}return No}function dx(i){return i==null||typeof i=="symbol"||typeof i=="boolean"?null:typeof i=="function"?i:Se(""+i)}function fx(i,a){var c=a.ownerDocument.createElement("input");return c.name=a.name,c.value=a.value,i.id&&c.setAttribute("form",i.id),a.parentNode.insertBefore(c,a),i=new FormData(i),c.parentNode.removeChild(c),i}function C_(i,a,c,f,v){if(a==="submit"&&c&&c.stateNode===v){var b=dx((v[An]||null).action),T=f.submitter;T&&(a=(a=T[An]||null)?dx(a.formAction):T.getAttribute("formAction"),a!==null&&(b=a,T=null));var A=new qu("action","action",null,f,v);i.push({event:A,listeners:[{instance:null,listener:function(){if(f.defaultPrevented){if(No!==0){var N=T?fx(v,T):new FormData(v);nm(c,{pending:!0,data:N,method:v.method,action:b},null,N)}}else typeof b=="function"&&(A.preventDefault(),N=T?fx(v,T):new FormData(v),nm(c,{pending:!0,data:N,method:v.method,action:b},b,N))},currentTarget:v}]})}}for(var Im=0;Im<bp.length;Im++){var Bm=bp[Im],A_=Bm.toLowerCase(),__=Bm[0].toUpperCase()+Bm.slice(1);$r(A_,"on"+__)}$r(Vy,"onAnimationEnd"),$r(Fy,"onAnimationIteration"),$r(Wy,"onAnimationStart"),$r("dblclick","onDoubleClick"),$r("focusin","onFocus"),$r("focusout","onBlur"),$r(FA,"onTransitionRun"),$r(WA,"onTransitionStart"),$r(GA,"onTransitionCancel"),$r(Gy,"onTransitionEnd"),Pn("onMouseEnter",["mouseout","mouseover"]),Pn("onMouseLeave",["mouseout","mouseover"]),Pn("onPointerEnter",["pointerout","pointerover"]),Pn("onPointerLeave",["pointerout","pointerover"]),Mi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Mi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Mi("onBeforeInput",["compositionend","keypress","textInput","paste"]),Mi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Mi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Mi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),M_=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(xc));function hx(i,a){a=(a&4)!==0;for(var c=0;c<i.length;c++){var f=i[c],v=f.event;f=f.listeners;e:{var b=void 0;if(a)for(var T=f.length-1;0<=T;T--){var A=f[T],N=A.instance,V=A.currentTarget;if(A=A.listener,N!==b&&v.isPropagationStopped())break e;b=A,v.currentTarget=V;try{b(v)}catch(X){Wu(X)}v.currentTarget=null,b=N}else for(T=0;T<f.length;T++){if(A=f[T],N=A.instance,V=A.currentTarget,A=A.listener,N!==b&&v.isPropagationStopped())break e;b=A,v.currentTarget=V;try{b(v)}catch(X){Wu(X)}v.currentTarget=null,b=N}}}}function nt(i,a){var c=a[Ca];c===void 0&&(c=a[Ca]=new Set);var f=i+"__bubble";c.has(f)||(px(a,i,2,!1),c.add(f))}function Pm(i,a,c){var f=0;a&&(f|=4),px(c,i,f,a)}var jd="_reactListening"+Math.random().toString(36).slice(2);function Um(i){if(!i[jd]){i[jd]=!0,Iu.forEach(function(c){c!=="selectionchange"&&(M_.has(c)||Pm(c,!1,i),Pm(c,!0,i))});var a=i.nodeType===9?i:i.ownerDocument;a===null||a[jd]||(a[jd]=!0,Pm("selectionchange",!1,a))}}function px(i,a,c,f){switch(Vx(a)){case 2:var v=rM;break;case 8:v=iM;break;default:v=tg}c=v.bind(null,a,c,i),v=void 0,!Ts||a!=="touchstart"&&a!=="touchmove"&&a!=="wheel"||(v=!0),f?v!==void 0?i.addEventListener(a,c,{capture:!0,passive:v}):i.addEventListener(a,c,!0):v!==void 0?i.addEventListener(a,c,{passive:v}):i.addEventListener(a,c,!1)}function Hm(i,a,c,f,v){var b=f;if((a&1)===0&&(a&2)===0&&f!==null)e:for(;;){if(f===null)return;var T=f.tag;if(T===3||T===4){var A=f.stateNode.containerInfo;if(A===v)break;if(T===4)for(T=f.return;T!==null;){var N=T.tag;if((N===3||N===4)&&T.stateNode.containerInfo===v)return;T=T.return}for(;A!==null;){if(T=fo(A),T===null)return;if(N=T.tag,N===5||N===6||N===26||N===27){f=b=T;continue e}A=A.parentNode}}f=f.return}Vl(function(){var V=b,X=Ae(c),ee=[];e:{var F=$y.get(i);if(F!==void 0){var $=qu,we=i;switch(i){case"keypress":if(Cs(c)===0)break e;case"keydown":case"keyup":$=EA;break;case"focusin":we="focus",$=up;break;case"focusout":we="blur",$=up;break;case"beforeblur":case"afterblur":$=up;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=Ey;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=uA;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=wA;break;case Vy:case Fy:case Wy:$=hA;break;case Gy:$=AA;break;case"scroll":case"scrollend":$=lA;break;case"wheel":$=MA;break;case"copy":case"cut":case"paste":$=mA;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=Ty;break;case"toggle":case"beforetoggle":$=jA}var Pe=(a&4)!==0,At=!Pe&&(i==="scroll"||i==="scrollend"),P=Pe?F!==null?F+"Capture":null:F;Pe=[];for(var I=V,q;I!==null;){var Q=I;if(q=Q.stateNode,Q=Q.tag,Q!==5&&Q!==26&&Q!==27||q===null||P===null||(Q=vo(I,P),Q!=null&&Pe.push(Sc(I,Q,q))),At)break;I=I.return}0<Pe.length&&(F=new $(F,we,null,c,X),ee.push({event:F,listeners:Pe}))}}if((a&7)===0){e:{if(F=i==="mouseover"||i==="pointerover",$=i==="mouseout"||i==="pointerout",F&&c!==Bt&&(we=c.relatedTarget||c.fromElement)&&(fo(we)||we[_i]))break e;if(($||F)&&(F=X.window===X?X:(F=X.ownerDocument)?F.defaultView||F.parentWindow:window,$?(we=c.relatedTarget||c.toElement,$=V,we=we?fo(we):null,we!==null&&(At=s(we),Pe=we.tag,we!==At||Pe!==5&&Pe!==27&&Pe!==6)&&(we=null)):($=null,we=V),$!==we)){if(Pe=Ey,Q="onMouseLeave",P="onMouseEnter",I="mouse",(i==="pointerout"||i==="pointerover")&&(Pe=Ty,Q="onPointerLeave",P="onPointerEnter",I="pointer"),At=$==null?F:ks($),q=we==null?F:ks(we),F=new Pe(Q,I+"leave",$,c,X),F.target=At,F.relatedTarget=q,Q=null,fo(X)===V&&(Pe=new Pe(P,I+"enter",we,c,X),Pe.target=q,Pe.relatedTarget=At,Q=Pe),At=Q,$&&we)t:{for(Pe=O_,P=$,I=we,q=0,Q=P;Q;Q=Pe(Q))q++;Q=0;for(var De=I;De;De=Pe(De))Q++;for(;0<q-Q;)P=Pe(P),q--;for(;0<Q-q;)I=Pe(I),Q--;for(;q--;){if(P===I||I!==null&&P===I.alternate){Pe=P;break t}P=Pe(P),I=Pe(I)}Pe=null}else Pe=null;$!==null&&mx(ee,F,$,Pe,!1),we!==null&&At!==null&&mx(ee,At,we,Pe,!0)}}e:{if(F=V?ks(V):window,$=F.nodeName&&F.nodeName.toLowerCase(),$==="select"||$==="input"&&F.type==="file")var ht=Ry;else if(Oy(F))if(Ny)ht=HA;else{ht=PA;var Oe=BA}else $=F.nodeName,!$||$.toLowerCase()!=="input"||F.type!=="checkbox"&&F.type!=="radio"?V&&ft(V.elementType)&&(ht=Ry):ht=UA;if(ht&&(ht=ht(i,V))){jy(ee,ht,c,X);break e}Oe&&Oe(i,F,V),i==="focusout"&&V&&F.type==="number"&&V.memoizedProps.value!=null&&G(F,"number",F.value)}switch(Oe=V?ks(V):window,i){case"focusin":(Oy(Oe)||Oe.contentEditable==="true")&&(Oa=Oe,gp=V,Xl=null);break;case"focusout":Xl=gp=Oa=null;break;case"mousedown":vp=!0;break;case"contextmenu":case"mouseup":case"dragend":vp=!1,Hy(ee,c,X);break;case"selectionchange":if(VA)break;case"keydown":case"keyup":Hy(ee,c,X)}var Ye;if(fp)e:{switch(i){case"compositionstart":var at="onCompositionStart";break e;case"compositionend":at="onCompositionEnd";break e;case"compositionupdate":at="onCompositionUpdate";break e}at=void 0}else Ma?_y(i,c)&&(at="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(at="onCompositionStart");at&&(wy&&c.locale!=="ko"&&(Ma||at!=="onCompositionStart"?at==="onCompositionEnd"&&Ma&&(Ye=ji()):(li=X,ye="value"in li?li.value:li.textContent,Ma=!0)),Oe=Rd(V,at),0<Oe.length&&(at=new ky(at,i,null,c,X),ee.push({event:at,listeners:Oe}),Ye?at.data=Ye:(Ye=My(c),Ye!==null&&(at.data=Ye)))),(Ye=NA?DA(i,c):LA(i,c))&&(at=Rd(V,"onBeforeInput"),0<at.length&&(Oe=new ky("onBeforeInput","beforeinput",null,c,X),ee.push({event:Oe,listeners:at}),Oe.data=Ye)),C_(ee,i,V,c,X)}hx(ee,a)})}function Sc(i,a,c){return{instance:i,listener:a,currentTarget:c}}function Rd(i,a){for(var c=a+"Capture",f=[];i!==null;){var v=i,b=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||b===null||(v=vo(i,c),v!=null&&f.unshift(Sc(i,v,b)),v=vo(i,a),v!=null&&f.push(Sc(i,v,b))),i.tag===3)return f;i=i.return}return[]}function O_(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5&&i.tag!==27);return i||null}function mx(i,a,c,f,v){for(var b=a._reactName,T=[];c!==null&&c!==f;){var A=c,N=A.alternate,V=A.stateNode;if(A=A.tag,N!==null&&N===f)break;A!==5&&A!==26&&A!==27||V===null||(N=V,v?(V=vo(c,b),V!=null&&T.unshift(Sc(c,V,N))):v||(V=vo(c,b),V!=null&&T.push(Sc(c,V,N)))),c=c.return}T.length!==0&&i.push({event:a,listeners:T})}var j_=/\r\n?/g,R_=/\u0000|\uFFFD/g;function gx(i){return(typeof i=="string"?i:""+i).replace(j_,`
`).replace(R_,"")}function vx(i,a){return a=gx(a),gx(i)===a}function Ct(i,a,c,f,v,b){switch(c){case"children":typeof f=="string"?a==="body"||a==="textarea"&&f===""||be(i,f):(typeof f=="number"||typeof f=="bigint")&&a!=="body"&&be(i,""+f);break;case"className":ai(i,"class",f);break;case"tabIndex":ai(i,"tabindex",f);break;case"dir":case"role":case"viewBox":case"width":case"height":ai(i,c,f);break;case"style":Qe(i,f,b);break;case"data":if(a!=="object"){ai(i,"data",f);break}case"src":case"href":if(f===""&&(a!=="a"||c!=="href")){i.removeAttribute(c);break}if(f==null||typeof f=="function"||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(c);break}f=Se(""+f),i.setAttribute(c,f);break;case"action":case"formAction":if(typeof f=="function"){i.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof b=="function"&&(c==="formAction"?(a!=="input"&&Ct(i,a,"name",v.name,v,null),Ct(i,a,"formEncType",v.formEncType,v,null),Ct(i,a,"formMethod",v.formMethod,v,null),Ct(i,a,"formTarget",v.formTarget,v,null)):(Ct(i,a,"encType",v.encType,v,null),Ct(i,a,"method",v.method,v,null),Ct(i,a,"target",v.target,v,null)));if(f==null||typeof f=="symbol"||typeof f=="boolean"){i.removeAttribute(c);break}f=Se(""+f),i.setAttribute(c,f);break;case"onClick":f!=null&&(i.onclick=Me);break;case"onScroll":f!=null&&nt("scroll",i);break;case"onScrollEnd":f!=null&&nt("scrollend",i);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(r(61));if(c=f.__html,c!=null){if(v.children!=null)throw Error(r(60));i.innerHTML=c}}break;case"multiple":i.multiple=f&&typeof f!="function"&&typeof f!="symbol";break;case"muted":i.muted=f&&typeof f!="function"&&typeof f!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(f==null||typeof f=="function"||typeof f=="boolean"||typeof f=="symbol"){i.removeAttribute("xlink:href");break}c=Se(""+f),i.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(c,""+f):i.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":f&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(c,""):i.removeAttribute(c);break;case"capture":case"download":f===!0?i.setAttribute(c,""):f!==!1&&f!=null&&typeof f!="function"&&typeof f!="symbol"?i.setAttribute(c,f):i.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":f!=null&&typeof f!="function"&&typeof f!="symbol"&&!isNaN(f)&&1<=f?i.setAttribute(c,f):i.removeAttribute(c);break;case"rowSpan":case"start":f==null||typeof f=="function"||typeof f=="symbol"||isNaN(f)?i.removeAttribute(c):i.setAttribute(c,f);break;case"popover":nt("beforetoggle",i),nt("toggle",i),Aa(i,"popover",f);break;case"xlinkActuate":Wr(i,"http://www.w3.org/1999/xlink","xlink:actuate",f);break;case"xlinkArcrole":Wr(i,"http://www.w3.org/1999/xlink","xlink:arcrole",f);break;case"xlinkRole":Wr(i,"http://www.w3.org/1999/xlink","xlink:role",f);break;case"xlinkShow":Wr(i,"http://www.w3.org/1999/xlink","xlink:show",f);break;case"xlinkTitle":Wr(i,"http://www.w3.org/1999/xlink","xlink:title",f);break;case"xlinkType":Wr(i,"http://www.w3.org/1999/xlink","xlink:type",f);break;case"xmlBase":Wr(i,"http://www.w3.org/XML/1998/namespace","xml:base",f);break;case"xmlLang":Wr(i,"http://www.w3.org/XML/1998/namespace","xml:lang",f);break;case"xmlSpace":Wr(i,"http://www.w3.org/XML/1998/namespace","xml:space",f);break;case"is":Aa(i,"is",f);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Ke.get(c)||c,Aa(i,c,f))}}function qm(i,a,c,f,v,b){switch(c){case"style":Qe(i,f,b);break;case"dangerouslySetInnerHTML":if(f!=null){if(typeof f!="object"||!("__html"in f))throw Error(r(61));if(c=f.__html,c!=null){if(v.children!=null)throw Error(r(60));i.innerHTML=c}}break;case"children":typeof f=="string"?be(i,f):(typeof f=="number"||typeof f=="bigint")&&be(i,""+f);break;case"onScroll":f!=null&&nt("scroll",i);break;case"onScrollEnd":f!=null&&nt("scrollend",i);break;case"onClick":f!=null&&(i.onclick=Me);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!mo.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(v=c.endsWith("Capture"),a=c.slice(2,v?c.length-7:void 0),b=i[An]||null,b=b!=null?b[c]:null,typeof b=="function"&&i.removeEventListener(a,b,v),typeof f=="function")){typeof b!="function"&&b!==null&&(c in i?i[c]=null:i.hasAttribute(c)&&i.removeAttribute(c)),i.addEventListener(a,f,v);break e}c in i?i[c]=f:f===!0?i.setAttribute(c,""):Aa(i,c,f)}}}function jn(i,a,c){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":nt("error",i),nt("load",i);var f=!1,v=!1,b;for(b in c)if(c.hasOwnProperty(b)){var T=c[b];if(T!=null)switch(b){case"src":f=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Ct(i,a,b,T,c,null)}}v&&Ct(i,a,"srcSet",c.srcSet,c,null),f&&Ct(i,a,"src",c.src,c,null);return;case"input":nt("invalid",i);var A=b=T=v=null,N=null,V=null;for(f in c)if(c.hasOwnProperty(f)){var X=c[f];if(X!=null)switch(f){case"name":v=X;break;case"type":T=X;break;case"checked":N=X;break;case"defaultChecked":V=X;break;case"value":b=X;break;case"defaultValue":A=X;break;case"children":case"dangerouslySetInnerHTML":if(X!=null)throw Error(r(137,a));break;default:Ct(i,a,f,X,c,null)}}L(i,b,A,N,V,T,v,!1);return;case"select":nt("invalid",i),f=T=b=null;for(v in c)if(c.hasOwnProperty(v)&&(A=c[v],A!=null))switch(v){case"value":b=A;break;case"defaultValue":T=A;break;case"multiple":f=A;default:Ct(i,a,v,A,c,null)}a=b,c=T,i.multiple=!!f,a!=null?Y(i,!!f,a,!1):c!=null&&Y(i,!!f,c,!0);return;case"textarea":nt("invalid",i),b=v=f=null;for(T in c)if(c.hasOwnProperty(T)&&(A=c[T],A!=null))switch(T){case"value":f=A;break;case"defaultValue":v=A;break;case"children":b=A;break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(r(91));break;default:Ct(i,a,T,A,c,null)}Te(i,f,v,b);return;case"option":for(N in c)if(c.hasOwnProperty(N)&&(f=c[N],f!=null))switch(N){case"selected":i.selected=f&&typeof f!="function"&&typeof f!="symbol";break;default:Ct(i,a,N,f,c,null)}return;case"dialog":nt("beforetoggle",i),nt("toggle",i),nt("cancel",i),nt("close",i);break;case"iframe":case"object":nt("load",i);break;case"video":case"audio":for(f=0;f<xc.length;f++)nt(xc[f],i);break;case"image":nt("error",i),nt("load",i);break;case"details":nt("toggle",i);break;case"embed":case"source":case"link":nt("error",i),nt("load",i);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(V in c)if(c.hasOwnProperty(V)&&(f=c[V],f!=null))switch(V){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,a));default:Ct(i,a,V,f,c,null)}return;default:if(ft(a)){for(X in c)c.hasOwnProperty(X)&&(f=c[X],f!==void 0&&qm(i,a,X,f,c,void 0));return}}for(A in c)c.hasOwnProperty(A)&&(f=c[A],f!=null&&Ct(i,a,A,f,c,null))}function N_(i,a,c,f){switch(a){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,b=null,T=null,A=null,N=null,V=null,X=null;for($ in c){var ee=c[$];if(c.hasOwnProperty($)&&ee!=null)switch($){case"checked":break;case"value":break;case"defaultValue":N=ee;default:f.hasOwnProperty($)||Ct(i,a,$,null,f,ee)}}for(var F in f){var $=f[F];if(ee=c[F],f.hasOwnProperty(F)&&($!=null||ee!=null))switch(F){case"type":b=$;break;case"name":v=$;break;case"checked":V=$;break;case"defaultChecked":X=$;break;case"value":T=$;break;case"defaultValue":A=$;break;case"children":case"dangerouslySetInnerHTML":if($!=null)throw Error(r(137,a));break;default:$!==ee&&Ct(i,a,F,$,f,ee)}}O(i,T,A,N,V,X,b,v);return;case"select":$=T=A=F=null;for(b in c)if(N=c[b],c.hasOwnProperty(b)&&N!=null)switch(b){case"value":break;case"multiple":$=N;default:f.hasOwnProperty(b)||Ct(i,a,b,null,f,N)}for(v in f)if(b=f[v],N=c[v],f.hasOwnProperty(v)&&(b!=null||N!=null))switch(v){case"value":F=b;break;case"defaultValue":A=b;break;case"multiple":T=b;default:b!==N&&Ct(i,a,v,b,f,N)}a=A,c=T,f=$,F!=null?Y(i,!!c,F,!1):!!f!=!!c&&(a!=null?Y(i,!!c,a,!0):Y(i,!!c,c?[]:"",!1));return;case"textarea":$=F=null;for(A in c)if(v=c[A],c.hasOwnProperty(A)&&v!=null&&!f.hasOwnProperty(A))switch(A){case"value":break;case"children":break;default:Ct(i,a,A,null,f,v)}for(T in f)if(v=f[T],b=c[T],f.hasOwnProperty(T)&&(v!=null||b!=null))switch(T){case"value":F=v;break;case"defaultValue":$=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(r(91));break;default:v!==b&&Ct(i,a,T,v,f,b)}he(i,F,$);return;case"option":for(var we in c)if(F=c[we],c.hasOwnProperty(we)&&F!=null&&!f.hasOwnProperty(we))switch(we){case"selected":i.selected=!1;break;default:Ct(i,a,we,null,f,F)}for(N in f)if(F=f[N],$=c[N],f.hasOwnProperty(N)&&F!==$&&(F!=null||$!=null))switch(N){case"selected":i.selected=F&&typeof F!="function"&&typeof F!="symbol";break;default:Ct(i,a,N,F,f,$)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Pe in c)F=c[Pe],c.hasOwnProperty(Pe)&&F!=null&&!f.hasOwnProperty(Pe)&&Ct(i,a,Pe,null,f,F);for(V in f)if(F=f[V],$=c[V],f.hasOwnProperty(V)&&F!==$&&(F!=null||$!=null))switch(V){case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(137,a));break;default:Ct(i,a,V,F,f,$)}return;default:if(ft(a)){for(var At in c)F=c[At],c.hasOwnProperty(At)&&F!==void 0&&!f.hasOwnProperty(At)&&qm(i,a,At,void 0,f,F);for(X in f)F=f[X],$=c[X],!f.hasOwnProperty(X)||F===$||F===void 0&&$===void 0||qm(i,a,X,F,f,$);return}}for(var P in c)F=c[P],c.hasOwnProperty(P)&&F!=null&&!f.hasOwnProperty(P)&&Ct(i,a,P,null,f,F);for(ee in f)F=f[ee],$=c[ee],!f.hasOwnProperty(ee)||F===$||F==null&&$==null||Ct(i,a,ee,F,f,$)}function yx(i){switch(i){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function D_(){if(typeof performance.getEntriesByType=="function"){for(var i=0,a=0,c=performance.getEntriesByType("resource"),f=0;f<c.length;f++){var v=c[f],b=v.transferSize,T=v.initiatorType,A=v.duration;if(b&&A&&yx(T)){for(T=0,A=v.responseEnd,f+=1;f<c.length;f++){var N=c[f],V=N.startTime;if(V>A)break;var X=N.transferSize,ee=N.initiatorType;X&&yx(ee)&&(N=N.responseEnd,T+=X*(N<A?1:(A-V)/(N-V)))}if(--f,a+=8*(b+T)/(v.duration/1e3),i++,10<i)break}}if(0<i)return a/i/1e6}return navigator.connection&&(i=navigator.connection.downlink,typeof i=="number")?i:5}var Vm=null,Fm=null;function Nd(i){return i.nodeType===9?i:i.ownerDocument}function bx(i){switch(i){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function xx(i,a){if(i===0)switch(a){case"svg":return 1;case"math":return 2;default:return 0}return i===1&&a==="foreignObject"?0:i}function Wm(i,a){return i==="textarea"||i==="noscript"||typeof a.children=="string"||typeof a.children=="number"||typeof a.children=="bigint"||typeof a.dangerouslySetInnerHTML=="object"&&a.dangerouslySetInnerHTML!==null&&a.dangerouslySetInnerHTML.__html!=null}var Gm=null;function L_(){var i=window.event;return i&&i.type==="popstate"?i===Gm?!1:(Gm=i,!0):(Gm=null,!1)}var Sx=typeof setTimeout=="function"?setTimeout:void 0,z_=typeof clearTimeout=="function"?clearTimeout:void 0,Ex=typeof Promise=="function"?Promise:void 0,I_=typeof queueMicrotask=="function"?queueMicrotask:typeof Ex<"u"?function(i){return Ex.resolve(null).then(i).catch(B_)}:Sx;function B_(i){setTimeout(function(){throw i})}function Do(i){return i==="head"}function kx(i,a){var c=a,f=0;do{var v=c.nextSibling;if(i.removeChild(c),v&&v.nodeType===8)if(c=v.data,c==="/$"||c==="/&"){if(f===0){i.removeChild(v),il(a);return}f--}else if(c==="$"||c==="$?"||c==="$~"||c==="$!"||c==="&")f++;else if(c==="html")Ec(i.ownerDocument.documentElement);else if(c==="head"){c=i.ownerDocument.head,Ec(c);for(var b=c.firstChild;b;){var T=b.nextSibling,A=b.nodeName;b[uo]||A==="SCRIPT"||A==="STYLE"||A==="LINK"&&b.rel.toLowerCase()==="stylesheet"||c.removeChild(b),b=T}}else c==="body"&&Ec(i.ownerDocument.body);c=v}while(c);il(a)}function Tx(i,a){var c=i;i=0;do{var f=c.nextSibling;if(c.nodeType===1?a?(c._stashedDisplay=c.style.display,c.style.display="none"):(c.style.display=c._stashedDisplay||"",c.getAttribute("style")===""&&c.removeAttribute("style")):c.nodeType===3&&(a?(c._stashedText=c.nodeValue,c.nodeValue=""):c.nodeValue=c._stashedText||""),f&&f.nodeType===8)if(c=f.data,c==="/$"){if(i===0)break;i--}else c!=="$"&&c!=="$?"&&c!=="$~"&&c!=="$!"||i++;c=f}while(c)}function $m(i){var a=i.firstChild;for(a&&a.nodeType===10&&(a=a.nextSibling);a;){var c=a;switch(a=a.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":$m(c),Hl(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}i.removeChild(c)}}function P_(i,a,c,f){for(;i.nodeType===1;){var v=c;if(i.nodeName.toLowerCase()!==a.toLowerCase()){if(!f&&(i.nodeName!=="INPUT"||i.type!=="hidden"))break}else if(f){if(!i[uo])switch(a){case"meta":if(!i.hasAttribute("itemprop"))break;return i;case"link":if(b=i.getAttribute("rel"),b==="stylesheet"&&i.hasAttribute("data-precedence"))break;if(b!==v.rel||i.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||i.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||i.getAttribute("title")!==(v.title==null?null:v.title))break;return i;case"style":if(i.hasAttribute("data-precedence"))break;return i;case"script":if(b=i.getAttribute("src"),(b!==(v.src==null?null:v.src)||i.getAttribute("type")!==(v.type==null?null:v.type)||i.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&b&&i.hasAttribute("async")&&!i.hasAttribute("itemprop"))break;return i;default:return i}}else if(a==="input"&&i.type==="hidden"){var b=v.name==null?null:""+v.name;if(v.type==="hidden"&&i.getAttribute("name")===b)return i}else return i;if(i=Nr(i.nextSibling),i===null)break}return null}function U_(i,a,c){if(a==="")return null;for(;i.nodeType!==3;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!c||(i=Nr(i.nextSibling),i===null))return null;return i}function wx(i,a){for(;i.nodeType!==8;)if((i.nodeType!==1||i.nodeName!=="INPUT"||i.type!=="hidden")&&!a||(i=Nr(i.nextSibling),i===null))return null;return i}function Km(i){return i.data==="$?"||i.data==="$~"}function Ym(i){return i.data==="$!"||i.data==="$?"&&i.ownerDocument.readyState!=="loading"}function H_(i,a){var c=i.ownerDocument;if(i.data==="$~")i._reactRetry=a;else if(i.data!=="$?"||c.readyState!=="loading")a();else{var f=function(){a(),c.removeEventListener("DOMContentLoaded",f)};c.addEventListener("DOMContentLoaded",f),i._reactRetry=f}}function Nr(i){for(;i!=null;i=i.nextSibling){var a=i.nodeType;if(a===1||a===3)break;if(a===8){if(a=i.data,a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"||a==="F!"||a==="F")break;if(a==="/$"||a==="/&")return null}}return i}var Xm=null;function Cx(i){i=i.nextSibling;for(var a=0;i;){if(i.nodeType===8){var c=i.data;if(c==="/$"||c==="/&"){if(a===0)return Nr(i.nextSibling);a--}else c!=="$"&&c!=="$!"&&c!=="$?"&&c!=="$~"&&c!=="&"||a++}i=i.nextSibling}return null}function Ax(i){i=i.previousSibling;for(var a=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"||c==="$~"||c==="&"){if(a===0)return i;a--}else c!=="/$"&&c!=="/&"||a++}i=i.previousSibling}return null}function _x(i,a,c){switch(a=Nd(c),i){case"html":if(i=a.documentElement,!i)throw Error(r(452));return i;case"head":if(i=a.head,!i)throw Error(r(453));return i;case"body":if(i=a.body,!i)throw Error(r(454));return i;default:throw Error(r(451))}}function Ec(i){for(var a=i.attributes;a.length;)i.removeAttributeNode(a[0]);Hl(i)}var Dr=new Map,Mx=new Set;function Dd(i){return typeof i.getRootNode=="function"?i.getRootNode():i.nodeType===9?i:i.ownerDocument}var Gi=ne.d;ne.d={f:q_,r:V_,D:F_,C:W_,L:G_,m:$_,X:Y_,S:K_,M:X_};function q_(){var i=Gi.f(),a=wd();return i||a}function V_(i){var a=ho(i);a!==null&&a.tag===5&&a.type==="form"?Gb(a):Gi.r(i)}var tl=typeof document>"u"?null:document;function Ox(i,a,c){var f=tl;if(f&&typeof a=="string"&&a){var v=M(a);v='link[rel="'+i+'"][href="'+v+'"]',typeof c=="string"&&(v+='[crossorigin="'+c+'"]'),Mx.has(v)||(Mx.add(v),i={rel:i,crossOrigin:c,href:a},f.querySelector(v)===null&&(a=f.createElement("link"),jn(a,"link",i),sn(a),f.head.appendChild(a)))}}function F_(i){Gi.D(i),Ox("dns-prefetch",i,null)}function W_(i,a){Gi.C(i,a),Ox("preconnect",i,a)}function G_(i,a,c){Gi.L(i,a,c);var f=tl;if(f&&i&&a){var v='link[rel="preload"][as="'+M(a)+'"]';a==="image"&&c&&c.imageSrcSet?(v+='[imagesrcset="'+M(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(v+='[imagesizes="'+M(c.imageSizes)+'"]')):v+='[href="'+M(i)+'"]';var b=v;switch(a){case"style":b=nl(i);break;case"script":b=rl(i)}Dr.has(b)||(i=g({rel:"preload",href:a==="image"&&c&&c.imageSrcSet?void 0:i,as:a},c),Dr.set(b,i),f.querySelector(v)!==null||a==="style"&&f.querySelector(kc(b))||a==="script"&&f.querySelector(Tc(b))||(a=f.createElement("link"),jn(a,"link",i),sn(a),f.head.appendChild(a)))}}function $_(i,a){Gi.m(i,a);var c=tl;if(c&&i){var f=a&&typeof a.as=="string"?a.as:"script",v='link[rel="modulepreload"][as="'+M(f)+'"][href="'+M(i)+'"]',b=v;switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":b=rl(i)}if(!Dr.has(b)&&(i=g({rel:"modulepreload",href:i},a),Dr.set(b,i),c.querySelector(v)===null)){switch(f){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(Tc(b)))return}f=c.createElement("link"),jn(f,"link",i),sn(f),c.head.appendChild(f)}}}function K_(i,a,c){Gi.S(i,a,c);var f=tl;if(f&&i){var v=po(f).hoistableStyles,b=nl(i);a=a||"default";var T=v.get(b);if(!T){var A={loading:0,preload:null};if(T=f.querySelector(kc(b)))A.loading=5;else{i=g({rel:"stylesheet",href:i,"data-precedence":a},c),(c=Dr.get(b))&&Jm(i,c);var N=T=f.createElement("link");sn(N),jn(N,"link",i),N._p=new Promise(function(V,X){N.onload=V,N.onerror=X}),N.addEventListener("load",function(){A.loading|=1}),N.addEventListener("error",function(){A.loading|=2}),A.loading|=4,Ld(T,a,f)}T={type:"stylesheet",instance:T,count:1,state:A},v.set(b,T)}}}function Y_(i,a){Gi.X(i,a);var c=tl;if(c&&i){var f=po(c).hoistableScripts,v=rl(i),b=f.get(v);b||(b=c.querySelector(Tc(v)),b||(i=g({src:i,async:!0},a),(a=Dr.get(v))&&Qm(i,a),b=c.createElement("script"),sn(b),jn(b,"link",i),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},f.set(v,b))}}function X_(i,a){Gi.M(i,a);var c=tl;if(c&&i){var f=po(c).hoistableScripts,v=rl(i),b=f.get(v);b||(b=c.querySelector(Tc(v)),b||(i=g({src:i,async:!0,type:"module"},a),(a=Dr.get(v))&&Qm(i,a),b=c.createElement("script"),sn(b),jn(b,"link",i),c.head.appendChild(b)),b={type:"script",instance:b,count:1,state:null},f.set(v,b))}}function jx(i,a,c,f){var v=(v=se.current)?Dd(v):null;if(!v)throw Error(r(446));switch(i){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(a=nl(c.href),c=po(v).hoistableStyles,f=c.get(a),f||(f={type:"style",instance:null,count:0,state:null},c.set(a,f)),f):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){i=nl(c.href);var b=po(v).hoistableStyles,T=b.get(i);if(T||(v=v.ownerDocument||v,T={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},b.set(i,T),(b=v.querySelector(kc(i)))&&!b._p&&(T.instance=b,T.state.loading=5),Dr.has(i)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},Dr.set(i,c),b||J_(v,i,c,T.state))),a&&f===null)throw Error(r(528,""));return T}if(a&&f!==null)throw Error(r(529,""));return null;case"script":return a=c.async,c=c.src,typeof c=="string"&&a&&typeof a!="function"&&typeof a!="symbol"?(a=rl(c),c=po(v).hoistableScripts,f=c.get(a),f||(f={type:"script",instance:null,count:0,state:null},c.set(a,f)),f):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,i))}}function nl(i){return'href="'+M(i)+'"'}function kc(i){return'link[rel="stylesheet"]['+i+"]"}function Rx(i){return g({},i,{"data-precedence":i.precedence,precedence:null})}function J_(i,a,c,f){i.querySelector('link[rel="preload"][as="style"]['+a+"]")?f.loading=1:(a=i.createElement("link"),f.preload=a,a.addEventListener("load",function(){return f.loading|=1}),a.addEventListener("error",function(){return f.loading|=2}),jn(a,"link",c),sn(a),i.head.appendChild(a))}function rl(i){return'[src="'+M(i)+'"]'}function Tc(i){return"script[async]"+i}function Nx(i,a,c){if(a.count++,a.instance===null)switch(a.type){case"style":var f=i.querySelector('style[data-href~="'+M(c.href)+'"]');if(f)return a.instance=f,sn(f),f;var v=g({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return f=(i.ownerDocument||i).createElement("style"),sn(f),jn(f,"style",v),Ld(f,c.precedence,i),a.instance=f;case"stylesheet":v=nl(c.href);var b=i.querySelector(kc(v));if(b)return a.state.loading|=4,a.instance=b,sn(b),b;f=Rx(c),(v=Dr.get(v))&&Jm(f,v),b=(i.ownerDocument||i).createElement("link"),sn(b);var T=b;return T._p=new Promise(function(A,N){T.onload=A,T.onerror=N}),jn(b,"link",f),a.state.loading|=4,Ld(b,c.precedence,i),a.instance=b;case"script":return b=rl(c.src),(v=i.querySelector(Tc(b)))?(a.instance=v,sn(v),v):(f=c,(v=Dr.get(b))&&(f=g({},c),Qm(f,v)),i=i.ownerDocument||i,v=i.createElement("script"),sn(v),jn(v,"link",f),i.head.appendChild(v),a.instance=v);case"void":return null;default:throw Error(r(443,a.type))}else a.type==="stylesheet"&&(a.state.loading&4)===0&&(f=a.instance,a.state.loading|=4,Ld(f,c.precedence,i));return a.instance}function Ld(i,a,c){for(var f=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=f.length?f[f.length-1]:null,b=v,T=0;T<f.length;T++){var A=f[T];if(A.dataset.precedence===a)b=A;else if(b!==v)break}b?b.parentNode.insertBefore(i,b.nextSibling):(a=c.nodeType===9?c.head:c,a.insertBefore(i,a.firstChild))}function Jm(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.title==null&&(i.title=a.title)}function Qm(i,a){i.crossOrigin==null&&(i.crossOrigin=a.crossOrigin),i.referrerPolicy==null&&(i.referrerPolicy=a.referrerPolicy),i.integrity==null&&(i.integrity=a.integrity)}var zd=null;function Dx(i,a,c){if(zd===null){var f=new Map,v=zd=new Map;v.set(c,f)}else v=zd,f=v.get(c),f||(f=new Map,v.set(c,f));if(f.has(i))return f;for(f.set(i,null),c=c.getElementsByTagName(i),v=0;v<c.length;v++){var b=c[v];if(!(b[uo]||b[on]||i==="link"&&b.getAttribute("rel")==="stylesheet")&&b.namespaceURI!=="http://www.w3.org/2000/svg"){var T=b.getAttribute(a)||"";T=i+T;var A=f.get(T);A?A.push(b):f.set(T,[b])}}return f}function Lx(i,a,c){i=i.ownerDocument||i,i.head.insertBefore(c,a==="title"?i.querySelector("head > title"):null)}function Q_(i,a,c){if(c===1||a.itemProp!=null)return!1;switch(i){case"meta":case"title":return!0;case"style":if(typeof a.precedence!="string"||typeof a.href!="string"||a.href==="")break;return!0;case"link":if(typeof a.rel!="string"||typeof a.href!="string"||a.href===""||a.onLoad||a.onError)break;switch(a.rel){case"stylesheet":return i=a.disabled,typeof a.precedence=="string"&&i==null;default:return!0}case"script":if(a.async&&typeof a.async!="function"&&typeof a.async!="symbol"&&!a.onLoad&&!a.onError&&a.src&&typeof a.src=="string")return!0}return!1}function zx(i){return!(i.type==="stylesheet"&&(i.state.loading&3)===0)}function Z_(i,a,c,f){if(c.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var v=nl(f.href),b=a.querySelector(kc(v));if(b){a=b._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(i.count++,i=Id.bind(i),a.then(i,i)),c.state.loading|=4,c.instance=b,sn(b);return}b=a.ownerDocument||a,f=Rx(f),(v=Dr.get(v))&&Jm(f,v),b=b.createElement("link"),sn(b);var T=b;T._p=new Promise(function(A,N){T.onload=A,T.onerror=N}),jn(b,"link",f),c.instance=b}i.stylesheets===null&&(i.stylesheets=new Map),i.stylesheets.set(c,a),(a=c.state.preload)&&(c.state.loading&3)===0&&(i.count++,c=Id.bind(i),a.addEventListener("load",c),a.addEventListener("error",c))}}var Zm=0;function eM(i,a){return i.stylesheets&&i.count===0&&Pd(i,i.stylesheets),0<i.count||0<i.imgCount?function(c){var f=setTimeout(function(){if(i.stylesheets&&Pd(i,i.stylesheets),i.unsuspend){var b=i.unsuspend;i.unsuspend=null,b()}},6e4+a);0<i.imgBytes&&Zm===0&&(Zm=62500*D_());var v=setTimeout(function(){if(i.waitingForImages=!1,i.count===0&&(i.stylesheets&&Pd(i,i.stylesheets),i.unsuspend)){var b=i.unsuspend;i.unsuspend=null,b()}},(i.imgBytes>Zm?50:800)+a);return i.unsuspend=c,function(){i.unsuspend=null,clearTimeout(f),clearTimeout(v)}}:null}function Id(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Pd(this,this.stylesheets);else if(this.unsuspend){var i=this.unsuspend;this.unsuspend=null,i()}}}var Bd=null;function Pd(i,a){i.stylesheets=null,i.unsuspend!==null&&(i.count++,Bd=new Map,a.forEach(tM,i),Bd=null,Id.call(i))}function tM(i,a){if(!(a.state.loading&4)){var c=Bd.get(i);if(c)var f=c.get(null);else{c=new Map,Bd.set(i,c);for(var v=i.querySelectorAll("link[data-precedence],style[data-precedence]"),b=0;b<v.length;b++){var T=v[b];(T.nodeName==="LINK"||T.getAttribute("media")!=="not all")&&(c.set(T.dataset.precedence,T),f=T)}f&&c.set(null,f)}v=a.instance,T=v.getAttribute("data-precedence"),b=c.get(T)||f,b===f&&c.set(null,v),c.set(T,v),this.count++,f=Id.bind(this),v.addEventListener("load",f),v.addEventListener("error",f),b?b.parentNode.insertBefore(v,b.nextSibling):(i=i.nodeType===9?i.head:i,i.insertBefore(v,i.firstChild)),a.state.loading|=4}}var wc={$$typeof:_,Provider:null,Consumer:null,_currentValue:ce,_currentValue2:ce,_threadCount:0};function nM(i,a,c,f,v,b,T,A,N){this.tag=1,this.containerInfo=i,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ta(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ta(0),this.hiddenUpdates=Ta(null),this.identifierPrefix=f,this.onUncaughtError=v,this.onCaughtError=b,this.onRecoverableError=T,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=N,this.incompleteTransitions=new Map}function Ix(i,a,c,f,v,b,T,A,N,V,X,ee){return i=new nM(i,a,c,T,N,V,X,ee,A),a=1,b===!0&&(a|=24),b=pr(3,null,null,a),i.current=b,b.stateNode=i,a=Rp(),a.refCount++,i.pooledCache=a,a.refCount++,b.memoizedState={element:f,isDehydrated:c,cache:a},zp(b),i}function Bx(i){return i?(i=Na,i):Na}function Px(i,a,c,f,v,b){v=Bx(v),f.context===null?f.context=v:f.pendingContext=v,f=ko(a),f.payload={element:c},b=b===void 0?null:b,b!==null&&(f.callback=b),c=To(i,f,a),c!==null&&(ar(c,i,a),rc(c,i,a))}function Ux(i,a){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<a?c:a}}function eg(i,a){Ux(i,a),(i=i.alternate)&&Ux(i,a)}function Hx(i){if(i.tag===13||i.tag===31){var a=Os(i,67108864);a!==null&&ar(a,i,67108864),eg(i,67108864)}}function qx(i){if(i.tag===13||i.tag===31){var a=br();a=Pl(a);var c=Os(i,a);c!==null&&ar(c,i,a),eg(i,a)}}var Ud=!0;function rM(i,a,c,f){var v=H.T;H.T=null;var b=ne.p;try{ne.p=2,tg(i,a,c,f)}finally{ne.p=b,H.T=v}}function iM(i,a,c,f){var v=H.T;H.T=null;var b=ne.p;try{ne.p=8,tg(i,a,c,f)}finally{ne.p=b,H.T=v}}function tg(i,a,c,f){if(Ud){var v=ng(f);if(v===null)Hm(i,a,f,Hd,c),Fx(i,f);else if(sM(v,i,a,c,f))f.stopPropagation();else if(Fx(i,f),a&4&&-1<oM.indexOf(i)){for(;v!==null;){var b=ho(v);if(b!==null)switch(b.tag){case 3:if(b=b.stateNode,b.current.memoizedState.isDehydrated){var T=oi(b.pendingLanes);if(T!==0){var A=b;for(A.pendingLanes|=2,A.entangledLanes|=2;T;){var N=1<<31-Gn(T);A.entanglements[1]|=N,T&=~N}fi(b),(vt&6)===0&&(kd=It()+500,bc(0))}}break;case 31:case 13:A=Os(b,2),A!==null&&ar(A,b,2),wd(),eg(b,2)}if(b=ng(f),b===null&&Hm(i,a,f,Hd,c),b===v)break;v=b}v!==null&&f.stopPropagation()}else Hm(i,a,f,null,c)}}function ng(i){return i=Ae(i),rg(i)}var Hd=null;function rg(i){if(Hd=null,i=fo(i),i!==null){var a=s(i);if(a===null)i=null;else{var c=a.tag;if(c===13){if(i=l(a),i!==null)return i;i=null}else if(c===31){if(i=u(a),i!==null)return i;i=null}else if(c===3){if(a.stateNode.current.memoizedState.isDehydrated)return a.tag===3?a.stateNode.containerInfo:null;i=null}else a!==i&&(i=null)}}return Hd=i,null}function Vx(i){switch(i){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(fr()){case ys:return 2;case Ea:return 8;case Bn:case Ci:return 32;case bs:return 268435456;default:return 32}default:return 32}}var ig=!1,Lo=null,zo=null,Io=null,Cc=new Map,Ac=new Map,Bo=[],oM="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Fx(i,a){switch(i){case"focusin":case"focusout":Lo=null;break;case"dragenter":case"dragleave":zo=null;break;case"mouseover":case"mouseout":Io=null;break;case"pointerover":case"pointerout":Cc.delete(a.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ac.delete(a.pointerId)}}function _c(i,a,c,f,v,b){return i===null||i.nativeEvent!==b?(i={blockedOn:a,domEventName:c,eventSystemFlags:f,nativeEvent:b,targetContainers:[v]},a!==null&&(a=ho(a),a!==null&&Hx(a)),i):(i.eventSystemFlags|=f,a=i.targetContainers,v!==null&&a.indexOf(v)===-1&&a.push(v),i)}function sM(i,a,c,f,v){switch(a){case"focusin":return Lo=_c(Lo,i,a,c,f,v),!0;case"dragenter":return zo=_c(zo,i,a,c,f,v),!0;case"mouseover":return Io=_c(Io,i,a,c,f,v),!0;case"pointerover":var b=v.pointerId;return Cc.set(b,_c(Cc.get(b)||null,i,a,c,f,v)),!0;case"gotpointercapture":return b=v.pointerId,Ac.set(b,_c(Ac.get(b)||null,i,a,c,f,v)),!0}return!1}function Wx(i){var a=fo(i.target);if(a!==null){var c=s(a);if(c!==null){if(a=c.tag,a===13){if(a=l(c),a!==null){i.blockedOn=a,wa(i.priority,function(){qx(c)});return}}else if(a===31){if(a=u(c),a!==null){i.blockedOn=a,wa(i.priority,function(){qx(c)});return}}else if(a===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function qd(i){if(i.blockedOn!==null)return!1;for(var a=i.targetContainers;0<a.length;){var c=ng(i.nativeEvent);if(c===null){c=i.nativeEvent;var f=new c.constructor(c.type,c);Bt=f,c.target.dispatchEvent(f),Bt=null}else return a=ho(c),a!==null&&Hx(a),i.blockedOn=c,!1;a.shift()}return!0}function Gx(i,a,c){qd(i)&&c.delete(a)}function aM(){ig=!1,Lo!==null&&qd(Lo)&&(Lo=null),zo!==null&&qd(zo)&&(zo=null),Io!==null&&qd(Io)&&(Io=null),Cc.forEach(Gx),Ac.forEach(Gx)}function Vd(i,a){i.blockedOn===a&&(i.blockedOn=null,ig||(ig=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,aM)))}var Fd=null;function $x(i){Fd!==i&&(Fd=i,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Fd===i&&(Fd=null);for(var a=0;a<i.length;a+=3){var c=i[a],f=i[a+1],v=i[a+2];if(typeof f!="function"){if(rg(f||c)===null)continue;break}var b=ho(c);b!==null&&(i.splice(a,3),a-=3,nm(b,{pending:!0,data:v,method:c.method,action:f},f,v))}}))}function il(i){function a(N){return Vd(N,i)}Lo!==null&&Vd(Lo,i),zo!==null&&Vd(zo,i),Io!==null&&Vd(Io,i),Cc.forEach(a),Ac.forEach(a);for(var c=0;c<Bo.length;c++){var f=Bo[c];f.blockedOn===i&&(f.blockedOn=null)}for(;0<Bo.length&&(c=Bo[0],c.blockedOn===null);)Wx(c),c.blockedOn===null&&Bo.shift();if(c=(i.ownerDocument||i).$$reactFormReplay,c!=null)for(f=0;f<c.length;f+=3){var v=c[f],b=c[f+1],T=v[An]||null;if(typeof b=="function")T||$x(c);else if(T){var A=null;if(b&&b.hasAttribute("formAction")){if(v=b,T=b[An]||null)A=T.formAction;else if(rg(v)!==null)continue}else A=T.action;typeof A=="function"?c[f+1]=A:(c.splice(f,3),f-=3),$x(c)}}}function Kx(){function i(b){b.canIntercept&&b.info==="react-transition"&&b.intercept({handler:function(){return new Promise(function(T){return v=T})},focusReset:"manual",scroll:"manual"})}function a(){v!==null&&(v(),v=null),f||setTimeout(c,20)}function c(){if(!f&&!navigation.transition){var b=navigation.currentEntry;b&&b.url!=null&&navigation.navigate(b.url,{state:b.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var f=!1,v=null;return navigation.addEventListener("navigate",i),navigation.addEventListener("navigatesuccess",a),navigation.addEventListener("navigateerror",a),setTimeout(c,100),function(){f=!0,navigation.removeEventListener("navigate",i),navigation.removeEventListener("navigatesuccess",a),navigation.removeEventListener("navigateerror",a),v!==null&&(v(),v=null)}}}function og(i){this._internalRoot=i}Wd.prototype.render=og.prototype.render=function(i){var a=this._internalRoot;if(a===null)throw Error(r(409));var c=a.current,f=br();Px(c,f,i,a,null,null)},Wd.prototype.unmount=og.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var a=i.containerInfo;Px(i.current,2,null,i,null,null),wd(),a[_i]=null}};function Wd(i){this._internalRoot=i}Wd.prototype.unstable_scheduleHydration=function(i){if(i){var a=$n();i={blockedOn:null,target:i,priority:a};for(var c=0;c<Bo.length&&a!==0&&a<Bo[c].priority;c++);Bo.splice(c,0,i),c===0&&Wx(i)}};var Yx=e.version;if(Yx!=="19.2.0")throw Error(r(527,Yx,"19.2.0"));ne.findDOMNode=function(i){var a=i._reactInternals;if(a===void 0)throw typeof i.render=="function"?Error(r(188)):(i=Object.keys(i).join(","),Error(r(268,i)));return i=h(a),i=i!==null?p(i):null,i=i===null?null:i.stateNode,i};var lM={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:H,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Gd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Gd.isDisabled&&Gd.supportsFiber)try{xs=Gd.inject(lM),mn=Gd}catch{}}return Oc.createRoot=function(i,a){if(!o(i))throw Error(r(299));var c=!1,f="",v=n1,b=r1,T=i1;return a!=null&&(a.unstable_strictMode===!0&&(c=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(v=a.onUncaughtError),a.onCaughtError!==void 0&&(b=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError)),a=Ix(i,1,!1,null,null,c,f,null,v,b,T,Kx),i[_i]=a.current,Um(i),new og(a)},Oc.hydrateRoot=function(i,a,c){if(!o(i))throw Error(r(299));var f=!1,v="",b=n1,T=r1,A=i1,N=null;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(v=c.identifierPrefix),c.onUncaughtError!==void 0&&(b=c.onUncaughtError),c.onCaughtError!==void 0&&(T=c.onCaughtError),c.onRecoverableError!==void 0&&(A=c.onRecoverableError),c.formState!==void 0&&(N=c.formState)),a=Ix(i,1,!0,a,c??null,f,v,N,b,T,A,Kx),a.context=Bx(null),c=a.current,f=br(),f=Pl(f),v=ko(f),v.callback=null,To(c,v,f),c=f,a.current.lanes=c,Ai(a,c),fi(a),i[_i]=a.current,Um(i),new Wd(a)},Oc.version="19.2.0",Oc}var eS;function $M(){if(eS)return sg.exports;eS=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),sg.exports=GM(),sg.exports}var KM=$M(),$d={},jc={},tS={},nS;function YM(){return nS||(nS=1,(function(){var t={},e="";try{e=location.hash.toString()}catch{}var n=d(e),r=w("initParams");if(r)for(var o in r)typeof n[o]>"u"&&(n[o]=r[o]);k("initParams",n);var s=!1,l;try{if(s=window.parent!=null&&window!=window.parent,s){window.addEventListener("message",function(C){if(C.source===window.parent){try{var _=JSON.parse(C.data)}catch{return}if(!(!_||!_.eventType))if(_.eventType=="set_custom_style")C.origin==="https://web.telegram.org"&&(l.innerHTML=_.eventData);else if(_.eventType=="reload_iframe"){try{window.parent.postMessage(JSON.stringify({eventType:"iframe_will_reload"}),"*")}catch{}location.reload()}else y(_.eventType,_.eventData)}}),l=document.createElement("style"),document.head.appendChild(l);try{window.parent.postMessage(JSON.stringify({eventType:"iframe_ready",eventData:{reload_supported:!0}}),"*")}catch{}}}catch{}function u(C){try{return C=C.replace(/\+/g,"%20"),decodeURIComponent(C)}catch{return C}}function d(C){C=C.replace(/^#/,"");var _={};if(!C.length)return _;if(C.indexOf("=")<0&&C.indexOf("?")<0)return _._path=u(C),_;var R=C.indexOf("?");if(R>=0){var j=C.substr(0,R);_._path=u(j),C=C.substr(R+1)}var z=h(C);for(var B in z)_[B]=z[B];return _}function h(C){var _={};if(!C.length)return _;var R=C.split("&"),j,z,B,K;for(j=0;j<R.length;j++)z=R[j].split("="),B=u(z[0]),K=z[1]==null?null:u(z[1]),_[B]=K;return _}function p(C,_){var R=C.indexOf("#");if(R<0)return C+"#"+_;var j=C.substr(R+1);return j.indexOf("=")>=0||j.indexOf("?")>=0?C+"&"+_:j.length>0?C+"?"+_:C+_}function g(C,_,R){if(_||(_=function(){}),R===void 0&&(R=""),console.log("[Telegram.WebView] > postEvent",C,R),window.TelegramWebviewProxy!==void 0)TelegramWebviewProxy.postEvent(C,JSON.stringify(R)),_();else if(window.external&&"notify"in window.external)window.external.notify(JSON.stringify({eventType:C,eventData:R})),_();else if(s)try{var j="https://web.telegram.org";j="*",window.parent.postMessage(JSON.stringify({eventType:C,eventData:R}),j),_()}catch(z){_(z)}else _({notAvailable:!0})}function y(C,_){console.log("[Telegram.WebView] < receiveEvent",C,_),x(C,function(R){R(C,_)})}function x(C,_){var R=t[C];if(!(R===void 0||!R.length))for(var j=0;j<R.length;j++)try{_(R[j])}catch{}}function S(C,_){t[C]===void 0&&(t[C]=[]);var R=t[C].indexOf(_);R===-1&&t[C].push(_)}function E(C,_){if(t[C]!==void 0){var R=t[C].indexOf(_);R!==-1&&t[C].splice(R,1)}}function k(C,_){try{return window.sessionStorage.setItem("__telegram__"+C,JSON.stringify(_)),!0}catch{}return!1}function w(C){try{return JSON.parse(window.sessionStorage.getItem("__telegram__"+C))}catch{}return null}window.Telegram||(window.Telegram={}),window.Telegram.WebView={initParams:n,isIframe:s,onEvent:S,offEvent:E,postEvent:g,receiveEvent:y,callEventCallbacks:x},window.Telegram.Utils={urlSafeDecode:u,urlParseQueryString:h,urlParseHashParams:d,urlAppendHashParams:p,sessionStorageSet:k,sessionStorageGet:w},window.TelegramGameProxy_receiveEvent=y,window.TelegramGameProxy={receiveEvent:y}})(),(function(){var t=window.Telegram.Utils,e=window.Telegram.WebView,n=e.initParams,r=e.isIframe,o={},s="",l={},u={},d="light",h="6.0",p="unknown",g=!0,y=!1,x=!1,S="bg_color",E="bg_color",k=null;if(n.tgWebAppData&&n.tgWebAppData.length){s=n.tgWebAppData,l=t.urlParseQueryString(s);for(var w in l){var C=l[w];try{(C.substr(0,1)=="{"&&C.substr(-1)=="}"||C.substr(0,1)=="["&&C.substr(-1)=="]")&&(l[w]=JSON.parse(C))}catch{}}}var _=t.sessionStorageGet("themeParams");if(n.tgWebAppThemeParams&&n.tgWebAppThemeParams.length){var R=n.tgWebAppThemeParams;try{var j=JSON.parse(R);j&&se(j)}catch{}}_&&se(_);var z=t.sessionStorageGet("defaultColors");if(n.tgWebAppDefaultColors&&n.tgWebAppDefaultColors.length){var B=n.tgWebAppDefaultColors;try{var K=JSON.parse(B);K&&dt(K)}catch{}}z&&dt(z),n.tgWebAppVersion&&(h=n.tgWebAppVersion),n.tgWebAppPlatform&&(p=n.tgWebAppPlatform);var W=t.sessionStorageGet("isFullscreen");n.tgWebAppFullscreen&&We(!0),W&&We(W=="yes");var J=t.sessionStorageGet("isOrientationLocked");J&&Ue(J=="yes");function Z(M,O){O.theme_params&&(se(O.theme_params),window.Telegram.WebApp.MainButton.setParams({}),window.Telegram.WebApp.SecondaryButton.setParams({}),ao(),lo(),Ai(),ae("themeChanged"))}var te=window.innerHeight;function je(M,O){O.height&&(window.removeEventListener("resize",ke),wr(O))}function ke(M){te!=window.innerHeight&&(te=window.innerHeight,ae("viewportChanged",{isStateStable:!0}))}function me(M,O){O&&qr(O)}function H(M,O){O&&Be(O)}function ne(M,O){O.is_visible?(g=!0,ae("activated")):(g=!1,ae("deactivated"))}function ce(M){if(!(M.metaKey||M.ctrlKey)){for(var O=M.target;O.tagName!="A"&&O.parentNode;)O=O.parentNode;O.tagName=="A"&&O.target!="_blank"&&(O.protocol=="http:"||O.protocol=="https:")&&O.hostname=="t.me"&&(o.openTgLink(O.href),M.preventDefault())}}function Ce(M){return M.toString().replace(/^\s+|\s+$/g,"")}function ae(M){var O=Array.prototype.slice.call(arguments);M=O.shift(),e.callEventCallbacks("webview:"+M,function(L){L.apply(o,O)})}function ve(M,O){e.onEvent("webview:"+M,O)}function fe(M,O){e.offEvent("webview:"+M,O)}function ue(M,O){var L=document.documentElement;L&&L.style&&L.style.setProperty&&L.style.setProperty("--tg-"+M,O)}function We(M){y=!!M,t.sessionStorageSet("isFullscreen",y?"yes":"no")}function Ue(M){x=!!M,t.sessionStorageSet("isOrientationLocked",x?"yes":"no")}function se(M){M.bg_color=="#1c1c1d"&&M.bg_color==M.secondary_bg_color&&(M.secondary_bg_color="#2c2c2e");var O;for(var L in M)(O=co(M[L]))&&(u[L]=O,L=="bg_color"&&(d=Nu(O)?"dark":"light",ue("color-scheme",d)),L="theme-"+L.split("_").join("-"),ue(L,O));t.sessionStorageSet("themeParams",u)}function dt(M){d=="dark"?(M.bg_dark_color&&(S=M.bg_dark_color),M.header_dark_color&&(E=null,k=M.header_dark_color)):(M.bg_color&&(S=M.bg_color),M.header_color&&(E=null,k=M.header_color)),t.sessionStorageSet("defaultColors",M)}var mt={};function wn(M){for(var O=100;--O;){for(var L="",G="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",Y=G.length,he=0;he<M;he++)L+=G[Math.floor(Math.random()*Y)];if(!mt[L])return mt[L]={},L}throw Error("WebAppCallbackIdGenerateFailed")}var Wn=!1,yn=!1,Tr=!0;function wr(M){typeof M<"u"&&(Tr=!!M.is_expanded,Wn=M.height,M.is_state_stable&&(yn=M.height),ae("viewportChanged",{isStateStable:!!M.is_state_stable}));var O,L;Wn!==!1?O=Wn-Yt+"px":O=Yt?"calc(100vh - "+Yt+"px)":"100vh",yn!==!1?L=yn-Yt+"px":L=Yt?"calc(100vh - "+Yt+"px)":"100vh",ue("viewport-height",O),ue("viewport-stable-height",L)}var Ut={top:0,bottom:0,left:0,right:0};function qr(M){typeof M<"u"&&(typeof M.top<"u"&&(Ut.top=M.top),typeof M.bottom<"u"&&(Ut.bottom=M.bottom),typeof M.left<"u"&&(Ut.left=M.left),typeof M.right<"u"&&(Ut.right=M.right),ae("safeAreaChanged")),ue("safe-area-inset-top",Ut.top+"px"),ue("safe-area-inset-bottom",Ut.bottom+"px"),ue("safe-area-inset-left",Ut.left+"px"),ue("safe-area-inset-right",Ut.right+"px")}var Le={top:0,bottom:0,left:0,right:0};function Be(M){typeof M<"u"&&(typeof M.top<"u"&&(Le.top=M.top),typeof M.bottom<"u"&&(Le.bottom=M.bottom),typeof M.left<"u"&&(Le.left=M.left),typeof M.right<"u"&&(Le.right=M.right),ae("contentSafeAreaChanged")),ue("content-safe-area-inset-top",Le.top+"px"),ue("content-safe-area-inset-bottom",Le.bottom+"px"),ue("content-safe-area-inset-left",Le.left+"px"),ue("content-safe-area-inset-right",Le.right+"px")}var gt=!1;function Ht(M){if(!Fe("6.2")){console.warn("[Telegram.WebApp] Closing confirmation is not supported in version "+h);return}gt=!!M,e.postEvent("web_app_setup_closing_behavior",!1,{need_confirmation:gt})}var Cn=!0;function zn(M){if(!Fe("7.7")){console.warn("[Telegram.WebApp] Changing swipes behavior is not supported in version "+h);return}Cn=!!M,e.postEvent("web_app_setup_swipe_behavior",!1,{allow_vertical_swipe:Cn})}function In(M,O){We(O.is_fullscreen),ae("fullscreenChanged")}function Vr(M,O){O.error=="ALREADY_FULLSCREEN"&&!y&&We(!0),ae("fullscreenFailed",{error:O.error})}function It(M){if(!Fe("8.0")){console.warn("[Telegram.WebApp] Orientation locking is not supported in version "+h);return}Ue(M),e.postEvent("web_app_toggle_orientation_lock",!1,{locked:x})}var fr=[];function ys(M,O){ae("homeScreenAdded")}function Ea(M,O){var L=O.status||"unknown";if(fr.length>0){for(var G=0;G<fr.length;G++){var Y=fr[G];Y(L)}fr=[]}ae("homeScreenChecked",{status:L})}var Bn=!1;function Ci(M,O){if(Bn){var L=Bn;Bn=!1,L.callback&&L.callback(!0),ae("shareMessageSent")}}function bs(M,O){if(Bn){var L=Bn;Bn=!1,L.callback&&L.callback(!1),ae("shareMessageFailed",{error:O.error})}}var ri=!1;function rp(M,O){if(ri){var L=ri;ri=!1,L.callback&&L.callback(!0),ae("emojiStatusSet")}}function xs(M,O){if(ri){var L=ri;ri=!1,L.callback&&L.callback(!1),ae("emojiStatusFailed",{error:O.error})}}var mn=!1;function ii(M,O){if(mn){var L=mn;mn=!1,L.callback&&L.callback(O.status=="allowed"),ae("emojiStatusAccessRequested",{status:O.status})}}var Pn=!1;function Gn(){return E=="secondary_bg_color"?u.secondary_bg_color:E=="bg_color"?u.bg_color:k}function ip(M){if(!Fe("6.1")){console.warn("[Telegram.WebApp] Header color is not supported in version "+h);return}Fe("6.9")||(u.bg_color&&u.bg_color==M?M="bg_color":u.secondary_bg_color&&u.secondary_bg_color==M&&(M="secondary_bg_color"));var O=null,L=null;if(M=="bg_color"||M=="secondary_bg_color")L=M;else if(Fe("6.9")&&(O=co(M),!O))throw console.error("[Telegram.WebApp] Header color format is invalid",M),Error("WebAppHeaderColorInvalid");if(!Fe("6.9")&&L!="bg_color"&&L!="secondary_bg_color")throw console.error("[Telegram.WebApp] Header color key should be one of Telegram.WebApp.themeParams.bg_color, Telegram.WebApp.themeParams.secondary_bg_color, 'bg_color', 'secondary_bg_color'",M),Error("WebAppHeaderColorKeyInvalid");E=L,k=O,ao()}var ju=null,Bl=null;function ao(){(ju!=E||Bl!=k)&&(ju=E,Bl=k,Bl?e.postEvent("web_app_set_header_color",!1,{color:k}):e.postEvent("web_app_set_header_color",!1,{color_key:E}))}function Ss(){return S=="secondary_bg_color"?u.secondary_bg_color:S=="bg_color"?u.bg_color:S}function ka(M){if(!Fe("6.1")){console.warn("[Telegram.WebApp] Background color is not supported in version "+h);return}var O;if(M=="bg_color"||M=="secondary_bg_color")O=M;else if(O=co(M),!O)throw console.error("[Telegram.WebApp] Background color format is invalid",M),Error("WebAppBackgroundColorInvalid");S=O,lo()}var oi=null;function lo(){var M=Ss();oi!=M&&(oi=M,e.postEvent("web_app_set_background_color",!1,{color:M}))}var Fr="bottom_bar_bg_color";function Es(){return Fr=="bottom_bar_bg_color"?u.bottom_bar_bg_color||u.secondary_bg_color||"#ffffff":Fr=="secondary_bg_color"?u.secondary_bg_color:Fr=="bg_color"?u.bg_color:Fr}function Ru(M){if(!Fe("7.10")){console.warn("[Telegram.WebApp] Bottom bar color is not supported in version "+h);return}var O;if(M=="bg_color"||M=="secondary_bg_color"||M=="bottom_bar_bg_color")O=M;else if(O=co(M),!O)throw console.error("[Telegram.WebApp] Bottom bar color format is invalid",M),Error("WebAppBottomBarColorInvalid");Fr=O,Ai(),window.Telegram.WebApp.SecondaryButton.setParams({})}var Ta=null;function Ai(){var M=Es();Ta!=M&&(Ta=M,e.postEvent("web_app_set_bottom_bar_color",!1,{color:M})),n.tgWebAppDebug&&Ca()}function co(M){M+="";var O;if(O=/^\s*#([0-9a-f]{6})\s*$/i.exec(M))return"#"+O[1].toLowerCase();if(O=/^\s*#([0-9a-f])([0-9a-f])([0-9a-f])\s*$/i.exec(M))return("#"+O[1]+O[1]+O[2]+O[2]+O[3]+O[3]).toLowerCase();if(O=/^\s*rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d+\.{0,1}\d*))?\)\s*$/.exec(M)){var L=parseInt(O[1]),G=parseInt(O[2]),Y=parseInt(O[3]);return L=(L<16?"0":"")+L.toString(16),G=(G<16?"0":"")+G.toString(16),Y=(Y<16?"0":"")+Y.toString(16),"#"+L+G+Y}return!1}function Nu(M){M=M.replace(/[\s#]/g,""),M.length==3&&(M=M[0]+M[0]+M[1]+M[1]+M[2]+M[2]);var O=parseInt(M.substr(0,2),16),L=parseInt(M.substr(2,2),16),G=parseInt(M.substr(4,2),16),Y=Math.sqrt(.299*(O*O)+.587*(L*L)+.114*(G*G));return Y<120}function Du(M,O){typeof M!="string"&&(M=""),typeof O!="string"&&(O=""),M=M.replace(/^\s+|\s+$/g,"").split("."),O=O.replace(/^\s+|\s+$/g,"").split(".");var L=Math.max(M.length,O.length),G,Y,he;for(G=0;G<L;G++)if(Y=parseInt(M[G])||0,he=parseInt(O[G])||0,Y!=he)return Y>he?1:-1;return 0}function Fe(M){return Du(h,M)>=0}function Pl(M){if(window.Blob)try{return new Blob([M]).size}catch{}for(var O=M.length,L=M.length-1;L>=0;L--){var G=M.charCodeAt(L);G>127&&G<=2047?O++:G>2047&&G<=65535&&(O+=2),G>=56320&&G<=57343&&L--}return O}var Ul=(function(){var M=!1,O={};Object.defineProperty(O,"isVisible",{set:function(_e){et({is_visible:_e})},get:function(){return M},enumerable:!0});var L=null;e.onEvent("back_button_pressed",G);function G(){ae("backButtonClicked")}function Y(){return{is_visible:M}}function he(_e){return typeof _e>"u"&&(_e=Y()),JSON.stringify(_e)}function Te(){return Fe("6.1")?!0:(console.warn("[Telegram.WebApp] BackButton is not supported in version "+h),!1)}function be(){var _e=Y(),Qe=he(_e);L!==Qe&&(L=Qe,e.postEvent("web_app_setup_back_button",!1,_e))}function et(_e){return Te()&&(typeof _e.is_visible<"u"&&(M=!!_e.is_visible),be()),O}return O.onClick=function(_e){return Te()&&ve("backButtonClicked",_e),O},O.offClick=function(_e){return Te()&&fe("backButtonClicked",_e),O},O.show=function(){return et({is_visible:!0})},O.hide=function(){return et({is_visible:!1})},O})(),$n=null,wa={},Yt=0;if(n.tgWebAppDebug){$n=document.createElement("tg-bottom-bar");var on={display:"flex",gap:"7px",font:"600 14px/18px sans-serif",width:"100%",background:Es(),position:"fixed",left:"0",right:"0",bottom:"0",margin:"0",padding:"7px",textAlign:"center",boxSizing:"border-box",zIndex:"10000"};for(var An in on)$n.style[An]=on[An];document.addEventListener("DOMContentLoaded",function M(O){document.removeEventListener("DOMContentLoaded",M),document.body.appendChild($n)});var _i=document.createElement("style");_i.innerHTML='tg-bottom-button.shine { position: relative; overflow: hidden; } tg-bottom-button.shine:before { content:""; position: absolute; top: 0; width: 100%; height: 100%; background: linear-gradient(120deg, transparent, rgba(255, 255, 255, .2), transparent); animation: tg-bottom-button-shine 5s ease-in-out infinite; } @-webkit-keyframes tg-bottom-button-shine { 0% {left: -100%;} 12%,100% {left: 100%}} @keyframes tg-bottom-button-shine { 0% {left: -100%;} 12%,100% {left: 100%}}',$n.appendChild(_i)}function Ca(){var M=wa.main._bottomButton,O=wa.secondary._bottomButton;M.isVisible||O.isVisible?($n.style.display="flex",Yt=58,M.isVisible&&O.isVisible&&(O.position=="top"?($n.style.flexDirection="column-reverse",Yt+=51):O.position=="bottom"?($n.style.flexDirection="column",Yt+=51):O.position=="left"?$n.style.flexDirection="row-reverse":O.position=="right"&&($n.style.flexDirection="row"))):($n.style.display="none",Yt=0),$n.style.background=Es(),document.documentElement&&(document.documentElement.style.boxSizing="border-box",document.documentElement.style.paddingBottom=Yt+"px"),wr()}var Lu=function(M){var O=M=="main";if(O)var L="web_app_setup_main_button",G="main_button_pressed",Y="mainButtonClicked",he="Continue",Te=function(){return u.button_color||"#2481cc"},be=function(){return u.button_text_color||"#ffffff"};else var L="web_app_setup_secondary_button",G="secondary_button_pressed",Y="secondaryButtonClicked",he="Cancel",Te=function(){return Es()},be=function(){return u.button_color||"#2481cc"};var et=!1,_e=!0,Qe=!1,ft=!1,Ke=M,ge=he,Se=!1,Me=!1,Bt="left",Ae={};Object.defineProperty(Ae,"type",{get:function(){return Ke},enumerable:!0}),Object.defineProperty(Ae,"text",{set:function(ye){Ae.setParams({text:ye})},get:function(){return ge},enumerable:!0}),Object.defineProperty(Ae,"color",{set:function(ye){Ae.setParams({color:ye})},get:function(){return Se||Te()},enumerable:!0}),Object.defineProperty(Ae,"textColor",{set:function(ye){Ae.setParams({text_color:ye})},get:function(){return Me||be()},enumerable:!0}),Object.defineProperty(Ae,"isVisible",{set:function(ye){Ae.setParams({is_visible:ye})},get:function(){return et},enumerable:!0}),Object.defineProperty(Ae,"isProgressVisible",{get:function(){return ft},enumerable:!0}),Object.defineProperty(Ae,"isActive",{set:function(ye){Ae.setParams({is_active:ye})},get:function(){return _e},enumerable:!0}),Object.defineProperty(Ae,"hasShineEffect",{set:function(ye){Ae.setParams({has_shine_effect:ye})},get:function(){return Qe},enumerable:!0}),O||Object.defineProperty(Ae,"position",{set:function(ye){Ae.setParams({position:ye})},get:function(){return Bt},enumerable:!0});var Tt=null;e.onEvent(G,Vl);var Ge=null;if(n.tgWebAppDebug){Ge=document.createElement("tg-bottom-button");var qt={display:"none",width:"100%",height:"44px",borderRadius:"0",background:"no-repeat right center",padding:"13px 15px",textAlign:"center",boxSizing:"border-box"};for(var Cr in qt)Ge.style[Cr]=qt[Cr];$n.appendChild(Ge),Ge.addEventListener("click",Vl,!1),Ge._bottomButton=Ae,wa[M]=Ge}function Vl(){_e&&ae(Y)}function vo(){var ye=Ae.color,tr=Ae.textColor;if(et){var ji={is_visible:!0,is_active:_e,is_progress_visible:ft,text:ge,color:ye,text_color:tr,has_shine_effect:Qe&&_e&&!ft};O||(ji.position=Bt)}else var ji={is_visible:!1};return ji}function Gr(ye){return typeof ye>"u"&&(ye=vo()),JSON.stringify(ye)}function Ts(){var ye=vo(),tr=Gr(ye);Tt!==tr&&(Tt=tr,e.postEvent(L,!1,ye),n.tgWebAppDebug&&ws(ye))}function ws(ye){ye.is_visible?(Ge.style.display="block",Ge.style.opacity=ye.is_active?"1":"0.8",Ge.style.cursor=ye.is_active?"pointer":"auto",Ge.disabled=!ye.is_active,Ge.innerText=ye.text,Ge.className=ye.has_shine_effect?"shine":"",Ge.style.backgroundImage=ye.is_progress_visible?"url('data:image/svg+xml,"+encodeURIComponent('<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewport="0 0 48 48" width="48px" height="48px"><circle cx="50%" cy="50%" stroke="'+ye.text_color+'" stroke-width="2.25" stroke-linecap="round" fill="none" stroke-dashoffset="106" r="9" stroke-dasharray="56.52" rotate="-90"><animate attributeName="stroke-dashoffset" attributeType="XML" dur="360s" from="0" to="12500" repeatCount="indefinite"></animate><animateTransform attributeName="transform" attributeType="XML" type="rotate" dur="1s" from="-90 24 24" to="630 24 24" repeatCount="indefinite"></animateTransform></circle></svg>')+"')":"none",Ge.style.backgroundColor=ye.color,Ge.style.color=ye.text_color):Ge.style.display="none",Ca()}function li(ye){if(typeof ye.text<"u"){var tr=Ce(ye.text);if(!tr.length)throw console.error("[Telegram.WebApp] Bottom button text is required",ye.text),Error("WebAppBottomButtonParamInvalid");if(tr.length>64)throw console.error("[Telegram.WebApp] Bottom button text is too long",tr),Error("WebAppBottomButtonParamInvalid");ge=tr}if(typeof ye.color<"u")if(ye.color===!1||ye.color===null)Se=!1;else{var ji=co(ye.color);if(!ji)throw console.error("[Telegram.WebApp] Bottom button color format is invalid",ye.color),Error("WebAppBottomButtonParamInvalid");Se=ji}if(typeof ye.text_color<"u")if(ye.text_color===!1||ye.text_color===null)Me=!1;else{var Cs=co(ye.text_color);if(!Cs)throw console.error("[Telegram.WebApp] Bottom button text color format is invalid",ye.text_color),Error("WebAppBottomButtonParamInvalid");Me=Cs}if(typeof ye.is_visible<"u"){if(ye.is_visible&&!Ae.text.length)throw console.error("[Telegram.WebApp] Bottom button text is required"),Error("WebAppBottomButtonParamInvalid");et=!!ye.is_visible}if(typeof ye.has_shine_effect<"u"&&(Qe=!!ye.has_shine_effect),!O&&typeof ye.position<"u"){if(ye.position!="left"&&ye.position!="right"&&ye.position!="top"&&ye.position!="bottom")throw console.error("[Telegram.WebApp] Bottom button posiition is invalid",ye.position),Error("WebAppBottomButtonParamInvalid");Bt=ye.position}return typeof ye.is_active<"u"&&(_e=!!ye.is_active),Ts(),Ae}return Ae.setText=function(ye){return Ae.setParams({text:ye})},Ae.onClick=function(ye){return ve(Y,ye),Ae},Ae.offClick=function(ye){return fe(Y,ye),Ae},Ae.show=function(){return Ae.setParams({is_visible:!0})},Ae.hide=function(){return Ae.setParams({is_visible:!1})},Ae.enable=function(){return Ae.setParams({is_active:!0})},Ae.disable=function(){return Ae.setParams({is_active:!1})},Ae.showProgress=function(ye){return _e=!!ye,ft=!0,Ts(),Ae},Ae.hideProgress=function(){return Ae.isActive||(_e=!0),ft=!1,Ts(),Ae},Ae.setParams=li,Ae},op=Lu("main"),zu=Lu("secondary"),uo=(function(){var M=!1,O={};Object.defineProperty(O,"isVisible",{set:function(_e){et({is_visible:_e})},get:function(){return M},enumerable:!0});var L=null;e.onEvent("settings_button_pressed",G);function G(){ae("settingsButtonClicked")}function Y(){return{is_visible:M}}function he(_e){return typeof _e>"u"&&(_e=Y()),JSON.stringify(_e)}function Te(){return Fe("6.10")?!0:(console.warn("[Telegram.WebApp] SettingsButton is not supported in version "+h),!1)}function be(){var _e=Y(),Qe=he(_e);L!==Qe&&(L=Qe,e.postEvent("web_app_setup_settings_button",!1,_e))}function et(_e){return Te()&&(typeof _e.is_visible<"u"&&(M=!!_e.is_visible),be()),O}return O.onClick=function(_e){return Te()&&ve("settingsButtonClicked",_e),O},O.offClick=function(_e){return Te()&&fe("settingsButtonClicked",_e),O},O.show=function(){return et({is_visible:!0})},O.hide=function(){return et({is_visible:!1})},O})(),Hl=(function(){var M={};function O(L){if(!Fe("6.1"))return console.warn("[Telegram.WebApp] HapticFeedback is not supported in version "+h),M;if(L.type=="impact"){if(L.impact_style!="light"&&L.impact_style!="medium"&&L.impact_style!="heavy"&&L.impact_style!="rigid"&&L.impact_style!="soft")throw console.error("[Telegram.WebApp] Haptic impact style is invalid",L.impact_style),Error("WebAppHapticImpactStyleInvalid")}else if(L.type=="notification"){if(L.notification_type!="error"&&L.notification_type!="success"&&L.notification_type!="warning")throw console.error("[Telegram.WebApp] Haptic notification type is invalid",L.notification_type),Error("WebAppHapticNotificationTypeInvalid")}else if(L.type!="selection_change")throw console.error("[Telegram.WebApp] Haptic feedback type is invalid",L.type),Error("WebAppHapticFeedbackTypeInvalid");return e.postEvent("web_app_trigger_haptic_feedback",!1,L),M}return M.impactOccurred=function(L){return O({type:"impact",impact_style:L})},M.notificationOccurred=function(L){return O({type:"notification",notification_type:L})},M.selectionChanged=function(){return O({type:"selection_change"})},M})(),fo=(function(){var M={};function O(L,G,Y){if(!Fe("6.9"))throw console.error("[Telegram.WebApp] CloudStorage is not supported in version "+h),Error("WebAppMethodUnsupported");return ql(L,G,Y),M}return M.setItem=function(L,G,Y){return O("saveStorageValue",{key:L,value:G},Y)},M.getItem=function(L,G){return M.getItems([L],G?function(Y,he){Y?G(Y):G(null,he[L])}:null)},M.getItems=function(L,G){return O("getStorageValues",{keys:L},G)},M.removeItem=function(L,G){return M.removeItems([L],G)},M.removeItems=function(L,G){return O("deleteStorageValues",{keys:L},G)},M.getKeys=function(L){return O("getStorageKeys",{},L)},M})(),ho=(function(){var M=!1,O=!1,L="unknown",G=!1,Y=!1,he=!1,Te="",be={};Object.defineProperty(be,"isInited",{get:function(){return M},enumerable:!0}),Object.defineProperty(be,"isBiometricAvailable",{get:function(){return M&&O},enumerable:!0}),Object.defineProperty(be,"biometricType",{get:function(){return L||"unknown"},enumerable:!0}),Object.defineProperty(be,"isAccessRequested",{get:function(){return G},enumerable:!0}),Object.defineProperty(be,"isAccessGranted",{get:function(){return G&&Y},enumerable:!0}),Object.defineProperty(be,"isBiometricTokenSaved",{get:function(){return he},enumerable:!0}),Object.defineProperty(be,"deviceId",{get:function(){return Te||""},enumerable:!0});var et={callbacks:[]},_e=!1,Qe=!1,ft=!1;e.onEvent("biometry_info_received",Ke),e.onEvent("biometry_auth_requested",ge),e.onEvent("biometry_token_updated",Se);function Ke(Ae,Tt){if(M=!0,Tt.available?(O=!0,L=Tt.type||"unknown",Tt.access_requested?(G=!0,Y=!!Tt.access_granted,he=!!Tt.token_saved):(G=!1,Y=!1,he=!1)):(O=!1,L="unknown",G=!1,Y=!1,he=!1),Te=Tt.device_id||"",et.callbacks.length>0){for(var Ge=0;Ge<et.callbacks.length;Ge++){var qt=et.callbacks[Ge];qt()}et.callbacks=[]}if(_e){var Cr=_e;_e=!1,Cr.callback&&Cr.callback(Y)}ae("biometricManagerUpdated")}function ge(Ae,Tt){var Ge=Tt.status=="authorized",qt=Tt.token||"";if(Qe){var Cr=Qe;Qe=!1,Cr.callback&&Cr.callback(Ge,Ge?qt:null)}ae("biometricAuthRequested",Ge?{isAuthenticated:!0,biometricToken:qt}:{isAuthenticated:!1})}function Se(Ae,Tt){var Ge=!1;if(O&&G&&(Tt.status=="updated"?(he=!0,Ge=!0):Tt.status=="removed"&&(he=!1,Ge=!0)),ft){var qt=ft;ft=!1,qt.callback&&qt.callback(Ge)}ae("biometricTokenUpdated",{isUpdated:Ge})}function Me(){return Fe("7.2")?!0:(console.warn("[Telegram.WebApp] BiometricManager is not supported in version "+h),!1)}function Bt(){if(!M)throw console.error("[Telegram.WebApp] BiometricManager should be inited before using."),Error("WebAppBiometricManagerNotInited");return!0}return be.init=function(Ae){return!Me()||M||(Ae&&et.callbacks.push(Ae),e.postEvent("web_app_biometry_get_info",!1)),be},be.requestAccess=function(Ae,Tt){if(!Me())return be;if(Bt(),!O)throw console.error("[Telegram.WebApp] Biometrics is not available on this device."),Error("WebAppBiometricManagerBiometricsNotAvailable");if(_e)throw console.error("[Telegram.WebApp] Access is already requested"),Error("WebAppBiometricManagerAccessRequested");var Ge={};if(typeof Ae.reason<"u"){var qt=Ce(Ae.reason);if(qt.length>128)throw console.error("[Telegram.WebApp] Biometric reason is too long",qt),Error("WebAppBiometricRequestAccessParamInvalid");qt.length>0&&(Ge.reason=qt)}return _e={callback:Tt},e.postEvent("web_app_biometry_request_access",!1,Ge),be},be.authenticate=function(Ae,Tt){if(!Me())return be;if(Bt(),!O)throw console.error("[Telegram.WebApp] Biometrics is not available on this device."),Error("WebAppBiometricManagerBiometricsNotAvailable");if(!Y)throw console.error("[Telegram.WebApp] Biometric access was not granted by the user."),Error("WebAppBiometricManagerBiometricAccessNotGranted");if(Qe)throw console.error("[Telegram.WebApp] Authentication request is already in progress."),Error("WebAppBiometricManagerAuthenticationRequested");var Ge={};if(typeof Ae.reason<"u"){var qt=Ce(Ae.reason);if(qt.length>128)throw console.error("[Telegram.WebApp] Biometric reason is too long",qt),Error("WebAppBiometricRequestAccessParamInvalid");qt.length>0&&(Ge.reason=qt)}return Qe={callback:Tt},e.postEvent("web_app_biometry_request_auth",!1,Ge),be},be.updateBiometricToken=function(Ae,Tt){if(!Me())return be;if(Ae=Ae||"",Ae.length>1024)throw console.error("[Telegram.WebApp] Token is too long",Ae),Error("WebAppBiometricManagerTokenInvalid");if(Bt(),!O)throw console.error("[Telegram.WebApp] Biometrics is not available on this device."),Error("WebAppBiometricManagerBiometricsNotAvailable");if(!Y)throw console.error("[Telegram.WebApp] Biometric access was not granted by the user."),Error("WebAppBiometricManagerBiometricAccessNotGranted");if(ft)throw console.error("[Telegram.WebApp] Token request is already in progress."),Error("WebAppBiometricManagerTokenUpdateRequested");return ft={callback:Tt},e.postEvent("web_app_biometry_update_token",!1,{token:Ae}),be},be.openSettings=function(){if(!Me())return be;if(Bt(),!O)throw console.error("[Telegram.WebApp] Biometrics is not available on this device."),Error("WebAppBiometricManagerBiometricsNotAvailable");if(!G)throw console.error("[Telegram.WebApp] Biometric access was not requested yet."),Error("WebAppBiometricManagerBiometricsAccessNotRequested");return Y?(console.warn("[Telegram.WebApp] Biometric access was granted by the user, no need to go to settings."),be):(e.postEvent("web_app_biometry_open_settings",!1),be)},be})(),ks=(function(){var M=!1,O=!1,L=!1,G=!1,Y={};Object.defineProperty(Y,"isInited",{get:function(){return M},enumerable:!0}),Object.defineProperty(Y,"isLocationAvailable",{get:function(){return M&&O},enumerable:!0}),Object.defineProperty(Y,"isAccessRequested",{get:function(){return L},enumerable:!0}),Object.defineProperty(Y,"isAccessGranted",{get:function(){return L&&G},enumerable:!0});var he={callbacks:[]},Te={callbacks:[]};e.onEvent("location_checked",be),e.onEvent("location_requested",et);function be(Ke,ge){if(M=!0,ge.available?(O=!0,ge.access_requested?(L=!0,G=!!ge.access_granted):(L=!1,G=!1)):(O=!1,L=!1,G=!1),he.callbacks.length>0){for(var Se=0;Se<he.callbacks.length;Se++){var Me=he.callbacks[Se];Me()}he.callbacks=[]}ae("locationManagerUpdated")}function et(Ke,ge){if(!ge.available)Se=null;else{var Se={latitude:ge.latitude,longitude:ge.longitude,altitude:null,course:null,speed:null,horizontal_accuracy:null,vertical_accuracy:null,course_accuracy:null,speed_accuracy:null};typeof ge.altitude<"u"&&ge.altitude!==null&&(Se.altitude=ge.altitude),typeof ge.course<"u"&&ge.course!==null&&(Se.course=ge.course%360),typeof ge.speed<"u"&&ge.speed!==null&&(Se.speed=ge.speed),typeof ge.horizontal_accuracy<"u"&&ge.horizontal_accuracy!==null&&(Se.horizontal_accuracy=ge.horizontal_accuracy),typeof ge.vertical_accuracy<"u"&&ge.vertical_accuracy!==null&&(Se.vertical_accuracy=ge.vertical_accuracy),typeof ge.course_accuracy<"u"&&ge.course_accuracy!==null&&(Se.course_accuracy=ge.course_accuracy),typeof ge.speed_accuracy<"u"&&ge.speed_accuracy!==null&&(Se.speed_accuracy=ge.speed_accuracy)}!ge.available||!O||!L||!G?(he.callbacks.push(function(){_e(Se)}),e.postEvent("web_app_check_location",!1)):_e(Se)}function _e(Ke){if(Te.callbacks.length>0){for(var ge=0;ge<Te.callbacks.length;ge++){var Se=Te.callbacks[ge];Se(Ke)}Te.callbacks=[]}Ke!==null&&ae("locationRequested",{locationData:Ke})}function Qe(){return Fe("8.0")?!0:(console.warn("[Telegram.WebApp] LocationManager is not supported in version "+h),!1)}function ft(){if(!M)throw console.error("[Telegram.WebApp] LocationManager should be inited before using."),Error("WebAppLocationManagerNotInited");return!0}return Y.init=function(Ke){return!Qe()||M||(Ke&&he.callbacks.push(Ke),e.postEvent("web_app_check_location",!1)),Y},Y.getLocation=function(Ke){if(!Qe())return Y;if(ft(),!O)throw console.error("[Telegram.WebApp] Location is not available on this device."),Error("WebAppLocationManagerLocationNotAvailable");return Te.callbacks.push(Ke),e.postEvent("web_app_request_location"),Y},Y.openSettings=function(){if(!Qe())return Y;if(ft(),!O)throw console.error("[Telegram.WebApp] Location is not available on this device."),Error("WebAppLocationManagerLocationNotAvailable");if(!L)throw console.error("[Telegram.WebApp] Location access was not requested yet."),Error("WebAppLocationManagerLocationAccessNotRequested");return G?(console.warn("[Telegram.WebApp] Location access was granted by the user, no need to go to settings."),Y):(e.postEvent("web_app_open_location_settings",!1),Y)},Y})(),po=(function(){var M=!1,O=null,L=null,G=null,Y=[],he=[],Te={};Object.defineProperty(Te,"isStarted",{get:function(){return M},enumerable:!0}),Object.defineProperty(Te,"x",{get:function(){return O},enumerable:!0}),Object.defineProperty(Te,"y",{get:function(){return L},enumerable:!0}),Object.defineProperty(Te,"z",{get:function(){return G},enumerable:!0}),e.onEvent("accelerometer_started",be),e.onEvent("accelerometer_stopped",et),e.onEvent("accelerometer_changed",_e),e.onEvent("accelerometer_failed",Qe);function be(Ke,ge){if(M=!0,Y.length>0){for(var Se=0;Se<Y.length;Se++){var Me=Y[Se];Me(!0)}Y=[]}ae("accelerometerStarted")}function et(Ke,ge){if(M=!1,he.length>0){for(var Se=0;Se<he.length;Se++){var Me=he[Se];Me(!0)}he=[]}ae("accelerometerStopped")}function _e(Ke,ge){O=ge.x,L=ge.y,G=ge.z,ae("accelerometerChanged")}function Qe(Ke,ge){if(Y.length>0){for(var Se=0;Se<Y.length;Se++){var Me=Y[Se];Me(!1)}Y=[]}ae("accelerometerFailed",{error:ge.error})}function ft(){return Fe("8.0")?!0:(console.warn("[Telegram.WebApp] Accelerometer is not supported in version "+h),!1)}return Te.start=function(Ke,ge){if(Ke=Ke||{},!ft())return Te;var Se={},Me=parseInt(Ke.refresh_rate||1e3);return isNaN(Me)||Me<20||Me>1e3?console.warn("[Telegram.WebApp] Accelerometer refresh_rate is invalid",Me):Se.refresh_rate=Me,ge&&Y.push(ge),e.postEvent("web_app_start_accelerometer",!1,Se),Te},Te.stop=function(Ke){return ft()&&(Ke&&he.push(Ke),e.postEvent("web_app_stop_accelerometer")),Te},Te})(),sn=(function(){var M=!1,O=null,L=null,G=null,Y=!1,he=[],Te=[],be={};Object.defineProperty(be,"isStarted",{get:function(){return M},enumerable:!0}),Object.defineProperty(be,"absolute",{get:function(){return Y},enumerable:!0}),Object.defineProperty(be,"alpha",{get:function(){return O},enumerable:!0}),Object.defineProperty(be,"beta",{get:function(){return L},enumerable:!0}),Object.defineProperty(be,"gamma",{get:function(){return G},enumerable:!0}),e.onEvent("device_orientation_started",et),e.onEvent("device_orientation_stopped",_e),e.onEvent("device_orientation_changed",Qe),e.onEvent("device_orientation_failed",ft);function et(ge,Se){if(M=!0,he.length>0){for(var Me=0;Me<he.length;Me++){var Bt=he[Me];Bt(!0)}he=[]}ae("deviceOrientationStarted")}function _e(ge,Se){if(M=!1,Te.length>0){for(var Me=0;Me<Te.length;Me++){var Bt=Te[Me];Bt(!0)}Te=[]}ae("deviceOrientationStopped")}function Qe(ge,Se){Y=!!Se.absolute,O=Se.alpha,L=Se.beta,G=Se.gamma,ae("deviceOrientationChanged")}function ft(ge,Se){if(he.length>0){for(var Me=0;Me<he.length;Me++){var Bt=he[Me];Bt(!1)}he=[]}ae("deviceOrientationFailed",{error:Se.error})}function Ke(){return Fe("8.0")?!0:(console.warn("[Telegram.WebApp] DeviceOrientation is not supported in version "+h),!1)}return be.start=function(ge,Se){if(ge=ge||{},!Ke())return be;var Me={},Bt=parseInt(ge.refresh_rate||1e3);return isNaN(Bt)||Bt<20||Bt>1e3?console.warn("[Telegram.WebApp] DeviceOrientation refresh_rate is invalid",Bt):Me.refresh_rate=Bt,Me.need_absolute=!!ge.need_absolute,Se&&he.push(Se),e.postEvent("web_app_start_device_orientation",!1,Me),be},be.stop=function(ge){return Ke()&&(ge&&Te.push(ge),e.postEvent("web_app_stop_device_orientation")),be},be})(),Iu=(function(){var M=!1,O=null,L=null,G=null,Y=[],he=[],Te={};Object.defineProperty(Te,"isStarted",{get:function(){return M},enumerable:!0}),Object.defineProperty(Te,"x",{get:function(){return O},enumerable:!0}),Object.defineProperty(Te,"y",{get:function(){return L},enumerable:!0}),Object.defineProperty(Te,"z",{get:function(){return G},enumerable:!0}),e.onEvent("gyroscope_started",be),e.onEvent("gyroscope_stopped",et),e.onEvent("gyroscope_changed",_e),e.onEvent("gyroscope_failed",Qe);function be(Ke,ge){if(M=!0,Y.length>0){for(var Se=0;Se<Y.length;Se++){var Me=Y[Se];Me(!0)}Y=[]}ae("gyroscopeStarted")}function et(Ke,ge){if(M=!1,he.length>0){for(var Se=0;Se<he.length;Se++){var Me=he[Se];Me(!0)}he=[]}ae("gyroscopeStopped")}function _e(Ke,ge){O=ge.x,L=ge.y,G=ge.z,ae("gyroscopeChanged")}function Qe(Ke,ge){if(Y.length>0){for(var Se=0;Se<Y.length;Se++){var Me=Y[Se];Me(!1)}Y=[]}ae("gyroscopeFailed",{error:ge.error})}function ft(){return Fe("8.0")?!0:(console.warn("[Telegram.WebApp] Gyroscope is not supported in version "+h),!1)}return Te.start=function(Ke,ge){if(Ke=Ke||{},!ft())return Te;var Se={},Me=parseInt(Ke.refresh_rate||1e3);return isNaN(Me)||Me<20||Me>1e3?console.warn("[Telegram.WebApp] Gyroscope refresh_rate is invalid",Me):Se.refresh_rate=Me,ge&&Y.push(ge),e.postEvent("web_app_start_gyroscope",!1,Se),Te},Te.stop=function(Ke){return ft()&&(Ke&&he.push(Ke),e.postEvent("web_app_stop_gyroscope")),Te},Te})(),mo={};function Mi(M,O){if(O.slug&&mo[O.slug]){var L=mo[O.slug];delete mo[O.slug],L.callback&&L.callback(O.status),ae("invoiceClosed",{url:L.url,status:O.status})}}var Pn=!1;function Bu(M,O){if(Pn){var L=Pn;Pn=!1;var G=null;typeof O.button_id<"u"&&(G=O.button_id),L.callback&&L.callback(G),ae("popupClosed",{button_id:G})}}var si=!1;function Pu(M,O){if(si){var L=si,G=null;typeof O.data<"u"&&(G=O.data),L.callback&&L.callback(G)&&(si=!1,e.postEvent("web_app_close_scan_qr_popup",!1)),ae("qrTextReceived",{data:G})}}function sp(M,O){si=!1,ae("scanQrPopupClosed")}function Aa(M,O){if(O.req_id&&mt[O.req_id]){var L=mt[O.req_id];delete mt[O.req_id];var G=null;typeof O.data<"u"&&(G=O.data),L.callback&&L.callback(G),ae("clipboardTextReceived",{data:G})}}var ai=!1;function Wr(M,O){if(ai){var L=ai;ai=!1,L.callback&&L.callback(O.status=="allowed"),ae("writeAccessRequested",{status:O.status})}}function er(M,O){var L,G,Y=0,he=function(){ql("getRequestedContact",{},function(be,et){et&&et.length?(clearTimeout(G),M(et)):(Y+=50,L=setTimeout(he,Y))})},Te=function(){clearTimeout(L),M("")};G=setTimeout(Te,O),he()}var go=!1;function ap(M,O){if(go){var L=go;go=!1;var G=O.status=="sent",Y={status:O.status};G?er(function(he){if(he&&he.length){Y.response=he,Y.responseUnsafe=t.urlParseQueryString(he);for(var Te in Y.responseUnsafe){var be=Y.responseUnsafe[Te];try{(be.substr(0,1)=="{"&&be.substr(-1)=="}"||be.substr(0,1)=="["&&be.substr(-1)=="]")&&(Y.responseUnsafe[Te]=JSON.parse(be))}catch{}}}L.callback&&L.callback(G,Y),ae("contactRequested",Y)},3e3):(L.callback&&L.callback(G,Y),ae("contactRequested",Y))}}var Oi=!1;function Uu(M,O){if(Oi){var L=Oi;Oi=!1;var G=O.status=="downloading";L.callback&&L.callback(G),ae("fileDownloadRequested",{status:G?"downloading":"cancelled"})}}function _a(M,O){if(O.req_id&&mt[O.req_id]){var L=mt[O.req_id];delete mt[O.req_id];var G=null,Y=null;typeof O.result<"u"&&(G=O.result),typeof O.error<"u"&&(Y=O.error),L.callback&&L.callback(Y,G)}}function ql(M,O,L){if(!Fe("6.9"))throw console.error("[Telegram.WebApp] Method invokeCustomMethod is not supported in version "+h),Error("WebAppMethodUnsupported");var G=wn(16),Y={req_id:G,method:M,params:O||{}};mt[G]={callback:L},e.postEvent("web_app_invoke_custom_method",!1,Y)}window.Telegram||(window.Telegram={}),Object.defineProperty(o,"initData",{get:function(){return s},enumerable:!0}),Object.defineProperty(o,"initDataUnsafe",{get:function(){return l},enumerable:!0}),Object.defineProperty(o,"version",{get:function(){return h},enumerable:!0}),Object.defineProperty(o,"platform",{get:function(){return p},enumerable:!0}),Object.defineProperty(o,"colorScheme",{get:function(){return d},enumerable:!0}),Object.defineProperty(o,"themeParams",{get:function(){return u},enumerable:!0}),Object.defineProperty(o,"isExpanded",{get:function(){return Tr},enumerable:!0}),Object.defineProperty(o,"viewportHeight",{get:function(){return(Wn===!1?window.innerHeight:Wn)-Yt},enumerable:!0}),Object.defineProperty(o,"viewportStableHeight",{get:function(){return(yn===!1?window.innerHeight:yn)-Yt},enumerable:!0}),Object.defineProperty(o,"safeAreaInset",{get:function(){return Ut},enumerable:!0}),Object.defineProperty(o,"contentSafeAreaInset",{get:function(){return Le},enumerable:!0}),Object.defineProperty(o,"isClosingConfirmationEnabled",{set:function(M){Ht(M)},get:function(){return gt},enumerable:!0}),Object.defineProperty(o,"isVerticalSwipesEnabled",{set:function(M){zn(M)},get:function(){return Cn},enumerable:!0}),Object.defineProperty(o,"isFullscreen",{get:function(){return y},enumerable:!0}),Object.defineProperty(o,"isOrientationLocked",{set:function(M){It(M)},get:function(){return x},enumerable:!0}),Object.defineProperty(o,"isActive",{get:function(){return g},enumerable:!0}),Object.defineProperty(o,"headerColor",{set:function(M){ip(M)},get:function(){return Gn()},enumerable:!0}),Object.defineProperty(o,"backgroundColor",{set:function(M){ka(M)},get:function(){return Ss()},enumerable:!0}),Object.defineProperty(o,"bottomBarColor",{set:function(M){Ru(M)},get:function(){return Es()},enumerable:!0}),Object.defineProperty(o,"BackButton",{value:Ul,enumerable:!0}),Object.defineProperty(o,"MainButton",{value:op,enumerable:!0}),Object.defineProperty(o,"SecondaryButton",{value:zu,enumerable:!0}),Object.defineProperty(o,"SettingsButton",{value:uo,enumerable:!0}),Object.defineProperty(o,"HapticFeedback",{value:Hl,enumerable:!0}),Object.defineProperty(o,"CloudStorage",{value:fo,enumerable:!0}),Object.defineProperty(o,"BiometricManager",{value:ho,enumerable:!0}),Object.defineProperty(o,"Accelerometer",{value:po,enumerable:!0}),Object.defineProperty(o,"DeviceOrientation",{value:sn,enumerable:!0}),Object.defineProperty(o,"Gyroscope",{value:Iu,enumerable:!0}),Object.defineProperty(o,"LocationManager",{value:ks,enumerable:!0}),o.isVersionAtLeast=function(M){return Fe(M)},o.setHeaderColor=function(M){o.headerColor=M},o.setBackgroundColor=function(M){o.backgroundColor=M},o.setBottomBarColor=function(M){o.bottomBarColor=M},o.enableClosingConfirmation=function(){o.isClosingConfirmationEnabled=!0},o.disableClosingConfirmation=function(){o.isClosingConfirmationEnabled=!1},o.enableVerticalSwipes=function(){o.isVerticalSwipesEnabled=!0},o.disableVerticalSwipes=function(){o.isVerticalSwipesEnabled=!1},o.lockOrientation=function(){o.isOrientationLocked=!0},o.unlockOrientation=function(){o.isOrientationLocked=!1},o.requestFullscreen=function(){if(!Fe("8.0"))throw console.error("[Telegram.WebApp] Method requestFullscreen is not supported in version "+h),Error("WebAppMethodUnsupported");e.postEvent("web_app_request_fullscreen")},o.exitFullscreen=function(){if(!Fe("8.0"))throw console.error("[Telegram.WebApp] Method exitFullscreen is not supported in version "+h),Error("WebAppMethodUnsupported");e.postEvent("web_app_exit_fullscreen")},o.addToHomeScreen=function(){if(!Fe("8.0"))throw console.error("[Telegram.WebApp] Method addToHomeScreen is not supported in version "+h),Error("WebAppMethodUnsupported");e.postEvent("web_app_add_to_home_screen")},o.checkHomeScreenStatus=function(M){if(!Fe("8.0"))throw console.error("[Telegram.WebApp] Method checkHomeScreenStatus is not supported in version "+h),Error("WebAppMethodUnsupported");M&&fr.push(M),e.postEvent("web_app_check_home_screen")},o.onEvent=function(M,O){ve(M,O)},o.offEvent=function(M,O){fe(M,O)},o.sendData=function(M){if(!M||!M.length)throw console.error("[Telegram.WebApp] Data is required",M),Error("WebAppDataInvalid");if(Pl(M)>4096)throw console.error("[Telegram.WebApp] Data is too long",M),Error("WebAppDataInvalid");e.postEvent("web_app_data_send",!1,{data:M})},o.switchInlineQuery=function(M,O){if(!Fe("6.6"))throw console.error("[Telegram.WebApp] Method switchInlineQuery is not supported in version "+h),Error("WebAppMethodUnsupported");if(!n.tgWebAppBotInline)throw console.error("[Telegram.WebApp] Inline mode is disabled for this bot. Read more about inline mode: https://core.telegram.org/bots/inline"),Error("WebAppInlineModeDisabled");if(M=M||"",M.length>256)throw console.error("[Telegram.WebApp] Inline query is too long",M),Error("WebAppInlineQueryInvalid");var L=[];if(O){if(!Array.isArray(O))throw console.error("[Telegram.WebApp] Choose chat types should be an array",O),Error("WebAppInlineChooseChatTypesInvalid");for(var G={users:1,bots:1,groups:1,channels:1},Y=0;Y<O.length;Y++){var he=O[Y];if(!G[he])throw console.error("[Telegram.WebApp] Choose chat type is invalid",he),Error("WebAppInlineChooseChatTypeInvalid");G[he]!=2&&(G[he]=2,L.push(he))}}e.postEvent("web_app_switch_inline_query",!1,{query:M,chat_types:L})},o.openLink=function(G,O){var L=document.createElement("A");if(L.href=G,L.protocol!="http:"&&L.protocol!="https:")throw console.error("[Telegram.WebApp] Url protocol is not supported",G),Error("WebAppTgUrlInvalid");var G=L.href;if(O=O||{},Fe("6.1")){var Y={url:G};Fe("6.4")&&O.try_instant_view&&(Y.try_instant_view=!0),Fe("7.6")&&O.try_browser&&(Y.try_browser=O.try_browser),e.postEvent("web_app_open_link",!1,Y)}else window.open(G,"_blank")},o.openTelegramLink=function(M,O){var L=document.createElement("A");if(L.href=M,L.protocol!="http:"&&L.protocol!="https:")throw console.error("[Telegram.WebApp] Url protocol is not supported",M),Error("WebAppTgUrlInvalid");if(L.hostname!="t.me")throw console.error("[Telegram.WebApp] Url host is not supported",M),Error("WebAppTgUrlInvalid");var G=L.pathname+L.search;if(O=O||{},r||Fe("6.1")){var Y={path_full:G};O.force_request&&(Y.force_request=!0),e.postEvent("web_app_open_tg_link",!1,Y)}else location.href="https://t.me"+G},o.openInvoice=function(M,O){var L=document.createElement("A"),G,Y;if(L.href=M,L.protocol!="http:"&&L.protocol!="https:"||L.hostname!="t.me"||!(G=L.pathname.match(/^\/(\$|invoice\/)([A-Za-z0-9\-_=]+)$/))||!(Y=G[2]))throw console.error("[Telegram.WebApp] Invoice url is invalid",M),Error("WebAppInvoiceUrlInvalid");if(!Fe("6.1"))throw console.error("[Telegram.WebApp] Method openInvoice is not supported in version "+h),Error("WebAppMethodUnsupported");if(mo[Y])throw console.error("[Telegram.WebApp] Invoice is already opened"),Error("WebAppInvoiceOpened");mo[Y]={url:M,callback:O},e.postEvent("web_app_open_invoice",!1,{slug:Y})},o.showPopup=function(M,O){if(!Fe("6.2"))throw console.error("[Telegram.WebApp] Method showPopup is not supported in version "+h),Error("WebAppMethodUnsupported");if(Pn)throw console.error("[Telegram.WebApp] Popup is already opened"),Error("WebAppPopupOpened");var L="",G="",Y=[],he={};if(typeof M.title<"u"){if(L=Ce(M.title),L.length>64)throw console.error("[Telegram.WebApp] Popup title is too long",L),Error("WebAppPopupParamInvalid");L.length>0&&(he.title=L)}if(typeof M.message<"u"&&(G=Ce(M.message)),!G.length)throw console.error("[Telegram.WebApp] Popup message is required",M.message),Error("WebAppPopupParamInvalid");if(G.length>256)throw console.error("[Telegram.WebApp] Popup message is too long",G),Error("WebAppPopupParamInvalid");if(he.message=G,typeof M.buttons<"u"){if(!Array.isArray(M.buttons))throw console.error("[Telegram.WebApp] Popup buttons should be an array",M.buttons),Error("WebAppPopupParamInvalid");for(var Te=0;Te<M.buttons.length;Te++){var be=M.buttons[Te],et={},_e="";if(typeof be.id<"u"&&(_e=be.id.toString(),_e.length>64))throw console.error("[Telegram.WebApp] Popup button id is too long",_e),Error("WebAppPopupParamInvalid");et.id=_e;var Qe=be.type;if(typeof Qe>"u"&&(Qe="default"),et.type=Qe,!(Qe=="ok"||Qe=="close"||Qe=="cancel"))if(Qe=="default"||Qe=="destructive"){var ft="";if(typeof be.text<"u"&&(ft=Ce(be.text)),!ft.length)throw console.error("[Telegram.WebApp] Popup button text is required for type "+Qe,be.text),Error("WebAppPopupParamInvalid");if(ft.length>64)throw console.error("[Telegram.WebApp] Popup button text is too long",ft),Error("WebAppPopupParamInvalid");et.text=ft}else throw console.error("[Telegram.WebApp] Popup button type is invalid",Qe),Error("WebAppPopupParamInvalid");Y.push(et)}}else Y.push({id:"",type:"close"});if(Y.length<1)throw console.error("[Telegram.WebApp] Popup should have at least one button"),Error("WebAppPopupParamInvalid");if(Y.length>3)throw console.error("[Telegram.WebApp] Popup should not have more than 3 buttons"),Error("WebAppPopupParamInvalid");he.buttons=Y,Pn={callback:O},e.postEvent("web_app_open_popup",!1,he)},o.showAlert=function(M,O){o.showPopup({message:M},O?function(){O()}:null)},o.showConfirm=function(M,O){o.showPopup({message:M,buttons:[{type:"ok",id:"ok"},{type:"cancel"}]},O?function(L){O(L=="ok")}:null)},o.showScanQrPopup=function(M,O){if(!Fe("6.4"))throw console.error("[Telegram.WebApp] Method showScanQrPopup is not supported in version "+h),Error("WebAppMethodUnsupported");if(si)throw console.error("[Telegram.WebApp] Popup is already opened"),Error("WebAppScanQrPopupOpened");var L="",G={};if(typeof M.text<"u"){if(L=Ce(M.text),L.length>64)throw console.error("[Telegram.WebApp] Scan QR popup text is too long",L),Error("WebAppScanQrPopupParamInvalid");L.length>0&&(G.text=L)}si={callback:O},e.postEvent("web_app_open_scan_qr_popup",!1,G)},o.closeScanQrPopup=function(){if(!Fe("6.4"))throw console.error("[Telegram.WebApp] Method closeScanQrPopup is not supported in version "+h),Error("WebAppMethodUnsupported");si=!1,e.postEvent("web_app_close_scan_qr_popup",!1)},o.readTextFromClipboard=function(M){if(!Fe("6.4"))throw console.error("[Telegram.WebApp] Method readTextFromClipboard is not supported in version "+h),Error("WebAppMethodUnsupported");var O=wn(16),L={req_id:O};mt[O]={callback:M},e.postEvent("web_app_read_text_from_clipboard",!1,L)},o.requestWriteAccess=function(M){if(!Fe("6.9"))throw console.error("[Telegram.WebApp] Method requestWriteAccess is not supported in version "+h),Error("WebAppMethodUnsupported");if(ai)throw console.error("[Telegram.WebApp] Write access is already requested"),Error("WebAppWriteAccessRequested");ai={callback:M},e.postEvent("web_app_request_write_access")},o.requestContact=function(M){if(!Fe("6.9"))throw console.error("[Telegram.WebApp] Method requestContact is not supported in version "+h),Error("WebAppMethodUnsupported");if(go)throw console.error("[Telegram.WebApp] Contact is already requested"),Error("WebAppContactRequested");go={callback:M},e.postEvent("web_app_request_phone")},o.downloadFile=function(M,O){if(!Fe("8.0"))throw console.error("[Telegram.WebApp] Method downloadFile is not supported in version "+h),Error("WebAppMethodUnsupported");if(Oi)throw console.error("[Telegram.WebApp] Popup is already opened"),Error("WebAppDownloadFilePopupOpened");var L=document.createElement("A"),G={};if(!M||!M.url||!M.url.length)throw console.error("[Telegram.WebApp] Url is required"),Error("WebAppDownloadFileParamInvalid");if(L.href=M.url,L.protocol!="https:")throw console.error("[Telegram.WebApp] Url protocol is not supported",url),Error("WebAppDownloadFileParamInvalid");if(G.url=L.href,!M||!M.file_name||!M.file_name.length)throw console.error("[Telegram.WebApp] File name is required"),Error("WebAppDownloadFileParamInvalid");G.file_name=M.file_name,Oi={callback:O},e.postEvent("web_app_request_file_download",!1,G)},o.shareToStory=function(M,O){if(O=O||{},!Fe("7.8"))throw console.error("[Telegram.WebApp] Method shareToStory is not supported in version "+h),Error("WebAppMethodUnsupported");var L=document.createElement("A");if(L.href=M,L.protocol!="http:"&&L.protocol!="https:")throw console.error("[Telegram.WebApp] Media url protocol is not supported",url),Error("WebAppMediaUrlInvalid");var G={};if(G.media_url=L.href,typeof O.text<"u"){var Y=Ce(O.text);if(Y.length>2048)throw console.error("[Telegram.WebApp] Text is too long",Y),Error("WebAppShareToStoryParamInvalid");Y.length>0&&(G.text=Y)}if(typeof O.widget_link<"u"){if(O.widget_link=O.widget_link||{},L.href=O.widget_link.url,L.protocol!="http:"&&L.protocol!="https:")throw console.error("[Telegram.WebApp] Link protocol is not supported",url),Error("WebAppShareToStoryParamInvalid");var he={url:L.href};if(typeof O.widget_link.name<"u"){var Te=Ce(O.widget_link.name);if(Te.length>48)throw console.error("[Telegram.WebApp] Link name is too long",Te),Error("WebAppShareToStoryParamInvalid");Te.length>0&&(he.name=Te)}G.widget_link=he}e.postEvent("web_app_share_to_story",!1,G)},o.shareMessage=function(M,O){if(!Fe("8.0"))throw console.error("[Telegram.WebApp] Method shareMessage is not supported in version "+h),Error("WebAppMethodUnsupported");if(Bn)throw console.error("[Telegram.WebApp] Share message is already opened"),Error("WebAppShareMessageOpened");Bn={callback:O},e.postEvent("web_app_send_prepared_message",!1,{id:M})},o.setEmojiStatus=function(M,O,L){if(O=O||{},!Fe("8.0"))throw console.error("[Telegram.WebApp] Method setEmojiStatus is not supported in version "+h),Error("WebAppMethodUnsupported");var G={};if(G.custom_emoji_id=M,typeof O.duration<"u"&&(G.duration=O.duration),ri)throw console.error("[Telegram.WebApp] Emoji status is already requested"),Error("WebAppEmojiStatusRequested");ri={callback:L},e.postEvent("web_app_set_emoji_status",!1,G)},o.requestEmojiStatusAccess=function(M){if(!Fe("8.0"))throw console.error("[Telegram.WebApp] Method requestEmojiStatusAccess is not supported in version "+h),Error("WebAppMethodUnsupported");if(mn)throw console.error("[Telegram.WebApp] Emoji status permission is already requested"),Error("WebAppEmojiStatusAccessRequested");mn={callback:M},e.postEvent("web_app_request_emoji_status_access")},o.invokeCustomMethod=function(M,O,L){ql(M,O,L)},o.ready=function(){e.postEvent("web_app_ready")},o.expand=function(){e.postEvent("web_app_expand")},o.close=function(M){M=M||{};var O={};Fe("7.6")&&M.return_back&&(O.return_back=!0),e.postEvent("web_app_close",!1,O)},window.Telegram.WebApp=o,ao(),lo(),Ai(),wr(),n.tgWebAppShowSettings&&uo.show(),window.addEventListener("resize",ke),r&&document.addEventListener("click",ce),e.onEvent("theme_changed",Z),e.onEvent("viewport_changed",je),e.onEvent("safe_area_changed",me),e.onEvent("content_safe_area_changed",H),e.onEvent("visibility_changed",ne),e.onEvent("invoice_closed",Mi),e.onEvent("popup_closed",Bu),e.onEvent("qr_text_received",Pu),e.onEvent("scan_qr_popup_closed",sp),e.onEvent("clipboard_text_received",Aa),e.onEvent("write_access_requested",Wr),e.onEvent("phone_requested",ap),e.onEvent("file_download_requested",Uu),e.onEvent("custom_method_invoked",_a),e.onEvent("fullscreen_changed",In),e.onEvent("fullscreen_failed",Vr),e.onEvent("home_screen_added",ys),e.onEvent("home_screen_checked",Ea),e.onEvent("prepared_message_sent",Ci),e.onEvent("prepared_message_failed",bs),e.onEvent("emoji_status_set",rp),e.onEvent("emoji_status_failed",xs),e.onEvent("emoji_status_access_requested",ii),e.postEvent("web_app_request_theme"),e.postEvent("web_app_request_viewport"),e.postEvent("web_app_request_safe_area"),e.postEvent("web_app_request_content_safe_area")})()),tS}var rS;function XM(){if(rS)return jc;rS=1,Object.defineProperty(jc,"__esModule",{value:!0}),jc.WebApp=void 0,YM();var t=window;return jc.WebApp=t.Telegram.WebApp,jc}var iS;function JM(){if(iS)return $d;iS=1,Object.defineProperty($d,"__esModule",{value:!0});var t=XM();return $d.default=t.WebApp,$d}var QM=JM();const kt=PM(QM);function ZM(t){let e=t,n=!1;const r=new Set;return{getState(){return e},updateState(o){e=typeof o=="function"?o(e):o},setState(o){this.updateState(o),r.forEach(s=>s(e))},initialize(o){n||(e=o,n=!0)},subscribe(o){return r.add(o),()=>r.delete(o)}}}function eO(t){return D.useSyncExternalStore(t.subscribe,()=>t.getState(),()=>t.getState())}function tO(t,e,n){const r=[],o=[],s={};for(const l of t){const u=l.position||e;s[u]=s[u]||0,s[u]+=1,s[u]<=n?o.push(l):r.push(l)}return{notifications:o,queue:r}}const nO=()=>ZM({notifications:[],queue:[],defaultPosition:"bottom-right",limit:5}),ma=nO(),rO=(t=ma)=>eO(t);function Nl(t,e){const n=t.getState(),r=e([...n.notifications,...n.queue]),o=tO(r,n.defaultPosition,n.limit);t.setState({notifications:o.notifications,queue:o.queue,limit:n.limit,defaultPosition:n.defaultPosition})}function iO(t,e=ma){const n=t.id||uM();return Nl(e,r=>t.id&&r.some(o=>o.id===t.id)?r:[...r,{...t,id:n}]),n}function mT(t,e=ma){return Nl(e,n=>n.filter(r=>r.id===t?(r.onClose?.(r),!1):!0)),t}function oO(t,e=ma){return Nl(e,n=>n.map(r=>r.id===t.id?{...r,...t}:r)),t.id}function sO(t=ma){Nl(t,()=>[])}function aO(t=ma){Nl(t,e=>e.slice(0,t.getState().limit))}const Zt={show:iO,hide:mT,update:oO,clean:sO,cleanQueue:aO,updateState:Nl};function dv(t,e){return dv=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},dv(t,e)}function gT(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,dv(t,e)}var cg={exports:{}},ug,oS;function lO(){if(oS)return ug;oS=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return ug=t,ug}var dg,sS;function cO(){if(sS)return dg;sS=1;var t=lO();function e(){}function n(){}return n.resetWarningCache=e,dg=function(){function r(l,u,d,h,p,g){if(g!==t){var y=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw y.name="Invariant Violation",y}}r.isRequired=r;function o(){return r}var s={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:o,element:r,elementType:r,instanceOf:o,node:r,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:n,resetWarningCache:e};return s.PropTypes=s,s},dg}var aS;function uO(){return aS||(aS=1,cg.exports=cO()()),cg.exports}const lS={disabled:!1},Nf=qn.createContext(null);var dO=function(e){return e.scrollTop},Vc="unmounted",Fs="exited",Ws="entering",ul="entered",fv="exiting",io=(function(t){gT(e,t);function e(r,o){var s;s=t.call(this,r,o)||this;var l=o,u=l&&!l.isMounting?r.enter:r.appear,d;return s.appearStatus=null,r.in?u?(d=Fs,s.appearStatus=Ws):d=ul:r.unmountOnExit||r.mountOnEnter?d=Vc:d=Fs,s.state={status:d},s.nextCallback=null,s}e.getDerivedStateFromProps=function(o,s){var l=o.in;return l&&s.status===Vc?{status:Fs}:null};var n=e.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(o){var s=null;if(o!==this.props){var l=this.state.status;this.props.in?l!==Ws&&l!==ul&&(s=Ws):(l===Ws||l===ul)&&(s=fv)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var o=this.props.timeout,s,l,u;return s=l=u=o,o!=null&&typeof o!="number"&&(s=o.exit,l=o.enter,u=o.appear!==void 0?o.appear:l),{exit:s,enter:l,appear:u}},n.updateStatus=function(o,s){if(o===void 0&&(o=!1),s!==null)if(this.cancelNextCallback(),s===Ws){if(this.props.unmountOnExit||this.props.mountOnEnter){var l=this.props.nodeRef?this.props.nodeRef.current:qc.findDOMNode(this);l&&dO(l)}this.performEnter(o)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Fs&&this.setState({status:Vc})},n.performEnter=function(o){var s=this,l=this.props.enter,u=this.context?this.context.isMounting:o,d=this.props.nodeRef?[u]:[qc.findDOMNode(this),u],h=d[0],p=d[1],g=this.getTimeouts(),y=u?g.appear:g.enter;if(!o&&!l||lS.disabled){this.safeSetState({status:ul},function(){s.props.onEntered(h)});return}this.props.onEnter(h,p),this.safeSetState({status:Ws},function(){s.props.onEntering(h,p),s.onTransitionEnd(y,function(){s.safeSetState({status:ul},function(){s.props.onEntered(h,p)})})})},n.performExit=function(){var o=this,s=this.props.exit,l=this.getTimeouts(),u=this.props.nodeRef?void 0:qc.findDOMNode(this);if(!s||lS.disabled){this.safeSetState({status:Fs},function(){o.props.onExited(u)});return}this.props.onExit(u),this.safeSetState({status:fv},function(){o.props.onExiting(u),o.onTransitionEnd(l.exit,function(){o.safeSetState({status:Fs},function(){o.props.onExited(u)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(o,s){s=this.setNextCallback(s),this.setState(o,s)},n.setNextCallback=function(o){var s=this,l=!0;return this.nextCallback=function(u){l&&(l=!1,s.nextCallback=null,o(u))},this.nextCallback.cancel=function(){l=!1},this.nextCallback},n.onTransitionEnd=function(o,s){this.setNextCallback(s);var l=this.props.nodeRef?this.props.nodeRef.current:qc.findDOMNode(this),u=o==null&&!this.props.addEndListener;if(!l||u){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var d=this.props.nodeRef?[this.nextCallback]:[l,this.nextCallback],h=d[0],p=d[1];this.props.addEndListener(h,p)}o!=null&&setTimeout(this.nextCallback,o)},n.render=function(){var o=this.state.status;if(o===Vc)return null;var s=this.props,l=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var u=aT(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return qn.createElement(Nf.Provider,{value:null},typeof l=="function"?l(o,u):qn.cloneElement(qn.Children.only(l),u))},e})(qn.Component);io.contextType=Nf;io.propTypes={};function ol(){}io.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:ol,onEntering:ol,onEntered:ol,onExit:ol,onExiting:ol,onExited:ol};io.UNMOUNTED=Vc;io.EXITED=Fs;io.ENTERING=Ws;io.ENTERED=ul;io.EXITING=fv;function fO(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l0(t,e){var n=function(s){return e&&D.isValidElement(s)?e(s):s},r=Object.create(null);return t&&D.Children.map(t,function(o){return o}).forEach(function(o){r[o.key]=n(o)}),r}function hO(t,e){t=t||{},e=e||{};function n(p){return p in e?e[p]:t[p]}var r=Object.create(null),o=[];for(var s in t)s in e?o.length&&(r[s]=o,o=[]):o.push(s);var l,u={};for(var d in e){if(r[d])for(l=0;l<r[d].length;l++){var h=r[d][l];u[r[d][l]]=n(h)}u[d]=n(d)}for(l=0;l<o.length;l++)u[o[l]]=n(o[l]);return u}function Ks(t,e,n){return n[e]!=null?n[e]:t.props[e]}function pO(t,e){return l0(t.children,function(n){return D.cloneElement(n,{onExited:e.bind(null,n),in:!0,appear:Ks(n,"appear",t),enter:Ks(n,"enter",t),exit:Ks(n,"exit",t)})})}function mO(t,e,n){var r=l0(t.children),o=hO(e,r);return Object.keys(o).forEach(function(s){var l=o[s];if(D.isValidElement(l)){var u=s in e,d=s in r,h=e[s],p=D.isValidElement(h)&&!h.props.in;d&&(!u||p)?o[s]=D.cloneElement(l,{onExited:n.bind(null,l),in:!0,exit:Ks(l,"exit",t),enter:Ks(l,"enter",t)}):!d&&u&&!p?o[s]=D.cloneElement(l,{in:!1}):d&&u&&D.isValidElement(h)&&(o[s]=D.cloneElement(l,{onExited:n.bind(null,l),in:h.props.in,exit:Ks(l,"exit",t),enter:Ks(l,"enter",t)}))}}),o}var gO=Object.values||function(t){return Object.keys(t).map(function(e){return t[e]})},vO={component:"div",childFactory:function(e){return e}},Wo=(function(t){gT(e,t);function e(r,o){var s;s=t.call(this,r,o)||this;var l=s.handleExited.bind(fO(s));return s.state={contextValue:{isMounting:!0},handleExited:l,firstRender:!0},s}var n=e.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},e.getDerivedStateFromProps=function(o,s){var l=s.children,u=s.handleExited,d=s.firstRender;return{children:d?pO(o,u):mO(o,l,u),firstRender:!1}},n.handleExited=function(o,s){var l=l0(this.props.children);o.key in l||(o.props.onExited&&o.props.onExited(s),this.mounted&&this.setState(function(u){var d=dM({},u.children);return delete d[o.key],{children:d}}))},n.render=function(){var o=this.props,s=o.component,l=o.childFactory,u=aT(o,["component","childFactory"]),d=this.state.contextValue,h=gO(this.state.children).map(l);return delete u.appear,delete u.enter,delete u.exit,s===null?qn.createElement(Nf.Provider,{value:d},h):qn.createElement(Nf.Provider,{value:d},qn.createElement(s,u,h))},e})(qn.Component);Wo.propTypes={};Wo.defaultProps=vO;const vT=["bottom-center","bottom-left","bottom-right","top-center","top-left","top-right"];function yO(t,e){return t.reduce((n,r)=>(n[r.position||e].push(r),n),vT.reduce((n,r)=>(n[r]=[],n),{}))}const cS={left:"translateX(-100%)",right:"translateX(100%)","top-center":"translateY(-100%)","bottom-center":"translateY(100%)"},bO={left:"translateX(0)",right:"translateX(0)","top-center":"translateY(0)","bottom-center":"translateY(0)"};function xO({state:t,maxHeight:e,position:n,transitionDuration:r}){const[o,s]=n.split("-"),l=s==="center"?`${o}-center`:s,u={opacity:0,maxHeight:e,transform:cS[l],transitionDuration:`${r}ms, ${r}ms, ${r}ms`,transitionTimingFunction:"cubic-bezier(.51,.3,0,1.21), cubic-bezier(.51,.3,0,1.21), linear",transitionProperty:"opacity, transform, max-height"},d={opacity:1,transform:bO[l]},h={opacity:0,maxHeight:0,transform:cS[l]};return{...u,...{entering:d,entered:d,exiting:h,exited:h}[t]}}function SO(t,e){return typeof e=="number"?e:e===!1||t===!1?!1:t}const yT=D.forwardRef(({data:t,onHide:e,autoClose:n,...r},o)=>{const{autoClose:s,message:l,...u}=t,d=SO(n,t.autoClose),h=D.useRef(-1),p=()=>window.clearTimeout(h.current),g=()=>{e(t.id),p()},y=()=>{typeof d=="number"&&(h.current=window.setTimeout(g,d))};return D.useEffect(()=>{t.onOpen?.(t)},[]),D.useEffect(()=>(y(),p),[d]),m.jsx(fM,{...r,...u,onClose:g,ref:o,onMouseEnter:p,onMouseLeave:y,children:l})});yT.displayName="@mantine/notifications/NotificationContainer";var bT={root:"m_b37d9ac7",notification:"m_5ed0edd0"};const EO=io,kO={position:"bottom-right",autoClose:4e3,transitionDuration:250,containerWidth:440,notificationMaxHeight:200,limit:5,zIndex:hM("overlay"),store:ma,withinPortal:!0},TO=bM((t,{zIndex:e,containerWidth:n})=>({root:{"--notifications-z-index":e?.toString(),"--notifications-container-width":Gt(n)}})),oo=fa((t,e)=>{const n=ki("Notifications",kO,t),{classNames:r,className:o,style:s,styles:l,unstyled:u,vars:d,position:h,autoClose:p,transitionDuration:g,containerWidth:y,notificationMaxHeight:x,limit:S,zIndex:E,store:k,portalProps:w,withinPortal:C,..._}=n,R=pM(),j=rO(k),z=mM(),B=gM(),K=D.useRef({}),W=D.useRef(0),Z=(R.respectReducedMotion?B:!1)?1:g,te=lT({name:"Notifications",classes:bT,props:n,className:o,style:s,classNames:r,styles:l,unstyled:u,vars:d,varsResolver:TO});D.useEffect(()=>{k?.updateState(me=>({...me,limit:S||5,defaultPosition:h}))},[S,h]),vM(()=>{j.notifications.length>W.current&&setTimeout(()=>z(),0),W.current=j.notifications.length},[j.notifications]);const je=yO(j.notifications,h),ke=vT.reduce((me,H)=>(me[H]=je[H].map(({style:ne,...ce})=>m.jsx(EO,{timeout:Z,onEnter:()=>K.current[ce.id].offsetHeight,nodeRef:{current:K.current[ce.id]},children:Ce=>m.jsx(yT,{ref:ae=>{ae&&(K.current[ce.id]=ae)},data:ce,onHide:ae=>mT(ae,k),autoClose:p,...te("notification",{style:{...xO({state:Ce,position:H,transitionDuration:Z,maxHeight:x}),...ne}})})},ce.id)),me),{});return m.jsxs(yM,{withinPortal:C,...w,children:[m.jsx(pe,{...te("root"),"data-position":"top-center",ref:e,..._,children:m.jsx(Wo,{children:ke["top-center"]})}),m.jsx(pe,{...te("root"),"data-position":"top-left",..._,children:m.jsx(Wo,{children:ke["top-left"]})}),m.jsx(pe,{...te("root",{className:Xx.classNames.fullWidth}),"data-position":"top-right",..._,children:m.jsx(Wo,{children:ke["top-right"]})}),m.jsx(pe,{...te("root",{className:Xx.classNames.fullWidth}),"data-position":"bottom-right",..._,children:m.jsx(Wo,{children:ke["bottom-right"]})}),m.jsx(pe,{...te("root"),"data-position":"bottom-left",..._,children:m.jsx(Wo,{children:ke["bottom-left"]})}),m.jsx(pe,{...te("root"),"data-position":"bottom-center",..._,children:m.jsx(Wo,{children:ke["bottom-center"]})})]})});oo.classes=bT;oo.displayName="@mantine/notifications/Notifications";oo.show=Zt.show;oo.hide=Zt.hide;oo.update=Zt.update;oo.clean=Zt.clean;oo.cleanQueue=Zt.cleanQueue;oo.updateState=Zt.updateState;var hv=new Map,Kd=new WeakMap,uS=0,wO;function CO(t){return t?(Kd.has(t)||(uS+=1,Kd.set(t,uS.toString())),Kd.get(t)):"0"}function AO(t){return Object.keys(t).sort().filter(e=>t[e]!==void 0).map(e=>`${e}_${e==="root"?CO(t.root):t[e]}`).toString()}function _O(t){const e=AO(t);let n=hv.get(e);if(!n){const r=new Map;let o;const s=new IntersectionObserver(l=>{l.forEach(u=>{var d;const h=u.isIntersecting&&o.some(p=>u.intersectionRatio>=p);t.trackVisibility&&typeof u.isVisible>"u"&&(u.isVisible=h),(d=r.get(u.target))==null||d.forEach(p=>{p(h,u)})})},t);o=s.thresholds||(Array.isArray(t.threshold)?t.threshold:[t.threshold||0]),n={id:e,observer:s,elements:r},hv.set(e,n)}return n}function MO(t,e,n={},r=wO){if(typeof window.IntersectionObserver>"u"&&r!==void 0){const d=t.getBoundingClientRect();return e(r,{isIntersecting:r,target:t,intersectionRatio:typeof n.threshold=="number"?n.threshold:0,time:0,boundingClientRect:d,intersectionRect:d,rootBounds:d}),()=>{}}const{id:o,observer:s,elements:l}=_O(n),u=l.get(t)||[];return l.has(t)||l.set(t,u),u.push(e),s.observe(t),function(){u.splice(u.indexOf(e),1),u.length===0&&(l.delete(t),s.unobserve(t)),l.size===0&&(s.disconnect(),hv.delete(o))}}function OO({threshold:t,delay:e,trackVisibility:n,rootMargin:r,root:o,triggerOnce:s,skip:l,initialInView:u,fallbackInView:d,onChange:h}={}){var p;const[g,y]=D.useState(null),x=D.useRef(h),S=D.useRef(u),[E,k]=D.useState({inView:!!u,entry:void 0});x.current=h,D.useEffect(()=>{if(S.current===void 0&&(S.current=u),l||!g)return;let R;return R=MO(g,(j,z)=>{const B=S.current;S.current=j,!(B===void 0&&!j)&&(k({inView:j,entry:z}),x.current&&x.current(j,z),z.isIntersecting&&s&&R&&(R(),R=void 0))},{root:o,rootMargin:r,threshold:t,trackVisibility:n,delay:e},d),()=>{R&&R()}},[Array.isArray(t)?t.toString():t,g,o,r,s,l,n,d,e]);const w=(p=E.entry)==null?void 0:p.target,C=D.useRef(void 0);!g&&w&&!s&&!l&&C.current!==w&&(C.current=w,k({inView:!!u,entry:void 0}),S.current=u);const _=[y,E.inView,E.entry];return _.ref=_[0],_.inView=_[1],_.entry=_[2],_}const xT="https://apiroleplay.capyhub.su",ST=()=>kt.initData||"";async function zt(t,e={}){const n={"Content-Type":"application/json","X-Telegram-Init-Data":ST()},r={...e,headers:{...n,...e.headers}},o=await fetch(`${xT}${t}`,r);if(!o.ok)throw new Error(`API Error: ${o.status} ${o.statusText}`);return o.json()}async function jO(t,e){const n=await fetch(`${xT}${t}`,{method:"POST",headers:{"X-Telegram-Init-Data":ST()},body:e});if(!n.ok){const r=await n.json().catch(()=>({}));throw new Error(r.message||` : ${n.status}`)}return n.json()}var RO={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};const rt=(t,e,n,r)=>{const o=D.forwardRef(({color:s="currentColor",size:l=24,stroke:u=2,title:d,className:h,children:p,...g},y)=>D.createElement("svg",{ref:y,...RO[t],width:l,height:l,className:["tabler-icon",`tabler-icon-${e}`,h].join(" "),...t==="filled"?{fill:s}:{strokeWidth:u,stroke:s},...g},[d&&D.createElement("title",{key:"svg-title"},d),...r.map(([x,S])=>D.createElement(x,S)),...Array.isArray(p)?p:[p]]));return o.displayName=`${n}`,o};const NO=[["path",{d:"M14 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M4 6l8 0",key:"svg-1"}],["path",{d:"M16 6l4 0",key:"svg-2"}],["path",{d:"M8 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-3"}],["path",{d:"M4 12l2 0",key:"svg-4"}],["path",{d:"M10 12l10 0",key:"svg-5"}],["path",{d:"M17 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-6"}],["path",{d:"M4 18l11 0",key:"svg-7"}],["path",{d:"M19 18l1 0",key:"svg-8"}]],DO=rt("outline","adjustments-horizontal","AdjustmentsHorizontal",NO);const LO=[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]],pv=rt("outline","alert-circle","AlertCircle",LO);const zO=[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]],ET=rt("outline","alert-triangle","AlertTriangle",zO);const IO=[["path",{d:"M12 5l0 14",key:"svg-0"}],["path",{d:"M18 11l-6 -6",key:"svg-1"}],["path",{d:"M6 11l6 -6",key:"svg-2"}]],BO=rt("outline","arrow-up","ArrowUp",IO);const PO=[["path",{d:"M3 9l4 -4l4 4m-4 -4v14",key:"svg-0"}],["path",{d:"M21 15l-4 4l-4 -4m4 4v-14",key:"svg-1"}]],UO=rt("outline","arrows-sort","ArrowsSort",PO);const HO=[["path",{d:"M7 5h6a3.5 3.5 0 0 1 0 7h-6z",key:"svg-0"}],["path",{d:"M13 12h1a3.5 3.5 0 0 1 0 7h-7v-7",key:"svg-1"}]],qO=rt("outline","bold","Bold",HO);const VO=[["path",{d:"M13 3l0 7l6 0l-8 11l0 -7l-6 0l8 -11",key:"svg-0"}]],yi=rt("outline","bolt","Bolt",VO);const FO=[["path",{d:"M15 10l-4 4l6 6l4 -16l-18 7l4 2l2 6l3 -4",key:"svg-0"}]],Fc=rt("outline","brand-telegram","BrandTelegram",FO);const WO=[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]],cu=rt("outline","check","Check",WO);const GO=[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]],c0=rt("outline","chevron-down","ChevronDown",GO);const $O=[["path",{d:"M6 15l6 -6l6 6",key:"svg-0"}]],kT=rt("outline","chevron-up","ChevronUp",$O);const KO=[["path",{d:"M12 6l4 6l5 -4l-2 10h-14l-2 -10l5 4z",key:"svg-0"}]],mv=rt("outline","crown","Crown",KO);const YO=[["path",{d:"M8 19v-14h6a3 3 0 0 1 0 6h-8",key:"svg-0"}],["path",{d:"M14 15h-8",key:"svg-1"}]],TT=rt("outline","currency-rubel","CurrencyRubel",YO);const XO=[["path",{d:"M12 10.941c2.333 -3.308 .167 -7.823 -1 -8.941c0 3.395 -2.235 5.299 -3.667 6.706c-1.43 1.408 -2.333 3.621 -2.333 5.588c0 3.704 3.134 6.706 7 6.706s7 -3.002 7 -6.706c0 -1.712 -1.232 -4.403 -2.333 -5.588c-2.084 3.353 -3.257 3.353 -4.667 2.235",key:"svg-0"}]],JO=rt("outline","flame","Flame",XO);const QO=[["path",{d:"M11 11m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M19 3l-5 5",key:"svg-1"}],["path",{d:"M15 3h4v4",key:"svg-2"}],["path",{d:"M11 16v6",key:"svg-3"}],["path",{d:"M8 19h6",key:"svg-4"}]],ZO=rt("outline","gender-bigender","GenderBigender",QO);const ej=[["path",{d:"M5 12l-2 0l9 -9l9 9l-2 0",key:"svg-0"}],["path",{d:"M5 12v7a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-7",key:"svg-1"}],["path",{d:"M9 21v-6a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v6",key:"svg-2"}]],wT=rt("outline","home","Home",ej);const tj=[["path",{d:"M9.828 9.172a4 4 0 1 0 0 5.656a10 10 0 0 0 2.172 -2.828a10 10 0 0 1 2.172 -2.828a4 4 0 1 1 0 5.656a10 10 0 0 1 -2.172 -2.828a10 10 0 0 0 -2.172 -2.828",key:"svg-0"}]],nj=rt("outline","infinity","Infinity",tj);const rj=[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]],ij=rt("outline","info-circle","InfoCircle",rj);const oj=[["path",{d:"M11 5l6 0",key:"svg-0"}],["path",{d:"M7 19l6 0",key:"svg-1"}],["path",{d:"M14 5l-4 14",key:"svg-2"}]],sj=rt("outline","italic","Italic",oj);const aj=[["path",{d:"M3 20l1.3 -3.9c-2.324 -3.437 -1.426 -7.872 2.1 -10.374c3.526 -2.501 8.59 -2.296 11.845 .48c3.255 2.777 3.695 7.266 1.029 10.501c-2.666 3.235 -7.615 4.215 -11.574 2.293l-4.7 1",key:"svg-0"}]],Df=rt("outline","message-circle","MessageCircle",aj);const lj=[["path",{d:"M8 9h8",key:"svg-0"}],["path",{d:"M8 13h6",key:"svg-1"}],["path",{d:"M18 4a3 3 0 0 1 3 3v8a3 3 0 0 1 -3 3h-5l-5 3v-3h-2a3 3 0 0 1 -3 -3v-8a3 3 0 0 1 3 -3h12z",key:"svg-2"}]],CT=rt("outline","message","Message",lj);const cj=[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M9 10l.01 0",key:"svg-1"}],["path",{d:"M15 10l.01 0",key:"svg-2"}],["path",{d:"M9 15l6 0",key:"svg-3"}]],uj=rt("outline","mood-empty","MoodEmpty",cj);const dj=[["path",{d:"M15 8h.01",key:"svg-0"}],["path",{d:"M3 6a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v12a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3v-12z",key:"svg-1"}],["path",{d:"M3 16l5 -5c.928 -.893 2.072 -.893 3 0l5 5",key:"svg-2"}],["path",{d:"M14 14l1 -1c.928 -.893 2.072 -.893 3 0l3 3",key:"svg-3"}]],AT=rt("outline","photo","Photo",dj);const fj=[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]],hj=rt("outline","search","Search",fj);const pj=[["path",{d:"M6 12m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0",key:"svg-0"}],["path",{d:"M18 6m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0",key:"svg-1"}],["path",{d:"M18 18m-3 0a3 3 0 1 0 6 0a3 3 0 1 0 -6 0",key:"svg-2"}],["path",{d:"M8.7 10.7l6.6 -3.4",key:"svg-3"}],["path",{d:"M8.7 13.3l6.6 3.4",key:"svg-4"}]],mj=rt("outline","share","Share",pj);const gj=[["path",{d:"M16 18a2 2 0 0 1 2 2a2 2 0 0 1 2 -2a2 2 0 0 1 -2 -2a2 2 0 0 1 -2 2zm0 -12a2 2 0 0 1 2 2a2 2 0 0 1 2 -2a2 2 0 0 1 -2 -2a2 2 0 0 1 -2 2zm-7 12a6 6 0 0 1 6 -6a6 6 0 0 1 -6 -6a6 6 0 0 1 -6 6a6 6 0 0 1 6 6z",key:"svg-0"}]],vj=rt("outline","sparkles","Sparkles",gj);const yj=[["path",{d:"M12 17.75l-6.172 3.245l1.179 -6.873l-5 -4.867l6.9 -1l3.086 -6.253l3.086 6.253l6.9 1l-5 4.867l1.179 6.873z",key:"svg-0"}]],gv=rt("outline","star","Star",yj);const bj=[["path",{d:"M3 8v4.172a2 2 0 0 0 .586 1.414l5.71 5.71a2.41 2.41 0 0 0 3.408 0l3.592 -3.592a2.41 2.41 0 0 0 0 -3.408l-5.71 -5.71a2 2 0 0 0 -1.414 -.586h-4.172a2 2 0 0 0 -2 2z",key:"svg-0"}],["path",{d:"M18 19l1.592 -1.592a4.82 4.82 0 0 0 0 -6.816l-4.592 -4.592",key:"svg-1"}],["path",{d:"M7 10h-.01",key:"svg-2"}]],xj=rt("outline","tags","Tags",bj);const Sj=[["path",{d:"M7 13v-8a1 1 0 0 0 -1 -1h-2a1 1 0 0 0 -1 1v7a1 1 0 0 0 1 1h3a4 4 0 0 1 4 4v1a2 2 0 0 0 4 0v-5h3a2 2 0 0 0 2 -2l-1 -5a2 3 0 0 0 -2 -2h-7a3 3 0 0 0 -3 3",key:"svg-0"}]],dS=rt("outline","thumb-down","ThumbDown",Sj);const Ej=[["path",{d:"M7 11v8a1 1 0 0 1 -1 1h-2a1 1 0 0 1 -1 -1v-7a1 1 0 0 1 1 -1h3a4 4 0 0 0 4 -4v-1a2 2 0 0 1 4 0v5h3a2 2 0 0 1 2 2l-1 5a2 3 0 0 1 -2 2h-7a3 3 0 0 1 -3 -3",key:"svg-0"}]],fS=rt("outline","thumb-up","ThumbUp",Ej);const kj=[["path",{d:"M4 7l16 0",key:"svg-0"}],["path",{d:"M10 11l0 6",key:"svg-1"}],["path",{d:"M14 11l0 6",key:"svg-2"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-3"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-4"}]],Tj=rt("outline","trash","Trash",kj);const wj=[["path",{d:"M9 7m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2",key:"svg-1"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"svg-2"}],["path",{d:"M21 21v-2a4 4 0 0 0 -3 -3.85",key:"svg-3"}]],Cj=rt("outline","users","Users",wj);const Aj=[["path",{d:"M6 21l15 -15l-3 -3l-15 15l3 3",key:"svg-0"}],["path",{d:"M15 6l3 3",key:"svg-1"}],["path",{d:"M9 3a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2",key:"svg-2"}],["path",{d:"M19 13a2 2 0 0 0 2 2a2 2 0 0 0 -2 2a2 2 0 0 0 -2 -2a2 2 0 0 0 2 -2",key:"svg-3"}]],hS=rt("outline","wand","Wand",Aj);const _j=[["path",{d:"M12 18l.01 0",key:"svg-0"}],["path",{d:"M9.172 15.172a4 4 0 0 1 5.656 0",key:"svg-1"}],["path",{d:"M6.343 12.343a8 8 0 0 1 11.314 0",key:"svg-2"}],["path",{d:"M3.515 9.515c4.686 -4.687 12.284 -4.687 17 0",key:"svg-3"}]],Mj=rt("outline","wifi","Wifi",_j);const Oj=[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]],jj=rt("outline","x","X",Oj);const Rj=[["path",{d:"M8.243 7.34l-6.38 .925l-.113 .023a1 1 0 0 0 -.44 1.684l4.622 4.499l-1.09 6.355l-.013 .11a1 1 0 0 0 1.464 .944l5.706 -3l5.693 3l.1 .046a1 1 0 0 0 1.352 -1.1l-1.091 -6.355l4.624 -4.5l.078 -.085a1 1 0 0 0 -.633 -1.62l-6.38 -.926l-2.852 -5.78a1 1 0 0 0 -1.794 0l-2.853 5.78z",key:"svg-0"}]],Lf=rt("filled","star-filled","StarFilled",Rj);const Nj=[["path",{d:"M13 3a3 3 0 0 1 2.995 2.824l.005 .176v4h2a3 3 0 0 1 2.98 2.65l.015 .174l.005 .176l-.02 .196l-1.006 5.032c-.381 1.626 -1.502 2.796 -2.81 2.78l-.164 -.008h-8a1 1 0 0 1 -.993 -.883l-.007 -.117l.001 -9.536a1 1 0 0 1 .5 -.865a2.998 2.998 0 0 0 1.492 -2.397l.007 -.202v-1a3 3 0 0 1 3 -3z",key:"svg-0"}],["path",{d:"M5 10a1 1 0 0 1 .993 .883l.007 .117v9a1 1 0 0 1 -.883 .993l-.117 .007h-1a2 2 0 0 1 -1.995 -1.85l-.005 -.15v-7a2 2 0 0 1 1.85 -1.995l.15 -.005h1z",key:"svg-1"}]],Dj=rt("filled","thumb-up-filled","ThumbUpFilled",Nj),fg=t=>t?t>=1e3?(t/1e3).toFixed(1)+"k":t.toString():"0",Lj={backgroundColor:"rgba(18, 18, 22, 0.5)",border:"1px solid rgba(39, 39, 42, 0.4)",cursor:"pointer",transition:"transform 0.25s cubic-bezier(0.165, 0.84, 0.44, 1), box-shadow 0.25s ease, background-color 0.25s ease",height:"100%",display:"flex",flexDirection:"column",overflow:"hidden",backdropFilter:"blur(8px)",fontFamily:'"Roboto", sans-serif'},zj={position:"absolute",bottom:0,left:0,right:0,height:"20%",background:"linear-gradient(to top, rgba(9, 9, 11, 0.9), transparent)",pointerEvents:"none"},Ij={position:"absolute",inset:0,zIndex:1,background:"linear-gradient(90deg, #27272a 0%, #3f3f46 50%, #27272a 100%)",backgroundSize:"200% 100%",animation:"shimmer 1.5s infinite"},Bj={root:{textTransform:"none",backgroundColor:"rgba(255, 167, 38, 0.25)",color:"#ffcc80",fontWeight:500,padding:"0 12px",height:"26px",fontSize:"14px",fontFamily:"Roboto, sans-serif"}};if(typeof document<"u"&&!document.getElementById("shimmer-styles")){const t=document.createElement("style");t.id="shimmer-styles",t.textContent="@keyframes shimmer { 0% { background-position: 200% 0; } 100% { background-position: -200% 0; } }",document.head.appendChild(t)}if(typeof document<"u"&&!document.getElementById("roboto-font")){const t=document.createElement("link");t.id="roboto-font",t.rel="stylesheet",t.href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;600;700&display=swap",document.head.appendChild(t)}const Pj=D.memo(function({character:e,onOpen:n}){const[r,o]=D.useState(e.image),[s,l]=D.useState(!0),u=D.useRef(!1),d=D.useRef(!1),[h,p]=D.useState(e.likes??0),[g,y]=D.useState(e.favorites_count??0),[x,S]=D.useState(e.chats_count??0),{ref:E,inView:k}=OO({triggerOnce:!0,threshold:.1,rootMargin:"200px"});D.useEffect(()=>{if(!(!k||u.current)&&e.file_id&&(!r||!r.includes("apiroleplay.capyhub.su"))){u.current=!0;let j=!0;return l(!0),zt(`/v1/characters/photo?file_id=${e.file_id}`).then(z=>{if(j&&z.path){const B=`https://apiroleplay.capyhub.su/${z.path}`;o(B),e.image=B}}).catch(z=>console.error(`Failed to load photo for ${e.name}`,z)),()=>{j=!1}}},[k,e.file_id,e.name,e.image,r]),D.useEffect(()=>{if(!k||d.current)return;d.current=!0;let j=!0;const z=e.id,B=Math.random()*500,K=setTimeout(()=>{zt(`/v1/characters/stats?public_id=${z}`).then(W=>{j&&(y(W.favorites_count),S(W.selected_count))}).catch(()=>{}),zt(`/v1/characters/reactions/count/${z}`).then(W=>{j&&p(W.likes_count)}).catch(()=>{})},B);return()=>{j=!1,clearTimeout(K)}},[k,e.id]),D.useEffect(()=>{p(j=>e.likes??j),y(j=>e.favorites_count??j),S(j=>e.chats_count??j)},[e.likes,e.favorites_count,e.chats_count]);const w=D.useCallback(()=>l(!1),[]),C=D.useCallback(j=>{Object.assign(j.currentTarget.style,{transform:"translateY(-4px)",boxShadow:"0 10px 30px -10px rgba(0, 0, 0, 0.5)",borderColor:"rgba(63, 63, 70, 0.6)",backgroundColor:"rgba(24, 24, 28, 0.7)"})},[]),_=D.useCallback(j=>{Object.assign(j.currentTarget.style,{transform:"translateY(0)",boxShadow:"none",borderColor:"rgba(39, 39, 42, 0.4)",backgroundColor:"rgba(18, 18, 22, 0.5)"})},[]),R=D.useCallback(()=>{n()},[n]);return m.jsxs(Hn,{ref:E,onClick:R,padding:"0",radius:"lg",style:Lj,onMouseEnter:C,onMouseLeave:_,children:[m.jsxs(pe,{style:{position:"relative",backgroundColor:"#18181b"},children:[s&&m.jsx(pe,{style:Ij}),m.jsx(cT,{ratio:1/1,children:m.jsx(to,{src:r,alt:e.name,loading:"lazy",onLoad:w,style:{objectFit:"contain",width:"100%",height:"100%",opacity:s?0:1,transition:"opacity 0.2s ease"}})}),m.jsx(pe,{style:zj})]}),m.jsxs(pe,{p:"sm",style:{display:"flex",flexDirection:"column",flex:1},children:[m.jsx(U,{fw:700,size:"lg",c:"#ffffff",lineClamp:1,mb:4,title:e.name,style:{fontFamily:"Roboto, sans-serif"},children:e.name}),m.jsx(U,{size:"md",c:"#e4e4e7",lineClamp:2,mb:"xs",style:{lineHeight:1.4,flex:1,fontFamily:"Roboto, sans-serif"},children:e.description||" "}),m.jsxs(pe,{mt:"auto",children:[m.jsxs(Re,{gap:"sm",mb:8,style:{color:"#d4d4d8",fontFamily:"Roboto, sans-serif"},children:[m.jsxs(Re,{gap:5,align:"center",title:"",children:[m.jsx(Df,{size:18,stroke:1.5,style:{color:"#42a5f5"}}),m.jsx(U,{size:"md",fw:600,children:fg(x)})]}),m.jsxs(Re,{gap:5,align:"center",title:"",children:[m.jsx(Dj,{size:16,style:{color:"#66bb6a"}}),m.jsx(U,{size:"md",fw:600,children:fg(h)})]}),m.jsxs(Re,{gap:5,align:"center",title:" ",children:[m.jsx(Lf,{size:16,style:{color:"#fdd835"}}),m.jsx(U,{size:"md",fw:600,children:fg(g)})]})]}),m.jsx(Re,{gap:6,style:{flexWrap:"wrap"},children:e.tags?.map((j,z)=>m.jsx(xn,{variant:"filled",radius:"sm",size:"sm",styles:Bj,children:j},z))})]})]})]})});var es;(function(t){t.SET="$set",t.SET_ONCE="$setOnce",t.ADD="$add",t.APPEND="$append",t.PREPEND="$prepend",t.REMOVE="$remove",t.PREINSERT="$preInsert",t.POSTINSERT="$postInsert",t.UNSET="$unset",t.CLEAR_ALL="$clearAll"})(es||(es={}));var ei;(function(t){t.IDENTIFY="$identify",t.GROUP_IDENTIFY="$groupidentify",t.REVENUE="revenue_amount"})(ei||(ei={}));var pS="-",Ih="AMP",Uj="".concat(Ih,"_unsent"),_T="$default_instance",MT="https://api2.amplitude.com/2/httpapi",Hj="https://api.eu.amplitude.com/2/httpapi",qj="https://api2.amplitude.com/batch",Vj="https://api.eu.amplitude.com/batch",Fj="utm_campaign",Wj="utm_content",Gj="utm_id",$j="utm_medium",Kj="utm_source",Yj="utm_term",mS="dclid",gS="fbclid",vS="gbraid",yS="gclid",bS="ko_click_id",xS="li_fat_id",SS="msclkid",ES="rdt_cid",kS="ttclid",TS="twclid",wS="wbraid",Bh={utm_campaign:void 0,utm_content:void 0,utm_id:void 0,utm_medium:void 0,utm_source:void 0,utm_term:void 0,referrer:void 0,referring_domain:void 0,dclid:void 0,gbraid:void 0,gclid:void 0,fbclid:void 0,ko_click_id:void 0,li_fat_id:void 0,msclkid:void 0,rdt_cid:void 0,ttclid:void 0,twclid:void 0,wbraid:void 0},zf=["access-control-allow-origin","access-control-allow-credentials","access-control-expose-headers","access-control-max-age","access-control-allow-methods","access-control-allow-headers","accept-patch","accept-ranges","age","allow","alt-svc","cache-control","connection","content-disposition","content-encoding","content-language","content-length","content-location","content-md5","content-range","content-type","date","delta-base","etag","expires","im","last-modified","link","location","permanent","p3p","pragma","proxy-authenticate","public-key-pins","retry-after","server","status","strict-transport-security","trailer","transfer-encoding","tk","upgrade","vary","via","warning","www-authenticate","x-b3-traceid","x-frame-options"],Xj=["authorization","cookie","set-cookie"],Jj=1e3,vv=function(t){if(Object.keys(t).length>Jj)return!1;for(var e in t){var n=t[e];if(!OT(e,n))return!1}return!0},OT=function(t,e){var n,r;if(typeof t!="string")return!1;if(Array.isArray(e)){var o=!0;try{for(var s=Ze(e),l=s.next();!l.done;l=s.next()){var u=l.value;if(Array.isArray(u))return!1;if(typeof u=="object")o=o&&vv(u);else if(!["number","string"].includes(typeof u))return!1;if(!o)return!1}}catch(d){n={error:d}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}}else{if(e==null)return!1;if(typeof e=="object")return vv(e);if(!["number","string","boolean"].includes(typeof e))return!1}return!0},If=(function(){function t(){this._propertySet=new Set,this._properties={}}return t.prototype.getUserProperties=function(){return de({},this._properties)},t.prototype.set=function(e,n){return this._safeSet(Rt.SET,e,n),this},t.prototype.setOnce=function(e,n){return this._safeSet(Rt.SET_ONCE,e,n),this},t.prototype.append=function(e,n){return this._safeSet(Rt.APPEND,e,n),this},t.prototype.prepend=function(e,n){return this._safeSet(Rt.PREPEND,e,n),this},t.prototype.postInsert=function(e,n){return this._safeSet(Rt.POSTINSERT,e,n),this},t.prototype.preInsert=function(e,n){return this._safeSet(Rt.PREINSERT,e,n),this},t.prototype.remove=function(e,n){return this._safeSet(Rt.REMOVE,e,n),this},t.prototype.add=function(e,n){return this._safeSet(Rt.ADD,e,n),this},t.prototype.unset=function(e){return this._safeSet(Rt.UNSET,e,pS),this},t.prototype.clearAll=function(){return this._properties={},this._properties[Rt.CLEAR_ALL]=pS,this},t.prototype._safeSet=function(e,n,r){if(this._validate(e,n,r)){var o=this._properties[e];return o===void 0&&(o={},this._properties[e]=o),o[n]=r,this._propertySet.add(n),!0}return!1},t.prototype._validate=function(e,n,r){return this._properties[Rt.CLEAR_ALL]!==void 0||this._propertySet.has(n)?!1:e===Rt.ADD?typeof r=="number":e!==Rt.UNSET&&e!==Rt.REMOVE?OT(n,r):!0},t})(),Rt;(function(t){t.SET="$set",t.SET_ONCE="$setOnce",t.ADD="$add",t.APPEND="$append",t.PREPEND="$prepend",t.REMOVE="$remove",t.PREINSERT="$preInsert",t.POSTINSERT="$postInsert",t.UNSET="$unset",t.CLEAR_ALL="$clearAll"})(Rt||(Rt={}));var Qj=[Rt.CLEAR_ALL,Rt.UNSET,Rt.SET,Rt.SET_ONCE,Rt.ADD,Rt.APPEND,Rt.PREPEND,Rt.PREINSERT,Rt.POSTINSERT,Rt.REMOVE],Zj="Event tracked successfully",e3="Unexpected error occurred",t3="Event rejected due to exceeded retry count",n3="Event skipped due to optOut config",r3="Event rejected due to missing API key",i3="Invalid API key",o3="Client not initialized",dn;(function(t){t.Unknown="unknown",t.Skipped="skipped",t.Success="success",t.RateLimit="rate_limit",t.PayloadTooLarge="payload_too_large",t.Invalid="invalid",t.Failed="failed",t.Timeout="Timeout",t.SystemError="SystemError"})(dn||(dn={}));var bl=function(t,e,n){return e===void 0&&(e=0),n===void 0&&(n=dn.Unknown),{event:t,code:e,message:n}},Ot=function(){var t="ampIntegrationContext";if(typeof globalThis<"u"&&typeof globalThis[t]<"u")return globalThis[t];if(typeof globalThis<"u")return globalThis;if(typeof window<"u")return window;if(typeof self<"u")return self;if(typeof global<"u")return global},s3=function(t){return t?(t^Math.random()*16>>t/4).toString(16):(String(1e7)+String(-1e3)+String(-4e3)+String(-8e3)+String(-1e11)).replace(/[018]/g,Ti)},CS=yt([],ze(Array(256).keys()),!1).map(function(t){return t.toString(16).padStart(2,"0")}),Ti=function(t){var e,n=Ot();if(!(!((e=n?.crypto)===null||e===void 0)&&e.getRandomValues))return s3(t);var r=n.crypto.getRandomValues(new Uint8Array(16));return r[6]=r[6]&15|64,r[8]=r[8]&63|128,yt([],ze(r.entries()),!1).map(function(o){var s=ze(o,2),l=s[0],u=s[1];return[4,6,8,10].includes(l)?"-".concat(CS[u]):CS[u]}).join("")},a3=(function(){function t(e){this.client=e,this.queue=[],this.applying=!1,this.plugins=[]}return t.prototype.register=function(e,n){var r,o;return ie(this,void 0,void 0,function(){return re(this,function(s){switch(s.label){case 0:return this.plugins.some(function(l){return l.name===e.name})?(this.loggerProvider.warn("Plugin with name ".concat(e.name," already exists, skipping registration")),[2]):(e.name===void 0&&(e.name=Ti(),this.loggerProvider.warn(`Plugin name is undefined. 
      Generating a random UUID for plugin name: `.concat(e.name,`. 
      Set a name for the plugin to prevent it from being added multiple times.`))),e.type=(r=e.type)!==null&&r!==void 0?r:"enrichment",[4,(o=e.setup)===null||o===void 0?void 0:o.call(e,n,this.client)]);case 1:return s.sent(),this.plugins.push(e),[2]}})})},t.prototype.deregister=function(e,n){var r;return ie(this,void 0,void 0,function(){var o,s;return re(this,function(l){switch(l.label){case 0:return o=this.plugins.findIndex(function(u){return u.name===e}),o===-1?(n.loggerProvider.warn("Plugin with name ".concat(e," does not exist, skipping deregistration")),[2]):(s=this.plugins[o],this.plugins.splice(o,1),[4,(r=s.teardown)===null||r===void 0?void 0:r.call(s)]);case 1:return l.sent(),[2]}})})},t.prototype.reset=function(e){this.applying=!1;var n=this.plugins;n.map(function(r){var o;return(o=r.teardown)===null||o===void 0?void 0:o.call(r)}),this.plugins=[],this.client=e},t.prototype.push=function(e){var n=this;return new Promise(function(r){n.queue.push([e,r]),n.scheduleApply(0)})},t.prototype.scheduleApply=function(e){var n=this;this.applying||(this.applying=!0,setTimeout(function(){n.apply(n.queue.shift()).then(function(){n.applying=!1,n.queue.length>0&&n.scheduleApply(0)})},e))},t.prototype.apply=function(e){return ie(this,void 0,void 0,function(){var n,r,o,s,l,u,d,x,S,h,p,g,y,x,S,E,k,w,C,_,R,j;return re(this,function(z){switch(z.label){case 0:if(!e)return[2];n=ze(e,1),r=n[0],o=ze(e,2),s=o[1],this.loggerProvider.log("Timeline.apply: Initial event",r),l=this.plugins.filter(function(B){return B.type==="before"}),z.label=1;case 1:z.trys.push([1,6,7,8]),u=Ze(l),d=u.next(),z.label=2;case 2:return d.done?[3,5]:(x=d.value,x.execute?[4,x.execute(de({},r))]:[3,4]);case 3:if(S=z.sent(),S===null)return this.loggerProvider.log("Timeline.apply: Event filtered out by before plugin '".concat(String(x.name),"', event: ").concat(JSON.stringify(r))),s({event:r,code:0,message:""}),[2];r=S,this.loggerProvider.log("Timeline.apply: Event after before plugin '".concat(String(x.name),"', event: ").concat(JSON.stringify(r))),z.label=4;case 4:return d=u.next(),[3,2];case 5:return[3,8];case 6:return h=z.sent(),C={error:h},[3,8];case 7:try{d&&!d.done&&(_=u.return)&&_.call(u)}finally{if(C)throw C.error}return[7];case 8:p=this.plugins.filter(function(B){return B.type==="enrichment"||B.type===void 0}),z.label=9;case 9:z.trys.push([9,14,15,16]),g=Ze(p),y=g.next(),z.label=10;case 10:return y.done?[3,13]:(x=y.value,x.execute?[4,x.execute(de({},r))]:[3,12]);case 11:if(S=z.sent(),S===null)return this.loggerProvider.log("Timeline.apply: Event filtered out by enrichment plugin '".concat(String(x.name),"', event: ").concat(JSON.stringify(r))),s({event:r,code:0,message:""}),[2];r=S,this.loggerProvider.log("Timeline.apply: Event after enrichment plugin '".concat(String(x.name),"', event: ").concat(JSON.stringify(r))),z.label=12;case 12:return y=g.next(),[3,10];case 13:return[3,16];case 14:return E=z.sent(),R={error:E},[3,16];case 15:try{y&&!y.done&&(j=g.return)&&j.call(g)}finally{if(R)throw R.error}return[7];case 16:return k=this.plugins.filter(function(B){return B.type==="destination"}),this.loggerProvider.log("Timeline.apply: Final event before destinations, event: ".concat(JSON.stringify(r))),w=k.map(function(B){var K=de({},r);return B.execute(K).catch(function(W){return bl(K,0,String(W))})}),Promise.all(w).then(function(B){var K=ze(B,1),W=K[0],J=W||bl(r,100,"Event not tracked, no destination plugins on the instance");s(J)}),[2]}})})},t.prototype.flush=function(){return ie(this,void 0,void 0,function(){var e,n,r,o=this;return re(this,function(s){switch(s.label){case 0:return e=this.queue,this.queue=[],[4,Promise.all(e.map(function(l){return o.apply(l)}))];case 1:return s.sent(),n=this.plugins.filter(function(l){return l.type==="destination"}),r=n.map(function(l){return l.flush&&l.flush()}),[4,Promise.all(r)];case 2:return s.sent(),[2]}})})},t.prototype.onIdentityChanged=function(e){this.plugins.forEach(function(n){var r;(r=n.onIdentityChanged)===null||r===void 0||r.call(n,e)})},t.prototype.onSessionIdChanged=function(e){this.plugins.forEach(function(n){var r;(r=n.onSessionIdChanged)===null||r===void 0||r.call(n,e)})},t.prototype.onOptOutChanged=function(e){this.plugins.forEach(function(n){var r;(r=n.onOptOutChanged)===null||r===void 0||r.call(n,e)})},t.prototype.onReset=function(){this.plugins.forEach(function(e){var n;(n=e.onReset)===null||n===void 0||n.call(e)})},t})(),l3=function(t,e,n){var r=typeof t=="string"?{event_type:t}:t;return de(de(de({},r),n),e&&{event_properties:e})},u0=function(t,e){var n=de(de({},e),{event_type:ei.IDENTIFY,user_properties:t.getUserProperties()});return n},c3=function(t,e,n,r){var o,s=de(de({},r),{event_type:ei.GROUP_IDENTIFY,group_properties:n.getUserProperties(),groups:(o={},o[t]=e,o)});return s},u3=function(t,e,n){var r,o=new If;o.set(t,e);var s=de(de({},n),{event_type:ei.IDENTIFY,user_properties:o.getUserProperties(),groups:(r={},r[t]=e,r)});return s},d3=function(t,e){return de(de({},e),{event_type:ei.REVENUE,event_properties:t.getEventProperties()})},cr=function(t){return{promise:t||Promise.resolve()}},f3=(function(){function t(e){e===void 0&&(e="$default"),this.initializing=!1,this.isReady=!1,this.q=[],this.dispatchQ=[],this.logEvent=this.track.bind(this),this.timeline=new a3(this),this.name=e}return t.prototype._init=function(e){return ie(this,void 0,void 0,function(){return re(this,function(n){switch(n.label){case 0:return this.config=e,this.timeline.reset(this),this.timeline.loggerProvider=this.config.loggerProvider,[4,this.runQueuedFunctions("q")];case 1:return n.sent(),this.isReady=!0,[2]}})})},t.prototype.runQueuedFunctions=function(e){return ie(this,void 0,void 0,function(){var n,r,o,s,l,u,d,h;return re(this,function(p){switch(p.label){case 0:n=this[e],this[e]=[],p.label=1;case 1:p.trys.push([1,8,9,10]),r=Ze(n),o=r.next(),p.label=2;case 2:return o.done?[3,7]:(s=o.value,l=s(),l&&"promise"in l?[4,l.promise]:[3,4]);case 3:return p.sent(),[3,6];case 4:return[4,l];case 5:p.sent(),p.label=6;case 6:return o=r.next(),[3,2];case 7:return[3,10];case 8:return u=p.sent(),d={error:u},[3,10];case 9:try{o&&!o.done&&(h=r.return)&&h.call(r)}finally{if(d)throw d.error}return[7];case 10:return this[e].length?[4,this.runQueuedFunctions(e)]:[3,12];case 11:p.sent(),p.label=12;case 12:return[2]}})})},t.prototype.track=function(e,n,r){var o=l3(e,n,r);return cr(this.dispatch(o))},t.prototype.identify=function(e,n){var r=u0(e,n);return cr(this.dispatch(r))},t.prototype.groupIdentify=function(e,n,r,o){var s=c3(e,n,r,o);return cr(this.dispatch(s))},t.prototype.setGroup=function(e,n,r){var o=u3(e,n,r);return cr(this.dispatch(o))},t.prototype.revenue=function(e,n){var r=d3(e,n);return cr(this.dispatch(r))},t.prototype.add=function(e){return this.isReady?this._addPlugin(e):(this.q.push(this._addPlugin.bind(this,e)),cr())},t.prototype._addPlugin=function(e){return cr(this.timeline.register(e,this.config))},t.prototype.remove=function(e){return this.isReady?this._removePlugin(e):(this.q.push(this._removePlugin.bind(this,e)),cr())},t.prototype._removePlugin=function(e){return cr(this.timeline.deregister(e,this.config))},t.prototype.dispatchWithCallback=function(e,n){if(!this.isReady)return n(bl(e,0,o3));this.process(e).then(n)},t.prototype.dispatch=function(e){return ie(this,void 0,void 0,function(){var n=this;return re(this,function(r){return this.isReady?[2,this.process(e)]:[2,new Promise(function(o){n.dispatchQ.push(n.dispatchWithCallback.bind(n,e,o))})]})})},t.prototype.getOperationAppliedUserProperties=function(e){var n={};if(e===void 0)return n;var r={};return Object.keys(e).forEach(function(o){Object.values(es).includes(o)||(r[o]=e[o])}),Qj.forEach(function(o){if(Object.keys(e).includes(o)){var s=e[o];switch(o){case es.CLEAR_ALL:Object.keys(n).forEach(function(l){delete n[l]});break;case es.UNSET:Object.keys(s).forEach(function(l){delete n[l]});break;case es.SET:Object.assign(n,s);break}}}),Object.assign(n,r),n},t.prototype.process=function(e){return ie(this,void 0,void 0,function(){var n,s,r,o,s;return re(this,function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),this.config.optOut?[2,bl(e,0,n3)]:(e.event_type===ei.IDENTIFY&&(n=this.getOperationAppliedUserProperties(e.user_properties),this.timeline.onIdentityChanged({userProperties:n})),[4,this.timeline.push(e)]);case 1:return s=l.sent(),s.code===200?this.config.loggerProvider.log(s.message):s.code===100?this.config.loggerProvider.warn(s.message):this.config.loggerProvider.error(s.message),[2,s];case 2:return r=l.sent(),o=String(r),this.config.loggerProvider.error(o),s=bl(e,0,o),[2,s];case 3:return[2]}})})},t.prototype.setOptOut=function(e){if(!this.isReady){this.q.push(this._setOptOut.bind(this,!!e));return}this._setOptOut(e)},t.prototype._setOptOut=function(e){this.config.optOut!==e&&(this.timeline.onOptOutChanged(e),this.config.optOut=!!e)},t.prototype.flush=function(){return cr(this.timeline.flush())},t.prototype.plugin=function(e){var n=this.timeline.plugins.find(function(r){return r.name===e});if(n===void 0){this.config.loggerProvider.debug("Cannot find plugin with name ".concat(e));return}return n},t.prototype.plugins=function(e){return this.timeline.plugins.filter(function(n){return n instanceof e})},t})(),h3=(function(){function t(){this.productId="",this.quantity=1,this.price=0}return t.prototype.setProductId=function(e){return this.productId=e,this},t.prototype.setQuantity=function(e){return e>0&&(this.quantity=e),this},t.prototype.setPrice=function(e){return this.price=e,this},t.prototype.setRevenueType=function(e){return this.revenueType=e,this},t.prototype.setCurrency=function(e){return this.currency=e,this},t.prototype.setRevenue=function(e){return this.revenue=e,this},t.prototype.setReceipt=function(e){return this.receipt=e,this},t.prototype.setReceiptSig=function(e){return this.receiptSig=e,this},t.prototype.setEventProperties=function(e){return vv(e)&&(this.properties=e),this},t.prototype.getEventProperties=function(){var e=this.properties?de({},this.properties):{};return e[pi.REVENUE_PRODUCT_ID]=this.productId,e[pi.REVENUE_QUANTITY]=this.quantity,e[pi.REVENUE_PRICE]=this.price,e[pi.REVENUE_TYPE]=this.revenueType,e[pi.REVENUE_CURRENCY]=this.currency,e[pi.REVENUE]=this.revenue,e[pi.RECEIPT]=this.receipt,e[pi.RECEIPT_SIG]=this.receiptSig,e},t})(),pi;(function(t){t.REVENUE_PRODUCT_ID="$productId",t.REVENUE_QUANTITY="$quantity",t.REVENUE_PRICE="$price",t.REVENUE_TYPE="$revenueType",t.REVENUE_CURRENCY="$currency",t.REVENUE="$revenue",t.RECEIPT="$receipt",t.RECEIPT_SIG="$receiptSig"})(pi||(pi={}));var p3=function(t,e){var n=Math.max(e,1);return t.reduce(function(r,o,s){var l=Math.floor(s/n);return r[l]||(r[l]=[]),r[l].push(o),r},[])},xr;(function(t){t[t.None=0]="None",t[t.Error=1]="Error",t[t.Warn=2]="Warn",t[t.Verbose=3]="Verbose",t[t.Debug=4]="Debug"})(xr||(xr={}));var Yd="Amplitude Logger ",d0=(function(){function t(){this.logLevel=xr.None}return t.prototype.disable=function(){this.logLevel=xr.None},t.prototype.enable=function(e){e===void 0&&(e=xr.Warn),this.logLevel=e},t.prototype.log=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.logLevel<xr.Verbose||console.log("".concat(Yd,"[Log]: ").concat(e.join(" ")))},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.logLevel<xr.Warn||console.warn("".concat(Yd,"[Warn]: ").concat(e.join(" ")))},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.logLevel<xr.Error||console.error("".concat(Yd,"[Error]: ").concat(e.join(" ")))},t.prototype.debug=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this.logLevel<xr.Debug||console.log("".concat(Yd,"[Debug]: ").concat(e.join(" ")))},t})(),xf=function(){return{flushMaxRetries:12,flushQueueSize:200,flushIntervalMillis:1e4,instanceName:_T,logLevel:xr.Warn,loggerProvider:new d0,offline:!1,optOut:!1,serverUrl:MT,serverZone:"US",useBatch:!1}},m3=(function(){function t(e){var n,r,o,s;this._optOut=!1;var l=xf();this.apiKey=e.apiKey,this.flushIntervalMillis=(n=e.flushIntervalMillis)!==null&&n!==void 0?n:l.flushIntervalMillis,this.flushMaxRetries=e.flushMaxRetries||l.flushMaxRetries,this.flushQueueSize=e.flushQueueSize||l.flushQueueSize,this.instanceName=e.instanceName||l.instanceName,this.loggerProvider=e.loggerProvider||l.loggerProvider,this.logLevel=(r=e.logLevel)!==null&&r!==void 0?r:l.logLevel,this.minIdLength=e.minIdLength,this.plan=e.plan,this.ingestionMetadata=e.ingestionMetadata,this.offline=e.offline!==void 0?e.offline:l.offline,this.optOut=(o=e.optOut)!==null&&o!==void 0?o:l.optOut,this.serverUrl=e.serverUrl,this.serverZone=e.serverZone||l.serverZone,this.storageProvider=e.storageProvider,this.transportProvider=e.transportProvider,this.useBatch=(s=e.useBatch)!==null&&s!==void 0?s:l.useBatch,this.loggerProvider.enable(this.logLevel);var u=jT(e.serverUrl,e.serverZone,e.useBatch);this.serverZone=u.serverZone,this.serverUrl=u.serverUrl}return Object.defineProperty(t.prototype,"optOut",{get:function(){return this._optOut},set:function(e){this._optOut=e},enumerable:!1,configurable:!0}),t})(),g3=function(t,e){return t==="EU"?e?Vj:Hj:e?qj:MT},jT=function(t,e,n){if(t===void 0&&(t=""),e===void 0&&(e=xf().serverZone),n===void 0&&(n=xf().useBatch),t)return{serverUrl:t,serverZone:void 0};var r=["US","EU"].includes(e)?e:xf().serverZone;return{serverZone:r,serverUrl:g3(r,n)}},v3=(function(){function t(){this.sdk={metrics:{histogram:{}}}}return t.prototype.recordHistogram=function(e,n){this.sdk.metrics.histogram[e]=n},t})();function yv(t){return t>=200&&t<300}var Sf=function(t){t===void 0&&(t=0);var e=new Error().stack||"";return e.split(`
`).slice(2+t).map(function(n){return n.trim()})},Vt=function(t){return function(){var e=de({},t.config),n=e.loggerProvider,r=e.logLevel;return{logger:n,logLevel:r}}},y3=function(t,e){var n,r;e=e.replace(/\[(\w+)\]/g,".$1"),e=e.replace(/^\./,"");try{for(var o=Ze(e.split(".")),s=o.next();!s.done;s=o.next()){var l=s.value;if(l in t)t=t[l];else return}}catch(u){n={error:u}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return t},Ft=function(t,e){return function(){var n,r,o={};try{for(var s=Ze(e),l=s.next();!l.done;l=s.next()){var u=l.value;o[u]=y3(t,u)}}catch(d){n={error:d}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return o}},Wt=function(t,e,n,r,o){return o===void 0&&(o=null),function(){for(var s=[],l=0;l<arguments.length;l++)s[l]=arguments[l];var u=n(),d=u.logger,h=u.logLevel;if(h&&h<xr.Debug||!h||!d)return t.apply(o,s);var p={type:"invoke public method",name:e,args:s,stacktrace:Sf(1),time:{start:new Date().toISOString()},states:{}};r&&p.states&&(p.states.before=r());var g=t.apply(o,s);return g&&g.promise?g.promise.then(function(){r&&p.states&&(p.states.after=r()),p.time&&(p.time.end=new Date().toISOString()),d.debug(JSON.stringify(p,null,2))}):(r&&p.states&&(p.states.after=r()),p.time&&(p.time.end=new Date().toISOString()),d.debug(JSON.stringify(p,null,2))),g}};function b3(t){return t instanceof Error?t.message:String(t)}function Rc(t){var e="";try{"body"in t&&(e=JSON.stringify(t.body,null,2))}catch{}return e}var x3=(function(){function t(e){this.name="amplitude",this.type="destination",this.retryTimeout=1e3,this.throttleTimeout=3e4,this.storageKey="",this.scheduleId=null,this.scheduledTimeout=0,this.flushId=null,this.queue=[],this.diagnosticsClient=e?.diagnosticsClient}return t.prototype.setup=function(e){var n;return ie(this,void 0,void 0,function(){var r,o=this;return re(this,function(s){switch(s.label){case 0:return this.config=e,this.storageKey="".concat(Uj,"_").concat(this.config.apiKey.substring(0,10)),[4,(n=this.config.storageProvider)===null||n===void 0?void 0:n.get(this.storageKey)];case 1:return r=s.sent(),r&&r.length>0&&Promise.all(r.map(function(l){return o.execute(l)})).catch(),[2,Promise.resolve(void 0)]}})})},t.prototype.execute=function(e){var n=this;return e.insert_id||(e.insert_id=Ti()),new Promise(function(r){var o={event:e,attempts:0,callback:function(s){return r(s)},timeout:0};n.queue.push(o),n.schedule(n.config.flushIntervalMillis),n.saveEvents()})},t.prototype.removeEventsExceedFlushMaxRetries=function(e){var n=this;return e.filter(function(r){return r.attempts+=1,r.attempts<n.config.flushMaxRetries?!0:(n.fulfillRequest([r],500,t3),!1)})},t.prototype.scheduleEvents=function(e){var n=this;e.forEach(function(r){n.schedule(r.timeout===0?n.config.flushIntervalMillis:r.timeout)})},t.prototype.schedule=function(e){var n=this;if(!this.config.offline&&(this.scheduleId===null||this.scheduleId&&e>this.scheduledTimeout)){this.scheduleId&&clearTimeout(this.scheduleId),this.scheduledTimeout=e,this.scheduleId=setTimeout(function(){n.queue=n.queue.map(function(r){return r.timeout=0,r}),n.flush(!0)},e);return}},t.prototype.resetSchedule=function(){this.scheduleId=null,this.scheduledTimeout=0},t.prototype.flush=function(e){return e===void 0&&(e=!1),ie(this,void 0,void 0,function(){var n,r,o,s=this;return re(this,function(l){switch(l.label){case 0:return this.config.offline?(this.resetSchedule(),this.config.loggerProvider.debug("Skipping flush while offline."),[2]):this.flushId?(this.resetSchedule(),this.config.loggerProvider.debug("Skipping flush because previous flush has not resolved."),[2]):(this.flushId=this.scheduleId,this.resetSchedule(),n=[],r=[],this.queue.forEach(function(u){return u.timeout===0?n.push(u):r.push(u)}),o=p3(n,this.config.flushQueueSize),[4,o.reduce(function(u,d){return ie(s,void 0,void 0,function(){return re(this,function(h){switch(h.label){case 0:return[4,u];case 1:return h.sent(),[4,this.send(d,e)];case 2:return[2,h.sent()]}})})},Promise.resolve())]);case 1:return l.sent(),this.flushId=null,this.scheduleEvents(this.queue),[2]}})})},t.prototype.send=function(e,n){var r;return n===void 0&&(n=!0),ie(this,void 0,void 0,function(){var o,s,l,u,d;return re(this,function(h){switch(h.label){case 0:if(!this.config.apiKey)return[2,this.fulfillRequest(e,400,r3)];o={api_key:this.config.apiKey,events:e.map(function(p){var g=p.event;g.extra;var y=Rf(g,["extra"]);return y}),options:{min_id_length:this.config.minIdLength},client_upload_time:new Date().toISOString(),request_metadata:this.config.requestMetadata},this.config.requestMetadata=new v3,h.label=1;case 1:return h.trys.push([1,3,,4]),s=jT(this.config.serverUrl,this.config.serverZone,this.config.useBatch).serverUrl,[4,this.config.transportProvider.send(s,o)];case 2:return l=h.sent(),l===null?(this.fulfillRequest(e,0,e3),[2]):n?(this.handleResponse(l,e),[3,4]):("body"in l?this.fulfillRequest(e,l.statusCode,"".concat(l.status,": ").concat(Rc(l))):this.fulfillRequest(e,l.statusCode,l.status),[2]);case 3:return u=h.sent(),d=b3(u),this.config.loggerProvider.error(d),(r=this.diagnosticsClient)===null||r===void 0||r.recordEvent("analytics.events.unsuccessful.from.catch.error",{events:e.map(function(p){return p.event.event_type}),message:d,stack_trace:Sf()}),this.handleResponse({status:dn.Failed,statusCode:0},e),[3,4];case 4:return[2]}})})},t.prototype.handleResponse=function(e,n){var r;yv(e.statusCode)||(r=this.diagnosticsClient)===null||r===void 0||r.recordEvent("analytics.events.unsuccessful",{events:n.map(function(s){return s.event.event_type}),code:e.statusCode,status:e.status,body:Rc(e),stack_trace:Sf()});var o=e.status;switch(o){case dn.Success:{this.handleSuccessResponse(e,n);break}case dn.Invalid:{this.handleInvalidResponse(e,n);break}case dn.PayloadTooLarge:{this.handlePayloadTooLargeResponse(e,n);break}case dn.RateLimit:{this.handleRateLimitResponse(e,n);break}default:{this.config.loggerProvider.warn(`{code: 0, error: "Status '`.concat(o,"' provided for ").concat(n.length,' events"}')),this.handleOtherResponse(n);break}}},t.prototype.handleSuccessResponse=function(e,n){this.fulfillRequest(n,e.statusCode,Zj)},t.prototype.handleInvalidResponse=function(e,n){var r=this;if(e.body.missingField||e.body.error.startsWith(i3)){this.fulfillRequest(n,e.statusCode,e.body.error);return}var o=yt(yt(yt(yt([],ze(Object.values(e.body.eventsWithInvalidFields)),!1),ze(Object.values(e.body.eventsWithMissingFields)),!1),ze(Object.values(e.body.eventsWithInvalidIdLengths)),!1),ze(e.body.silencedEvents),!1).flat(),s=new Set(o),l=n.filter(function(d,h){if(s.has(h)){r.fulfillRequest([d],e.statusCode,e.body.error);return}return!0});l.length>0&&this.config.loggerProvider.warn(Rc(e));var u=this.removeEventsExceedFlushMaxRetries(l);this.scheduleEvents(u)},t.prototype.handlePayloadTooLargeResponse=function(e,n){if(n.length===1){this.fulfillRequest(n,e.statusCode,e.body.error);return}this.config.loggerProvider.warn(Rc(e)),this.config.flushQueueSize/=2;var r=this.removeEventsExceedFlushMaxRetries(n);this.scheduleEvents(r)},t.prototype.handleRateLimitResponse=function(e,n){var r=this,o=Object.keys(e.body.exceededDailyQuotaUsers),s=Object.keys(e.body.exceededDailyQuotaDevices),l=e.body.throttledEvents,u=new Set(o),d=new Set(s),h=new Set(l),p=n.filter(function(y,x){if(y.event.user_id&&u.has(y.event.user_id)||y.event.device_id&&d.has(y.event.device_id)){r.fulfillRequest([y],e.statusCode,e.body.error);return}return h.has(x)&&(y.timeout=r.throttleTimeout),!0});p.length>0&&this.config.loggerProvider.warn(Rc(e));var g=this.removeEventsExceedFlushMaxRetries(p);this.scheduleEvents(g)},t.prototype.handleOtherResponse=function(e){var n=this,r=e.map(function(s){return s.timeout=s.attempts*n.retryTimeout,s}),o=this.removeEventsExceedFlushMaxRetries(r);this.scheduleEvents(o)},t.prototype.fulfillRequest=function(e,n,r){var o,s,l;yv(n)?(l=this.diagnosticsClient)===null||l===void 0||l.increment("analytics.events.sent",e.length):((o=this.diagnosticsClient)===null||o===void 0||o.increment("analytics.events.dropped",e.length),(s=this.diagnosticsClient)===null||s===void 0||s.recordEvent("analytics.events.dropped",{events:e.map(function(u){return u.event.event_type}),code:n,message:r,stack_trace:Sf()})),this.removeEvents(e),e.forEach(function(u){return u.callback(bl(u.event,n,r))})},t.prototype.saveEvents=function(){if(this.config.storageProvider){var e=this.queue.map(function(n){return n.event});this.config.storageProvider.set(this.storageKey,e)}},t.prototype.removeEvents=function(e){this.queue=this.queue.filter(function(n){return!e.some(function(r){return r.event.insert_id===n.event.insert_id})}),this.saveEvents()},t})(),S3=(function(){function t(){}return t.prototype.getApplicationContext=function(){return{versionName:this.versionName,language:E3(),platform:"Web",os:void 0,deviceModel:void 0}},t})(),E3=function(){return typeof navigator<"u"&&(navigator.languages&&navigator.languages[0]||navigator.language)||""},k3=(function(){function t(){this.queue=[]}return t.prototype.logEvent=function(e){this.receiver?this.receiver(e):this.queue.length<512&&this.queue.push(e)},t.prototype.setEventReceiver=function(e){this.receiver=e,this.queue.length>0&&(this.queue.forEach(function(n){e(n)}),this.queue=[])},t})(),Go=function(){return Go=Object.assign||function(e){for(var n,r=1,o=arguments.length;r<o;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Go.apply(this,arguments)};function Ef(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function AS(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),o,s=[],l;try{for(;(e===void 0||e-- >0)&&!(o=r.next()).done;)s.push(o.value)}catch(u){l={error:u}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(l)throw l.error}}return s}var kf=function(t,e){var n,r,o=["string","number","boolean","undefined"],s=typeof t,l=typeof e;if(s!==l)return!1;try{for(var u=Ef(o),d=u.next();!d.done;d=u.next()){var h=d.value;if(h===s)return t===e}}catch(k){n={error:k}}finally{try{d&&!d.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}if(t==null&&e==null)return!0;if(t==null||e==null||t.length!==e.length)return!1;var p=Array.isArray(t),g=Array.isArray(e);if(p!==g)return!1;if(p&&g){for(var y=0;y<t.length;y++)if(!kf(t[y],e[y]))return!1}else{var x=Object.keys(t).sort(),S=Object.keys(e).sort();if(!kf(x,S))return!1;var E=!0;return Object.keys(t).forEach(function(k){kf(t[k],e[k])||(E=!1)}),E}return!0},T3="$set",w3="$unset",C3="$clearAll";Object.entries||(Object.entries=function(t){for(var e=Object.keys(t),n=e.length,r=new Array(n);n--;)r[n]=[e[n],t[e[n]]];return r});var A3=(function(){function t(){this.identity={userProperties:{}},this.listeners=new Set}return t.prototype.editIdentity=function(){var e=this,n=Go({},this.identity.userProperties),r=Go(Go({},this.identity),{userProperties:n});return{setUserId:function(o){return r.userId=o,this},setDeviceId:function(o){return r.deviceId=o,this},setUserProperties:function(o){return r.userProperties=o,this},setOptOut:function(o){return r.optOut=o,this},updateUserProperties:function(o){var s,l,u,d,h,p,g=r.userProperties||{};try{for(var y=Ef(Object.entries(o)),x=y.next();!x.done;x=y.next()){var S=AS(x.value,2),E=S[0],k=S[1];switch(E){case T3:try{for(var w=(u=void 0,Ef(Object.entries(k))),C=w.next();!C.done;C=w.next()){var _=AS(C.value,2),R=_[0],j=_[1];g[R]=j}}catch(K){u={error:K}}finally{try{C&&!C.done&&(d=w.return)&&d.call(w)}finally{if(u)throw u.error}}break;case w3:try{for(var z=(h=void 0,Ef(Object.keys(k))),B=z.next();!B.done;B=z.next()){var R=B.value;delete g[R]}}catch(K){h={error:K}}finally{try{B&&!B.done&&(p=z.return)&&p.call(z)}finally{if(h)throw h.error}}break;case C3:g={};break}}}catch(K){s={error:K}}finally{try{x&&!x.done&&(l=y.return)&&l.call(y)}finally{if(s)throw s.error}}return r.userProperties=g,this},commit:function(){return e.setIdentity(r),this}}},t.prototype.getIdentity=function(){return Go({},this.identity)},t.prototype.setIdentity=function(e){var n=Go({},this.identity);this.identity=Go({},e),kf(n,this.identity)||this.listeners.forEach(function(r){r(e)})},t.prototype.addIdentityListener=function(e){this.listeners.add(e)},t.prototype.removeIdentityListener=function(e){this.listeners.delete(e)},t})(),Nc=typeof globalThis<"u"?globalThis:typeof global<"u"?global:self,_3=(function(){function t(){this.identityStore=new A3,this.eventBridge=new k3,this.applicationContextProvider=new S3}return t.getInstance=function(e){return Nc.analyticsConnectorInstances||(Nc.analyticsConnectorInstances={}),Nc.analyticsConnectorInstances[e]||(Nc.analyticsConnectorInstances[e]=new t),Nc.analyticsConnectorInstances[e]},t})(),uu=function(t){return t===void 0&&(t=_T),_3.getInstance(t)},M3=function(t,e){uu(e).identityStore.editIdentity().setUserId(t).commit()},O3=function(t,e){uu(e).identityStore.editIdentity().setDeviceId(t).commit()},j3=(function(){function t(){this.name="identity",this.type="before",this.identityStore=uu().identityStore}return t.prototype.execute=function(e){return ie(this,void 0,void 0,function(){var n;return re(this,function(r){return n=e.user_properties,n&&this.identityStore.editIdentity().updateUserProperties(n).commit(),[2,e]})})},t.prototype.setup=function(e){return ie(this,void 0,void 0,function(){return re(this,function(n){return e.instanceName&&(this.identityStore=uu(e.instanceName).identityStore),[2]})})},t})(),RT=function(t,e){e===void 0&&(e=Date.now());var n=Date.now(),r=n-e;return r>t},NT=function(t,e,n){return e===void 0&&(e=""),n===void 0&&(n=10),[Ih,e,t.substring(0,n)].filter(Boolean).join("_")},R3=function(t){return"".concat(Ih.toLowerCase(),"_").concat(t.substring(0,6))},N3=function(){var t,e,n,r;if(typeof navigator>"u")return"";var o=navigator.userLanguage;return(r=(n=(e=(t=navigator.languages)===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:navigator.language)!==null&&n!==void 0?n:o)!==null&&r!==void 0?r:""},Bf=function(){var t,e=Ot();if(!(!((t=e?.location)===null||t===void 0)&&t.search))return{};var n=e.location.search.substring(1).split("&").filter(Boolean),r=n.reduce(function(o,s){var l=s.split("=",2),u=_S(l[0]),d=_S(l[1]);return d&&(o[u]=d),o},{});return r},_S=function(t){t===void 0&&(t="");try{return decodeURIComponent(t)}catch{return""}},bv=function(t,e){return!e||!e.length?!0:e.some(function(n){return typeof n=="string"?t===n:t.match(n)})},ts=function(t,e){var n=t;try{n=decodeURI(t)}catch(r){e?.error("Malformed URI sequence: ",r)}return n},D3=function(t){var e=0;if(t.length===0)return e;for(var n=0;n<t.length;n++){var r=t.charCodeAt(n);e=(e<<5)-e+r,e|=0}return e},MS=function(t,e){var n=D3(t.toString()),r=Math.abs(n),o=r*31,s=o%1e5;return s/1e5<e},f0=(function(){function t(){this.memoryStorage=new Map}return t.prototype.isEnabled=function(){return ie(this,void 0,void 0,function(){return re(this,function(e){return[2,!0]})})},t.prototype.get=function(e){return ie(this,void 0,void 0,function(){return re(this,function(n){return[2,this.memoryStorage.get(e)]})})},t.prototype.getRaw=function(e){return ie(this,void 0,void 0,function(){var n;return re(this,function(r){switch(r.label){case 0:return[4,this.get(e)];case 1:return n=r.sent(),[2,n?JSON.stringify(n):void 0]}})})},t.prototype.set=function(e,n){return ie(this,void 0,void 0,function(){return re(this,function(r){return this.memoryStorage.set(e,n),[2]})})},t.prototype.remove=function(e){return ie(this,void 0,void 0,function(){return re(this,function(n){return this.memoryStorage.delete(e),[2]})})},t.prototype.reset=function(){return ie(this,void 0,void 0,function(){return re(this,function(e){return this.memoryStorage.clear(),[2]})})},t})(),Pf=(function(){function t(e,n){n===void 0&&(n={}),this.options=de({},e),this.config=n}return t.prototype.isEnabled=function(){return ie(this,void 0,void 0,function(){var e,n,r,o;return re(this,function(s){switch(s.label){case 0:if(!Ot())return[2,!1];t.testValue=String(Date.now()),e=de(de({},this.options),{expirationDays:.003}),n=new t(e),r="AMP_TEST_".concat(Ti().substring(0,8)),s.label=1;case 1:return s.trys.push([1,4,5,7]),[4,n.set(r,t.testValue)];case 2:return s.sent(),[4,n.get(r)];case 3:return o=s.sent(),[2,o===t.testValue];case 4:return s.sent(),[2,!1];case 5:return[4,n.remove(r)];case 6:return s.sent(),[7];case 7:return[2]}})})},t.prototype.get=function(e){return ie(this,void 0,void 0,function(){var n,r;return re(this,function(o){switch(o.label){case 0:return[4,this.getRaw(e)];case 1:if(n=o.sent(),!n)return[2,void 0];try{return r=DT(n),r===void 0?(console.error("Amplitude Logger [Error]: Failed to decode cookie value for key: ".concat(e,", value: ").concat(n)),[2,void 0]):[2,JSON.parse(r)]}catch{return console.error("Amplitude Logger [Error]: Failed to parse cookie value for key: ".concat(e,", value: ").concat(n)),[2,void 0]}return[2]}})})},t.prototype.getRaw=function(e){var n,r,o,s;return ie(this,void 0,void 0,function(){var l,u,d,h,p,g,y,x,S,E,k,w,C=this;return re(this,function(_){switch(_.label){case 0:l=Ot(),u=l,_.label=1;case 1:return _.trys.push([1,4,,5]),d=u?.cookieStore,d?[4,d.getAll(e)]:[3,3];case 2:if(h=_.sent(),h){h.length>1&&((n=this.config.diagnosticsClient)===null||n===void 0||n.recordEvent("cookies.duplicate",{cookies:h.map(function(R){return R.domain})}),(r=this.config.diagnosticsClient)===null||r===void 0||r.increment("cookies.duplicate.occurrence.cookieStore"));try{for(p=Ze(h),g=p.next();!g.done;g=p.next())if(y=g.value,LT(y.domain,this.options.domain))return[2,y.value]}catch(R){k={error:R}}finally{try{g&&!g.done&&(w=p.return)&&w.call(p)}finally{if(k)throw k.error}}}_.label=3;case 3:return[3,5];case 4:return _.sent(),[3,5];case 5:return x=((s=(o=l?.document)===null||o===void 0?void 0:o.cookie.split("; "))!==null&&s!==void 0?s:[]).filter(function(R){return R.indexOf(e+"=")===0}),S=void 0,E=this.config.duplicateResolverFn,typeof E=="function"&&x.length>1&&(S=x.find(function(R){var j;try{var z=E(R.substring(e.length+1));return z||(j=C.config.diagnosticsClient)===null||j===void 0||j.increment("cookies.duplicate.occurrence.document.cookie"),z}catch{return!1}})),S||(S=x[0]),S?[2,S.substring(e.length+1)]:[2,void 0]}})})},t.prototype.set=function(e,n){var r;return ie(this,void 0,void 0,function(){var o,s,l,u,d,h,p;return re(this,function(g){try{o=(r=this.options.expirationDays)!==null&&r!==void 0?r:0,s=n!==null?o:-1,l=void 0,s&&(u=new Date,u.setTime(u.getTime()+s*24*60*60*1e3),l=u),d="".concat(e,"=").concat(btoa(encodeURIComponent(JSON.stringify(n)))),l&&(d+="; expires=".concat(l.toUTCString())),d+="; path=/",this.options.domain&&(d+="; domain=".concat(this.options.domain)),this.options.secure&&(d+="; Secure"),this.options.sameSite&&(d+="; SameSite=".concat(this.options.sameSite)),h=Ot(),h&&(h.document.cookie=d)}catch(y){p=y instanceof Error?y.message:String(y),console.error("Amplitude Logger [Error]: Failed to set cookie for key: ".concat(e,". Error: ").concat(p))}return[2]})})},t.prototype.remove=function(e){return ie(this,void 0,void 0,function(){return re(this,function(n){switch(n.label){case 0:return[4,this.set(e,null)];case 1:return n.sent(),[2]}})})},t.prototype.reset=function(){return ie(this,void 0,void 0,function(){return re(this,function(e){return[2]})})},t})(),L3=function(t){try{return decodeURIComponent(atob(t))}catch{return}},z3=function(t){try{return decodeURIComponent(atob(decodeURIComponent(t)))}catch{return}},DT=function(t){var e;return(e=L3(t))!==null&&e!==void 0?e:z3(t)},LT=function(t,e){if(!t||!e)return!1;var n=t.startsWith(".")?t.substring(1):t,r=e.startsWith(".")?e.substring(1):e;return n.toLowerCase()===r.toLowerCase()},OS=function(t,e,n){return e===void 0&&(e=""),n===void 0&&(n=10),[Ih,e,t.substring(0,n)].filter(Boolean).join("_")},h0=(function(){function t(e){this.storage=e}return t.prototype.isEnabled=function(){return ie(this,void 0,void 0,function(){var e,n,r,o;return re(this,function(s){switch(s.label){case 0:if(!this.storage)return[2,!1];e=String(Date.now()),n=new t(this.storage),r="AMP_TEST",s.label=1;case 1:return s.trys.push([1,4,5,7]),[4,n.set(r,e)];case 2:return s.sent(),[4,n.get(r)];case 3:return o=s.sent(),[2,o===e];case 4:return s.sent(),[2,!1];case 5:return[4,n.remove(r)];case 6:return s.sent(),[7];case 7:return[2]}})})},t.prototype.get=function(e){return ie(this,void 0,void 0,function(){var n;return re(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.getRaw(e)];case 1:return n=r.sent(),n?[2,JSON.parse(n)]:[2,void 0];case 2:return r.sent(),console.error("[Amplitude] Error: Could not get value from storage"),[2,void 0];case 3:return[2]}})})},t.prototype.getRaw=function(e){var n;return ie(this,void 0,void 0,function(){return re(this,function(r){return[2,((n=this.storage)===null||n===void 0?void 0:n.getItem(e))||void 0]})})},t.prototype.set=function(e,n){var r;return ie(this,void 0,void 0,function(){return re(this,function(o){try{(r=this.storage)===null||r===void 0||r.setItem(e,JSON.stringify(n))}catch{}return[2]})})},t.prototype.remove=function(e){var n;return ie(this,void 0,void 0,function(){return re(this,function(r){try{(n=this.storage)===null||n===void 0||n.removeItem(e)}catch{}return[2]})})},t.prototype.reset=function(){var e;return ie(this,void 0,void 0,function(){return re(this,function(n){try{(e=this.storage)===null||e===void 0||e.clear()}catch{}return[2]})})},t})(),I3=10,B3=1,ct={TAGS:"tags",COUNTERS:"counters",HISTOGRAMS:"histograms",EVENTS:"events",INTERNAL:"internal"},jS={LAST_FLUSH_TIMESTAMP:"last_flush_timestamp"},RS=(function(){function t(e,n){this.dbPromise=null,this.logger=n,this.dbName="AMP_diagnostics_".concat(e.substring(0,10))}return t.isSupported=function(){var e;return((e=Ot())===null||e===void 0?void 0:e.indexedDB)!==void 0},t.prototype.getDB=function(){return ie(this,void 0,void 0,function(){return re(this,function(e){return this.dbPromise||(this.dbPromise=this.openDB()),[2,this.dbPromise]})})},t.prototype.openDB=function(){var e=this;return new Promise(function(n,r){var o=indexedDB.open(e.dbName,B3);o.onerror=function(){e.dbPromise=null,r(new Error("Failed to open IndexedDB"))},o.onsuccess=function(){var s=o.result;s.onclose=function(){e.dbPromise=null,e.logger.debug("DiagnosticsStorage: DB connection closed.")},s.onerror=function(l){e.logger.debug("DiagnosticsStorage: A global database error occurred.",l),s.close()},n(s)},o.onupgradeneeded=function(s){var l=s.target.result;e.createTables(l)}})},t.prototype.createTables=function(e){if(e.objectStoreNames.contains(ct.TAGS)||e.createObjectStore(ct.TAGS,{keyPath:"key"}),e.objectStoreNames.contains(ct.COUNTERS)||e.createObjectStore(ct.COUNTERS,{keyPath:"key"}),e.objectStoreNames.contains(ct.HISTOGRAMS)||e.createObjectStore(ct.HISTOGRAMS,{keyPath:"key"}),!e.objectStoreNames.contains(ct.EVENTS)){var n=e.createObjectStore(ct.EVENTS,{keyPath:"id",autoIncrement:!0});n.createIndex("time_idx","time",{unique:!1})}e.objectStoreNames.contains(ct.INTERNAL)||e.createObjectStore(ct.INTERNAL,{keyPath:"key"})},t.prototype.setTags=function(e){return ie(this,void 0,void 0,function(){var n,r,o,s,l=this;return re(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),Object.entries(e).length===0?[2]:[4,this.getDB()];case 1:return n=u.sent(),r=n.transaction([ct.TAGS],"readwrite"),o=r.objectStore(ct.TAGS),[2,new Promise(function(d){var h=Object.entries(e);r.oncomplete=function(){d()},r.onabort=function(p){l.logger.debug("DiagnosticsStorage: Failed to set tags",p),d()},h.forEach(function(p){var g=ze(p,2),y=g[0],x=g[1],S=o.put({key:y,value:x});S.onerror=function(E){l.logger.debug("DiagnosticsStorage: Failed to set tag",y,x,E)}})})];case 2:return s=u.sent(),this.logger.debug("DiagnosticsStorage: Failed to set tags",s),[3,3];case 3:return[2]}})})},t.prototype.incrementCounters=function(e){return ie(this,void 0,void 0,function(){var n,r,o,s,l=this;return re(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),Object.entries(e).length===0?[2]:[4,this.getDB()];case 1:return n=u.sent(),r=n.transaction([ct.COUNTERS],"readwrite"),o=r.objectStore(ct.COUNTERS),[2,new Promise(function(d){var h=Object.entries(e);r.oncomplete=function(){d()},r.onabort=function(p){l.logger.debug("DiagnosticsStorage: Failed to increment counters",p),d()},h.forEach(function(p){var g=ze(p,2),y=g[0],x=g[1],S=o.get(y);S.onsuccess=function(){var E=S.result,k=E?E.value:0,w=o.put({key:y,value:k+x});w.onerror=function(C){l.logger.debug("DiagnosticsStorage: Failed to update counter",y,C)}},S.onerror=function(E){l.logger.debug("DiagnosticsStorage: Failed to read existing counter",y,E)}})})];case 2:return s=u.sent(),this.logger.debug("DiagnosticsStorage: Failed to increment counters",s),[3,3];case 3:return[2]}})})},t.prototype.setHistogramStats=function(e){return ie(this,void 0,void 0,function(){var n,r,o,s,l=this;return re(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),Object.entries(e).length===0?[2]:[4,this.getDB()];case 1:return n=u.sent(),r=n.transaction([ct.HISTOGRAMS],"readwrite"),o=r.objectStore(ct.HISTOGRAMS),[2,new Promise(function(d){var h=Object.entries(e);r.oncomplete=function(){d()},r.onabort=function(p){l.logger.debug("DiagnosticsStorage: Failed to set histogram stats",p),d()},h.forEach(function(p){var g=ze(p,2),y=g[0],x=g[1],S=o.get(y);S.onsuccess=function(){var E=S.result,k;E?k={key:y,count:E.count+x.count,min:Math.min(E.min,x.min),max:Math.max(E.max,x.max),sum:E.sum+x.sum}:k={key:y,count:x.count,min:x.min,max:x.max,sum:x.sum};var w=o.put(k);w.onerror=function(C){l.logger.debug("DiagnosticsStorage: Failed to set histogram stats",y,C)}},S.onerror=function(E){l.logger.debug("DiagnosticsStorage: Failed to read existing histogram stats",y,E)}})})];case 2:return s=u.sent(),this.logger.debug("DiagnosticsStorage: Failed to set histogram stats",s),[3,3];case 3:return[2]}})})},t.prototype.addEventRecords=function(e){return ie(this,void 0,void 0,function(){var n,r,o,s,l=this;return re(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),e.length===0?[2]:[4,this.getDB()];case 1:return n=u.sent(),r=n.transaction([ct.EVENTS],"readwrite"),o=r.objectStore(ct.EVENTS),[2,new Promise(function(d){r.oncomplete=function(){d()},r.onabort=function(p){l.logger.debug("DiagnosticsStorage: Failed to add event records",p),d()};var h=o.count();h.onsuccess=function(){var p=h.result,g=Math.max(0,I3-p);g<e.length&&l.logger.debug("DiagnosticsStorage: Only added ".concat(g," of ").concat(e.length," events due to storage limit")),e.slice(0,g).forEach(function(y){var x=o.add(y);x.onerror=function(S){l.logger.debug("DiagnosticsStorage: Failed to add event record",S)}})},h.onerror=function(p){l.logger.debug("DiagnosticsStorage: Failed to count existing events",p)}})];case 2:return s=u.sent(),this.logger.debug("DiagnosticsStorage: Failed to add event records",s),[3,3];case 3:return[2]}})})},t.prototype.setInternal=function(e,n){return ie(this,void 0,void 0,function(){var r,o,s,l;return re(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,this.getDB()];case 1:return r=u.sent(),o=r.transaction([ct.INTERNAL],"readwrite"),s=o.objectStore(ct.INTERNAL),[2,new Promise(function(d,h){o.onabort=function(){return h(new Error("Failed to set internal value"))};var p=s.put({key:e,value:n});p.onsuccess=function(){return d()},p.onerror=function(){return h(new Error("Failed to set internal value"))}})];case 2:return l=u.sent(),this.logger.debug("DiagnosticsStorage: Failed to set internal value",l),[3,3];case 3:return[2]}})})},t.prototype.getInternal=function(e){return ie(this,void 0,void 0,function(){var n,r,o,s;return re(this,function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,this.getDB()];case 1:return n=l.sent(),r=n.transaction([ct.INTERNAL],"readonly"),o=r.objectStore(ct.INTERNAL),[2,new Promise(function(u,d){r.onabort=function(){return d(new Error("Failed to get internal value"))};var h=o.get(e);h.onsuccess=function(){return u(h.result)},h.onerror=function(){return d(new Error("Failed to get internal value"))}})];case 2:return s=l.sent(),this.logger.debug("DiagnosticsStorage: Failed to get internal value",s),[2,void 0];case 3:return[2]}})})},t.prototype.getLastFlushTimestamp=function(){return ie(this,void 0,void 0,function(){var e,n;return re(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.getInternal(jS.LAST_FLUSH_TIMESTAMP)];case 1:return e=r.sent(),[2,e?parseInt(e.value,10):void 0];case 2:return n=r.sent(),this.logger.debug("DiagnosticsStorage: Failed to get last flush timestamp",n),[2,void 0];case 3:return[2]}})})},t.prototype.setLastFlushTimestamp=function(e){return ie(this,void 0,void 0,function(){var n;return re(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,this.setInternal(jS.LAST_FLUSH_TIMESTAMP,e.toString())];case 1:return r.sent(),[3,3];case 2:return n=r.sent(),this.logger.debug("DiagnosticsStorage: Failed to set last flush timestamp",n),[3,3];case 3:return[2]}})})},t.prototype.clearTable=function(e,n){return new Promise(function(r,o){var s=e.objectStore(n),l=s.clear();l.onsuccess=function(){return r()},l.onerror=function(){return o(new Error("Failed to clear table ".concat(n)))}})},t.prototype.getAllAndClear=function(){return ie(this,void 0,void 0,function(){var e,n,r,o,s,l,u,d;return re(this,function(h){switch(h.label){case 0:return h.trys.push([0,4,,5]),[4,this.getDB()];case 1:return e=h.sent(),n=e.transaction([ct.TAGS,ct.COUNTERS,ct.HISTOGRAMS,ct.EVENTS],"readwrite"),[4,Promise.all([this.getAllFromStore(n,ct.TAGS),this.getAllFromStore(n,ct.COUNTERS),this.getAllFromStore(n,ct.HISTOGRAMS),this.getAllFromStore(n,ct.EVENTS)])];case 2:return r=ze.apply(void 0,[h.sent(),4]),o=r[0],s=r[1],l=r[2],u=r[3],[4,Promise.all([this.clearTable(n,ct.COUNTERS),this.clearTable(n,ct.HISTOGRAMS),this.clearTable(n,ct.EVENTS)])];case 3:return h.sent(),[2,{tags:o,counters:s,histogramStats:l,events:u}];case 4:return d=h.sent(),this.logger.debug("DiagnosticsStorage: Failed to get all and clear data",d),[2,{tags:[],counters:[],histogramStats:[],events:[]}];case 5:return[2]}})})},t.prototype.getAllFromStore=function(e,n){return new Promise(function(r,o){var s=e.objectStore(n),l=s.getAll();l.onsuccess=function(){return r(l.result)},l.onerror=function(){return o(new Error("Failed to get all from ".concat(n)))}})},t})(),P3="__AMPLITUDE_SCRIPT_URL__",U3="sdk.error.uncaught",H3=function(){var t=Ot();return t?.[P3]},q3=function(t){var e=Ot();if(!(!e||typeof e.addEventListener!="function")){var n=function(s){var l=s.error instanceof Error?s.error:void 0,u=l?.stack,d=NS({filename:s.filename,stack:u});d&&o({type:"error",message:s.message,stack:u,filename:s.filename,errorName:l?.name,metadata:{colno:s.colno,lineno:s.lineno,isTrusted:s.isTrusted,matchReason:d}})},r=function(s){var l,u=s.reason instanceof Error?s.reason:void 0,d=u?.stack,h=V3(d),p=NS({filename:h,stack:d});p&&o({type:"unhandledrejection",message:(l=u?.message)!==null&&l!==void 0?l:F3(s.reason),stack:d,filename:h,errorName:u?.name,metadata:{isTrusted:s.isTrusted,matchReason:p}})},o=function(s){t.recordEvent(U3,de({type:s.type,message:s.message,filename:s.filename,error_name:s.errorName,stack:s.stack},s.metadata))};e.addEventListener("error",n,!0),e.addEventListener("unhandledrejection",r,!0)}},NS=function(t){var e=H3();if(e){if(t.filename&&t.filename.includes(e))return"filename";if(t.stack&&t.stack.includes(e))return"stack"}},V3=function(t){if(t){var e=t.match(/(https?:\/\/\S+?)(?=[)\s]|$)/);return e?e[1]:void 0}},F3=function(t){if(typeof t=="string")return t;try{return JSON.stringify(t)}catch{return"[object Object]"}},W3=1e3,Xd=300*1e3,G3="https://diagnostics.prod.us-west-2.amplitude.com/v1/capture",$3="https://diagnostics.prod.eu-central-1.amplitude.com/v1/capture",hg=1e4,K3=10,Y3=(function(){function t(e,n,r,o){r===void 0&&(r="US"),this.inMemoryTags={},this.inMemoryCounters={},this.inMemoryHistograms={},this.inMemoryEvents=[],this.saveTimer=null,this.flushTimer=null,this.apiKey=e,this.logger=n,this.serverUrl=r==="US"?G3:$3,this.logger.debug("DiagnosticsClient: Initializing with options",JSON.stringify(o,null,2)),this.config=de({enabled:!0,sampleRate:0},o),this.startTimestamp=Date.now(),this.shouldTrack=MS(this.startTimestamp,this.config.sampleRate)&&this.config.enabled,RS.isSupported()?this.storage=new RS(e,n):this.logger.debug("DiagnosticsClient: IndexedDB is not supported"),this.initializeFlushInterval(),this.shouldTrack&&(this.increment("sdk.diagnostics.sampled.in.and.enabled"),q3(this))}return t.prototype.isStorageAndTrackEnabled=function(){return!!this.storage&&!!this.shouldTrack},t.prototype.setTag=function(e,n){if(this.isStorageAndTrackEnabled()){if(Object.keys(this.inMemoryTags).length>=hg){this.logger.debug("DiagnosticsClient: Early return setTags as reaching memory limit");return}this.inMemoryTags[e]=n,this.startTimersIfNeeded()}},t.prototype.increment=function(e,n){if(n===void 0&&(n=1),!!this.isStorageAndTrackEnabled()){if(Object.keys(this.inMemoryCounters).length>=hg){this.logger.debug("DiagnosticsClient: Early return increment as reaching memory limit");return}this.inMemoryCounters[e]=(this.inMemoryCounters[e]||0)+n,this.startTimersIfNeeded()}},t.prototype.recordHistogram=function(e,n){if(this.isStorageAndTrackEnabled()){if(Object.keys(this.inMemoryHistograms).length>=hg){this.logger.debug("DiagnosticsClient: Early return recordHistogram as reaching memory limit");return}var r=this.inMemoryHistograms[e];r?(r.count+=1,r.min=Math.min(r.min,n),r.max=Math.max(r.max,n),r.sum+=n):this.inMemoryHistograms[e]={count:1,min:n,max:n,sum:n},this.startTimersIfNeeded()}},t.prototype.recordEvent=function(e,n){if(this.isStorageAndTrackEnabled()){if(this.inMemoryEvents.length>=K3){this.logger.debug("DiagnosticsClient: Early return recordEvent as reaching memory limit");return}this.inMemoryEvents.push({event_name:e,time:Date.now(),event_properties:n}),this.startTimersIfNeeded()}},t.prototype.startTimersIfNeeded=function(){var e=this;this.saveTimer||(this.saveTimer=setTimeout(function(){e.saveAllDataToStorage().catch(function(n){e.logger.debug("DiagnosticsClient: Failed to save all data to storage",n)}).finally(function(){e.saveTimer=null})},W3)),this.flushTimer||(this.flushTimer=setTimeout(function(){e._flush().catch(function(n){e.logger.debug("DiagnosticsClient: Failed to flush",n)}).finally(function(){e.flushTimer=null})},Xd))},t.prototype.saveAllDataToStorage=function(){return ie(this,void 0,void 0,function(){var e,n,r,o;return re(this,function(s){switch(s.label){case 0:return this.storage?(e=de({},this.inMemoryTags),n=de({},this.inMemoryCounters),r=de({},this.inMemoryHistograms),o=yt([],ze(this.inMemoryEvents),!1),this.inMemoryEvents=[],this.inMemoryTags={},this.inMemoryCounters={},this.inMemoryHistograms={},[4,Promise.all([this.storage.setTags(e),this.storage.incrementCounters(n),this.storage.setHistogramStats(r),this.storage.addEventRecords(o)])]):[2];case 1:return s.sent(),[2]}})})},t.prototype._flush=function(){return ie(this,void 0,void 0,function(){var e,n,r,o,s,l,u,d,h,p;return re(this,function(g){switch(g.label){case 0:return this.storage?[4,this.saveAllDataToStorage()]:[2];case 1:return g.sent(),this.saveTimer=null,this.flushTimer=null,[4,this.storage.getAllAndClear()];case 2:return e=g.sent(),n=e.tags,r=e.counters,o=e.histogramStats,s=e.events,this.storage.setLastFlushTimestamp(Date.now()),l={},n.forEach(function(y){l[y.key]=y.value}),u={},r.forEach(function(y){u[y.key]=y.value}),d={},o.forEach(function(y){d[y.key]={count:y.count,min:y.min,max:y.max,avg:Math.round(y.sum/y.count*100)/100}}),h=s.map(function(y){return{event_name:y.event_name,time:y.time,event_properties:y.event_properties}}),Object.keys(u).length===0&&Object.keys(d).length===0&&h.length===0?[2]:(p={tags:l,histogram:d,counters:u,events:h},this.fetch(p),[2])}})})},t.prototype.fetch=function(e){return ie(this,void 0,void 0,function(){var n,r;return re(this,function(o){switch(o.label){case 0:if(o.trys.push([0,2,,3]),!Ot())throw new Error("DiagnosticsClient: Fetch is not supported");return[4,fetch(this.serverUrl,{method:"POST",headers:{"X-ApiKey":this.apiKey,"Content-Type":"application/json"},body:JSON.stringify(e)})];case 1:return n=o.sent(),n.ok?(this.logger.debug("DiagnosticsClient: Successfully sent diagnostics data"),[3,3]):(this.logger.debug("DiagnosticsClient: Failed to send diagnostics data."),[2]);case 2:return r=o.sent(),this.logger.debug("DiagnosticsClient: Failed to send diagnostics data. ",r),[3,3];case 3:return[2]}})})},t.prototype.initializeFlushInterval=function(){return ie(this,void 0,void 0,function(){var e,n,r;return re(this,function(o){switch(o.label){case 0:return this.storage?(e=Date.now(),[4,this.storage.getLastFlushTimestamp()]):[2];case 1:return n=o.sent()||-1,n===-1?(this.storage.setLastFlushTimestamp(e),this._setFlushTimer(Xd),[2]):(r=e-n,r>=Xd?(this._flush(),[2]):(this._setFlushTimer(Xd-r),[2]))}})})},t.prototype._setFlushTimer=function(e){var n=this;this.flushTimer=setTimeout(function(){n._flush().catch(function(r){n.logger.debug("DiagnosticsClient: Failed to flush",r)}).finally(function(){n.flushTimer=null})},e)},t.prototype._setSampleRate=function(e){this.logger.debug("DiagnosticsClient: Setting sample rate to",e),this.config.sampleRate=e,this.shouldTrack=MS(this.startTimestamp,this.config.sampleRate)&&this.config.enabled,this.logger.debug("DiagnosticsClient: Should track is",this.shouldTrack)},t})(),p0=(function(){function t(){}return t.prototype.send=function(e,n){return Promise.resolve(null)},t.prototype.buildResponse=function(e){var n,r,o,s,l,u,d,h,p,g,y,x,S,E,k,w,C,_,R,j,z,B;if(typeof e!="object")return null;var K=e.code||0,W=this.buildStatus(K);switch(W){case dn.Success:return{status:W,statusCode:K,body:{eventsIngested:(n=e.events_ingested)!==null&&n!==void 0?n:0,payloadSizeBytes:(r=e.payload_size_bytes)!==null&&r!==void 0?r:0,serverUploadTime:(o=e.server_upload_time)!==null&&o!==void 0?o:0}};case dn.Invalid:return{status:W,statusCode:K,body:{error:(s=e.error)!==null&&s!==void 0?s:"",missingField:(l=e.missing_field)!==null&&l!==void 0?l:"",eventsWithInvalidFields:(u=e.events_with_invalid_fields)!==null&&u!==void 0?u:{},eventsWithMissingFields:(d=e.events_with_missing_fields)!==null&&d!==void 0?d:{},eventsWithInvalidIdLengths:(h=e.events_with_invalid_id_lengths)!==null&&h!==void 0?h:{},epsThreshold:(p=e.eps_threshold)!==null&&p!==void 0?p:0,exceededDailyQuotaDevices:(g=e.exceeded_daily_quota_devices)!==null&&g!==void 0?g:{},silencedDevices:(y=e.silenced_devices)!==null&&y!==void 0?y:[],silencedEvents:(x=e.silenced_events)!==null&&x!==void 0?x:[],throttledDevices:(S=e.throttled_devices)!==null&&S!==void 0?S:{},throttledEvents:(E=e.throttled_events)!==null&&E!==void 0?E:[]}};case dn.PayloadTooLarge:return{status:W,statusCode:K,body:{error:(k=e.error)!==null&&k!==void 0?k:""}};case dn.RateLimit:return{status:W,statusCode:K,body:{error:(w=e.error)!==null&&w!==void 0?w:"",epsThreshold:(C=e.eps_threshold)!==null&&C!==void 0?C:0,throttledDevices:(_=e.throttled_devices)!==null&&_!==void 0?_:{},throttledUsers:(R=e.throttled_users)!==null&&R!==void 0?R:{},exceededDailyQuotaDevices:(j=e.exceeded_daily_quota_devices)!==null&&j!==void 0?j:{},exceededDailyQuotaUsers:(z=e.exceeded_daily_quota_users)!==null&&z!==void 0?z:{},throttledEvents:(B=e.throttled_events)!==null&&B!==void 0?B:[]}};case dn.Timeout:default:return{status:W,statusCode:K}}},t.prototype.buildStatus=function(e){return yv(e)?dn.Success:e===429?dn.RateLimit:e===413?dn.PayloadTooLarge:e===408?dn.Timeout:e>=400&&e<500?dn.Invalid:e>=500?dn.Failed:dn.Unknown},t})(),X3=(function(t){ha(e,t);function e(n){n===void 0&&(n={});var r=t.call(this)||this;return r.customHeaders=n,r}return e.prototype.send=function(n,r){return ie(this,void 0,void 0,function(){var o,s,l;return re(this,function(u){switch(u.label){case 0:if(typeof fetch>"u")throw new Error("FetchTransport is not supported");return o={headers:de({"Content-Type":"application/json",Accept:"*/*"},this.customHeaders),body:JSON.stringify(r),method:"POST"},[4,fetch(n,o)];case 1:return s=u.sent(),[4,s.text()];case 2:l=u.sent();try{return[2,this.buildResponse(JSON.parse(l))]}catch{return[2,this.buildResponse({code:s.status})]}return[2]}})})},e})(p0),J3=(function(){function t(e,n){this.key="AMP_remote_config_".concat(e.substring(0,10)),this.logger=n}return t.prototype.fetchConfig=function(){var e=null,n={remoteConfig:null,lastFetch:new Date};try{e=localStorage.getItem(this.key)}catch(o){return this.logger.debug("Remote config localstorage failed to access: ",o),Promise.resolve(n)}if(e===null)return this.logger.debug("Remote config localstorage gets null because the key does not exist"),Promise.resolve(n);try{var r=JSON.parse(e);return this.logger.debug("Remote config localstorage parsed successfully: ".concat(JSON.stringify(r))),Promise.resolve({remoteConfig:r.remoteConfig,lastFetch:new Date(r.lastFetch)})}catch(o){return this.logger.debug("Remote config localstorage failed to parse: ",o),localStorage.removeItem(this.key),Promise.resolve(n)}},t.prototype.setConfig=function(e){try{return localStorage.setItem(this.key,JSON.stringify(e)),this.logger.debug("Remote config localstorage set successfully."),Promise.resolve(!0)}catch(n){this.logger.debug("Remote config localstorage failed to set: ",n)}return Promise.resolve(!1)},t})(),Q3="https://sr-client-cfg.amplitude.com/config",Z3="https://sr-client-cfg.eu.amplitude.com/config",eR=3,tR=1e3,nR=300*1e3,rR=(function(){function t(e,n,r,o){r===void 0&&(r="US"),this.callbackInfos=[],this.lastSuccessfulFetch=null,this.fetchPromise=null,this.apiKey=e,this.serverUrl=o||(r==="US"?Q3:Z3),this.logger=n,this.storage=new J3(e,n)}return t.prototype.subscribe=function(e,n,r){var o=Ti(),s={id:o,key:e,deliveryMode:n,callback:r};return this.callbackInfos.push(s),n==="all"?this.subscribeAll(s):this.subscribeWaitForRemote(s,n.timeout),o},t.prototype.unsubscribe=function(e){var n=this.callbackInfos.findIndex(function(r){return r.id===e});return n===-1?(this.logger.debug("Remote config client unsubscribe failed because callback with id ".concat(e," doesn't exist.")),!1):(this.callbackInfos.splice(n,1),this.logger.debug("Remote config client unsubscribe succeeded removing callback with id ".concat(e,".")),!0)},t.prototype.updateConfigs=function(){return ie(this,void 0,void 0,function(){var e,n,r=this;return re(this,function(o){switch(o.label){case 0:return this.lastSuccessfulFetch&&(e=Date.now()-this.lastSuccessfulFetch,e<nR)?(this.logger.debug("Remote config client skipping updateConfigs: Too recent"),[2]):[4,this.getOrCreateFetchPromise()];case 1:return n=o.sent(),this.storage.setConfig(n),this.callbackInfos.forEach(function(s){r.sendCallback(s,n,"remote")}),[2]}})})},t.prototype.getOrCreateFetchPromise=function(){var e=this;return this.fetchPromise?this.fetchPromise:(this.fetchPromise=this.fetch().then(function(n){return n.remoteConfig!==null&&(e.lastSuccessfulFetch=Date.now()),n}).finally(function(){e.fetchPromise=null}),this.fetchPromise)},t.prototype.subscribeAll=function(e){return ie(this,void 0,void 0,function(){var n,r,o,s=this;return re(this,function(l){switch(l.label){case 0:return n=this.getOrCreateFetchPromise().then(function(u){s.logger.debug("Remote config client subscription all mode fetched from remote: ".concat(JSON.stringify(u))),s.sendCallback(e,u,"remote"),s.storage.setConfig(u)}),r=this.storage.fetchConfig().then(function(u){return u}),[4,Promise.race([n,r])];case 1:return o=l.sent(),o!==void 0&&(this.logger.debug("Remote config client subscription all mode fetched from cache: ".concat(JSON.stringify(o))),o.remoteConfig!==null?this.sendCallback(e,o,"cache"):this.logger.debug("Remote config client skips sending callback because cache is empty (first time user).")),[4,n];case 2:return l.sent(),[2]}})})},t.prototype.subscribeWaitForRemote=function(e,n){return ie(this,void 0,void 0,function(){var r,o,o;return re(this,function(s){switch(s.label){case 0:r=new Promise(function(l,u){setTimeout(function(){u("Timeout exceeded")},n)}),s.label=1;case 1:return s.trys.push([1,3,,5]),[4,Promise.race([this.getOrCreateFetchPromise(),r])];case 2:return o=s.sent(),this.logger.debug("Remote config client subscription wait for remote mode returns from remote."),this.sendCallback(e,o,"remote"),this.storage.setConfig(o),[3,5];case 3:return s.sent(),this.logger.debug("Remote config client subscription wait for remote mode exceeded timeout. Try to fetch from cache."),[4,this.storage.fetchConfig()];case 4:return o=s.sent(),o.remoteConfig!==null?(this.logger.debug("Remote config client subscription wait for remote mode returns a cached copy."),this.sendCallback(e,o,"cache")):(this.logger.debug("Remote config client subscription wait for remote mode failed to fetch cache."),this.sendCallback(e,o,"remote")),[3,5];case 5:return[2]}})})},t.prototype.sendCallback=function(e,n,r){e.lastCallback=new Date;var o;e.key?o=e.key.split(".").reduce(function(s,l){return s===null?s:l in s?s[l]:null},n.remoteConfig):o=n.remoteConfig,e.callback(o,r,n.lastFetch)},t.prototype.fetch=function(e,n){return e===void 0&&(e=eR),n===void 0&&(n=tR),ie(this,void 0,void 0,function(){var r,o,s,l,u,d,h=this;return re(this,function(p){switch(p.label){case 0:r=n/e,o={remoteConfig:null,lastFetch:new Date},s=function(g){var y,x,S,E,k,w;return re(this,function(C){switch(C.label){case 0:y=new AbortController,x=setTimeout(function(){return y.abort()},n),C.label=1;case 1:return C.trys.push([1,7,8,9]),[4,fetch(l.getUrlParams(),{method:"GET",headers:{Accept:"*/*"},signal:y.signal})];case 2:return S=C.sent(),S.ok?[3,4]:[4,S.text()];case 3:return E=C.sent(),l.logger.debug("Remote config client fetch with retry time ".concat(e," failed with ").concat(S.status,": ").concat(E)),[3,6];case 4:return[4,S.json()];case 5:return k=C.sent(),[2,{value:{remoteConfig:k,lastFetch:new Date}}];case 6:return[3,9];case 7:return w=C.sent(),w instanceof Error&&w.name==="AbortError"?l.logger.debug("Remote config client fetch with retry time ".concat(e," timed out after ").concat(n,"ms")):l.logger.debug("Remote config client fetch with retry time ".concat(e," is rejected because: "),w),[3,9];case 8:return clearTimeout(x),[7];case 9:return g<e-1?[4,new Promise(function(_){return setTimeout(_,h.getJitterDelay(r))})]:[3,11];case 10:C.sent(),C.label=11;case 11:return[2]}})},l=this,u=0,p.label=1;case 1:return u<e?[5,s(u)]:[3,4];case 2:if(d=p.sent(),typeof d=="object")return[2,d.value];p.label=3;case 3:return u++,[3,1];case 4:return[2,o]}})})},t.prototype.getJitterDelay=function(e){return Math.floor(Math.random()*e)},t.prototype.getUrlParams=function(){var e=encodeURIComponent(this.apiKey),n=new URLSearchParams;return n.append("config_group",t.CONFIG_GROUP),"".concat(this.serverUrl,"/").concat(e,"?").concat(n.toString())},t.CONFIG_GROUP="browser",t})(),pg=Ot(),dl=pg?.console,ea={},Yc={},mg=!1;function iR(t){if(!dl||typeof dl[t]!="function")return!1;if(Yc[t])return!0;var e=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];try{if(ea[t]&&!mg){mg=!0;var o=ea[t];o&&o.forEach(function(s){try{s(t,n)}catch{}})}}catch{}return mg=!1,Yc[t].apply(dl,n)};return Yc[t]=dl[t],dl[t]=e,!0}function oR(t,e){var n=iR(t);if(!n)return new Error("Console override failed");ea[t]?ea[t].push(e):ea[t]=[e]}function sR(t){var e,n;try{for(var r=Ze(Object.values(ea)),o=r.next();!o.done;o=r.next())for(var s=o.value,l=s.length-1;l>=0;l--)if(s[l]===t){s.splice(l,1);break}}catch(u){e={error:u}}finally{try{o&&!o.done&&(n=r.return)&&n.call(r)}finally{if(e)throw e.error}}}function aR(){var t,e;try{for(var n=Ze(Object.entries(Yc)),r=n.next();!r.done;r=n.next()){var o=ze(r.value,2),s=o[0],l=o[1];l&&(dl[s]=l)}}catch(u){t={error:u}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}Yc={},ea={}}var DS={addListener:oR,removeListener:sR,_restoreConsole:aR},lR=null,cR=["a","button","input","select","textarea","label","video","audio",'[contenteditable="true" i]',"[data-amp-default-track]",".amp-default-track"],zT="data-amp-track-",uR=["div","span","h1","h2","h3","h4","h5","h6"],dR=["a","button",'[role="button"]','[role="link"]','[role="menuitem"]','[role="menuitemcheckbox"]','[role="menuitemradio"]','[role="option"]','[role="tab"]','[role="treeitem"]','[contenteditable="true" i]'],IT=yt(['input[type="button"]','input[type="submit"]','input[type="reset"]','input[type="image"]','input[type="file"]'],ze(dR),!1),fR=IT,hR=IT,pR=["*"],mR=1e3,gR=4,vR=50;function yR(t){return typeof t=="string"||typeof t=="number"||typeof t=="boolean"||t===null||t===void 0}function BT(t,e,n){if(t){var r=e.map(LS),o=n.map(LS);PT({json:t,allowlist:r,excludelist:o,ancestors:[]})}}function PT(t){var e,n,r=t.json,o=t.targetObject,s=t.allowlist,l=t.excludelist,u=t.ancestors,d=t.parentObject,h=t.targetKey;o||(o=r);var p=Object.keys(o);try{for(var g=Ze(p),y=g.next();!y.done;y=g.next()){var x=y.value,S=yt(yt([],ze(u),!1),[x],!1);yR(o[x])?(!zS(S,s)||zS(S,l))&&delete o[x]:PT({json:r,targetObject:o[x],allowlist:s,excludelist:l,ancestors:S,parentObject:o,targetKey:x})}}catch(E){e={error:E}}finally{try{y&&!y.done&&(n=g.return)&&n.call(g)}finally{if(e)throw e.error}}Object.keys(o).length===0&&d&&h&&delete d[h]}function LS(t){return t.startsWith("/")&&(t=t.slice(1)),t.split("/").map(function(e){return e.replace(/~0/g,"~").replace(/~1/g,"/")})}function xv(t,e,n,r){if(n===void 0&&(n=0),r===void 0&&(r=0),r===e.length)return n===t.length;if(n===t.length){for(;r<e.length&&e[r]==="**";)r++;return r===e.length}var o=e[r];if(o==="**"){if(r+1===e.length)return!0;for(var s=n;s<=t.length;s++)if(xv(t,e,s,r+1))return!0;return!1}else return o==="*"||o===t[n]?xv(t,e,n+1,r+1):!1}function zS(t,e){return e.some(function(n){return xv(t,n)})}var bR=500,UT=100,xR=(function(){function t(e){this.request=e}return t.prototype.headers=function(e){var n,r;e===void 0&&(e=[]);var o=this.request.headers,s={};if(Array.isArray(o))o.forEach(function(g){var y=ze(g,2),x=y[0],S=y[1];s[x]=S});else if(o instanceof Headers)o.forEach(function(g,y){s[y]=g});else if(typeof o=="object"&&o!==null)try{for(var l=Ze(Object.entries(o)),u=l.next();!u.done;u=l.next()){var d=ze(u.value,2),h=d[0],p=d[1];s[h]=p}}catch(g){n={error:g}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}return Ph(s,{allow:e})},Object.defineProperty(t.prototype,"bodySize",{get:function(){if(typeof this._bodySize=="number")return this._bodySize;var e=Ot();if(e?.TextEncoder){var n=this.request.body;return this._bodySize=HT(n,UT),this._bodySize}},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"method",{get:function(){return this.request.method},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"body",{get:function(){return typeof this.request.body=="string"?this.request.body:null},enumerable:!1,configurable:!0}),t.prototype.json=function(e,n){return e===void 0&&(e=[]),n===void 0&&(n=[]),ie(this,void 0,void 0,function(){var r;return re(this,function(o){return e.length===0?[2,null]:(r=this.body,[2,m0(r,e,n)])})})},t})(),SR=(function(){function t(e,n){this.bodyRaw=e,this.requestHeaders=n}return t.prototype.headers=function(e){return e===void 0&&(e=[]),Ph(this.requestHeaders,{allow:e})},Object.defineProperty(t.prototype,"bodySize",{get:function(){return HT(this.bodyRaw,UT)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"body",{get:function(){return typeof this.bodyRaw=="string"?this.bodyRaw:null},enumerable:!1,configurable:!0}),t.prototype.json=function(e,n){return e===void 0&&(e=[]),n===void 0&&(n=[]),ie(this,void 0,void 0,function(){var r;return re(this,function(o){return e.length===0?[2,null]:(r=this.body,[2,m0(r,e,n)])})})},t})();function HT(t,e){var n,r,o,s=Ot(),l=s?.TextEncoder;if(l){var u;if(typeof t=="string")u=t,o=new l().encode(u).length;else if(t instanceof Blob)u=t,o=u.size;else if(t instanceof URLSearchParams)u=t,o=new l().encode(u.toString()).length;else if(ArrayBuffer.isView(t))u=t,o=u.byteLength;else if(t instanceof ArrayBuffer)u=t,o=u.byteLength;else if(t instanceof FormData){var d=t,h=0,p=0;try{for(var g=Ze(d.entries()),y=g.next();!y.done;y=g.next()){var x=ze(y.value,2),S=x[0],E=x[1];if(h+=S.length,typeof E=="string")h+=new l().encode(E).length;else if(E instanceof Blob)h+=E.size;else return;if(++p>=e)return}}catch(k){n={error:k}}finally{try{y&&!y.done&&(r=g.return)&&r.call(g)}finally{if(n)throw n.error}}o=h}else if(t instanceof ReadableStream){u=t;return}return o}}var ER=(function(){function t(e){this.response=e}return t.prototype.headers=function(e){var n;if(e===void 0&&(e=[]),this.response.headers instanceof Headers){var r=this.response.headers,o={};return(n=r?.forEach)===null||n===void 0||n.call(r,function(s,l){o[l]=s}),Ph(o,{allow:e})}},Object.defineProperty(t.prototype,"bodySize",{get:function(){var e,n;if(this._bodySize!==void 0)return this._bodySize;var r=(n=(e=this.response.headers)===null||e===void 0?void 0:e.get)===null||n===void 0?void 0:n.call(e,"content-length"),o=r?parseInt(r,10):void 0;return this._bodySize=o,o},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"status",{get:function(){return this.response.status},enumerable:!1,configurable:!0}),t.prototype.text=function(){return ie(this,void 0,void 0,function(){var e,n,r;return re(this,function(o){switch(o.label){case 0:this.clonedResponse||(this.clonedResponse=this.response.clone()),o.label=1;case 1:return o.trys.push([1,3,,4]),e=this.clonedResponse.text(),n=new Promise(function(s){return setTimeout(function(){return s(null)},bR)}),[4,Promise.race([e,n])];case 2:return r=o.sent(),[2,r];case 3:return o.sent(),[2,null];case 4:return[2]}})})},t.prototype.json=function(e,n){return e===void 0&&(e=[]),n===void 0&&(n=[]),ie(this,void 0,void 0,function(){var r;return re(this,function(o){switch(o.label){case 0:return e.length===0?[2,null]:[4,this.text()];case 1:return r=o.sent(),[2,m0(r,e,n)]}})})},t})(),kR=(function(){function t(e,n,r,o){this.statusCode=e,this.headersString=n,this.size=r,this.getJson=o}return Object.defineProperty(t.prototype,"bodySize",{get:function(){return this.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"status",{get:function(){return this.statusCode},enumerable:!1,configurable:!0}),t.prototype.headers=function(e){var n,r;if(e===void 0&&(e=[]),!this.headersString)return{};var o={},s=this.headersString.split(`\r
`);try{for(var l=Ze(s),u=l.next();!u.done;u=l.next()){var d=u.value,h=ze(d.split(": "),2),p=h[0],g=h[1];p&&g&&(o[p]=g)}}catch(y){n={error:y}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(n)throw n.error}}return Ph(o,{allow:e})},t.prototype.json=function(e,n){return e===void 0&&(e=[]),n===void 0&&(n=[]),ie(this,void 0,void 0,function(){var r;return re(this,function(o){return e.length===0?[2,null]:(r=this.getJson(),r?(BT(r,e,n),[2,r]):[2,null])})})},t})();function m0(t,e,n){if(!t)return null;try{var r=JSON.parse(t);return BT(r,e,n),r}catch{return null}}var Xc;(function(t){t.REDACT="redact",t.REMOVE="remove"})(Xc||(Xc={}));var IS="[REDACTED]",Ph=function(t,e){var n,r,o=e.allow,s=o===void 0?[]:o,l=e.strategy,u=l===void 0?Xc.REMOVE:l,d=yt([],ze(Xj),!1),h={},p=function(S){var E=S.toLowerCase();d.find(function(k){return k.toLowerCase()===E})?u===Xc.REDACT&&(h[S]=IS):s.find(function(k){return k.toLowerCase()===E})?h[S]=t[S]:u===Xc.REDACT&&(h[S]=IS)};try{for(var g=Ze(Object.keys(t)),y=g.next();!y.done;y=g.next()){var x=y.value;p(x)}}catch(S){n={error:S}}finally{try{y&&!y.done&&(r=g.return)&&r.call(g)}finally{if(n)throw n.error}}return h},TR=(function(){function t(e,n,r,o,s,l,u,d,h,p,g){u===void 0&&(u=0),this.type=e,this.method=n,this.timestamp=r,this.startTime=o,this.url=s,this.requestWrapper=l,this.status=u,this.duration=d,this.responseWrapper=h,this.error=p,this.endTime=g}return t.prototype.toSerializable=function(){var e,n,r,o,s={type:this.type,method:this.method,url:this.url,timestamp:this.timestamp,status:this.status,duration:this.duration,error:this.error,startTime:this.startTime,endTime:this.endTime,requestHeaders:(e=this.requestWrapper)===null||e===void 0?void 0:e.headers(yt([],ze(zf),!1)),requestBodySize:(n=this.requestWrapper)===null||n===void 0?void 0:n.bodySize,responseHeaders:(r=this.responseWrapper)===null||r===void 0?void 0:r.headers(yt([],ze(zf),!1)),responseBodySize:(o=this.responseWrapper)===null||o===void 0?void 0:o.bodySize};return Object.fromEntries(Object.entries(s).filter(function(l){var u=ze(l,2);u[0];var d=u[1];return d!==void 0}))},t})();function wR(t){return typeof t=="object"&&t!==null&&"url"in t&&"method"in t}var CR=(function(){function t(e,n){n===void 0&&(n=Ti()),this.callback=e,this.id=n}return t})(),AR=(function(){function t(e){this.eventCallbacks=new Map,this.isObserving=!1,this.logger=e;var n=Ot();t.isSupported()&&(this.globalScope=n)}return t.isSupported=function(){var e=Ot();return!!e&&!!e.fetch},t.prototype.subscribe=function(e,n){var r,o,s,l,u,d,h,p,g,y;if(this.logger||(this.logger=n),this.eventCallbacks.set(e.id,e),!this.isObserving){var x=(s=(o=(r=this.globalScope)===null||r===void 0?void 0:r.XMLHttpRequest)===null||o===void 0?void 0:o.prototype)===null||s===void 0?void 0:s.open,S=(d=(u=(l=this.globalScope)===null||l===void 0?void 0:l.XMLHttpRequest)===null||u===void 0?void 0:u.prototype)===null||d===void 0?void 0:d.send,E=(g=(p=(h=this.globalScope)===null||h===void 0?void 0:h.XMLHttpRequest)===null||p===void 0?void 0:p.prototype)===null||g===void 0?void 0:g.setRequestHeader;x&&S&&E&&this.observeXhr(x,S,E);var k=(y=this.globalScope)===null||y===void 0?void 0:y.fetch;k&&this.observeFetch(k),this.isObserving=!0}},t.prototype.unsubscribe=function(e){this.eventCallbacks.delete(e.id)},t.prototype.triggerEventCallbacks=function(e){var n=this;this.eventCallbacks.forEach(function(r){var o;try{r.callback(e)}catch(s){(o=n.logger)===null||o===void 0||o.debug("an unexpected error occurred while triggering event callbacks",s)}})},t.prototype.handleNetworkRequestEvent=function(e,n,r,o,s,l,u){var d;if(!(l===void 0||u===void 0)){var h,p="GET";if(wR(n)?(h=n.url,p=n.method):h=(d=n?.toString)===null||d===void 0?void 0:d.call(n),h)try{var g=new URL(h);h="".concat(g.protocol,"//").concat(g.host).concat(g.pathname).concat(g.search).concat(g.hash)}catch{}p=r?.method||p;var y,x;o&&(y=o.status),s&&(x={name:s.name||"UnknownError",message:s.message||"An unknown error occurred"},y=0);var S=Math.floor(performance.now()-u),E=Math.floor(l+S),k=new TR(e,p,l,l,h,r,y,S,o,x,E);this.triggerEventCallbacks(k)}},t.prototype.getTimestamps=function(){var e,n;return{startTime:(e=Date.now)===null||e===void 0?void 0:e.call(Date),durationStart:(n=performance?.now)===null||n===void 0?void 0:n.call(performance)}},t.prototype.observeFetch=function(e){var n=this;!this.globalScope||!e||(this.globalScope.fetch=function(r,o){return ie(n,void 0,void 0,function(){var s,l,u,d,h,p;return re(this,function(g){switch(g.label){case 0:try{s=this.getTimestamps()}catch(y){(h=this.logger)===null||h===void 0||h.debug("an unexpected error occurred while retrieving timestamps",y)}g.label=1;case 1:return g.trys.push([1,3,,4]),[4,e(r,o)];case 2:return l=g.sent(),[3,4];case 3:return d=g.sent(),u=d,[3,4];case 4:try{this.handleNetworkRequestEvent("fetch",r,o?new xR(o):void 0,l?new ER(l):void 0,u,s?.startTime,s?.durationStart)}catch(y){(p=this.logger)===null||p===void 0||p.debug("an unexpected error occurred while handling fetch",y)}if(l)return[2,l];throw u}})})})},t.createXhrJsonParser=function(e,n){return function(){var r,o;try{if(e.responseType==="json"){if(!((r=n.globalScope)===null||r===void 0)&&r.structuredClone)return n.globalScope.structuredClone(e.response)}else if(["text",""].includes(e.responseType))return JSON.parse(e.responseText)}catch(s){return s instanceof Error&&s.name==="InvalidStateError"&&((o=n.logger)===null||o===void 0||o.error("unexpected error when retrieving responseText. responseType='".concat(e.responseType,"'"))),null}return null}},t.prototype.observeXhr=function(e,n,r){if(!(!this.globalScope||!e||!n)){var o=this.globalScope.XMLHttpRequest.prototype,s=this;o.open=function(){for(var l,u,d=[],h=0;h<arguments.length;h++)d[h]=arguments[h];var p=this,g=ze(d,2),y=g[0],x=g[1];try{p.$$AmplitudeAnalyticsEvent=de({method:y,url:(l=x?.toString)===null||l===void 0?void 0:l.call(x),headers:{}},s.getTimestamps())}catch(S){(u=s.logger)===null||u===void 0||u.error("an unexpected error occurred while calling xhr open",S)}return e.apply(p,d)},o.send=function(){for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];var d=this,h=d,p=t.createXhrJsonParser(d,s),g=l[0],y=h.$$AmplitudeAnalyticsEvent;return h.addEventListener("loadend",function(){var x;try{var S=h.getAllResponseHeaders(),E=h.getResponseHeader("content-length"),k=new kR(h.status,S,E?parseInt(E,10):void 0,p),w=h.$$AmplitudeAnalyticsEvent.headers,C=new SR(g,w);y.status=h.status,s.handleNetworkRequestEvent("xhr",{url:y.url,method:y.method},C,k,void 0,y.startTime,y.durationStart)}catch(_){(x=s.logger)===null||x===void 0||x.error("an unexpected error occurred while handling xhr send",_)}}),n.apply(h,l)},o.setRequestHeader=function(l,u){var d,h=this;try{h.$$AmplitudeAnalyticsEvent.headers[l]=u}catch(p){(d=s.logger)===null||d===void 0||d.error("an unexpected error occurred while calling xhr setRequestHeader",p)}r.apply(h,[l,u])}}},t})(),BS=new AR,qT=(function(){function t(){}return t.prototype.parse=function(){return ie(this,void 0,void 0,function(){return re(this,function(e){return[2,de(de(de(de({},Bh),this.getUtmParam()),this.getReferrer()),this.getClickIds())]})})},t.prototype.getUtmParam=function(){var e=Bf(),n=e[Fj],r=e[Wj],o=e[Gj],s=e[$j],l=e[Kj],u=e[Yj];return{utm_campaign:n,utm_content:r,utm_id:o,utm_medium:s,utm_source:l,utm_term:u}},t.prototype.getReferrer=function(){var e,n,r={referrer:void 0,referring_domain:void 0};try{r.referrer=document.referrer||void 0,r.referring_domain=(n=(e=r.referrer)===null||e===void 0?void 0:e.split("/")[2])!==null&&n!==void 0?n:void 0}catch{}return r},t.prototype.getClickIds=function(){var e,n=Bf();return e={},e[mS]=n[mS],e[gS]=n[gS],e[vS]=n[vS],e[yS]=n[yS],e[bS]=n[bS],e[xS]=n[xS],e[SS]=n[SS],e[ES]=n[ES],e[kS]=n[kS],e[TS]=n[TS],e[wS]=n[wS],e},t})(),Jc="data-amp-mask",ns="*****",_R=/\b(?:\d[ -]*?){13,16}\b/,MR=/(\d{3}-?\d{2}-?\d{4})/g,OR=/[^\s@]+@[^\s@.]+\.[^\s@]+/g,g0=function(t,e){var n,r;if(e===void 0&&(e=[]),typeof t!="string")return"";var o=t;o=o.replace(_R,ns),o=o.replace(MR,ns),o=o.replace(OR,ns);try{for(var s=Ze(e),l=s.next();!l.done;l=s.next()){var u=l.value;try{o=o.replace(u,ns)}catch{}}}catch(d){n={error:d}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return o},v0=function(t){if(typeof document>"u"||!document.title)return"";var e=document.querySelector("title");return e&&e.hasAttribute(Jc)?ns:t?t(document.title):document.title};function jR(t,e){var n=typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=RR(t))||e){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RR(t,e){if(t){if(typeof t=="string")return PS(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PS(t,e)}}function PS(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function US(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function y0(t,e,n){return e&&US(t.prototype,e),n&&US(t,n),t}var b0=function(){return typeof Symbol=="function"},x0=function(t){return b0()&&!!Symbol[t]},S0=function(t){return x0(t)?Symbol[t]:"@@"+t};b0()&&!x0("observable")&&(Symbol.observable=Symbol("observable"));var NR=S0("iterator"),Sv=S0("observable"),VT=S0("species");function Uf(t,e){var n=t[e];if(n!=null){if(typeof n!="function")throw new TypeError(n+" is not a function");return n}}function Dc(t){var e=t.constructor;return e!==void 0&&(e=e[VT],e===null&&(e=void 0)),e!==void 0?e:Vn}function DR(t){return t instanceof Vn}function kl(t){kl.log?kl.log(t):setTimeout(function(){throw t})}function Tf(t){Promise.resolve().then(function(){try{t()}catch(e){kl(e)}})}function FT(t){var e=t._cleanup;if(e!==void 0&&(t._cleanup=void 0,!!e))try{if(typeof e=="function")e();else{var n=Uf(e,"unsubscribe");n&&n.call(e)}}catch(r){kl(r)}}function Ev(t){t._observer=void 0,t._queue=void 0,t._state="closed"}function LR(t){var e=t._queue;if(e){t._queue=void 0,t._state="ready";for(var n=0;n<e.length&&(WT(t,e[n].type,e[n].value),t._state!=="closed");++n);}}function WT(t,e,n){t._state="running";var r=t._observer;try{var o=Uf(r,e);switch(e){case"next":o&&o.call(r,n);break;case"error":if(Ev(t),o)o.call(r,n);else throw n;break;case"complete":Ev(t),o&&o.call(r);break}}catch(s){kl(s)}t._state==="closed"?FT(t):t._state==="running"&&(t._state="ready")}function gg(t,e,n){if(t._state!=="closed"){if(t._state==="buffering"){t._queue.push({type:e,value:n});return}if(t._state!=="ready"){t._state="buffering",t._queue=[{type:e,value:n}],Tf(function(){return LR(t)});return}WT(t,e,n)}}var zR=(function(){function t(n,r){this._cleanup=void 0,this._observer=n,this._queue=void 0,this._state="initializing";var o=new IR(this);try{this._cleanup=r.call(void 0,o)}catch(s){o.error(s)}this._state==="initializing"&&(this._state="ready")}var e=t.prototype;return e.unsubscribe=function(){this._state!=="closed"&&(Ev(this),FT(this))},y0(t,[{key:"closed",get:function(){return this._state==="closed"}}]),t})(),IR=(function(){function t(n){this._subscription=n}var e=t.prototype;return e.next=function(r){gg(this._subscription,"next",r)},e.error=function(r){gg(this._subscription,"error",r)},e.complete=function(){gg(this._subscription,"complete")},y0(t,[{key:"closed",get:function(){return this._subscription._state==="closed"}}]),t})(),Vn=(function(){function t(n){if(!(this instanceof t))throw new TypeError("Observable cannot be called as a function");if(typeof n!="function")throw new TypeError("Observable initializer must be a function");this._subscriber=n}var e=t.prototype;return e.subscribe=function(r){return(typeof r!="object"||r===null)&&(r={next:r,error:arguments[1],complete:arguments[2]}),new zR(r,this._subscriber)},e.forEach=function(r){var o=this;return new Promise(function(s,l){if(typeof r!="function"){l(new TypeError(r+" is not a function"));return}function u(){d.unsubscribe(),s()}var d=o.subscribe({next:function(h){try{r(h,u)}catch(p){l(p),d.unsubscribe()}},error:l,complete:s})})},e.map=function(r){var o=this;if(typeof r!="function")throw new TypeError(r+" is not a function");var s=Dc(this);return new s(function(l){return o.subscribe({next:function(u){try{u=r(u)}catch(d){return l.error(d)}l.next(u)},error:function(u){l.error(u)},complete:function(){l.complete()}})})},e.filter=function(r){var o=this;if(typeof r!="function")throw new TypeError(r+" is not a function");var s=Dc(this);return new s(function(l){return o.subscribe({next:function(u){try{if(!r(u))return}catch(d){return l.error(d)}l.next(u)},error:function(u){l.error(u)},complete:function(){l.complete()}})})},e.reduce=function(r){var o=this;if(typeof r!="function")throw new TypeError(r+" is not a function");var s=Dc(this),l=arguments.length>1,u=!1,d=arguments[1],h=d;return new s(function(p){return o.subscribe({next:function(g){var y=!u;if(u=!0,!y||l)try{h=r(h,g)}catch(x){return p.error(x)}else h=g},error:function(g){p.error(g)},complete:function(){if(!u&&!l)return p.error(new TypeError("Cannot reduce an empty sequence"));p.next(h),p.complete()}})})},e.concat=function(){for(var r=this,o=arguments.length,s=new Array(o),l=0;l<o;l++)s[l]=arguments[l];var u=Dc(this);return new u(function(d){var h,p=0;function g(y){h=y.subscribe({next:function(x){d.next(x)},error:function(x){d.error(x)},complete:function(){p===s.length?(h=void 0,d.complete()):g(u.from(s[p++]))}})}return g(r),function(){h&&(h.unsubscribe(),h=void 0)}})},e.flatMap=function(r){var o=this;if(typeof r!="function")throw new TypeError(r+" is not a function");var s=Dc(this);return new s(function(l){var u=[],d=o.subscribe({next:function(p){if(r)try{p=r(p)}catch(y){return l.error(y)}var g=s.from(p).subscribe({next:function(y){l.next(y)},error:function(y){l.error(y)},complete:function(){var y=u.indexOf(g);y>=0&&u.splice(y,1),h()}});u.push(g)},error:function(p){l.error(p)},complete:function(){h()}});function h(){d.closed&&u.length===0&&l.complete()}return function(){u.forEach(function(p){return p.unsubscribe()}),d.unsubscribe()}})},e[Sv]=function(){return this},t.from=function(r){var o=typeof this=="function"?this:t;if(r==null)throw new TypeError(r+" is not an object");var s=Uf(r,Sv);if(s){var l=s.call(r);if(Object(l)!==l)throw new TypeError(l+" is not an object");return DR(l)&&l.constructor===o?l:new o(function(u){return l.subscribe(u)})}if(x0("iterator")&&(s=Uf(r,NR),s))return new o(function(u){Tf(function(){if(!u.closed){for(var d=jR(s.call(r)),h;!(h=d()).done;){var p=h.value;if(u.next(p),u.closed)return}u.complete()}})});if(Array.isArray(r))return new o(function(u){Tf(function(){if(!u.closed){for(var d=0;d<r.length;++d)if(u.next(r[d]),u.closed)return;u.complete()}})});throw new TypeError(r+" is not observable")},t.of=function(){for(var r=arguments.length,o=new Array(r),s=0;s<r;s++)o[s]=arguments[s];var l=typeof this=="function"?this:t;return new l(function(u){Tf(function(){if(!u.closed){for(var d=0;d<o.length;++d)if(u.next(o[d]),u.closed)return;u.complete()}})})},y0(t,null,[{key:VT,get:function(){return this}}]),t})();b0()&&Object.defineProperty(Vn,Symbol("extensions"),{value:{symbol:Sv,hostReportError:kl},configurable:!0});function E0(t,e){return new Vn(function(n){t.subscribe({next:function(r){e(r).then(function(o){return n.next(o)}).catch(function(o){return n.error(o)})},error:function(r){n.error(r)},complete:function(){n.complete()}})})}function sa(t,e){return new Vn(function(n){var r=!1,o=new Set,s=function(){var u,d;r=!0;try{for(var h=Ze(o),p=h.next();!p.done;p=h.next()){var g=p.value;try{g.unsubscribe()}catch{}}}catch(y){u={error:y}}finally{try{p&&!p.done&&(d=h.return)&&d.call(h)}finally{if(u)throw u.error}}o.clear()},l=function(u){var d=u.subscribe({next:function(h){r||n.next(h)},error:function(h){r||(r=!0,n.error(h),s())},complete:function(){o.delete(d),!r&&o.size===0&&(n.complete(),s(),r=!0)}});o.add(d)};return l(t),l(e),s})}function Zi(t){var e=new Set,n=null;function r(){n?.unsubscribe(),n=null,e.clear()}return new Vn(function(o){return e.add(o),n===null&&(n=t.subscribe({next:function(s){var l,u,d;try{for(var h=Ze(e),p=h.next();!p.done;p=h.next()){var g=p.value;(d=g.next)===null||d===void 0||d.call(g,s)}}catch(y){l={error:y}}finally{try{p&&!p.done&&(u=h.return)&&u.call(h)}finally{if(l)throw l.error}}},error:function(s){var l,u,d;try{for(var h=Ze(e),p=h.next();!p.done;p=h.next()){var g=p.value;(d=g.error)===null||d===void 0||d.call(g,s)}}catch(y){l={error:y}}finally{try{p&&!p.done&&(u=h.return)&&u.call(h)}finally{if(l)throw l.error}}r()},complete:function(){var s,l,u;try{for(var d=Ze(e),h=d.next();!h.done;h=d.next()){var p=h.value;(u=p.complete)===null||u===void 0||u.call(p)}}catch(g){s={error:g}}finally{try{h&&!h.done&&(l=d.return)&&l.call(d)}finally{if(s)throw s.error}}r()}})),function(){e.delete(o),e.size===0&&n&&(n.unsubscribe(),n=null)}})}var Dl=function(t,e){return typeof t=="boolean"?t:t?.[e]!==!1},GT=function(t){return Dl(t,"attribution")},BR=function(t){return Dl(t,"fileDownloads")},$T=function(t){return Dl(t,"formInteractions")},KT=function(t){return Dl(t,"pageViews")},HS=function(t){return Dl(t,"sessions")},PR=function(t){return Dl(t,"pageUrlEnrichment")},YT=function(t){return typeof t=="boolean"?t:typeof t=="object"&&(t.networkTracking===!0||typeof t.networkTracking=="object")},XT=function(t){return typeof t=="boolean"?t:typeof t=="object"&&(t.elementInteractions===!0||typeof t.elementInteractions=="object")},UR=function(t){return typeof t=="boolean"?t:typeof t=="object"&&t.webVitals===!0},JT=function(t){return typeof t=="boolean"?t:typeof t=="object"&&(t.frustrationInteractions===!0||typeof t.frustrationInteractions=="object")},HR=function(t){if(XT(t.autocapture)&&typeof t.autocapture=="object"&&typeof t.autocapture.elementInteractions=="object")return t.autocapture.elementInteractions},qR=function(t){if(JT(t.autocapture)&&typeof t.autocapture=="object"&&typeof t.autocapture.frustrationInteractions=="object")return t.autocapture.frustrationInteractions},VR=function(t){var e;if(YT(t.autocapture)){var n=void 0;return typeof t.autocapture=="object"&&typeof t.autocapture.networkTracking=="object"?n=t.autocapture.networkTracking:t.networkTrackingOptions&&(n=t.networkTrackingOptions),de(de({},n),{captureRules:(e=n?.captureRules)===null||e===void 0?void 0:e.map(function(r){var o,s,l;if(!((o=r.urls)===null||o===void 0)&&o.length&&(!((s=r.hosts)===null||s===void 0)&&s.length)){var u=JSON.stringify(r.hosts),d=JSON.stringify(r.urls);return(l=t.loggerProvider)===null||l===void 0||l.warn("Found network capture rule with both urls='".concat(d,"' and hosts='").concat(u,"' set. ")+"Definition of urls takes precedence over hosts, so ignoring hosts."),de(de({},r),{hosts:void 0})}return r})})}},FR=function(t){var e=function(){return!1},n=void 0,r,o=t.pageCounter,s=KT(t.defaultTracking);return s&&(e=void 0,r=void 0,t.defaultTracking&&typeof t.defaultTracking=="object"&&t.defaultTracking.pageViews&&typeof t.defaultTracking.pageViews=="object"&&("trackOn"in t.defaultTracking.pageViews&&(e=t.defaultTracking.pageViews.trackOn),"trackHistoryChanges"in t.defaultTracking.pageViews&&(n=t.defaultTracking.pageViews.trackHistoryChanges),"eventType"in t.defaultTracking.pageViews&&t.defaultTracking.pageViews.eventType&&(r=t.defaultTracking.pageViews.eventType))),{trackOn:e,trackHistoryChanges:n,eventType:r,pageCounter:o}},WR=function(t){return GT(t.defaultTracking)&&t.defaultTracking&&typeof t.defaultTracking=="object"&&t.defaultTracking.attribution&&typeof t.defaultTracking.attribution=="object"?de({},t.defaultTracking.attribution):{}},GR=function(t){if($T(t.defaultTracking)&&t.defaultTracking&&typeof t.defaultTracking=="object"&&typeof t.defaultTracking.formInteractions=="object")return t.defaultTracking.formInteractions},vg=function(t,e){for(var n=0;n<e.length;n++){var r=e[n],o=r.name,s=r.args,l=r.resolve,u=t&&t[o];if(typeof u=="function"){var d=u.apply(t,s);typeof l=="function"&&l(d?.promise)}}return t},yg=function(t){var e=t;return e&&e._q!==void 0},k0="2.34.0",QT="amplitude-ts",$R="Web",KR="$remote",YR=(function(){function t(){this.name="@amplitude/plugin-context-browser",this.type="before",this.library="".concat(QT,"/").concat(k0),typeof navigator<"u"&&(this.userAgent=navigator.userAgent)}return t.prototype.setup=function(e){return this.config=e,Promise.resolve(void 0)},t.prototype.execute=function(e){var n,r;return ie(this,void 0,void 0,function(){var o,s,l,u;return re(this,function(d){return o=new Date().getTime(),s=(n=this.config.lastEventId)!==null&&n!==void 0?n:-1,l=(r=e.event_id)!==null&&r!==void 0?r:s+1,this.config.lastEventId=l,e.time||(this.config.lastEventTime=o),u=de(de(de(de(de(de(de(de({user_id:this.config.userId,device_id:this.config.deviceId,session_id:this.config.sessionId,time:o},this.config.appVersion&&{app_version:this.config.appVersion}),this.config.trackingOptions.platform&&{platform:$R}),this.config.trackingOptions.language&&{language:N3()}),this.config.trackingOptions.ipAddress&&{ip:KR}),{insert_id:Ti(),partner_id:this.config.partnerId,plan:this.config.plan}),this.config.ingestionMetadata&&{ingestion_metadata:{source_name:this.config.ingestionMetadata.sourceName,source_version:this.config.ingestionMetadata.sourceVersion}}),e),{event_id:l,library:this.library,user_agent:this.userAgent}),[2,u]})})},t})(),Jd=1e3,ZT=(function(t){ha(e,t);function e(n){var r=this,o,s,l;try{l=(o=Ot())===null||o===void 0?void 0:o.localStorage}catch(u){(s=n?.loggerProvider)===null||s===void 0||s.debug("Failed to access localStorage. error=".concat(JSON.stringify(u))),l=void 0}return r=t.call(this,l)||this,r.loggerProvider=n?.loggerProvider,r}return e.prototype.set=function(n,r){var o;return ie(this,void 0,void 0,function(){var s;return re(this,function(l){switch(l.label){case 0:return Array.isArray(r)&&r.length>Jd?(s=r.length-Jd,[4,t.prototype.set.call(this,n,r.slice(0,Jd))]):[3,2];case 1:return l.sent(),(o=this.loggerProvider)===null||o===void 0||o.error("Failed to save ".concat(s," events because the queue length exceeded ").concat(Jd,".")),[3,4];case 2:return[4,t.prototype.set.call(this,n,r)];case 3:l.sent(),l.label=4;case 4:return[2]}})})},e})(h0),XR=(function(t){ha(e,t);function e(){var n;return t.call(this,(n=Ot())===null||n===void 0?void 0:n.sessionStorage)||this}return e})(h0),JR=(function(t){ha(e,t);function e(n){n===void 0&&(n={});var r=t.call(this)||this;return r.state={done:4},r.customHeaders=n,r}return e.prototype.send=function(n,r){return ie(this,void 0,void 0,function(){var o=this;return re(this,function(s){return[2,new Promise(function(l,u){var d,h;typeof XMLHttpRequest>"u"&&u(new Error("XHRTransport is not supported."));var p=new XMLHttpRequest;p.open("POST",n,!0),p.onreadystatechange=function(){if(p.readyState===o.state.done){var w=p.responseText;try{l(o.buildResponse(JSON.parse(w)))}catch{l(o.buildResponse({code:p.status}))}}};var g=de({"Content-Type":"application/json",Accept:"*/*"},o.customHeaders);try{for(var y=Ze(Object.entries(g)),x=y.next();!x.done;x=y.next()){var S=ze(x.value,2),E=S[0],k=S[1];p.setRequestHeader(E,k)}}catch(w){d={error:w}}finally{try{x&&!x.done&&(h=y.return)&&h.call(y)}finally{if(d)throw d.error}}p.send(JSON.stringify(r))})]})})},e})(p0),QR=(function(t){ha(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.send=function(n,r){return ie(this,void 0,void 0,function(){var o=this;return re(this,function(s){return[2,new Promise(function(l,u){var d=Ot();if(!d?.navigator.sendBeacon)throw new Error("SendBeaconTransport is not supported");try{var h=JSON.stringify(r),p=d.navigator.sendBeacon(n,JSON.stringify(r));return l(p?o.buildResponse({code:200,events_ingested:r.events.length,payload_size_bytes:h.length,server_upload_time:Date.now()}):o.buildResponse({code:500}))}catch(g){u(g)}})]})})},e})(p0),ZR=function(t,e,n){return n===void 0&&(n=!0),ie(void 0,void 0,void 0,function(){var r,o,s,l,u,d,h,p,g;return re(this,function(y){switch(y.label){case 0:return r=R3(t),[4,e.getRaw(r)];case 1:return o=y.sent(),o?n?[4,e.remove(r)]:[3,3]:[2,{optOut:!1}];case 2:y.sent(),y.label=3;case 3:return s=ze(o.split("."),6),l=s[0],u=s[1],d=s[2],h=s[3],p=s[4],g=s[5],[2,{deviceId:l,userId:eN(u),sessionId:bg(h),lastEventId:bg(g),lastEventTime:bg(p),optOut:!!d}]}})})},bg=function(t){var e=parseInt(t,32);if(!isNaN(e))return e},eN=function(t){if(!(!atob||!escape||!t))try{return decodeURIComponent(escape(atob(t)))}catch{return}},ni="[Amplitude]",qS="".concat(ni," Form Started"),tN="".concat(ni," Form Submitted"),nN="".concat(ni," File Downloaded"),VS="session_start",FS="session_end",rN="".concat(ni," File Extension"),iN="".concat(ni," File Name"),oN="".concat(ni," Link ID"),sN="".concat(ni," Link Text"),aN="".concat(ni," Link URL"),xg="".concat(ni," Form ID"),Sg="".concat(ni," Form Name"),Eg="".concat(ni," Form Destination"),Hf="cookie",e2="US",lN=(function(t){ha(e,t);function e(n,r,o,s,l,u,d,h,p,g,y,x,S,E,k,w,C,_,R,j,z,B,K,W,J,Z,te,je,ke,me,H,ne,ce,Ce,ae,ve,fe,ue,We,Ue){o===void 0&&(o=new f0),s===void 0&&(s={domain:"",expiration:365,sameSite:"Lax",secure:!1,upgrade:!0}),h===void 0&&(h=1e3),p===void 0&&(p=5),g===void 0&&(g=30),y===void 0&&(y=Hf),w===void 0&&(w=new d0),C===void 0&&(C=xr.Warn),R===void 0&&(R=!1),j===void 0&&(j=!1),K===void 0&&(K=""),W===void 0&&(W=e2),Z===void 0&&(Z=1800*1e3),te===void 0&&(te=new ZT({loggerProvider:w})),je===void 0&&(je={ipAddress:!0,language:!0,platform:!0}),ke===void 0&&(ke="fetch"),me===void 0&&(me=!1),H===void 0&&(H=!0),fe===void 0&&(fe=!0),ue===void 0&&(ue=0);var se=this,dt;se=t.call(this,{apiKey:n,storageProvider:te,transportProvider:t2(ke)})||this,se.apiKey=n,se.appVersion=r,se.cookieOptions=s,se.defaultTracking=l,se.autocapture=u,se.flushIntervalMillis=h,se.flushMaxRetries=p,se.flushQueueSize=g,se.identityStorage=y,se.ingestionMetadata=x,se.instanceName=S,se.loggerProvider=w,se.logLevel=C,se.minIdLength=_,se.offline=R,se.partnerId=z,se.plan=B,se.serverUrl=K,se.serverZone=W,se.sessionTimeout=Z,se.storageProvider=te,se.trackingOptions=je,se.transport=ke,se.useBatch=me,se.fetchRemoteConfig=H,se.networkTrackingOptions=ae,se.identify=ve,se.enableDiagnostics=fe,se.diagnosticsSampleRate=ue,se.diagnosticsClient=We,se.remoteConfig=Ue,se.version=k0,se._optOut=!1,se._cookieStorage=o,se.deviceId=d,se.lastEventId=E,se.lastEventTime=k,se.optOut=j,se.sessionId=J,se.pageCounter=ce,se.userId=ne,se.debugLogsEnabled=Ce,se.loggerProvider.enable(Ce?xr.Debug:se.logLevel),se.networkTrackingOptions=ae,se.identify=ve,se.enableDiagnostics=fe,se.diagnosticsSampleRate=ue,se.diagnosticsClient=We;var mt=(dt=Ue?.fetchRemoteConfig)!==null&&dt!==void 0?dt:H;return se.remoteConfig=se.remoteConfig||{},se.remoteConfig.fetchRemoteConfig=mt,se.fetchRemoteConfig=mt,se}return Object.defineProperty(e.prototype,"cookieStorage",{get:function(){return this._cookieStorage},set:function(n){this._cookieStorage!==n&&(this._cookieStorage=n,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"deviceId",{get:function(){return this._deviceId},set:function(n){this._deviceId!==n&&(this._deviceId=n,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"userId",{get:function(){return this._userId},set:function(n){this._userId!==n&&(this._userId=n,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sessionId",{get:function(){return this._sessionId},set:function(n){this._sessionId!==n&&(this._sessionId=n,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"optOut",{get:function(){return this._optOut},set:function(n){this._optOut!==n&&(this._optOut=n,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastEventTime",{get:function(){return this._lastEventTime},set:function(n){this._lastEventTime!==n&&(this._lastEventTime=n,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastEventId",{get:function(){return this._lastEventId},set:function(n){this._lastEventId!==n&&(this._lastEventId=n,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pageCounter",{get:function(){return this._pageCounter},set:function(n){this._pageCounter!==n&&(this._pageCounter=n,this.updateStorage())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"debugLogsEnabled",{set:function(n){this._debugLogsEnabled!==n&&(this._debugLogsEnabled=n,this.updateStorage())},enumerable:!1,configurable:!0}),e.prototype.updateStorage=function(){var n={deviceId:this._deviceId,userId:this._userId,sessionId:this._sessionId,optOut:this._optOut,lastEventTime:this._lastEventTime,lastEventId:this._lastEventId,pageCounter:this._pageCounter,debugLogsEnabled:this._debugLogsEnabled,cookieDomain:void 0};this.cookieStorage instanceof Pf&&(n.cookieDomain=this.cookieStorage.options.domain),this.cookieStorage.set(NT(this.apiKey),n)},e})(m3),cN=function(t,e,n,r,o){return e===void 0&&(e={}),ie(void 0,void 0,void 0,function(){var s,l,u,d,h,p,g,y,x,S,E,k,w,C,_,R,j,z,B,K,W,J,Z,te,je,ke,me,H,ne,ce,Ce,ae,ve,fe,ue,We,Ue,se,dt,mt,wn,Wn,yn,Tr,wr,Ut,qr,Le,Be,gt;return re(this,function(Ht){switch(Ht.label){case 0:return s=e.identityStorage||Hf,J={},s===Hf?[3,1]:(u="",[3,5]);case 1:return(te=(Z=e.cookieOptions)===null||Z===void 0?void 0:Z.domain)!==null&&te!==void 0?(d=te,[3,4]):[3,2];case 2:return[4,fN()];case 3:d=Ht.sent(),Ht.label=4;case 4:u=d,Ht.label=5;case 5:return l=de.apply(void 0,[(J.domain=u,J.expiration=365,J.sameSite="Lax",J.secure=!1,J.upgrade=!0,J),e.cookieOptions]),h={duplicateResolverFn:function(Cn){var zn=DT(Cn);if(!zn)return!1;var In=JSON.parse(zn);return LT(In.cookieDomain,l.domain)},diagnosticsClient:r},p=uN(e.identityStorage,l,h),[4,ZR(t,p,(ke=(je=e.cookieOptions)===null||je===void 0?void 0:je.upgrade)!==null&&ke!==void 0?ke:!0)];case 6:return g=Ht.sent(),[4,p.get(NT(t))];case 7:return y=Ht.sent(),x=Bf(),S=x.ampTimestamp?Number(x.ampTimestamp):void 0,E=S?Date.now()<S:!0,k=(Ce=(ce=(ne=(me=e.deviceId)!==null&&me!==void 0?me:E?(H=x.ampDeviceId)!==null&&H!==void 0?H:x.deviceId:void 0)!==null&&ne!==void 0?ne:y?.deviceId)!==null&&ce!==void 0?ce:g.deviceId)!==null&&Ce!==void 0?Ce:Ti(),w=(ae=y?.lastEventId)!==null&&ae!==void 0?ae:g.lastEventId,C=(ve=y?.lastEventTime)!==null&&ve!==void 0?ve:g.lastEventTime,_=(ue=(fe=e.optOut)!==null&&fe!==void 0?fe:y?.optOut)!==null&&ue!==void 0?ue:g.optOut,R=(We=y?.sessionId)!==null&&We!==void 0?We:g.sessionId,j=(se=(Ue=e.userId)!==null&&Ue!==void 0?Ue:y?.userId)!==null&&se!==void 0?se:g.userId,n.previousSessionDeviceId=(dt=y?.deviceId)!==null&&dt!==void 0?dt:g.deviceId,n.previousSessionUserId=(mt=y?.userId)!==null&&mt!==void 0?mt:g.userId,z={ipAddress:(Wn=(wn=e.trackingOptions)===null||wn===void 0?void 0:wn.ipAddress)!==null&&Wn!==void 0?Wn:!0,language:(Tr=(yn=e.trackingOptions)===null||yn===void 0?void 0:yn.language)!==null&&Tr!==void 0?Tr:!0,platform:(Ut=(wr=e.trackingOptions)===null||wr===void 0?void 0:wr.platform)!==null&&Ut!==void 0?Ut:!0},B=y?.pageCounter,K=y?.debugLogsEnabled,e.autocapture!==void 0&&(e.defaultTracking=e.autocapture),W=new lN(t,e.appVersion,p,l,e.defaultTracking,e.autocapture,k,e.flushIntervalMillis,e.flushMaxRetries,e.flushQueueSize,s,e.ingestionMetadata,e.instanceName,w,C,(qr=o?.loggerProvider)!==null&&qr!==void 0?qr:e.loggerProvider,e.logLevel,e.minIdLength,e.offline,_,e.partnerId,e.plan,e.serverUrl,(Le=o?.serverZone)!==null&&Le!==void 0?Le:e.serverZone,R,e.sessionTimeout,e.storageProvider,z,e.transport,e.useBatch,e.fetchRemoteConfig,j,B,K,e.networkTrackingOptions,e.identify,(Be=o?.enableDiagnostics)!==null&&Be!==void 0?Be:e.enableDiagnostics,(gt=o?.diagnosticsSampleRate)!==null&&gt!==void 0?gt:n._diagnosticsSampleRate,r,e.remoteConfig),[4,W.storageProvider.isEnabled()];case 8:return Ht.sent()||(W.loggerProvider.warn("Storage provider ".concat(W.storageProvider.constructor.name," is not enabled. Falling back to MemoryStorage.")),W.storageProvider=new f0),[2,W]}})})},uN=function(t,e,n){switch(t===void 0&&(t=Hf),e===void 0&&(e={}),t){case"localStorage":return new ZT;case"sessionStorage":return new XR;case"none":return new f0;case"cookie":default:return new Pf(de(de({},e),{expirationDays:e.expiration}),n)}},dN=function(t){var e,n;return t===void 0&&(t={}),((e=t.remoteConfig)===null||e===void 0?void 0:e.fetchRemoteConfig)===!0?!0:!(((n=t.remoteConfig)===null||n===void 0?void 0:n.fetchRemoteConfig)===!1||t.fetchRemoteConfig===!1)},t2=function(t){var e=typeof t=="object"?t.type:t,n=typeof t=="object"?t.headers:void 0;return e==="xhr"?new JR(n):e==="beacon"?new QR:new X3(n)},fN=function(t){return ie(void 0,void 0,void 0,function(){var e,n,r,o,s,l,l,u,d,h,p;return re(this,function(g){switch(g.label){case 0:return[4,new Pf().isEnabled()];case 1:if(!g.sent()||typeof location>"u"||!location.hostname)return[2,""];for(e=location.hostname,n=e.split("."),r=[],o=Ti(),s="AMP_TLDTEST_".concat(o.substring(0,8)),l=n.length-2;l>=0;--l)r.push(n.slice(l).join("."));l=0,g.label=2;case 2:return l<r.length?(u=r[l],d={domain:"."+u,expirationDays:.003},h=new Pf(d),[4,h.set(s,1)]):[3,7];case 3:return g.sent(),[4,h.get(s)];case 4:return p=g.sent(),p?[4,h.remove(s)]:[3,6];case 5:return g.sent(),[2,"."+u];case 6:return l++,[3,2];case 7:return[2,""]}})})},hN=function(t){var e={};for(var n in t){var r=t[n];r&&(e[n]=r)}return e},pN="[Amplitude] Page Viewed",mN=function(t){t===void 0&&(t={});var e,n=Ot(),r=void 0,o=!1,s,l=t.trackOn,u=t.trackHistoryChanges,d=t.eventType,h=d===void 0?pN:d,p=function(w){var C=w;try{C=decodeURI(w)}catch(_){r?.error("Malformed URI sequence: ",_)}return C},g=function(){return ie(void 0,void 0,void 0,function(){var w,C,_;return re(this,function(R){switch(R.label){case 0:return w=p(typeof location<"u"&&location.href||""),_={event_type:h},C=[{}],[4,gN()];case 1:return[2,(_.event_properties=de.apply(void 0,[de.apply(void 0,C.concat([R.sent()])),{"[Amplitude] Page Domain":typeof location<"u"&&location.hostname||"","[Amplitude] Page Location":w,"[Amplitude] Page Path":typeof location<"u"&&p(location.pathname)||"","[Amplitude] Page Title":v0(g0),"[Amplitude] Page URL":w.split("?")[0]}]),_)]}})})},y=function(){return typeof l>"u"||typeof l=="function"&&l()},x=typeof location<"u"?location.href:null,S=function(){return ie(void 0,void 0,void 0,function(){var w,C,_,R;return re(this,function(j){switch(j.label){case 0:return w=location.href,C=yN(u,w,x||"")&&y(),x=w,C?(r?.log("Tracking page view event"),e!=null?[3,1]:[3,3]):[3,4];case 1:return R=(_=e).track,[4,g()];case 2:R.apply(_,[j.sent()]),j.label=3;case 3:j.label=4;case 4:return[2]}})})},E=function(){S()},k={name:"@amplitude/plugin-page-view-tracking-browser",type:"enrichment",setup:function(w,C){return ie(void 0,void 0,void 0,function(){var _,R;return re(this,function(j){switch(j.label){case 0:return e=C,s=w,r=w.loggerProvider,r.log("Installing @amplitude/plugin-page-view-tracking-browser"),o=!0,n&&(n.addEventListener("popstate",E),n.history.pushState=new Proxy(n.history.pushState,{apply:function(z,B,K){var W=ze(K,3),J=W[0],Z=W[1],te=W[2];z.apply(B,[J,Z,te]),o&&S()}})),y()?(r.log("Tracking page view event"),R=(_=e).track,[4,g()]):[3,2];case 1:R.apply(_,[j.sent()]),j.label=2;case 2:return[2]}})})},execute:function(w){return ie(void 0,void 0,void 0,function(){var C;return re(this,function(_){switch(_.label){case 0:return l==="attribution"&&vN(w)?(r?.log("Enriching campaign event to page view event with campaign parameters"),[4,g()]):[3,2];case 1:C=_.sent(),w.event_type=C.event_type,w.event_properties=de(de({},w.event_properties),C.event_properties),_.label=2;case 2:return s&&w.event_type===h&&(s.pageCounter=s.pageCounter?s.pageCounter+1:1,w.event_properties=de(de({},w.event_properties),{"[Amplitude] Page Counter":s.pageCounter})),[2,w]}})})},teardown:function(){return ie(void 0,void 0,void 0,function(){return re(this,function(w){return n&&(n.removeEventListener("popstate",E),o=!1),[2]})})}};return k},gN=function(){return ie(void 0,void 0,void 0,function(){var t;return re(this,function(e){switch(e.label){case 0:return t=hN,[4,new qT().parse()];case 1:return[2,t.apply(void 0,[e.sent()])]}})})},vN=function(t){if(t.event_type==="$identify"&&t.user_properties){var e=t.user_properties,n=e[es.SET]||{},r=e[es.UNSET]||{},o=yt(yt([],ze(Object.keys(n)),!1),ze(Object.keys(r)),!1);return Object.keys(Bh).every(function(s){return o.includes(s)})}return!1},yN=function(t,e,n){switch(t){case"pathOnly":{if(n=="")return!0;var r=new URL(e),o=new URL(n),s=r.origin+r.pathname,l=o.origin+o.pathname;return s!==l}default:return e!==n}},bN=function(){var t,e=[],n=function(p,g,y){p.addEventListener(g,y),e.push({element:p,type:g,handler:y})},r=function(){e.forEach(function(p){var g=p.element,y=p.type,x=p.handler;g?.removeEventListener(y,x)}),e=[]},o,s="@amplitude/plugin-form-interaction-tracking-browser",l="enrichment",u=function(p,g){return ie(void 0,void 0,void 0,function(){var y,x;return re(this,function(S){return o=GR(p),y=function(){if(!g){p.loggerProvider.warn("Form interaction tracking requires a later version of @amplitude/analytics-browser. Form interaction events are not tracked.");return}if(!(typeof document>"u")){var E=function(w){var C=!1;n(w,"change",function(){var _,R=WS(w);C||g.track(qS,(_={},_[xg]=sl(w.id),_[Sg]=sl(w.name),_[Eg]=R,_)),C=!0}),n(w,"submit",function(_){var R,j,z=WS(w);if(C||g.track(qS,(R={},R[xg]=sl(w.id),R[Sg]=sl(w.name),R[Eg]=z,R)),C=!0,o?.shouldTrackSubmit!==void 0)if(typeof o.shouldTrackSubmit=="function"&&typeof SubmitEvent<"u"&&_ instanceof SubmitEvent)try{var B=o.shouldTrackSubmit(_);if(!B)return}catch{p.loggerProvider.warn("shouldTrackSubmit callback threw an error, proceeding with tracking.")}else p.loggerProvider.warn("shouldTrackSubmit is ignored because it is not a function or event is not a SubmitEvent.");g.track(tN,(j={},j[xg]=sl(w.id),j[Sg]=sl(w.name),j[Eg]=z,j)),C=!1})},k=Array.from(document.getElementsByTagName("form"));k.forEach(E),typeof MutationObserver<"u"&&(t=new MutationObserver(function(w){w.forEach(function(C){C.addedNodes.forEach(function(_){_.nodeName==="FORM"&&E(_),"querySelectorAll"in _&&typeof _.querySelectorAll=="function"&&Array.from(_.querySelectorAll("form")).map(E)})})}),t.observe(document.body,{subtree:!0,childList:!0}))}},document.readyState==="complete"?y():(x=Ot(),x?x.addEventListener("load",y):p.loggerProvider.debug("Form interaction tracking is not installed because global is undefined.")),[2]})})},d=function(p){return ie(void 0,void 0,void 0,function(){return re(this,function(g){return[2,p]})})},h=function(){return ie(void 0,void 0,void 0,function(){return re(this,function(p){return t?.disconnect(),r(),[2]})})};return{name:s,type:l,setup:u,execute:d,teardown:h}},sl=function(t){if(typeof t=="string")return t},WS=function(t){var e=t.getAttribute("action");try{e=new URL(encodeURI(e??""),window.location.href).href}catch{}return e},xN=function(){var t,e=[],n=function(h,p,g){h.addEventListener(p,g),e.push({element:h,type:p,handler:g})},r=function(){e.forEach(function(h){var p=h.element,g=h.type,y=h.handler;p?.removeEventListener(g,y)}),e=[]},o="@amplitude/plugin-file-download-tracking-browser",s="enrichment",l=function(h,p){return ie(void 0,void 0,void 0,function(){var g,y;return re(this,function(x){return g=function(){if(!p){h.loggerProvider.warn("File download tracking requires a later version of @amplitude/analytics-browser. File download events are not tracked.");return}if(!(typeof document>"u")){var S=function(w){var C;try{C=new URL(w.href,window.location.href)}catch{return}var _=E.exec(C.href),R=_?.[1];R&&n(w,"click",function(){var j;R&&p.track(nN,(j={},j[rN]=R,j[iN]=C.pathname,j[oN]=w.id,j[sN]=w.text,j[aN]=w.href,j))})},E=/\.(pdf|xlsx?|docx?|txt|rtf|csv|exe|key|pp(s|t|tx)|7z|pkg|rar|gz|zip|avi|mov|mp4|mpe?g|wmv|midi?|mp3|wav|wma)(\?.+)?$/,k=Array.from(document.getElementsByTagName("a"));k.forEach(S),typeof MutationObserver<"u"&&(t=new MutationObserver(function(w){w.forEach(function(C){C.addedNodes.forEach(function(_){_.nodeName==="A"&&S(_),"querySelectorAll"in _&&typeof _.querySelectorAll=="function"&&Array.from(_.querySelectorAll("a")).map(S)})})}),t.observe(document.body,{subtree:!0,childList:!0}))}},document.readyState==="complete"?g():(y=Ot(),y?y.addEventListener("load",g):h.loggerProvider.debug("File download tracking is not installed because global is undefined.")),[2]})})},u=function(h){return ie(void 0,void 0,void 0,function(){return re(this,function(p){return[2,h]})})},d=function(){return ie(void 0,void 0,void 0,function(){return re(this,function(h){return t?.disconnect(),r(),[2]})})};return{name:o,type:s,setup:l,execute:u,teardown:d}},GS=!1,SN=function(t){if(!(GS||t.defaultTracking!==void 0)){var e=`\`options.defaultTracking\` is set to undefined. This implicitly configures your Amplitude instance to track Page Views, Sessions, File Downloads, and Form Interactions. You can suppress this warning by explicitly setting a value to \`options.defaultTracking\`. The value must either be a boolean, to enable and disable all default events, or an object, for advanced configuration. For example:

amplitude.init(<YOUR_API_KEY>, {
  defaultTracking: true,
});

Visit https://www.docs.developers.amplitude.com/data/sdks/browser-2/#tracking-default-events for more details.`;t.loggerProvider.warn(e),GS=!0}},EN=function(){var t="@amplitude/plugin-network-checker-browser",e="before",n=Ot(),r=[],o=function(d,h){n?.addEventListener&&(n?.addEventListener(d,h),r.push({type:d,handler:h}))},s=function(){r.forEach(function(d){var h=d.type,p=d.handler;n?.removeEventListener(h,p)}),r=[]},l=function(d,h){return ie(void 0,void 0,void 0,function(){return re(this,function(p){return typeof navigator>"u"?(d.loggerProvider.debug("Network connectivity checker plugin is disabled because navigator is not available."),d.offline=!1,[2]):(d.offline=!navigator.onLine,o("online",function(){d.loggerProvider.debug("Network connectivity changed to online."),d.offline=!1,setTimeout(function(){h.flush()},d.flushIntervalMillis)}),o("offline",function(){d.loggerProvider.debug("Network connectivity changed to offline."),d.offline=!0}),[2])})})},u=function(){return ie(void 0,void 0,void 0,function(){return re(this,function(d){return s(),[2]})})};return{name:t,type:e,setup:l,teardown:u}};function n2(t){var e,n,r,o,s,l,u,d,h,p,g;if(!(typeof t!="object"||t===null)&&!Array.isArray(t)){var y=Object.keys(t);try{for(var x=Ze(y),S=x.next();!S.done;S=x.next()){var E=S.value;try{var k=t[E];typeof k?.enabled=="boolean"&&(k.enabled?(delete k.enabled,Object.keys(k).length===0&&(t[E]=!0)):t[E]=!1),n2(k)}catch{}}}catch(Z){e={error:Z}}finally{try{S&&!S.done&&(n=x.return)&&n.call(x)}finally{if(e)throw e.error}}try{if(!((h=(d=(u=t.autocapture)===null||u===void 0?void 0:u.networkTracking)===null||d===void 0?void 0:d.captureRules)===null||h===void 0)&&h.length)try{for(var w=Ze(t.autocapture.networkTracking.captureRules),C=w.next();!C.done;C=w.next()){var _=C.value;try{for(var R=(s=void 0,Ze(["responseHeaders","requestHeaders"])),j=R.next();!j.done;j=R.next()){var z=j.value,B=(p=_[z])!==null&&p!==void 0?p:{},K=B.captureSafeHeaders,W=B.allowlist;if(!(!K&&!W)){if(W!==void 0&&!Array.isArray(W)){delete _[z];continue}_[z]=yt(yt([],ze(K?zf:[]),!1),ze(W??[]),!1)}}}catch(Z){s={error:Z}}finally{try{j&&!j.done&&(l=R.return)&&l.call(R)}finally{if(s)throw s.error}}}}catch(Z){r={error:Z}}finally{try{C&&!C.done&&(o=w.return)&&o.call(w)}finally{if(r)throw r.error}}}catch{}var J=(g=t.autocapture)===null||g===void 0?void 0:g.frustrationInteractions;J&&(J.rageClick&&(J.rageClicks=J.rageClick,delete J.rageClick),J.deadClick&&(J.deadClicks=J.deadClick,delete J.deadClick))}}function $S(t,e,n){var r,o,s=[];try{for(var l=Ze(e??[]),u=l.next();!u.done;u=l.next()){var d=u.value;try{s.push(new RegExp(d))}catch(h){n.loggerProvider.warn("Invalid regex pattern: ".concat(d),h)}}}catch(h){r={error:h}}finally{try{u&&!u.done&&(o=l.return)&&o.call(l)}finally{if(r)throw r.error}}return t.concat(s)}function kN(t,e){var n,r,o,s,l,u,d;if(t){n2(t);try{e.loggerProvider.debug("Update browser config with remote configuration:",JSON.stringify(t));var h=t;if(h&&"autocapture"in h){if(typeof h.autocapture=="boolean"&&(e.autocapture=h.autocapture),typeof h.autocapture=="object"&&h.autocapture!==null){var p=de({},h.autocapture);if(e.autocapture===void 0&&(e.autocapture=h.autocapture),typeof h.autocapture.elementInteractions=="object"&&h.autocapture.elementInteractions!==null&&(!((o=h.autocapture.elementInteractions.pageUrlAllowlistRegex)===null||o===void 0)&&o.length)){p.elementInteractions=de({},h.autocapture.elementInteractions);var g=p.elementInteractions,y=(s=g.pageUrlAllowlist)!==null&&s!==void 0?s:[],x=h.autocapture.elementInteractions.pageUrlAllowlistRegex;g.pageUrlAllowlist=$S(y,x,e),delete g.pageUrlAllowlistRegex}if(typeof h.autocapture.networkTracking=="object"&&h.autocapture.networkTracking!==null&&(!((l=h.autocapture.networkTracking.captureRules)===null||l===void 0)&&l.length)){p.networkTracking=de({},h.autocapture.networkTracking);var S=p.networkTracking,E=(u=S.captureRules)!==null&&u!==void 0?u:[];try{for(var k=Ze(E),w=k.next();!w.done;w=k.next()){var C=w.value;C.urls=$S((d=C.urls)!==null&&d!==void 0?d:[],C.urlsRegex,e),delete C.urlsRegex}}catch(_){n={error:_}}finally{try{w&&!w.done&&(r=k.return)&&r.call(k)}finally{if(n)throw n.error}}}typeof e.autocapture=="boolean"&&(e.autocapture=de({attribution:e.autocapture,fileDownloads:e.autocapture,formInteractions:e.autocapture,pageViews:e.autocapture,sessions:e.autocapture,elementInteractions:e.autocapture,webVitals:e.autocapture,frustrationInteractions:e.autocapture},p)),typeof e.autocapture=="object"&&(e.autocapture=de(de({},e.autocapture),p))}e.defaultTracking=e.autocapture}e.loggerProvider.debug("Browser config after remote config update:",JSON.stringify(e))}catch(_){e.loggerProvider.error("Failed to apply remote configuration because of error: ",_)}}}var r2="1.19.0",TN="@amplitude/plugin-autocapture-browser",wN="@amplitude/plugin-frustration-browser",i2="[Amplitude] Element Clicked",CN="[Amplitude] Dead Click",AN="[Amplitude] Rage Click",_N="[Amplitude] Error Click",MN="[Amplitude] Element Changed",ON="[Amplitude] Element ID",jN="[Amplitude] Element Class",KS="[Amplitude] Element Tag",YS="[Amplitude] Element Text",RN="[Amplitude] Element Hierarchy",NN="[Amplitude] Element Href",DN="[Amplitude] Element Position Left",LN="[Amplitude] Element Position Top",zN="[Amplitude] Element Aria Label",IN="[Amplitude] Element Attributes",BN="[Amplitude] Element Parent Label",XS="[Amplitude] Page URL",PN="[Amplitude] Page Title",UN="[Amplitude] Viewport Height",HN="[Amplitude] Viewport Width",wf="https://app.amplitude.com",qN="https://app.eu.amplitude.com",VN="https://apps.stag2.amplitude.com",FN={US:wf,EU:qN,STAGING:VN},WN="https://cdn.amplitude.com/libs/visual-tagging-selector-1.0.0-alpha.js.gz",GN="amp-visual-tagging-selector-highlight",o2="data-amp-mask-attributes",$N=25,s2=128,KN=["input","select","textarea"],a2=function(t,e){var n,r=(n=window?.getComputedStyle)===null||n===void 0?void 0:n.call(window,t);return r?.getPropertyValue("cursor")==="pointer"&&e==="click"},xl=function(t,e,n){return n===void 0&&(n=!1),function(r,o){var s,l,u=t.pageUrlAllowlist,d=t.pageUrlExcludelist,h=t.shouldTrackEventResolver,p=(l=(s=o?.tagName)===null||s===void 0?void 0:s.toLowerCase)===null||l===void 0?void 0:l.call(s);if(!p)return!1;if(h)return h(r,o);if(!bv(window.location.href,u)||d&&d.length>0&&bv(window.location.href,d))return!1;var g=String(o?.getAttribute("type"))||"";if(typeof g=="string")switch(g.toLowerCase()){case"hidden":return!1;case"password":return!1}var y=a2(o,r);if(n&&y)return!0;if(e){var x=e.some(function(S){var E;return!!(!((E=o?.matches)===null||E===void 0)&&E.call(o,S))});if(!x)return!1}switch(p){case"input":case"select":case"textarea":return r==="change"||r==="click";default:return y?!0:r==="click"}}},YN=function(t){var e,n,r,o=(n=(e=t?.tagName)===null||e===void 0?void 0:e.toLowerCase)===null||n===void 0?void 0:n.call(e),s=t instanceof HTMLElement?((r=t.getAttribute("contenteditable"))===null||r===void 0?void 0:r.toLowerCase())==="true":!1;return!KN.includes(o)&&!s},XN=function(t){return t?t.split(",").map(function(e){return e.trim()}).filter(function(e){return e.length>0&&e!=="id"&&e!=="class"}):[]},JN=function(t,e){return Object.entries(t).reduce(function(n,r){var o=ze(r,2),s=o[0],l=o[1];if(s.startsWith(e)){var u=s.replace(e,"");u&&(n[u]=l||"")}return n},{})},QN=function(t){return t==null||typeof t=="object"&&Object.keys(t).length===0||typeof t=="string"&&t.trim().length===0},JS=function(t){return Object.keys(t).reduce(function(e,n){var r=t[n];return QN(r)||(e[n]=r),e},{})},T0=function(t,e){return t?e.some(function(n){var r;return(r=t?.matches)===null||r===void 0?void 0:r.call(t,n)})?t:T0(t?.parentElement,e):null},ZN=function(t){return new Promise(function(e,n){var r;try{var o=document.createElement("script");o.type="text/javascript",o.async=!0,o.src=t,o.addEventListener("load",function(){e({status:!0})},{once:!0}),o.addEventListener("error",function(){n({status:!1,message:"Failed to load the script ".concat(t)})}),(r=document.head)===null||r===void 0||r.appendChild(o)}catch(s){n(s)}})};function e4(){return"".concat(Date.now(),"-").concat(Math.random().toString(36).substr(2,9))}var Eu=function(t){return!(t.event.target===null||!t.closestTrackedAncestor)};function t4(t){return t.type==="click"||t.type==="change"}var qf;(function(t){t[t.LEFT_OR_TOUCH_CONTACT=0]="LEFT_OR_TOUCH_CONTACT",t[t.MIDDLE=1]="MIDDLE",t[t.RIGHT=2]="RIGHT"})(qf||(qf={}));var n4=new Set(["id","class","style","value","onclick","onchange","oninput","onblur","onsubmit","onfocus","onkeydown","onkeyup","onkeypress","data-reactid","data-react-checksum","data-reactroot",o2,Jc]),r4=["type"],i4=["svg","path","g"],o4=["password","hidden"];function s4(t,e){var n,r,o,s,l,u;if(t===null)return null;var d=String(t.tagName).toLowerCase(),h={tag:d},p=Array.from((s=(o=t.parentElement)===null||o===void 0?void 0:o.children)!==null&&s!==void 0?s:[]);p.length&&(h.index=p.indexOf(t),h.indexOfType=p.filter(function(j){return j.tagName===t.tagName}).indexOf(t));var g=(u=(l=t.previousElementSibling)===null||l===void 0?void 0:l.tagName)===null||u===void 0?void 0:u.toLowerCase();g&&(h.prevSib=String(g));var y=t.getAttribute("id");y&&(h.id=String(y));var x=Array.from(t.classList);x.length&&(h.classes=x);var S={},E=Array.from(t.attributes),k=E.filter(function(j){return!n4.has(j.name)}),w=!YN(t);if(!o4.includes(String(t.getAttribute("type")))&&!i4.includes(d))try{for(var C=Ze(k),_=C.next();!_.done;_=C.next()){var R=_.value;if(!(w&&!r4.includes(R.name))){if(e.has(R.name)){S[R.name]=ns;continue}S[R.name]=String(R.value).substring(0,s2)}}}catch(j){n={error:j}}finally{try{_&&!_.done&&(r=C.return)&&r.call(C)}finally{if(n)throw n.error}}return Object.keys(S).length&&(h.attrs=S),h}function a4(t){var e=[];if(!t)return e;e.push(t);for(var n=t.parentElement;n&&n.tagName!=="HTML";)e.push(n),n=n.parentElement;return e}var l4=function(t,e){try{if(t.sourceType==="DOM_ELEMENT"){var n=document.documentElement;return t.scope&&e&&(n=e.closest(t.scope)),n&&t.selector?n.querySelector(t.selector):n}}catch{return}},c4=function(t,e,n){t.forEach(function(r){if(typeof r!="string"&&r.actionType==="ATTACH_EVENT_PROPERTY"){var o=n.extractDataFromDataSource(r.dataSource,e.closestTrackedAncestor);e.targetElementProperties[r.destinationKey]=o}})},w0=(function(){function t(e,n){var r,o,s=this,l;this.replaceSensitiveString=function(y){return g0(y,s.additionalMaskTextPatterns)},this.getHierarchy=function(y){var x,S,E,k,w=performance.now(),C=[];if(!y)return[];for(var _=a4(y),R=new Map,j=_.length-1;j>=0;j--){var z=_[j];if(z){var B=XN(z.getAttribute(o2)),K=j===_.length-1?[]:(E=R.get(_[j+1]))!==null&&E!==void 0?E:new Set,W=new Set(yt(yt([],ze(K),!1),ze(B),!1));R.set(z,W)}}C=_.map(function(me){var H;return s4(me,(H=R.get(me))!==null&&H!==void 0?H:new Set)});var J=function(me){me?.attrs&&Object.entries(me.attrs).forEach(function(H){var ne=ze(H,2),ce=ne[0],Ce=ne[1];me.attrs&&(me.attrs[ce]=s.replaceSensitiveString(Ce))})};try{for(var Z=Ze(C),te=Z.next();!te.done;te=Z.next()){var je=te.value;J(je)}}catch(me){x={error:me}}finally{try{te&&!te.done&&(S=Z.return)&&S.call(Z)}finally{if(x)throw x.error}}var ke=performance.now();return(k=s.diagnosticsClient)===null||k===void 0||k.recordHistogram("autocapturePlugin.getHierarchy",ke-w),C},this.getNearestLabel=function(y){var x=y.parentElement;if(!x)return"";var S;try{S=x.querySelector(":scope>span,h1,h2,h3,h4,h5,h6")}catch{S=null}return S?s.getText(S):s.getNearestLabel(x)},this.getEventProperties=function(y,x,S){var E,k,w,C,_=(w=(k=x?.tagName)===null||k===void 0?void 0:k.toLowerCase)===null||w===void 0?void 0:w.call(k),R=typeof x.getBoundingClientRect=="function"?x.getBoundingClientRect():{left:null,top:null},j=s.getHierarchy(x),z=(C=j[0])===null||C===void 0?void 0:C.attrs,B=s.getNearestLabel(x),K=JN(z??{},S),W=(E={},E[RN]=j,E[KS]=_,E[YS]=s.getText(x),E[DN]=R.left==null?null:Math.round(R.left),E[LN]=R.top==null?null:Math.round(R.top),E[IN]=K,E[BN]=B,E[XS]=ts(window.location.href.split("?")[0]),E[PN]=v0(s.replaceSensitiveString),E[UN]=window.innerHeight,E[HN]=window.innerWidth,E);if(W[ON]=x.getAttribute("id")||"",W[jN]=x.getAttribute("class"),W[zN]=z?.["aria-label"],_==="a"&&y==="click"&&x instanceof HTMLAnchorElement){var J=x.href.substring(0,s2);W[NN]=s.replaceSensitiveString(J)}return JS(W)},this.addTypeAndTimestamp=function(y,x){return{event:y,timestamp:Date.now(),type:x}},this.addAdditionalEventProperties=function(y,x,S,E,k){k===void 0&&(k=!1);var w=s.addTypeAndTimestamp(y,x);if(t4(w)&&w.event.target!==null){if(k){var C=a2(w.event.target,w.type);if(C)return w.closestTrackedAncestor=w.event.target,w.targetElementProperties=s.getEventProperties(w.type,w.closestTrackedAncestor,E),w}var _=T0(w.event.target,S);return _&&(w.closestTrackedAncestor=_,w.targetElementProperties=s.getEventProperties(w.type,_,E)),w}return w},this.extractDataFromDataSource=function(y,x){if(y.sourceType==="DOM_ELEMENT"){var S=l4(y,x);return S?y.elementExtractType==="TEXT"?s.getText(S):y.elementExtractType==="ATTRIBUTE"&&y.attribute?S.getAttribute(y.attribute):void 0:void 0}},this.getText=function(y){var x=y.closest("[".concat(Jc,"]"))!==null;if(x)return ns;var S="";if(!y.querySelector("[".concat(Jc,"], [contenteditable]")))S=y.innerText||"";else{var E=y.cloneNode(!0);E.querySelectorAll("[".concat(Jc,"], [contenteditable]")).forEach(function(k){k.innerText=ns}),S=E.innerText||""}return s.replaceSensitiveString(S.substring(0,255)).replace(/\s+/g," ").trim()},this.getEventTagProps=function(y){var x,S,E;if(!y)return{};var k=(E=(S=y?.tagName)===null||S===void 0?void 0:S.toLowerCase)===null||E===void 0?void 0:E.call(S),w=(x={},x[KS]=k,x[YS]=s.getText(y),x[XS]=window.location.href.split("?")[0],x);return JS(w)},this.diagnosticsClient=n?.diagnosticsClient;var u=(l=e.maskTextRegex)!==null&&l!==void 0?l:[],d=[];try{for(var h=Ze(u),p=h.next();!p.done;p=h.next()){var g=p.value;if(d.length>=$N)break;if(g instanceof RegExp)d.push(g);else if("pattern"in g&&typeof g.pattern=="string")try{d.push(new RegExp(g.pattern,"i"))}catch{}}}catch(y){r={error:y}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(r)throw r.error}}this.additionalMaskTextPatterns=d}return t})(),u4=(function(){function t(e){var n=e===void 0?{}:e,r=n.origin,o=r===void 0?wf:r,s=this;this.endpoint=wf,this.requestCallbacks={},this.onSelect=function(l){s.notify({action:"element-selected",data:l})},this.onTrack=function(l,u){l==="selector-mode-changed"?s.notify({action:"track-selector-mode-changed",data:u}):l==="selector-moved"&&s.notify({action:"track-selector-moved",data:u})},this.endpoint=o}return t.prototype.notify=function(e){var n,r,o,s;(r=(n=this.logger)===null||n===void 0?void 0:n.debug)===null||r===void 0||r.call(n,"Message sent: ",JSON.stringify(e)),(s=(o=window.opener)===null||o===void 0?void 0:o.postMessage)===null||s===void 0||s.call(o,e,this.endpoint)},t.prototype.sendRequest=function(e,n,r){var o=this;r===void 0&&(r={timeout:15e3});var s=e4(),l={id:s,action:e,args:n},u=new Promise(function(d,h){o.requestCallbacks[s]={resolve:d,reject:h},o.notify(l),r?.timeout>0&&setTimeout(function(){h(new Error("".concat(e," timed out (id: ").concat(s,")"))),delete o.requestCallbacks[s]},r.timeout)});return u},t.prototype.handleResponse=function(e){var n;if(!this.requestCallbacks[e.id]){(n=this.logger)===null||n===void 0||n.warn("No callback found for request id: ".concat(e.id));return}this.requestCallbacks[e.id].resolve(e.responseData),delete this.requestCallbacks[e.id]},t.prototype.setup=function(e){var n=this,r=e===void 0?{dataExtractor:new w0({})}:e,o=r.logger,s=r.endpoint,l=r.isElementSelectable,u=r.cssSelectorAllowlist,d=r.actionClickAllowlist,h=r.dataExtractor;this.logger=o,s&&this.endpoint===wf&&(this.endpoint=s);var p=null;window.addEventListener("message",function(g){var y,x,S,E,k;if((x=(y=n.logger)===null||y===void 0?void 0:y.debug)===null||x===void 0||x.call(y,"Message received: ",JSON.stringify(g)),n.endpoint===g.origin){var w=g?.data,C=w?.action;if(C)if("id"in w)(E=(S=n.logger)===null||S===void 0?void 0:S.debug)===null||E===void 0||E.call(S,"Received Response to previous request: ",JSON.stringify(g)),n.handleResponse(w);else if(C==="ping")n.notify({action:"pong"});else if(C==="initialize-visual-tagging-selector"){var _=w?.data;ZN(WN).then(function(){var R;p=(R=window?.amplitudeVisualTaggingSelector)===null||R===void 0?void 0:R.call(window,{getEventTagProps:h.getEventTagProps,isElementSelectable:function(j){return l?l(_?.actionType||"click",j):!0},onTrack:n.onTrack,onSelect:n.onSelect,visualHighlightClass:GN,messenger:n,cssSelectorAllowlist:u,actionClickAllowlist:d,extractDataFromDataSource:h.extractDataFromDataSource,dataExtractor:h,diagnostics:{autocapture:{version:r2}}}),n.notify({action:"selector-loaded"})}).catch(function(){var R;(R=n.logger)===null||R===void 0||R.warn("Failed to initialize visual tagging selector")})}else C==="close-visual-tagging-selector"&&((k=p?.close)===null||k===void 0||k.call(p))}}),this.notify({action:"page-loaded"})},t})();function d4(t){var e=t.amplitude,n=t.allObservables,r=t.shouldTrackEvent,o=t.evaluateTriggers,s=n.clickObservable,l=s.filter(Eu).filter(function(d){return r("click",d.closestTrackedAncestor)}).map(function(d){return o(d)}),u=l;return u.subscribe(function(d){e?.track(i2,d.targetElementProperties)})}function f4(t){var e=t.amplitude,n=t.allObservables,r=t.getEventProperties,o=t.shouldTrackEvent,s=t.evaluateTriggers,l=n.changeObservable,u=l.filter(Eu).filter(function(d){return o("change",d.closestTrackedAncestor)}).map(function(d){return s(d)});return u.subscribe(function(d){e?.track(MN,r("change",d.closestTrackedAncestor))})}function h4(t){var e=t.amplitude,n=t.allObservables,r=t.options,o=t.getEventProperties,s=t.shouldTrackEvent,l=t.shouldTrackActionClick,u=n.clickObservable,d=n.mutationObservable,h=n.navigateObservable,p=u.filter(function(k){return!s("click",k.closestTrackedAncestor)}).map(function(k){var w=T0(k.event.target,r.actionClickAllowlist);return k.closestTrackedAncestor=w,k.closestTrackedAncestor!==null&&(k.targetElementProperties=o(k.type,k.closestTrackedAncestor)),k}).filter(Eu).filter(function(k){return l("click",k.closestTrackedAncestor)}),g=h?sa(d,h):d,y=sa(p,g),x=null,S=null,E=E0(y,function(k){if(x&&(clearTimeout(x),x=null),k.type==="click")return S=k,x=setTimeout(function(){x=null,S=null},500),Promise.resolve(null);if(S){var w=S;return S=null,Promise.resolve(w)}return Promise.resolve(null)});return E.subscribe(function(k){k&&e?.track(i2,o("click",k.closestTrackedAncestor))})}var Tl=Ot(),l2=function(){return new Vn(function(t){var e=new MutationObserver(function(n){t.next(n)});return document.body&&e.observe(document.body,{childList:!0,attributes:!0,characterData:!0,subtree:!0}),function(){return e.disconnect()}})},c2=function(t){return t===void 0&&(t="click"),new Vn(function(e){var n=function(r){e.next(r)};return Tl.document.addEventListener(t,n,{capture:!0}),function(){Tl.document.removeEventListener(t,n,{capture:!0})}})},p4=function(){return new Vn(function(t){var e=function(n){for(var r=[],o=1;o<arguments.length;o++)r[o-1]=arguments[o];var s=void 0;Array.isArray(r[0])&&typeof r[0][0]=="string"&&(s=r[0][0]),t.next({kind:"console",message:s})};return DS.addListener("error",e),function(){DS.removeListener(e)}})},m4=function(){return new Vn(function(t){var e=function(n){var r={kind:"error"};n.error instanceof Error?r=de(de({},r),{message:n.error.message,stack:n.error.stack,filename:n.filename,lineNumber:n.lineno,columnNumber:n.colno}):typeof n.error=="string"&&(r.message=n.error),t.next(r)};return Tl.addEventListener("error",e),function(){Tl.removeEventListener("error",e)}})},g4=function(){return new Vn(function(t){var e=function(n){var r={kind:"unhandledrejection"};n.reason instanceof Error?(r.message=n.reason.message,r.stack=n.reason.stack):typeof n.reason=="string"&&(r.message=n.reason),t.next(r)};return Tl.addEventListener("unhandledrejection",e),function(){Tl.removeEventListener("unhandledrejection",e)}})},v4=function(){var t=sa(m4(),g4());return sa(t,p4())},y4=function(t,e){try{if(e.subprop_key==="[Amplitude] Element Text")return e.subprop_op==="is"&&e.subprop_value.includes(t.targetElementProperties["[Amplitude] Element Text"]);if(e.subprop_key==="[Amplitude] Element Hierarchy")return e.subprop_op==="autotrack css match"&&!!t.closestTrackedAncestor.closest(e.subprop_value.toString())}catch(n){return console.error("Error matching event to filter",n),!1}return!1},kv={"[Amplitude] Element Clicked":"click","[Amplitude] Element Changed":"change"},QS=function(t){var e,n,r,o,s=Object.values(kv).reduce(function(x,S){return x[S]=new Set,x},{});if(!t)return s;try{for(var l=Ze(t),u=l.next();!u.done;u=l.next()){var d=u.value;try{try{for(var h=(r=void 0,Ze(d.definition)),p=h.next();!p.done;p=h.next()){var g=p.value,y=kv[g.event_type];y&&s[y].add(d.id)}}catch(x){r={error:x}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(r)throw r.error}}}catch(x){console.warn("Skipping Labeled Event due to malformed definition",d?.id,x)}}}catch(x){e={error:x}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return s},ZS=function(t){var e,n,r,o,s=new Map;try{for(var l=Ze(t),u=l.next();!u.done;u=l.next()){var d=u.value;try{for(var h=(r=void 0,Ze(d.conditions)),p=h.next();!p.done;p=h.next()){var g=p.value;if(g.type==="LABELED_EVENT"){var y=g.match.eventId,x=s.get(y);x||(x=[],s.set(y,x)),x.push(d)}}}catch(S){r={error:S}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(r)throw r.error}}}}catch(S){e={error:S}}finally{try{u&&!u.done&&(n=l.return)&&n.call(l)}finally{if(e)throw e.error}}return s},b4=function(t,e){return e.filter(function(n){return n.definition.some(function(r){return kv[r.event_type]===t.type&&r.filters.every(function(o){return y4(t,o)})})})},x4=function(t,e){var n,r,o,s,l=new Set;try{for(var u=Ze(t),d=u.next();!d.done;d=u.next()){var h=d.value,p=e.get(h.id);if(p)try{for(var g=(o=void 0,Ze(p)),y=g.next();!y.done;y=g.next()){var x=y.value;l.add(x)}}catch(S){o={error:S}}finally{try{y&&!y.done&&(s=g.return)&&s.call(g)}finally{if(o)throw o.error}}}}catch(S){n={error:S}}finally{try{d&&!d.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}return Array.from(l)},S4=(function(){function t(e,n,r,o){this.groupedLabeledEvents=e,this.labeledEventToTriggerMap=n,this.dataExtractor=r,this.options=o}return t.prototype.evaluate=function(e){var n,r,o=this.options.pageActions;if(!o)return e;var s=b4(e,Array.from(this.groupedLabeledEvents[e.type]).map(function(p){return o.labeledEvents[p]})),l=x4(s,this.labeledEventToTriggerMap);try{for(var u=Ze(l),d=u.next();!d.done;d=u.next()){var h=d.value;c4(h.actions,e,this.dataExtractor)}}catch(p){n={error:p}}finally{try{d&&!d.done&&(r=u.return)&&r.call(u)}finally{if(n)throw n.error}}return e},t.prototype.update=function(e,n,r){this.groupedLabeledEvents=e,this.labeledEventToTriggerMap=n,this.options=r},t})(),E4=function(t,e,n,r){return new S4(t,e,n,r)},Jr;(function(t){t.ClickObservable="clickObservable",t.ChangeObservable="changeObservable",t.NavigateObservable="navigateObservable",t.MutationObservable="mutationObservable",t.BrowserErrorObservable="browserErrorObservable",t.SelectionObservable="selectionObservable"})(Jr||(Jr={}));var k4=function(t,e){var n,r,o,s,l,u,d,h;t===void 0&&(t={}),e?.diagnosticsClient.setTag("plugin.autocapture.version",r2);var p=t.dataAttributePrefix,g=p===void 0?zT:p,y=t.visualTaggingOptions,x=y===void 0?{enabled:!0,messenger:new u4}:y;t.cssSelectorAllowlist=(n=t.cssSelectorAllowlist)!==null&&n!==void 0?n:cR,t.actionClickAllowlist=(r=t.actionClickAllowlist)!==null&&r!==void 0?r:uR,t.debounceTime=(o=t.debounceTime)!==null&&o!==void 0?o:0,t.pageUrlExcludelist=(s=t.pageUrlExcludelist)===null||s===void 0?void 0:s.reduce(function(J,Z){if(typeof Z=="string"&&J.push(Z),Z instanceof RegExp&&J.push(Z),typeof Z=="object"&&Z!==null&&"pattern"in Z)try{J.push(new RegExp(Z.pattern))}catch(te){return console.warn("Invalid regex pattern: ".concat(Z.pattern),te),J}return J},[]);var S=TN,E="enrichment",k=[],w=new w0(t,e),C=function(){var J,Z=Zi(c2().map(function(me){return w.addAdditionalEventProperties(me,"click",t.cssSelectorAllowlist,g)})),te=Zi(new Vn(function(me){var H,ne=function(ce){var Ce=w.addAdditionalEventProperties(ce,"change",t.cssSelectorAllowlist,g);me.next(Ce)};return(H=Ot())===null||H===void 0||H.document.addEventListener("change",ne,{capture:!0}),function(){var ce;return(ce=Ot())===null||ce===void 0?void 0:ce.document.removeEventListener("change",ne)}})),je;window.navigation&&(je=Zi(new Vn(function(me){var H=function(ne){var ce=w.addAdditionalEventProperties(ne,"navigate",t.cssSelectorAllowlist,g);me.next(ce)};return window.navigation.addEventListener("navigate",H),function(){window.navigation.removeEventListener("navigate",H)}})));var ke=Zi(l2().map(function(me){return w.addAdditionalEventProperties(me,"mutation",t.cssSelectorAllowlist,g)}));return J={},J[Jr.ChangeObservable]=te,J[Jr.ClickObservable]=Z,J[Jr.MutationObservable]=ke,J[Jr.NavigateObservable]=je,J},_=QS(Object.values((u=(l=t.pageActions)===null||l===void 0?void 0:l.labeledEvents)!==null&&u!==void 0?u:{})),R=ZS((h=(d=t.pageActions)===null||d===void 0?void 0:d.triggers)!==null&&h!==void 0?h:[]),j=E4(_,R,w,t),z=function(J){var Z,te;J&&(t.pageActions=de(de({},t.pageActions),J),_=QS(Object.values((Z=t.pageActions.labeledEvents)!==null&&Z!==void 0?Z:{})),R=ZS((te=t.pageActions.triggers)!==null&&te!==void 0?te:[]),j.update(_,R,t))},B=function(J,Z){return ie(void 0,void 0,void 0,function(){var te,je,ke,me,H,ne,ce,Ce,ae,ve;return re(this,function(fe){return typeof document>"u"?[2]:(J.fetchRemoteConfig&&(J.remoteConfigClient?J.remoteConfigClient.subscribe("configs.analyticsSDK.pageActions","all",function(ue){z(ue)}):J.loggerProvider.debug("Remote config client is not provided, skipping remote config fetch")),te=xl(t,t.cssSelectorAllowlist),je=xl(t,t.actionClickAllowlist),ke=C(),me=d4({allObservables:ke,amplitude:Z,shouldTrackEvent:te,evaluateTriggers:j.evaluate.bind(j)}),k.push(me),H=f4({allObservables:ke,getEventProperties:function(){for(var ue=[],We=0;We<arguments.length;We++)ue[We]=arguments[We];return w.getEventProperties.apply(w,yt(yt([],ze(ue),!1),[g],!1))},amplitude:Z,shouldTrackEvent:te,evaluateTriggers:j.evaluate.bind(j)}),k.push(H),ne=h4({allObservables:ke,options:t,getEventProperties:function(){for(var ue=[],We=0;We<arguments.length;We++)ue[We]=arguments[We];return w.getEventProperties.apply(w,yt(yt([],ze(ue),!1),[g],!1))},amplitude:Z,shouldTrackEvent:te,shouldTrackActionClick:je}),ne&&k.push(ne),(ae=J?.loggerProvider)===null||ae===void 0||ae.log("".concat(S," has been successfully added.")),window.opener&&x.enabled&&(ce=t.cssSelectorAllowlist,Ce=t.actionClickAllowlist,(ve=x.messenger)===null||ve===void 0||ve.setup(de(de({dataExtractor:w,logger:J?.loggerProvider},J?.serverZone&&{endpoint:FN[J.serverZone]}),{isElementSelectable:xl(t,yt(yt([],ze(ce),!1),ze(Ce),!1)),cssSelectorAllowlist:ce,actionClickAllowlist:Ce}))),[2])})})},K=function(J){return ie(void 0,void 0,void 0,function(){return re(this,function(Z){return[2,J]})})},W=function(){return ie(void 0,void 0,void 0,function(){var J,Z,te,je,ke;return re(this,function(me){try{for(J=Ze(k),Z=J.next();!Z.done;Z=J.next())te=Z.value,te.unsubscribe()}catch(H){je={error:H}}finally{try{Z&&!Z.done&&(ke=J.return)&&ke.call(J)}finally{if(je)throw je.error}}return[2]})})};return{name:S,type:E,setup:B,execute:K,teardown:W}},T4=3e3,w4=["mutation","navigate"];function C4(t){var e=t.amplitude,n=t.allObservables,r=t.getEventProperties,o=t.shouldTrackDeadClick,s=n.clickObservable,l=n.mutationObservable,u=n.navigateObservable,d=s.filter(function(x){return Eu(x)&&o("click",x.closestTrackedAncestor)&&x.event.target instanceof Element&&x.event.target.closest('a[target="_blank"]')===null&&x.event.button===qf.LEFT_OR_TOUCH_CONTACT}),h=u?sa(l,u):l,p=sa(d,h),g=null,y=E0(p,function(x){return g&&w4.includes(x.type)?(clearTimeout(g),g=null,Promise.resolve(null)):x.type==="click"?g?Promise.resolve(null):new Promise(function(S){g=setTimeout(function(){S(x),g=null},T4)}):Promise.resolve(null)});return y.subscribe(function(x){if(x){var S={"[Amplitude] X":x.event.clientX,"[Amplitude] Y":x.event.clientY};e.track(CN,de(de({},r("click",x.closestTrackedAncestor)),S),{time:x.timestamp})}})}var u2=gR,d2=mR,eE=vR;function tE(t,e){var n,r,o,s,l=e.event,u=l.pageX,d=l.pageY;t.yMin=Math.min((n=t.yMin)!==null&&n!==void 0?n:d,d),t.yMax=Math.max((r=t.yMax)!==null&&r!==void 0?r:d,d),t.xMin=Math.min((o=t.xMin)!==null&&o!==void 0?o:u,u),t.xMax=Math.max((s=t.xMax)!==null&&s!==void 0?s:u,u),t.isOutOfBounds=t.yMax-t.yMin>eE||t.xMax-t.xMin>eE}function nE(t){if(t.length===0)return null;var e=t[0],n=t[t.length-1],r=de({"[Amplitude] Begin Time":new Date(e.timestamp).toISOString(),"[Amplitude] End Time":new Date(n.timestamp).toISOString(),"[Amplitude] Duration":n.timestamp-e.timestamp,"[Amplitude] Clicks":t.map(function(o){return{X:o.event.pageX,Y:o.event.pageY,Time:o.timestamp}}),"[Amplitude] Click Count":t.length},e.targetElementProperties);return{rageClickEvent:r,time:e.timestamp}}function A4(t,e){var n=Math.max(0,t.length-u2+1),r=t[n];return e.timestamp-r.timestamp>=d2}function _4(t,e){return t.length>0&&t[t.length-1].closestTrackedAncestor!==e.closestTrackedAncestor}function M4(t){var e=this,n=t.amplitude,r=t.allObservables,o=t.shouldTrackRageClick,s=r.clickObservable,l=r.selectionObservable,u=[],d={},h=null;function p(S){u=[],d={},S&&(tE(d,S),u.push(S))}var g=E0(s.filter(function(S){return o("click",S.closestTrackedAncestor)}),function(S){return ie(e,void 0,void 0,function(){var E;return re(this,function(k){return tE(d,S),E=null,u.length===0||_4(u,S)||A4(u,S)||d.isOutOfBounds?(h&&(E=nE(u)),p(S)):u.push(S),h&&(clearTimeout(h.timerId),h.resolve(E),h=null),u.length>=u2?[2,new Promise(function(w){h={resolve:w,timerId:setTimeout(function(){w(nE(u))},d2)}})]:[2,null]})})}),y=l?.subscribe(function(){p()}),x=g.subscribe(function(S){S!==null&&n.track(AN,S.rageClickEvent,{time:S.time})});return{unsubscribe:function(){x.unsubscribe(),y?.unsubscribe()}}}var O4=2e3;function j4(t){var e=t.amplitude,n=t.allObservables,r=t.shouldTrackErrorClick,o=n.clickObservable,s=n.browserErrorObservable,l=o.filter(function(p){return Eu(p)&&r("click",p.closestTrackedAncestor)&&p.event.target instanceof Element&&p.event.target.closest('a[target="_blank"]')===null&&p.event.button===qf.LEFT_OR_TOUCH_CONTACT}),u=null,d=null,h=function(){u!==null&&(clearTimeout(u),u=null),d=null};return sa(l,s).subscribe(function(p){var g;if(p.type==="click"){h(),d=p,u=setTimeout(h,O4);return}p.type==="error"&&d&&(e.track(_N,de((g={},g["[Amplitude] Kind"]=p.event.kind,g["[Amplitude] Message"]=p.event.message,g["[Amplitude] Stack"]=p.event.stack,g["[Amplitude] Filename"]=p.event.filename,g["[Amplitude] Line Number"]=p.event.lineNumber,g["[Amplitude] Column Number"]=p.event.columnNumber,g),d.targetElementProperties)),h())})}function kg(t,e,n,r){if(!r)return[];var o=t[e];return typeof o=="object"&&o!==null&&"cssSelectorAllowlist"in o&&Array.isArray(o.cssSelectorAllowlist)?o.cssSelectorAllowlist:n}var R4=function(t){var e;t===void 0&&(t={});var n=wN,r="enrichment",o=[],s=t.errorClicks!==!1;t.errorClicks||(s=!1);var l=t.deadClicks!==!1&&t.deadClicks!==null,u=t.rageClicks!==!1&&t.rageClicks!==null,d=kg(t,"rageClicks",pR,u),h=kg(t,"deadClicks",fR,l),p=kg(t,"errorClicks",hR,s),g=(e=t.dataAttributePrefix)!==null&&e!==void 0?e:zT,y=new w0(t),x=yt([],ze(new Set(yt(yt(yt([],ze(d),!1),ze(h),!1),ze(p),!1))),!1),S=function(){var C,_=Zi(c2("pointerdown").map(function(W){return y.addAdditionalEventProperties(W,"click",x,g,!0)})),R=Zi(v4().map(function(W){return y.addTypeAndTimestamp(W,"error")})),j=Zi(l2().map(function(W){return y.addAdditionalEventProperties(W,"mutation",x,g)})),z;if(window.navigation){var B=new Vn(function(W){var J=function(Z){W.next(de(de({},Z),{type:"navigate"}))};return window.navigation.addEventListener("navigate",J),function(){window.navigation.removeEventListener("navigate",J)}});z=Zi(B.map(function(W){return y.addAdditionalEventProperties(W,"navigate",x,g)}))}var K=Zi(new Vn(function(W){var J=function(){var Z=document.activeElement;if(Z&&(Z.tagName==="TEXTAREA"||Z.tagName==="INPUT")){var te=void 0,je=void 0;try{if(te=Z.selectionStart,je=Z.selectionEnd,te===je)return}catch{return}return W.next()}var ke=window.getSelection();if(!(!ke||ke.isCollapsed))return W.next()};return window.document.addEventListener("selectionchange",J),function(){window.document.removeEventListener("selectionchange",J)}}));return C={},C[Jr.ClickObservable]=_,C[Jr.MutationObservable]=j,C[Jr.NavigateObservable]=z,C[Jr.BrowserErrorObservable]=R,C[Jr.SelectionObservable]=K,C},E=function(C,_){return ie(void 0,void 0,void 0,function(){var R,j,z,B,K,W,J,Z;return re(this,function(te){return typeof document>"u"?[2]:(R=S(),u&&(j=xl(t,d),z=M4({allObservables:R,amplitude:_,shouldTrackRageClick:j}),o.push(z)),l&&(B=xl(t,h),K=C4({amplitude:_,allObservables:R,getEventProperties:function(je,ke){return y.getEventProperties(je,ke,g)},shouldTrackDeadClick:B}),o.push(K)),s&&(W=xl(t,p),J=j4({amplitude:_,allObservables:R,shouldTrackErrorClick:W}),o.push(J)),(Z=C?.loggerProvider)===null||Z===void 0||Z.log("".concat(n," has been successfully added.")),[2])})})},k=function(C){return ie(void 0,void 0,void 0,function(){return re(this,function(_){return[2,C]})})},w=function(){return ie(void 0,void 0,void 0,function(){var C,_,R,j,z;return re(this,function(B){try{for(C=Ze(o),_=C.next();!_.done;_=C.next())R=_.value,R.unsubscribe()}catch(K){j={error:K}}finally{try{_&&!_.done&&(z=C.return)&&z.call(C)}finally{if(j)throw j.error}}return[2]})})};return{name:n,type:r,setup:E,execute:k,teardown:w}},N4="@amplitude/plugin-network-capture-browser",f2="[Amplitude] Network Request",h2="500-599";function Cf(t,e){var n=e.replace(/[-[\]{}()+?.,\\^$|#\s]/g,"\\$&"),r="^"+n.replace(/\*/g,".*")+"$",o=new RegExp(r);return o.test(t)}function p2(t,e){var n,r,o=e.split(",");try{for(var s=Ze(o),l=s.next();!l.done;l=s.next()){var u=l.value,d=ze(u.split("-").map(Number),2),h=d[0],p=d[1];if(t===h&&p===void 0||t>=h&&t<=p)return!0}}catch(g){n={error:g}}finally{try{l&&!l.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return!1}function D4(t,e,n,r,o){if(!(t.hosts&&!t.hosts.find(function(l){return Cf(e,l)}))&&!(r&&t.urls&&!bv(r,t.urls))&&!(o&&t.methods&&!t.methods.find(function(l){return o.toLowerCase()===l.toLowerCase()||l==="*"}))){if(n||n===0){var s=t.statusCodeRange||h2;if(!p2(n,s))return!1}return!0}}function m2(t){var e;if(t)try{var n=(e=Ot())===null||e===void 0?void 0:e.location.href,r=new URL(t,n),o=r.searchParams.toString(),s=r.hash.replace("#",""),l=r.href,u=r.host;r.hash="",r.search="";var d=r.href;return{query:o,fragment:s,href:l,hrefWithoutQueryOrHash:d,host:u}}catch{return}}function L4(t,e){if(t.includes("amplitude.com"))try{var n=e.body;if(typeof n!="string")return!1;var r=JSON.parse(n),o=r.events;if(o.find(function(s){return s.event_type===f2}))return!0}catch{}return!1}function rE(t){if(typeof t!="object"||t===null){if(t)return yt([],ze(zf),!1);if(t===void 0){var e=void 0;return e}return}if(t.length!==0)return t}function iE(t){var e,n;return!(!((e=t?.allowlist)===null||e===void 0)&&e.length)&&!(!((n=t?.blocklist)===null||n===void 0)&&n.length)}function z4(t,e){var n;e===void 0&&(e={});var r=m2(t.url);if(!r)return!1;var o=r.host;if(e.ignoreAmplitudeRequests!==!1&&(Cf(o,"*.amplitude.com")||Cf(o,"amplitude.com"))||!((n=e.ignoreHosts)===null||n===void 0)&&n.find(function(l){return Cf(o,l)})||!e.captureRules&&t.status!==void 0&&!p2(t.status,h2))return!1;if(e.captureRules){var s;if(yt([],ze(e.captureRules),!1).reverse().find(function(l){if(s=D4(l,o,t.status,t.url,t.method),s){var u=rE(l.responseHeaders);if(t.responseWrapper&&u){var d=t.responseWrapper.headers(u);d&&(t.responseHeaders=d)}var h=rE(l.requestHeaders);if(t.requestWrapper&&h){var p=t.requestWrapper.headers(h);p&&(t.requestHeaders=p)}t.responseWrapper&&l.responseBody&&!iE(l.responseBody)&&(t.responseBodyJson=t.responseWrapper.json(l.responseBody.allowlist,l.responseBody.blocklist)),t.requestWrapper&&l.requestBody&&!iE(l.requestBody)&&(t.requestBodyJson=t.requestWrapper.json(l.requestBody.allowlist,l.requestBody.blocklist))}return s!==void 0}),!s)return!1}return!(t.requestWrapper&&L4(o,t.requestWrapper))}function I4(t,e,n,r){return ie(this,void 0,void 0,function(){var o,s,l;return re(this,function(u){switch(u.label){case 0:return e.requestBodyJson||e.responseBodyJson?[4,Promise.all([e.requestBodyJson,e.responseBodyJson])]:[3,2];case 1:if(o=ze.apply(void 0,[u.sent(),2]),s=o[0],l=o[1],s)try{t["[Amplitude] Request Body"]=JSON.stringify(s)}catch(d){r?.debug("Failed to stringify request body",d)}if(l)try{t["[Amplitude] Response Body"]=JSON.stringify(l)}catch{r?.debug("Failed to stringify response body")}u.label=2;case 2:return n?.track(f2,t),[2]}})})}function B4(t){var e=t.allObservables,n=t.networkTrackingOptions,r=t.amplitude,o=t.loggerProvider,s=e.networkObservable,l=s.filter(function(u){return z4(u.event,n)});return l.subscribe(function(u){var d,h,p,g=u.event,y=m2(g.url);if(y){var x=(h=g.responseWrapper)===null||h===void 0?void 0:h.bodySize,S=(p=g.requestWrapper)===null||p===void 0?void 0:p.bodySize,E=(d={},d["[Amplitude] URL"]=y.hrefWithoutQueryOrHash,d["[Amplitude] URL Query"]=y.query,d["[Amplitude] URL Fragment"]=y.fragment,d["[Amplitude] Request Method"]=g.method,d["[Amplitude] Status Code"]=g.status,d["[Amplitude] Start Time"]=g.startTime,d["[Amplitude] Completion Time"]=g.endTime,d["[Amplitude] Duration"]=g.duration,d["[Amplitude] Request Body Size"]=S,d["[Amplitude] Response Body Size"]=x,d["[Amplitude] Request Type"]=g.type,d["[Amplitude] Request Headers"]=g.requestHeaders,d["[Amplitude] Response Headers"]=g.responseHeaders,d);I4(E,g,r,o)}})}var Tv;(function(t){t.NetworkObservable="networkObservable"})(Tv||(Tv={}));var oE,P4=function(t){t===void 0&&(t={});var e=N4,n="enrichment",r,o=function(h,p){var g={event:h,timestamp:Date.now(),type:p};return g},s=function(){var h,p=new Vn(function(g){var y=new CR(function(x){var S=o(x,"network");g.next(S)});return BS.subscribe(y,r),function(){BS.unsubscribe(y)}});return h={},h[Tv.NetworkObservable]=p,h},l=function(h,p){return ie(void 0,void 0,void 0,function(){var g;return re(this,function(y){return typeof document>"u"?[2]:(g=s(),r=h?.loggerProvider,oE=B4({allObservables:g,networkTrackingOptions:t,amplitude:p,loggerProvider:r}),r?.log("".concat(e," has been successfully added.")),[2])})})},u=function(h){return ie(void 0,void 0,void 0,function(){return re(this,function(p){return[2,h]})})},d=function(){return ie(void 0,void 0,void 0,function(){return re(this,function(h){return oE.unsubscribe(),[2]})})};return{name:e,type:n,setup:l,execute:u,teardown:d}},U4="web-vitals-browser",H4="[Amplitude] Web Vitals";let g2=-1;const Ll=t=>{addEventListener("pageshow",(e=>{e.persisted&&(g2=e.timeStamp,t(e))}),!0)},bi=(t,e,n,r)=>{let o,s;return l=>{e.value>=0&&(l||r)&&(s=e.value-(o??0),(s||o===void 0)&&(o=e.value,e.delta=s,e.rating=((u,d)=>u>d[1]?"poor":u>d[0]?"needs-improvement":"good")(e.value,n),t(e)))}},C0=t=>{requestAnimationFrame((()=>requestAnimationFrame((()=>t()))))},A0=()=>{const t=performance.getEntriesByType("navigation")[0];if(t&&t.responseStart>0&&t.responseStart<performance.now())return t},ku=()=>A0()?.activationStart??0,xi=(t,e=-1)=>{const n=A0();let r="navigate";return g2>=0?r="back-forward-cache":n&&(document.prerendering||ku()>0?r="prerender":document.wasDiscarded?r="restore":n.type&&(r=n.type.replace(/_/g,"-"))),{name:t,value:e,rating:"good",delta:0,entries:[],id:`v5-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:r}},Tg=new WeakMap;function _0(t,e){return Tg.get(t)||Tg.set(t,new e),Tg.get(t)}class q4{t;i=0;o=[];h(e){if(e.hadRecentInput)return;const n=this.o[0],r=this.o.at(-1);this.i&&n&&r&&e.startTime-r.startTime<1e3&&e.startTime-n.startTime<5e3?(this.i+=e.value,this.o.push(e)):(this.i=e.value,this.o=[e]),this.t?.(e)}}const Tu=(t,e,n={})=>{try{if(PerformanceObserver.supportedEntryTypes.includes(t)){const r=new PerformanceObserver((o=>{Promise.resolve().then((()=>{e(o.getEntries())}))}));return r.observe({type:t,buffered:!0,...n}),r}}catch{}},M0=t=>{let e=!1;return()=>{e||(t(),e=!0)}};let gl=-1;const v2=new Set,sE=()=>document.visibilityState!=="hidden"||document.prerendering?1/0:0,wv=t=>{if(document.visibilityState==="hidden"){if(t.type==="visibilitychange")for(const e of v2)e();isFinite(gl)||(gl=t.type==="visibilitychange"?t.timeStamp:0,removeEventListener("prerenderingchange",wv,!0))}},Uh=()=>{if(gl<0){const t=ku();gl=(document.prerendering?void 0:globalThis.performance.getEntriesByType("visibility-state").filter((n=>n.name==="hidden"&&n.startTime>t))[0]?.startTime)??sE(),addEventListener("visibilitychange",wv,!0),addEventListener("prerenderingchange",wv,!0),Ll((()=>{setTimeout((()=>{gl=sE()}))}))}return{get firstHiddenTime(){return gl},onHidden(t){v2.add(t)}}},Hh=t=>{document.prerendering?addEventListener("prerenderingchange",(()=>t()),!0):t()},aE=[1800,3e3],y2=(t,e={})=>{Hh((()=>{const n=Uh();let r,o=xi("FCP");const s=Tu("paint",(l=>{for(const u of l)u.name==="first-contentful-paint"&&(s.disconnect(),u.startTime<n.firstHiddenTime&&(o.value=Math.max(u.startTime-ku(),0),o.entries.push(u),r(!0)))}));s&&(r=bi(t,o,aE,e.reportAllChanges),Ll((l=>{o=xi("FCP"),r=bi(t,o,aE,e.reportAllChanges),C0((()=>{o.value=performance.now()-l.timeStamp,r(!0)}))})))}))},lE=[.1,.25],V4=(t,e={})=>{const n=Uh();y2(M0((()=>{let r,o=xi("CLS",0);const s=_0(e,q4),l=d=>{for(const h of d)s.h(h);s.i>o.value&&(o.value=s.i,o.entries=s.o,r())},u=Tu("layout-shift",l);u&&(r=bi(t,o,lE,e.reportAllChanges),n.onHidden((()=>{l(u.takeRecords()),r(!0)})),Ll((()=>{s.i=0,o=xi("CLS",0),r=bi(t,o,lE,e.reportAllChanges),C0((()=>r()))})),setTimeout(r))})))};let b2=0,wg=1/0,Qd=0;const F4=t=>{for(const e of t)e.interactionId&&(wg=Math.min(wg,e.interactionId),Qd=Math.max(Qd,e.interactionId),b2=Qd?(Qd-wg)/7+1:0)};let Cv;const cE=()=>Cv?b2:performance.interactionCount??0,W4=()=>{"interactionCount"in performance||Cv||(Cv=Tu("event",F4,{type:"event",buffered:!0,durationThreshold:0}))};let uE=0;class G4{u=[];l=new Map;m;p;v(){uE=cE(),this.u.length=0,this.l.clear()}L(){const e=Math.min(this.u.length-1,Math.floor((cE()-uE)/50));return this.u[e]}h(e){if(this.m?.(e),!e.interactionId&&e.entryType!=="first-input")return;const n=this.u.at(-1);let r=this.l.get(e.interactionId);if(r||this.u.length<10||e.duration>n.P){if(r?e.duration>r.P?(r.entries=[e],r.P=e.duration):e.duration===r.P&&e.startTime===r.entries[0].startTime&&r.entries.push(e):(r={id:e.interactionId,entries:[e],P:e.duration},this.l.set(r.id,r),this.u.push(r)),this.u.sort(((o,s)=>s.P-o.P)),this.u.length>10){const o=this.u.splice(10);for(const s of o)this.l.delete(s.id)}this.p?.(r)}}}const x2=t=>{const e=globalThis.requestIdleCallback||setTimeout;document.visibilityState==="hidden"?t():(t=M0(t),addEventListener("visibilitychange",t,{once:!0,capture:!0}),e((()=>{t(),removeEventListener("visibilitychange",t,{capture:!0})})))},dE=[200,500],$4=(t,e={})=>{if(!globalThis.PerformanceEventTiming||!("interactionId"in PerformanceEventTiming.prototype))return;const n=Uh();Hh((()=>{W4();let r,o=xi("INP");const s=_0(e,G4),l=d=>{x2((()=>{for(const p of d)s.h(p);const h=s.L();h&&h.P!==o.value&&(o.value=h.P,o.entries=h.entries,r())}))},u=Tu("event",l,{durationThreshold:e.durationThreshold??40});r=bi(t,o,dE,e.reportAllChanges),u&&(u.observe({type:"first-input",buffered:!0}),n.onHidden((()=>{l(u.takeRecords()),r(!0)})),Ll((()=>{s.v(),o=xi("INP"),r=bi(t,o,dE,e.reportAllChanges)})))}))};class K4{m;h(e){this.m?.(e)}}const fE=[2500,4e3],Y4=(t,e={})=>{Hh((()=>{const n=Uh();let r,o=xi("LCP");const s=_0(e,K4),l=d=>{e.reportAllChanges||(d=d.slice(-1));for(const h of d)s.h(h),h.startTime<n.firstHiddenTime&&(o.value=Math.max(h.startTime-ku(),0),o.entries=[h],r())},u=Tu("largest-contentful-paint",l);if(u){r=bi(t,o,fE,e.reportAllChanges);const d=M0((()=>{l(u.takeRecords()),u.disconnect(),r(!0)})),h=p=>{p.isTrusted&&(x2(d),removeEventListener(p.type,h,{capture:!0}))};for(const p of["keydown","click","visibilitychange"])addEventListener(p,h,{capture:!0});Ll((p=>{o=xi("LCP"),r=bi(t,o,fE,e.reportAllChanges),C0((()=>{o.value=performance.now()-p.timeStamp,r(!0)}))}))}}))},hE=[800,1800],Av=t=>{document.prerendering?Hh((()=>Av(t))):document.readyState!=="complete"?addEventListener("load",(()=>Av(t)),!0):setTimeout(t)},X4=(t,e={})=>{let n=xi("TTFB"),r=bi(t,n,hE,e.reportAllChanges);Av((()=>{const o=A0();o&&(n.value=Math.max(o.responseStart-ku(),0),n.entries=[o],r(!0),Ll((()=>{n=xi("TTFB",0),r=bi(t,n,hE,e.reportAllChanges),r(!0)})))}))};function J4(t){var e,n=((e=t.entries[0])===null||e===void 0?void 0:e.startTime)||0;return performance.timeOrigin+n}function Lc(t){return{value:t.value,rating:t.rating,delta:t.delta,navigationType:t.navigationType,id:t.id,timestamp:Math.floor(J4(t)),navigationStart:Math.floor(performance.timeOrigin)}}var Q4=function(){var t=null,e=Ot(),n=e?.document,r=e?.location,o=function(u,d){return ie(void 0,void 0,void 0,function(){var h,p;return re(this,function(g){return n===void 0?[2]:(h=ts(r?.href||"",u.loggerProvider),p={"[Amplitude] Page Domain":r?.hostname||"","[Amplitude] Page Location":h,"[Amplitude] Page Path":ts(r?.pathname||"",u.loggerProvider),"[Amplitude] Page Title":typeof document<"u"&&document.title||"","[Amplitude] Page URL":ts(h.split("?")[0],u.loggerProvider)},Y4(function(y){p["[Amplitude] LCP"]=Lc(y)}),y2(function(y){p["[Amplitude] FCP"]=Lc(y)}),$4(function(y){p["[Amplitude] INP"]=Lc(y)}),V4(function(y){p["[Amplitude] CLS"]=Lc(y)}),X4(function(y){p["[Amplitude] TTFB"]=Lc(y)}),t=function(){n.visibilityState==="hidden"&&t&&(d.track(H4,p),n.removeEventListener("visibilitychange",t),t=null)},n.addEventListener("visibilitychange",t),[2])})})},s=function(u){return ie(void 0,void 0,void 0,function(){return re(this,function(d){return[2,u]})})},l=function(){return ie(void 0,void 0,void 0,function(){return re(this,function(u){return t&&n?.removeEventListener("visibilitychange",t),[2]})})};return{name:U4,type:"enrichment",setup:o,execute:s,teardown:l}},pE=function(t){var e=t.split(".");return e.length<=2?t:e.slice(e.length-2,e.length).join(".")},Z4=function(t){return Object.values(t).every(function(e){return!e})},eD=function(t,e,n,r,o){o===void 0&&(o=!0),t.referrer;var s=t.referring_domain,l=Rf(t,["referrer","referring_domain"]),u=e||{};u.referrer;var d=u.referring_domain,h=Rf(u,["referrer","referring_domain"]);if(tD(n.excludeReferrers,t.referring_domain))return r.debug("This is not a new campaign because ".concat(t.referring_domain," is in the exclude referrer list.")),!1;if(!o&&Z4(t)&&e)return r.debug("This is not a new campaign because this is a direct traffic in the same session."),!1;var p=JSON.stringify(l)!==JSON.stringify(h),g=pE(s||"")!==pE(d||""),y=!e||p||g;return y?r.debug("This is a new campaign. An $identify event will be sent."):r.debug("This is not a new campaign because it's the same as the previous one."),y},tD=function(t,e){return t===void 0&&(t=[]),e===void 0&&(e=""),t.some(function(n){return n instanceof RegExp?n.test(e):n===e})},nD=function(t,e){var n=de(de({},Bh),t),r=Object.entries(n).reduce(function(o,s){var l,u=ze(s,2),d=u[0],h=u[1];return o.setOnce("initial_".concat(d),(l=h??e.initialEmptyValue)!==null&&l!==void 0?l:"EMPTY"),h?o.set(d,h):o.unset(d)},new If);return u0(r)},rD=function(t){var e=t;return e?(e.startsWith(".")&&(e=e.substring(1)),[new RegExp("".concat(e.replace(".","\\."),"$"))]):[]},iD=(function(){function t(e,n){var r;this.shouldTrackNewCampaign=!1,this.options=de({initialEmptyValue:"EMPTY",resetSessionOnNewCampaign:!1,excludeReferrers:rD((r=n.cookieOptions)===null||r===void 0?void 0:r.domain)},e),this.storage=n.cookieStorage,this.storageKey=OS(n.apiKey,"MKTG"),this.webExpStorageKey=OS(n.apiKey,"MKTG_ORIGINAL"),this.currentCampaign=Bh,this.sessionTimeout=n.sessionTimeout,this.lastEventTime=n.lastEventTime,this.logger=n.loggerProvider,n.loggerProvider.log("Installing web attribution tracking.")}return t.prototype.init=function(){return ie(this,void 0,void 0,function(){var e,n;return re(this,function(r){switch(r.label){case 0:return[4,this.fetchCampaign()];case 1:return n=ze.apply(void 0,[r.sent(),2]),this.currentCampaign=n[0],this.previousCampaign=n[1],e=this.lastEventTime?RT(this.sessionTimeout,this.lastEventTime):!0,eD(this.currentCampaign,this.previousCampaign,this.options,this.logger,e)?(this.shouldTrackNewCampaign=!0,[4,this.storage.set(this.storageKey,this.currentCampaign)]):[3,3];case 2:r.sent(),r.label=3;case 3:return[2]}})})},t.prototype.fetchCampaign=function(){return ie(this,void 0,void 0,function(){var e;return re(this,function(n){switch(n.label){case 0:return[4,this.storage.get(this.webExpStorageKey)];case 1:return e=n.sent(),e?[4,this.storage.remove(this.webExpStorageKey)]:[3,3];case 2:n.sent(),n.label=3;case 3:return[4,Promise.all([e||new qT().parse(),this.storage.get(this.storageKey)])];case 4:return[2,n.sent()]}})})},t.prototype.generateCampaignEvent=function(e){this.shouldTrackNewCampaign=!1;var n=nD(this.currentCampaign,this.options);return e&&(n.event_id=e),n},t.prototype.shouldSetSessionIdOnNewCampaign=function(){return this.shouldTrackNewCampaign&&!!this.options.resetSessionOnNewCampaign},t})(),Zd="AMP_CURRENT_PAGE",ef="AMP_PREVIOUS_PAGE",al="AMP_URL_INFO",Qc;(function(t){t.Direct="direct",t.Internal="internal",t.External="external"})(Qc||(Qc={}));var oD=new Set([ei.IDENTIFY,ei.GROUP_IDENTIFY,ei.REVENUE]),sD=function(t){var e={},n=e.internalDomains,r=n===void 0?[]:n,o=Ot(),s=void 0,l=!1,u=void 0,d=!1,h=!1,p=function(E){var k;try{var w=ts(E,u);k=new URL(w).hostname}catch(C){u?.error("Could not parse URL: ",C)}return k},g=function(E){var k=typeof location<"u"&&location.hostname||"",w=E?p(E):void 0;if(!w)return Qc.Direct;var C=r.some(function(R){return k.indexOf(R)!==-1}),_=r.some(function(R){return w.indexOf(R)!==-1});return k===w||_&&C?Qc.Internal:Qc.External},y=function(){return ie(void 0,void 0,void 0,function(){var E,k,w,C,_;return re(this,function(R){switch(R.label){case 0:return s&&l?[4,s.get(al)]:[3,3];case 1:return E=R.sent(),k=ts(typeof location<"u"&&location.href||""),w=E?.[Zd]||"",C=void 0,k===w?C=E?.[ef]||"":w?C=w:C=document.referrer||"",[4,s.set(al,(_={},_[Zd]=k,_[ef]=C,_))];case 2:R.sent(),R.label=3;case 3:return[2]}})})},x=function(){y()},S={name:"@amplitude/plugin-page-url-enrichment-browser",type:"enrichment",setup:function(E,k){return ie(void 0,void 0,void 0,function(){return re(this,function(w){switch(w.label){case 0:return u=E.loggerProvider,u.log("Installing @amplitude/plugin-page-url-enrichment-browser"),h=!0,o?(s=new h0(o.sessionStorage),[4,s.isEnabled()]):[3,2];case 1:l=w.sent(),o.addEventListener("popstate",x),d||(o.history.pushState=new Proxy(o.history.pushState,{apply:function(C,_,R){var j=ze(R,3),z=j[0],B=j[1],K=j[2];C.apply(_,[z,B,K]),h&&x()}}),o.history.replaceState=new Proxy(o.history.replaceState,{apply:function(C,_,R){var j=ze(R,3),z=j[0],B=j[1],K=j[2];C.apply(_,[z,B,K]),h&&x()}}),d=!0),w.label=2;case 2:return[2]}})})},execute:function(E){return ie(void 0,void 0,void 0,function(){var k,w,C,_,R;return re(this,function(j){switch(j.label){case 0:return k=ts(typeof location<"u"&&location.href||""),s&&l?[4,s.get(al)]:[3,5];case 1:return w=j.sent(),w?.[Zd]?[3,3]:[4,s.set(al,(R={},R[Zd]=k,R[ef]=document.referrer||"",R))];case 2:j.sent(),j.label=3;case 3:return[4,s.get(al)];case 4:if(C=j.sent(),_="",C&&(_=C[ef]||""),oD.has(E.event_type))return[2,E];E.event_properties=de(de({},E.event_properties||{}),{"[Amplitude] Page Domain":zc(E,"[Amplitude] Page Domain",typeof location<"u"&&location.hostname||""),"[Amplitude] Page Location":zc(E,"[Amplitude] Page Location",k),"[Amplitude] Page Path":zc(E,"[Amplitude] Page Path",typeof location<"u"&&ts(location.pathname)||""),"[Amplitude] Page Title":zc(E,"[Amplitude] Page Title",v0(g0)),"[Amplitude] Page URL":zc(E,"[Amplitude] Page URL",k.split("?")[0]),"[Amplitude] Previous Page Location":_,"[Amplitude] Previous Page Type":g(_)}),j.label=5;case 5:return[2,E]}})})},teardown:function(){return ie(void 0,void 0,void 0,function(){return re(this,function(E){switch(E.label){case 0:return o&&(o.removeEventListener("popstate",x),h=!1),s&&l?[4,s.set(al,{})]:[3,2];case 1:E.sent(),E.label=2;case 2:return[2]}})})}};return S};function zc(t,e,n){return t.event_properties||(t.event_properties={}),t.event_properties[e]===void 0?n:t.event_properties[e]}var aD=(function(t){ha(e,t);function e(){var n=t!==null&&t.apply(this,arguments)||this;return n._diagnosticsSampleRate=0,n}return e.prototype.init=function(n,r,o){n===void 0&&(n="");var s,l;return arguments.length>2?(s=r,l=o):typeof r=="string"?(s=r,l=void 0):(s=r?.userId,l=r),cr(this._init(de(de({},l),{userId:s,apiKey:n})))},e.prototype._init=function(n){var r,o,s,l,u,d,h;return ie(this,void 0,void 0,function(){var p,g,y,x,S,E,k,w,C,_,R,j,z,B,K=this;return re(this,function(W){switch(W.label){case 0:return this.initializing?[2]:(this.initializing=!0,p=dN(n),g=(r=n.loggerProvider)!==null&&r!==void 0?r:new d0,y=(o=n.serverZone)!==null&&o!==void 0?o:e2,S=this._diagnosticsSampleRate,E=(s=n.enableDiagnostics)!==null&&s!==void 0?s:!0,p?(x=new rR(n.apiKey,g,y,(l=n.remoteConfig)===null||l===void 0?void 0:l.serverUrl),[4,new Promise(function(J){x?.subscribe("configs.diagnostics.browserSDK","all",function(Z,te,je){if(g.debug("Diagnostics remote configuration received:",JSON.stringify({remoteConfig:Z,source:te,lastFetch:je},null,2)),Z){var ke=Z.sampleRate;typeof ke=="number"&&!isNaN(ke)&&(S=ke);var me=Z.enabled;typeof me=="boolean"&&(E=me)}J()})})]):[3,2]);case 1:W.sent(),W.label=2;case 2:return k=new Y3(n.apiKey,g,y,{enabled:E,sampleRate:S}),k.setTag("library","".concat(QT,"/").concat(k0)),typeof navigator<"u"&&k.setTag("user_agent",navigator.userAgent),[4,cN(n.apiKey,n,this,k,{loggerProvider:g,serverZone:y,enableDiagnostics:E,diagnosticsSampleRate:S})];case 3:return w=W.sent(),p&&x?[4,new Promise(function(J){x?.subscribe("configs.analyticsSDK.browserSDK","all",function(Z,te,je){w.loggerProvider.debug("Remote configuration received:",JSON.stringify({remoteConfig:Z,source:te,lastFetch:je},null,2)),Z&&kN(Z,w),J()})})]:[3,5];case 4:W.sent(),W.label=5;case 5:return[4,t.prototype._init.call(this,w)];case 6:return W.sent(),this.logBrowserOptions(w),this.config.remoteConfigClient=x,GT(this.config.defaultTracking)?(C=WR(this.config),this.webAttribution=new iD(C,this.config),[4,this.webAttribution.init()]):[3,8];case 7:W.sent(),W.label=8;case 8:return _=Bf(),R=_.ampTimestamp?Number(_.ampTimestamp):void 0,j=R?Date.now()<R:!0,z=j&&!Number.isNaN(Number(_.ampSessionId))?Number(_.ampSessionId):void 0,this.setSessionId((h=(d=(u=n.sessionId)!==null&&u!==void 0?u:z)!==null&&d!==void 0?d:this.config.sessionId)!==null&&h!==void 0?h:Date.now()),B=uu(n.instanceName),B.identityStore.setIdentity({userId:this.config.userId,deviceId:this.config.deviceId}),this.config.offline===lR?[3,10]:[4,this.add(EN()).promise];case 9:W.sent(),W.label=10;case 10:return[4,this.add(new x3({diagnosticsClient:k})).promise];case 11:return W.sent(),[4,this.add(new YR).promise];case 12:return W.sent(),[4,this.add(new j3).promise];case 13:return W.sent(),SN(this.config),BR(this.config.defaultTracking)?(this.config.loggerProvider.debug("Adding file download tracking plugin"),[4,this.add(xN()).promise]):[3,15];case 14:W.sent(),W.label=15;case 15:return $T(this.config.defaultTracking)?(this.config.loggerProvider.debug("Adding form interaction plugin"),[4,this.add(bN()).promise]):[3,17];case 16:W.sent(),W.label=17;case 17:return KT(this.config.defaultTracking)?(this.config.loggerProvider.debug("Adding page view tracking plugin"),[4,this.add(mN(FR(this.config))).promise]):[3,19];case 18:W.sent(),W.label=19;case 19:return XT(this.config.autocapture)?(this.config.loggerProvider.debug("Adding user interactions plugin (autocapture plugin)"),[4,this.add(k4(HR(this.config),{diagnosticsClient:k})).promise]):[3,21];case 20:W.sent(),W.label=21;case 21:return JT(this.config.autocapture)?(this.config.loggerProvider.debug("Adding frustration interactions plugin"),[4,this.add(R4(qR(this.config))).promise]):[3,23];case 22:W.sent(),W.label=23;case 23:return YT(this.config.autocapture)?(this.config.loggerProvider.debug("Adding network tracking plugin"),[4,this.add(P4(VR(this.config))).promise]):[3,25];case 24:W.sent(),W.label=25;case 25:return UR(this.config.autocapture)?(this.config.loggerProvider.debug("Adding web vitals plugin"),[4,this.add(Q4()).promise]):[3,27];case 26:W.sent(),W.label=27;case 27:return PR(this.config.autocapture)?(this.config.loggerProvider.debug("Adding referrer page url plugin"),[4,this.add(sD()).promise]):[3,29];case 28:W.sent(),W.label=29;case 29:return this.initializing=!1,[4,this.runQueuedFunctions("dispatchQ")];case 30:return W.sent(),B.eventBridge.setEventReceiver(function(J){var Z=J.eventProperties||{},te=Z.time,je=Rf(Z,["time"]),ke=typeof te=="number"?{time:te}:void 0;K.track(J.eventType,je,ke)}),[2]}})})},e.prototype.getUserId=function(){var n;return(n=this.config)===null||n===void 0?void 0:n.userId},e.prototype.setUserId=function(n){if(!this.config){this.q.push(this.setUserId.bind(this,n));return}this.config.loggerProvider.debug("function setUserId: ",n),(n!==this.config.userId||n===void 0)&&(this.config.userId=n,this.timeline.onIdentityChanged({userId:n}),M3(n,this.config.instanceName))},e.prototype.getDeviceId=function(){var n;return(n=this.config)===null||n===void 0?void 0:n.deviceId},e.prototype.setDeviceId=function(n){if(!this.config){this.q.push(this.setDeviceId.bind(this,n));return}this.config.loggerProvider.debug("function setDeviceId: ",n),n!==this.config.deviceId&&(this.config.deviceId=n,this.timeline.onIdentityChanged({deviceId:n}),O3(n,this.config.instanceName))},e.prototype.reset=function(){this.setDeviceId(Ti()),this.setUserId(void 0),this.timeline.onReset()},e.prototype.getIdentity=function(){var n,r;return{deviceId:(n=this.config)===null||n===void 0?void 0:n.deviceId,userId:(r=this.config)===null||r===void 0?void 0:r.userId,userProperties:this.userProperties}},e.prototype.getOptOut=function(){var n;return(n=this.config)===null||n===void 0?void 0:n.optOut},e.prototype.getSessionId=function(){var n;return(n=this.config)===null||n===void 0?void 0:n.sessionId},e.prototype.setSessionId=function(n){var r,o=[];if(!this.config)return this.q.push(this.setSessionId.bind(this,n)),cr(Promise.resolve());if(n===this.config.sessionId)return cr(Promise.resolve());this.config.loggerProvider.debug("function setSessionId: ",n);var s=this.getSessionId();s!==n&&this.timeline.onSessionIdChanged(n);var l=this.config.lastEventTime,u=(r=this.config.lastEventId)!==null&&r!==void 0?r:-1;this.config.sessionId=n,this.config.lastEventTime=void 0,this.config.pageCounter=0,HS(this.config.defaultTracking)&&(s&&l&&o.push(this.track(FS,void 0,{device_id:this.previousSessionDeviceId,event_id:++u,session_id:s,time:l+1,user_id:this.previousSessionUserId}).promise),this.config.lastEventTime=this.config.sessionId);var d=this.trackCampaignEventIfNeeded(++u,o);return this.config.identify&&o.push(this.track(u0(this.config.identify)).promise),HS(this.config.defaultTracking)&&o.push(this.track(VS,void 0,{event_id:d?++u:u,session_id:this.config.sessionId,time:this.config.lastEventTime}).promise),this.previousSessionDeviceId=this.config.deviceId,this.previousSessionUserId=this.config.userId,cr(Promise.all(o))},e.prototype.extendSession=function(){if(!this.config){this.q.push(this.extendSession.bind(this));return}this.config.lastEventTime=Date.now()},e.prototype.setTransport=function(n){if(!this.config){this.q.push(this.setTransport.bind(this,n));return}this.config.transportProvider=t2(n)},e.prototype.identify=function(n,r){if(yg(n)){var o=n._q;n._q=[],n=vg(new If,o)}return r?.user_id&&this.setUserId(r.user_id),r?.device_id&&this.setDeviceId(r.device_id),t.prototype.identify.call(this,n,r)},e.prototype.groupIdentify=function(n,r,o,s){if(yg(o)){var l=o._q;o._q=[],o=vg(new If,l)}return t.prototype.groupIdentify.call(this,n,r,o,s)},e.prototype.revenue=function(n,r){if(yg(n)){var o=n._q;n._q=[],n=vg(new h3,o)}return t.prototype.revenue.call(this,n,r)},e.prototype.trackCampaignEventIfNeeded=function(n,r){if(!this.webAttribution||!this.webAttribution.shouldTrackNewCampaign)return!1;var o=this.webAttribution.generateCampaignEvent(n);return r?r.push(this.track(o).promise):this.track(o),this.config.loggerProvider.log("Tracking attribution."),!0},e.prototype.process=function(n){return ie(this,void 0,void 0,function(){var r,o,s;return re(this,function(l){return r=Date.now(),o=RT(this.config.sessionTimeout,this.config.lastEventTime),s=this.webAttribution&&this.webAttribution.shouldSetSessionIdOnNewCampaign(),n.event_type!==VS&&n.event_type!==FS&&(!n.session_id||n.session_id===this.getSessionId())&&(o||s?(this.setSessionId(r),s&&this.config.loggerProvider.log("Created a new session for new campaign.")):o||this.trackCampaignEventIfNeeded()),n.event_type===ei.IDENTIFY&&n.user_properties&&(this.userProperties=this.getOperationAppliedUserProperties(n.user_properties)),[2,t.prototype.process.call(this,n)]})})},e.prototype.logBrowserOptions=function(n){try{var r=de(de({},n),{apiKey:n.apiKey.substring(0,10)+"********"});this.config.loggerProvider.debug("Initialized Amplitude with BrowserConfig:",JSON.stringify(r))}catch(o){this.config.loggerProvider.error("Error logging browser config",o)}},e.prototype._setDiagnosticsSampleRate=function(n){if(!(n>1||n<0)&&!this.config){this._diagnosticsSampleRate=n;return}},e})(f3),lD=function(){var t=new aD;return{init:Wt(t.init.bind(t),"init",Vt(t),Ft(t,["config"])),add:Wt(t.add.bind(t),"add",Vt(t),Ft(t,["config.apiKey","timeline.plugins"])),remove:Wt(t.remove.bind(t),"remove",Vt(t),Ft(t,["config.apiKey","timeline.plugins"])),track:Wt(t.track.bind(t),"track",Vt(t),Ft(t,["config.apiKey","timeline.queue.length"])),logEvent:Wt(t.logEvent.bind(t),"logEvent",Vt(t),Ft(t,["config.apiKey","timeline.queue.length"])),identify:Wt(t.identify.bind(t),"identify",Vt(t),Ft(t,["config.apiKey","timeline.queue.length"])),groupIdentify:Wt(t.groupIdentify.bind(t),"groupIdentify",Vt(t),Ft(t,["config.apiKey","timeline.queue.length"])),setGroup:Wt(t.setGroup.bind(t),"setGroup",Vt(t),Ft(t,["config.apiKey","timeline.queue.length"])),revenue:Wt(t.revenue.bind(t),"revenue",Vt(t),Ft(t,["config.apiKey","timeline.queue.length"])),flush:Wt(t.flush.bind(t),"flush",Vt(t),Ft(t,["config.apiKey","timeline.queue.length"])),getUserId:Wt(t.getUserId.bind(t),"getUserId",Vt(t),Ft(t,["config","config.userId"])),setUserId:Wt(t.setUserId.bind(t),"setUserId",Vt(t),Ft(t,["config","config.userId"])),getDeviceId:Wt(t.getDeviceId.bind(t),"getDeviceId",Vt(t),Ft(t,["config","config.deviceId"])),setDeviceId:Wt(t.setDeviceId.bind(t),"setDeviceId",Vt(t),Ft(t,["config","config.deviceId"])),reset:Wt(t.reset.bind(t),"reset",Vt(t),Ft(t,["config","config.userId","config.deviceId"])),getSessionId:Wt(t.getSessionId.bind(t),"getSessionId",Vt(t),Ft(t,["config"])),setSessionId:Wt(t.setSessionId.bind(t),"setSessionId",Vt(t),Ft(t,["config"])),extendSession:Wt(t.extendSession.bind(t),"extendSession",Vt(t),Ft(t,["config"])),setOptOut:Wt(t.setOptOut.bind(t),"setOptOut",Vt(t),Ft(t,["config"])),setTransport:Wt(t.setTransport.bind(t),"setTransport",Vt(t),Ft(t,["config"])),getIdentity:Wt(t.getIdentity.bind(t),"getIdentity",Vt(t),Ft(t,["config"])),getOptOut:Wt(t.getOptOut.bind(t),"getOptOut",Vt(t),Ft(t,["config"])),_setDiagnosticsSampleRate:Wt(t._setDiagnosticsSampleRate.bind(t),"_setDiagnosticsSampleRate",Vt(t),Ft(t,["config"]))}};const S2=lD();var cD=S2.init,uD=S2.track;const mE="679a0d081795b9183fe4b60c339d8a41";let _v=!1;function dD(){if(_v||!mE)return;const t=kt.initDataUnsafe?.user?.id?.toString();cD(mE,t,{defaultTracking:!1}),_v=!0}function it(t,e){if(!_v)return;const n=`WebApp_${t}`,r=kt.initDataUnsafe?.user?.id;uD(n,{...e,user_id:r,platform:"webapp"})}function fD(t){it("Registration",{referrer:t||"direct"})}function gE(){it("Registration_Success")}function hD(t){it("Registration_Error",{error:t})}function pD(){it("Energy_Page_View")}function mD(t,e,n,r){it("Energy_Package_View",{package_id:t,package_name:e,price_rub:n,energy_amount:r})}function gD(t,e,n){it("Energy_Purchase_Start",{package_id:t,package_name:e,price_rub:n})}function vD(t,e,n){it("Energy_Purchase_Fail",{package_id:t,package_name:e,price_rub:n})}function yD(){it("Profile_Page_View")}function bD(){it("Tariffs_Page_View")}function xD(t,e,n,r){it("Tariff_View",{tariff_id:t,tariff_name:e,price_rub:n,price_stars:r})}function SD(t,e,n,r){it("Tariff_Purchase_Start",{tariff_id:t,tariff_name:e,payment_type:n,price:r})}function ED(t,e,n){it("Tariff_Purchase_Success",{tariff_id:t,tariff_name:e,payment_type:n})}function Cg(t,e,n){it("Tariff_Purchase_Fail",{tariff_id:t,tariff_name:e,payment_type:n})}function kD(t,e){it("Character_View",{character_id:t,character_name:e})}function TD(t,e){it("Character_Add_To_Favorites",{character_id:t,character_name:e})}function wD(t,e){it("Character_Remove_From_Favorites",{character_id:t,character_name:e})}function CD(t,e){it("Character_Start_Chat",{character_id:t,character_name:e})}function AD(t,e){it("Character_Like",{character_id:t,character_name:e})}function _D(t,e){it("Character_Dislike",{character_id:t,character_name:e})}function MD(t,e){it("DeepLink_Open",{character_id:t,referrer:e||"direct"})}function OD(t,e){it("DeepLink_Character_Found",{character_id:t,character_name:e})}function jD(t){it("DeepLink_Character_Not_Found",{character_id:t})}function RD(t,e,n){it("Character_Share",{character_id:t,character_name:e,share_method:n})}function Ag(t){it("Sort_Change",{sort_type:t})}function _g(t){it("Gender_Filter_Change",{gender:t||"all"})}function ND(){it("Tags_Modal_Open")}function vE(t,e){it("Tag_Select",{tag:t,action:e})}function tf(t){it("Filter_Type_Change",{filter_type:t})}function Mg(t){it("NSFW_Toggle",{enabled:t})}function DD(t){it("Search",{query:t,query_length:t.length})}function LD(){it("Search_Clear")}function zD(){it("Menu_Open")}function nf(t){it("Menu_Navigation",{destination:t})}function ID(){it("Capybara_View")}function BD(){it("Hall_Of_Fame_Open")}function PD(){it("Telegram_Channel_Click")}function UD(t){it("Ad_Banner_Interaction",{action:t})}const HD="https://t.me/RolePlayToPbot/WebApp",qD={content:{backgroundColor:"#2b2b2b",borderRadius:"16px",overflow:"hidden"},body:{padding:0,display:"flex",flexDirection:"column"}},VD={position:"absolute",bottom:0,left:0,right:0,height:"80px",background:"linear-gradient(to bottom, transparent, rgba(43, 43, 43, 0.98))",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"flex-end",paddingBottom:"12px",pointerEvents:"none",zIndex:10,gap:"4px"},FD={animation:"bounceDown 1.5s ease-in-out infinite",color:"rgba(255, 255, 255, 0.9)"},WD={fontSize:"12px",color:"rgba(255, 255, 255, 0.6)",fontWeight:500},GD={backgroundColor:"#2b2b2b",padding:"12px 24px 16px",borderTop:"1px solid rgba(255, 255, 255, 0.1)",flexShrink:0},$D={backgroundColor:"rgba(0, 0, 0, 0.5)",color:"white",padding:"8px",minWidth:"auto",height:"auto"},KD={radius:"sm",blur:2,backgroundOpacity:.5,color:"#2b2b2b"},YD={borderTopLeftRadius:"16px",borderTopRightRadius:"16px",overflow:"hidden",backgroundColor:"#1a1a1a"},XD={objectFit:"contain",width:"100%",height:"100%"},JD={backgroundColor:"rgba(255, 255, 255, 0.06)",borderRadius:"14px",border:"1px solid rgba(255, 255, 255, 0.08)",boxShadow:"inset 0 1px 0 rgba(255, 255, 255, 0.05)"},QD={backgroundColor:"rgba(255, 255, 255, 0.04)",borderRadius:"12px",padding:"12px 16px"},ZD={fontFamily:'"Roboto", sans-serif',letterSpacing:"-0.01em"},e5={backgroundColor:"rgba(239, 68, 68, 0.1)",borderRadius:"12px",border:"1px solid rgba(239, 68, 68, 0.3)",padding:"16px"},t5="https://apiroleplay.capyhub.su/",rf=D.memo(({icon:t,count:e,label:n})=>m.jsxs(pe,{ta:"center",children:[m.jsxs(Re,{gap:4,justify:"center",children:[t,m.jsx(U,{c:"white",size:"sm",fw:600,children:e})]}),m.jsx(U,{c:"dimmed",size:"xs",children:n})]})),n5=D.memo(function({character:e,opened:n,onClose:r,onCharacterUpdate:o,onStartChat:s,onCharacterDelete:l,filterType:u,isAdmin:d=!1}){const[h,p]=D.useState(""),[g,y]=D.useState(!1),[x,S]=D.useState(0),[E,k]=D.useState(null),[w,C]=D.useState(0),[_,R]=D.useState(0),[j,z]=D.useState(0),[B,K]=D.useState(!1),[W,J]=D.useState(!1),[Z,te]=D.useState(!1),[je,ke]=D.useState(!1),[me,H]=D.useState(!1),[ne,ce]=D.useState(null),[Ce,ae]=D.useState(!0),ve=D.useRef(e),fe=D.useRef(null),ue=D.useRef(null),We=u==="created"||d;D.useEffect(()=>{ve.current=e},[e]),D.useEffect(()=>{if(!e||!n||fe.current===e.id)return;fe.current=e.id,kD(e.id,e.name),te(!1),ke(!1),H(!1),ce(null),K(e.is_favorited||!1),z(e.favorites_count||0),S(e.chats_count||0),k(null),C(e.likes||0),R(e.dislikes||0),e.image?.includes("apiroleplay.capyhub.su")?p(e.image):e.file_id?(y(!0),zt(`/v1/characters/photo?file_id=${e.file_id}`).then(Be=>{const gt=`${t5}/${Be.path}`;p(gt)}).catch(Be=>console.error("Error loading modal photo",Be)).finally(()=>y(!1))):p(e.image||"");const Le=e.id;zt(`/v1/characters/stats?public_id=${Le}`).then(Be=>{z(Be.favorites_count),S(Be.selected_count)}).catch(Be=>console.error("Error loading character stats",Be)),zt(`/v1/characters/reactions/status/${Le}`).then(k).catch(Be=>console.error("Error loading reaction status",Be)),zt(`/v1/characters/reactions/count/${Le}`).then(Be=>{C(Be.likes_count),R(Be.dislikes_count)}).catch(Be=>console.error("Error loading likes count",Be))},[e?.id,n]),D.useEffect(()=>{n||(fe.current=null,H(!1),ce(null),ae(!0))},[n]);const Ue=D.useCallback(Le=>{Le.y>50&&ae(!1)},[]),se=D.useCallback((Le={})=>{const Be=ve.current;return Be?{...Be,likes:w,dislikes:_,favorites_count:j,chats_count:x,is_favorited:B,is_liked:E?.is_liked||!1,...Le}:null},[w,_,j,x,B,E]),dt=D.useCallback(async Le=>{const Be=ve.current;if(!Be)return;Le==="like"?AD(Be.id,Be.name):_D(Be.id,Be.name);const gt=Le==="like",Ht=E,Cn=w,zn=_,In=gt?E?.is_liked:E?.is_disliked,Vr=gt?E?.is_disliked:E?.is_liked;let It=w,fr=_;In?gt?It-=1:fr-=1:(gt?It+=1:fr+=1,Vr&&(gt?fr-=1:It-=1)),C(It),R(fr);const ys=gt?!In:!1,Ea=gt?!1:!In;k({public_id:Be.id,is_liked:ys,is_disliked:Ea});const Bn=se({likes:It,dislikes:fr,is_liked:ys});Bn&&o?.(Bn);try{const Ci=await zt(`/v1/characters/reactions/${Le}`,{method:"POST",body:JSON.stringify({public_id:Be.id})});k({public_id:Ci.public_id,is_liked:Ci.is_liked,is_disliked:Ci.is_disliked})}catch(Ci){console.error(`Failed to set ${Le}:`,Ci),C(Cn),R(zn),k(Ht);const bs=se({likes:Cn,dislikes:zn,is_liked:Ht?.is_liked||!1});bs&&o?.(bs)}},[E,w,_,o,se]),mt=D.useCallback(()=>dt("like"),[dt]),wn=D.useCallback(()=>dt("dislike"),[dt]),Wn=D.useCallback(async()=>{const Le=ve.current;if(!Le)return;const Be=B,gt=j,Ht=!B,Cn=Ht?j+1:j-1;Ht?TD(Le.id,Le.name):wD(Le.id,Le.name),K(Ht),z(Cn),J(!0);const zn=se({is_favorited:Ht,favorites_count:Cn});zn&&o?.(zn);try{const In=await zt(`/v1/characters/favorite/${Le.id}`,{method:"POST"});if(In.success){K(In.is_favorite);const Vr=In.is_favorite?gt+1:gt-1;z(Vr);const It=se({is_favorited:In.is_favorite,favorites_count:Vr});It&&o?.(It)}}catch(In){console.error("Failed to toggle favorite:",In),K(Be),z(gt);const Vr=se({is_favorited:Be,favorites_count:gt});Vr&&o?.(Vr)}finally{J(!1)}},[B,j,o,se]),yn=D.useCallback(async()=>{const Le=ve.current;if(Le){CD(Le.id,Le.name),te(!0);try{const Be=await zt(`/v1/characters/${Le.id}/select`,{method:"POST"});if(Be.detail==="BOT_BLOCKED"){kt.showAlert(",  ?   ...     ,      ? "),te(!1);return}if(Be.detail==="MESSAGE_SEND_PERMISSION"){kt.showAlert("   ,     !  :) "),kt.requestWriteAccess(gt=>{gt?yn():(kt.showAlert(" ....      "),te(!1))}),te(!1);return}if(Be.detail==="CHAT_NOT_FOUND"){kt.showAlert(",   !     ?"),kt.requestWriteAccess(gt=>{gt?yn():(kt.showAlert("      "),te(!1))}),te(!1);return}s?.(Le.id),kt.close()}catch(Be){console.error("Failed to start chat with character:",Be),kt.showAlert("-        .   ")}finally{te(!1)}}},[s]),Tr=D.useCallback(()=>{H(!0),ce(null)},[]),wr=D.useCallback(()=>{H(!1),ce(null)},[]),Ut=D.useCallback(async()=>{const Le=ve.current;if(Le){ke(!0),ce(null);try{await zt(`/v1/characters/${Le.id}`,{method:"DELETE"}),l?.(Le.id),r()}catch(Be){console.error("Failed to delete character:",Be),Be?.status===403||Be?.message?.includes("403")?Be?.message?.includes("users are using it")||Be?.detail?.includes("users are using it")?ce("   :    50  .   ."):ce("       ."):ce("   .  .")}finally{ke(!1)}}},[l,r]),qr=D.useCallback(()=>{const Le=ve.current;if(!Le)return;const Be=kt.initDataUnsafe?.user?.id,gt=Be?`ref_share_${Be}_char_${Le.id}`:`char_${Le.id}`,Ht=`${HD}?startapp=${gt}`,Cn=`  ${Le.name}! `;RD(Le.id,Le.name,"telegram");const zn=`https://t.me/share/url?url=${encodeURIComponent(Ht)}&text=${encodeURIComponent(Cn)}`;kt.openTelegramLink(zn)},[]);return e?m.jsxs(as,{opened:n,onClose:r,size:"lg",centered:!0,withCloseButton:!1,styles:qD,children:[m.jsx("style",{children:`
          @keyframes bounceDown {
            0%, 100% { transform: translateY(0); opacity: 0.7; }
            50% { transform: translateY(6px); opacity: 1; }
          }
        `}),m.jsxs(pe,{pos:"relative",style:{display:"flex",flexDirection:"column",maxHeight:"80vh",height:"80vh"},children:[m.jsx(xM,{type:"auto",viewportRef:ue,onScrollPositionChange:Ue,style:{flex:1,minHeight:0},children:m.jsxs(pe,{pos:"relative",children:[m.jsx(pe,{style:{position:"absolute",top:16,right:16,zIndex:10},children:m.jsx(He,{variant:"subtle",color:"gray",size:"sm",onClick:r,style:$D,children:""})}),m.jsxs(pe,{pos:"relative",style:{minHeight:200,...YD},children:[m.jsx(Lh,{visible:g,zIndex:5,overlayProps:KD}),m.jsx(cT,{ratio:1/1,children:m.jsx(to,{src:h,alt:e.name,fallbackSrc:"https://placehold.co/600x600/1a1a1a/666?text=No+Image",style:XD})}),Ce&&m.jsxs(pe,{style:VD,children:[m.jsx(U,{style:WD,children:" "}),m.jsx(c0,{size:24,style:FD})]})]}),m.jsxs(Ee,{gap:"md",p:"xl",pb:"md",children:[m.jsx(U,{c:"white",size:"xl",fw:700,ta:"center",style:ZD,children:e.name}),m.jsx(pe,{style:QD,children:m.jsxs(Re,{justify:"space-around",children:[m.jsx(rf,{icon:m.jsx(fS,{size:18,color:"#66bb6a"}),count:w,label:""}),m.jsx(rf,{icon:m.jsx(dS,{size:18,color:"#ef5350"}),count:_,label:""}),m.jsx(rf,{icon:m.jsx(gv,{size:18,color:"#fdd835"}),count:j,label:" "}),m.jsx(rf,{icon:m.jsx(Df,{size:18,color:"#42a5f5"}),count:x,label:""})]})}),m.jsxs(Re,{justify:"center",gap:"sm",children:[m.jsx(He,{leftSection:m.jsx(fS,{size:18}),variant:E?.is_liked?"filled":"light",color:"green",onClick:mt,loading:!E,radius:"md",children:""}),m.jsx(He,{leftSection:m.jsx(dS,{size:18}),variant:E?.is_disliked?"filled":"light",color:"red",onClick:wn,loading:!E,radius:"md",children:""})]}),m.jsxs(pe,{p:"md",style:JD,children:[m.jsx(U,{c:"dimmed",size:"xs",tt:"uppercase",fw:600,mb:"xs",style:{letterSpacing:"0.05em"},children:" "}),m.jsx(U,{c:"#e4e4e7",size:"sm",style:{lineHeight:1.7},children:e.description||" ."})]}),me&&m.jsxs(pe,{style:e5,children:[m.jsxs(U,{c:"white",size:"sm",fw:500,mb:"sm",children:[' ,     "',e.name,'"?']}),m.jsx(U,{c:"dimmed",size:"xs",mb:"md",children:"   .     ."}),ne&&m.jsx(U,{c:"red.4",size:"sm",mb:"md",children:ne}),m.jsxs(Re,{gap:"sm",children:[m.jsx(He,{variant:"filled",color:"red",size:"sm",onClick:Ut,loading:je,children:", "}),m.jsx(He,{variant:"light",color:"gray",size:"sm",onClick:wr,disabled:je,children:""})]})]}),m.jsxs(Ee,{gap:"sm",children:[m.jsx(He,{leftSection:B?m.jsx(Lf,{size:20}):m.jsx(gv,{size:20}),size:"md",variant:B?"filled":"light",color:"yellow",fullWidth:!0,radius:"md",onClick:Wn,loading:W,children:B?"  ":" "}),m.jsx(He,{leftSection:m.jsx(mj,{size:20}),size:"md",variant:"light",color:"grape",fullWidth:!0,radius:"md",onClick:qr,children:""}),We&&!me&&m.jsx(He,{leftSection:m.jsx(Tj,{size:20}),size:"md",variant:"outline",color:"red",fullWidth:!0,radius:"md",onClick:Tr,children:" "})]})]})]})}),m.jsx(pe,{style:GD,children:m.jsx(He,{leftSection:m.jsx(Df,{size:20}),size:"md",variant:"filled",color:"blue",fullWidth:!0,radius:"md",onClick:yn,loading:Z,styles:{root:{fontWeight:600,boxShadow:"0 -2px 12px rgba(28, 126, 214, 0.35)"}},children:" "})})]})]}):null});function wu(){const t=pa(),[e,n]=D.useState(!1),r=new Date().getFullYear(),[o,s]=D.useState(!1),[l,u]=D.useState(""),d=["https://testapi.capyhub.su/photo/capy/1.jpg","https://testapi.capyhub.su/photo/capy/2.jpeg","https://testapi.capyhub.su/photo/capy/3.jpeg","https://testapi.capyhub.su/photo/capy/4.jpeg","https://testapi.capyhub.su/photo/capy/5.jpeg","https://testapi.capyhub.su/photo/capy/6.webp"],h=()=>{const w=Math.floor(Math.random()*d.length);return d[w]},[p,g]=D.useState(!1),[y,x]=D.useState(!1);D.useEffect(()=>(()=>{const _=localStorage.getItem("tg_ad_viewed_at"),R=4320*60*1e3;let j=!1;if(!_)j=!0;else{const{timestamp:z}=JSON.parse(_);new Date().getTime()-z>R&&(j=!0)}if(j){const z=setTimeout(()=>{x(!0)},2e4);return()=>clearTimeout(z)}})(),[]);const S=(w="close")=>{x(!1),localStorage.setItem("tg_ad_viewed_at",JSON.stringify({timestamp:new Date().getTime()})),UD(w),w==="subscribe"&&kt.openTelegramLink("https://t.me/AI_RolePlay_TG")},E={backgroundColor:"rgb(41, 41, 41)",borderRadius:"12px",padding:"12px 16px",cursor:"pointer",transition:"background-color 0.2s ease"},k={background:"linear-gradient(90deg, #2AABEE 0%, #229ED9 100%)",borderRadius:"12px",padding:"12px 16px",cursor:"pointer",boxShadow:"0 4px 15px rgba(34, 158, 217, 0.4)",transition:"transform 0.1s ease"};return m.jsxs(m.Fragment,{children:[m.jsx(pe,{style:{backgroundColor:"rgb(28, 28, 28)",borderBottom:"1px solid rgb(28, 28, 28)",padding:"16px",position:"sticky",top:0,zIndex:100},children:m.jsxs(Re,{justify:"space-between",children:[m.jsx(U,{size:"xl",fw:700,c:"white",children:" "}),m.jsx(SM,{opened:e,onClick:()=>{e||zD(),n(!e)},color:"white"})]})}),m.jsx(EM,{opened:e,onClose:()=>n(!1),position:"right",padding:"md",size:"300px",styles:{content:{backgroundColor:"rgb(28, 28, 28)"},header:{backgroundColor:"rgb(28, 28, 28)"},close:{color:"white"}},children:m.jsxs(Ee,{justify:"space-between",h:"calc(100vh - 80px)",children:[m.jsxs(Ee,{gap:"md",children:[m.jsx(pe,{style:E,onClick:()=>{n(!1),t("/"),nf("home")},children:m.jsx(U,{c:"white",size:"lg",children:" "})}),m.jsx(pe,{style:E,onClick:()=>{n(!1),t("/create"),nf("create")},children:m.jsx(U,{c:"white",size:"lg",children:"  "})}),m.jsx(pe,{style:E,onClick:()=>{n(!1),t("/profile"),nf("profile")},children:m.jsx(U,{c:"white",size:"lg",children:" "})}),m.jsx(pe,{style:E,onClick:()=>{n(!1),t("/tariffs"),nf("tariffs")},children:m.jsx(U,{c:"white",size:"lg",children:" "})}),m.jsx(pe,{style:E,onClick:()=>{u(h()),s(!0),ID()},children:m.jsx(U,{c:"white",size:"lg",children:"  ?"})}),m.jsx(pe,{style:E,onClick:()=>{n(!1),g(!0),BD()},children:m.jsx(U,{c:"white",size:"lg",children:"  "})}),m.jsxs(pe,{style:k,onClick:()=>{n(!1),kt.openTelegramLink("https://t.me/AI_RolePlay_TG"),PD()},children:[m.jsxs(Re,{justify:"space-between",children:[m.jsx(U,{c:"white",size:"lg",fw:700,children:"  Telegram"}),m.jsx(U,{size:"xl",children:""})]}),m.jsx(U,{c:"white",size:"xs",opacity:.9,mt:4,children:"  "})]})]}),m.jsxs(Ee,{gap:"xs",align:"center",children:[m.jsx(uT,{href:"https://t.me/aiogram_tgbots",c:"white",size:"sm",underline:"hover",target:"_blank",children:""}),m.jsxs(U,{size:"xs",c:"dimmed",ta:"center",children:[" ",r,"   "]})]})]})}),m.jsx(as,{opened:o,onClose:()=>s(!1),centered:!0,size:"lg",styles:{content:{backgroundColor:"rgb(28, 28, 28)"},header:{backgroundColor:"rgb(28, 28, 28)"},close:{color:"white"}},children:m.jsxs(Ee,{align:"center",gap:"md",children:[m.jsx(to,{src:l,alt:"",radius:"md",style:{maxWidth:"100%"}}),m.jsx(U,{c:"white",ta:"center",children:"      .     :)"})]})}),m.jsx(as,{opened:p,onClose:()=>g(!1),centered:!0,size:"lg",title:m.jsx(U,{c:"white",size:"xl",fw:700,children:"  "}),styles:{content:{backgroundColor:"rgb(28, 28, 28)"},header:{backgroundColor:"rgb(28, 28, 28)"},close:{color:"white"},title:{color:"white"}},children:m.jsxs(Ee,{gap:"xl",children:[m.jsx(U,{c:"white",size:"lg",ta:"center",fw:600,children:" "}),m.jsxs(Re,{justify:"center",gap:"xl",children:[m.jsxs(Ee,{align:"center",gap:"md",style:{maxWidth:"200px"},children:[m.jsx(to,{src:"https://testapi.capyhub.su/photo/father/1.jpg",alt:" ",radius:"50%",w:150,h:150,fit:"cover"}),m.jsx(U,{c:"white",size:"lg",fw:600,ta:"center",children:" "}),m.jsx(U,{c:"dimmed",size:"sm",ta:"center",children:"    ,  ."})]}),m.jsxs(Ee,{align:"center",gap:"md",style:{maxWidth:"200px"},children:[m.jsx(to,{src:"https://testapi.capyhub.su/photo/father/2.jpg",alt:"",radius:"50%",w:150,h:150,fit:"cover"}),m.jsx(U,{c:"white",size:"lg",fw:600,ta:"center",children:""}),m.jsx(U,{c:"dimmed",size:"sm",ta:"center",children:"    ,   ."})]})]})]})}),m.jsx(as,{opened:y,onClose:()=>S("close"),centered:!0,withCloseButton:!1,size:"sm",padding:"0",radius:"xl",styles:{content:{backgroundColor:"rgb(32, 32, 32)",border:"1px solid rgb(45, 45, 45)",overflow:"visible"},overlay:{backgroundColor:"rgba(0, 0, 0, 0.7)",backdropFilter:"blur(3px)"}},children:m.jsxs(pe,{pos:"relative",children:[m.jsx(pe,{h:110,style:{background:"radial-gradient(circle at top right, #2AABEE 0%, #0077B5 100%)",borderRadius:"var(--mantine-radius-xl) var(--mantine-radius-xl) 0 0"}}),m.jsx(pe,{style:{position:"absolute",top:50,left:"50%",transform:"translateX(-50%)",borderRadius:"50%",padding:"6px",backgroundColor:"rgb(32, 32, 32)",boxShadow:"0 -4px 12px rgba(0,0,0,0.2)"},children:m.jsx(ls,{size:80,radius:"50%",variant:"gradient",gradient:{from:"#2AABEE",to:"#229ED9",deg:135},style:{boxShadow:"0 8px 20px rgba(42, 171, 238, 0.4)"},children:m.jsx(U,{size:Gt(42),children:""})})}),m.jsxs(Ee,{px:"xl",pt:60,pb:"lg",align:"center",gap:"xs",children:[m.jsxs(U,{ta:"center",fw:900,size:Gt(24),c:"white",style:{lineHeight:1.1},children:["! ",m.jsx("br",{}),m.jsx(U,{span:!0,variant:"gradient",gradient:{from:"yellow",to:"orange",deg:45},children:" ?"})]}),m.jsxs(U,{c:"dimmed",ta:"center",size:"sm",mt:"xs",lh:1.4,children:["  ,      . ",m.jsx("br",{}),m.jsx("b",{children:",    !"})]}),m.jsxs(Ee,{w:"100%",mt:"lg",gap:"sm",children:[m.jsx(He,{fullWidth:!0,size:"md",variant:"gradient",gradient:{from:"#2AABEE",to:"#0088cc",deg:90},radius:"xl",onClick:()=>S("subscribe"),styles:{root:{boxShadow:"0 4px 12px rgba(42, 171, 238, 0.3)"}},children:"   "}),m.jsx(He,{variant:"subtle",color:"gray",size:"sm",radius:"xl",onClick:()=>S("close"),children:"  "})]})]})]})})]})}function r5({onSearch:t}){const e=[": walter white",": genshin impact",":  ",": "],[n,r]=D.useState(e[Math.floor(Math.random()*e.length)]),[o,s]=D.useState(""),l=/^[a-zA-Z--0-9\s]*$/;D.useEffect(()=>{const g=setInterval(()=>{r(e[Math.floor(Math.random()*e.length)])},3e3);return()=>clearInterval(g)},[]);const u=g=>{const y=g.currentTarget.value;y.length<=20&&l.test(y)&&s(y)},d=()=>{const g=o.trim();t(g),g&&DD(g)},h=g=>{g.key==="Enter"&&d()},p=()=>{s(""),t(""),LD()};return m.jsxs(Re,{gap:"xs",mt:"xs",px:"md",children:[m.jsx(o0,{value:o,onChange:u,onKeyDown:h,placeholder:n,size:"md",style:{flex:1},rightSection:o&&m.jsx(kM,{size:"sm",onClick:p}),styles:{input:{backgroundColor:"#2d2d2d",color:"white",borderColor:"#444",borderRadius:Gt(24),paddingLeft:Gt(20),paddingRight:Gt(20),"&::placeholder":{color:"white",opacity:.7}}}}),m.jsx(Xo,{size:42,radius:"xl",variant:"filled",color:"blue",onClick:d,loading:!1,children:m.jsx(hj,{style:{width:Gt(20),height:Gt(20)},stroke:1.5})})]})}function i5({selectedTags:t,onTagsChange:e,currentFilterType:n,onFilterTypeChange:r,sortBy:o,onSortChange:s,nsfwEnabled:l,onNsfwChange:u,selectedGender:d,onGenderChange:h}){const[p,g]=D.useState(!1),[y,x]=D.useState(!1),[S,E]=D.useState([]),[k,w]=D.useState(!1),[C,_]=D.useState(!1);D.useEffect(()=>{(async()=>{w(!0),_(!1);try{const te=await zt("/v1/characters/tags");E(te.tags)}catch(te){console.error("   :",te),_(!0)}finally{w(!1)}})()},[]);const R=()=>{l?(u(!1),Mg(!1)):localStorage.getItem("nsfw_accepted")==="true"?(u(!0),Mg(!0)):x(!0)},j=()=>{localStorage.setItem("nsfw_accepted","true"),u(!0),Mg(!0),x(!1)},z=Z=>{if(t.includes(Z))e(t.filter(te=>te!==Z)),vE(Z,"remove");else{if(t.length>=5)return;e([...t,Z]),vE(Z,"add")}},B=()=>{switch(n){case"favorite":return"";case"created":return" ";case"selected":return" ";case"all":default:return" "}},K=()=>{switch(o){case"top_liked":return" ()";case"top_disliked":return"";case"none":default:return" "}},W=()=>{switch(d){case"":return"";case"":return"";default:return""}},J={root:{backgroundColor:"#2a2a2a",color:"#e0e0e0",borderRadius:"15px",padding:"2px 12px",height:"32px",fontSize:"13px",border:"1px solid #3a3a3a",transition:"all 0.15s ease","&:hover":{backgroundColor:"#3a3a3a",borderColor:"#4a4a4a",transform:"translateY(-1px)"}}};return m.jsxs(m.Fragment,{children:[m.jsx("style",{children:`
                    .dark-menu-item {
                        color: white !important;
                        background-color: transparent !important;
                    }
                    .dark-menu-item:hover,
                    .dark-menu-item[data-hovered] {
                        background-color: #1c7ed6 !important;
                    }
                `}),m.jsx("div",{style:{display:"flex",justifyContent:"center",padding:"0px 5px"},children:m.jsxs("div",{style:{display:"flex",gap:"8px",flexWrap:"wrap",backgroundColor:"#1a1a1a",padding:"8px 15px",borderRadius:"20px",alignItems:"center",justifyContent:"center"},children:[m.jsx("div",{style:{display:"flex",alignItems:"center",color:"#888",marginRight:"4px"},children:m.jsx(DO,{size:18,stroke:1.5})}),m.jsxs(jt,{shadow:"md",width:200,children:[m.jsx(jt.Target,{children:m.jsxs(He,{styles:J,leftSection:m.jsx(UO,{size:14}),children:[K()," ",m.jsx("span",{style:{marginLeft:"4px",fontSize:"10px"},children:""})]})}),m.jsxs(jt.Dropdown,{styles:{dropdown:{backgroundColor:"#2a2a2a",border:"1px solid #3a3a3a"}},children:[m.jsx(jt.Item,{onClick:()=>{s("none"),Ag("none")},className:"dark-menu-item",children:" "}),m.jsx(jt.Divider,{style:{borderColor:"#3a3a3a"}}),m.jsx(jt.Item,{onClick:()=>{s("top_liked"),Ag("top_liked")},className:"dark-menu-item",children:" ( )"}),m.jsx(jt.Divider,{style:{borderColor:"#3a3a3a"}}),m.jsx(jt.Item,{onClick:()=>{s("top_disliked"),Ag("top_disliked")},className:"dark-menu-item",children:" ( )"})]})]}),m.jsxs(jt,{shadow:"md",width:200,children:[m.jsx(jt.Target,{children:m.jsxs(He,{leftSection:m.jsx(ZO,{size:14}),styles:{root:{backgroundColor:d?"#1c7ed6":"#2a2a2a",color:d?"white":"#e0e0e0",borderRadius:"15px",padding:"2px 12px",height:"32px",fontSize:"13px",border:d?"1px solid #1c7ed6":"1px solid #3a3a3a",transition:"all 0.15s ease","&:hover":{backgroundColor:d?"#1864ab":"#3a3a3a",borderColor:d?"#1864ab":"#4a4a4a",transform:"translateY(-1px)"}}},children:[W()," ",m.jsx("span",{style:{marginLeft:"4px",fontSize:"10px"},children:""})]})}),m.jsxs(jt.Dropdown,{styles:{dropdown:{backgroundColor:"#2a2a2a",border:"1px solid #3a3a3a"}},children:[m.jsx(jt.Item,{onClick:()=>{h(null),_g(null)},className:"dark-menu-item",children:""}),m.jsx(jt.Divider,{style:{borderColor:"#3a3a3a"}}),m.jsx(jt.Item,{onClick:()=>{h(""),_g("")},className:"dark-menu-item",children:""}),m.jsx(jt.Divider,{style:{borderColor:"#3a3a3a"}}),m.jsx(jt.Item,{onClick:()=>{h(""),_g("")},className:"dark-menu-item",children:""})]})]}),!C&&m.jsxs(m.Fragment,{children:[m.jsx(He,{onClick:()=>{g(!0),ND()},leftSection:m.jsx(xj,{size:14}),styles:{root:{backgroundColor:t.length>0?"#1c7ed6":"#2a2a2a",color:t.length>0?"white":"#e0e0e0",borderRadius:"15px",padding:"2px 12px",height:"32px",fontSize:"13px",border:t.length>0?"1px solid #1c7ed6":"1px solid #3a3a3a",transition:"all 0.15s ease","&:hover":{backgroundColor:t.length>0?"#1864ab":"#3a3a3a",borderColor:t.length>0?"#1864ab":"#4a4a4a",transform:"translateY(-1px)"}}},children:t.length>0?` (${t.length})`:""}),m.jsx(as,{opened:p,onClose:()=>g(!1),title:`  (${t.length}/5)`,centered:!0,styles:{content:{backgroundColor:"#2a2a2a"},header:{backgroundColor:"#2a2a2a",color:"white"},body:{backgroundColor:"#2a2a2a"}},children:k?m.jsx(pe,{style:{display:"flex",justifyContent:"center",padding:"20px"},children:m.jsx(Rl,{color:"blue"})}):m.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"10px"},children:[S.map(Z=>{const te=t.includes(Z),je=!te&&t.length>=5;return m.jsx(He,{onClick:()=>z(Z),disabled:je,styles:{root:{backgroundColor:te?"#1c7ed6":"#3a3a3a",color:je?"#666":"white",borderRadius:"20px",border:"none",opacity:je?.5:1,cursor:je?"not-allowed":"pointer","&:hover":{backgroundColor:te?"#1864ab":je?"#3a3a3a":"#4a4a4a"}}},children:Z},Z)}),S.length===0&&m.jsx(U,{c:"dimmed",children:"  "})]})})]}),m.jsxs(jt,{shadow:"md",width:200,children:[m.jsx(jt.Target,{children:m.jsxs(He,{leftSection:m.jsx(Cj,{size:14}),styles:{root:{backgroundColor:n!=="all"?"#1c7ed6":"#2a2a2a",color:n!=="all"?"white":"#e0e0e0",borderRadius:"15px",padding:"2px 12px",height:"32px",fontSize:"13px",border:n!=="all"?"1px solid #1c7ed6":"1px solid #3a3a3a",transition:"all 0.15s ease","&:hover":{backgroundColor:n!=="all"?"#1864ab":"#3a3a3a",borderColor:n!=="all"?"#1864ab":"#4a4a4a",transform:"translateY(-1px)"}}},children:[B()," ",m.jsx("span",{style:{marginLeft:"4px",fontSize:"10px"},children:""})]})}),m.jsxs(jt.Dropdown,{styles:{dropdown:{backgroundColor:"#2a2a2a",border:"1px solid #3a3a3a"}},children:[m.jsx(jt.Item,{onClick:()=>{r("all"),tf("all")},className:"dark-menu-item",children:" "}),m.jsx(jt.Divider,{style:{borderColor:"#3a3a3a"}}),m.jsx(jt.Item,{onClick:()=>{r("favorite"),tf("favorite")},className:"dark-menu-item",children:" "}),m.jsx(jt.Divider,{style:{borderColor:"#3a3a3a"}}),m.jsx(jt.Item,{onClick:()=>{r("created"),tf("created")},className:"dark-menu-item",children:"  "}),m.jsx(jt.Divider,{style:{borderColor:"#3a3a3a"}}),m.jsx(jt.Item,{onClick:()=>{r("selected"),tf("selected")},className:"dark-menu-item",children:"  "})]})]}),m.jsx(He,{onClick:R,leftSection:m.jsx(JO,{size:14}),styles:{root:{backgroundColor:l?"#fa5252":"#2a2a2a",color:l?"white":"#e0e0e0",borderRadius:"15px",padding:"2px 12px",height:"32px",fontSize:"13px",border:l?"1px solid #fa5252":"1px solid #3a3a3a",transition:"all 0.15s ease","&:hover":{backgroundColor:l?"#c92a2a":"#3a3a3a",borderColor:l?"#c92a2a":"#4a4a4a",transform:"translateY(-1px)"}}},children:"18+"})]})}),m.jsxs(as,{opened:y,onClose:()=>x(!1),title:" ",centered:!0,styles:{content:{backgroundColor:"#2a2a2a",color:"white"},header:{backgroundColor:"#2a2a2a",color:"white"}},children:[m.jsx(U,{size:"sm",mb:"lg",children:"   18 ?     ,    ?"}),m.jsxs(Re,{justify:"flex-end",children:[m.jsx(He,{variant:"default",onClick:()=>x(!1),children:""}),m.jsx(He,{color:"red",onClick:j,children:",   18"})]})]})]})}const o5=20,s5={backgroundColor:"#111113",minHeight:"100vh",color:"#e4e4e7",paddingBottom:"4rem"},a5=`
  .custom-pagination .mantine-Pagination-control {
    background-color: #000000;
    border: 1px solid #3f3f46;
    color: #e4e4e7;
    transition: all 0.2s;
  }
  .custom-pagination .mantine-Pagination-control:not([data-active]):not([data-disabled]):hover {
    background-color: #18181b;
  }
  .custom-pagination .mantine-Pagination-control[data-active] {
    background-color: #228be6 !important;
    border-color: #228be6 !important;
    color: #ffffff !important;
  }
  .custom-pagination .mantine-Pagination-control[data-active]:hover {
    background-color: #1c7ed6 !important;
  }
  .custom-pagination .mantine-Pagination-control[data-disabled] {
    background-color: #000000 !important;
    border: 1px solid #3f3f46 !important;
    color: #52525b !important;
    opacity: 0.5;
    cursor: not-allowed;
  }
`,yE=t=>({id:t.public_id,name:t.name,description:t.description,image:t.file_id?`/api/files/${t.file_id}`:null,file_id:t.file_id,tags:t.tags??[],is_favorited:t.is_favorite,is_liked:!1,likes:t.likes_count??0,dislikes:t.dislikes_count??0,favorites_count:t.favorites_count??0,chats_count:t.chats_count??0});function bE(){const[t,e]=pT(),[n,r]=D.useState(1),[o,s]=D.useState([]),[l,u]=D.useState(!1),[d,h]=D.useState(null),[p,g]=D.useState(1),[y,x]=D.useState([]),[S,E]=D.useState(null),[k,w]=D.useState(""),[C,_]=D.useState("none"),[R,j]=D.useState(null),[z,B]=D.useState(!1),[K,W]=D.useState(()=>localStorage.getItem("nsfw_accepted")==="true"),[J,Z]=D.useState(()=>t.get("filter")||"all"),[te,je]=D.useState(!1),[ke,me]=D.useState(!1),H=D.useRef(!1);D.useEffect(()=>{(async()=>{try{const se=await zt("/api/user/is-admin");me(se.is_admin)}catch(se){console.error("Failed to check admin status:",se),me(!1)}})()},[]),D.useEffect(()=>{(async()=>{if(H.current)return;const se=sessionStorage.getItem("deeplink_character_id");if(se){H.current=!0,sessionStorage.removeItem("deeplink_character_id");try{const dt=await zt(`/v1/characters/${se}`),mt=yE(dt);OD(mt.id,mt.name),j(mt),B(!0)}catch(dt){console.error("Failed to load character from deep link:",dt),jD(se)}}})()},[]),D.useEffect(()=>{const Ue=()=>{je(window.scrollY>300)};return window.addEventListener("scroll",Ue),()=>window.removeEventListener("scroll",Ue)},[]);const ne=D.useCallback(()=>{window.scrollTo({top:0,behavior:"smooth"})},[]),ce=D.useCallback(Ue=>{Z(Ue),Ue==="all"?t.delete("filter"):t.set("filter",Ue),e(t)},[t,e]);D.useEffect(()=>{r(1)},[y,S,J,k,C,K]),D.useEffect(()=>{(async()=>{u(!0),h(null);try{const se=new URLSearchParams({filter_type:J,page:n.toString(),page_size:o5.toString(),sort_by:C,show_nsfw:K.toString()});y.forEach(wn=>se.append("tags",wn)),S&&se.append("tags",S);const dt=k.trim();dt&&se.append("search_query",dt);const mt=await zt(`/v1/characters/list?${se}`);g(mt.total_pages),s(mt.characters.map(yE))}catch(se){console.error("Failed to fetch characters:",se),h("   .")}finally{u(!1)}})(),window.scrollTo({top:0,behavior:"smooth"})},[n,y,S,J,k,C,K]);const Ce=D.useCallback(Ue=>{j(Ue),B(!0)},[]),ae=D.useCallback(()=>B(!1),[]),ve=D.useCallback(Ue=>w(Ue),[]),fe=D.useCallback(Ue=>{s(se=>se.map(dt=>dt.id===Ue.id?Ue:dt)),j(Ue)},[]),ue=D.useCallback(Ue=>{s(se=>se.filter(dt=>dt.id!==Ue)),j(null)},[]),We=D.useMemo(()=>k?`  "${k}"   `:"  ",[k]);return m.jsxs(pe,{style:s5,children:[m.jsx("style",{children:a5}),m.jsx(wu,{}),m.jsxs(Yn,{size:"xl",pt:"md",children:[m.jsx(pe,{mb:"sm",children:m.jsx(r5,{onSearch:ve})}),m.jsx(pe,{mb:"xl",children:m.jsx(i5,{selectedTags:y,onTagsChange:x,currentFilterType:J,onFilterTypeChange:ce,sortBy:C,onSortChange:_,nsfwEnabled:K,onNsfwChange:W,selectedGender:S,onGenderChange:E})})]}),m.jsxs(Yn,{size:"xl",style:{position:"relative",minHeight:"50vh"},children:[m.jsx(Lh,{visible:l,zIndex:1e3,overlayProps:{radius:"sm",blur:2,backgroundOpacity:.5,color:"#000"},loaderProps:{type:"bars",color:"blue"}}),d&&m.jsx(Zs,{h:200,children:m.jsx(U,{c:"red.4",size:"lg",fw:500,children:d})}),!l&&!d&&o.length===0&&m.jsxs(Zs,{h:300,style:{flexDirection:"column"},children:[m.jsx(uj,{size:48,stroke:1.5,color:"#52525b"}),m.jsx(U,{c:"dimmed",mt:"md",size:"lg",children:We})]}),m.jsx(dT,{cols:{base:1,xs:2,sm:2,md:3,lg:4,xl:5},spacing:{base:"md",sm:"lg"},verticalSpacing:{base:"md",sm:"xl"},children:o.map(Ue=>m.jsx(Pj,{character:Ue,onOpen:()=>Ce(Ue)},Ue.id))}),p>1&&m.jsx(Zs,{mt:50,children:m.jsx(TM,{total:p,value:n,onChange:r,size:"lg",radius:"md",withEdges:!0,withControls:!1,className:"custom-pagination"})}),m.jsx(n5,{character:R,opened:z,onClose:ae,onCharacterUpdate:fe,onCharacterDelete:ue,filterType:J,isAdmin:ke})]}),m.jsx(wM,{mounted:te,transition:"slide-up",duration:300,children:Ue=>m.jsx(Xo,{style:{...Ue,position:"fixed",bottom:24,right:24,zIndex:1e3},size:48,radius:"xl",variant:"filled",color:"blue",onClick:ne,"aria-label":" ",children:m.jsx(BO,{size:24})})})]})}function l5(){const t=pa(),[e,n]=D.useState(null),[r,o]=D.useState(!0);if(D.useEffect(()=>(yD(),kt.BackButton.show(),kt.BackButton.onClick(()=>t("/")),(async()=>{try{const d=await zt("/v1/profile/");n(d)}catch(d){console.error("  :",d)}finally{o(!1)}})(),()=>{kt.BackButton.hide()}),[t]),r)return m.jsx(Zs,{style:{height:"100vh",background:"#1a1a1a"},children:m.jsx(Rl,{size:"lg",color:"violet"})});if(!e)return m.jsx(Yn,{size:"sm",py:"xl",style:{background:"#1a1a1a",minHeight:"100vh"},children:m.jsx(U,{c:"red",ta:"center",size:"lg",fw:600,style:{fontFamily:"Roboto, sans-serif"},children:"   "})});const s=kt.initDataUnsafe.user,l=e.requests_used_today/e.daily_requests_limit*100;return m.jsxs(m.Fragment,{children:[m.jsx(wu,{}),m.jsx(Yn,{size:"sm",py:"lg",style:{background:"#1a1a1a",minHeight:"100vh",fontFamily:"Roboto, sans-serif"},children:m.jsxs(Ee,{gap:"lg",children:[m.jsx(lr,{p:"xl",radius:"xl",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",boxShadow:"0 8px 32px rgba(102, 126, 234, 0.3)",border:"1px solid rgba(255, 255, 255, 0.1)"},children:m.jsxs(Ee,{align:"center",gap:"md",children:[m.jsx(CM,{src:s?.photo_url,size:90,radius:"50%",style:{border:"3px solid rgba(255, 255, 255, 0.9)",boxShadow:"0 4px 16px rgba(0, 0, 0, 0.2)"},children:s?.first_name?.[0]}),m.jsxs(U,{size:"xl",fw:600,c:"white",ta:"center",style:{fontFamily:"Roboto, sans-serif"},children:[s?.first_name," ",s?.last_name]}),s?.username&&m.jsxs(U,{size:"md",c:"rgba(255,255,255,0.85)",ta:"center",fw:500,style:{fontFamily:"Roboto, sans-serif"},children:["@",s.username]}),m.jsxs(U,{size:"sm",c:"rgba(255,255,255,0.7)",ta:"center",fw:400,style:{fontFamily:"Roboto, sans-serif"},children:["ID: ",s?.id]})]})}),m.jsxs(lr,{p:"md",radius:"xl",style:{background:"linear-gradient(135deg, #2d2d2d 0%, #252525 100%)",border:"1px solid rgba(255, 255, 255, 0.08)",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.25)"},children:[m.jsx(U,{size:"sm",c:"#9ca3af",ta:"center",mb:"md",fw:500,style:{fontFamily:"Roboto, sans-serif"},children:"   "}),m.jsxs(Re,{justify:"center",gap:"sm",children:[m.jsx(He,{variant:"gradient",gradient:{from:"#f59e0b",to:"#d97706"},radius:"xl",size:"md",leftSection:m.jsx(gv,{size:18}),onClick:()=>t("/?filter=favorite"),style:{fontFamily:"Roboto, sans-serif",fontWeight:600,boxShadow:"0 4px 15px rgba(245, 158, 11, 0.3)",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:u=>{u.currentTarget.style.transform="translateY(-2px)",u.currentTarget.style.boxShadow="0 6px 20px rgba(245, 158, 11, 0.4)"},onMouseLeave:u=>{u.currentTarget.style.transform="translateY(0)",u.currentTarget.style.boxShadow="0 4px 15px rgba(245, 158, 11, 0.3)"},children:""}),m.jsx(He,{variant:"gradient",gradient:{from:"#8b5cf6",to:"#7c3aed"},radius:"xl",size:"md",leftSection:m.jsx(vj,{size:18}),onClick:()=>t("/?filter=created"),style:{fontFamily:"Roboto, sans-serif",fontWeight:600,boxShadow:"0 4px 15px rgba(139, 92, 246, 0.3)",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:u=>{u.currentTarget.style.transform="translateY(-2px)",u.currentTarget.style.boxShadow="0 6px 20px rgba(139, 92, 246, 0.4)"},onMouseLeave:u=>{u.currentTarget.style.transform="translateY(0)",u.currentTarget.style.boxShadow="0 4px 15px rgba(139, 92, 246, 0.3)"},children:""}),m.jsx(He,{variant:"gradient",gradient:{from:"#06b6d4",to:"#0891b2"},radius:"xl",size:"md",leftSection:m.jsx(Df,{size:18}),onClick:()=>t("/?filter=selected"),style:{fontFamily:"Roboto, sans-serif",fontWeight:600,boxShadow:"0 4px 15px rgba(6, 182, 212, 0.3)",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:u=>{u.currentTarget.style.transform="translateY(-2px)",u.currentTarget.style.boxShadow="0 6px 20px rgba(6, 182, 212, 0.4)"},onMouseLeave:u=>{u.currentTarget.style.transform="translateY(0)",u.currentTarget.style.boxShadow="0 4px 15px rgba(6, 182, 212, 0.3)"},children:""})]})]}),m.jsxs(lr,{p:"md",radius:"xl",style:{background:"linear-gradient(135deg, #2d2d2d 0%, #252525 100%)",border:"1px solid rgba(255, 255, 255, 0.08)",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.25)"},children:[m.jsx(U,{size:"sm",c:"#9ca3af",ta:"center",mb:"md",fw:500,style:{fontFamily:"Roboto, sans-serif"},children:" "}),m.jsxs(Re,{justify:"center",gap:"sm",children:[m.jsx(He,{variant:"gradient",gradient:{from:"#a855f7",to:"#7c3aed"},radius:"xl",size:"md",leftSection:m.jsx(mv,{size:18}),onClick:()=>t("/tariffs"),style:{fontFamily:"Roboto, sans-serif",fontWeight:600,boxShadow:"0 4px 15px rgba(168, 85, 247, 0.3)",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:u=>{u.currentTarget.style.transform="translateY(-2px)",u.currentTarget.style.boxShadow="0 6px 20px rgba(168, 85, 247, 0.4)"},onMouseLeave:u=>{u.currentTarget.style.transform="translateY(0)",u.currentTarget.style.boxShadow="0 4px 15px rgba(168, 85, 247, 0.3)"},children:""}),m.jsx(He,{variant:"gradient",gradient:{from:"#f59f00",to:"#fab005"},radius:"xl",size:"md",leftSection:m.jsx(yi,{size:18}),onClick:()=>t("/energy"),style:{fontFamily:"Roboto, sans-serif",fontWeight:600,boxShadow:"0 4px 15px rgba(245, 159, 0, 0.3)",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onMouseEnter:u=>{u.currentTarget.style.transform="translateY(-2px)",u.currentTarget.style.boxShadow="0 6px 20px rgba(245, 159, 0, 0.4)"},onMouseLeave:u=>{u.currentTarget.style.transform="translateY(0)",u.currentTarget.style.boxShadow="0 4px 15px rgba(245, 159, 0, 0.3)"},children:""})]})]}),m.jsx(lr,{p:"lg",radius:"xl",style:{background:"linear-gradient(135deg, #2d2d2d 0%, #252525 100%)",border:"1px solid rgba(255, 255, 255, 0.08)",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.25)"},children:m.jsxs(Ee,{gap:"md",children:[m.jsxs(Re,{justify:"space-between",align:"center",children:[m.jsx(U,{size:"lg",fw:600,c:"#ffffff",style:{fontFamily:"Roboto, sans-serif"},children:""}),m.jsx(xn,{size:"lg",variant:"gradient",gradient:e.is_premium?{from:"yellow",to:"orange"}:{from:"gray",to:"dark"},style:{fontFamily:"Roboto, sans-serif",fontWeight:600,padding:"10px 16px",fontSize:"14px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.2)"},children:e.tariff_name})]}),e.is_premium&&e.subscription_end_date&&m.jsxs(pe,{pt:"xs",children:[m.jsx(U,{size:"sm",c:"#9ca3af",fw:500,mb:6,style:{fontFamily:"Roboto, sans-serif"},children:" "}),m.jsx(U,{size:"md",fw:600,c:"#e5e7eb",style:{fontFamily:"Roboto, sans-serif"},children:new Date(e.subscription_end_date).toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"})})]})]})}),m.jsx(lr,{p:"lg",radius:"xl",style:{background:e.energy_available>0?"linear-gradient(135deg, #1a1a2e 0%, #16213e 100%)":"linear-gradient(135deg, #2d2d2d 0%, #252525 100%)",border:e.energy_available>0?"1px solid rgba(245, 159, 0, 0.3)":"1px solid rgba(255, 255, 255, 0.08)",boxShadow:e.energy_available>0?"0 4px 20px rgba(245, 159, 0, 0.15)":"0 4px 20px rgba(0, 0, 0, 0.25)"},children:m.jsxs(Ee,{gap:"md",children:[m.jsxs(Re,{justify:"space-between",align:"center",children:[m.jsxs(Re,{gap:"sm",children:[m.jsx(yi,{size:24,color:e.energy_available>0?"#f59f00":"#6b7280"}),m.jsx(U,{size:"lg",fw:600,c:"#ffffff",style:{fontFamily:"Roboto, sans-serif"},children:""})]}),e.energy_available>0&&m.jsxs(xn,{size:"lg",variant:"gradient",gradient:{from:"#f59f00",to:"#fab005"},style:{fontFamily:"Roboto, sans-serif",fontWeight:600,padding:"10px 16px",fontSize:"14px",boxShadow:"0 2px 8px rgba(245, 159, 0, 0.3)"},children:[e.energy_available," ."]})]}),e.energy_available>0?m.jsx(lr,{p:"md",radius:"lg",style:{background:"linear-gradient(135deg, rgba(245, 159, 0, 0.1) 0%, rgba(250, 176, 5, 0.05) 100%)",border:"1px solid rgba(245, 159, 0, 0.2)"},children:m.jsxs(Ee,{gap:"xs",children:[m.jsxs(U,{size:"md",fw:600,c:"#f59f00",style:{fontFamily:"Roboto, sans-serif"},children:[": ",e.energy_available,"  "]}),m.jsx(U,{size:"sm",c:"#9ca3af",style:{fontFamily:"Roboto, sans-serif"},children:"        "})]})}):m.jsx(lr,{p:"md",radius:"lg",style:{background:"linear-gradient(135deg, #3a3a3a 0%, #323232 100%)",border:"1px solid rgba(255, 255, 255, 0.05)",cursor:"pointer"},onClick:()=>t("/energy"),children:m.jsxs(Ee,{gap:"sm",align:"center",children:[m.jsx(U,{size:"md",fw:500,c:"#9ca3af",ta:"center",style:{fontFamily:"Roboto, sans-serif"},children:"   "}),m.jsx(U,{size:"sm",c:"#6b7280",ta:"center",style:{fontFamily:"Roboto, sans-serif"},children:"  !  ,    -      "}),m.jsx(He,{variant:"gradient",gradient:{from:"#f59f00",to:"#fab005"},radius:"xl",size:"sm",leftSection:m.jsx(yi,{size:16}),onClick:u=>{u.stopPropagation(),t("/energy")},style:{fontFamily:"Roboto, sans-serif",fontWeight:600,marginTop:"4px"},children:"   49 ."})]})})]})}),m.jsx(lr,{p:"lg",radius:"xl",style:{background:"linear-gradient(135deg, #2d2d2d 0%, #252525 100%)",border:"1px solid rgba(255, 255, 255, 0.08)",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.25)"},children:m.jsxs(Ee,{gap:"lg",children:[m.jsxs(Re,{justify:"space-between",align:"center",children:[m.jsx(U,{size:"lg",fw:600,c:"#ffffff",style:{fontFamily:"Roboto, sans-serif"},children:"  "}),m.jsxs(xn,{size:"lg",variant:"light",color:l>80?"red":l>50?"orange":"green",style:{fontFamily:"Roboto, sans-serif",fontWeight:600,padding:"8px 14px",fontSize:"13px"},children:[Math.round(100-l),"% "]})]}),m.jsx(lr,{p:"lg",radius:"lg",style:{background:"linear-gradient(135deg, #3a3a3a 0%, #323232 100%)",border:"1px solid rgba(255, 255, 255, 0.05)",boxShadow:"0 2px 12px rgba(0, 0, 0, 0.15)"},children:m.jsxs(Ee,{gap:"md",children:[m.jsxs(Re,{justify:"space-between",align:"center",children:[m.jsx(U,{size:"md",fw:600,c:"#ffffff",style:{fontFamily:"Roboto, sans-serif"},children:"  "}),m.jsxs(xn,{size:"md",variant:"filled",color:l>80?"red":l>50?"orange":"blue",style:{fontFamily:"Roboto, sans-serif",fontWeight:600,fontSize:"13px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.2)"},children:[e.requests_used_today," / ",e.daily_requests_limit]})]}),m.jsx(bf,{value:l,color:l>80?"red":l>50?"orange":"blue",size:"lg",radius:"xl",style:{boxShadow:"0 2px 10px rgba(0, 0, 0, 0.2)"}}),m.jsxs(Re,{justify:"space-between",mt:4,children:[m.jsx(U,{size:"sm",c:"#c1c7cd",fw:500,style:{fontFamily:"Roboto, sans-serif"},children:"  "}),m.jsxs(U,{size:"md",fw:600,c:e.requests_remaining_today>10?"#60a5fa":"#f87171",style:{fontFamily:"Roboto, sans-serif"},children:[e.requests_remaining_today," "]})]})]})}),m.jsx(AM,{color:"rgba(255, 255, 255, 0.08)",size:"xs"}),m.jsx(lr,{p:"lg",radius:"lg",style:{background:"linear-gradient(135deg, #3a3a3a 0%, #323232 100%)",border:"1px solid rgba(255, 255, 255, 0.05)",boxShadow:"0 2px 12px rgba(0, 0, 0, 0.15)"},children:m.jsxs(Re,{justify:"space-between",align:"center",wrap:"nowrap",children:[m.jsxs(pe,{children:[m.jsx(U,{size:"sm",c:"#9ca3af",fw:500,mb:8,style:{fontFamily:"Roboto, sans-serif"},children:"  "}),m.jsx(U,{size:"xl",fw:600,c:"#ffffff",style:{fontFamily:"Roboto, sans-serif"},children:e.max_characters_create===null?" ":e.max_characters_create})]}),m.jsx(xn,{size:"md",variant:"light",color:e.max_characters_create===null?"green":"blue",style:{fontFamily:"Roboto, sans-serif",fontWeight:600,fontSize:"13px",padding:"8px 14px",whiteSpace:"nowrap"},children:e.max_characters_create===null?" ":` ${e.max_characters_create} .`})]})}),e.daily_photo_limit!==null&&e.daily_photo_limit>0&&m.jsx(lr,{p:"lg",radius:"lg",style:{background:"linear-gradient(135deg, #3a3a3a 0%, #323232 100%)",border:"1px solid rgba(255, 255, 255, 0.05)",boxShadow:"0 2px 12px rgba(0, 0, 0, 0.15)"},children:m.jsxs(Ee,{gap:"md",children:[m.jsxs(Re,{justify:"space-between",align:"center",children:[m.jsx(U,{size:"md",fw:600,c:"#ffffff",style:{fontFamily:"Roboto, sans-serif"},children:"  "}),m.jsxs(xn,{size:"md",variant:"filled",color:e.photo_remaining_today!==null&&e.daily_photo_limit?e.photo_remaining_today/e.daily_photo_limit*100>50?"blue":e.photo_remaining_today/e.daily_photo_limit*100>20?"orange":"red":"gray",style:{fontFamily:"Roboto, sans-serif",fontWeight:600,fontSize:"13px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.2)"},children:[e.photo_used_today??0," / ",e.daily_photo_limit]})]}),m.jsx(bf,{value:e.photo_used_today!==null&&e.daily_photo_limit?e.photo_used_today/e.daily_photo_limit*100:0,color:e.photo_remaining_today!==null&&e.daily_photo_limit?e.photo_remaining_today/e.daily_photo_limit*100>50?"blue":e.photo_remaining_today/e.daily_photo_limit*100>20?"orange":"red":"gray",size:"lg",radius:"xl",style:{boxShadow:"0 2px 10px rgba(0, 0, 0, 0.2)"}}),m.jsxs(Re,{justify:"space-between",mt:4,children:[m.jsx(U,{size:"sm",c:"#c1c7cd",fw:500,style:{fontFamily:"Roboto, sans-serif"},children:"  "}),m.jsxs(U,{size:"md",fw:600,c:e.photo_remaining_today!==null&&e.photo_remaining_today>5?"#60a5fa":"#f87171",style:{fontFamily:"Roboto, sans-serif"},children:[e.photo_remaining_today??0," "]})]})]})}),e.daily_voice_limit!==null&&e.daily_voice_limit>0&&m.jsx(lr,{p:"lg",radius:"lg",style:{background:"linear-gradient(135deg, #3a3a3a 0%, #323232 100%)",border:"1px solid rgba(255, 255, 255, 0.05)",boxShadow:"0 2px 12px rgba(0, 0, 0, 0.15)"},children:m.jsxs(Ee,{gap:"md",children:[m.jsxs(Re,{justify:"space-between",align:"center",children:[m.jsx(U,{size:"md",fw:600,c:"#ffffff",style:{fontFamily:"Roboto, sans-serif"},children:"  "}),m.jsxs(xn,{size:"md",variant:"filled",color:e.voice_remaining_today!==null&&e.daily_voice_limit?e.voice_remaining_today/e.daily_voice_limit*100>50?"blue":e.voice_remaining_today/e.daily_voice_limit*100>20?"orange":"red":"gray",style:{fontFamily:"Roboto, sans-serif",fontWeight:600,fontSize:"13px",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.2)"},children:[e.voice_used_today??0," / ",e.daily_voice_limit]})]}),m.jsx(bf,{value:e.voice_used_today!==null&&e.daily_voice_limit?e.voice_used_today/e.daily_voice_limit*100:0,color:e.voice_remaining_today!==null&&e.daily_voice_limit?e.voice_remaining_today/e.daily_voice_limit*100>50?"blue":e.voice_remaining_today/e.daily_voice_limit*100>20?"orange":"red":"gray",size:"lg",radius:"xl",style:{boxShadow:"0 2px 10px rgba(0, 0, 0, 0.2)"}}),m.jsxs(Re,{justify:"space-between",mt:4,children:[m.jsx(U,{size:"sm",c:"#c1c7cd",fw:500,style:{fontFamily:"Roboto, sans-serif"},children:"  "}),m.jsxs(U,{size:"md",fw:600,c:e.voice_remaining_today!==null&&e.voice_remaining_today>5?"#60a5fa":"#f87171",style:{fontFamily:"Roboto, sans-serif"},children:[e.voice_remaining_today??0," "]})]})]})}),m.jsx(lr,{p:"lg",radius:"xl",style:{background:"linear-gradient(135deg, #0088cc 0%, #005580 100%)",border:"1px solid rgba(255, 255, 255, 0.15)",boxShadow:"0 4px 20px rgba(0, 136, 204, 0.3)",cursor:"pointer",transition:"transform 0.2s ease, box-shadow 0.2s ease"},onClick:()=>kt.openTelegramLink("https://t.me/AI_RolePlay_TG"),onMouseEnter:u=>{u.currentTarget.style.transform="translateY(-2px)",u.currentTarget.style.boxShadow="0 6px 28px rgba(0, 136, 204, 0.4)"},onMouseLeave:u=>{u.currentTarget.style.transform="translateY(0)",u.currentTarget.style.boxShadow="0 4px 20px rgba(0, 136, 204, 0.3)"},children:m.jsxs(Ee,{gap:"md",align:"center",children:[m.jsx(pe,{style:{fontSize:"48px",lineHeight:1},children:""}),m.jsx(U,{size:"lg",fw:700,c:"white",ta:"center",style:{fontFamily:"Roboto, sans-serif"},children:"   !"}),m.jsx(U,{size:"sm",c:"rgba(255,255,255,0.9)",ta:"center",fw:500,style:{fontFamily:"Roboto, sans-serif"},children:"   Telegram       ,    "}),m.jsx(xn,{size:"lg",variant:"white",style:{fontFamily:"Roboto, sans-serif",fontWeight:600,padding:"12px 20px",fontSize:"14px",color:"#0088cc",boxShadow:"0 2px 8px rgba(0, 0, 0, 0.15)"},children:"@AI_RolePlay_TG"})]})})]})})]})})]})}const Uo={fontFamily:"Roboto, sans-serif"},c5=m.jsx(ls,{color:"dark.4",size:28,radius:"xl",children:m.jsx(cu,{size:16,color:"white"})}),u5={color:"#ced4da",fontSize:"1rem",lineHeight:1.5,fontFamily:"Roboto, sans-serif"},d5=t=>t.replace(/\n/g,"<br />"),Lr="tariff-description";function f5({tariff:t,isActive:e,onToggle:n,loading:r}){const[o,s]=D.useState(!1);D.useEffect(()=>{e&&xD(t.id,t.name,t.price_rub,t.price_stars)},[e,t.id,t.name,t.price_rub,t.price_stars]);const l=D.useMemo(()=>({borderColor:e?"#3390ec":"#373A40",transition:"all 0.3s ease",cursor:"pointer",backgroundColor:e?"#2C2E33":"#25262b"}),[e]),u=D.useCallback(async(d,h)=>{if(d.stopPropagation(),o)return;s(!0);const p=h==="stars"?t.price_stars:t.price_rub;SD(t.id,t.name,h,p);try{if(h==="stars"){const g=await zt(`/v1/invoice/create-invoice?tariff_id=${t.id}&payment_type=${h}`,{method:"POST"});kt.openInvoice(g.invoice_link,y=>{s(!1),y==="paid"?(ED(t.id,t.name,"stars"),Zt.show({title:"!",message:"  ",color:"teal"})):y==="cancelled"?(Cg(t.id,t.name,"stars"),Zt.show({title:"",message:"  ",color:"yellow"})):y==="failed"&&(Cg(t.id,t.name,"stars"),Zt.show({title:"",message:"   ",color:"red"}))})}else if(h==="yookassa"){const g=await zt(`/v1/invoice/create-invoice?tariff_id=${t.id}&payment_type=${h}`,{method:"POST"}),y=`${window.location.origin}/#/payment?token=${encodeURIComponent(g.confirmation.confirmation_token)}&type=tariff`;kt.openLink(y),s(!1)}else{const g=await zt(`/v1/invoice/create-invoice?tariff_id=${t.id}&payment_type=${h}`,{method:"POST"});if(!window.Robokassa){s(!1),Zt.show({title:"",message:"    ",color:"red"});return}window.Robokassa.StartPayment({MerchantLogin:g.merchant_login,OutSum:g.out_sum,InvId:g.inv_id,Description:`  ${t.name}    RolePlayTopbot`,Shp_tariff_id:g.shp_tariff_id,Shp_user_id:g.shp_user_id,Culture:g.culture,Encoding:g.encoding,SignatureValue:g.signature_value,IsTest:0}),s(!1)}}catch(g){s(!1),Cg(t.id,t.name,h);const y=g.message||" ";y.includes("404")?Zt.show({title:"",message:y.includes("User")?"  ":"  ",color:"red"}):y.includes("400")?Zt.show({title:"",message:" ",color:"red"}):y.includes("403")?Zt.show({title:" ",message:"      ",color:"red"}):Zt.show({title:"",message:y,color:"red"})}},[t.id,t.name,t.price_rub,t.price_stars,o]);return m.jsxs(m.Fragment,{children:[m.jsx("style",{children:`
                .${Lr} p { margin: 0 0 0.5em 0; }
                .${Lr} p:last-child { margin-bottom: 0; }
                .${Lr} ul, .${Lr} ol { margin: 0.5em 0; padding-left: 1.5em; }
                .${Lr} li { margin: 0.25em 0; }
                .${Lr} a { color: #FFC107; text-decoration: underline; }
                .${Lr} a:hover { color: #FF9800; }
                .${Lr} strong, .${Lr} b { color: white; font-weight: 700; }
                .${Lr} em, .${Lr} i { font-style: italic; }
            `}),m.jsxs(Hn,{shadow:"sm",padding:"lg",radius:"lg",withBorder:!0,bg:"#25262b",style:l,onClick:n,children:[m.jsxs(Re,{justify:"space-between",align:"center",wrap:"nowrap",children:[m.jsxs(Ee,{gap:4,children:[m.jsx(U,{fw:800,size:"xl",c:"white",style:{lineHeight:1.2,letterSpacing:"0.5px",...Uo},children:t.name}),m.jsxs(Re,{gap:8,align:"center",children:[m.jsxs(Re,{gap:2,align:"center",children:[m.jsx(U,{size:"md",c:"white",fw:700,style:Uo,children:t.price_rub}),m.jsx(TT,{size:14,color:"white"})]}),m.jsx(U,{size:"md",c:"dimmed",children:"|"}),m.jsxs(Re,{gap:4,align:"center",children:[m.jsx(Lf,{size:14,color:"#FFC107",style:{filter:"drop-shadow(0 0 4px rgba(255, 193, 7, 0.4))"}}),m.jsx(U,{size:"md",c:"white",fw:700,style:Uo,children:t.price_stars})]})]})]}),m.jsxs(Re,{gap:"xs",children:[m.jsxs(xn,{color:t.is_active?"teal":"gray",variant:"light",size:"lg",radius:"md",style:{textTransform:"none"},children:[t.duration_days," ."]}),e?m.jsx(kT,{size:24,color:"gray"}):m.jsx(c0,{size:24,color:"gray"})]})]}),m.jsx(_M,{in:e,children:m.jsx(pe,{pt:"lg",children:m.jsxs(Ee,{gap:"lg",children:[m.jsx(pe,{className:Lr,style:u5,dangerouslySetInnerHTML:{__html:d5(t.description)}}),m.jsxs(Mc,{spacing:"xs",center:!0,icon:c5,children:[m.jsx(Mc.Item,{children:m.jsxs(U,{c:"gray.3",size:"sm",style:Uo,children:[m.jsx(U,{span:!0,c:"white",fw:700,inherit:!0,children:t.daily_requests_limit}),"   "]})}),t.max_characters_create!==null&&m.jsx(Mc.Item,{children:m.jsxs(U,{c:"gray.3",size:"sm",style:Uo,children:[" ",m.jsx(U,{span:!0,c:"white",fw:700,inherit:!0,children:t.max_characters_create})," "]})}),(t.daily_photo_limit||0)>0&&m.jsx(Mc.Item,{children:m.jsxs(U,{c:"gray.3",size:"sm",style:Uo,children:[m.jsx(U,{span:!0,c:"white",fw:700,inherit:!0,children:t.daily_photo_limit}),"   "]})}),(t.daily_voice_limit||0)>0&&m.jsx(Mc.Item,{children:m.jsxs(U,{c:"gray.3",size:"sm",style:Uo,children:[m.jsx(U,{span:!0,c:"white",fw:700,inherit:!0,children:t.daily_voice_limit}),"   "]})})]}),m.jsx(pe,{bg:"rgba(51, 144, 236, 0.1)",p:"xs",style:{borderRadius:10,border:"1px solid rgba(51, 144, 236, 0.2)"},children:m.jsxs(Re,{gap:10,wrap:"nowrap",align:"start",children:[m.jsx(ij,{size:20,color:"#3390ec",style:{flexShrink:0,marginTop:2}}),m.jsxs(U,{size:"xs",c:"gray.4",lh:1.4,style:Uo,children:["  ",m.jsx(U,{span:!0,c:"#FFC107",fw:700,children:"Stars"}),"   .      ."]})]})}),m.jsxs(Ee,{gap:"sm",children:[m.jsxs(He,{fullWidth:!0,variant:"gradient",gradient:{from:"#3390ec",to:"#0e72d6",deg:135},size:"md",radius:"md",h:50,onClick:d=>u(d,"stars"),loading:r||o,disabled:o,leftSection:m.jsx(Lf,{size:22,color:"#FFD700",style:{filter:"drop-shadow(0 1px 2px rgba(0,0,0,0.2))"}}),rightSection:m.jsx(Fc,{size:24,color:"white",style:{opacity:.8}}),styles:{label:{fontWeight:700,fontSize:"1.1rem",color:"white"},root:{boxShadow:"0 4px 12px rgba(51, 144, 236, 0.3)"}},children:[t.price_stars," Stars"]}),m.jsxs(He,{fullWidth:!0,variant:"filled",color:"gray.0",size:"md",radius:"md",h:50,onClick:d=>u(d,"yookassa"),loading:r||o,disabled:o,styles:{root:{backgroundColor:"#F5F5F7",border:"1px solid #E0E0E0",justifyContent:"space-between",paddingLeft:20,paddingRight:20,color:"#000"},inner:{width:"100%",justifyContent:"space-between"},label:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"}},children:[m.jsx(to,{src:"https://yookassa.ru/files/Guide_files/logo-black.svg",h:24,w:"auto",fit:"contain",alt:"YooKassa"}),m.jsxs(U,{span:!0,fw:800,size:"1.1rem",c:"black",style:{fontFamily:"Roboto, sans-serif"},children:[t.price_rub," "]})]})]})]})})})]})]})}const Gs={fontFamily:"Roboto, sans-serif"},h5={radius:"sm",blur:2,backgroundOpacity:.1},p5={color:"yellow",type:"bars"},m5={display:"flex",alignItems:"center",justifyContent:"center"},g5={position:"relative",minHeight:"80vh"},xE={label:Gs};function v5(){const t=pa(),[e,n]=D.useState([]),[r,o]=D.useState(!1),[s,l]=D.useState(null),[u,d]=D.useState(!1),[h,p]=D.useState(null);D.useEffect(()=>{bD(),(async()=>{o(!0),d(!1);try{const C=(await zt("/v1/tariffs/")).tariffs.filter(_=>_.is_active);n(C),C.length>0&&p(C[0].id)}catch(w){console.error(w),d(!0)}finally{o(!1)}})()},[]);const g=D.useCallback(k=>{p(w=>w===k?null:k)},[]),y=D.useCallback(k=>{const w=e.find(C=>C.id===k);w&&(l(k),kt.openInvoice(w.invoice_link,C=>{C==="paid"&&kt.close(),l(null)}))},[e]),x=D.useCallback(()=>{t("/")},[t]),S=D.useCallback(()=>{t("/energy")},[t]),E=D.useMemo(()=>e.map(k=>m.jsx(f5,{tariff:k,isActive:h===k.id,onToggle:()=>g(k.id),loading:s===k.id},k.id)),[e,h,g,y,s]);return u?m.jsx(Yn,{size:"sm",h:"100vh",style:m5,children:m.jsxs(Ee,{align:"center",gap:"lg",ta:"center",children:[m.jsx(ET,{size:56,color:"orange"}),m.jsx(Qi,{order:3,c:"white",style:Gs,children:""}),m.jsx(U,{size:"lg",c:"gray.4",fw:500,style:Gs,children:"Bruh,     .     "}),m.jsx(He,{leftSection:m.jsx(wT,{size:20}),variant:"white",color:"dark",size:"md",onClick:x,styles:xE,children:" "})]})}):m.jsxs(m.Fragment,{children:[m.jsx(wu,{}),m.jsxs(Yn,{size:"sm",py:"md",style:g5,children:[m.jsx(Lh,{visible:r,zIndex:1e3,overlayProps:h5,loaderProps:p5}),m.jsxs(pe,{mb:"lg",mt:"xl",ta:"center",children:[m.jsx(Qi,{order:2,mb:"xs",c:"white",style:Gs,children:""}),m.jsx(U,{c:"dimmed",size:"md",style:Gs,children:"      ,            : )"})]}),m.jsx(pe,{mb:"xl",p:"md",style:{background:"linear-gradient(135deg, rgba(255, 193, 7, 0.15) 0%, rgba(245, 159, 0, 0.1) 100%)",borderRadius:"14px",border:"1px solid rgba(255, 193, 7, 0.3)"},children:m.jsxs(Ee,{align:"center",gap:"sm",children:[m.jsx(yi,{size:24,color:"#f59f00"}),m.jsx(U,{size:"sm",c:"gray.3",ta:"center",fw:500,style:Gs,children:"     ?     ,       "}),m.jsx(He,{variant:"gradient",gradient:{from:"#f59f00",to:"#fab005",deg:135},size:"sm",leftSection:m.jsx(yi,{size:16}),onClick:S,styles:xE,children:"   49 ."})]})}),m.jsx(Ee,{gap:"md",children:E}),!r&&e.length===0&&!u&&m.jsx(Zs,{mt:"xl",children:m.jsx(U,{c:"dimmed",style:Gs,children:"     ."})})]})]})}const Ic={fontFamily:"Roboto, sans-serif"};function y5({energyPackage:t,isActive:e,onToggle:n}){const[r,o]=D.useState(!1);D.useEffect(()=>{e&&mD(t.id,t.name,t.price_rub,t.energy_amount)},[e,t.id,t.name,t.price_rub,t.energy_amount]);const s=D.useMemo(()=>({borderColor:e?"#f59f00":"#373A40",transition:"all 0.3s ease",cursor:"pointer",backgroundColor:e?"#2C2E33":"#25262b"}),[e]),l=D.useCallback(async u=>{if(u.stopPropagation(),!r){o(!0),gD(t.id,t.name,t.price_rub);try{const d=await zt(`/v1/energy/create-invoice?package_id=${t.id}&payment_type=yookassa`,{method:"POST"}),h=`${window.location.origin}/#/payment?token=${encodeURIComponent(d.confirmation.confirmation_token)}&type=energy`;kt.openLink(h),o(!1)}catch(d){o(!1),vD(t.id,t.name,t.price_rub);const h=d.message||" ";h.includes("404")?Zt.show({title:"",message:"   ",color:"red"}):h.includes("400")?Zt.show({title:"",message:" ",color:"red"}):Zt.show({title:"",message:h,color:"red"})}}},[t.id,t.name,t.price_rub,r]);return m.jsx(m.Fragment,{children:m.jsxs(Hn,{shadow:"sm",padding:"lg",radius:"lg",withBorder:!0,bg:"#25262b",style:s,onClick:n,children:[m.jsxs(Re,{justify:"space-between",align:"center",wrap:"nowrap",children:[m.jsxs(Ee,{gap:4,children:[m.jsxs(Re,{gap:8,align:"center",children:[m.jsx(ls,{size:36,radius:"xl",variant:"gradient",gradient:{from:"#f59f00",to:"#fab005",deg:135},children:m.jsx(yi,{size:20,color:"white"})}),m.jsx(U,{fw:800,size:"xl",c:"white",style:{lineHeight:1.2,letterSpacing:"0.5px",...Ic},children:t.name})]}),m.jsx(Re,{gap:8,align:"center",ml:44,children:m.jsxs(xn,{size:"lg",radius:"md",variant:"gradient",gradient:{from:"#f59f00",to:"#fab005",deg:135},leftSection:m.jsx(yi,{size:14}),children:[t.energy_amount," "]})})]}),m.jsxs(Re,{gap:"xs",align:"center",children:[m.jsx(Ee,{gap:2,align:"end",children:m.jsxs(Re,{gap:2,align:"center",children:[m.jsx(U,{size:"xl",c:"white",fw:800,style:Ic,children:t.price_rub}),m.jsx(TT,{size:18,color:"white"})]})}),e?m.jsx(kT,{size:24,color:"gray"}):m.jsx(c0,{size:24,color:"gray"})]})]}),e&&m.jsx(pe,{pt:"lg",children:m.jsxs(Ee,{gap:"lg",children:[m.jsx(U,{c:"gray.4",size:"sm",style:Ic,children:t.description}),m.jsx(pe,{bg:"rgba(245, 159, 0, 0.1)",p:"md",style:{borderRadius:12,border:"1px solid rgba(245, 159, 0, 0.3)"},children:m.jsxs(Ee,{gap:"sm",children:[m.jsx(U,{size:"sm",fw:600,c:"white",style:Ic,children:"  :"}),m.jsxs(Re,{gap:"lg",children:[m.jsxs(Re,{gap:8,children:[m.jsx(ls,{size:28,radius:"xl",color:"blue",variant:"light",children:m.jsx(CT,{size:16})}),m.jsxs(Ee,{gap:0,children:[m.jsx(U,{size:"xs",c:"gray.4",children:""}),m.jsx(U,{size:"sm",c:"white",fw:700,children:"1 "})]})]}),m.jsxs(Re,{gap:8,children:[m.jsx(ls,{size:28,radius:"xl",color:"grape",variant:"light",children:m.jsx(AT,{size:16})}),m.jsxs(Ee,{gap:0,children:[m.jsx(U,{size:"xs",c:"gray.4",children:" "}),m.jsx(U,{size:"sm",c:"white",fw:700,children:"3 "})]})]})]})]})}),m.jsx(pe,{bg:"rgba(34, 139, 230, 0.1)",p:"xs",style:{borderRadius:10,border:"1px solid rgba(34, 139, 230, 0.2)"},children:m.jsxs(Re,{gap:10,wrap:"nowrap",align:"start",children:[m.jsx(yi,{size:20,color:"#f59f00",style:{flexShrink:0,marginTop:2}}),m.jsxs(U,{size:"xs",c:"gray.4",lh:1.4,style:Ic,children:[m.jsx(U,{span:!0,c:"#f59f00",fw:700,children:"  !"}),"    ,    ,     ."]})]})}),m.jsxs(He,{fullWidth:!0,variant:"filled",color:"gray.0",size:"md",radius:"md",h:50,onClick:l,loading:r,disabled:r,styles:{root:{backgroundColor:"#F5F5F7",border:"1px solid #E0E0E0",justifyContent:"space-between",paddingLeft:20,paddingRight:20,color:"#000"},inner:{width:"100%",justifyContent:"space-between"},label:{width:"100%",display:"flex",justifyContent:"space-between",alignItems:"center"}},children:[m.jsx(to,{src:"https://yookassa.ru/files/Guide_files/logo-black.svg",h:24,w:"auto",fit:"contain",alt:"YooKassa"}),m.jsxs(U,{span:!0,fw:800,size:"1.1rem",c:"black",style:{fontFamily:"Roboto, sans-serif"},children:[t.price_rub," "]})]})]})})]})})}const Xr={fontFamily:"Roboto, sans-serif"},b5={radius:"sm",blur:2,backgroundOpacity:.1},x5={color:"yellow",type:"bars"},S5={display:"flex",alignItems:"center",justifyContent:"center"},E5={position:"relative",minHeight:"80vh"},k5={label:Xr};function T5(){const t=pa(),[e,n]=D.useState([]),[r,o]=D.useState(!1),[s,l]=D.useState(!1),[u,d]=D.useState(null);D.useEffect(()=>{pD(),(async()=>{o(!0),l(!1);try{const x=await zt("/v1/energy-packages/");n(x.packages),x.packages.length>0&&d(x.packages[0].id)}catch(x){console.error(x),l(!0)}finally{o(!1)}})()},[]);const h=D.useCallback(y=>{d(x=>x===y?null:y)},[]),p=D.useCallback(()=>{t("/")},[t]),g=D.useMemo(()=>e.map(y=>m.jsx(y5,{energyPackage:y,isActive:u===y.id,onToggle:()=>h(y.id)},y.id)),[e,u,h]);return s?m.jsx(Yn,{size:"sm",h:"100vh",style:S5,children:m.jsxs(Ee,{align:"center",gap:"lg",ta:"center",children:[m.jsx(ET,{size:56,color:"orange"}),m.jsx(Qi,{order:3,c:"white",style:Xr,children:""}),m.jsx(U,{size:"lg",c:"gray.4",fw:500,style:Xr,children:"    .  "}),m.jsx(He,{leftSection:m.jsx(wT,{size:20}),variant:"white",color:"dark",size:"md",onClick:p,styles:k5,children:" "})]})}):m.jsxs(m.Fragment,{children:[m.jsx(wu,{}),m.jsxs(Yn,{size:"sm",py:"md",style:E5,children:[m.jsx(Lh,{visible:r,zIndex:1e3,overlayProps:b5,loaderProps:x5}),m.jsxs(pe,{mb:"xl",mt:{base:"xl",sm:60},ta:"center",children:[m.jsxs(Re,{justify:"center",gap:"xs",mb:"xs",children:[m.jsx(yi,{size:32,color:"#f59f00"}),m.jsx(Qi,{order:2,c:"white",style:Xr,children:""})]}),m.jsx(U,{c:"dimmed",size:"md",style:Xr,children:" ,    "})]}),m.jsx(pe,{mb:"xl",p:"md",bg:"rgba(245, 159, 0, 0.08)",style:{borderRadius:16,border:"1px solid rgba(245, 159, 0, 0.2)"},children:m.jsxs(Ee,{gap:"md",children:[m.jsxs(Re,{gap:"xs",align:"center",children:[m.jsx(ls,{size:28,radius:"xl",variant:"gradient",gradient:{from:"#f59f00",to:"#fab005",deg:135},children:m.jsx(nj,{size:16})}),m.jsx(U,{size:"sm",fw:600,c:"white",style:Xr,children:" "})]}),m.jsxs(Ee,{gap:"xs",children:[m.jsxs(Re,{gap:"xs",wrap:"nowrap",children:[m.jsx(xn,{size:"xs",color:"yellow",variant:"light",circle:!0,children:"1"}),m.jsxs(U,{size:"sm",c:"gray.4",style:Xr,children:[m.jsx(U,{span:!0,c:"#f59f00",fw:600,children:" "}),"     ,   "]})]}),m.jsxs(Re,{gap:"xs",wrap:"nowrap",children:[m.jsx(xn,{size:"xs",color:"yellow",variant:"light",circle:!0,children:"2"}),m.jsxs(U,{size:"sm",c:"gray.4",style:Xr,children:[m.jsx(U,{span:!0,c:"#f59f00",fw:600,children:""}),"    ,    "]})]}),m.jsxs(Re,{gap:"xs",wrap:"nowrap",children:[m.jsx(xn,{size:"xs",color:"yellow",variant:"light",circle:!0,children:"3"}),m.jsxs(U,{size:"sm",c:"gray.4",style:Xr,children:[m.jsx(U,{span:!0,c:"#f59f00",fw:600,children:""}),"       "]})]})]}),m.jsx(pe,{p:"sm",bg:"rgba(0,0,0,0.2)",style:{borderRadius:10},children:m.jsxs(Re,{justify:"space-around",children:[m.jsxs(Ee,{gap:4,align:"center",children:[m.jsx(ls,{size:36,radius:"xl",color:"blue",variant:"light",children:m.jsx(CT,{size:20})}),m.jsx(U,{size:"xs",c:"gray.5",children:""}),m.jsx(xn,{color:"blue",variant:"light",size:"sm",children:"1 "})]}),m.jsxs(Ee,{gap:4,align:"center",children:[m.jsx(ls,{size:36,radius:"xl",color:"grape",variant:"light",children:m.jsx(AT,{size:20})}),m.jsx(U,{size:"xs",c:"gray.5",children:""}),m.jsx(xn,{color:"grape",variant:"light",size:"sm",children:"3 "})]})]})})]})}),m.jsx(U,{size:"sm",fw:600,c:"white",mb:"md",style:Xr,children:" :"}),m.jsx(Ee,{gap:"md",children:g}),!r&&e.length===0&&!s&&m.jsx(Zs,{mt:"xl",children:m.jsx(U,{c:"dimmed",style:Xr,children:"      ."})})]})]})}function Rn(t){this.content=t}Rn.prototype={constructor:Rn,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return e==-1?void 0:this.content[e+1]},update:function(t,e,n){var r=n&&n!=t?this.remove(n):this,o=r.find(t),s=r.content.slice();return o==-1?s.push(n||t,e):(s[o+1]=e,n&&(s[o]=n)),new Rn(s)},remove:function(t){var e=this.find(t);if(e==-1)return this;var n=this.content.slice();return n.splice(e,2),new Rn(n)},addToStart:function(t,e){return new Rn([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new Rn(n)},addBefore:function(t,e,n){var r=this.remove(e),o=r.content.slice(),s=r.find(t);return o.splice(s==-1?o.length:s,0,e,n),new Rn(o)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=Rn.from(t),t.size?new Rn(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=Rn.from(t),t.size?new Rn(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=Rn.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},toObject:function(){var t={};return this.forEach(function(e,n){t[e]=n}),t},get size(){return this.content.length>>1}};Rn.from=function(t){if(t instanceof Rn)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new Rn(e)};function E2(t,e,n){for(let r=0;;r++){if(r==t.childCount||r==e.childCount)return t.childCount==e.childCount?null:n;let o=t.child(r),s=e.child(r);if(o==s){n+=o.nodeSize;continue}if(!o.sameMarkup(s))return n;if(o.isText&&o.text!=s.text){for(let l=0;o.text[l]==s.text[l];l++)n++;return n}if(o.content.size||s.content.size){let l=E2(o.content,s.content,n+1);if(l!=null)return l}n+=o.nodeSize}}function k2(t,e,n,r){for(let o=t.childCount,s=e.childCount;;){if(o==0||s==0)return o==s?null:{a:n,b:r};let l=t.child(--o),u=e.child(--s),d=l.nodeSize;if(l==u){n-=d,r-=d;continue}if(!l.sameMarkup(u))return{a:n,b:r};if(l.isText&&l.text!=u.text){let h=0,p=Math.min(l.text.length,u.text.length);for(;h<p&&l.text[l.text.length-h-1]==u.text[u.text.length-h-1];)h++,n--,r--;return{a:n,b:r}}if(l.content.size||u.content.size){let h=k2(l.content,u.content,n-1,r-1);if(h)return h}n-=d,r-=d}}class oe{constructor(e,n){if(this.content=e,this.size=n||0,n==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,n,r,o=0,s){for(let l=0,u=0;u<n;l++){let d=this.content[l],h=u+d.nodeSize;if(h>e&&r(d,o+u,s||null,l)!==!1&&d.content.size){let p=u+1;d.nodesBetween(Math.max(0,e-p),Math.min(d.content.size,n-p),r,o+p)}u=h}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,n,r,o){let s="",l=!0;return this.nodesBetween(e,n,(u,d)=>{let h=u.isText?u.text.slice(Math.max(e,d)-d,n-d):u.isLeaf?o?typeof o=="function"?o(u):o:u.type.spec.leafText?u.type.spec.leafText(u):"":"";u.isBlock&&(u.isLeaf&&h||u.isTextblock)&&r&&(l?l=!1:s+=r),s+=h},0),s}append(e){if(!e.size)return this;if(!this.size)return e;let n=this.lastChild,r=e.firstChild,o=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(o[o.length-1]=n.withText(n.text+r.text),s=1);s<e.content.length;s++)o.push(e.content[s]);return new oe(o,this.size+e.size)}cut(e,n=this.size){if(e==0&&n==this.size)return this;let r=[],o=0;if(n>e)for(let s=0,l=0;l<n;s++){let u=this.content[s],d=l+u.nodeSize;d>e&&((l<e||d>n)&&(u.isText?u=u.cut(Math.max(0,e-l),Math.min(u.text.length,n-l)):u=u.cut(Math.max(0,e-l-1),Math.min(u.content.size,n-l-1))),r.push(u),o+=u.nodeSize),l=d}return new oe(r,o)}cutByIndex(e,n){return e==n?oe.empty:e==0&&n==this.content.length?this:new oe(this.content.slice(e,n))}replaceChild(e,n){let r=this.content[e];if(r==n)return this;let o=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return o[e]=n,new oe(o,s)}addToStart(e){return new oe([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new oe(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(e.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let n=this.content[e];if(!n)throw new RangeError("Index "+e+" out of range for "+this);return n}maybeChild(e){return this.content[e]||null}forEach(e){for(let n=0,r=0;n<this.content.length;n++){let o=this.content[n];e(o,r,n),r+=o.nodeSize}}findDiffStart(e,n=0){return E2(this,e,n)}findDiffEnd(e,n=this.size,r=e.size){return k2(this,e,n,r)}findIndex(e){if(e==0)return of(0,e);if(e==this.size)return of(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let n=0,r=0;;n++){let o=this.child(n),s=r+o.nodeSize;if(s>=e)return s==e?of(n+1,s):of(n,r);r=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,n){if(!n)return oe.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new oe(n.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return oe.empty;let n,r=0;for(let o=0;o<e.length;o++){let s=e[o];r+=s.nodeSize,o&&s.isText&&e[o-1].sameMarkup(s)?(n||(n=e.slice(0,o)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new oe(n||e,r)}static from(e){if(!e)return oe.empty;if(e instanceof oe)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new oe([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}oe.empty=new oe([],0);const Og={index:0,offset:0};function of(t,e){return Og.index=t,Og.offset=e,Og}function Vf(t,e){if(t===e)return!0;if(!(t&&typeof t=="object")||!(e&&typeof e=="object"))return!1;let n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(let r=0;r<t.length;r++)if(!Vf(t[r],e[r]))return!1}else{for(let r in t)if(!(r in e)||!Vf(t[r],e[r]))return!1;for(let r in e)if(!(r in t))return!1}return!0}let Mt=class Mv{constructor(e,n){this.type=e,this.attrs=n}addToSet(e){let n,r=!1;for(let o=0;o<e.length;o++){let s=e[o];if(this.eq(s))return e;if(this.type.excludes(s.type))n||(n=e.slice(0,o));else{if(s.type.excludes(this.type))return e;!r&&s.type.rank>this.type.rank&&(n||(n=e.slice(0,o)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=e.slice()),r||n.push(this),n}removeFromSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return e.slice(0,n).concat(e.slice(n+1));return e}isInSet(e){for(let n=0;n<e.length;n++)if(this.eq(e[n]))return!0;return!1}eq(e){return this==e||this.type==e.type&&Vf(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let o=r.create(n.attrs);return r.checkAttrs(o.attrs),o}static sameSet(e,n){if(e==n)return!0;if(e.length!=n.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(n[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Mv.none;if(e instanceof Mv)return[e];let n=e.slice();return n.sort((r,o)=>r.type.rank-o.type.rank),n}};Mt.none=[];class Ff extends Error{}class xe{constructor(e,n,r){this.content=e,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,n){let r=w2(this.content,e+this.openStart,n);return r&&new xe(r,this.openStart,this.openEnd)}removeBetween(e,n){return new xe(T2(this.content,e+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,n){if(!n)return xe.empty;let r=n.openStart||0,o=n.openEnd||0;if(typeof r!="number"||typeof o!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new xe(oe.fromJSON(e,n.content),r,o)}static maxOpen(e,n=!0){let r=0,o=0;for(let s=e.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=e.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)o++;return new xe(e,r,o)}}xe.empty=new xe(oe.empty,0,0);function T2(t,e,n){let{index:r,offset:o}=t.findIndex(e),s=t.maybeChild(r),{index:l,offset:u}=t.findIndex(n);if(o==e||s.isText){if(u!=n&&!t.child(l).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(r!=l)throw new RangeError("Removing non-flat range");return t.replaceChild(r,s.copy(T2(s.content,e-o-1,n-o-1)))}function w2(t,e,n,r){let{index:o,offset:s}=t.findIndex(e),l=t.maybeChild(o);if(s==e||l.isText)return r&&!r.canReplace(o,o,n)?null:t.cut(0,e).append(n).append(t.cut(e));let u=w2(l.content,e-s-1,n,l);return u&&t.replaceChild(o,l.copy(u))}function w5(t,e,n){if(n.openStart>t.depth)throw new Ff("Inserted content deeper than insertion position");if(t.depth-n.openStart!=e.depth-n.openEnd)throw new Ff("Inconsistent open depths");return C2(t,e,n,0)}function C2(t,e,n,r){let o=t.index(r),s=t.node(r);if(o==e.index(r)&&r<t.depth-n.openStart){let l=C2(t,e,n,r+1);return s.copy(s.content.replaceChild(o,l))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&t.depth==r&&e.depth==r){let l=t.parent,u=l.content;return na(l,u.cut(0,t.parentOffset).append(n.content).append(u.cut(e.parentOffset)))}else{let{start:l,end:u}=C5(n,t);return na(s,_2(t,l,u,e,r))}else return na(s,Wf(t,e,r))}function A2(t,e){if(!e.type.compatibleContent(t.type))throw new Ff("Cannot join "+e.type.name+" onto "+t.type.name)}function Ov(t,e,n){let r=t.node(n);return A2(r,e.node(n)),r}function ta(t,e){let n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function Zc(t,e,n,r){let o=(e||t).node(n),s=0,l=e?e.index(n):o.childCount;t&&(s=t.index(n),t.depth>n?s++:t.textOffset&&(ta(t.nodeAfter,r),s++));for(let u=s;u<l;u++)ta(o.child(u),r);e&&e.depth==n&&e.textOffset&&ta(e.nodeBefore,r)}function na(t,e){return t.type.checkContent(e),t.copy(e)}function _2(t,e,n,r,o){let s=t.depth>o&&Ov(t,e,o+1),l=r.depth>o&&Ov(n,r,o+1),u=[];return Zc(null,t,o,u),s&&l&&e.index(o)==n.index(o)?(A2(s,l),ta(na(s,_2(t,e,n,r,o+1)),u)):(s&&ta(na(s,Wf(t,e,o+1)),u),Zc(e,n,o,u),l&&ta(na(l,Wf(n,r,o+1)),u)),Zc(r,null,o,u),new oe(u)}function Wf(t,e,n){let r=[];if(Zc(null,t,n,r),t.depth>n){let o=Ov(t,e,n+1);ta(na(o,Wf(t,e,n+1)),r)}return Zc(e,null,n,r),new oe(r)}function C5(t,e){let n=e.depth-t.openStart,o=e.node(n).copy(t.content);for(let s=n-1;s>=0;s--)o=e.node(s).copy(oe.from(o));return{start:o.resolveNoCache(t.openStart+n),end:o.resolveNoCache(o.content.size-t.openEnd-n)}}class du{constructor(e,n,r){this.pos=e,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,n=this.index(this.depth);if(n==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],o=e.child(n);return r?e.child(n).cut(r):o}get nodeBefore(){let e=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(e).cut(0,n):e==0?null:this.parent.child(e-1)}posAtIndex(e,n){n=this.resolveDepth(n);let r=this.path[n*3],o=n==0?0:this.path[n*3-1]+1;for(let s=0;s<e;s++)o+=r.child(s).nodeSize;return o}marks(){let e=this.parent,n=this.index();if(e.content.size==0)return Mt.none;if(this.textOffset)return e.child(n).marks;let r=e.maybeChild(n-1),o=e.maybeChild(n);if(!r){let u=r;r=o,o=u}let s=r.marks;for(var l=0;l<s.length;l++)s[l].type.spec.inclusive===!1&&(!o||!s[l].isInSet(o.marks))&&(s=s[l--].removeFromSet(s));return s}marksAcross(e){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,o=e.parent.maybeChild(e.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!o||!r[s].isInSet(o.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(e){for(let n=this.depth;n>0;n--)if(this.start(n)<=e&&this.end(n)>=e)return n;return 0}blockRange(e=this,n){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!n||n(this.node(r))))return new Gf(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let n=1;n<=this.depth;n++)e+=(e?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return e+":"+this.parentOffset}static resolve(e,n){if(!(n>=0&&n<=e.content.size))throw new RangeError("Position "+n+" out of range");let r=[],o=0,s=n;for(let l=e;;){let{index:u,offset:d}=l.content.findIndex(s),h=s-d;if(r.push(l,u,o+d),!h||(l=l.child(u),l.isText))break;s=h-1,o+=d+1}return new du(n,r,s)}static resolveCached(e,n){let r=SE.get(e);if(r)for(let s=0;s<r.elts.length;s++){let l=r.elts[s];if(l.pos==n)return l}else SE.set(e,r=new A5);let o=r.elts[r.i]=du.resolve(e,n);return r.i=(r.i+1)%_5,o}}class A5{constructor(){this.elts=[],this.i=0}}const _5=12,SE=new WeakMap;class Gf{constructor(e,n,r){this.$from=e,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const M5=Object.create(null);class ti{constructor(e,n,r,o=Mt.none){this.type=e,this.attrs=n,this.marks=o,this.content=r||oe.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,n,r,o=0){this.content.nodesBetween(e,n,r,o,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,n,r,o){return this.content.textBetween(e,n,r,o)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,n,r){return this.type==e&&Vf(this.attrs,n||e.defaultAttrs||M5)&&Mt.sameSet(this.marks,r||Mt.none)}copy(e=null){return e==this.content?this:new ti(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new ti(this.type,this.attrs,this.content,e)}cut(e,n=this.content.size){return e==0&&n==this.content.size?this:this.copy(this.content.cut(e,n))}slice(e,n=this.content.size,r=!1){if(e==n)return xe.empty;let o=this.resolve(e),s=this.resolve(n),l=r?0:o.sharedDepth(n),u=o.start(l),h=o.node(l).content.cut(o.pos-u,s.pos-u);return new xe(h,o.depth-l,s.depth-l)}replace(e,n,r){return w5(this.resolve(e),this.resolve(n),r)}nodeAt(e){for(let n=this;;){let{index:r,offset:o}=n.content.findIndex(e);if(n=n.maybeChild(r),!n)return null;if(o==e||n.isText)return n;e-=o+1}}childAfter(e){let{index:n,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(n),index:n,offset:r};let o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}}resolve(e){return du.resolveCached(this,e)}resolveNoCache(e){return du.resolve(this,e)}rangeHasMark(e,n,r){let o=!1;return n>e&&this.nodesBetween(e,n,s=>(r.isInSet(s.marks)&&(o=!0),!o)),o}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),M2(this.marks,e)}contentMatchAt(e){let n=this.type.contentMatch.matchFragment(this.content,0,e);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(e,n,r=oe.empty,o=0,s=r.childCount){let l=this.contentMatchAt(e).matchFragment(r,o,s),u=l&&l.matchFragment(this.content,n);if(!u||!u.validEnd)return!1;for(let d=o;d<s;d++)if(!this.type.allowsMarks(r.child(d).marks))return!1;return!0}canReplaceWith(e,n,r,o){if(o&&!this.type.allowsMarks(o))return!1;let s=this.contentMatchAt(e).matchType(r),l=s&&s.matchFragment(this.content,n);return l?l.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=Mt.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!Mt.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let e={type:this.type.name};for(let n in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(n=>n.toJSON())),e}static fromJSON(e,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(e.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(n.text,r)}let o=oe.fromJSON(e,n.content),s=e.nodeType(n.type).create(n.attrs,o,r);return s.type.checkAttrs(s.attrs),s}}ti.prototype.text=void 0;class $f extends ti{constructor(e,n,r,o){if(super(e,n,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):M2(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,n){return this.text.slice(e,n)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new $f(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new $f(this.type,this.attrs,e,this.marks)}cut(e=0,n=this.text.length){return e==0&&n==this.text.length?this:this.withText(this.text.slice(e,n))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function M2(t,e){for(let n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}class aa{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,n){let r=new O5(e,n);if(r.next==null)return aa.empty;let o=O2(r);r.next&&r.err("Unexpected trailing text");let s=I5(z5(o));return B5(s,r),s}matchType(e){for(let n=0;n<this.next.length;n++)if(this.next[n].type==e)return this.next[n].next;return null}matchFragment(e,n=0,r=e.childCount){let o=this;for(let s=n;o&&s<r;s++)o=o.matchType(e.child(s).type);return o}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:n}=this.next[e];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(e){for(let n=0;n<this.next.length;n++)for(let r=0;r<e.next.length;r++)if(this.next[n].type==e.next[r].type)return!0;return!1}fillBefore(e,n=!1,r=0){let o=[this];function s(l,u){let d=l.matchFragment(e,r);if(d&&(!n||d.validEnd))return oe.from(u.map(h=>h.createAndFill()));for(let h=0;h<l.next.length;h++){let{type:p,next:g}=l.next[h];if(!(p.isText||p.hasRequiredAttrs())&&o.indexOf(g)==-1){o.push(g);let y=s(g,u.concat(p));if(y)return y}}return null}return s(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let n=this.computeWrapping(e);return this.wrapCache.push(e,n),n}computeWrapping(e){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let o=r.shift(),s=o.match;if(s.matchType(e)){let l=[];for(let u=o;u.type;u=u.via)l.push(u.type);return l.reverse()}for(let l=0;l<s.next.length;l++){let{type:u,next:d}=s.next[l];!u.isLeaf&&!u.hasRequiredAttrs()&&!(u.name in n)&&(!o.type||d.validEnd)&&(r.push({match:u.contentMatch,type:u,via:o}),n[u.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function n(r){e.push(r);for(let o=0;o<r.next.length;o++)e.indexOf(r.next[o].next)==-1&&n(r.next[o].next)}return n(this),e.map((r,o)=>{let s=o+(r.validEnd?"*":" ")+" ";for(let l=0;l<r.next.length;l++)s+=(l?", ":"")+r.next[l].type.name+"->"+e.indexOf(r.next[l].next);return s}).join(`
`)}}aa.empty=new aa(!0);class O5{constructor(e,n){this.string=e,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function O2(t){let e=[];do e.push(j5(t));while(t.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function j5(t){let e=[];do e.push(R5(t));while(t.next&&t.next!=")"&&t.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function R5(t){let e=L5(t);for(;;)if(t.eat("+"))e={type:"plus",expr:e};else if(t.eat("*"))e={type:"star",expr:e};else if(t.eat("?"))e={type:"opt",expr:e};else if(t.eat("{"))e=N5(t,e);else break;return e}function EE(t){/\D/.test(t.next)&&t.err("Expected number, got '"+t.next+"'");let e=Number(t.next);return t.pos++,e}function N5(t,e){let n=EE(t),r=n;return t.eat(",")&&(t.next!="}"?r=EE(t):r=-1),t.eat("}")||t.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:e}}function D5(t,e){let n=t.nodeTypes,r=n[e];if(r)return[r];let o=[];for(let s in n){let l=n[s];l.isInGroup(e)&&o.push(l)}return o.length==0&&t.err("No node type or group '"+e+"' found"),o}function L5(t){if(t.eat("(")){let e=O2(t);return t.eat(")")||t.err("Missing closing paren"),e}else if(/\W/.test(t.next))t.err("Unexpected token '"+t.next+"'");else{let e=D5(t,t.next).map(n=>(t.inline==null?t.inline=n.isInline:t.inline!=n.isInline&&t.err("Mixing inline and block content"),{type:"name",value:n}));return t.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function z5(t){let e=[[]];return o(s(t,0),n()),e;function n(){return e.push([])-1}function r(l,u,d){let h={term:d,to:u};return e[l].push(h),h}function o(l,u){l.forEach(d=>d.to=u)}function s(l,u){if(l.type=="choice")return l.exprs.reduce((d,h)=>d.concat(s(h,u)),[]);if(l.type=="seq")for(let d=0;;d++){let h=s(l.exprs[d],u);if(d==l.exprs.length-1)return h;o(h,u=n())}else if(l.type=="star"){let d=n();return r(u,d),o(s(l.expr,d),d),[r(d)]}else if(l.type=="plus"){let d=n();return o(s(l.expr,u),d),o(s(l.expr,d),d),[r(d)]}else{if(l.type=="opt")return[r(u)].concat(s(l.expr,u));if(l.type=="range"){let d=u;for(let h=0;h<l.min;h++){let p=n();o(s(l.expr,d),p),d=p}if(l.max==-1)o(s(l.expr,d),d);else for(let h=l.min;h<l.max;h++){let p=n();r(d,p),o(s(l.expr,d),p),d=p}return[r(d)]}else{if(l.type=="name")return[r(u,void 0,l.value)];throw new Error("Unknown expr type")}}}}function j2(t,e){return e-t}function kE(t,e){let n=[];return r(e),n.sort(j2);function r(o){let s=t[o];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(o);for(let l=0;l<s.length;l++){let{term:u,to:d}=s[l];!u&&n.indexOf(d)==-1&&r(d)}}}function I5(t){let e=Object.create(null);return n(kE(t,0));function n(r){let o=[];r.forEach(l=>{t[l].forEach(({term:u,to:d})=>{if(!u)return;let h;for(let p=0;p<o.length;p++)o[p][0]==u&&(h=o[p][1]);kE(t,d).forEach(p=>{h||o.push([u,h=[]]),h.indexOf(p)==-1&&h.push(p)})})});let s=e[r.join(",")]=new aa(r.indexOf(t.length-1)>-1);for(let l=0;l<o.length;l++){let u=o[l][1].sort(j2);s.next.push({type:o[l][0],next:e[u.join(",")]||n(u)})}return s}}function B5(t,e){for(let n=0,r=[t];n<r.length;n++){let o=r[n],s=!o.validEnd,l=[];for(let u=0;u<o.next.length;u++){let{type:d,next:h}=o.next[u];l.push(d.name),s&&!(d.isText||d.hasRequiredAttrs())&&(s=!1),r.indexOf(h)==-1&&r.push(h)}s&&e.err("Only non-generatable nodes ("+l.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function R2(t){let e=Object.create(null);for(let n in t){let r=t[n];if(!r.hasDefault)return null;e[n]=r.default}return e}function N2(t,e){let n=Object.create(null);for(let r in t){let o=e&&e[r];if(o===void 0){let s=t[r];if(s.hasDefault)o=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=o}return n}function D2(t,e,n,r){for(let o in e)if(!(o in t))throw new RangeError(`Unsupported attribute ${o} for ${n} of type ${o}`);for(let o in t){let s=t[o];s.validate&&s.validate(e[o])}}function L2(t,e){let n=Object.create(null);if(e)for(let r in e)n[r]=new U5(t,r,e[r]);return n}let TE=class z2{constructor(e,n,r){this.name=e,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=L2(e,r.attrs),this.defaultAttrs=R2(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==aa.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:N2(this.attrs,e)}create(e=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new ti(this,this.computeAttrs(e),oe.from(n),Mt.setFrom(r))}createChecked(e=null,n,r){return n=oe.from(n),this.checkContent(n),new ti(this,this.computeAttrs(e),n,Mt.setFrom(r))}createAndFill(e=null,n,r){if(e=this.computeAttrs(e),n=oe.from(n),n.size){let l=this.contentMatch.fillBefore(n);if(!l)return null;n=l.append(n)}let o=this.contentMatch.matchFragment(n),s=o&&o.fillBefore(oe.empty,!0);return s?new ti(this,e,n.append(s),Mt.setFrom(r)):null}validContent(e){let n=this.contentMatch.matchFragment(e);if(!n||!n.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){D2(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let n=0;n<e.length;n++)if(!this.allowsMarkType(e[n].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let n;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?n&&n.push(e[r]):n||(n=e.slice(0,r));return n?n.length?n:Mt.none:e}static compile(e,n){let r=Object.create(null);e.forEach((s,l)=>r[s]=new z2(s,n,l));let o=n.spec.topNode||"doc";if(!r[o])throw new RangeError("Schema is missing its top node type ('"+o+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function P5(t,e,n){let r=n.split("|");return o=>{let s=o===null?"null":typeof o;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${t}, got ${s}`)}}class U5{constructor(e,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?P5(e,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class qh{constructor(e,n,r,o){this.name=e,this.rank=n,this.schema=r,this.spec=o,this.attrs=L2(e,o.attrs),this.excluded=null;let s=R2(this.attrs);this.instance=s?new Mt(this,s):null}create(e=null){return!e&&this.instance?this.instance:new Mt(this,N2(this.attrs,e))}static compile(e,n){let r=Object.create(null),o=0;return e.forEach((s,l)=>r[s]=new qh(s,o++,n,l)),r}removeFromSet(e){for(var n=0;n<e.length;n++)e[n].type==this&&(e=e.slice(0,n).concat(e.slice(n+1)),n--);return e}isInSet(e){for(let n=0;n<e.length;n++)if(e[n].type==this)return e[n]}checkAttrs(e){D2(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class I2{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let o in e)n[o]=e[o];n.nodes=Rn.from(e.nodes),n.marks=Rn.from(e.marks||{}),this.nodes=TE.compile(this.spec.nodes,this),this.marks=qh.compile(this.spec.marks,this);let r=Object.create(null);for(let o in this.nodes){if(o in this.marks)throw new RangeError(o+" can not be both a node and a mark");let s=this.nodes[o],l=s.spec.content||"",u=s.spec.marks;if(s.contentMatch=r[l]||(r[l]=aa.parse(l,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=u=="_"?null:u?wE(this,u.split(" ")):u==""||!s.inlineContent?[]:null}for(let o in this.marks){let s=this.marks[o],l=s.spec.excludes;s.excluded=l==null?[s]:l==""?[]:wE(this,l.split(" "))}this.nodeFromJSON=o=>ti.fromJSON(this,o),this.markFromJSON=o=>Mt.fromJSON(this,o),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,n=null,r,o){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof TE){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(n,r,o)}text(e,n){let r=this.nodes.text;return new $f(r,r.defaultAttrs,e,Mt.setFrom(n))}mark(e,n){return typeof e=="string"&&(e=this.marks[e]),e.create(n)}nodeType(e){let n=this.nodes[e];if(!n)throw new RangeError("Unknown node type: "+e);return n}}function wE(t,e){let n=[];for(let r=0;r<e.length;r++){let o=e[r],s=t.marks[o],l=s;if(s)n.push(s);else for(let u in t.marks){let d=t.marks[u];(o=="_"||d.spec.group&&d.spec.group.split(" ").indexOf(o)>-1)&&n.push(l=d)}if(!l)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return n}function H5(t){return t.tag!=null}function q5(t){return t.style!=null}class cs{constructor(e,n){this.schema=e,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(o=>{if(H5(o))this.tags.push(o);else if(q5(o)){let s=/[^=]*/.exec(o.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(o)}}),this.normalizeLists=!this.tags.some(o=>{if(!/^(ul|ol)\b/.test(o.tag)||!o.node)return!1;let s=e.nodes[o.node];return s.contentMatch.matchType(s)})}parse(e,n={}){let r=new AE(this,n,!1);return r.addAll(e,Mt.none,n.from,n.to),r.finish()}parseSlice(e,n={}){let r=new AE(this,n,!0);return r.addAll(e,Mt.none,n.from,n.to),xe.maxOpen(r.finish())}matchTag(e,n,r){for(let o=r?this.tags.indexOf(r)+1:0;o<this.tags.length;o++){let s=this.tags[o];if(W5(e,s.tag)&&(s.namespace===void 0||e.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let l=s.getAttrs(e);if(l===!1)continue;s.attrs=l||void 0}return s}}}matchStyle(e,n,r,o){for(let s=o?this.styles.indexOf(o)+1:0;s<this.styles.length;s++){let l=this.styles[s],u=l.style;if(!(u.indexOf(e)!=0||l.context&&!r.matchesContext(l.context)||u.length>e.length&&(u.charCodeAt(e.length)!=61||u.slice(e.length+1)!=n))){if(l.getAttrs){let d=l.getAttrs(n);if(d===!1)continue;l.attrs=d||void 0}return l}}}static schemaRules(e){let n=[];function r(o){let s=o.priority==null?50:o.priority,l=0;for(;l<n.length;l++){let u=n[l];if((u.priority==null?50:u.priority)<s)break}n.splice(l,0,o)}for(let o in e.marks){let s=e.marks[o].spec.parseDOM;s&&s.forEach(l=>{r(l=_E(l)),l.mark||l.ignore||l.clearMark||(l.mark=o)})}for(let o in e.nodes){let s=e.nodes[o].spec.parseDOM;s&&s.forEach(l=>{r(l=_E(l)),l.node||l.ignore||l.mark||(l.node=o)})}return n}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new cs(e,cs.schemaRules(e)))}}const B2={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},V5={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},P2={ol:!0,ul:!0},fu=1,jv=2,eu=4;function CE(t,e,n){return e!=null?(e?fu:0)|(e==="full"?jv:0):t&&t.whitespace=="pre"?fu|jv:n&~eu}class sf{constructor(e,n,r,o,s,l){this.type=e,this.attrs=n,this.marks=r,this.solid=o,this.options=l,this.content=[],this.activeMarks=Mt.none,this.match=s||(l&eu?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(oe.from(e));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,o;return(o=r.findWrapping(e.type))?(this.match=r,o):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&fu)){let r=this.content[this.content.length-1],o;if(r&&r.isText&&(o=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==o[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-o[0].length))}}let n=oe.from(this.content);return!e&&this.match&&(n=n.append(this.match.fillBefore(oe.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!B2.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class AE{constructor(e,n,r){this.parser=e,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let o=n.topNode,s,l=CE(null,n.preserveWhitespace,0)|(r?eu:0);o?s=new sf(o.type,o.attrs,Mt.none,!0,n.topMatch||o.type.contentMatch,l):r?s=new sf(null,null,Mt.none,!0,null,l):s=new sf(e.schema.topNodeType,null,Mt.none,!0,null,l),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,n){e.nodeType==3?this.addTextNode(e,n):e.nodeType==1&&this.addElement(e,n)}addTextNode(e,n){let r=e.nodeValue,o=this.top,s=o.options&jv?"full":this.localPreserveWS||(o.options&fu)>0,{schema:l}=this.parser;if(s==="full"||o.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(s)if(s==="full")r=r.replace(/\r\n?/g,`
`);else if(l.linebreakReplacement&&/[\r\n]/.test(r)&&this.top.findWrapping(l.linebreakReplacement.create())){let u=r.split(/\r?\n|\r/);for(let d=0;d<u.length;d++)d&&this.insertNode(l.linebreakReplacement.create(),n,!0),u[d]&&this.insertNode(l.text(u[d]),n,!/\S/.test(u[d]));r=""}else r=r.replace(/\r?\n|\r/g," ");else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let u=o.content[o.content.length-1],d=e.previousSibling;(!u||d&&d.nodeName=="BR"||u.isText&&/[ \t\r\n\u000c]$/.test(u.text))&&(r=r.slice(1))}r&&this.insertNode(l.text(r),n,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,n,r){let o=this.localPreserveWS,s=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let l=e.nodeName.toLowerCase(),u;P2.hasOwnProperty(l)&&this.parser.normalizeLists&&F5(e);let d=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(u=this.parser.matchTag(e,this,r));e:if(d?d.ignore:V5.hasOwnProperty(l))this.findInside(e),this.ignoreFallback(e,n);else if(!d||d.skip||d.closeParent){d&&d.closeParent?this.open=Math.max(0,this.open-1):d&&d.skip.nodeType&&(e=d.skip);let h,p=this.needsBlock;if(B2.hasOwnProperty(l))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),h=!0,s.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,n);break e}let g=d&&d.skip?n:this.readStyles(e,n);g&&this.addAll(e,g),h&&this.sync(s),this.needsBlock=p}else{let h=this.readStyles(e,n);h&&this.addElementByRule(e,d,h,d.consuming===!1?u:void 0)}this.localPreserveWS=o}leafFallback(e,n){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),n)}ignoreFallback(e,n){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(e,n){let r=e.style;if(r&&r.length)for(let o=0;o<this.parser.matchedStyles.length;o++){let s=this.parser.matchedStyles[o],l=r.getPropertyValue(s);if(l)for(let u=void 0;;){let d=this.parser.matchStyle(s,l,this,u);if(!d)break;if(d.ignore)return null;if(d.clearMark?n=n.filter(h=>!d.clearMark(h)):n=n.concat(this.parser.schema.marks[d.mark].create(d.attrs)),d.consuming===!1)u=d;else break}}return n}addElementByRule(e,n,r,o){let s,l;if(n.node)if(l=this.parser.schema.nodes[n.node],l.isLeaf)this.insertNode(l.create(n.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let d=this.enter(l,n.attrs||null,r,n.preserveWhitespace);d&&(s=!0,r=d)}else{let d=this.parser.schema.marks[n.mark];r=r.concat(d.create(n.attrs))}let u=this.top;if(l&&l.isLeaf)this.findInside(e);else if(o)this.addElement(e,r,o);else if(n.getContent)this.findInside(e),n.getContent(e,this.parser.schema).forEach(d=>this.insertNode(d,r,!1));else{let d=e;typeof n.contentElement=="string"?d=e.querySelector(n.contentElement):typeof n.contentElement=="function"?d=n.contentElement(e):n.contentElement&&(d=n.contentElement),this.findAround(e,d,!0),this.addAll(d,r),this.findAround(e,d,!1)}s&&this.sync(u)&&this.open--}addAll(e,n,r,o){let s=r||0;for(let l=r?e.childNodes[r]:e.firstChild,u=o==null?null:e.childNodes[o];l!=u;l=l.nextSibling,++s)this.findAtPoint(e,s),this.addDOM(l,n);this.findAtPoint(e,s)}findPlace(e,n,r){let o,s;for(let l=this.open,u=0;l>=0;l--){let d=this.nodes[l],h=d.findWrapping(e);if(h&&(!o||o.length>h.length+u)&&(o=h,s=d,!h.length))break;if(d.solid){if(r)break;u+=2}}if(!o)return null;this.sync(s);for(let l=0;l<o.length;l++)n=this.enterInner(o[l],null,n,!1);return n}insertNode(e,n,r){if(e.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(n=this.enterInner(s,null,n))}let o=this.findPlace(e,n,r);if(o){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(e.type));let l=Mt.none;for(let u of o.concat(e.marks))(s.type?s.type.allowsMarkType(u.type):ME(u.type,e.type))&&(l=u.addToSet(l));return s.content.push(e.mark(l)),!0}return!1}enter(e,n,r,o){let s=this.findPlace(e.create(n),r,!1);return s&&(s=this.enterInner(e,n,r,!0,o)),s}enterInner(e,n,r,o=!1,s){this.closeExtra();let l=this.top;l.match=l.match&&l.match.matchType(e);let u=CE(e,s,l.options);l.options&eu&&l.content.length==0&&(u|=eu);let d=Mt.none;return r=r.filter(h=>(l.type?l.type.allowsMarkType(h.type):ME(h.type,e))?(d=h.addToSet(d),!1):!0),this.nodes.push(new sf(e,n,d,o,null,u)),this.open++,r}closeExtra(e=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let n=this.open;n>=0;n--){if(this.nodes[n]==e)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=fu)}return!1}get currentPos(){this.closeExtra();let e=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let o=r.length-1;o>=0;o--)e+=r[o].nodeSize;n&&e++}return e}findAtPoint(e,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&e.nodeType==1&&e.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(e,n,r){if(e!=n&&this.find)for(let o=0;o<this.find.length;o++)this.find[o].pos==null&&e.nodeType==1&&e.contains(this.find[o].node)&&n.compareDocumentPosition(this.find[o].node)&(r?2:4)&&(this.find[o].pos=this.currentPos)}findInText(e){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==e&&(this.find[n].pos=this.currentPos-(e.nodeValue.length-this.find[n].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let n=e.split("/"),r=this.options.context,o=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(o?0:1),l=(u,d)=>{for(;u>=0;u--){let h=n[u];if(h==""){if(u==n.length-1||u==0)continue;for(;d>=s;d--)if(l(u-1,d))return!0;return!1}else{let p=d>0||d==0&&o?this.nodes[d].type:r&&d>=s?r.node(d-s).type:null;if(!p||p.name!=h&&!p.isInGroup(h))return!1;d--}}return!0};return l(n.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let n=e.depth;n>=0;n--){let r=e.node(n).contentMatchAt(e.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function F5(t){for(let e=t.firstChild,n=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&P2.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):r=="li"?n=e:r&&(n=null)}}function W5(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function _E(t){let e={};for(let n in t)e[n]=t[n];return e}function ME(t,e){let n=e.schema.nodes;for(let r in n){let o=n[r];if(!o.allowsMarkType(t))continue;let s=[],l=u=>{s.push(u);for(let d=0;d<u.edgeCount;d++){let{type:h,next:p}=u.edge(d);if(h==e||s.indexOf(p)<0&&l(p))return!0}};if(l(o.contentMatch))return!0}}class ga{constructor(e,n){this.nodes=e,this.marks=n}serializeFragment(e,n={},r){r||(r=jg(n).createDocumentFragment());let o=r,s=[];return e.forEach(l=>{if(s.length||l.marks.length){let u=0,d=0;for(;u<s.length&&d<l.marks.length;){let h=l.marks[d];if(!this.marks[h.type.name]){d++;continue}if(!h.eq(s[u][0])||h.type.spec.spanning===!1)break;u++,d++}for(;u<s.length;)o=s.pop()[1];for(;d<l.marks.length;){let h=l.marks[d++],p=this.serializeMark(h,l.isInline,n);p&&(s.push([h,o]),o.appendChild(p.dom),o=p.contentDOM||p.dom)}}o.appendChild(this.serializeNodeInner(l,n))}),r}serializeNodeInner(e,n){let{dom:r,contentDOM:o}=Af(jg(n),this.nodes[e.type.name](e),null,e.attrs);if(o){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,n,o)}return r}serializeNode(e,n={}){let r=this.serializeNodeInner(e,n);for(let o=e.marks.length-1;o>=0;o--){let s=this.serializeMark(e.marks[o],e.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(e,n,r={}){let o=this.marks[e.type.name];return o&&Af(jg(r),o(e,n),null,e.attrs)}static renderSpec(e,n,r=null,o){return Af(e,n,r,o)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new ga(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let n=OE(e.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(e){return OE(e.marks)}}function OE(t){let e={};for(let n in t){let r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function jg(t){return t.document||window.document}const jE=new WeakMap;function G5(t){let e=jE.get(t);return e===void 0&&jE.set(t,e=$5(t)),e}function $5(t){let e=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let o=0;o<r.length;o++)n(r[o]);else for(let o in r)n(r[o])}return n(t),e}function Af(t,e,n,r){if(typeof e=="string")return{dom:t.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let o=e[0],s;if(typeof o!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=G5(r))&&s.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let l=o.indexOf(" ");l>0&&(n=o.slice(0,l),o=o.slice(l+1));let u,d=n?t.createElementNS(n,o):t.createElement(o),h=e[1],p=1;if(h&&typeof h=="object"&&h.nodeType==null&&!Array.isArray(h)){p=2;for(let g in h)if(h[g]!=null){let y=g.indexOf(" ");y>0?d.setAttributeNS(g.slice(0,y),g.slice(y+1),h[g]):g=="style"&&d.style?d.style.cssText=h[g]:d.setAttribute(g,h[g])}}for(let g=p;g<e.length;g++){let y=e[g];if(y===0){if(g<e.length-1||g>p)throw new RangeError("Content hole must be the only child of its parent node");return{dom:d,contentDOM:d}}else{let{dom:x,contentDOM:S}=Af(t,y,n,r);if(d.appendChild(x),S){if(u)throw new RangeError("Multiple content holes");u=S}}}return{dom:d,contentDOM:u}}const U2=65535,H2=Math.pow(2,16);function K5(t,e){return t+e*H2}function RE(t){return t&U2}function Y5(t){return(t-(t&U2))/H2}const q2=1,V2=2,_f=4,F2=8;class Rv{constructor(e,n,r){this.pos=e,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&F2)>0}get deletedBefore(){return(this.delInfo&(q2|_f))>0}get deletedAfter(){return(this.delInfo&(V2|_f))>0}get deletedAcross(){return(this.delInfo&_f)>0}}class Sr{constructor(e,n=!1){if(this.ranges=e,this.inverted=n,!e.length&&Sr.empty)return Sr.empty}recover(e){let n=0,r=RE(e);if(!this.inverted)for(let o=0;o<r;o++)n+=this.ranges[o*3+2]-this.ranges[o*3+1];return this.ranges[r*3]+n+Y5(e)}mapResult(e,n=1){return this._map(e,n,!1)}map(e,n=1){return this._map(e,n,!0)}_map(e,n,r){let o=0,s=this.inverted?2:1,l=this.inverted?1:2;for(let u=0;u<this.ranges.length;u+=3){let d=this.ranges[u]-(this.inverted?o:0);if(d>e)break;let h=this.ranges[u+s],p=this.ranges[u+l],g=d+h;if(e<=g){let y=h?e==d?-1:e==g?1:n:n,x=d+o+(y<0?0:p);if(r)return x;let S=e==(n<0?d:g)?null:K5(u/3,e-d),E=e==d?V2:e==g?q2:_f;return(n<0?e!=d:e!=g)&&(E|=F2),new Rv(x,E,S)}o+=p-h}return r?e+o:new Rv(e+o,0,null)}touches(e,n){let r=0,o=RE(n),s=this.inverted?2:1,l=this.inverted?1:2;for(let u=0;u<this.ranges.length;u+=3){let d=this.ranges[u]-(this.inverted?r:0);if(d>e)break;let h=this.ranges[u+s],p=d+h;if(e<=p&&u==o*3)return!0;r+=this.ranges[u+l]-h}return!1}forEach(e){let n=this.inverted?2:1,r=this.inverted?1:2;for(let o=0,s=0;o<this.ranges.length;o+=3){let l=this.ranges[o],u=l-(this.inverted?s:0),d=l+(this.inverted?0:s),h=this.ranges[o+n],p=this.ranges[o+r];e(u,u+h,d,d+p),s+=p-h}}invert(){return new Sr(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?Sr.empty:new Sr(e<0?[0,-e,0]:[0,0,e])}}Sr.empty=new Sr([]);class hu{constructor(e,n,r=0,o=e?e.length:0){this.mirror=n,this.from=r,this.to=o,this._maps=e||[],this.ownData=!(e||n)}get maps(){return this._maps}slice(e=0,n=this.maps.length){return new hu(this._maps,this.mirror,e,n)}appendMap(e,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(e){for(let n=0,r=this._maps.length;n<e._maps.length;n++){let o=e.getMirror(n);this.appendMap(e._maps[n],o!=null&&o<n?r+o:void 0)}}getMirror(e){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==e)return this.mirror[n+(n%2?-1:1)]}}setMirror(e,n){this.mirror||(this.mirror=[]),this.mirror.push(e,n)}appendMappingInverted(e){for(let n=e.maps.length-1,r=this._maps.length+e._maps.length;n>=0;n--){let o=e.getMirror(n);this.appendMap(e._maps[n].invert(),o!=null&&o>n?r-o-1:void 0)}}invert(){let e=new hu;return e.appendMappingInverted(this),e}map(e,n=1){if(this.mirror)return this._map(e,n,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,n);return e}mapResult(e,n=1){return this._map(e,n,!1)}_map(e,n,r){let o=0;for(let s=this.from;s<this.to;s++){let l=this._maps[s],u=l.mapResult(e,n);if(u.recover!=null){let d=this.getMirror(s);if(d!=null&&d>s&&d<this.to){s=d,e=this._maps[d].recover(u.recover);continue}}o|=u.delInfo,e=u.pos}return r?e:new Rv(e,o,null)}}const Rg=Object.create(null);class Fn{getMap(){return Sr.empty}merge(e){return null}static fromJSON(e,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Rg[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Rg)throw new RangeError("Duplicate use of step JSON ID "+e);return Rg[e]=n,n.prototype.jsonID=e,n}}class fn{constructor(e,n){this.doc=e,this.failed=n}static ok(e){return new fn(e,null)}static fail(e){return new fn(null,e)}static fromReplace(e,n,r,o){try{return fn.ok(e.replace(n,r,o))}catch(s){if(s instanceof Ff)return fn.fail(s.message);throw s}}}function O0(t,e,n){let r=[];for(let o=0;o<t.childCount;o++){let s=t.child(o);s.content.size&&(s=s.copy(O0(s.content,e,s))),s.isInline&&(s=e(s,n,o)),r.push(s)}return oe.fromArray(r)}class rs extends Fn{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=e.resolve(this.from),o=r.node(r.sharedDepth(this.to)),s=new xe(O0(n.content,(l,u)=>!l.isAtom||!u.type.allowsMarkType(this.mark.type)?l:l.mark(this.mark.addToSet(l.marks)),o),n.openStart,n.openEnd);return fn.fromReplace(e,this.from,this.to,s)}invert(){return new Zr(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new rs(n.pos,r.pos,this.mark)}merge(e){return e instanceof rs&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new rs(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new rs(n.from,n.to,e.markFromJSON(n.mark))}}Fn.jsonID("addMark",rs);class Zr extends Fn{constructor(e,n,r){super(),this.from=e,this.to=n,this.mark=r}apply(e){let n=e.slice(this.from,this.to),r=new xe(O0(n.content,o=>o.mark(this.mark.removeFromSet(o.marks)),e),n.openStart,n.openEnd);return fn.fromReplace(e,this.from,this.to,r)}invert(){return new rs(this.from,this.to,this.mark)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Zr(n.pos,r.pos,this.mark)}merge(e){return e instanceof Zr&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new Zr(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Zr(n.from,n.to,e.markFromJSON(n.mark))}}Fn.jsonID("removeMark",Zr);class is extends Fn{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return fn.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return fn.fromReplace(e,this.pos,this.pos+1,new xe(oe.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let o=0;o<n.marks.length;o++)if(!n.marks[o].isInSet(r))return new is(this.pos,n.marks[o]);return new is(this.pos,this.mark)}}return new la(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new is(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new is(n.pos,e.markFromJSON(n.mark))}}Fn.jsonID("addNodeMark",is);class la extends Fn{constructor(e,n){super(),this.pos=e,this.mark=n}apply(e){let n=e.nodeAt(this.pos);if(!n)return fn.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return fn.fromReplace(e,this.pos,this.pos+1,new xe(oe.from(r),0,n.isLeaf?0:1))}invert(e){let n=e.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new is(this.pos,this.mark)}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new la(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new la(n.pos,e.markFromJSON(n.mark))}}Fn.jsonID("removeNodeMark",la);class Sn extends Fn{constructor(e,n,r,o=!1){super(),this.from=e,this.to=n,this.slice=r,this.structure=o}apply(e){return this.structure&&Nv(e,this.from,this.to)?fn.fail("Structure replace would overwrite content"):fn.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new Sr([this.from,this.to-this.from,this.slice.size])}invert(e){return new Sn(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Sn(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof Sn)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let n=this.slice.size+e.slice.size==0?xe.empty:new xe(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new Sn(this.from,this.to+(e.to-e.from),n,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let n=this.slice.size+e.slice.size==0?xe.empty:new xe(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new Sn(e.from,this.to,n,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Sn(n.from,n.to,xe.fromJSON(e,n.slice),!!n.structure)}}Fn.jsonID("replace",Sn);class kn extends Fn{constructor(e,n,r,o,s,l,u=!1){super(),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=o,this.slice=s,this.insert=l,this.structure=u}apply(e){if(this.structure&&(Nv(e,this.from,this.gapFrom)||Nv(e,this.gapTo,this.to)))return fn.fail("Structure gap-replace would overwrite content");let n=e.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return fn.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?fn.fromReplace(e,this.from,this.to,r):fn.fail("Content does not fit in gap")}getMap(){return new Sr([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let n=this.gapTo-this.gapFrom;return new kn(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let n=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),o=this.from==this.gapFrom?n.pos:e.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||o<n.pos||s>r.pos?null:new kn(n.pos,r.pos,o,s,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new kn(n.from,n.to,n.gapFrom,n.gapTo,xe.fromJSON(e,n.slice),n.insert,!!n.structure)}}Fn.jsonID("replaceAround",kn);function Nv(t,e,n){let r=t.resolve(e),o=n-e,s=r.depth;for(;o>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,o--;if(o>0){let l=r.node(s).maybeChild(r.indexAfter(s));for(;o>0;){if(!l||l.isLeaf)return!0;l=l.firstChild,o--}}return!1}function X5(t,e,n,r){let o=[],s=[],l,u;t.doc.nodesBetween(e,n,(d,h,p)=>{if(!d.isInline)return;let g=d.marks;if(!r.isInSet(g)&&p.type.allowsMarkType(r.type)){let y=Math.max(h,e),x=Math.min(h+d.nodeSize,n),S=r.addToSet(g);for(let E=0;E<g.length;E++)g[E].isInSet(S)||(l&&l.to==y&&l.mark.eq(g[E])?l.to=x:o.push(l=new Zr(y,x,g[E])));u&&u.to==y?u.to=x:s.push(u=new rs(y,x,r))}}),o.forEach(d=>t.step(d)),s.forEach(d=>t.step(d))}function J5(t,e,n,r){let o=[],s=0;t.doc.nodesBetween(e,n,(l,u)=>{if(!l.isInline)return;s++;let d=null;if(r instanceof qh){let h=l.marks,p;for(;p=r.isInSet(h);)(d||(d=[])).push(p),h=p.removeFromSet(h)}else r?r.isInSet(l.marks)&&(d=[r]):d=l.marks;if(d&&d.length){let h=Math.min(u+l.nodeSize,n);for(let p=0;p<d.length;p++){let g=d[p],y;for(let x=0;x<o.length;x++){let S=o[x];S.step==s-1&&g.eq(o[x].style)&&(y=S)}y?(y.to=h,y.step=s):o.push({style:g,from:Math.max(u,e),to:h,step:s})}}}),o.forEach(l=>t.step(new Zr(l.from,l.to,l.style)))}function j0(t,e,n,r=n.contentMatch,o=!0){let s=t.doc.nodeAt(e),l=[],u=e+1;for(let d=0;d<s.childCount;d++){let h=s.child(d),p=u+h.nodeSize,g=r.matchType(h.type);if(!g)l.push(new Sn(u,p,xe.empty));else{r=g;for(let y=0;y<h.marks.length;y++)n.allowsMarkType(h.marks[y].type)||t.step(new Zr(u,p,h.marks[y]));if(o&&h.isText&&n.whitespace!="pre"){let y,x=/\r?\n|\r/g,S;for(;y=x.exec(h.text);)S||(S=new xe(oe.from(n.schema.text(" ",n.allowedMarks(h.marks))),0,0)),l.push(new Sn(u+y.index,u+y.index+y[0].length,S))}}u=p}if(!r.validEnd){let d=r.fillBefore(oe.empty,!0);t.replace(u,u,new xe(d,0,0))}for(let d=l.length-1;d>=0;d--)t.step(l[d])}function Q5(t,e,n){return(e==0||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function zl(t){let n=t.parent.content.cutByIndex(t.startIndex,t.endIndex);for(let r=t.depth,o=0,s=0;;--r){let l=t.$from.node(r),u=t.$from.index(r)+o,d=t.$to.indexAfter(r)-s;if(r<t.depth&&l.canReplace(u,d,n))return r;if(r==0||l.type.spec.isolating||!Q5(l,u,d))break;u&&(o=1),d<l.childCount&&(s=1)}return null}function Z5(t,e,n){let{$from:r,$to:o,depth:s}=e,l=r.before(s+1),u=o.after(s+1),d=l,h=u,p=oe.empty,g=0;for(let S=s,E=!1;S>n;S--)E||r.index(S)>0?(E=!0,p=oe.from(r.node(S).copy(p)),g++):d--;let y=oe.empty,x=0;for(let S=s,E=!1;S>n;S--)E||o.after(S+1)<o.end(S)?(E=!0,y=oe.from(o.node(S).copy(y)),x++):h++;t.step(new kn(d,h,l,u,new xe(p.append(y),g,x),p.size-g,!0))}function R0(t,e,n=null,r=t){let o=eL(t,e),s=o&&tL(r,e);return s?o.map(NE).concat({type:e,attrs:n}).concat(s.map(NE)):null}function NE(t){return{type:t,attrs:null}}function eL(t,e){let{parent:n,startIndex:r,endIndex:o}=t,s=n.contentMatchAt(r).findWrapping(e);if(!s)return null;let l=s.length?s[0]:e;return n.canReplaceWith(r,o,l)?s:null}function tL(t,e){let{parent:n,startIndex:r,endIndex:o}=t,s=n.child(r),l=e.contentMatch.findWrapping(s.type);if(!l)return null;let d=(l.length?l[l.length-1]:e).contentMatch;for(let h=r;d&&h<o;h++)d=d.matchType(n.child(h).type);return!d||!d.validEnd?null:l}function nL(t,e,n){let r=oe.empty;for(let l=n.length-1;l>=0;l--){if(r.size){let u=n[l].type.contentMatch.matchFragment(r);if(!u||!u.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=oe.from(n[l].type.create(n[l].attrs,r))}let o=e.start,s=e.end;t.step(new kn(o,s,o,s,new xe(r,0,0),n.length,!0))}function rL(t,e,n,r,o){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=t.steps.length;t.doc.nodesBetween(e,n,(l,u)=>{let d=typeof o=="function"?o(l):o;if(l.isTextblock&&!l.hasMarkup(r,d)&&iL(t.doc,t.mapping.slice(s).map(u),r)){let h=null;if(r.schema.linebreakReplacement){let x=r.whitespace=="pre",S=!!r.contentMatch.matchType(r.schema.linebreakReplacement);x&&!S?h=!1:!x&&S&&(h=!0)}h===!1&&G2(t,l,u,s),j0(t,t.mapping.slice(s).map(u,1),r,void 0,h===null);let p=t.mapping.slice(s),g=p.map(u,1),y=p.map(u+l.nodeSize,1);return t.step(new kn(g,y,g+1,y-1,new xe(oe.from(r.create(d,null,l.marks)),0,0),1,!0)),h===!0&&W2(t,l,u,s),!1}})}function W2(t,e,n,r){e.forEach((o,s)=>{if(o.isText){let l,u=/\r?\n|\r/g;for(;l=u.exec(o.text);){let d=t.mapping.slice(r).map(n+1+s+l.index);t.replaceWith(d,d+1,e.type.schema.linebreakReplacement.create())}}})}function G2(t,e,n,r){e.forEach((o,s)=>{if(o.type==o.type.schema.linebreakReplacement){let l=t.mapping.slice(r).map(n+1+s);t.replaceWith(l,l+1,e.type.schema.text(`
`))}})}function iL(t,e,n){let r=t.resolve(e),o=r.index();return r.parent.canReplaceWith(o,o+1,n)}function oL(t,e,n,r,o){let s=t.doc.nodeAt(e);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let l=n.create(r,null,o||s.marks);if(s.isLeaf)return t.replaceWith(e,e+s.nodeSize,l);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);t.step(new kn(e,e+s.nodeSize,e+1,e+s.nodeSize-1,new xe(oe.from(l),0,0),1,!0))}function no(t,e,n=1,r){let o=t.resolve(e),s=o.depth-n,l=r&&r[r.length-1]||o.parent;if(s<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!l.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(let h=o.depth-1,p=n-2;h>s;h--,p--){let g=o.node(h),y=o.index(h);if(g.type.spec.isolating)return!1;let x=g.content.cutByIndex(y,g.childCount),S=r&&r[p+1];S&&(x=x.replaceChild(0,S.type.create(S.attrs)));let E=r&&r[p]||g;if(!g.canReplace(y+1,g.childCount)||!E.type.validContent(x))return!1}let u=o.indexAfter(s),d=r&&r[0];return o.node(s).canReplaceWith(u,u,d?d.type:o.node(s+1).type)}function sL(t,e,n=1,r){let o=t.doc.resolve(e),s=oe.empty,l=oe.empty;for(let u=o.depth,d=o.depth-n,h=n-1;u>d;u--,h--){s=oe.from(o.node(u).copy(s));let p=r&&r[h];l=oe.from(p?p.type.create(p.attrs,l):o.node(u).copy(l))}t.step(new Sn(e,e,new xe(s.append(l),n,n),!0))}function ms(t,e){let n=t.resolve(e),r=n.index();return $2(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function aL(t,e){e.content.size||t.type.compatibleContent(e.type);let n=t.contentMatchAt(t.childCount),{linebreakReplacement:r}=t.type.schema;for(let o=0;o<e.childCount;o++){let s=e.child(o),l=s.type==r?t.type.schema.nodes.text:s.type;if(n=n.matchType(l),!n||!t.type.allowsMarks(s.marks))return!1}return n.validEnd}function $2(t,e){return!!(t&&e&&!t.isLeaf&&aL(t,e))}function Vh(t,e,n=-1){let r=t.resolve(e);for(let o=r.depth;;o--){let s,l,u=r.index(o);if(o==r.depth?(s=r.nodeBefore,l=r.nodeAfter):n>0?(s=r.node(o+1),u++,l=r.node(o).maybeChild(u)):(s=r.node(o).maybeChild(u-1),l=r.node(o+1)),s&&!s.isTextblock&&$2(s,l)&&r.node(o).canReplace(u,u+1))return e;if(o==0)break;e=n<0?r.before(o):r.after(o)}}function lL(t,e,n){let r=null,{linebreakReplacement:o}=t.doc.type.schema,s=t.doc.resolve(e-n),l=s.node().type;if(o&&l.inlineContent){let p=l.whitespace=="pre",g=!!l.contentMatch.matchType(o);p&&!g?r=!1:!p&&g&&(r=!0)}let u=t.steps.length;if(r===!1){let p=t.doc.resolve(e+n);G2(t,p.node(),p.before(),u)}l.inlineContent&&j0(t,e+n-1,l,s.node().contentMatchAt(s.index()),r==null);let d=t.mapping.slice(u),h=d.map(e-n);if(t.step(new Sn(h,d.map(e+n,-1),xe.empty,!0)),r===!0){let p=t.doc.resolve(h);W2(t,p.node(),p.before(),t.steps.length)}return t}function cL(t,e,n){let r=t.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),n))return e;if(r.parentOffset==0)for(let o=r.depth-1;o>=0;o--){let s=r.index(o);if(r.node(o).canReplaceWith(s,s,n))return r.before(o+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let o=r.depth-1;o>=0;o--){let s=r.indexAfter(o);if(r.node(o).canReplaceWith(s,s,n))return r.after(o+1);if(s<r.node(o).childCount)return null}return null}function K2(t,e,n){let r=t.resolve(e);if(!n.content.size)return e;let o=n.content;for(let s=0;s<n.openStart;s++)o=o.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let l=r.depth;l>=0;l--){let u=l==r.depth?0:r.pos<=(r.start(l+1)+r.end(l+1))/2?-1:1,d=r.index(l)+(u>0?1:0),h=r.node(l),p=!1;if(s==1)p=h.canReplace(d,d,o);else{let g=h.contentMatchAt(d).findWrapping(o.firstChild.type);p=g&&h.canReplaceWith(d,d,g[0])}if(p)return u==0?r.pos:u<0?r.before(l+1):r.after(l+1)}return null}function Fh(t,e,n=e,r=xe.empty){if(e==n&&!r.size)return null;let o=t.resolve(e),s=t.resolve(n);return Y2(o,s,r)?new Sn(e,n,r):new uL(o,s,r).fit()}function Y2(t,e,n){return!n.openStart&&!n.openEnd&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}class uL{constructor(e,n,r){this.$from=e,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=oe.empty;for(let o=0;o<=e.depth;o++){let s=e.node(o);this.frontier.push({type:s.type,match:s.contentMatchAt(e.indexAfter(o))})}for(let o=e.depth;o>0;o--)this.placed=oe.from(e.node(o).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let h=this.findFittable();h?this.placeNodes(h):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=this.close(e<0?this.$to:r.doc.resolve(e));if(!o)return null;let s=this.placed,l=r.depth,u=o.depth;for(;l&&u&&s.childCount==1;)s=s.firstChild.content,l--,u--;let d=new xe(s,l,u);return e>-1?new kn(r.pos,e,this.$to.pos,this.$to.end(),d,n):d.size||r.pos!=this.$to.pos?new Sn(r.pos,o.pos,d):null}findFittable(){let e=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,o=this.unplaced.openEnd;r<e;r++){let s=n.firstChild;if(n.childCount>1&&(o=0),s.type.spec.isolating&&o<=r){e=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?e:this.unplaced.openStart;r>=0;r--){let o,s=null;r?(s=Ng(this.unplaced.content,r-1).firstChild,o=s.content):o=this.unplaced.content;let l=o.firstChild;for(let u=this.depth;u>=0;u--){let{type:d,match:h}=this.frontier[u],p,g=null;if(n==1&&(l?h.matchType(l.type)||(g=h.fillBefore(oe.from(l),!1)):s&&d.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:u,parent:s,inject:g};if(n==2&&l&&(p=h.findWrapping(l.type)))return{sliceDepth:r,frontierDepth:u,parent:s,wrap:p};if(s&&h.matchType(s.type))break}}}openMore(){let{content:e,openStart:n,openEnd:r}=this.unplaced,o=Ng(e,n);return!o.childCount||o.firstChild.isLeaf?!1:(this.unplaced=new xe(e,n+1,Math.max(r,o.size+n>=e.size-r?n+1:0)),!0)}dropNode(){let{content:e,openStart:n,openEnd:r}=this.unplaced,o=Ng(e,n);if(o.childCount<=1&&n>0){let s=e.size-n<=n+o.size;this.unplaced=new xe(Wc(e,n-1,1),n-1,s?n-1:r)}else this.unplaced=new xe(Wc(e,n,1),n,r)}placeNodes({sliceDepth:e,frontierDepth:n,parent:r,inject:o,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let E=0;E<s.length;E++)this.openFrontierNode(s[E]);let l=this.unplaced,u=r?r.content:l.content,d=l.openStart-e,h=0,p=[],{match:g,type:y}=this.frontier[n];if(o){for(let E=0;E<o.childCount;E++)p.push(o.child(E));g=g.matchFragment(o)}let x=u.size+e-(l.content.size-l.openEnd);for(;h<u.childCount;){let E=u.child(h),k=g.matchType(E.type);if(!k)break;h++,(h>1||d==0||E.content.size)&&(g=k,p.push(X2(E.mark(y.allowedMarks(E.marks)),h==1?d:0,h==u.childCount?x:-1)))}let S=h==u.childCount;S||(x=-1),this.placed=Gc(this.placed,n,oe.from(p)),this.frontier[n].match=g,S&&x<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let E=0,k=u;E<x;E++){let w=k.lastChild;this.frontier.push({type:w.type,match:w.contentMatchAt(w.childCount)}),k=w.content}this.unplaced=S?e==0?xe.empty:new xe(Wc(l.content,e-1,1),e-1,x<0?l.openEnd:e-1):new xe(Wc(l.content,e,h),l.openStart,l.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],n;if(!e.type.isTextblock||!Dg(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,o=this.$to.after(r);for(;r>1&&o==this.$to.end(--r);)++o;return o}findCloseLevel(e){e:for(let n=Math.min(this.depth,e.depth);n>=0;n--){let{match:r,type:o}=this.frontier[n],s=n<e.depth&&e.end(n+1)==e.pos+(e.depth-(n+1)),l=Dg(e,n,o,r,s);if(l){for(let u=n-1;u>=0;u--){let{match:d,type:h}=this.frontier[u],p=Dg(e,u,h,d,!0);if(!p||p.childCount)continue e}return{depth:n,fit:l,move:s?e.doc.resolve(e.after(n+1)):e}}}}close(e){let n=this.findCloseLevel(e);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Gc(this.placed,n.depth,n.fit)),e=n.move;for(let r=n.depth+1;r<=e.depth;r++){let o=e.node(r),s=o.type.contentMatch.fillBefore(o.content,!0,e.index(r));this.openFrontierNode(o.type,o.attrs,s)}return e}openFrontierNode(e,n=null,r){let o=this.frontier[this.depth];o.match=o.match.matchType(e),this.placed=Gc(this.placed,this.depth,oe.from(e.create(n,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(oe.empty,!0);n.childCount&&(this.placed=Gc(this.placed,this.frontier.length,n))}}function Wc(t,e,n){return e==0?t.cutByIndex(n,t.childCount):t.replaceChild(0,t.firstChild.copy(Wc(t.firstChild.content,e-1,n)))}function Gc(t,e,n){return e==0?t.append(n):t.replaceChild(t.childCount-1,t.lastChild.copy(Gc(t.lastChild.content,e-1,n)))}function Ng(t,e){for(let n=0;n<e;n++)t=t.firstChild.content;return t}function X2(t,e,n){if(e<=0)return t;let r=t.content;return e>1&&(r=r.replaceChild(0,X2(r.firstChild,e-1,r.childCount==1?n-1:0))),e>0&&(r=t.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(t.type.contentMatch.matchFragment(r).fillBefore(oe.empty,!0)))),t.copy(r)}function Dg(t,e,n,r,o){let s=t.node(e),l=o?t.indexAfter(e):t.index(e);if(l==s.childCount&&!n.compatibleContent(s.type))return null;let u=r.fillBefore(s.content,!0,l);return u&&!dL(n,s.content,l)?u:null}function dL(t,e,n){for(let r=n;r<e.childCount;r++)if(!t.allowsMarks(e.child(r).marks))return!0;return!1}function fL(t){return t.spec.defining||t.spec.definingForContent}function hL(t,e,n,r){if(!r.size)return t.deleteRange(e,n);let o=t.doc.resolve(e),s=t.doc.resolve(n);if(Y2(o,s,r))return t.step(new Sn(e,n,r));let l=Q2(o,s);l[l.length-1]==0&&l.pop();let u=-(o.depth+1);l.unshift(u);for(let y=o.depth,x=o.pos-1;y>0;y--,x--){let S=o.node(y).type.spec;if(S.defining||S.definingAsContext||S.isolating)break;l.indexOf(y)>-1?u=y:o.before(y)==x&&l.splice(1,0,-y)}let d=l.indexOf(u),h=[],p=r.openStart;for(let y=r.content,x=0;;x++){let S=y.firstChild;if(h.push(S),x==r.openStart)break;y=S.content}for(let y=p-1;y>=0;y--){let x=h[y],S=fL(x.type);if(S&&!x.sameMarkup(o.node(Math.abs(u)-1)))p=y;else if(S||!x.type.isTextblock)break}for(let y=r.openStart;y>=0;y--){let x=(y+p+1)%(r.openStart+1),S=h[x];if(S)for(let E=0;E<l.length;E++){let k=l[(E+d)%l.length],w=!0;k<0&&(w=!1,k=-k);let C=o.node(k-1),_=o.index(k-1);if(C.canReplaceWith(_,_,S.type,S.marks))return t.replace(o.before(k),w?s.after(k):n,new xe(J2(r.content,0,r.openStart,x),x,r.openEnd))}}let g=t.steps.length;for(let y=l.length-1;y>=0&&(t.replace(e,n,r),!(t.steps.length>g));y--){let x=l[y];x<0||(e=o.before(x),n=s.after(x))}}function J2(t,e,n,r,o){if(e<n){let s=t.firstChild;t=t.replaceChild(0,s.copy(J2(s.content,e+1,n,r,s)))}if(e>r){let s=o.contentMatchAt(0),l=s.fillBefore(t).append(t);t=l.append(s.matchFragment(l).fillBefore(oe.empty,!0))}return t}function pL(t,e,n,r){if(!r.isInline&&e==n&&t.doc.resolve(e).parent.content.size){let o=cL(t.doc,e,r.type);o!=null&&(e=n=o)}t.replaceRange(e,n,new xe(oe.from(r),0,0))}function mL(t,e,n){let r=t.doc.resolve(e),o=t.doc.resolve(n),s=Q2(r,o);for(let l=0;l<s.length;l++){let u=s[l],d=l==s.length-1;if(d&&u==0||r.node(u).type.contentMatch.validEnd)return t.delete(r.start(u),o.end(u));if(u>0&&(d||r.node(u-1).canReplace(r.index(u-1),o.indexAfter(u-1))))return t.delete(r.before(u),o.after(u))}for(let l=1;l<=r.depth&&l<=o.depth;l++)if(e-r.start(l)==r.depth-l&&n>r.end(l)&&o.end(l)-n!=o.depth-l&&r.start(l-1)==o.start(l-1)&&r.node(l-1).canReplace(r.index(l-1),o.index(l-1)))return t.delete(r.before(l),n);t.delete(e,n)}function Q2(t,e){let n=[],r=Math.min(t.depth,e.depth);for(let o=r;o>=0;o--){let s=t.start(o);if(s<t.pos-(t.depth-o)||e.end(o)>e.pos+(e.depth-o)||t.node(o).type.spec.isolating||e.node(o).type.spec.isolating)break;(s==e.start(o)||o==t.depth&&o==e.depth&&t.parent.inlineContent&&e.parent.inlineContent&&o&&e.start(o-1)==s-1)&&n.push(o)}return n}class Sl extends Fn{constructor(e,n,r){super(),this.pos=e,this.attr=n,this.value=r}apply(e){let n=e.nodeAt(this.pos);if(!n)return fn.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let o=n.type.create(r,null,n.marks);return fn.fromReplace(e,this.pos,this.pos+1,new xe(oe.from(o),0,n.isLeaf?0:1))}getMap(){return Sr.empty}invert(e){return new Sl(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let n=e.mapResult(this.pos,1);return n.deletedAfter?null:new Sl(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Sl(n.pos,n.attr,n.value)}}Fn.jsonID("attr",Sl);class pu extends Fn{constructor(e,n){super(),this.attr=e,this.value=n}apply(e){let n=Object.create(null);for(let o in e.attrs)n[o]=e.attrs[o];n[this.attr]=this.value;let r=e.type.create(n,e.content,e.marks);return fn.ok(r)}getMap(){return Sr.empty}invert(e){return new pu(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new pu(n.attr,n.value)}}Fn.jsonID("docAttr",pu);let wl=class extends Error{};wl=function t(e){let n=Error.call(this,e);return n.__proto__=t.prototype,n};wl.prototype=Object.create(Error.prototype);wl.prototype.constructor=wl;wl.prototype.name="TransformError";class Z2{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new hu}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let n=this.maybeStep(e);if(n.failed)throw new wl(n.failed);return this}maybeStep(e){let n=e.apply(this.doc);return n.failed||this.addStep(e,n.doc),n}get docChanged(){return this.steps.length>0}changedRange(){let e=1e9,n=-1e9;for(let r=0;r<this.mapping.maps.length;r++){let o=this.mapping.maps[r];r&&(e=o.map(e,1),n=o.map(n,-1)),o.forEach((s,l,u,d)=>{e=Math.min(e,u),n=Math.max(n,d)})}return e==1e9?null:{from:e,to:n}}addStep(e,n){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=n}replace(e,n=e,r=xe.empty){let o=Fh(this.doc,e,n,r);return o&&this.step(o),this}replaceWith(e,n,r){return this.replace(e,n,new xe(oe.from(r),0,0))}delete(e,n){return this.replace(e,n,xe.empty)}insert(e,n){return this.replaceWith(e,e,n)}replaceRange(e,n,r){return hL(this,e,n,r),this}replaceRangeWith(e,n,r){return pL(this,e,n,r),this}deleteRange(e,n){return mL(this,e,n),this}lift(e,n){return Z5(this,e,n),this}join(e,n=1){return lL(this,e,n),this}wrap(e,n){return nL(this,e,n),this}setBlockType(e,n=e,r,o=null){return rL(this,e,n,r,o),this}setNodeMarkup(e,n,r=null,o){return oL(this,e,n,r,o),this}setNodeAttribute(e,n,r){return this.step(new Sl(e,n,r)),this}setDocAttribute(e,n){return this.step(new pu(e,n)),this}addNodeMark(e,n){return this.step(new is(e,n)),this}removeNodeMark(e,n){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(n instanceof Mt)n.isInSet(r.marks)&&this.step(new la(e,n));else{let o=r.marks,s,l=[];for(;s=n.isInSet(o);)l.push(new la(e,s)),o=s.removeFromSet(o);for(let u=l.length-1;u>=0;u--)this.step(l[u])}return this}split(e,n=1,r){return sL(this,e,n,r),this}addMark(e,n,r){return X5(this,e,n,r),this}removeMark(e,n,r){return J5(this,e,n,r),this}clearIncompatible(e,n,r){return j0(this,e,n,r),this}}const Lg=Object.create(null);class Je{constructor(e,n,r){this.$anchor=e,this.$head=n,this.ranges=r||[new gL(e.min(n),e.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let n=0;n<e.length;n++)if(e[n].$from.pos!=e[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,n=xe.empty){let r=n.content.lastChild,o=null;for(let u=0;u<n.openEnd;u++)o=r,r=r.lastChild;let s=e.steps.length,l=this.ranges;for(let u=0;u<l.length;u++){let{$from:d,$to:h}=l[u],p=e.mapping.slice(s);e.replaceRange(p.map(d.pos),p.map(h.pos),u?xe.empty:n),u==0&&zE(e,s,(r?r.isInline:o&&o.isTextblock)?-1:1)}}replaceWith(e,n){let r=e.steps.length,o=this.ranges;for(let s=0;s<o.length;s++){let{$from:l,$to:u}=o[s],d=e.mapping.slice(r),h=d.map(l.pos),p=d.map(u.pos);s?e.deleteRange(h,p):(e.replaceRangeWith(h,p,n),zE(e,r,n.isInline?-1:1))}}static findFrom(e,n,r=!1){let o=e.parent.inlineContent?new Ve(e):fl(e.node(0),e.parent,e.pos,e.index(),n,r);if(o)return o;for(let s=e.depth-1;s>=0;s--){let l=n<0?fl(e.node(0),e.node(s),e.before(s+1),e.index(s),n,r):fl(e.node(0),e.node(s),e.after(s+1),e.index(s)+1,n,r);if(l)return l}return null}static near(e,n=1){return this.findFrom(e,n)||this.findFrom(e,-n)||new Er(e.node(0))}static atStart(e){return fl(e,e,0,0,1)||new Er(e)}static atEnd(e){return fl(e,e,e.content.size,e.childCount,-1)||new Er(e)}static fromJSON(e,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=Lg[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(e,n)}static jsonID(e,n){if(e in Lg)throw new RangeError("Duplicate use of selection JSON ID "+e);return Lg[e]=n,n.prototype.jsonID=e,n}getBookmark(){return Ve.between(this.$anchor,this.$head).getBookmark()}}Je.prototype.visible=!0;class gL{constructor(e,n){this.$from=e,this.$to=n}}let DE=!1;function LE(t){!DE&&!t.parent.inlineContent&&(DE=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+t.parent.type.name+")"))}class Ve extends Je{constructor(e,n=e){LE(e),LE(n),super(e,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,n){let r=e.resolve(n.map(this.head));if(!r.parent.inlineContent)return Je.near(r);let o=e.resolve(n.map(this.anchor));return new Ve(o.parent.inlineContent?o:r,r)}replace(e,n=xe.empty){if(super.replace(e,n),n==xe.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof Ve&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new Wh(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Ve(e.resolve(n.anchor),e.resolve(n.head))}static create(e,n,r=n){let o=e.resolve(n);return new this(o,r==n?o:e.resolve(r))}static between(e,n,r){let o=e.pos-n.pos;if((!r||o)&&(r=o>=0?1:-1),!n.parent.inlineContent){let s=Je.findFrom(n,r,!0)||Je.findFrom(n,-r,!0);if(s)n=s.$head;else return Je.near(n,r)}return e.parent.inlineContent||(o==0?e=n:(e=(Je.findFrom(e,-r,!0)||Je.findFrom(e,r,!0)).$anchor,e.pos<n.pos!=o<0&&(e=n))),new Ve(e,n)}}Je.jsonID("text",Ve);class Wh{constructor(e,n){this.anchor=e,this.head=n}map(e){return new Wh(e.map(this.anchor),e.map(this.head))}resolve(e){return Ve.between(e.resolve(this.anchor),e.resolve(this.head))}}class Ie extends Je{constructor(e){let n=e.nodeAfter,r=e.node(0).resolve(e.pos+n.nodeSize);super(e,r),this.node=n}map(e,n){let{deleted:r,pos:o}=n.mapResult(this.anchor),s=e.resolve(o);return r?Je.near(s):new Ie(s)}content(){return new xe(oe.from(this.node),0,0)}eq(e){return e instanceof Ie&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new N0(this.anchor)}static fromJSON(e,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Ie(e.resolve(n.anchor))}static create(e,n){return new Ie(e.resolve(n))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}Ie.prototype.visible=!1;Je.jsonID("node",Ie);class N0{constructor(e){this.anchor=e}map(e){let{deleted:n,pos:r}=e.mapResult(this.anchor);return n?new Wh(r,r):new N0(r)}resolve(e){let n=e.resolve(this.anchor),r=n.nodeAfter;return r&&Ie.isSelectable(r)?new Ie(n):Je.near(n)}}class Er extends Je{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,n=xe.empty){if(n==xe.empty){e.delete(0,e.doc.content.size);let r=Je.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,n)}toJSON(){return{type:"all"}}static fromJSON(e){return new Er(e)}map(e){return new Er(e)}eq(e){return e instanceof Er}getBookmark(){return vL}}Je.jsonID("all",Er);const vL={map(){return this},resolve(t){return new Er(t)}};function fl(t,e,n,r,o,s=!1){if(e.inlineContent)return Ve.create(t,n);for(let l=r-(o>0?0:1);o>0?l<e.childCount:l>=0;l+=o){let u=e.child(l);if(u.isAtom){if(!s&&Ie.isSelectable(u))return Ie.create(t,n-(o<0?u.nodeSize:0))}else{let d=fl(t,u,n+o,o<0?u.childCount:0,o,s);if(d)return d}n+=u.nodeSize*o}return null}function zE(t,e,n){let r=t.steps.length-1;if(r<e)return;let o=t.steps[r];if(!(o instanceof Sn||o instanceof kn))return;let s=t.mapping.maps[r],l;s.forEach((u,d,h,p)=>{l==null&&(l=p)}),t.setSelection(Je.near(t.doc.resolve(l),n))}const IE=1,af=2,BE=4;class yL extends Z2{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|IE)&~af,this.storedMarks=null,this}get selectionSet(){return(this.updated&IE)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=af,this}ensureMarks(e){return Mt.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&af)>0}addStep(e,n){super.addStep(e,n),this.updated=this.updated&~af,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,n=!0){let r=this.selection;return n&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Mt.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,n,r){let o=this.doc.type.schema;if(n==null)return e?this.replaceSelectionWith(o.text(e),!0):this.deleteSelection();{if(r==null&&(r=n),!e)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let l=this.doc.resolve(n);s=r==n?l.marks():l.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,o.text(e,s)),!this.selection.empty&&this.selection.to==n+e.length&&this.setSelection(Je.near(this.selection.$to)),this}}setMeta(e,n){return this.meta[typeof e=="string"?e:e.key]=n,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=BE,this}get scrolledIntoView(){return(this.updated&BE)>0}}function PE(t,e){return!e||!t?t:t.bind(e)}class $c{constructor(e,n,r){this.name=e,this.init=PE(n.init,r),this.apply=PE(n.apply,r)}}const bL=[new $c("doc",{init(t){return t.doc||t.schema.topNodeType.createAndFill()},apply(t){return t.doc}}),new $c("selection",{init(t,e){return t.selection||Je.atStart(e.doc)},apply(t){return t.selection}}),new $c("storedMarks",{init(t){return t.storedMarks||null},apply(t,e,n,r){return r.selection.$cursor?t.storedMarks:null}}),new $c("scrollToSelection",{init(){return 0},apply(t,e){return t.scrolledIntoView?e+1:e}})];class zg{constructor(e,n){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=bL.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new $c(r.key,r.spec.state,r))})}}class vl{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let o=this.config.plugins[r];if(o.spec.filterTransaction&&!o.spec.filterTransaction.call(o,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let n=[e],r=this.applyInner(e),o=null;for(;;){let s=!1;for(let l=0;l<this.config.plugins.length;l++){let u=this.config.plugins[l];if(u.spec.appendTransaction){let d=o?o[l].n:0,h=o?o[l].state:this,p=d<n.length&&u.spec.appendTransaction.call(u,d?n.slice(d):n,h,r);if(p&&r.filterTransaction(p,l)){if(p.setMeta("appendedTransaction",e),!o){o=[];for(let g=0;g<this.config.plugins.length;g++)o.push(g<l?{state:r,n:n.length}:{state:this,n:0})}n.push(p),r=r.applyInner(p),s=!0}o&&(o[l]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new vl(this.config),r=this.config.fields;for(let o=0;o<r.length;o++){let s=r[o];n[s.name]=s.apply(e,this[s.name],this,n)}return n}get tr(){return new yL(this)}static create(e){let n=new zg(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new vl(n);for(let o=0;o<n.fields.length;o++)r[n.fields[o].name]=n.fields[o].init(e,r);return r}reconfigure(e){let n=new zg(this.schema,e.plugins),r=n.fields,o=new vl(n);for(let s=0;s<r.length;s++){let l=r[s].name;o[l]=this.hasOwnProperty(l)?this[l]:r[s].init(e,o)}return o}toJSON(e){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let o=e[r],s=o.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(o,this[o.key]))}return n}static fromJSON(e,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let o=new zg(e.schema,e.plugins),s=new vl(o);return o.fields.forEach(l=>{if(l.name=="doc")s.doc=ti.fromJSON(e.schema,n.doc);else if(l.name=="selection")s.selection=Je.fromJSON(s.doc,n.selection);else if(l.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let u in r){let d=r[u],h=d.spec.state;if(d.key==l.name&&h&&h.fromJSON&&Object.prototype.hasOwnProperty.call(n,u)){s[l.name]=h.fromJSON.call(d,e,n[u],s);return}}s[l.name]=l.init(e,s)}}),s}}function ew(t,e,n){for(let r in t){let o=t[r];o instanceof Function?o=o.bind(e):r=="handleDOMEvents"&&(o=ew(o,e,{})),n[r]=o}return n}class Kt{constructor(e){this.spec=e,this.props={},e.props&&ew(e.props,this,this.props),this.key=e.key?e.key.key:tw("plugin")}getState(e){return e[this.key]}}const Ig=Object.create(null);function tw(t){return t in Ig?t+"$"+ ++Ig[t]:(Ig[t]=0,t+"$")}class vn{constructor(e="key"){this.key=tw(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const D0=(t,e)=>t.selection.empty?!1:(e&&e(t.tr.deleteSelection().scrollIntoView()),!0);function nw(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("backward",t):n.parentOffset>0)?null:n}const rw=(t,e,n)=>{let r=nw(t,n);if(!r)return!1;let o=L0(r);if(!o){let l=r.blockRange(),u=l&&zl(l);return u==null?!1:(e&&e(t.tr.lift(l,u).scrollIntoView()),!0)}let s=o.nodeBefore;if(fw(t,o,e,-1))return!0;if(r.parent.content.size==0&&(Cl(s,"end")||Ie.isSelectable(s)))for(let l=r.depth;;l--){let u=Fh(t.doc,r.before(l),r.after(l),xe.empty);if(u&&u.slice.size<u.to-u.from){if(e){let d=t.tr.step(u);d.setSelection(Cl(s,"end")?Je.findFrom(d.doc.resolve(d.mapping.map(o.pos,-1)),-1):Ie.create(d.doc,o.pos-s.nodeSize)),e(d.scrollIntoView())}return!0}if(l==1||r.node(l-1).childCount>1)break}return s.isAtom&&o.depth==r.depth-1?(e&&e(t.tr.delete(o.pos-s.nodeSize,o.pos).scrollIntoView()),!0):!1},xL=(t,e,n)=>{let r=nw(t,n);if(!r)return!1;let o=L0(r);return o?iw(t,o,e):!1},SL=(t,e,n)=>{let r=sw(t,n);if(!r)return!1;let o=z0(r);return o?iw(t,o,e):!1};function iw(t,e,n){let r=e.nodeBefore,o=r,s=e.pos-1;for(;!o.isTextblock;s--){if(o.type.spec.isolating)return!1;let p=o.lastChild;if(!p)return!1;o=p}let l=e.nodeAfter,u=l,d=e.pos+1;for(;!u.isTextblock;d++){if(u.type.spec.isolating)return!1;let p=u.firstChild;if(!p)return!1;u=p}let h=Fh(t.doc,s,d,xe.empty);if(!h||h.from!=s||h instanceof Sn&&h.slice.size>=d-s)return!1;if(n){let p=t.tr.step(h);p.setSelection(Ve.create(p.doc,s)),n(p.scrollIntoView())}return!0}function Cl(t,e,n=!1){for(let r=t;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const ow=(t,e,n)=>{let{$head:r,empty:o}=t.selection,s=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",t):r.parentOffset>0)return!1;s=L0(r)}let l=s&&s.nodeBefore;return!l||!Ie.isSelectable(l)?!1:(e&&e(t.tr.setSelection(Ie.create(t.doc,s.pos-l.nodeSize)).scrollIntoView()),!0)};function L0(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){if(t.index(e)>0)return t.doc.resolve(t.before(e+1));if(t.node(e).type.spec.isolating)break}return null}function sw(t,e){let{$cursor:n}=t.selection;return!n||(e?!e.endOfTextblock("forward",t):n.parentOffset<n.parent.content.size)?null:n}const aw=(t,e,n)=>{let r=sw(t,n);if(!r)return!1;let o=z0(r);if(!o)return!1;let s=o.nodeAfter;if(fw(t,o,e,1))return!0;if(r.parent.content.size==0&&(Cl(s,"start")||Ie.isSelectable(s))){let l=Fh(t.doc,r.before(),r.after(),xe.empty);if(l&&l.slice.size<l.to-l.from){if(e){let u=t.tr.step(l);u.setSelection(Cl(s,"start")?Je.findFrom(u.doc.resolve(u.mapping.map(o.pos)),1):Ie.create(u.doc,u.mapping.map(o.pos))),e(u.scrollIntoView())}return!0}}return s.isAtom&&o.depth==r.depth-1?(e&&e(t.tr.delete(o.pos,o.pos+s.nodeSize).scrollIntoView()),!0):!1},lw=(t,e,n)=>{let{$head:r,empty:o}=t.selection,s=r;if(!o)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",t):r.parentOffset<r.parent.content.size)return!1;s=z0(r)}let l=s&&s.nodeAfter;return!l||!Ie.isSelectable(l)?!1:(e&&e(t.tr.setSelection(Ie.create(t.doc,s.pos)).scrollIntoView()),!0)};function z0(t){if(!t.parent.type.spec.isolating)for(let e=t.depth-1;e>=0;e--){let n=t.node(e);if(t.index(e)+1<n.childCount)return t.doc.resolve(t.after(e+1));if(n.type.spec.isolating)break}return null}const EL=(t,e)=>{let n=t.selection,r=n instanceof Ie,o;if(r){if(n.node.isTextblock||!ms(t.doc,n.from))return!1;o=n.from}else if(o=Vh(t.doc,n.from,-1),o==null)return!1;if(e){let s=t.tr.join(o);r&&s.setSelection(Ie.create(s.doc,o-t.doc.resolve(o).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0},kL=(t,e)=>{let n=t.selection,r;if(n instanceof Ie){if(n.node.isTextblock||!ms(t.doc,n.to))return!1;r=n.to}else if(r=Vh(t.doc,n.to,1),r==null)return!1;return e&&e(t.tr.join(r).scrollIntoView()),!0},TL=(t,e)=>{let{$from:n,$to:r}=t.selection,o=n.blockRange(r),s=o&&zl(o);return s==null?!1:(e&&e(t.tr.lift(o,s).scrollIntoView()),!0)},cw=(t,e)=>{let{$head:n,$anchor:r}=t.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(e&&e(t.tr.insertText(`
`).scrollIntoView()),!0)};function I0(t){for(let e=0;e<t.edgeCount;e++){let{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const wL=(t,e)=>{let{$head:n,$anchor:r}=t.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let o=n.node(-1),s=n.indexAfter(-1),l=I0(o.contentMatchAt(s));if(!l||!o.canReplaceWith(s,s,l))return!1;if(e){let u=n.after(),d=t.tr.replaceWith(u,u,l.createAndFill());d.setSelection(Je.near(d.doc.resolve(u),1)),e(d.scrollIntoView())}return!0},uw=(t,e)=>{let n=t.selection,{$from:r,$to:o}=n;if(n instanceof Er||r.parent.inlineContent||o.parent.inlineContent)return!1;let s=I0(o.parent.contentMatchAt(o.indexAfter()));if(!s||!s.isTextblock)return!1;if(e){let l=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,u=t.tr.insert(l,s.createAndFill());u.setSelection(Ve.create(u.doc,l+1)),e(u.scrollIntoView())}return!0},dw=(t,e)=>{let{$cursor:n}=t.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(no(t.doc,s))return e&&e(t.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),o=r&&zl(r);return o==null?!1:(e&&e(t.tr.lift(r,o).scrollIntoView()),!0)};function CL(t){return(e,n)=>{let{$from:r,$to:o}=e.selection;if(e.selection instanceof Ie&&e.selection.node.isBlock)return!r.parentOffset||!no(e.doc,r.pos)?!1:(n&&n(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let s=[],l,u,d=!1,h=!1;for(let x=r.depth;;x--)if(r.node(x).isBlock){d=r.end(x)==r.pos+(r.depth-x),h=r.start(x)==r.pos-(r.depth-x),u=I0(r.node(x-1).contentMatchAt(r.indexAfter(x-1))),s.unshift(d&&u?{type:u}:null),l=x;break}else{if(x==1)return!1;s.unshift(null)}let p=e.tr;(e.selection instanceof Ve||e.selection instanceof Er)&&p.deleteSelection();let g=p.mapping.map(r.pos),y=no(p.doc,g,s.length,s);if(y||(s[0]=u?{type:u}:null,y=no(p.doc,g,s.length,s)),!y)return!1;if(p.split(g,s.length,s),!d&&h&&r.node(l).type!=u){let x=p.mapping.map(r.before(l)),S=p.doc.resolve(x);u&&r.node(l-1).canReplaceWith(S.index(),S.index()+1,u)&&p.setNodeMarkup(p.mapping.map(r.before(l)),u)}return n&&n(p.scrollIntoView()),!0}}const AL=CL(),_L=(t,e)=>{let{$from:n,to:r}=t.selection,o,s=n.sharedDepth(r);return s==0?!1:(o=n.before(s),e&&e(t.tr.setSelection(Ie.create(t.doc,o))),!0)};function ML(t,e,n){let r=e.nodeBefore,o=e.nodeAfter,s=e.index();return!r||!o||!r.type.compatibleContent(o.type)?!1:!r.content.size&&e.parent.canReplace(s-1,s)?(n&&n(t.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(s,s+1)||!(o.isTextblock||ms(t.doc,e.pos))?!1:(n&&n(t.tr.join(e.pos).scrollIntoView()),!0)}function fw(t,e,n,r){let o=e.nodeBefore,s=e.nodeAfter,l,u,d=o.type.spec.isolating||s.type.spec.isolating;if(!d&&ML(t,e,n))return!0;let h=!d&&e.parent.canReplace(e.index(),e.index()+1);if(h&&(l=(u=o.contentMatchAt(o.childCount)).findWrapping(s.type))&&u.matchType(l[0]||s.type).validEnd){if(n){let x=e.pos+s.nodeSize,S=oe.empty;for(let w=l.length-1;w>=0;w--)S=oe.from(l[w].create(null,S));S=oe.from(o.copy(S));let E=t.tr.step(new kn(e.pos-1,x,e.pos,x,new xe(S,1,0),l.length,!0)),k=E.doc.resolve(x+2*l.length);k.nodeAfter&&k.nodeAfter.type==o.type&&ms(E.doc,k.pos)&&E.join(k.pos),n(E.scrollIntoView())}return!0}let p=s.type.spec.isolating||r>0&&d?null:Je.findFrom(e,1),g=p&&p.$from.blockRange(p.$to),y=g&&zl(g);if(y!=null&&y>=e.depth)return n&&n(t.tr.lift(g,y).scrollIntoView()),!0;if(h&&Cl(s,"start",!0)&&Cl(o,"end")){let x=o,S=[];for(;S.push(x),!x.isTextblock;)x=x.lastChild;let E=s,k=1;for(;!E.isTextblock;E=E.firstChild)k++;if(x.canReplace(x.childCount,x.childCount,E.content)){if(n){let w=oe.empty;for(let _=S.length-1;_>=0;_--)w=oe.from(S[_].copy(w));let C=t.tr.step(new kn(e.pos-S.length,e.pos+s.nodeSize,e.pos+k,e.pos+s.nodeSize-k,new xe(w,S.length,0),0,!0));n(C.scrollIntoView())}return!0}}return!1}function hw(t){return function(e,n){let r=e.selection,o=t<0?r.$from:r.$to,s=o.depth;for(;o.node(s).isInline;){if(!s)return!1;s--}return o.node(s).isTextblock?(n&&n(e.tr.setSelection(Ve.create(e.doc,t<0?o.start(s):o.end(s)))),!0):!1}}const OL=hw(-1),jL=hw(1);function RL(t,e=null){return function(n,r){let{$from:o,$to:s}=n.selection,l=o.blockRange(s),u=l&&R0(l,t,e);return u?(r&&r(n.tr.wrap(l,u).scrollIntoView()),!0):!1}}function UE(t,e=null){return function(n,r){let o=!1;for(let s=0;s<n.selection.ranges.length&&!o;s++){let{$from:{pos:l},$to:{pos:u}}=n.selection.ranges[s];n.doc.nodesBetween(l,u,(d,h)=>{if(o)return!1;if(!(!d.isTextblock||d.hasMarkup(t,e)))if(d.type==t)o=!0;else{let p=n.doc.resolve(h),g=p.index();o=p.parent.canReplaceWith(g,g+1,t)}})}if(!o)return!1;if(r){let s=n.tr;for(let l=0;l<n.selection.ranges.length;l++){let{$from:{pos:u},$to:{pos:d}}=n.selection.ranges[l];s.setBlockType(u,d,t,e)}r(s.scrollIntoView())}return!0}}function B0(...t){return function(e,n,r){for(let o=0;o<t.length;o++)if(t[o](e,n,r))return!0;return!1}}B0(D0,rw,ow);B0(D0,aw,lw);B0(cw,uw,dw,AL);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function NL(t,e=null){return function(n,r){let{$from:o,$to:s}=n.selection,l=o.blockRange(s);if(!l)return!1;let u=r?n.tr:null;return DL(u,l,t,e)?(r&&r(u.scrollIntoView()),!0):!1}}function DL(t,e,n,r=null){let o=!1,s=e,l=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(n)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let d=l.resolve(e.start-2);s=new Gf(d,d,e.depth),e.endIndex<e.parent.childCount&&(e=new Gf(e.$from,l.resolve(e.$to.end(e.depth)),e.depth)),o=!0}let u=R0(s,n,r,e);return u?(t&&LL(t,e,u,o,n),!0):!1}function LL(t,e,n,r,o){let s=oe.empty;for(let p=n.length-1;p>=0;p--)s=oe.from(n[p].type.create(n[p].attrs,s));t.step(new kn(e.start-(r?2:0),e.end,e.start,e.end,new xe(s,0,0),n.length,!0));let l=0;for(let p=0;p<n.length;p++)n[p].type==o&&(l=p+1);let u=n.length-l,d=e.start+n.length-(r?2:0),h=e.parent;for(let p=e.startIndex,g=e.endIndex,y=!0;p<g;p++,y=!1)!y&&no(t.doc,d,u)&&(t.split(d,u),d+=2*u),d+=h.child(p).nodeSize;return t}function zL(t){return function(e,n){let{$from:r,$to:o}=e.selection,s=r.blockRange(o,l=>l.childCount>0&&l.firstChild.type==t);return s?n?r.node(s.depth-1).type==t?IL(e,n,t,s):BL(e,n,s):!0:!1}}function IL(t,e,n,r){let o=t.tr,s=r.end,l=r.$to.end(r.depth);s<l&&(o.step(new kn(s-1,l,s,l,new xe(oe.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Gf(o.doc.resolve(r.$from.pos),o.doc.resolve(l),r.depth));const u=zl(r);if(u==null)return!1;o.lift(r,u);let d=o.doc.resolve(o.mapping.map(s,-1)-1);return ms(o.doc,d.pos)&&d.nodeBefore.type==d.nodeAfter.type&&o.join(d.pos),e(o.scrollIntoView()),!0}function BL(t,e,n){let r=t.tr,o=n.parent;for(let x=n.end,S=n.endIndex-1,E=n.startIndex;S>E;S--)x-=o.child(S).nodeSize,r.delete(x-1,x+1);let s=r.doc.resolve(n.start),l=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let u=n.startIndex==0,d=n.endIndex==o.childCount,h=s.node(-1),p=s.index(-1);if(!h.canReplace(p+(u?0:1),p+1,l.content.append(d?oe.empty:oe.from(o))))return!1;let g=s.pos,y=g+l.nodeSize;return r.step(new kn(g-(u?1:0),y+(d?1:0),g+1,y-1,new xe((u?oe.empty:oe.from(o.copy(oe.empty))).append(d?oe.empty:oe.from(o.copy(oe.empty))),u?0:1,d?0:1),u?0:1)),e(r.scrollIntoView()),!0}function PL(t){return function(e,n){let{$from:r,$to:o}=e.selection,s=r.blockRange(o,h=>h.childCount>0&&h.firstChild.type==t);if(!s)return!1;let l=s.startIndex;if(l==0)return!1;let u=s.parent,d=u.child(l-1);if(d.type!=t)return!1;if(n){let h=d.lastChild&&d.lastChild.type==u.type,p=oe.from(h?t.create():null),g=new xe(oe.from(t.create(null,oe.from(u.type.create(null,p)))),h?3:1,0),y=s.start,x=s.end;n(e.tr.step(new kn(y-(h?3:1),x,y,x,g,1,!0)).scrollIntoView())}return!0}}const Nn=function(t){for(var e=0;;e++)if(t=t.previousSibling,!t)return e},Al=function(t){let e=t.assignedSlot||t.parentNode;return e&&e.nodeType==11?e.host:e};let Dv=null;const Ji=function(t,e,n){let r=Dv||(Dv=document.createRange());return r.setEnd(t,n??t.nodeValue.length),r.setStart(t,e||0),r},UL=function(){Dv=null},ca=function(t,e,n,r){return n&&(HE(t,e,n,r,-1)||HE(t,e,n,r,1))},HL=/^(img|br|input|textarea|hr)$/i;function HE(t,e,n,r,o){for(var s;;){if(t==n&&e==r)return!0;if(e==(o<0?0:Pr(t))){let l=t.parentNode;if(!l||l.nodeType!=1||Cu(t)||HL.test(t.nodeName)||t.contentEditable=="false")return!1;e=Nn(t)+(o<0?0:1),t=l}else if(t.nodeType==1){let l=t.childNodes[e+(o<0?-1:0)];if(l.nodeType==1&&l.contentEditable=="false")if(!((s=l.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)e+=o;else return!1;else t=l,e=o<0?Pr(t):0}else return!1}}function Pr(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function qL(t,e){for(;;){if(t.nodeType==3&&e)return t;if(t.nodeType==1&&e>0){if(t.contentEditable=="false")return null;t=t.childNodes[e-1],e=Pr(t)}else if(t.parentNode&&!Cu(t))e=Nn(t),t=t.parentNode;else return null}}function VL(t,e){for(;;){if(t.nodeType==3&&e<t.nodeValue.length)return t;if(t.nodeType==1&&e<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[e],e=0}else if(t.parentNode&&!Cu(t))e=Nn(t)+1,t=t.parentNode;else return null}}function FL(t,e,n){for(let r=e==0,o=e==Pr(t);r||o;){if(t==n)return!0;let s=Nn(t);if(t=t.parentNode,!t)return!1;r=r&&s==0,o=o&&s==Pr(t)}}function Cu(t){let e;for(let n=t;n&&!(e=n.pmViewDesc);n=n.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==t||e.contentDOM==t)}const Gh=function(t){return t.focusNode&&ca(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset)};function $s(t,e){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function WL(t){let e=t.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function GL(t,e,n){if(t.caretPositionFromPoint)try{let r=t.caretPositionFromPoint(e,n);if(r)return{node:r.offsetNode,offset:Math.min(Pr(r.offsetNode),r.offset)}}catch{}if(t.caretRangeFromPoint){let r=t.caretRangeFromPoint(e,n);if(r)return{node:r.startContainer,offset:Math.min(Pr(r.startContainer),r.startOffset)}}}const Si=typeof navigator<"u"?navigator:null,qE=typeof document<"u"?document:null,gs=Si&&Si.userAgent||"",Lv=/Edge\/(\d+)/.exec(gs),pw=/MSIE \d/.exec(gs),zv=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(gs),dr=!!(pw||zv||Lv),us=pw?document.documentMode:zv?+zv[1]:Lv?+Lv[1]:0,Ur=!dr&&/gecko\/(\d+)/i.test(gs);Ur&&+(/Firefox\/(\d+)/.exec(gs)||[0,0])[1];const Iv=!dr&&/Chrome\/(\d+)/.exec(gs),En=!!Iv,mw=Iv?+Iv[1]:0,Ln=!dr&&!!Si&&/Apple Computer/.test(Si.vendor),_l=Ln&&(/Mobile\/\w+/.test(gs)||!!Si&&Si.maxTouchPoints>2),Br=_l||(Si?/Mac/.test(Si.platform):!1),gw=Si?/Win/.test(Si.platform):!1,eo=/Android \d/.test(gs),Au=!!qE&&"webkitFontSmoothing"in qE.documentElement.style,$L=Au?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function KL(t){let e=t.defaultView&&t.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:t.documentElement.clientWidth,top:0,bottom:t.documentElement.clientHeight}}function $i(t,e){return typeof t=="number"?t:t[e]}function YL(t){let e=t.getBoundingClientRect(),n=e.width/t.offsetWidth||1,r=e.height/t.offsetHeight||1;return{left:e.left,right:e.left+t.clientWidth*n,top:e.top,bottom:e.top+t.clientHeight*r}}function VE(t,e,n){let r=t.someProp("scrollThreshold")||0,o=t.someProp("scrollMargin")||5,s=t.dom.ownerDocument;for(let l=n||t.dom;l;){if(l.nodeType!=1){l=Al(l);continue}let u=l,d=u==s.body,h=d?KL(s):YL(u),p=0,g=0;if(e.top<h.top+$i(r,"top")?g=-(h.top-e.top+$i(o,"top")):e.bottom>h.bottom-$i(r,"bottom")&&(g=e.bottom-e.top>h.bottom-h.top?e.top+$i(o,"top")-h.top:e.bottom-h.bottom+$i(o,"bottom")),e.left<h.left+$i(r,"left")?p=-(h.left-e.left+$i(o,"left")):e.right>h.right-$i(r,"right")&&(p=e.right-h.right+$i(o,"right")),p||g)if(d)s.defaultView.scrollBy(p,g);else{let x=u.scrollLeft,S=u.scrollTop;g&&(u.scrollTop+=g),p&&(u.scrollLeft+=p);let E=u.scrollLeft-x,k=u.scrollTop-S;e={left:e.left-E,top:e.top-k,right:e.right-E,bottom:e.bottom-k}}let y=d?"fixed":getComputedStyle(l).position;if(/^(fixed|sticky)$/.test(y))break;l=y=="absolute"?l.offsetParent:Al(l)}}function XL(t){let e=t.dom.getBoundingClientRect(),n=Math.max(0,e.top),r,o;for(let s=(e.left+e.right)/2,l=n+1;l<Math.min(innerHeight,e.bottom);l+=5){let u=t.root.elementFromPoint(s,l);if(!u||u==t.dom||!t.dom.contains(u))continue;let d=u.getBoundingClientRect();if(d.top>=n-20){r=u,o=d.top;break}}return{refDOM:r,refTop:o,stack:vw(t.dom)}}function vw(t){let e=[],n=t.ownerDocument;for(let r=t;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),t!=n);r=Al(r));return e}function JL({refDOM:t,refTop:e,stack:n}){let r=t?t.getBoundingClientRect().top:0;yw(n,r==0?0:r-e)}function yw(t,e){for(let n=0;n<t.length;n++){let{dom:r,top:o,left:s}=t[n];r.scrollTop!=o+e&&(r.scrollTop=o+e),r.scrollLeft!=s&&(r.scrollLeft=s)}}let ll=null;function QL(t){if(t.setActive)return t.setActive();if(ll)return t.focus(ll);let e=vw(t);t.focus(ll==null?{get preventScroll(){return ll={preventScroll:!0},!0}}:void 0),ll||(ll=!1,yw(e,0))}function bw(t,e){let n,r=2e8,o,s=0,l=e.top,u=e.top,d,h;for(let p=t.firstChild,g=0;p;p=p.nextSibling,g++){let y;if(p.nodeType==1)y=p.getClientRects();else if(p.nodeType==3)y=Ji(p).getClientRects();else continue;for(let x=0;x<y.length;x++){let S=y[x];if(S.top<=l&&S.bottom>=u){l=Math.max(S.bottom,l),u=Math.min(S.top,u);let E=S.left>e.left?S.left-e.left:S.right<e.left?e.left-S.right:0;if(E<r){n=p,r=E,o=E&&n.nodeType==3?{left:S.right<e.left?S.right:S.left,top:e.top}:e,p.nodeType==1&&E&&(s=g+(e.left>=(S.left+S.right)/2?1:0));continue}}else S.top>e.top&&!d&&S.left<=e.left&&S.right>=e.left&&(d=p,h={left:Math.max(S.left,Math.min(S.right,e.left)),top:S.top});!n&&(e.left>=S.right&&e.top>=S.top||e.left>=S.left&&e.top>=S.bottom)&&(s=g+1)}}return!n&&d&&(n=d,o=h,r=0),n&&n.nodeType==3?ZL(n,o):!n||r&&n.nodeType==1?{node:t,offset:s}:bw(n,o)}function ZL(t,e){let n=t.nodeValue.length,r=document.createRange(),o;for(let s=0;s<n;s++){r.setEnd(t,s+1),r.setStart(t,s);let l=Fo(r,1);if(l.top!=l.bottom&&P0(e,l)){o={node:t,offset:s+(e.left>=(l.left+l.right)/2?1:0)};break}}return r.detach(),o||{node:t,offset:0}}function P0(t,e){return t.left>=e.left-1&&t.left<=e.right+1&&t.top>=e.top-1&&t.top<=e.bottom+1}function ez(t,e){let n=t.parentNode;return n&&/^li$/i.test(n.nodeName)&&e.left<t.getBoundingClientRect().left?n:t}function tz(t,e,n){let{node:r,offset:o}=bw(e,n),s=-1;if(r.nodeType==1&&!r.firstChild){let l=r.getBoundingClientRect();s=l.left!=l.right&&n.left>(l.left+l.right)/2?1:-1}return t.docView.posFromDOM(r,o,s)}function nz(t,e,n,r){let o=-1;for(let s=e,l=!1;s!=t.dom;){let u=t.docView.nearestDesc(s,!0),d;if(!u)return null;if(u.dom.nodeType==1&&(u.node.isBlock&&u.parent||!u.contentDOM)&&((d=u.dom.getBoundingClientRect()).width||d.height)&&(u.node.isBlock&&u.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(u.dom.nodeName)&&(!l&&d.left>r.left||d.top>r.top?o=u.posBefore:(!l&&d.right<r.left||d.bottom<r.top)&&(o=u.posAfter),l=!0),!u.contentDOM&&o<0&&!u.node.isText))return(u.node.isBlock?r.top<(d.top+d.bottom)/2:r.left<(d.left+d.right)/2)?u.posBefore:u.posAfter;s=u.dom.parentNode}return o>-1?o:t.docView.posFromDOM(e,n,-1)}function xw(t,e,n){let r=t.childNodes.length;if(r&&n.top<n.bottom)for(let o=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-n.top)/(n.bottom-n.top))-2)),s=o;;){let l=t.childNodes[s];if(l.nodeType==1){let u=l.getClientRects();for(let d=0;d<u.length;d++){let h=u[d];if(P0(e,h))return xw(l,e,h)}}if((s=(s+1)%r)==o)break}return t}function rz(t,e){let n=t.dom.ownerDocument,r,o=0,s=GL(n,e.left,e.top);s&&({node:r,offset:o}=s);let l=(t.root.elementFromPoint?t.root:n).elementFromPoint(e.left,e.top),u;if(!l||!t.dom.contains(l.nodeType!=1?l.parentNode:l)){let h=t.dom.getBoundingClientRect();if(!P0(e,h)||(l=xw(t.dom,e,h),!l))return null}if(Ln)for(let h=l;r&&h;h=Al(h))h.draggable&&(r=void 0);if(l=ez(l,e),r){if(Ur&&r.nodeType==1&&(o=Math.min(o,r.childNodes.length),o<r.childNodes.length)){let p=r.childNodes[o],g;p.nodeName=="IMG"&&(g=p.getBoundingClientRect()).right<=e.left&&g.bottom>e.top&&o++}let h;Au&&o&&r.nodeType==1&&(h=r.childNodes[o-1]).nodeType==1&&h.contentEditable=="false"&&h.getBoundingClientRect().top>=e.top&&o--,r==t.dom&&o==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?u=t.state.doc.content.size:(o==0||r.nodeType!=1||r.childNodes[o-1].nodeName!="BR")&&(u=nz(t,r,o,e))}u==null&&(u=tz(t,l,e));let d=t.docView.nearestDesc(l,!0);return{pos:u,inside:d?d.posAtStart-d.border:-1}}function FE(t){return t.top<t.bottom||t.left<t.right}function Fo(t,e){let n=t.getClientRects();if(n.length){let r=n[e<0?0:n.length-1];if(FE(r))return r}return Array.prototype.find.call(n,FE)||t.getBoundingClientRect()}const iz=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function Sw(t,e,n){let{node:r,offset:o,atom:s}=t.docView.domFromPos(e,n<0?-1:1),l=Au||Ur;if(r.nodeType==3)if(l&&(iz.test(r.nodeValue)||(n<0?!o:o==r.nodeValue.length))){let d=Fo(Ji(r,o,o),n);if(Ur&&o&&/\s/.test(r.nodeValue[o-1])&&o<r.nodeValue.length){let h=Fo(Ji(r,o-1,o-1),-1);if(h.top==d.top){let p=Fo(Ji(r,o,o+1),-1);if(p.top!=d.top)return Bc(p,p.left<h.left)}}return d}else{let d=o,h=o,p=n<0?1:-1;return n<0&&!o?(h++,p=-1):n>=0&&o==r.nodeValue.length?(d--,p=1):n<0?d--:h++,Bc(Fo(Ji(r,d,h),p),p<0)}if(!t.state.doc.resolve(e-(s||0)).parent.inlineContent){if(s==null&&o&&(n<0||o==Pr(r))){let d=r.childNodes[o-1];if(d.nodeType==1)return Bg(d.getBoundingClientRect(),!1)}if(s==null&&o<Pr(r)){let d=r.childNodes[o];if(d.nodeType==1)return Bg(d.getBoundingClientRect(),!0)}return Bg(r.getBoundingClientRect(),n>=0)}if(s==null&&o&&(n<0||o==Pr(r))){let d=r.childNodes[o-1],h=d.nodeType==3?Ji(d,Pr(d)-(l?0:1)):d.nodeType==1&&(d.nodeName!="BR"||!d.nextSibling)?d:null;if(h)return Bc(Fo(h,1),!1)}if(s==null&&o<Pr(r)){let d=r.childNodes[o];for(;d.pmViewDesc&&d.pmViewDesc.ignoreForCoords;)d=d.nextSibling;let h=d?d.nodeType==3?Ji(d,0,l?0:1):d.nodeType==1?d:null:null;if(h)return Bc(Fo(h,-1),!0)}return Bc(Fo(r.nodeType==3?Ji(r):r,-n),n>=0)}function Bc(t,e){if(t.width==0)return t;let n=e?t.left:t.right;return{top:t.top,bottom:t.bottom,left:n,right:n}}function Bg(t,e){if(t.height==0)return t;let n=e?t.top:t.bottom;return{top:n,bottom:n,left:t.left,right:t.right}}function Ew(t,e,n){let r=t.state,o=t.root.activeElement;r!=e&&t.updateState(e),o!=t.dom&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),o!=t.dom&&o&&o.focus()}}function oz(t,e,n){let r=e.selection,o=n=="up"?r.$from:r.$to;return Ew(t,e,()=>{let{node:s}=t.docView.domFromPos(o.pos,n=="up"?-1:1);for(;;){let u=t.docView.nearestDesc(s,!0);if(!u)break;if(u.node.isBlock){s=u.contentDOM||u.dom;break}s=u.dom.parentNode}let l=Sw(t,o.pos,1);for(let u=s.firstChild;u;u=u.nextSibling){let d;if(u.nodeType==1)d=u.getClientRects();else if(u.nodeType==3)d=Ji(u,0,u.nodeValue.length).getClientRects();else continue;for(let h=0;h<d.length;h++){let p=d[h];if(p.bottom>p.top+1&&(n=="up"?l.top-p.top>(p.bottom-l.top)*2:p.bottom-l.bottom>(l.bottom-p.top)*2))return!1}}return!0})}const sz=/[\u0590-\u08ac]/;function az(t,e,n){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let o=r.parentOffset,s=!o,l=o==r.parent.content.size,u=t.domSelection();return u?!sz.test(r.parent.textContent)||!u.modify?n=="left"||n=="backward"?s:l:Ew(t,e,()=>{let{focusNode:d,focusOffset:h,anchorNode:p,anchorOffset:g}=t.domSelectionRange(),y=u.caretBidiLevel;u.modify("move",n,"character");let x=r.depth?t.docView.domAfterPos(r.before()):t.dom,{focusNode:S,focusOffset:E}=t.domSelectionRange(),k=S&&!x.contains(S.nodeType==1?S:S.parentNode)||d==S&&h==E;try{u.collapse(p,g),d&&(d!=p||h!=g)&&u.extend&&u.extend(d,h)}catch{}return y!=null&&(u.caretBidiLevel=y),k}):r.pos==r.start()||r.pos==r.end()}let WE=null,GE=null,$E=!1;function lz(t,e,n){return WE==e&&GE==n?$E:(WE=e,GE=n,$E=n=="up"||n=="down"?oz(t,e,n):az(t,e,n))}const Hr=0,KE=1,Ys=2,Ei=3;class _u{constructor(e,n,r,o){this.parent=e,this.children=n,this.dom=r,this.contentDOM=o,this.dirty=Hr,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,n,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let n=0;n<this.children.length;n++)e+=this.children[n].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let n=0,r=this.posAtStart;;n++){let o=this.children[n];if(o==e)return r;r+=o.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,n,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let s,l;if(e==this.contentDOM)s=e.childNodes[n-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.previousSibling}for(;s&&!((l=s.pmViewDesc)&&l.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(l)+l.size:this.posAtStart}else{let s,l;if(e==this.contentDOM)s=e.childNodes[n];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;s=e.nextSibling}for(;s&&!((l=s.pmViewDesc)&&l.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(l):this.posAtEnd}let o;if(e==this.dom&&this.contentDOM)o=n>Nn(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))o=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=e;;s=s.parentNode){if(s==this.dom){o=!1;break}if(s.previousSibling)break}if(o==null&&n==e.childNodes.length)for(let s=e;;s=s.parentNode){if(s==this.dom){o=!0;break}if(s.nextSibling)break}}return o??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,n=!1){for(let r=!0,o=e;o;o=o.parentNode){let s=this.getDesc(o),l;if(s&&(!n||s.node))if(r&&(l=s.nodeDOM)&&!(l.nodeType==1?l.contains(e.nodeType==1?e:e.parentNode):l==e))r=!1;else return s}}getDesc(e){let n=e.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(e,n,r){for(let o=e;o;o=o.parentNode){let s=this.getDesc(o);if(s)return s.localPosFromDOM(e,n,r)}return-1}descAt(e){for(let n=0,r=0;n<this.children.length;n++){let o=this.children[n],s=r+o.size;if(r==e&&s!=r){for(;!o.border&&o.children.length;)for(let l=0;l<o.children.length;l++){let u=o.children[l];if(u.size){o=u;break}}return o}if(e<s)return o.descAt(e-r-o.border);r=s}}domFromPos(e,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,o=0;for(let s=0;r<this.children.length;r++){let l=this.children[r],u=s+l.size;if(u>e||l instanceof Tw){o=e-s;break}s=u}if(o)return this.children[r].domFromPos(o-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof kw&&s.side>=0;r--);if(n<=0){let s,l=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,l=!1);return s&&n&&l&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?Nn(s.dom)+1:0}}else{let s,l=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,l=!1);return s&&l&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?Nn(s.dom):this.contentDOM.childNodes.length}}}parseRange(e,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let o=-1,s=-1;for(let l=r,u=0;;u++){let d=this.children[u],h=l+d.size;if(o==-1&&e<=h){let p=l+d.border;if(e>=p&&n<=h-d.border&&d.node&&d.contentDOM&&this.contentDOM.contains(d.contentDOM))return d.parseRange(e,n,p);e=l;for(let g=u;g>0;g--){let y=this.children[g-1];if(y.size&&y.dom.parentNode==this.contentDOM&&!y.emptyChildAt(1)){o=Nn(y.dom)+1;break}e-=y.size}o==-1&&(o=0)}if(o>-1&&(h>n||u==this.children.length-1)){n=h;for(let p=u+1;p<this.children.length;p++){let g=this.children[p];if(g.size&&g.dom.parentNode==this.contentDOM&&!g.emptyChildAt(-1)){s=Nn(g.dom);break}n+=g.size}s==-1&&(s=this.contentDOM.childNodes.length);break}l=h}return{node:this.contentDOM,from:e,to:n,fromOffset:o,toOffset:s}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[e<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(e)}domAfterPos(e){let{node:n,offset:r}=this.domFromPos(e,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+e);return n.childNodes[r]}setSelection(e,n,r,o=!1){let s=Math.min(e,n),l=Math.max(e,n);for(let x=0,S=0;x<this.children.length;x++){let E=this.children[x],k=S+E.size;if(s>S&&l<k)return E.setSelection(e-S-E.border,n-S-E.border,r,o);S=k}let u=this.domFromPos(e,e?-1:1),d=n==e?u:this.domFromPos(n,n?-1:1),h=r.root.getSelection(),p=r.domSelectionRange(),g=!1;if((Ur||Ln)&&e==n){let{node:x,offset:S}=u;if(x.nodeType==3){if(g=!!(S&&x.nodeValue[S-1]==`
`),g&&S==x.nodeValue.length)for(let E=x,k;E;E=E.parentNode){if(k=E.nextSibling){k.nodeName=="BR"&&(u=d={node:k.parentNode,offset:Nn(k)+1});break}let w=E.pmViewDesc;if(w&&w.node&&w.node.isBlock)break}}else{let E=x.childNodes[S-1];g=E&&(E.nodeName=="BR"||E.contentEditable=="false")}}if(Ur&&p.focusNode&&p.focusNode!=d.node&&p.focusNode.nodeType==1){let x=p.focusNode.childNodes[p.focusOffset];x&&x.contentEditable=="false"&&(o=!0)}if(!(o||g&&Ln)&&ca(u.node,u.offset,p.anchorNode,p.anchorOffset)&&ca(d.node,d.offset,p.focusNode,p.focusOffset))return;let y=!1;if((h.extend||e==n)&&!(g&&Ur)){h.collapse(u.node,u.offset);try{e!=n&&h.extend(d.node,d.offset),y=!0}catch{}}if(!y){if(e>n){let S=u;u=d,d=S}let x=document.createRange();x.setEnd(d.node,d.offset),x.setStart(u.node,u.offset),h.removeAllRanges(),h.addRange(x)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,n){for(let r=0,o=0;o<this.children.length;o++){let s=this.children[o],l=r+s.size;if(r==l?e<=l&&n>=r:e<l&&n>r){let u=r+s.border,d=l-s.border;if(e>=u&&n<=d){this.dirty=e==r||n==l?Ys:KE,e==u&&n==d&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=Ei:s.markDirty(e-u,n-u);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Ys:Ei}r=l}this.dirty=Ys}markParentsDirty(){let e=1;for(let n=this.parent;n;n=n.parent,e++){let r=e==1?Ys:KE;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class kw extends _u{constructor(e,n,r,o){let s,l=n.type.toDOM;if(typeof l=="function"&&(l=l(r,()=>{if(!s)return o;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(l.nodeType!=1){let u=document.createElement("span");u.appendChild(l),l=u}l.contentEditable="false",l.classList.add("ProseMirror-widget")}super(e,[],l,null),this.widget=n,this.widget=n,s=this}matchesWidget(e){return this.dirty==Hr&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let n=this.widget.spec.stopEvent;return n?n(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class cz extends _u{constructor(e,n,r,o){super(e,[],n,null),this.textDOM=r,this.text=o}get size(){return this.text.length}localPosFromDOM(e,n){return e!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class ua extends _u{constructor(e,n,r,o,s){super(e,[],r,o),this.mark=n,this.spec=s}static create(e,n,r,o){let s=o.nodeViews[n.type.name],l=s&&s(n,o,r);return(!l||!l.dom)&&(l=ga.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new ua(e,n,l.dom,l.contentDOM||l.dom,l)}parseRule(){return this.dirty&Ei||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=Ei&&this.mark.eq(e)}markDirty(e,n){if(super.markDirty(e,n),this.dirty!=Hr){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Hr}}slice(e,n,r){let o=ua.create(this.parent,this.mark,!0,r),s=this.children,l=this.size;n<l&&(s=Pv(s,n,l,r)),e>0&&(s=Pv(s,0,e,r));for(let u=0;u<s.length;u++)s[u].parent=o;return o.children=s,o}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class ds extends _u{constructor(e,n,r,o,s,l,u,d,h){super(e,[],s,l),this.node=n,this.outerDeco=r,this.innerDeco=o,this.nodeDOM=u}static create(e,n,r,o,s,l){let u=s.nodeViews[n.type.name],d,h=u&&u(n,s,()=>{if(!d)return l;if(d.parent)return d.parent.posBeforeChild(d)},r,o),p=h&&h.dom,g=h&&h.contentDOM;if(n.isText){if(!p)p=document.createTextNode(n.text);else if(p.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else p||({dom:p,contentDOM:g}=ga.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!g&&!n.isText&&p.nodeName!="BR"&&(p.hasAttribute("contenteditable")||(p.contentEditable="false"),n.type.spec.draggable&&(p.draggable=!0));let y=p;return p=Aw(p,r,n),h?d=new uz(e,n,r,o,p,g||null,y,h,s,l+1):n.isText?new $h(e,n,r,o,p,y,s):new ds(e,n,r,o,p,g||null,y,s,l+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>oe.empty)}return e}matchesNode(e,n,r){return this.dirty==Hr&&e.eq(this.node)&&Kf(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,n){let r=this.node.inlineContent,o=n,s=e.composing?this.localCompositionInfo(e,n):null,l=s&&s.pos>-1?s:null,u=s&&s.pos<0,d=new fz(this,l&&l.node,e);mz(this.node,this.innerDeco,(h,p,g)=>{h.spec.marks?d.syncToMarks(h.spec.marks,r,e,p):h.type.side>=0&&!g&&d.syncToMarks(p==this.node.childCount?Mt.none:this.node.child(p).marks,r,e,p),d.placeWidget(h,e,o)},(h,p,g,y)=>{d.syncToMarks(h.marks,r,e,y);let x;d.findNodeMatch(h,p,g,y)||u&&e.state.selection.from>o&&e.state.selection.to<o+h.nodeSize&&(x=d.findIndexWithChild(s.node))>-1&&d.updateNodeAt(h,p,g,x,e)||d.updateNextNode(h,p,g,e,y,o)||d.addNode(h,p,g,e,o),o+=h.nodeSize}),d.syncToMarks([],r,e,0),this.node.isTextblock&&d.addTextblockHacks(),d.destroyRest(),(d.changed||this.dirty==Ys)&&(l&&this.protectLocalComposition(e,l),ww(this.contentDOM,this.children,e),_l&&gz(this.dom))}localCompositionInfo(e,n){let{from:r,to:o}=e.state.selection;if(!(e.state.selection instanceof Ve)||r<n||o>n+this.node.content.size)return null;let s=e.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let l=s.nodeValue,u=vz(this.node.content,l,r-n,o-n);return u<0?null:{node:s,pos:u,text:l}}else return{node:s,pos:-1,text:""}}protectLocalComposition(e,{node:n,pos:r,text:o}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let l=new cz(this,s,n,o);e.input.compositionNodes.push(l),this.children=Pv(this.children,r,r+o.length,e,l)}update(e,n,r,o){return this.dirty==Ei||!e.sameMarkup(this.node)?!1:(this.updateInner(e,n,r,o),!0)}updateInner(e,n,r,o){this.updateOuterDeco(n),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(o,this.posAtStart),this.dirty=Hr}updateOuterDeco(e){if(Kf(e,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=Cw(this.dom,this.nodeDOM,Bv(this.outerDeco,this.node,n),Bv(e,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function YE(t,e,n,r,o){Aw(r,e,t);let s=new ds(void 0,t,e,n,r,r,r,o,0);return s.contentDOM&&s.updateChildren(o,0),s}class $h extends ds{constructor(e,n,r,o,s,l,u){super(e,n,r,o,s,null,l,u,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,n,r,o){return this.dirty==Ei||this.dirty!=Hr&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Hr||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,o.trackWrites==this.nodeDOM&&(o.trackWrites=null)),this.node=e,this.dirty=Hr,!0)}inParent(){let e=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,n,r){return e==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(e,n,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,n,r){let o=this.node.cut(e,n),s=document.createTextNode(o.text);return new $h(this.parent,o,this.outerDeco,this.innerDeco,s,s,r)}markDirty(e,n){super.markDirty(e,n),this.dom!=this.nodeDOM&&(e==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=Ei)}get domAtom(){return!1}isText(e){return this.node.text==e}}class Tw extends _u{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==Hr&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class uz extends ds{constructor(e,n,r,o,s,l,u,d,h,p){super(e,n,r,o,s,l,u,h,p),this.spec=d}update(e,n,r,o){if(this.dirty==Ei)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let s=this.spec.update(e,n,r);return s&&this.updateInner(e,n,r,o),s}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,n,r,o)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,n,r,o){this.spec.setSelection?this.spec.setSelection(e,n,r.root):super.setSelection(e,n,r,o)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function ww(t,e,n){let r=t.firstChild,o=!1;for(let s=0;s<e.length;s++){let l=e[s],u=l.dom;if(u.parentNode==t){for(;u!=r;)r=XE(r),o=!0;r=r.nextSibling}else o=!0,t.insertBefore(u,r);if(l instanceof ua){let d=r?r.previousSibling:t.lastChild;ww(l.contentDOM,l.children,n),r=d?d.nextSibling:t.firstChild}}for(;r;)r=XE(r),o=!0;o&&n.trackWrites==t&&(n.trackWrites=null)}const tu=function(t){t&&(this.nodeName=t)};tu.prototype=Object.create(null);const Xs=[new tu];function Bv(t,e,n){if(t.length==0)return Xs;let r=n?Xs[0]:new tu,o=[r];for(let s=0;s<t.length;s++){let l=t[s].type.attrs;if(l){l.nodeName&&o.push(r=new tu(l.nodeName));for(let u in l){let d=l[u];d!=null&&(n&&o.length==1&&o.push(r=new tu(e.isInline?"span":"div")),u=="class"?r.class=(r.class?r.class+" ":"")+d:u=="style"?r.style=(r.style?r.style+";":"")+d:u!="nodeName"&&(r[u]=d))}}}return o}function Cw(t,e,n,r){if(n==Xs&&r==Xs)return e;let o=e;for(let s=0;s<r.length;s++){let l=r[s],u=n[s];if(s){let d;u&&u.nodeName==l.nodeName&&o!=t&&(d=o.parentNode)&&d.nodeName.toLowerCase()==l.nodeName||(d=document.createElement(l.nodeName),d.pmIsDeco=!0,d.appendChild(o),u=Xs[0]),o=d}dz(o,u||Xs[0],l)}return o}function dz(t,e,n){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&t.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=e[r]&&t.setAttribute(r,n[r]);if(e.class!=n.class){let r=e.class?e.class.split(" ").filter(Boolean):[],o=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)o.indexOf(r[s])==-1&&t.classList.remove(r[s]);for(let s=0;s<o.length;s++)r.indexOf(o[s])==-1&&t.classList.add(o[s]);t.classList.length==0&&t.removeAttribute("class")}if(e.style!=n.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,o;for(;o=r.exec(e.style);)t.style.removeProperty(o[1])}n.style&&(t.style.cssText+=n.style)}}function Aw(t,e,n){return Cw(t,t,Xs,Bv(e,n,t.nodeType!=1))}function Kf(t,e){if(t.length!=e.length)return!1;for(let n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function XE(t){let e=t.nextSibling;return t.parentNode.removeChild(t),e}class fz{constructor(e,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=hz(e.node.content,e)}destroyBetween(e,n){if(e!=n){for(let r=e;r<n;r++)this.top.children[r].destroy();this.top.children.splice(e,n-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,n,r,o){let s=0,l=this.stack.length>>1,u=Math.min(l,e.length);for(;s<u&&(s==l-1?this.top:this.stack[s+1<<1]).matchesMark(e[s])&&e[s].type.spec.spanning!==!1;)s++;for(;s<l;)this.destroyRest(),this.top.dirty=Hr,this.index=this.stack.pop(),this.top=this.stack.pop(),l--;for(;l<e.length;){this.stack.push(this.top,this.index+1);let d=-1,h=this.top.children.length;o<this.preMatch.index&&(h=Math.min(this.index+3,h));for(let p=this.index;p<h;p++){let g=this.top.children[p];if(g.matchesMark(e[l])&&!this.isLocked(g.dom)){d=p;break}}if(d>-1)d>this.index&&(this.changed=!0,this.destroyBetween(this.index,d)),this.top=this.top.children[this.index];else{let p=ua.create(this.top,e[l],n,r);this.top.children.splice(this.index,0,p),this.top=p,this.changed=!0}this.index=0,l++}}findNodeMatch(e,n,r,o){let s=-1,l;if(o>=this.preMatch.index&&(l=this.preMatch.matches[o-this.preMatch.index]).parent==this.top&&l.matchesNode(e,n,r))s=this.top.children.indexOf(l,this.index);else for(let u=this.index,d=Math.min(this.top.children.length,u+5);u<d;u++){let h=this.top.children[u];if(h.matchesNode(e,n,r)&&!this.preMatch.matched.has(h)){s=u;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(e,n,r,o,s){let l=this.top.children[o];return l.dirty==Ei&&l.dom==l.contentDOM&&(l.dirty=Ys),l.update(e,n,r,s)?(this.destroyBetween(this.index,o),this.index++,!0):!1}findIndexWithChild(e){for(;;){let n=e.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let o=this.index;o<this.top.children.length;o++)if(this.top.children[o]==r)return o}return-1}e=n}}updateNextNode(e,n,r,o,s,l){for(let u=this.index;u<this.top.children.length;u++){let d=this.top.children[u];if(d instanceof ds){let h=this.preMatch.matched.get(d);if(h!=null&&h!=s)return!1;let p=d.dom,g,y=this.isLocked(p)&&!(e.isText&&d.node&&d.node.isText&&d.nodeDOM.nodeValue==e.text&&d.dirty!=Ei&&Kf(n,d.outerDeco));if(!y&&d.update(e,n,r,o))return this.destroyBetween(this.index,u),d.dom!=p&&(this.changed=!0),this.index++,!0;if(!y&&(g=this.recreateWrapper(d,e,n,r,o,l)))return this.destroyBetween(this.index,u),this.top.children[this.index]=g,g.contentDOM&&(g.dirty=Ys,g.updateChildren(o,l+1),g.dirty=Hr),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,n,r,o,s,l){if(e.dirty||n.isAtom||!e.children.length||!e.node.content.eq(n.content)||!Kf(r,e.outerDeco)||!o.eq(e.innerDeco))return null;let u=ds.create(this.top,n,r,o,s,l);if(u.contentDOM){u.children=e.children,e.children=[];for(let d of u.children)d.parent=u}return e.destroy(),u}addNode(e,n,r,o,s){let l=ds.create(this.top,e,n,r,o,s);l.contentDOM&&l.updateChildren(o,s+1),this.top.children.splice(this.index++,0,l),this.changed=!0}placeWidget(e,n,r){let o=this.index<this.top.children.length?this.top.children[this.index]:null;if(o&&o.matchesWidget(e)&&(e==o.widget||!o.widget.type.toDOM.parentNode))this.index++;else{let s=new kw(this.top,e,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],n=this.top;for(;e instanceof ua;)n=e,e=n.children[n.children.length-1];(!e||!(e instanceof $h)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Ln||En)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(e,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let o=new Tw(this.top,[],r,null);n!=this.top?n.children.push(o):n.children.splice(this.index++,0,o),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function hz(t,e){let n=e,r=n.children.length,o=t.childCount,s=new Map,l=[];e:for(;o>0;){let u;for(;;)if(r){let h=n.children[r-1];if(h instanceof ua)n=h,r=h.children.length;else{u=h,r--;break}}else{if(n==e)break e;r=n.parent.children.indexOf(n),n=n.parent}let d=u.node;if(d){if(d!=t.child(o-1))break;--o,s.set(u,o),l.push(u)}}return{index:o,matched:s,matches:l.reverse()}}function pz(t,e){return t.type.side-e.type.side}function mz(t,e,n,r){let o=e.locals(t),s=0;if(o.length==0){for(let h=0;h<t.childCount;h++){let p=t.child(h);r(p,o,e.forChild(s,p),h),s+=p.nodeSize}return}let l=0,u=[],d=null;for(let h=0;;){let p,g;for(;l<o.length&&o[l].to==s;){let k=o[l++];k.widget&&(p?(g||(g=[p])).push(k):p=k)}if(p)if(g){g.sort(pz);for(let k=0;k<g.length;k++)n(g[k],h,!!d)}else n(p,h,!!d);let y,x;if(d)x=-1,y=d,d=null;else if(h<t.childCount)x=h,y=t.child(h++);else break;for(let k=0;k<u.length;k++)u[k].to<=s&&u.splice(k--,1);for(;l<o.length&&o[l].from<=s&&o[l].to>s;)u.push(o[l++]);let S=s+y.nodeSize;if(y.isText){let k=S;l<o.length&&o[l].from<k&&(k=o[l].from);for(let w=0;w<u.length;w++)u[w].to<k&&(k=u[w].to);k<S&&(d=y.cut(k-s),y=y.cut(0,k-s),S=k,x=-1)}else for(;l<o.length&&o[l].to<S;)l++;let E=y.isInline&&!y.isLeaf?u.filter(k=>!k.inline):u.slice();r(y,E,e.forChild(s,y),x),s=S}}function gz(t){if(t.nodeName=="UL"||t.nodeName=="OL"){let e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}function vz(t,e,n,r){for(let o=0,s=0;o<t.childCount&&s<=r;){let l=t.child(o++),u=s;if(s+=l.nodeSize,!l.isText)continue;let d=l.text;for(;o<t.childCount;){let h=t.child(o++);if(s+=h.nodeSize,!h.isText)break;d+=h.text}if(s>=n){if(s>=r&&d.slice(r-e.length-u,r-u)==e)return r-e.length;let h=u<r?d.lastIndexOf(e,r-u-1):-1;if(h>=0&&h+e.length+u>=n)return u+h;if(n==r&&d.length>=r+e.length-u&&d.slice(r-u,r-u+e.length)==e)return r}}return-1}function Pv(t,e,n,r,o){let s=[];for(let l=0,u=0;l<t.length;l++){let d=t[l],h=u,p=u+=d.size;h>=n||p<=e?s.push(d):(h<e&&s.push(d.slice(0,e-h,r)),o&&(s.push(o),o=void 0),p>n&&s.push(d.slice(n-h,d.size,r)))}return s}function U0(t,e=null){let n=t.domSelectionRange(),r=t.state.doc;if(!n.focusNode)return null;let o=t.docView.nearestDesc(n.focusNode),s=o&&o.size==0,l=t.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(l<0)return null;let u=r.resolve(l),d,h;if(Gh(n)){for(d=l;o&&!o.node;)o=o.parent;let g=o.node;if(o&&g.isAtom&&Ie.isSelectable(g)&&o.parent&&!(g.isInline&&FL(n.focusNode,n.focusOffset,o.dom))){let y=o.posBefore;h=new Ie(l==y?u:r.resolve(y))}}else{if(n instanceof t.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let g=l,y=l;for(let x=0;x<n.rangeCount;x++){let S=n.getRangeAt(x);g=Math.min(g,t.docView.posFromDOM(S.startContainer,S.startOffset,1)),y=Math.max(y,t.docView.posFromDOM(S.endContainer,S.endOffset,-1))}if(g<0)return null;[d,l]=y==t.state.selection.anchor?[y,g]:[g,y],u=r.resolve(l)}else d=t.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(d<0)return null}let p=r.resolve(d);if(!h){let g=e=="pointer"||t.state.selection.head<u.pos&&!s?1:-1;h=H0(t,p,u,g)}return h}function _w(t){return t.editable?t.hasFocus():Ow(t)&&document.activeElement&&document.activeElement.contains(t.dom)}function ro(t,e=!1){let n=t.state.selection;if(Mw(t,n),!!_w(t)){if(!e&&t.input.mouseDown&&t.input.mouseDown.allowDefault&&En){let r=t.domSelectionRange(),o=t.domObserver.currentSelection;if(r.anchorNode&&o.anchorNode&&ca(r.anchorNode,r.anchorOffset,o.anchorNode,o.anchorOffset)){t.input.mouseDown.delayedSelectionSync=!0,t.domObserver.setCurSelection();return}}if(t.domObserver.disconnectSelection(),t.cursorWrapper)bz(t);else{let{anchor:r,head:o}=n,s,l;JE&&!(n instanceof Ve)&&(n.$from.parent.inlineContent||(s=QE(t,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(l=QE(t,n.to))),t.docView.setSelection(r,o,t,e),JE&&(s&&ZE(s),l&&ZE(l)),n.visible?t.dom.classList.remove("ProseMirror-hideselection"):(t.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&yz(t))}t.domObserver.setCurSelection(),t.domObserver.connectSelection()}}const JE=Ln||En&&mw<63;function QE(t,e){let{node:n,offset:r}=t.docView.domFromPos(e,0),o=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(Ln&&o&&o.contentEditable=="false")return Pg(o);if((!o||o.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(o)return Pg(o);if(s)return Pg(s)}}function Pg(t){return t.contentEditable="true",Ln&&t.draggable&&(t.draggable=!1,t.wasDraggable=!0),t}function ZE(t){t.contentEditable="false",t.wasDraggable&&(t.draggable=!0,t.wasDraggable=null)}function yz(t){let e=t.dom.ownerDocument;e.removeEventListener("selectionchange",t.input.hideSelectionGuard);let n=t.domSelectionRange(),r=n.anchorNode,o=n.anchorOffset;e.addEventListener("selectionchange",t.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=o)&&(e.removeEventListener("selectionchange",t.input.hideSelectionGuard),setTimeout(()=>{(!_w(t)||t.state.selection.visible)&&t.dom.classList.remove("ProseMirror-hideselection")},20))})}function bz(t){let e=t.domSelection();if(!e)return;let n=t.cursorWrapper.dom,r=n.nodeName=="IMG";r?e.collapse(n.parentNode,Nn(n)+1):e.collapse(n,0),!r&&!t.state.selection.visible&&dr&&us<=11&&(n.disabled=!0,n.disabled=!1)}function Mw(t,e){if(e instanceof Ie){let n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(ek(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else ek(t)}function ek(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.parent&&t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=void 0)}function H0(t,e,n,r){return t.someProp("createSelectionBetween",o=>o(t,e,n))||Ve.between(e,n,r)}function tk(t){return t.editable&&!t.hasFocus()?!1:Ow(t)}function Ow(t){let e=t.domSelectionRange();if(!e.anchorNode)return!1;try{return t.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(t.editable||t.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function xz(t){let e=t.docView.domFromPos(t.state.selection.anchor,0),n=t.domSelectionRange();return ca(e.node,e.offset,n.anchorNode,n.anchorOffset)}function Uv(t,e){let{$anchor:n,$head:r}=t.selection,o=e>0?n.max(r):n.min(r),s=o.parent.inlineContent?o.depth?t.doc.resolve(e>0?o.after():o.before()):null:o;return s&&Je.findFrom(s,e)}function $o(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function nk(t,e,n){let r=t.state.selection;if(r instanceof Ve)if(n.indexOf("s")>-1){let{$head:o}=r,s=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let l=t.state.doc.resolve(o.pos+s.nodeSize*(e<0?-1:1));return $o(t,new Ve(r.$anchor,l))}else if(r.empty){if(t.endOfTextblock(e>0?"forward":"backward")){let o=Uv(t.state,e);return o&&o instanceof Ie?$o(t,o):!1}else if(!(Br&&n.indexOf("m")>-1)){let o=r.$head,s=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter,l;if(!s||s.isText)return!1;let u=e<0?o.pos-s.nodeSize:o.pos;return s.isAtom||(l=t.docView.descAt(u))&&!l.contentDOM?Ie.isSelectable(s)?$o(t,new Ie(e<0?t.state.doc.resolve(o.pos-s.nodeSize):o)):Au?$o(t,new Ve(t.state.doc.resolve(e<0?u:u+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof Ie&&r.node.isInline)return $o(t,new Ve(e>0?r.$to:r.$from));{let o=Uv(t.state,e);return o?$o(t,o):!1}}}function Yf(t){return t.nodeType==3?t.nodeValue.length:t.childNodes.length}function nu(t,e){let n=t.pmViewDesc;return n&&n.size==0&&(e<0||t.nextSibling||t.nodeName!="BR")}function cl(t,e){return e<0?Sz(t):Ez(t)}function Sz(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let o,s,l=!1;for(Ur&&n.nodeType==1&&r<Yf(n)&&nu(n.childNodes[r],-1)&&(l=!0);;)if(r>0){if(n.nodeType!=1)break;{let u=n.childNodes[r-1];if(nu(u,-1))o=n,s=--r;else if(u.nodeType==3)n=u,r=n.nodeValue.length;else break}}else{if(jw(n))break;{let u=n.previousSibling;for(;u&&nu(u,-1);)o=n.parentNode,s=Nn(u),u=u.previousSibling;if(u)n=u,r=Yf(n);else{if(n=n.parentNode,n==t.dom)break;r=0}}}l?Hv(t,n,r):o&&Hv(t,o,s)}function Ez(t){let e=t.domSelectionRange(),n=e.focusNode,r=e.focusOffset;if(!n)return;let o=Yf(n),s,l;for(;;)if(r<o){if(n.nodeType!=1)break;let u=n.childNodes[r];if(nu(u,1))s=n,l=++r;else break}else{if(jw(n))break;{let u=n.nextSibling;for(;u&&nu(u,1);)s=u.parentNode,l=Nn(u)+1,u=u.nextSibling;if(u)n=u,r=0,o=Yf(n);else{if(n=n.parentNode,n==t.dom)break;r=o=0}}}s&&Hv(t,s,l)}function jw(t){let e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function kz(t,e){for(;t&&e==t.childNodes.length&&!Cu(t);)e=Nn(t)+1,t=t.parentNode;for(;t&&e<t.childNodes.length;){let n=t.childNodes[e];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=0}}function Tz(t,e){for(;t&&!e&&!Cu(t);)e=Nn(t),t=t.parentNode;for(;t&&e;){let n=t.childNodes[e-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;t=n,e=t.childNodes.length}}function Hv(t,e,n){if(e.nodeType!=3){let s,l;(l=kz(e,n))?(e=l,n=0):(s=Tz(e,n))&&(e=s,n=s.nodeValue.length)}let r=t.domSelection();if(!r)return;if(Gh(r)){let s=document.createRange();s.setEnd(e,n),s.setStart(e,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(e,n);t.domObserver.setCurSelection();let{state:o}=t;setTimeout(()=>{t.state==o&&ro(t)},50)}function rk(t,e){let n=t.state.doc.resolve(e);if(!(En||gw)&&n.parent.inlineContent){let o=t.coordsAtPos(e);if(e>n.start()){let s=t.coordsAtPos(e-1),l=(s.top+s.bottom)/2;if(l>o.top&&l<o.bottom&&Math.abs(s.left-o.left)>1)return s.left<o.left?"ltr":"rtl"}if(e<n.end()){let s=t.coordsAtPos(e+1),l=(s.top+s.bottom)/2;if(l>o.top&&l<o.bottom&&Math.abs(s.left-o.left)>1)return s.left>o.left?"ltr":"rtl"}}return getComputedStyle(t.dom).direction=="rtl"?"rtl":"ltr"}function ik(t,e,n){let r=t.state.selection;if(r instanceof Ve&&!r.empty||n.indexOf("s")>-1||Br&&n.indexOf("m")>-1)return!1;let{$from:o,$to:s}=r;if(!o.parent.inlineContent||t.endOfTextblock(e<0?"up":"down")){let l=Uv(t.state,e);if(l&&l instanceof Ie)return $o(t,l)}if(!o.parent.inlineContent){let l=e<0?o:s,u=r instanceof Er?Je.near(l,e):Je.findFrom(l,e);return u?$o(t,u):!1}return!1}function ok(t,e){if(!(t.state.selection instanceof Ve))return!0;let{$head:n,$anchor:r,empty:o}=t.state.selection;if(!n.sameParent(r))return!0;if(!o)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;let s=!n.textOffset&&(e<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let l=t.state.tr;return e<0?l.delete(n.pos-s.nodeSize,n.pos):l.delete(n.pos,n.pos+s.nodeSize),t.dispatch(l),!0}return!1}function sk(t,e,n){t.domObserver.stop(),e.contentEditable=n,t.domObserver.start()}function wz(t){if(!Ln||t.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(e&&e.nodeType==1&&n==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;sk(t,r,"true"),setTimeout(()=>sk(t,r,"false"),20)}return!1}function Cz(t){let e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function Az(t,e){let n=e.keyCode,r=Cz(e);if(n==8||Br&&n==72&&r=="c")return ok(t,-1)||cl(t,-1);if(n==46&&!e.shiftKey||Br&&n==68&&r=="c")return ok(t,1)||cl(t,1);if(n==13||n==27)return!0;if(n==37||Br&&n==66&&r=="c"){let o=n==37?rk(t,t.state.selection.from)=="ltr"?-1:1:-1;return nk(t,o,r)||cl(t,o)}else if(n==39||Br&&n==70&&r=="c"){let o=n==39?rk(t,t.state.selection.from)=="ltr"?1:-1:1;return nk(t,o,r)||cl(t,o)}else{if(n==38||Br&&n==80&&r=="c")return ik(t,-1,r)||cl(t,-1);if(n==40||Br&&n==78&&r=="c")return wz(t)||ik(t,1,r)||cl(t,1);if(r==(Br?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function q0(t,e){t.someProp("transformCopied",x=>{e=x(e,t)});let n=[],{content:r,openStart:o,openEnd:s}=e;for(;o>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){o--,s--;let x=r.firstChild;n.push(x.type.name,x.attrs!=x.type.defaultAttrs?x.attrs:null),r=x.content}let l=t.someProp("clipboardSerializer")||ga.fromSchema(t.state.schema),u=Iw(),d=u.createElement("div");d.appendChild(l.serializeFragment(r,{document:u}));let h=d.firstChild,p,g=0;for(;h&&h.nodeType==1&&(p=zw[h.nodeName.toLowerCase()]);){for(let x=p.length-1;x>=0;x--){let S=u.createElement(p[x]);for(;d.firstChild;)S.appendChild(d.firstChild);d.appendChild(S),g++}h=d.firstChild}h&&h.nodeType==1&&h.setAttribute("data-pm-slice",`${o} ${s}${g?` -${g}`:""} ${JSON.stringify(n)}`);let y=t.someProp("clipboardTextSerializer",x=>x(e,t))||e.content.textBetween(0,e.content.size,`

`);return{dom:d,text:y,slice:e}}function Rw(t,e,n,r,o){let s=o.parent.type.spec.code,l,u;if(!n&&!e)return null;let d=!!e&&(r||s||!n);if(d){if(t.someProp("transformPastedText",y=>{e=y(e,s||r,t)}),s)return u=new xe(oe.from(t.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0),t.someProp("transformPasted",y=>{u=y(u,t,!0)}),u;let g=t.someProp("clipboardTextParser",y=>y(e,o,r,t));if(g)u=g;else{let y=o.marks(),{schema:x}=t.state,S=ga.fromSchema(x);l=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(E=>{let k=l.appendChild(document.createElement("p"));E&&k.appendChild(S.serializeNode(x.text(E,y)))})}}else t.someProp("transformPastedHTML",g=>{n=g(n,t)}),l=jz(n),Au&&Rz(l);let h=l&&l.querySelector("[data-pm-slice]"),p=h&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(h.getAttribute("data-pm-slice")||"");if(p&&p[3])for(let g=+p[3];g>0;g--){let y=l.firstChild;for(;y&&y.nodeType!=1;)y=y.nextSibling;if(!y)break;l=y}if(u||(u=(t.someProp("clipboardParser")||t.someProp("domParser")||cs.fromSchema(t.state.schema)).parseSlice(l,{preserveWhitespace:!!(d||p),context:o,ruleFromNode(y){return y.nodeName=="BR"&&!y.nextSibling&&y.parentNode&&!_z.test(y.parentNode.nodeName)?{ignore:!0}:null}})),p)u=Nz(ak(u,+p[1],+p[2]),p[4]);else if(u=xe.maxOpen(Mz(u.content,o),!0),u.openStart||u.openEnd){let g=0,y=0;for(let x=u.content.firstChild;g<u.openStart&&!x.type.spec.isolating;g++,x=x.firstChild);for(let x=u.content.lastChild;y<u.openEnd&&!x.type.spec.isolating;y++,x=x.lastChild);u=ak(u,g,y)}return t.someProp("transformPasted",g=>{u=g(u,t,d)}),u}const _z=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function Mz(t,e){if(t.childCount<2)return t;for(let n=e.depth;n>=0;n--){let o=e.node(n).contentMatchAt(e.index(n)),s,l=[];if(t.forEach(u=>{if(!l)return;let d=o.findWrapping(u.type),h;if(!d)return l=null;if(h=l.length&&s.length&&Dw(d,s,u,l[l.length-1],0))l[l.length-1]=h;else{l.length&&(l[l.length-1]=Lw(l[l.length-1],s.length));let p=Nw(u,d);l.push(p),o=o.matchType(p.type),s=d}}),l)return oe.from(l)}return t}function Nw(t,e,n=0){for(let r=e.length-1;r>=n;r--)t=e[r].create(null,oe.from(t));return t}function Dw(t,e,n,r,o){if(o<t.length&&o<e.length&&t[o]==e[o]){let s=Dw(t,e,n,r.lastChild,o+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(o==t.length-1?n.type:t[o+1]))return r.copy(r.content.append(oe.from(Nw(n,t,o+1))))}}function Lw(t,e){if(e==0)return t;let n=t.content.replaceChild(t.childCount-1,Lw(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(oe.empty,!0);return t.copy(n.append(r))}function qv(t,e,n,r,o,s){let l=e<0?t.firstChild:t.lastChild,u=l.content;return t.childCount>1&&(s=0),o<r-1&&(u=qv(u,e,n,r,o+1,s)),o>=n&&(u=e<0?l.contentMatchAt(0).fillBefore(u,s<=o).append(u):u.append(l.contentMatchAt(l.childCount).fillBefore(oe.empty,!0))),t.replaceChild(e<0?0:t.childCount-1,l.copy(u))}function ak(t,e,n){return e<t.openStart&&(t=new xe(qv(t.content,-1,e,t.openStart,0,t.openEnd),e,t.openEnd)),n<t.openEnd&&(t=new xe(qv(t.content,1,n,t.openEnd,0,0),t.openStart,n)),t}const zw={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let lk=null;function Iw(){return lk||(lk=document.implementation.createHTMLDocument("title"))}let Ug=null;function Oz(t){let e=window.trustedTypes;return e?(Ug||(Ug=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),Ug.createHTML(t)):t}function jz(t){let e=/^(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));let n=Iw().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(t),o;if((o=r&&zw[r[1].toLowerCase()])&&(t=o.map(s=>"<"+s+">").join("")+t+o.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=Oz(t),o)for(let s=0;s<o.length;s++)n=n.querySelector(o[s])||n;return n}function Rz(t){let e=t.querySelectorAll(En?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<e.length;n++){let r=e[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(t.ownerDocument.createTextNode(" "),r)}}function Nz(t,e){if(!t.size)return t;let n=t.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return t}let{content:o,openStart:s,openEnd:l}=t;for(let u=r.length-2;u>=0;u-=2){let d=n.nodes[r[u]];if(!d||d.hasRequiredAttrs())break;o=oe.from(d.create(r[u+1],o)),s++,l++}return new xe(o,s,l)}const Qn={},Zn={},Dz={touchstart:!0,touchmove:!0};class Lz{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.badSafariComposition=!1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function zz(t){for(let e in Qn){let n=Qn[e];t.dom.addEventListener(e,t.input.eventHandlers[e]=r=>{Bz(t,r)&&!V0(t,r)&&(t.editable||!(r.type in Zn))&&n(t,r)},Dz[e]?{passive:!0}:void 0)}Ln&&t.dom.addEventListener("input",()=>null),Vv(t)}function ss(t,e){t.input.lastSelectionOrigin=e,t.input.lastSelectionTime=Date.now()}function Iz(t){t.domObserver.stop();for(let e in t.input.eventHandlers)t.dom.removeEventListener(e,t.input.eventHandlers[e]);clearTimeout(t.input.composingTimeout),clearTimeout(t.input.lastIOSEnterFallbackTimeout)}function Vv(t){t.someProp("handleDOMEvents",e=>{for(let n in e)t.input.eventHandlers[n]||t.dom.addEventListener(n,t.input.eventHandlers[n]=r=>V0(t,r))})}function V0(t,e){return t.someProp("handleDOMEvents",n=>{let r=n[e.type];return r?r(t,e)||e.defaultPrevented:!1})}function Bz(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let n=e.target;n!=t.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function Pz(t,e){!V0(t,e)&&Qn[e.type]&&(t.editable||!(e.type in Zn))&&Qn[e.type](t,e)}Zn.keydown=(t,e)=>{let n=e;if(t.input.shiftKey=n.keyCode==16||n.shiftKey,!Pw(t,n)&&(t.input.lastKeyCode=n.keyCode,t.input.lastKeyCodeTime=Date.now(),!(eo&&En&&n.keyCode==13)))if(n.keyCode!=229&&t.domObserver.forceFlush(),_l&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();t.input.lastIOSEnter=r,t.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{t.input.lastIOSEnter==r&&(t.someProp("handleKeyDown",o=>o(t,$s(13,"Enter"))),t.input.lastIOSEnter=0)},200)}else t.someProp("handleKeyDown",r=>r(t,n))||Az(t,n)?n.preventDefault():ss(t,"key")};Zn.keyup=(t,e)=>{e.keyCode==16&&(t.input.shiftKey=!1)};Zn.keypress=(t,e)=>{let n=e;if(Pw(t,n)||!n.charCode||n.ctrlKey&&!n.altKey||Br&&n.metaKey)return;if(t.someProp("handleKeyPress",o=>o(t,n))){n.preventDefault();return}let r=t.state.selection;if(!(r instanceof Ve)||!r.$from.sameParent(r.$to)){let o=String.fromCharCode(n.charCode),s=()=>t.state.tr.insertText(o).scrollIntoView();!/[\r\n]/.test(o)&&!t.someProp("handleTextInput",l=>l(t,r.$from.pos,r.$to.pos,o,s))&&t.dispatch(s()),n.preventDefault()}};function Kh(t){return{left:t.clientX,top:t.clientY}}function Uz(t,e){let n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function F0(t,e,n,r,o){if(r==-1)return!1;let s=t.state.doc.resolve(r);for(let l=s.depth+1;l>0;l--)if(t.someProp(e,u=>l>s.depth?u(t,n,s.nodeAfter,s.before(l),o,!0):u(t,n,s.node(l),s.before(l),o,!1)))return!0;return!1}function El(t,e,n){if(t.focused||t.focus(),t.state.selection.eq(e))return;let r=t.state.tr.setSelection(e);r.setMeta("pointer",!0),t.dispatch(r)}function Hz(t,e){if(e==-1)return!1;let n=t.state.doc.resolve(e),r=n.nodeAfter;return r&&r.isAtom&&Ie.isSelectable(r)?(El(t,new Ie(n)),!0):!1}function qz(t,e){if(e==-1)return!1;let n=t.state.selection,r,o;n instanceof Ie&&(r=n.node);let s=t.state.doc.resolve(e);for(let l=s.depth+1;l>0;l--){let u=l>s.depth?s.nodeAfter:s.node(l);if(Ie.isSelectable(u)){r&&n.$from.depth>0&&l>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?o=s.before(n.$from.depth):o=s.before(l);break}}return o!=null?(El(t,Ie.create(t.state.doc,o)),!0):!1}function Vz(t,e,n,r,o){return F0(t,"handleClickOn",e,n,r)||t.someProp("handleClick",s=>s(t,e,r))||(o?qz(t,n):Hz(t,n))}function Fz(t,e,n,r){return F0(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",o=>o(t,e,r))}function Wz(t,e,n,r){return F0(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",o=>o(t,e,r))||Gz(t,n,r)}function Gz(t,e,n){if(n.button!=0)return!1;let r=t.state.doc;if(e==-1)return r.inlineContent?(El(t,Ve.create(r,0,r.content.size)),!0):!1;let o=r.resolve(e);for(let s=o.depth+1;s>0;s--){let l=s>o.depth?o.nodeAfter:o.node(s),u=o.before(s);if(l.inlineContent)El(t,Ve.create(r,u+1,u+1+l.content.size));else if(Ie.isSelectable(l))El(t,Ie.create(r,u));else continue;return!0}}function W0(t){return Xf(t)}const Bw=Br?"metaKey":"ctrlKey";Qn.mousedown=(t,e)=>{let n=e;t.input.shiftKey=n.shiftKey;let r=W0(t),o=Date.now(),s="singleClick";o-t.input.lastClick.time<500&&Uz(n,t.input.lastClick)&&!n[Bw]&&t.input.lastClick.button==n.button&&(t.input.lastClick.type=="singleClick"?s="doubleClick":t.input.lastClick.type=="doubleClick"&&(s="tripleClick")),t.input.lastClick={time:o,x:n.clientX,y:n.clientY,type:s,button:n.button};let l=t.posAtCoords(Kh(n));l&&(s=="singleClick"?(t.input.mouseDown&&t.input.mouseDown.done(),t.input.mouseDown=new $z(t,l,n,!!r)):(s=="doubleClick"?Fz:Wz)(t,l.pos,l.inside,n)?n.preventDefault():ss(t,"pointer"))};class $z{constructor(e,n,r,o){this.view=e,this.pos=n,this.event=r,this.flushed=o,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[Bw],this.allowDefault=r.shiftKey;let s,l;if(n.inside>-1)s=e.state.doc.nodeAt(n.inside),l=n.inside;else{let p=e.state.doc.resolve(n.pos);s=p.parent,l=p.depth?p.before():0}const u=o?null:r.target,d=u?e.docView.nearestDesc(u,!0):null;this.target=d&&d.nodeDOM.nodeType==1?d.nodeDOM:null;let{selection:h}=e.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||h instanceof Ie&&h.from<=l&&h.to>l)&&(this.mightDrag={node:s,pos:l,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Ur&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),ss(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>ro(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(Kh(e))),this.updateAllowDefault(e),this.allowDefault||!n?ss(this.view,"pointer"):Vz(this.view,n.pos,n.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Ln&&this.mightDrag&&!this.mightDrag.node.isAtom||En&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(El(this.view,Je.near(this.view.state.doc.resolve(n.pos))),e.preventDefault()):ss(this.view,"pointer")}move(e){this.updateAllowDefault(e),ss(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Qn.touchstart=t=>{t.input.lastTouch=Date.now(),W0(t),ss(t,"pointer")};Qn.touchmove=t=>{t.input.lastTouch=Date.now(),ss(t,"pointer")};Qn.contextmenu=t=>W0(t);function Pw(t,e){return t.composing?!0:Ln&&Math.abs(e.timeStamp-t.input.compositionEndedAt)<500?(t.input.compositionEndedAt=-2e8,!0):!1}const Kz=eo?5e3:-1;Zn.compositionstart=Zn.compositionupdate=t=>{if(!t.composing){t.domObserver.flush();let{state:e}=t,n=e.selection.$to;if(e.selection instanceof Ve&&(e.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)||En&&gw&&Yz(t)))t.markCursor=t.state.storedMarks||n.marks(),Xf(t,!0),t.markCursor=null;else if(Xf(t,!e.selection.empty),Ur&&e.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=t.domSelectionRange();for(let o=r.focusNode,s=r.focusOffset;o&&o.nodeType==1&&s!=0;){let l=s<0?o.lastChild:o.childNodes[s-1];if(!l)break;if(l.nodeType==3){let u=t.domSelection();u&&u.collapse(l,l.nodeValue.length);break}else o=l,s=-1}}t.input.composing=!0}Uw(t,Kz)};function Yz(t){let{focusNode:e,focusOffset:n}=t.domSelectionRange();if(!e||e.nodeType!=1||n>=e.childNodes.length)return!1;let r=e.childNodes[n];return r.nodeType==1&&r.contentEditable=="false"}Zn.compositionend=(t,e)=>{t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=e.timeStamp,t.input.compositionPendingChanges=t.domObserver.pendingRecords().length?t.input.compositionID:0,t.input.compositionNode=null,t.input.badSafariComposition?t.domObserver.forceFlush():t.input.compositionPendingChanges&&Promise.resolve().then(()=>t.domObserver.flush()),t.input.compositionID++,Uw(t,20))};function Uw(t,e){clearTimeout(t.input.composingTimeout),e>-1&&(t.input.composingTimeout=setTimeout(()=>Xf(t),e))}function Hw(t){for(t.composing&&(t.input.composing=!1,t.input.compositionEndedAt=Jz());t.input.compositionNodes.length>0;)t.input.compositionNodes.pop().markParentsDirty()}function Xz(t){let e=t.domSelectionRange();if(!e.focusNode)return null;let n=qL(e.focusNode,e.focusOffset),r=VL(e.focusNode,e.focusOffset);if(n&&r&&n!=r){let o=r.pmViewDesc,s=t.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!o||!o.isText(r.nodeValue))return r;if(t.input.compositionNode==r){let l=n.pmViewDesc;if(!(!l||!l.isText(n.nodeValue)))return r}}return n||r}function Jz(){let t=document.createEvent("Event");return t.initEvent("event",!0,!0),t.timeStamp}function Xf(t,e=!1){if(!(eo&&t.domObserver.flushingSoon>=0)){if(t.domObserver.forceFlush(),Hw(t),e||t.docView&&t.docView.dirty){let n=U0(t),r=t.state.selection;return n&&!n.eq(r)?t.dispatch(t.state.tr.setSelection(n)):(t.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?t.dispatch(t.state.tr.deleteSelection()):t.updateState(t.state),!0}return!1}}function Qz(t,e){if(!t.dom.parentNode)return;let n=t.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(e),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),o=document.createRange();o.selectNodeContents(e),t.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),t.focus()},50)}const mu=dr&&us<15||_l&&$L<604;Qn.copy=Zn.cut=(t,e)=>{let n=e,r=t.state.selection,o=n.type=="cut";if(r.empty)return;let s=mu?null:n.clipboardData,l=r.content(),{dom:u,text:d}=q0(t,l);s?(n.preventDefault(),s.clearData(),s.setData("text/html",u.innerHTML),s.setData("text/plain",d)):Qz(t,u),o&&t.dispatch(t.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function Zz(t){return t.openStart==0&&t.openEnd==0&&t.content.childCount==1?t.content.firstChild:null}function eI(t,e){if(!t.dom.parentNode)return;let n=t.input.shiftKey||t.state.selection.$from.parent.type.spec.code,r=t.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let o=t.input.shiftKey&&t.input.lastKeyCode!=45;setTimeout(()=>{t.focus(),r.parentNode&&r.parentNode.removeChild(r),n?gu(t,r.value,null,o,e):gu(t,r.textContent,r.innerHTML,o,e)},50)}function gu(t,e,n,r,o){let s=Rw(t,e,n,r,t.state.selection.$from);if(t.someProp("handlePaste",d=>d(t,o,s||xe.empty)))return!0;if(!s)return!1;let l=Zz(s),u=l?t.state.tr.replaceSelectionWith(l,r):t.state.tr.replaceSelection(s);return t.dispatch(u.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function qw(t){let e=t.getData("text/plain")||t.getData("Text");if(e)return e;let n=t.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Zn.paste=(t,e)=>{let n=e;if(t.composing&&!eo)return;let r=mu?null:n.clipboardData,o=t.input.shiftKey&&t.input.lastKeyCode!=45;r&&gu(t,qw(r),r.getData("text/html"),o,n)?n.preventDefault():eI(t,n)};class Vw{constructor(e,n,r){this.slice=e,this.move=n,this.node=r}}const tI=Br?"altKey":"ctrlKey";function Fw(t,e){let n=t.someProp("dragCopies",r=>!r(e));return n??!e[tI]}Qn.dragstart=(t,e)=>{let n=e,r=t.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let o=t.state.selection,s=o.empty?null:t.posAtCoords(Kh(n)),l;if(!(s&&s.pos>=o.from&&s.pos<=(o instanceof Ie?o.to-1:o.to))){if(r&&r.mightDrag)l=Ie.create(t.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let g=t.docView.nearestDesc(n.target,!0);g&&g.node.type.spec.draggable&&g!=t.docView&&(l=Ie.create(t.state.doc,g.posBefore))}}let u=(l||t.state.selection).content(),{dom:d,text:h,slice:p}=q0(t,u);(!n.dataTransfer.files.length||!En||mw>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(mu?"Text":"text/html",d.innerHTML),n.dataTransfer.effectAllowed="copyMove",mu||n.dataTransfer.setData("text/plain",h),t.dragging=new Vw(p,Fw(t,n),l)};Qn.dragend=t=>{let e=t.dragging;window.setTimeout(()=>{t.dragging==e&&(t.dragging=null)},50)};Zn.dragover=Zn.dragenter=(t,e)=>e.preventDefault();Zn.drop=(t,e)=>{try{nI(t,e,t.dragging)}finally{t.dragging=null}};function nI(t,e,n){if(!e.dataTransfer)return;let r=t.posAtCoords(Kh(e));if(!r)return;let o=t.state.doc.resolve(r.pos),s=n&&n.slice;s?t.someProp("transformPasted",x=>{s=x(s,t,!1)}):s=Rw(t,qw(e.dataTransfer),mu?null:e.dataTransfer.getData("text/html"),!1,o);let l=!!(n&&Fw(t,e));if(t.someProp("handleDrop",x=>x(t,e,s||xe.empty,l))){e.preventDefault();return}if(!s)return;e.preventDefault();let u=s?K2(t.state.doc,o.pos,s):o.pos;u==null&&(u=o.pos);let d=t.state.tr;if(l){let{node:x}=n;x?x.replace(d):d.deleteSelection()}let h=d.mapping.map(u),p=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,g=d.doc;if(p?d.replaceRangeWith(h,h,s.content.firstChild):d.replaceRange(h,h,s),d.doc.eq(g))return;let y=d.doc.resolve(h);if(p&&Ie.isSelectable(s.content.firstChild)&&y.nodeAfter&&y.nodeAfter.sameMarkup(s.content.firstChild))d.setSelection(new Ie(y));else{let x=d.mapping.map(u);d.mapping.maps[d.mapping.maps.length-1].forEach((S,E,k,w)=>x=w),d.setSelection(H0(t,y,d.doc.resolve(x)))}t.focus(),t.dispatch(d.setMeta("uiEvent","drop"))}Qn.focus=t=>{t.input.lastFocus=Date.now(),t.focused||(t.domObserver.stop(),t.dom.classList.add("ProseMirror-focused"),t.domObserver.start(),t.focused=!0,setTimeout(()=>{t.docView&&t.hasFocus()&&!t.domObserver.currentSelection.eq(t.domSelectionRange())&&ro(t)},20))};Qn.blur=(t,e)=>{let n=e;t.focused&&(t.domObserver.stop(),t.dom.classList.remove("ProseMirror-focused"),t.domObserver.start(),n.relatedTarget&&t.dom.contains(n.relatedTarget)&&t.domObserver.currentSelection.clear(),t.focused=!1)};Qn.beforeinput=(t,e)=>{if(En&&eo&&e.inputType=="deleteContentBackward"){t.domObserver.flushSoon();let{domChangeCount:r}=t.input;setTimeout(()=>{if(t.input.domChangeCount!=r||(t.dom.blur(),t.focus(),t.someProp("handleKeyDown",s=>s(t,$s(8,"Backspace")))))return;let{$cursor:o}=t.state.selection;o&&o.pos>0&&t.dispatch(t.state.tr.delete(o.pos-1,o.pos).scrollIntoView())},50)}};for(let t in Zn)Qn[t]=Zn[t];function vu(t,e){if(t==e)return!0;for(let n in t)if(t[n]!==e[n])return!1;for(let n in e)if(!(n in t))return!1;return!0}class Jf{constructor(e,n){this.toDOM=e,this.spec=n||ra,this.side=this.spec.side||0}map(e,n,r,o){let{pos:s,deleted:l}=e.mapResult(n.from+o,this.side<0?-1:1);return l?null:new Jn(s-r,s-r,this)}valid(){return!0}eq(e){return this==e||e instanceof Jf&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&vu(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class fs{constructor(e,n){this.attrs=e,this.spec=n||ra}map(e,n,r,o){let s=e.map(n.from+o,this.spec.inclusiveStart?-1:1)-r,l=e.map(n.to+o,this.spec.inclusiveEnd?1:-1)-r;return s>=l?null:new Jn(s,l,this)}valid(e,n){return n.from<n.to}eq(e){return this==e||e instanceof fs&&vu(this.attrs,e.attrs)&&vu(this.spec,e.spec)}static is(e){return e.type instanceof fs}destroy(){}}class G0{constructor(e,n){this.attrs=e,this.spec=n||ra}map(e,n,r,o){let s=e.mapResult(n.from+o,1);if(s.deleted)return null;let l=e.mapResult(n.to+o,-1);return l.deleted||l.pos<=s.pos?null:new Jn(s.pos-r,l.pos-r,this)}valid(e,n){let{index:r,offset:o}=e.content.findIndex(n.from),s;return o==n.from&&!(s=e.child(r)).isText&&o+s.nodeSize==n.to}eq(e){return this==e||e instanceof G0&&vu(this.attrs,e.attrs)&&vu(this.spec,e.spec)}destroy(){}}class Jn{constructor(e,n,r){this.from=e,this.to=n,this.type=r}copy(e,n){return new Jn(e,n,this.type)}eq(e,n=0){return this.type.eq(e.type)&&this.from+n==e.from&&this.to+n==e.to}map(e,n,r){return this.type.map(e,this,n,r)}static widget(e,n,r){return new Jn(e,e,new Jf(n,r))}static inline(e,n,r,o){return new Jn(e,n,new fs(r,o))}static node(e,n,r,o){return new Jn(e,n,new G0(r,o))}get spec(){return this.type.spec}get inline(){return this.type instanceof fs}get widget(){return this.type instanceof Jf}}const hl=[],ra={};class $t{constructor(e,n){this.local=e.length?e:hl,this.children=n.length?n:hl}static create(e,n){return n.length?Qf(n,e,0,ra):Un}find(e,n,r){let o=[];return this.findInner(e??0,n??1e9,o,0,r),o}findInner(e,n,r,o,s){for(let l=0;l<this.local.length;l++){let u=this.local[l];u.from<=n&&u.to>=e&&(!s||s(u.spec))&&r.push(u.copy(u.from+o,u.to+o))}for(let l=0;l<this.children.length;l+=3)if(this.children[l]<n&&this.children[l+1]>e){let u=this.children[l]+1;this.children[l+2].findInner(e-u,n-u,r,o+u,s)}}map(e,n,r){return this==Un||e.maps.length==0?this:this.mapInner(e,n,0,0,r||ra)}mapInner(e,n,r,o,s){let l;for(let u=0;u<this.local.length;u++){let d=this.local[u].map(e,r,o);d&&d.type.valid(n,d)?(l||(l=[])).push(d):s.onRemove&&s.onRemove(this.local[u].spec)}return this.children.length?rI(this.children,l||[],e,n,r,o,s):l?new $t(l.sort(ia),hl):Un}add(e,n){return n.length?this==Un?$t.create(e,n):this.addInner(e,n,0):this}addInner(e,n,r){let o,s=0;e.forEach((u,d)=>{let h=d+r,p;if(p=Gw(n,u,h)){for(o||(o=this.children.slice());s<o.length&&o[s]<d;)s+=3;o[s]==d?o[s+2]=o[s+2].addInner(u,p,h+1):o.splice(s,0,d,d+u.nodeSize,Qf(p,u,h+1,ra)),s+=3}});let l=Ww(s?$w(n):n,-r);for(let u=0;u<l.length;u++)l[u].type.valid(e,l[u])||l.splice(u--,1);return new $t(l.length?this.local.concat(l).sort(ia):this.local,o||this.children)}remove(e){return e.length==0||this==Un?this:this.removeInner(e,0)}removeInner(e,n){let r=this.children,o=this.local;for(let s=0;s<r.length;s+=3){let l,u=r[s]+n,d=r[s+1]+n;for(let p=0,g;p<e.length;p++)(g=e[p])&&g.from>u&&g.to<d&&(e[p]=null,(l||(l=[])).push(g));if(!l)continue;r==this.children&&(r=this.children.slice());let h=r[s+2].removeInner(l,u+1);h!=Un?r[s+2]=h:(r.splice(s,3),s-=3)}if(o.length){for(let s=0,l;s<e.length;s++)if(l=e[s])for(let u=0;u<o.length;u++)o[u].eq(l,n)&&(o==this.local&&(o=this.local.slice()),o.splice(u--,1))}return r==this.children&&o==this.local?this:o.length||r.length?new $t(o,r):Un}forChild(e,n){if(this==Un)return this;if(n.isLeaf)return $t.empty;let r,o;for(let u=0;u<this.children.length;u+=3)if(this.children[u]>=e){this.children[u]==e&&(r=this.children[u+2]);break}let s=e+1,l=s+n.content.size;for(let u=0;u<this.local.length;u++){let d=this.local[u];if(d.from<l&&d.to>s&&d.type instanceof fs){let h=Math.max(s,d.from)-s,p=Math.min(l,d.to)-s;h<p&&(o||(o=[])).push(d.copy(h,p))}}if(o){let u=new $t(o.sort(ia),hl);return r?new Jo([u,r]):u}return r||Un}eq(e){if(this==e)return!0;if(!(e instanceof $t)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(e.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=e.children[n]||this.children[n+1]!=e.children[n+1]||!this.children[n+2].eq(e.children[n+2]))return!1;return!0}locals(e){return $0(this.localsInner(e))}localsInner(e){if(this==Un)return hl;if(e.inlineContent||!this.local.some(fs.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof fs||n.push(this.local[r]);return n}forEachSet(e){e(this)}}$t.empty=new $t([],[]);$t.removeOverlap=$0;const Un=$t.empty;class Jo{constructor(e){this.members=e}map(e,n){const r=this.members.map(o=>o.map(e,n,ra));return Jo.from(r)}forChild(e,n){if(n.isLeaf)return $t.empty;let r=[];for(let o=0;o<this.members.length;o++){let s=this.members[o].forChild(e,n);s!=Un&&(s instanceof Jo?r=r.concat(s.members):r.push(s))}return Jo.from(r)}eq(e){if(!(e instanceof Jo)||e.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(e.members[n]))return!1;return!0}locals(e){let n,r=!0;for(let o=0;o<this.members.length;o++){let s=this.members[o].localsInner(e);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let l=0;l<s.length;l++)n.push(s[l])}}return n?$0(r?n:n.sort(ia)):hl}static from(e){switch(e.length){case 0:return Un;case 1:return e[0];default:return new Jo(e.every(n=>n instanceof $t)?e:e.reduce((n,r)=>n.concat(r instanceof $t?r:r.members),[]))}}forEachSet(e){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(e)}}function rI(t,e,n,r,o,s,l){let u=t.slice();for(let h=0,p=s;h<n.maps.length;h++){let g=0;n.maps[h].forEach((y,x,S,E)=>{let k=E-S-(x-y);for(let w=0;w<u.length;w+=3){let C=u[w+1];if(C<0||y>C+p-g)continue;let _=u[w]+p-g;x>=_?u[w+1]=y<=_?-2:-1:y>=p&&k&&(u[w]+=k,u[w+1]+=k)}g+=k}),p=n.maps[h].map(p,-1)}let d=!1;for(let h=0;h<u.length;h+=3)if(u[h+1]<0){if(u[h+1]==-2){d=!0,u[h+1]=-1;continue}let p=n.map(t[h]+s),g=p-o;if(g<0||g>=r.content.size){d=!0;continue}let y=n.map(t[h+1]+s,-1),x=y-o,{index:S,offset:E}=r.content.findIndex(g),k=r.maybeChild(S);if(k&&E==g&&E+k.nodeSize==x){let w=u[h+2].mapInner(n,k,p+1,t[h]+s+1,l);w!=Un?(u[h]=g,u[h+1]=x,u[h+2]=w):(u[h+1]=-2,d=!0)}else d=!0}if(d){let h=iI(u,t,e,n,o,s,l),p=Qf(h,r,0,l);e=p.local;for(let g=0;g<u.length;g+=3)u[g+1]<0&&(u.splice(g,3),g-=3);for(let g=0,y=0;g<p.children.length;g+=3){let x=p.children[g];for(;y<u.length&&u[y]<x;)y+=3;u.splice(y,0,p.children[g],p.children[g+1],p.children[g+2])}}return new $t(e.sort(ia),u)}function Ww(t,e){if(!e||!t.length)return t;let n=[];for(let r=0;r<t.length;r++){let o=t[r];n.push(new Jn(o.from+e,o.to+e,o.type))}return n}function iI(t,e,n,r,o,s,l){function u(d,h){for(let p=0;p<d.local.length;p++){let g=d.local[p].map(r,o,h);g?n.push(g):l.onRemove&&l.onRemove(d.local[p].spec)}for(let p=0;p<d.children.length;p+=3)u(d.children[p+2],d.children[p]+h+1)}for(let d=0;d<t.length;d+=3)t[d+1]==-1&&u(t[d+2],e[d]+s+1);return n}function Gw(t,e,n){if(e.isLeaf)return null;let r=n+e.nodeSize,o=null;for(let s=0,l;s<t.length;s++)(l=t[s])&&l.from>n&&l.to<r&&((o||(o=[])).push(l),t[s]=null);return o}function $w(t){let e=[];for(let n=0;n<t.length;n++)t[n]!=null&&e.push(t[n]);return e}function Qf(t,e,n,r){let o=[],s=!1;e.forEach((u,d)=>{let h=Gw(t,u,d+n);if(h){s=!0;let p=Qf(h,u,n+d+1,r);p!=Un&&o.push(d,d+u.nodeSize,p)}});let l=Ww(s?$w(t):t,-n).sort(ia);for(let u=0;u<l.length;u++)l[u].type.valid(e,l[u])||(r.onRemove&&r.onRemove(l[u].spec),l.splice(u--,1));return l.length||o.length?new $t(l,o):Un}function ia(t,e){return t.from-e.from||t.to-e.to}function $0(t){let e=t;for(let n=0;n<e.length-1;n++){let r=e[n];if(r.from!=r.to)for(let o=n+1;o<e.length;o++){let s=e[o];if(s.from==r.from){s.to!=r.to&&(e==t&&(e=t.slice()),e[o]=s.copy(s.from,r.to),ck(e,o+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,s.from),ck(e,o,r.copy(s.from,r.to)));break}}}return e}function ck(t,e,n){for(;e<t.length&&ia(n,t[e])>0;)e++;t.splice(e,0,n)}function Hg(t){let e=[];return t.someProp("decorations",n=>{let r=n(t.state);r&&r!=Un&&e.push(r)}),t.cursorWrapper&&e.push($t.create(t.state.doc,[t.cursorWrapper.deco])),Jo.from(e)}const oI={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},sI=dr&&us<=11;class aI{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class lI{constructor(e,n){this.view=e,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new aI,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let o=0;o<r.length;o++)this.queue.push(r[o]);dr&&us<=11&&r.some(o=>o.type=="childList"&&o.removedNodes.length||o.type=="characterData"&&o.oldValue.length>o.target.nodeValue.length)?this.flushSoon():Ln&&e.composing&&r.some(o=>o.type=="childList"&&o.target.nodeName=="TR")?(e.input.badSafariComposition=!0,this.flushSoon()):this.flush()}),sI&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,oI)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let n=0;n<e.length;n++)this.queue.push(e[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(tk(this.view)){if(this.suppressingSelectionUpdates)return ro(this.view);if(dr&&us<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&ca(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let n=new Set,r;for(let s=e.focusNode;s;s=Al(s))n.add(s);for(let s=e.anchorNode;s;s=Al(s))if(n.has(s)){r=s;break}let o=r&&this.view.docView.nearestDesc(r);if(o&&o.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=e.domSelectionRange(),o=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&tk(e)&&!this.ignoreSelectionChange(r),s=-1,l=-1,u=!1,d=[];if(e.editable)for(let p=0;p<n.length;p++){let g=this.registerMutation(n[p],d);g&&(s=s<0?g.from:Math.min(g.from,s),l=l<0?g.to:Math.max(g.to,l),g.typeOver&&(u=!0))}if(Ur&&d.length){let p=d.filter(g=>g.nodeName=="BR");if(p.length==2){let[g,y]=p;g.parentNode&&g.parentNode.parentNode==y.parentNode?y.remove():g.remove()}else{let{focusNode:g}=this.currentSelection;for(let y of p){let x=y.parentNode;x&&x.nodeName=="LI"&&(!g||dI(e,g)!=x)&&y.remove()}}}else if((En||Ln)&&d.some(p=>p.nodeName=="BR")&&(e.input.lastKeyCode==8||e.input.lastKeyCode==46)){for(let p of d)if(p.nodeName=="BR"&&p.parentNode){let g=p.nextSibling;g&&g.nodeType==1&&g.contentEditable=="false"&&p.parentNode.removeChild(p)}}let h=null;s<0&&o&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&Gh(r)&&(h=U0(e))&&h.eq(Je.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,ro(e),this.currentSelection.set(r),e.scrollToSelection()):(s>-1||o)&&(s>-1&&(e.docView.markDirty(s,l),cI(e)),e.input.badSafariComposition&&(e.input.badSafariComposition=!1,fI(e,d)),this.handleDOMChange(s,l,u,d),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||ro(e),this.currentSelection.set(r))}registerMutation(e,n){if(n.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let p=0;p<e.addedNodes.length;p++){let g=e.addedNodes[p];n.push(g),g.nodeType==3&&(this.lastChangedTextNode=g)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let o=e.previousSibling,s=e.nextSibling;if(dr&&us<=11&&e.addedNodes.length)for(let p=0;p<e.addedNodes.length;p++){let{previousSibling:g,nextSibling:y}=e.addedNodes[p];(!g||Array.prototype.indexOf.call(e.addedNodes,g)<0)&&(o=g),(!y||Array.prototype.indexOf.call(e.addedNodes,y)<0)&&(s=y)}let l=o&&o.parentNode==e.target?Nn(o)+1:0,u=r.localPosFromDOM(e.target,l,-1),d=s&&s.parentNode==e.target?Nn(s):e.target.childNodes.length,h=r.localPosFromDOM(e.target,d,1);return{from:u,to:h}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let uk=new WeakMap,dk=!1;function cI(t){if(!uk.has(t)&&(uk.set(t,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(t.dom).whiteSpace)!==-1)){if(t.requiresGeckoHackNode=Ur,dk)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),dk=!0}}function fk(t,e){let n=e.startContainer,r=e.startOffset,o=e.endContainer,s=e.endOffset,l=t.domAtPos(t.state.selection.anchor);return ca(l.node,l.offset,o,s)&&([n,r,o,s]=[o,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:o,focusOffset:s}}function uI(t,e){if(e.getComposedRanges){let o=e.getComposedRanges(t.root)[0];if(o)return fk(t,o)}let n;function r(o){o.preventDefault(),o.stopImmediatePropagation(),n=o.getTargetRanges()[0]}return t.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),t.dom.removeEventListener("beforeinput",r,!0),n?fk(t,n):null}function dI(t,e){for(let n=e.parentNode;n&&n!=t.dom;n=n.parentNode){let r=t.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function fI(t,e){var n;let{focusNode:r,focusOffset:o}=t.domSelectionRange();for(let s of e)if(((n=s.parentNode)===null||n===void 0?void 0:n.nodeName)=="TR"){let l=s.nextSibling;for(;l&&l.nodeName!="TD"&&l.nodeName!="TH";)l=l.nextSibling;if(l){let u=l;for(;;){let d=u.firstChild;if(!d||d.nodeType!=1||d.contentEditable=="false"||/^(BR|IMG)$/.test(d.nodeName))break;u=d}u.insertBefore(s,u.firstChild),r==s&&t.domSelection().collapse(s,o)}else s.parentNode.removeChild(s)}}function hI(t,e,n){let{node:r,fromOffset:o,toOffset:s,from:l,to:u}=t.docView.parseRange(e,n),d=t.domSelectionRange(),h,p=d.anchorNode;if(p&&t.dom.contains(p.nodeType==1?p:p.parentNode)&&(h=[{node:p,offset:d.anchorOffset}],Gh(d)||h.push({node:d.focusNode,offset:d.focusOffset})),En&&t.input.lastKeyCode===8)for(let k=s;k>o;k--){let w=r.childNodes[k-1],C=w.pmViewDesc;if(w.nodeName=="BR"&&!C){s=k;break}if(!C||C.size)break}let g=t.state.doc,y=t.someProp("domParser")||cs.fromSchema(t.state.schema),x=g.resolve(l),S=null,E=y.parse(r,{topNode:x.parent,topMatch:x.parent.contentMatchAt(x.index()),topOpen:!0,from:o,to:s,preserveWhitespace:x.parent.type.whitespace=="pre"?"full":!0,findPositions:h,ruleFromNode:pI,context:x});if(h&&h[0].pos!=null){let k=h[0].pos,w=h[1]&&h[1].pos;w==null&&(w=k),S={anchor:k+l,head:w+l}}return{doc:E,sel:S,from:l,to:u}}function pI(t){let e=t.pmViewDesc;if(e)return e.parseRule();if(t.nodeName=="BR"&&t.parentNode){if(Ln&&/^(ul|ol)$/i.test(t.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(t.parentNode.lastChild==t||Ln&&/^(tr|table)$/i.test(t.parentNode.nodeName))return{ignore:!0}}else if(t.nodeName=="IMG"&&t.getAttribute("mark-placeholder"))return{ignore:!0};return null}const mI=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function gI(t,e,n,r,o){let s=t.input.compositionPendingChanges||(t.composing?t.input.compositionID:0);if(t.input.compositionPendingChanges=0,e<0){let B=t.input.lastSelectionTime>Date.now()-50?t.input.lastSelectionOrigin:null,K=U0(t,B);if(K&&!t.state.selection.eq(K)){if(En&&eo&&t.input.lastKeyCode===13&&Date.now()-100<t.input.lastKeyCodeTime&&t.someProp("handleKeyDown",J=>J(t,$s(13,"Enter"))))return;let W=t.state.tr.setSelection(K);B=="pointer"?W.setMeta("pointer",!0):B=="key"&&W.scrollIntoView(),s&&W.setMeta("composition",s),t.dispatch(W)}return}let l=t.state.doc.resolve(e),u=l.sharedDepth(n);e=l.before(u+1),n=t.state.doc.resolve(n).after(u+1);let d=t.state.selection,h=hI(t,e,n),p=t.state.doc,g=p.slice(h.from,h.to),y,x;t.input.lastKeyCode===8&&Date.now()-100<t.input.lastKeyCodeTime?(y=t.state.selection.to,x="end"):(y=t.state.selection.from,x="start"),t.input.lastKeyCode=null;let S=bI(g.content,h.doc.content,h.from,y,x);if(S&&t.input.domChangeCount++,(_l&&t.input.lastIOSEnter>Date.now()-225||eo)&&o.some(B=>B.nodeType==1&&!mI.test(B.nodeName))&&(!S||S.endA>=S.endB)&&t.someProp("handleKeyDown",B=>B(t,$s(13,"Enter")))){t.input.lastIOSEnter=0;return}if(!S)if(r&&d instanceof Ve&&!d.empty&&d.$head.sameParent(d.$anchor)&&!t.composing&&!(h.sel&&h.sel.anchor!=h.sel.head))S={start:d.from,endA:d.to,endB:d.to};else{if(h.sel){let B=hk(t,t.state.doc,h.sel);if(B&&!B.eq(t.state.selection)){let K=t.state.tr.setSelection(B);s&&K.setMeta("composition",s),t.dispatch(K)}}return}t.state.selection.from<t.state.selection.to&&S.start==S.endB&&t.state.selection instanceof Ve&&(S.start>t.state.selection.from&&S.start<=t.state.selection.from+2&&t.state.selection.from>=h.from?S.start=t.state.selection.from:S.endA<t.state.selection.to&&S.endA>=t.state.selection.to-2&&t.state.selection.to<=h.to&&(S.endB+=t.state.selection.to-S.endA,S.endA=t.state.selection.to)),dr&&us<=11&&S.endB==S.start+1&&S.endA==S.start&&S.start>h.from&&h.doc.textBetween(S.start-h.from-1,S.start-h.from+1)==" "&&(S.start--,S.endA--,S.endB--);let E=h.doc.resolveNoCache(S.start-h.from),k=h.doc.resolveNoCache(S.endB-h.from),w=p.resolve(S.start),C=E.sameParent(k)&&E.parent.inlineContent&&w.end()>=S.endA;if((_l&&t.input.lastIOSEnter>Date.now()-225&&(!C||o.some(B=>B.nodeName=="DIV"||B.nodeName=="P"))||!C&&E.pos<h.doc.content.size&&(!E.sameParent(k)||!E.parent.inlineContent)&&E.pos<k.pos&&!/\S/.test(h.doc.textBetween(E.pos,k.pos,"","")))&&t.someProp("handleKeyDown",B=>B(t,$s(13,"Enter")))){t.input.lastIOSEnter=0;return}if(t.state.selection.anchor>S.start&&yI(p,S.start,S.endA,E,k)&&t.someProp("handleKeyDown",B=>B(t,$s(8,"Backspace")))){eo&&En&&t.domObserver.suppressSelectionUpdates();return}En&&S.endB==S.start&&(t.input.lastChromeDelete=Date.now()),eo&&!C&&E.start()!=k.start()&&k.parentOffset==0&&E.depth==k.depth&&h.sel&&h.sel.anchor==h.sel.head&&h.sel.head==S.endA&&(S.endB-=2,k=h.doc.resolveNoCache(S.endB-h.from),setTimeout(()=>{t.someProp("handleKeyDown",function(B){return B(t,$s(13,"Enter"))})},20));let _=S.start,R=S.endA,j=B=>{let K=B||t.state.tr.replace(_,R,h.doc.slice(S.start-h.from,S.endB-h.from));if(h.sel){let W=hk(t,K.doc,h.sel);W&&!(En&&t.composing&&W.empty&&(S.start!=S.endB||t.input.lastChromeDelete<Date.now()-100)&&(W.head==_||W.head==K.mapping.map(R)-1)||dr&&W.empty&&W.head==_)&&K.setSelection(W)}return s&&K.setMeta("composition",s),K.scrollIntoView()},z;if(C)if(E.pos==k.pos){dr&&us<=11&&E.parentOffset==0&&(t.domObserver.suppressSelectionUpdates(),setTimeout(()=>ro(t),20));let B=j(t.state.tr.delete(_,R)),K=p.resolve(S.start).marksAcross(p.resolve(S.endA));K&&B.ensureMarks(K),t.dispatch(B)}else if(S.endA==S.endB&&(z=vI(E.parent.content.cut(E.parentOffset,k.parentOffset),w.parent.content.cut(w.parentOffset,S.endA-w.start())))){let B=j(t.state.tr);z.type=="add"?B.addMark(_,R,z.mark):B.removeMark(_,R,z.mark),t.dispatch(B)}else if(E.parent.child(E.index()).isText&&E.index()==k.index()-(k.textOffset?0:1)){let B=E.parent.textBetween(E.parentOffset,k.parentOffset),K=()=>j(t.state.tr.insertText(B,_,R));t.someProp("handleTextInput",W=>W(t,_,R,B,K))||t.dispatch(K())}else t.dispatch(j());else t.dispatch(j())}function hk(t,e,n){return Math.max(n.anchor,n.head)>e.content.size?null:H0(t,e.resolve(n.anchor),e.resolve(n.head))}function vI(t,e){let n=t.firstChild.marks,r=e.firstChild.marks,o=n,s=r,l,u,d;for(let p=0;p<r.length;p++)o=r[p].removeFromSet(o);for(let p=0;p<n.length;p++)s=n[p].removeFromSet(s);if(o.length==1&&s.length==0)u=o[0],l="add",d=p=>p.mark(u.addToSet(p.marks));else if(o.length==0&&s.length==1)u=s[0],l="remove",d=p=>p.mark(u.removeFromSet(p.marks));else return null;let h=[];for(let p=0;p<e.childCount;p++)h.push(d(e.child(p)));if(oe.from(h).eq(t))return{mark:u,type:l}}function yI(t,e,n,r,o){if(n-e<=o.pos-r.pos||qg(r,!0,!1)<o.pos)return!1;let s=t.resolve(e);if(!r.parent.isTextblock){let u=s.nodeAfter;return u!=null&&n==e+u.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let l=t.resolve(qg(s,!0,!0));return!l.parent.isTextblock||l.pos>n||qg(l,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(l.parent.content)}function qg(t,e,n){let r=t.depth,o=e?t.end():t.pos;for(;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,o++,e=!1;if(n){let s=t.node(r).maybeChild(t.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,o++}return o}function bI(t,e,n,r,o){let s=t.findDiffStart(e,n);if(s==null)return null;let{a:l,b:u}=t.findDiffEnd(e,n+t.size,n+e.size);if(o=="end"){let d=Math.max(0,s-Math.min(l,u));r-=l+d-s}if(l<s&&t.size<e.size){let d=r<=s&&r>=l?s-r:0;s-=d,s&&s<e.size&&pk(e.textBetween(s-1,s+1))&&(s+=d?1:-1),u=s+(u-l),l=s}else if(u<s){let d=r<=s&&r>=u?s-r:0;s-=d,s&&s<t.size&&pk(t.textBetween(s-1,s+1))&&(s+=d?1:-1),l=s+(l-u),u=s}return{start:s,endA:l,endB:u}}function pk(t){if(t.length!=2)return!1;let e=t.charCodeAt(0),n=t.charCodeAt(1);return e>=56320&&e<=57343&&n>=55296&&n<=56319}class Kw{constructor(e,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new Lz,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(bk),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=vk(this),gk(this),this.nodeViews=yk(this),this.docView=YE(this.state.doc,mk(this),Hg(this),this.dom,this),this.domObserver=new lI(this,(r,o,s,l)=>gI(this,r,o,s,l)),this.domObserver.start(),zz(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let n in e)this._props[n]=e[n];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&Vv(this);let n=this._props;this._props=e,e.plugins&&(e.plugins.forEach(bk),this.directPlugins=e.plugins),this.updateStateInner(e.state,n)}setProps(e){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in e)n[r]=e[r];this.update(n)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,n){var r;let o=this.state,s=!1,l=!1;e.storedMarks&&this.composing&&(Hw(this),l=!0),this.state=e;let u=o.plugins!=e.plugins||this._props.plugins!=n.plugins;if(u||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let x=yk(this);SI(x,this.nodeViews)&&(this.nodeViews=x,s=!0)}(u||n.handleDOMEvents!=this._props.handleDOMEvents)&&Vv(this),this.editable=vk(this),gk(this);let d=Hg(this),h=mk(this),p=o.plugins!=e.plugins&&!o.doc.eq(e.doc)?"reset":e.scrollToSelection>o.scrollToSelection?"to selection":"preserve",g=s||!this.docView.matchesNode(e.doc,h,d);(g||!e.selection.eq(o.selection))&&(l=!0);let y=p=="preserve"&&l&&this.dom.style.overflowAnchor==null&&XL(this);if(l){this.domObserver.stop();let x=g&&(dr||En)&&!this.composing&&!o.selection.empty&&!e.selection.empty&&xI(o.selection,e.selection);if(g){let S=En?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=Xz(this)),(s||!this.docView.update(e.doc,h,d,this))&&(this.docView.updateOuterDeco(h),this.docView.destroy(),this.docView=YE(e.doc,h,d,this.dom,this)),S&&(!this.trackWrites||!this.dom.contains(this.trackWrites))&&(x=!0)}x||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&xz(this))?ro(this,x):(Mw(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(o),!((r=this.dragging)===null||r===void 0)&&r.node&&!o.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,o),p=="reset"?this.dom.scrollTop=0:p=="to selection"?this.scrollToSelection():y&&JL(y)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof Ie){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&VE(this,n.getBoundingClientRect(),e)}else VE(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,e)}}updateDraggedNode(e,n){let r=e.node,o=-1;if(this.state.doc.nodeAt(r.from)==r.node)o=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(o=s)}this.dragging=new Vw(e.slice,e.move,o<0?void 0:Ie.create(this.state.doc,o))}someProp(e,n){let r=this._props&&this._props[e],o;if(r!=null&&(o=n?n(r):r))return o;for(let l=0;l<this.directPlugins.length;l++){let u=this.directPlugins[l].props[e];if(u!=null&&(o=n?n(u):u))return o}let s=this.state.plugins;if(s)for(let l=0;l<s.length;l++){let u=s[l].props[e];if(u!=null&&(o=n?n(u):u))return o}}hasFocus(){if(dr){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&QL(this.dom),ro(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return e||document}updateRoot(){this._root=null}posAtCoords(e){return rz(this,e)}coordsAtPos(e,n=1){return Sw(this,e,n)}domAtPos(e,n=0){return this.docView.domFromPos(e,n)}nodeDOM(e){let n=this.docView.descAt(e);return n?n.nodeDOM:null}posAtDOM(e,n,r=-1){let o=this.docView.posFromDOM(e,n,r);if(o==null)throw new RangeError("DOM position not inside the editor");return o}endOfTextblock(e,n){return lz(this,n||this.state,e)}pasteHTML(e,n){return gu(this,"",e,!1,n||new ClipboardEvent("paste"))}pasteText(e,n){return gu(this,e,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(e){return q0(this,e)}destroy(){this.docView&&(Iz(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],Hg(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,UL())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return Pz(this,e)}domSelectionRange(){let e=this.domSelection();return e?Ln&&this.root.nodeType===11&&WL(this.dom.ownerDocument)==this.dom&&uI(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}Kw.prototype.dispatch=function(t){let e=this._props.dispatchTransaction;e?e.call(this,t):this.updateState(this.state.apply(t))};function mk(t){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(t.editable),t.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(t.state)),n)for(let r in n)r=="class"?e.class+=" "+n[r]:r=="style"?e.style=(e.style?e.style+";":"")+n[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(n[r]))}),e.translate||(e.translate="no"),[Jn.node(0,t.state.doc.content.size,e)]}function gk(t){if(t.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),t.cursorWrapper={dom:e,deco:Jn.widget(t.state.selection.from,e,{raw:!0,marks:t.markCursor})}}else t.cursorWrapper=null}function vk(t){return!t.someProp("editable",e=>e(t.state)===!1)}function xI(t,e){let n=Math.min(t.$anchor.sharedDepth(t.head),e.$anchor.sharedDepth(e.head));return t.$anchor.start(n)!=e.$anchor.start(n)}function yk(t){let e=Object.create(null);function n(r){for(let o in r)Object.prototype.hasOwnProperty.call(e,o)||(e[o]=r[o])}return t.someProp("nodeViews",n),t.someProp("markViews",n),e}function SI(t,e){let n=0,r=0;for(let o in t){if(t[o]!=e[o])return!0;n++}for(let o in e)r++;return n!=r}function bk(t){if(t.spec.state||t.spec.filterTransaction||t.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var hs={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Zf={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},EI=typeof navigator<"u"&&/Mac/.test(navigator.platform),kI=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Dn=0;Dn<10;Dn++)hs[48+Dn]=hs[96+Dn]=String(Dn);for(var Dn=1;Dn<=24;Dn++)hs[Dn+111]="F"+Dn;for(var Dn=65;Dn<=90;Dn++)hs[Dn]=String.fromCharCode(Dn+32),Zf[Dn]=String.fromCharCode(Dn);for(var Vg in hs)Zf.hasOwnProperty(Vg)||(Zf[Vg]=hs[Vg]);function TI(t){var e=EI&&t.metaKey&&t.shiftKey&&!t.ctrlKey&&!t.altKey||kI&&t.shiftKey&&t.key&&t.key.length==1||t.key=="Unidentified",n=!e&&t.key||(t.shiftKey?Zf:hs)[t.keyCode]||t.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const wI=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),CI=typeof navigator<"u"&&/Win/.test(navigator.platform);function AI(t){let e=t.split(/-(?!$)/),n=e[e.length-1];n=="Space"&&(n=" ");let r,o,s,l;for(let u=0;u<e.length-1;u++){let d=e[u];if(/^(cmd|meta|m)$/i.test(d))l=!0;else if(/^a(lt)?$/i.test(d))r=!0;else if(/^(c|ctrl|control)$/i.test(d))o=!0;else if(/^s(hift)?$/i.test(d))s=!0;else if(/^mod$/i.test(d))wI?l=!0:o=!0;else throw new Error("Unrecognized modifier name: "+d)}return r&&(n="Alt-"+n),o&&(n="Ctrl-"+n),l&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function _I(t){let e=Object.create(null);for(let n in t)e[AI(n)]=t[n];return e}function Fg(t,e,n=!0){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),n&&e.shiftKey&&(t="Shift-"+t),t}function MI(t){return new Kt({props:{handleKeyDown:Yw(t)}})}function Yw(t){let e=_I(t);return function(n,r){let o=TI(r),s,l=e[Fg(o,r)];if(l&&l(n.state,n.dispatch,n))return!0;if(o.length==1&&o!=" "){if(r.shiftKey){let u=e[Fg(o,r,!1)];if(u&&u(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(CI&&r.ctrlKey&&r.altKey)&&(s=hs[r.keyCode])&&s!=o){let u=e[Fg(s,r)];if(u&&u(n.state,n.dispatch,n))return!0}}return!1}}var OI=Object.defineProperty,K0=(t,e)=>{for(var n in e)OI(t,n,{get:e[n],enumerable:!0})};function Yh(t){const{state:e,transaction:n}=t;let{selection:r}=n,{doc:o}=n,{storedMarks:s}=n;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return s},get selection(){return r},get doc(){return o},get tr(){return r=n.selection,o=n.doc,s=n.storedMarks,n}}}var Xh=class{constructor(t){this.editor=t.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=t.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:t,editor:e,state:n}=this,{view:r}=e,{tr:o}=n,s=this.buildProps(o);return Object.fromEntries(Object.entries(t).map(([l,u])=>[l,(...h)=>{const p=u(...h)(s);return!o.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(o),p}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(t,e=!0){const{rawCommands:n,editor:r,state:o}=this,{view:s}=r,l=[],u=!!t,d=t||o.tr,h=()=>(!u&&e&&!d.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(d),l.every(g=>g===!0)),p={...Object.fromEntries(Object.entries(n).map(([g,y])=>[g,(...S)=>{const E=this.buildProps(d,e),k=y(...S)(E);return l.push(k),p}])),run:h};return p}createCan(t){const{rawCommands:e,state:n}=this,r=!1,o=t||n.tr,s=this.buildProps(o,r);return{...Object.fromEntries(Object.entries(e).map(([u,d])=>[u,(...h)=>d(...h)({...s,dispatch:void 0})])),chain:()=>this.createChain(o,r)}}buildProps(t,e=!0){const{rawCommands:n,editor:r,state:o}=this,{view:s}=r,l={tr:t,editor:r,view:s,state:Yh({state:o,transaction:t}),dispatch:e?()=>{}:void 0,chain:()=>this.createChain(t,e),can:()=>this.createCan(t),get commands(){return Object.fromEntries(Object.entries(n).map(([u,d])=>[u,(...h)=>d(...h)(l)]))}};return l}},Xw={};K0(Xw,{blur:()=>jI,clearContent:()=>RI,clearNodes:()=>NI,command:()=>DI,createParagraphNear:()=>LI,cut:()=>zI,deleteCurrentNode:()=>II,deleteNode:()=>BI,deleteRange:()=>PI,deleteSelection:()=>UI,enter:()=>HI,exitCode:()=>qI,extendMarkRange:()=>VI,first:()=>FI,focus:()=>GI,forEach:()=>$I,insertContent:()=>KI,insertContentAt:()=>JI,joinBackward:()=>e6,joinDown:()=>ZI,joinForward:()=>t6,joinItemBackward:()=>n6,joinItemForward:()=>r6,joinTextblockBackward:()=>i6,joinTextblockForward:()=>o6,joinUp:()=>QI,keyboardShortcut:()=>a6,lift:()=>l6,liftEmptyBlock:()=>c6,liftListItem:()=>u6,newlineInCode:()=>d6,resetAttributes:()=>f6,scrollIntoView:()=>h6,selectAll:()=>p6,selectNodeBackward:()=>m6,selectNodeForward:()=>g6,selectParentNode:()=>v6,selectTextblockEnd:()=>y6,selectTextblockStart:()=>b6,setContent:()=>x6,setMark:()=>U6,setMeta:()=>H6,setNode:()=>q6,setNodeSelection:()=>V6,setTextDirection:()=>F6,setTextSelection:()=>W6,sinkListItem:()=>G6,splitBlock:()=>$6,splitListItem:()=>K6,toggleList:()=>Y6,toggleMark:()=>X6,toggleNode:()=>J6,toggleWrap:()=>Q6,undoInputRule:()=>Z6,unsetAllMarks:()=>eB,unsetMark:()=>tB,unsetTextDirection:()=>nB,updateAttributes:()=>rB,wrapIn:()=>iB,wrapInList:()=>oB});var jI=()=>({editor:t,view:e})=>(requestAnimationFrame(()=>{var n;t.isDestroyed||(e.dom.blur(),(n=window?.getSelection())==null||n.removeAllRanges())}),!0),RI=(t=!0)=>({commands:e})=>e.setContent("",{emitUpdate:t}),NI=()=>({state:t,tr:e,dispatch:n})=>{const{selection:r}=e,{ranges:o}=r;return n&&o.forEach(({$from:s,$to:l})=>{t.doc.nodesBetween(s.pos,l.pos,(u,d)=>{if(u.type.isText)return;const{doc:h,mapping:p}=e,g=h.resolve(p.map(d)),y=h.resolve(p.map(d+u.nodeSize)),x=g.blockRange(y);if(!x)return;const S=zl(x);if(u.type.isTextblock){const{defaultType:E}=g.parent.contentMatchAt(g.index());e.setNodeMarkup(x.start,E)}(S||S===0)&&e.lift(x,S)})}),!0},DI=t=>e=>t(e),LI=()=>({state:t,dispatch:e})=>uw(t,e),zI=(t,e)=>({editor:n,tr:r})=>{const{state:o}=n,s=o.doc.slice(t.from,t.to);r.deleteRange(t.from,t.to);const l=r.mapping.map(e);return r.insert(l,s.content),r.setSelection(new Ve(r.doc.resolve(Math.max(l-1,0)))),!0},II=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,r=n.$anchor.node();if(r.content.size>0)return!1;const o=t.selection.$anchor;for(let s=o.depth;s>0;s-=1)if(o.node(s).type===r.type){if(e){const u=o.before(s),d=o.after(s);t.delete(u,d).scrollIntoView()}return!0}return!1};function hn(t,e){if(typeof t=="string"){if(!e.nodes[t])throw Error(`There is no node type named '${t}'. Maybe you forgot to add the extension?`);return e.nodes[t]}return t}var BI=t=>({tr:e,state:n,dispatch:r})=>{const o=hn(t,n.schema),s=e.selection.$anchor;for(let l=s.depth;l>0;l-=1)if(s.node(l).type===o){if(r){const d=s.before(l),h=s.after(l);e.delete(d,h).scrollIntoView()}return!0}return!1},PI=t=>({tr:e,dispatch:n})=>{const{from:r,to:o}=t;return n&&e.delete(r,o),!0},UI=()=>({state:t,dispatch:e})=>D0(t,e),HI=()=>({commands:t})=>t.keyboardShortcut("Enter"),qI=()=>({state:t,dispatch:e})=>wL(t,e);function Y0(t){return Object.prototype.toString.call(t)==="[object RegExp]"}function eh(t,e,n={strict:!0}){const r=Object.keys(e);return r.length?r.every(o=>n.strict?e[o]===t[o]:Y0(e[o])?e[o].test(t[o]):e[o]===t[o]):!0}function Jw(t,e,n={}){return t.find(r=>r.type===e&&eh(Object.fromEntries(Object.keys(n).map(o=>[o,r.attrs[o]])),n))}function xk(t,e,n={}){return!!Jw(t,e,n)}function X0(t,e,n){var r;if(!t||!e)return;let o=t.parent.childAfter(t.parentOffset);if((!o.node||!o.node.marks.some(p=>p.type===e))&&(o=t.parent.childBefore(t.parentOffset)),!o.node||!o.node.marks.some(p=>p.type===e)||(n=n||((r=o.node.marks[0])==null?void 0:r.attrs),!Jw([...o.node.marks],e,n)))return;let l=o.index,u=t.start()+o.offset,d=l+1,h=u+o.node.nodeSize;for(;l>0&&xk([...t.parent.child(l-1).marks],e,n);)l-=1,u-=t.parent.child(l).nodeSize;for(;d<t.parent.childCount&&xk([...t.parent.child(d).marks],e,n);)h+=t.parent.child(d).nodeSize,d+=1;return{from:u,to:h}}function so(t,e){if(typeof t=="string"){if(!e.marks[t])throw Error(`There is no mark type named '${t}'. Maybe you forgot to add the extension?`);return e.marks[t]}return t}var VI=(t,e={})=>({tr:n,state:r,dispatch:o})=>{const s=so(t,r.schema),{doc:l,selection:u}=n,{$from:d,from:h,to:p}=u;if(o){const g=X0(d,s,e);if(g&&g.from<=h&&g.to>=p){const y=Ve.create(l,g.from,g.to);n.setSelection(y)}}return!0},FI=t=>e=>{const n=typeof t=="function"?t(e):t;for(let r=0;r<n.length;r+=1)if(n[r](e))return!0;return!1};function Qw(t){return t instanceof Ve}function Js(t=0,e=0,n=0){return Math.min(Math.max(t,e),n)}function Zw(t,e=null){if(!e)return null;const n=Je.atStart(t),r=Je.atEnd(t);if(e==="start"||e===!0)return n;if(e==="end")return r;const o=n.from,s=r.to;return e==="all"?Ve.create(t,Js(0,o,s),Js(t.content.size,o,s)):Ve.create(t,Js(e,o,s),Js(e,o,s))}function Sk(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function th(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}function WI(){return typeof navigator<"u"?/^((?!chrome|android).)*safari/i.test(navigator.userAgent):!1}var GI=(t=null,e={})=>({editor:n,view:r,tr:o,dispatch:s})=>{e={scrollIntoView:!0,...e};const l=()=>{(th()||Sk())&&r.dom.focus(),WI()&&!th()&&!Sk()&&r.dom.focus({preventScroll:!0}),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),e?.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&t===null||t===!1)return!0;if(s&&t===null&&!Qw(n.state.selection))return l(),!0;const u=Zw(o.doc,t)||n.state.selection,d=n.state.selection.eq(u);return s&&(d||o.setSelection(u),d&&o.storedMarks&&o.setStoredMarks(o.storedMarks),l()),!0},$I=(t,e)=>n=>t.every((r,o)=>e(r,{...n,index:o})),KI=(t,e)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},t,e),eC=t=>{const e=t.childNodes;for(let n=e.length-1;n>=0;n-=1){const r=e[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?t.removeChild(r):r.nodeType===1&&eC(r)}return t};function lf(t){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const e=`<body>${t}</body>`,n=new window.DOMParser().parseFromString(e,"text/html").body;return eC(n)}function yu(t,e,n){if(t instanceof ti||t instanceof oe)return t;n={slice:!0,parseOptions:{},...n};const r=typeof t=="object"&&t!==null,o=typeof t=="string";if(r)try{if(Array.isArray(t)&&t.length>0)return oe.fromArray(t.map(u=>e.nodeFromJSON(u)));const l=e.nodeFromJSON(t);return n.errorOnInvalidContent&&l.check(),l}catch(s){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",t,"Error:",s),yu("",e,n)}if(o){if(n.errorOnInvalidContent){let l=!1,u="";const d=new I2({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:h=>(l=!0,u=typeof h=="string"?h:h.outerHTML,null)}]}})});if(n.slice?cs.fromSchema(d).parseSlice(lf(t),n.parseOptions):cs.fromSchema(d).parse(lf(t),n.parseOptions),n.errorOnInvalidContent&&l)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${u}`)})}const s=cs.fromSchema(e);return n.slice?s.parseSlice(lf(t),n.parseOptions).content:s.parse(lf(t),n.parseOptions)}return yu("",e,n)}function YI(t,e,n){const r=t.steps.length-1;if(r<e)return;const o=t.steps[r];if(!(o instanceof Sn||o instanceof kn))return;const s=t.mapping.maps[r];let l=0;s.forEach((u,d,h,p)=>{l===0&&(l=p)}),t.setSelection(Je.near(t.doc.resolve(l),n))}var XI=t=>!("type"in t),JI=(t,e,n)=>({tr:r,dispatch:o,editor:s})=>{var l;if(o){n={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let u;const d=k=>{s.emit("contentError",{editor:s,error:k,disableCollaboration:()=>{"collaboration"in s.storage&&typeof s.storage.collaboration=="object"&&s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},h={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{yu(e,s.schema,{parseOptions:h,errorOnInvalidContent:!0})}catch(k){d(k)}try{u=yu(e,s.schema,{parseOptions:h,errorOnInvalidContent:(l=n.errorOnInvalidContent)!=null?l:s.options.enableContentCheck})}catch(k){return d(k),!1}let{from:p,to:g}=typeof t=="number"?{from:t,to:t}:{from:t.from,to:t.to},y=!0,x=!0;if((XI(u)?u:[u]).forEach(k=>{k.check(),y=y?k.isText&&k.marks.length===0:!1,x=x?k.isBlock:!1}),p===g&&x){const{parent:k}=r.doc.resolve(p);k.isTextblock&&!k.type.spec.code&&!k.childCount&&(p-=1,g+=1)}let E;if(y){if(Array.isArray(e))E=e.map(k=>k.text||"").join("");else if(e instanceof oe){let k="";e.forEach(w=>{w.text&&(k+=w.text)}),E=k}else typeof e=="object"&&e&&e.text?E=e.text:E=e;r.insertText(E,p,g)}else{E=u;const k=r.doc.resolve(p),w=k.node(),C=k.parentOffset===0,_=w.isText||w.isTextblock,R=w.content.size>0;C&&_&&R&&(p=Math.max(0,p-1)),r.replaceWith(p,g,E)}n.updateSelection&&YI(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:p,text:E}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:p,text:E})}return!0},QI=()=>({state:t,dispatch:e})=>EL(t,e),ZI=()=>({state:t,dispatch:e})=>kL(t,e),e6=()=>({state:t,dispatch:e})=>rw(t,e),t6=()=>({state:t,dispatch:e})=>aw(t,e),n6=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Vh(t.doc,t.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},r6=()=>({state:t,dispatch:e,tr:n})=>{try{const r=Vh(t.doc,t.selection.$from.pos,1);return r==null?!1:(n.join(r,2),e&&e(n),!0)}catch{return!1}},i6=()=>({state:t,dispatch:e})=>xL(t,e),o6=()=>({state:t,dispatch:e})=>SL(t,e);function tC(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function s6(t){const e=t.split(/-(?!$)/);let n=e[e.length-1];n==="Space"&&(n=" ");let r,o,s,l;for(let u=0;u<e.length-1;u+=1){const d=e[u];if(/^(cmd|meta|m)$/i.test(d))l=!0;else if(/^a(lt)?$/i.test(d))r=!0;else if(/^(c|ctrl|control)$/i.test(d))o=!0;else if(/^s(hift)?$/i.test(d))s=!0;else if(/^mod$/i.test(d))th()||tC()?l=!0:o=!0;else throw new Error(`Unrecognized modifier name: ${d}`)}return r&&(n=`Alt-${n}`),o&&(n=`Ctrl-${n}`),l&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}var a6=t=>({editor:e,view:n,tr:r,dispatch:o})=>{const s=s6(t).split(/-(?!$)/),l=s.find(h=>!["Alt","Ctrl","Meta","Shift"].includes(h)),u=new KeyboardEvent("keydown",{key:l==="Space"?" ":l,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),d=e.captureTransaction(()=>{n.someProp("handleKeyDown",h=>h(n,u))});return d?.steps.forEach(h=>{const p=h.map(r.mapping);p&&o&&r.maybeStep(p)}),!0};function ps(t,e,n={}){const{from:r,to:o,empty:s}=t.selection,l=e?hn(e,t.schema):null,u=[];t.doc.nodesBetween(r,o,(g,y)=>{if(g.isText)return;const x=Math.max(r,y),S=Math.min(o,y+g.nodeSize);u.push({node:g,from:x,to:S})});const d=o-r,h=u.filter(g=>l?l.name===g.node.type.name:!0).filter(g=>eh(g.node.attrs,n,{strict:!1}));return s?!!h.length:h.reduce((g,y)=>g+y.to-y.from,0)>=d}var l6=(t,e={})=>({state:n,dispatch:r})=>{const o=hn(t,n.schema);return ps(n,o,e)?TL(n,r):!1},c6=()=>({state:t,dispatch:e})=>dw(t,e),u6=t=>({state:e,dispatch:n})=>{const r=hn(t,e.schema);return zL(r)(e,n)},d6=()=>({state:t,dispatch:e})=>cw(t,e);function Jh(t,e){return e.nodes[t]?"node":e.marks[t]?"mark":null}function Ek(t,e){const n=typeof e=="string"?[e]:e;return Object.keys(t).reduce((r,o)=>(n.includes(o)||(r[o]=t[o]),r),{})}var f6=(t,e)=>({tr:n,state:r,dispatch:o})=>{let s=null,l=null;const u=Jh(typeof t=="string"?t:t.name,r.schema);if(!u)return!1;u==="node"&&(s=hn(t,r.schema)),u==="mark"&&(l=so(t,r.schema));let d=!1;return n.selection.ranges.forEach(h=>{r.doc.nodesBetween(h.$from.pos,h.$to.pos,(p,g)=>{s&&s===p.type&&(d=!0,o&&n.setNodeMarkup(g,void 0,Ek(p.attrs,e))),l&&p.marks.length&&p.marks.forEach(y=>{l===y.type&&(d=!0,o&&n.addMark(g,g+p.nodeSize,l.create(Ek(y.attrs,e))))})})}),d},h6=()=>({tr:t,dispatch:e})=>(e&&t.scrollIntoView(),!0),p6=()=>({tr:t,dispatch:e})=>{if(e){const n=new Er(t.doc);t.setSelection(n)}return!0},m6=()=>({state:t,dispatch:e})=>ow(t,e),g6=()=>({state:t,dispatch:e})=>lw(t,e),v6=()=>({state:t,dispatch:e})=>_L(t,e),y6=()=>({state:t,dispatch:e})=>jL(t,e),b6=()=>({state:t,dispatch:e})=>OL(t,e);function Fv(t,e,n={},r={}){return yu(t,e,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}var x6=(t,{errorOnInvalidContent:e,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:o,tr:s,dispatch:l,commands:u})=>{const{doc:d}=s;if(r.preserveWhitespace!=="full"){const h=Fv(t,o.schema,r,{errorOnInvalidContent:e??o.options.enableContentCheck});return l&&s.replaceWith(0,d.content.size,h).setMeta("preventUpdate",!n),!0}return l&&s.setMeta("preventUpdate",!n),u.insertContentAt({from:0,to:d.content.size},t,{parseOptions:r,errorOnInvalidContent:e??o.options.enableContentCheck})};function nC(t,e){const n=so(e,t.schema),{from:r,to:o,empty:s}=t.selection,l=[];s?(t.storedMarks&&l.push(...t.storedMarks),l.push(...t.selection.$head.marks())):t.doc.nodesBetween(r,o,d=>{l.push(...d.marks)});const u=l.find(d=>d.type.name===n.name);return u?{...u.attrs}:{}}function rC(t,e){const n=new Z2(t);return e.forEach(r=>{r.steps.forEach(o=>{n.step(o)})}),n}function S6(t){for(let e=0;e<t.edgeCount;e+=1){const{type:n}=t.edge(e);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function E6(t,e,n){const r=[];return t.nodesBetween(e.from,e.to,(o,s)=>{n(o)&&r.push({node:o,pos:s})}),r}function k6(t,e){for(let n=t.depth;n>0;n-=1){const r=t.node(n);if(e(r))return{pos:n>0?t.before(n):0,start:t.start(n),depth:n,node:r}}}function Qh(t){return e=>k6(e.$from,t)}function Ne(t,e,n){return t.config[e]===void 0&&t.parent?Ne(t.parent,e,n):typeof t.config[e]=="function"?t.config[e].bind({...n,parent:t.parent?Ne(t.parent,e,n):null}):t.config[e]}function J0(t){return t.map(e=>{const n={name:e.name,options:e.options,storage:e.storage},r=Ne(e,"addExtensions",n);return r?[e,...J0(r())]:e}).flat(10)}function Q0(t,e){const n=ga.fromSchema(e).serializeFragment(t),o=document.implementation.createHTMLDocument().createElement("div");return o.appendChild(n),o.innerHTML}function iC(t){return typeof t=="function"}function Et(t,e=void 0,...n){return iC(t)?e?t.bind(e)(...n):t(...n):t}function T6(t={}){return Object.keys(t).length===0&&t.constructor===Object}function Ml(t){const e=t.filter(o=>o.type==="extension"),n=t.filter(o=>o.type==="node"),r=t.filter(o=>o.type==="mark");return{baseExtensions:e,nodeExtensions:n,markExtensions:r}}function oC(t){const e=[],{nodeExtensions:n,markExtensions:r}=Ml(t),o=[...n,...r],s={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return t.forEach(l=>{const u={name:l.name,options:l.options,storage:l.storage,extensions:o},d=Ne(l,"addGlobalAttributes",u);if(!d)return;d().forEach(p=>{p.types.forEach(g=>{Object.entries(p.attributes).forEach(([y,x])=>{e.push({type:g,name:y,attribute:{...s,...x}})})})})}),o.forEach(l=>{const u={name:l.name,options:l.options,storage:l.storage},d=Ne(l,"addAttributes",u);if(!d)return;const h=d();Object.entries(h).forEach(([p,g])=>{const y={...s,...g};typeof y?.default=="function"&&(y.default=y.default()),y?.isRequired&&y?.default===void 0&&delete y.default,e.push({type:l.name,name:p,attribute:y})})}),e}function pn(...t){return t.filter(e=>!!e).reduce((e,n)=>{const r={...e};return Object.entries(n).forEach(([o,s])=>{if(!r[o]){r[o]=s;return}if(o==="class"){const u=s?String(s).split(" "):[],d=r[o]?r[o].split(" "):[],h=u.filter(p=>!d.includes(p));r[o]=[...d,...h].join(" ")}else if(o==="style"){const u=s?s.split(";").map(p=>p.trim()).filter(Boolean):[],d=r[o]?r[o].split(";").map(p=>p.trim()).filter(Boolean):[],h=new Map;d.forEach(p=>{const[g,y]=p.split(":").map(x=>x.trim());h.set(g,y)}),u.forEach(p=>{const[g,y]=p.split(":").map(x=>x.trim());h.set(g,y)}),r[o]=Array.from(h.entries()).map(([p,g])=>`${p}: ${g}`).join("; ")}else r[o]=s}),r},{})}function bu(t,e){return e.filter(n=>n.type===t.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(t.attrs)||{}:{[n.name]:t.attrs[n.name]}).reduce((n,r)=>pn(n,r),{})}function w6(t){return typeof t!="string"?t:t.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(t):t==="true"?!0:t==="false"?!1:t}function kk(t,e){return"style"in t?t:{...t,getAttrs:n=>{const r=t.getAttrs?t.getAttrs(n):t.attrs;if(r===!1)return!1;const o=e.reduce((s,l)=>{const u=l.attribute.parseHTML?l.attribute.parseHTML(n):w6(n.getAttribute(l.name));return u==null?s:{...s,[l.name]:u}},{});return{...r,...o}}}}function Tk(t){return Object.fromEntries(Object.entries(t).filter(([e,n])=>e==="attrs"&&T6(n)?!1:n!=null))}function wk(t){var e,n;const r={};return!((e=t?.attribute)!=null&&e.isRequired)&&"default"in(t?.attribute||{})&&(r.default=t.attribute.default),((n=t?.attribute)==null?void 0:n.validate)!==void 0&&(r.validate=t.attribute.validate),[t.name,r]}function C6(t,e){var n;const r=oC(t),{nodeExtensions:o,markExtensions:s}=Ml(t),l=(n=o.find(h=>Ne(h,"topNode")))==null?void 0:n.name,u=Object.fromEntries(o.map(h=>{const p=r.filter(w=>w.type===h.name),g={name:h.name,options:h.options,storage:h.storage,editor:e},y=t.reduce((w,C)=>{const _=Ne(C,"extendNodeSchema",g);return{...w,..._?_(h):{}}},{}),x=Tk({...y,content:Et(Ne(h,"content",g)),marks:Et(Ne(h,"marks",g)),group:Et(Ne(h,"group",g)),inline:Et(Ne(h,"inline",g)),atom:Et(Ne(h,"atom",g)),selectable:Et(Ne(h,"selectable",g)),draggable:Et(Ne(h,"draggable",g)),code:Et(Ne(h,"code",g)),whitespace:Et(Ne(h,"whitespace",g)),linebreakReplacement:Et(Ne(h,"linebreakReplacement",g)),defining:Et(Ne(h,"defining",g)),isolating:Et(Ne(h,"isolating",g)),attrs:Object.fromEntries(p.map(wk))}),S=Et(Ne(h,"parseHTML",g));S&&(x.parseDOM=S.map(w=>kk(w,p)));const E=Ne(h,"renderHTML",g);E&&(x.toDOM=w=>E({node:w,HTMLAttributes:bu(w,p)}));const k=Ne(h,"renderText",g);return k&&(x.toText=k),[h.name,x]})),d=Object.fromEntries(s.map(h=>{const p=r.filter(k=>k.type===h.name),g={name:h.name,options:h.options,storage:h.storage,editor:e},y=t.reduce((k,w)=>{const C=Ne(w,"extendMarkSchema",g);return{...k,...C?C(h):{}}},{}),x=Tk({...y,inclusive:Et(Ne(h,"inclusive",g)),excludes:Et(Ne(h,"excludes",g)),group:Et(Ne(h,"group",g)),spanning:Et(Ne(h,"spanning",g)),code:Et(Ne(h,"code",g)),attrs:Object.fromEntries(p.map(wk))}),S=Et(Ne(h,"parseHTML",g));S&&(x.parseDOM=S.map(k=>kk(k,p)));const E=Ne(h,"renderHTML",g);return E&&(x.toDOM=k=>E({mark:k,HTMLAttributes:bu(k,p)})),[h.name,x]}));return new I2({topNode:l,nodes:u,marks:d})}function A6(t){const e=t.filter((n,r)=>t.indexOf(n)!==r);return Array.from(new Set(e))}function nh(t){return t.sort((n,r)=>{const o=Ne(n,"priority")||100,s=Ne(r,"priority")||100;return o>s?-1:o<s?1:0})}function sC(t){const e=nh(J0(t)),n=A6(e.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),e}function aC(t,e,n){const{from:r,to:o}=e,{blockSeparator:s=`

`,textSerializers:l={}}=n||{};let u="";return t.nodesBetween(r,o,(d,h,p,g)=>{var y;d.isBlock&&h>r&&(u+=s);const x=l?.[d.type.name];if(x)return p&&(u+=x({node:d,pos:h,parent:p,index:g,range:e})),!1;d.isText&&(u+=(y=d?.text)==null?void 0:y.slice(Math.max(r,h)-h,o-h))}),u}function _6(t,e){const n={from:0,to:t.content.size};return aC(t,n,e)}function lC(t){return Object.fromEntries(Object.entries(t.nodes).filter(([,e])=>e.spec.toText).map(([e,n])=>[e,n.spec.toText]))}function M6(t,e){const n=hn(e,t.schema),{from:r,to:o}=t.selection,s=[];t.doc.nodesBetween(r,o,u=>{s.push(u)});const l=s.reverse().find(u=>u.type.name===n.name);return l?{...l.attrs}:{}}function cC(t,e){const n=Jh(typeof e=="string"?e:e.name,t.schema);return n==="node"?M6(t,e):n==="mark"?nC(t,e):{}}function O6(t,e=JSON.stringify){const n={};return t.filter(r=>{const o=e(r);return Object.prototype.hasOwnProperty.call(n,o)?!1:n[o]=!0})}function j6(t){const e=O6(t);return e.length===1?e:e.filter((n,r)=>!e.filter((s,l)=>l!==r).some(s=>n.oldRange.from>=s.oldRange.from&&n.oldRange.to<=s.oldRange.to&&n.newRange.from>=s.newRange.from&&n.newRange.to<=s.newRange.to))}function uC(t){const{mapping:e,steps:n}=t,r=[];return e.maps.forEach((o,s)=>{const l=[];if(o.ranges.length)o.forEach((u,d)=>{l.push({from:u,to:d})});else{const{from:u,to:d}=n[s];if(u===void 0||d===void 0)return;l.push({from:u,to:d})}l.forEach(({from:u,to:d})=>{const h=e.slice(s).map(u,-1),p=e.slice(s).map(d),g=e.invert().map(h,-1),y=e.invert().map(p);r.push({oldRange:{from:g,to:y},newRange:{from:h,to:p}})})}),j6(r)}function Z0(t,e,n){const r=[];return t===e?n.resolve(t).marks().forEach(o=>{const s=n.resolve(t),l=X0(s,o.type);l&&r.push({mark:o,...l})}):n.nodesBetween(t,e,(o,s)=>{!o||o?.nodeSize===void 0||r.push(...o.marks.map(l=>({from:s,to:s+o.nodeSize,mark:l})))}),r}var R6=(t,e,n,r=20)=>{const o=t.doc.resolve(n);let s=r,l=null;for(;s>0&&l===null;){const u=o.node(s);u?.type.name===e?l=u:s-=1}return[l,s]};function cf(t,e){return e.nodes[t]||e.marks[t]||null}function Mf(t,e,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const o=t.find(s=>s.type===e&&s.name===r);return o?o.attribute.keepOnSplit:!1}))}var N6=(t,e=500)=>{let n="";const r=t.parentOffset;return t.parent.nodesBetween(Math.max(0,r-e),r,(o,s,l,u)=>{var d,h;const p=((h=(d=o.type.spec).toText)==null?void 0:h.call(d,{node:o,pos:s,parent:l,index:u}))||o.textContent||"%leaf%";n+=o.isAtom&&!o.isText?p:p.slice(0,Math.max(0,r-s))}),n};function Wv(t,e,n={}){const{empty:r,ranges:o}=t.selection,s=e?so(e,t.schema):null;if(r)return!!(t.storedMarks||t.selection.$from.marks()).filter(g=>s?s.name===g.type.name:!0).find(g=>eh(g.attrs,n,{strict:!1}));let l=0;const u=[];if(o.forEach(({$from:g,$to:y})=>{const x=g.pos,S=y.pos;t.doc.nodesBetween(x,S,(E,k)=>{if(!E.isText&&!E.marks.length)return;const w=Math.max(x,k),C=Math.min(S,k+E.nodeSize),_=C-w;l+=_,u.push(...E.marks.map(R=>({mark:R,from:w,to:C})))})}),l===0)return!1;const d=u.filter(g=>s?s.name===g.mark.type.name:!0).filter(g=>eh(g.mark.attrs,n,{strict:!1})).reduce((g,y)=>g+y.to-y.from,0),h=u.filter(g=>s?g.mark.type!==s&&g.mark.type.excludes(s):!0).reduce((g,y)=>g+y.to-y.from,0);return(d>0?d+h:d)>=l}function D6(t,e,n={}){if(!e)return ps(t,null,n)||Wv(t,null,n);const r=Jh(e,t.schema);return r==="node"?ps(t,e,n):r==="mark"?Wv(t,e,n):!1}var L6=(t,e)=>{const{$from:n,$to:r,$anchor:o}=t.selection;if(e){const s=Qh(u=>u.type.name===e)(t.selection);if(!s)return!1;const l=t.doc.resolve(s.pos+1);return o.pos+1===l.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},z6=t=>{const{$from:e,$to:n}=t.selection;return!(e.parentOffset>0||e.pos!==n.pos)};function Ck(t,e){return Array.isArray(e)?e.some(n=>(typeof n=="string"?n:n.name)===t.name):e}function Ak(t,e){const{nodeExtensions:n}=Ml(e),r=n.find(l=>l.name===t);if(!r)return!1;const o={name:r.name,options:r.options,storage:r.storage},s=Et(Ne(r,"group",o));return typeof s!="string"?!1:s.split(" ").includes("list")}function Zh(t,{checkChildren:e=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(t.type.name==="hardBreak")return!0;if(t.isText)return/^\s*$/m.test((r=t.text)!=null?r:"")}if(t.isText)return!t.text;if(t.isAtom||t.isLeaf)return!1;if(t.content.childCount===0)return!0;if(e){let o=!0;return t.content.forEach(s=>{o!==!1&&(Zh(s,{ignoreWhitespace:n,checkChildren:e})||(o=!1))}),o}return!1}function dC(t){return t instanceof Ie}var fC=class hC{constructor(e){this.position=e}static fromJSON(e){return new hC(e.position)}toJSON(){return{position:this.position}}};function I6(t,e){const n=e.mapping.mapResult(t.position);return{position:new fC(n.pos),mapResult:n}}function B6(t){return new fC(t)}function P6(t,e,n){var r;const{selection:o}=e;let s=null;if(Qw(o)&&(s=o.$cursor),s){const u=(r=t.storedMarks)!=null?r:s.marks();return s.parent.type.allowsMarkType(n)&&(!!n.isInSet(u)||!u.some(h=>h.type.excludes(n)))}const{ranges:l}=o;return l.some(({$from:u,$to:d})=>{let h=u.depth===0?t.doc.inlineContent&&t.doc.type.allowsMarkType(n):!1;return t.doc.nodesBetween(u.pos,d.pos,(p,g,y)=>{if(h)return!1;if(p.isInline){const x=!y||y.type.allowsMarkType(n),S=!!n.isInSet(p.marks)||!p.marks.some(E=>E.type.excludes(n));h=x&&S}return!h}),h})}var U6=(t,e={})=>({tr:n,state:r,dispatch:o})=>{const{selection:s}=n,{empty:l,ranges:u}=s,d=so(t,r.schema);if(o)if(l){const h=nC(r,d);n.addStoredMark(d.create({...h,...e}))}else u.forEach(h=>{const p=h.$from.pos,g=h.$to.pos;r.doc.nodesBetween(p,g,(y,x)=>{const S=Math.max(x,p),E=Math.min(x+y.nodeSize,g);y.marks.find(w=>w.type===d)?y.marks.forEach(w=>{d===w.type&&n.addMark(S,E,d.create({...w.attrs,...e}))}):n.addMark(S,E,d.create(e))})});return P6(r,n,d)},H6=(t,e)=>({tr:n})=>(n.setMeta(t,e),!0),q6=(t,e={})=>({state:n,dispatch:r,chain:o})=>{const s=hn(t,n.schema);let l;return n.selection.$anchor.sameParent(n.selection.$head)&&(l=n.selection.$anchor.parent.attrs),s.isTextblock?o().command(({commands:u})=>UE(s,{...l,...e})(n)?!0:u.clearNodes()).command(({state:u})=>UE(s,{...l,...e})(u,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},V6=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,o=Js(t,0,r.content.size),s=Ie.create(r,o);e.setSelection(s)}return!0},F6=(t,e)=>({tr:n,state:r,dispatch:o})=>{const{selection:s}=r;let l,u;return typeof e=="number"?(l=e,u=e):e&&"from"in e&&"to"in e?(l=e.from,u=e.to):(l=s.from,u=s.to),o&&n.doc.nodesBetween(l,u,(d,h)=>{d.isText||n.setNodeMarkup(h,void 0,{...d.attrs,dir:t})}),!0},W6=t=>({tr:e,dispatch:n})=>{if(n){const{doc:r}=e,{from:o,to:s}=typeof t=="number"?{from:t,to:t}:t,l=Ve.atStart(r).from,u=Ve.atEnd(r).to,d=Js(o,l,u),h=Js(s,l,u),p=Ve.create(r,d,h);e.setSelection(p)}return!0},G6=t=>({state:e,dispatch:n})=>{const r=hn(t,e.schema);return PL(r)(e,n)};function _k(t,e){const n=t.storedMarks||t.selection.$to.parentOffset&&t.selection.$from.marks();if(n){const r=n.filter(o=>e?.includes(o.type.name));t.tr.ensureMarks(r)}}var $6=({keepMarks:t=!0}={})=>({tr:e,state:n,dispatch:r,editor:o})=>{const{selection:s,doc:l}=e,{$from:u,$to:d}=s,h=o.extensionManager.attributes,p=Mf(h,u.node().type.name,u.node().attrs);if(s instanceof Ie&&s.node.isBlock)return!u.parentOffset||!no(l,u.pos)?!1:(r&&(t&&_k(n,o.extensionManager.splittableMarks),e.split(u.pos).scrollIntoView()),!0);if(!u.parent.isBlock)return!1;const g=d.parentOffset===d.parent.content.size,y=u.depth===0?void 0:S6(u.node(-1).contentMatchAt(u.indexAfter(-1)));let x=g&&y?[{type:y,attrs:p}]:void 0,S=no(e.doc,e.mapping.map(u.pos),1,x);if(!x&&!S&&no(e.doc,e.mapping.map(u.pos),1,y?[{type:y}]:void 0)&&(S=!0,x=y?[{type:y,attrs:p}]:void 0),r){if(S&&(s instanceof Ve&&e.deleteSelection(),e.split(e.mapping.map(u.pos),1,x),y&&!g&&!u.parentOffset&&u.parent.type!==y)){const E=e.mapping.map(u.before()),k=e.doc.resolve(E);u.node(-1).canReplaceWith(k.index(),k.index()+1,y)&&e.setNodeMarkup(e.mapping.map(u.before()),y)}t&&_k(n,o.extensionManager.splittableMarks),e.scrollIntoView()}return S},K6=(t,e={})=>({tr:n,state:r,dispatch:o,editor:s})=>{var l;const u=hn(t,r.schema),{$from:d,$to:h}=r.selection,p=r.selection.node;if(p&&p.isBlock||d.depth<2||!d.sameParent(h))return!1;const g=d.node(-1);if(g.type!==u)return!1;const y=s.extensionManager.attributes;if(d.parent.content.size===0&&d.node(-1).childCount===d.indexAfter(-1)){if(d.depth===2||d.node(-3).type!==u||d.index(-2)!==d.node(-2).childCount-1)return!1;if(o){let w=oe.empty;const C=d.index(-1)?1:d.index(-2)?2:3;for(let K=d.depth-C;K>=d.depth-3;K-=1)w=oe.from(d.node(K).copy(w));const _=d.indexAfter(-1)<d.node(-2).childCount?1:d.indexAfter(-2)<d.node(-3).childCount?2:3,R={...Mf(y,d.node().type.name,d.node().attrs),...e},j=((l=u.contentMatch.defaultType)==null?void 0:l.createAndFill(R))||void 0;w=w.append(oe.from(u.createAndFill(null,j)||void 0));const z=d.before(d.depth-(C-1));n.replace(z,d.after(-_),new xe(w,4-C,0));let B=-1;n.doc.nodesBetween(z,n.doc.content.size,(K,W)=>{if(B>-1)return!1;K.isTextblock&&K.content.size===0&&(B=W+1)}),B>-1&&n.setSelection(Ve.near(n.doc.resolve(B))),n.scrollIntoView()}return!0}const x=h.pos===d.end()?g.contentMatchAt(0).defaultType:null,S={...Mf(y,g.type.name,g.attrs),...e},E={...Mf(y,d.node().type.name,d.node().attrs),...e};n.delete(d.pos,h.pos);const k=x?[{type:u,attrs:S},{type:x,attrs:E}]:[{type:u,attrs:S}];if(!no(n.doc,d.pos,2))return!1;if(o){const{selection:w,storedMarks:C}=r,{splittableMarks:_}=s.extensionManager,R=C||w.$to.parentOffset&&w.$from.marks();if(n.split(d.pos,2,k).scrollIntoView(),!R||!o)return!0;const j=R.filter(z=>_.includes(z.type.name));n.ensureMarks(j)}return!0},Wg=(t,e)=>{const n=Qh(l=>l.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const o=t.doc.nodeAt(r);return n.node.type===o?.type&&ms(t.doc,n.pos)&&t.join(n.pos),!0},Gg=(t,e)=>{const n=Qh(l=>l.type===e)(t.selection);if(!n)return!0;const r=t.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const o=t.doc.nodeAt(r);return n.node.type===o?.type&&ms(t.doc,r)&&t.join(r),!0},Y6=(t,e,n,r={})=>({editor:o,tr:s,state:l,dispatch:u,chain:d,commands:h,can:p})=>{const{extensions:g,splittableMarks:y}=o.extensionManager,x=hn(t,l.schema),S=hn(e,l.schema),{selection:E,storedMarks:k}=l,{$from:w,$to:C}=E,_=w.blockRange(C),R=k||E.$to.parentOffset&&E.$from.marks();if(!_)return!1;const j=Qh(z=>Ak(z.type.name,g))(E);if(_.depth>=1&&j&&_.depth-j.depth<=1){if(j.node.type===x)return h.liftListItem(S);if(Ak(j.node.type.name,g)&&x.validContent(j.node.content)&&u)return d().command(()=>(s.setNodeMarkup(j.pos,x),!0)).command(()=>Wg(s,x)).command(()=>Gg(s,x)).run()}return!n||!R||!u?d().command(()=>p().wrapInList(x,r)?!0:h.clearNodes()).wrapInList(x,r).command(()=>Wg(s,x)).command(()=>Gg(s,x)).run():d().command(()=>{const z=p().wrapInList(x,r),B=R.filter(K=>y.includes(K.type.name));return s.ensureMarks(B),z?!0:h.clearNodes()}).wrapInList(x,r).command(()=>Wg(s,x)).command(()=>Gg(s,x)).run()},X6=(t,e={},n={})=>({state:r,commands:o})=>{const{extendEmptyMarkRange:s=!1}=n,l=so(t,r.schema);return Wv(r,l,e)?o.unsetMark(l,{extendEmptyMarkRange:s}):o.setMark(l,e)},J6=(t,e,n={})=>({state:r,commands:o})=>{const s=hn(t,r.schema),l=hn(e,r.schema),u=ps(r,s,n);let d;return r.selection.$anchor.sameParent(r.selection.$head)&&(d=r.selection.$anchor.parent.attrs),u?o.setNode(l,d):o.setNode(s,{...d,...n})},Q6=(t,e={})=>({state:n,commands:r})=>{const o=hn(t,n.schema);return ps(n,o,e)?r.lift(o):r.wrapIn(o,e)},Z6=()=>({state:t,dispatch:e})=>{const n=t.plugins;for(let r=0;r<n.length;r+=1){const o=n[r];let s;if(o.spec.isInputRules&&(s=o.getState(t))){if(e){const l=t.tr,u=s.transform;for(let d=u.steps.length-1;d>=0;d-=1)l.step(u.steps[d].invert(u.docs[d]));if(s.text){const d=l.doc.resolve(s.from).marks();l.replaceWith(s.from,s.to,t.schema.text(s.text,d))}else l.delete(s.from,s.to)}return!0}}return!1},eB=()=>({tr:t,dispatch:e})=>{const{selection:n}=t,{empty:r,ranges:o}=n;return r||e&&o.forEach(s=>{t.removeMark(s.$from.pos,s.$to.pos)}),!0},tB=(t,e={})=>({tr:n,state:r,dispatch:o})=>{var s;const{extendEmptyMarkRange:l=!1}=e,{selection:u}=n,d=so(t,r.schema),{$from:h,empty:p,ranges:g}=u;if(!o)return!0;if(p&&l){let{from:y,to:x}=u;const S=(s=h.marks().find(k=>k.type===d))==null?void 0:s.attrs,E=X0(h,d,S);E&&(y=E.from,x=E.to),n.removeMark(y,x,d)}else g.forEach(y=>{n.removeMark(y.$from.pos,y.$to.pos,d)});return n.removeStoredMark(d),!0},nB=t=>({tr:e,state:n,dispatch:r})=>{const{selection:o}=n;let s,l;return typeof t=="number"?(s=t,l=t):t&&"from"in t&&"to"in t?(s=t.from,l=t.to):(s=o.from,l=o.to),r&&e.doc.nodesBetween(s,l,(u,d)=>{if(u.isText)return;const h={...u.attrs};delete h.dir,e.setNodeMarkup(d,void 0,h)}),!0},rB=(t,e={})=>({tr:n,state:r,dispatch:o})=>{let s=null,l=null;const u=Jh(typeof t=="string"?t:t.name,r.schema);if(!u)return!1;u==="node"&&(s=hn(t,r.schema)),u==="mark"&&(l=so(t,r.schema));let d=!1;return n.selection.ranges.forEach(h=>{const p=h.$from.pos,g=h.$to.pos;let y,x,S,E;n.selection.empty?r.doc.nodesBetween(p,g,(k,w)=>{s&&s===k.type&&(d=!0,S=Math.max(w,p),E=Math.min(w+k.nodeSize,g),y=w,x=k)}):r.doc.nodesBetween(p,g,(k,w)=>{w<p&&s&&s===k.type&&(d=!0,S=Math.max(w,p),E=Math.min(w+k.nodeSize,g),y=w,x=k),w>=p&&w<=g&&(s&&s===k.type&&(d=!0,o&&n.setNodeMarkup(w,void 0,{...k.attrs,...e})),l&&k.marks.length&&k.marks.forEach(C=>{if(l===C.type&&(d=!0,o)){const _=Math.max(w,p),R=Math.min(w+k.nodeSize,g);n.addMark(_,R,l.create({...C.attrs,...e}))}}))}),x&&(y!==void 0&&o&&n.setNodeMarkup(y,void 0,{...x.attrs,...e}),l&&x.marks.length&&x.marks.forEach(k=>{l===k.type&&o&&n.addMark(S,E,l.create({...k.attrs,...e}))}))}),d},iB=(t,e={})=>({state:n,dispatch:r})=>{const o=hn(t,n.schema);return RL(o,e)(n,r)},oB=(t,e={})=>({state:n,dispatch:r})=>{const o=hn(t,n.schema);return NL(o,e)(n,r)},sB=class{constructor(){this.callbacks={}}on(t,e){return this.callbacks[t]||(this.callbacks[t]=[]),this.callbacks[t].push(e),this}emit(t,...e){const n=this.callbacks[t];return n&&n.forEach(r=>r.apply(this,e)),this}off(t,e){const n=this.callbacks[t];return n&&(e?this.callbacks[t]=n.filter(r=>r!==e):delete this.callbacks[t]),this}once(t,e){const n=(...r)=>{this.off(t,n),e.apply(this,r)};return this.on(t,n)}removeAllListeners(){this.callbacks={}}},ep=class{constructor(t){var e;this.find=t.find,this.handler=t.handler,this.undoable=(e=t.undoable)!=null?e:!0}},aB=(t,e)=>{if(Y0(e))return e.exec(t);const n=e(t);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=t,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function uf(t){var e;const{editor:n,from:r,to:o,text:s,rules:l,plugin:u}=t,{view:d}=n;if(d.composing)return!1;const h=d.state.doc.resolve(r);if(h.parent.type.spec.code||(e=h.nodeBefore||h.nodeAfter)!=null&&e.marks.find(y=>y.type.spec.code))return!1;let p=!1;const g=N6(h)+s;return l.forEach(y=>{if(p)return;const x=aB(g,y.find);if(!x)return;const S=d.state.tr,E=Yh({state:d.state,transaction:S}),k={from:r-(x[0].length-s.length),to:o},{commands:w,chain:C,can:_}=new Xh({editor:n,state:E});y.handler({state:E,range:k,match:x,commands:w,chain:C,can:_})===null||!S.steps.length||(y.undoable&&S.setMeta(u,{transform:S,from:r,to:o,text:s}),d.dispatch(S),p=!0)}),p}function lB(t){const{editor:e,rules:n}=t,r=new Kt({state:{init(){return null},apply(o,s,l){const u=o.getMeta(r);if(u)return u;const d=o.getMeta("applyInputRules");return!!d&&setTimeout(()=>{let{text:p}=d;typeof p=="string"?p=p:p=Q0(oe.from(p),l.schema);const{from:g}=d,y=g+p.length;uf({editor:e,from:g,to:y,text:p,rules:n,plugin:r})}),o.selectionSet||o.docChanged?null:s}},props:{handleTextInput(o,s,l,u){return uf({editor:e,from:s,to:l,text:u,rules:n,plugin:r})},handleDOMEvents:{compositionend:o=>(setTimeout(()=>{const{$cursor:s}=o.state.selection;s&&uf({editor:e,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(o,s){if(s.key!=="Enter")return!1;const{$cursor:l}=o.state.selection;return l?uf({editor:e,from:l.pos,to:l.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function cB(t){return Object.prototype.toString.call(t).slice(8,-1)}function df(t){return cB(t)!=="Object"?!1:t.constructor===Object&&Object.getPrototypeOf(t)===Object.prototype}function pC(t,e){const n={...t};return df(t)&&df(e)&&Object.keys(e).forEach(r=>{df(e[r])&&df(t[r])?n[r]=pC(t[r],e[r]):n[r]=e[r]}),n}var ey=class{constructor(t={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...t},this.name=this.config.name}get options(){return{...Et(Ne(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...Et(Ne(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(t={}){const e=this.extend({...this.config,addOptions:()=>pC(this.options,t)});return e.name=this.name,e.parent=this.parent,e}extend(t={}){const e=new this.constructor({...this.config,...t});return e.parent=this,this.child=e,e.name="name"in t?t.name:e.parent.name,e}},va=class mC extends ey{constructor(){super(...arguments),this.type="mark"}static create(e={}){const n=typeof e=="function"?e():e;return new mC(n)}static handleExit({editor:e,mark:n}){const{tr:r}=e.state,o=e.state.selection.$from;if(o.pos===o.end()){const l=o.marks();if(!!!l.find(h=>h?.type.name===n.name))return!1;const d=l.find(h=>h?.type.name===n.name);return d&&r.removeStoredMark(d),r.insertText(" ",o.pos),e.view.dispatch(r),!0}return!1}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function uB(t){return typeof t=="number"}var dB=class{constructor(t){this.find=t.find,this.handler=t.handler}},fB=(t,e,n)=>{if(Y0(e))return[...t.matchAll(e)];const r=e(t,n);return r?r.map(o=>{const s=[o.text];return s.index=o.index,s.input=t,s.data=o.data,o.replaceWith&&(o.text.includes(o.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(o.replaceWith)),s}):[]};function hB(t){const{editor:e,state:n,from:r,to:o,rule:s,pasteEvent:l,dropEvent:u}=t,{commands:d,chain:h,can:p}=new Xh({editor:e,state:n}),g=[];return n.doc.nodesBetween(r,o,(x,S)=>{var E,k,w,C,_;if((k=(E=x.type)==null?void 0:E.spec)!=null&&k.code||!(x.isText||x.isTextblock||x.isInline))return;const R=(_=(C=(w=x.content)==null?void 0:w.size)!=null?C:x.nodeSize)!=null?_:0,j=Math.max(r,S),z=Math.min(o,S+R);if(j>=z)return;const B=x.isText?x.text||"":x.textBetween(j-S,z-S,void 0,"");fB(B,s.find,l).forEach(W=>{if(W.index===void 0)return;const J=j+W.index+1,Z=J+W[0].length,te={from:n.tr.mapping.map(J),to:n.tr.mapping.map(Z)},je=s.handler({state:n,range:te,match:W,commands:d,chain:h,can:p,pasteEvent:l,dropEvent:u});g.push(je)})}),g.every(x=>x!==null)}var ff=null,pB=t=>{var e;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=n.clipboardData)==null||e.setData("text/html",t),n};function mB(t){const{editor:e,rules:n}=t;let r=null,o=!1,s=!1,l=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,u;try{u=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{u=null}const d=({state:p,from:g,to:y,rule:x,pasteEvt:S})=>{const E=p.tr,k=Yh({state:p,transaction:E});if(!(!hB({editor:e,state:k,from:Math.max(g-1,0),to:y.b-1,rule:x,pasteEvent:S,dropEvent:u})||!E.steps.length)){try{u=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{u=null}return l=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,E}};return n.map(p=>new Kt({view(g){const y=S=>{var E;r=(E=g.dom.parentElement)!=null&&E.contains(S.target)?g.dom.parentElement:null,r&&(ff=e)},x=()=>{ff&&(ff=null)};return window.addEventListener("dragstart",y),window.addEventListener("dragend",x),{destroy(){window.removeEventListener("dragstart",y),window.removeEventListener("dragend",x)}}},props:{handleDOMEvents:{drop:(g,y)=>{if(s=r===g.dom.parentElement,u=y,!s){const x=ff;x?.isEditable&&setTimeout(()=>{const S=x.state.selection;S&&x.commands.deleteRange({from:S.from,to:S.to})},10)}return!1},paste:(g,y)=>{var x;const S=(x=y.clipboardData)==null?void 0:x.getData("text/html");return l=y,o=!!S?.includes("data-pm-slice"),!1}}},appendTransaction:(g,y,x)=>{const S=g[0],E=S.getMeta("uiEvent")==="paste"&&!o,k=S.getMeta("uiEvent")==="drop"&&!s,w=S.getMeta("applyPasteRules"),C=!!w;if(!E&&!k&&!C)return;if(C){let{text:j}=w;typeof j=="string"?j=j:j=Q0(oe.from(j),x.schema);const{from:z}=w,B=z+j.length,K=pB(j);return d({rule:p,state:x,from:z,to:{b:B},pasteEvt:K})}const _=y.doc.content.findDiffStart(x.doc.content),R=y.doc.content.findDiffEnd(x.doc.content);if(!(!uB(_)||!R||_===R.b))return d({rule:p,state:x,from:_,to:R,pasteEvt:l})}}))}var tp=class{constructor(t,e){this.splittableMarks=[],this.editor=e,this.baseExtensions=t,this.extensions=sC(t),this.schema=C6(this.extensions,e),this.setupExtensions()}get commands(){return this.extensions.reduce((t,e)=>{const n={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:cf(e.name,this.schema)},r=Ne(e,"addCommands",n);return r?{...t,...r()}:t},{})}get plugins(){const{editor:t}=this;return nh([...this.extensions].reverse()).flatMap(r=>{const o={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:t,type:cf(r.name,this.schema)},s=[],l=Ne(r,"addKeyboardShortcuts",o);let u={};if(r.type==="mark"&&Ne(r,"exitable",o)&&(u.ArrowRight=()=>va.handleExit({editor:t,mark:r})),l){const y=Object.fromEntries(Object.entries(l()).map(([x,S])=>[x,()=>S({editor:t})]));u={...u,...y}}const d=MI(u);s.push(d);const h=Ne(r,"addInputRules",o);if(Ck(r,t.options.enableInputRules)&&h){const y=h();if(y&&y.length){const x=lB({editor:t,rules:y}),S=Array.isArray(x)?x:[x];s.push(...S)}}const p=Ne(r,"addPasteRules",o);if(Ck(r,t.options.enablePasteRules)&&p){const y=p();if(y&&y.length){const x=mB({editor:t,rules:y});s.push(...x)}}const g=Ne(r,"addProseMirrorPlugins",o);if(g){const y=g();s.push(...y)}return s})}get attributes(){return oC(this.extensions)}get nodeViews(){const{editor:t}=this,{nodeExtensions:e}=Ml(this.extensions);return Object.fromEntries(e.filter(n=>!!Ne(n,"addNodeView")).map(n=>{const r=this.attributes.filter(d=>d.type===n.name),o={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:hn(n.name,this.schema)},s=Ne(n,"addNodeView",o);if(!s)return[];const l=s();if(!l)return[];const u=(d,h,p,g,y)=>{const x=bu(d,r);return l({node:d,view:h,getPos:p,decorations:g,innerDecorations:y,editor:t,extension:n,HTMLAttributes:x})};return[n.name,u]}))}dispatchTransaction(t){const{editor:e}=this;return nh([...this.extensions].reverse()).reduceRight((r,o)=>{const s={name:o.name,options:o.options,storage:this.editor.extensionStorage[o.name],editor:e,type:cf(o.name,this.schema)},l=Ne(o,"dispatchTransaction",s);return l?u=>{l.call(s,{transaction:u,next:r})}:r},t)}get markViews(){const{editor:t}=this,{markExtensions:e}=Ml(this.extensions);return Object.fromEntries(e.filter(n=>!!Ne(n,"addMarkView")).map(n=>{const r=this.attributes.filter(u=>u.type===n.name),o={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:t,type:so(n.name,this.schema)},s=Ne(n,"addMarkView",o);if(!s)return[];const l=(u,d,h)=>{const p=bu(u,r);return s()({mark:u,view:d,inline:h,editor:t,extension:n,HTMLAttributes:p,updateAttributes:g=>{MB(u,t,g)}})};return[n.name,l]}))}setupExtensions(){const t=this.extensions;this.editor.extensionStorage=Object.fromEntries(t.map(e=>[e.name,e.storage])),t.forEach(e=>{var n;const r={name:e.name,options:e.options,storage:this.editor.extensionStorage[e.name],editor:this.editor,type:cf(e.name,this.schema)};e.type==="mark"&&((n=Et(Ne(e,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(e.name);const o=Ne(e,"onBeforeCreate",r),s=Ne(e,"onCreate",r),l=Ne(e,"onUpdate",r),u=Ne(e,"onSelectionUpdate",r),d=Ne(e,"onTransaction",r),h=Ne(e,"onFocus",r),p=Ne(e,"onBlur",r),g=Ne(e,"onDestroy",r);o&&this.editor.on("beforeCreate",o),s&&this.editor.on("create",s),l&&this.editor.on("update",l),u&&this.editor.on("selectionUpdate",u),d&&this.editor.on("transaction",d),h&&this.editor.on("focus",h),p&&this.editor.on("blur",p),g&&this.editor.on("destroy",g)})}};tp.resolve=sC;tp.sort=nh;tp.flatten=J0;var gB={};K0(gB,{ClipboardTextSerializer:()=>vC,Commands:()=>yC,Delete:()=>bC,Drop:()=>xC,Editable:()=>SC,FocusEvents:()=>kC,Keymap:()=>TC,Paste:()=>wC,Tabindex:()=>CC,TextDirection:()=>AC,focusEventsPluginKey:()=>EC});var rn=class gC extends ey{constructor(){super(...arguments),this.type="extension"}static create(e={}){const n=typeof e=="function"?e():e;return new gC(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}},vC=rn.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Kt({key:new vn("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:t}=this,{state:e,schema:n}=t,{doc:r,selection:o}=e,{ranges:s}=o,l=Math.min(...s.map(p=>p.$from.pos)),u=Math.max(...s.map(p=>p.$to.pos)),d=lC(n);return aC(r,{from:l,to:u},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:d})}}})]}}),yC=rn.create({name:"commands",addCommands(){return{...Xw}}}),bC=rn.create({name:"delete",onUpdate({transaction:t,appendedTransactions:e}){var n,r,o;const s=()=>{var l,u,d,h;if((h=(d=(u=(l=this.editor.options.coreExtensionOptions)==null?void 0:l.delete)==null?void 0:u.filterTransaction)==null?void 0:d.call(u,t))!=null?h:t.getMeta("y-sync$"))return;const p=rC(t.before,[t,...e]);uC(p).forEach(x=>{p.mapping.mapResult(x.oldRange.from).deletedAfter&&p.mapping.mapResult(x.oldRange.to).deletedBefore&&p.before.nodesBetween(x.oldRange.from,x.oldRange.to,(S,E)=>{const k=E+S.nodeSize-2,w=x.oldRange.from<=E&&k<=x.oldRange.to;this.editor.emit("delete",{type:"node",node:S,from:E,to:k,newFrom:p.mapping.map(E),newTo:p.mapping.map(k),deletedRange:x.oldRange,newRange:x.newRange,partial:!w,editor:this.editor,transaction:t,combinedTransform:p})})});const y=p.mapping;p.steps.forEach((x,S)=>{var E,k;if(x instanceof Zr){const w=y.slice(S).map(x.from,-1),C=y.slice(S).map(x.to),_=y.invert().map(w,-1),R=y.invert().map(C),j=(E=p.doc.nodeAt(w-1))==null?void 0:E.marks.some(B=>B.eq(x.mark)),z=(k=p.doc.nodeAt(C))==null?void 0:k.marks.some(B=>B.eq(x.mark));this.editor.emit("delete",{type:"mark",mark:x.mark,from:x.from,to:x.to,deletedRange:{from:_,to:R},newRange:{from:w,to:C},partial:!!(z||j),editor:this.editor,transaction:t,combinedTransform:p})}})};(o=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||o?setTimeout(s,0):s()}}),xC=rn.create({name:"drop",addProseMirrorPlugins(){return[new Kt({key:new vn("tiptapDrop"),props:{handleDrop:(t,e,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:n,moved:r})}}})]}}),SC=rn.create({name:"editable",addProseMirrorPlugins(){return[new Kt({key:new vn("editable"),props:{editable:()=>this.editor.options.editable}})]}}),EC=new vn("focusEvents"),kC=rn.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:t}=this;return[new Kt({key:EC,props:{handleDOMEvents:{focus:(e,n)=>{t.isFocused=!0;const r=t.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,n)=>{t.isFocused=!1;const r=t.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),TC=rn.create({name:"keymap",addKeyboardShortcuts(){const t=()=>this.editor.commands.first(({commands:l})=>[()=>l.undoInputRule(),()=>l.command(({tr:u})=>{const{selection:d,doc:h}=u,{empty:p,$anchor:g}=d,{pos:y,parent:x}=g,S=g.parent.isTextblock&&y>0?u.doc.resolve(y-1):g,E=S.parent.type.spec.isolating,k=g.pos-g.parentOffset,w=E&&S.parent.childCount===1?k===g.pos:Je.atStart(h).from===y;return!p||!x.type.isTextblock||x.textContent.length||!w||w&&g.parent.type.name==="paragraph"?!1:l.clearNodes()}),()=>l.deleteSelection(),()=>l.joinBackward(),()=>l.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:l})=>[()=>l.deleteSelection(),()=>l.deleteCurrentNode(),()=>l.joinForward(),()=>l.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:l})=>[()=>l.newlineInCode(),()=>l.createParagraphNear(),()=>l.liftEmptyBlock(),()=>l.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:t,"Mod-Backspace":t,"Shift-Backspace":t,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},o={...r},s={...r,"Ctrl-h":t,"Alt-Backspace":t,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return th()||tC()?s:o},addProseMirrorPlugins(){return[new Kt({key:new vn("clearDocument"),appendTransaction:(t,e,n)=>{if(t.some(E=>E.getMeta("composition")))return;const r=t.some(E=>E.docChanged)&&!e.doc.eq(n.doc),o=t.some(E=>E.getMeta("preventClearDocument"));if(!r||o)return;const{empty:s,from:l,to:u}=e.selection,d=Je.atStart(e.doc).from,h=Je.atEnd(e.doc).to;if(s||!(l===d&&u===h)||!Zh(n.doc))return;const y=n.tr,x=Yh({state:n,transaction:y}),{commands:S}=new Xh({editor:this.editor,state:x});if(S.clearNodes(),!!y.steps.length)return y}})]}}),wC=rn.create({name:"paste",addProseMirrorPlugins(){return[new Kt({key:new vn("tiptapPaste"),props:{handlePaste:(t,e,n)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:n})}}})]}}),CC=rn.create({name:"tabindex",addProseMirrorPlugins(){return[new Kt({key:new vn("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),AC=rn.create({name:"textDirection",addOptions(){return{direction:void 0}},addGlobalAttributes(){if(!this.options.direction)return[];const{nodeExtensions:t}=Ml(this.extensions);return[{types:t.filter(e=>e.name!=="text").map(e=>e.name),attributes:{dir:{default:this.options.direction,parseHTML:e=>{const n=e.getAttribute("dir");return n&&(n==="ltr"||n==="rtl"||n==="auto")?n:this.options.direction},renderHTML:e=>e.dir?{dir:e.dir}:{}}}}]},addProseMirrorPlugins(){return[new Kt({key:new vn("textDirection"),props:{attributes:()=>{const t=this.options.direction;return t?{dir:t}:{}}}})]}}),vB=class pl{constructor(e,n,r=!1,o=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=n,this.currentNode=o}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!=null?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(e);return new pl(n,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new pl(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new pl(e,this.editor)}get children(){const e=[];return this.node.content.forEach((n,r)=>{const o=n.isBlock&&!n.isTextblock,s=n.isAtom&&!n.isText,l=this.pos+r+(s?0:1);if(l<0||l>this.resolvedPos.doc.nodeSize-2)return;const u=this.resolvedPos.doc.resolve(l);if(!o&&u.depth<=this.depth)return;const d=new pl(u,this.editor,o,o?n:null);o&&(d.actualDepth=this.depth+1),e.push(new pl(u,this.editor,o,o?n:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,n={}){let r=null,o=this.parent;for(;o&&!r;){if(o.node.type.name===e)if(Object.keys(n).length>0){const s=o.node.attrs,l=Object.keys(n);for(let u=0;u<l.length;u+=1){const d=l[u];if(s[d]!==n[d])break}}else r=o;o=o.parent}return r}querySelector(e,n={}){return this.querySelectorAll(e,n,!0)[0]||null}querySelectorAll(e,n={},r=!1){let o=[];if(!this.children||this.children.length===0)return o;const s=Object.keys(n);return this.children.forEach(l=>{r&&o.length>0||(l.node.type.name===e&&s.every(d=>n[d]===l.node.attrs[d])&&o.push(l),!(r&&o.length>0)&&(o=o.concat(l.querySelectorAll(e,n,r))))}),o}setAttribute(e){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(n)}},yB=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function bB(t,e,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const o=document.createElement("style");return e&&o.setAttribute("nonce",e),o.setAttribute("data-tiptap-style",""),o.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(o),o}var xB=class extends sB{constructor(t={}){super(),this.css=null,this.className="tiptap",this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,textDirection:void 0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null,enableExtensionDispatchTransaction:!0},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.utils={getUpdatedPosition:I6,createMappablePosition:B6},this.setOptions(t),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:o,moved:s})=>this.options.onDrop(r,o,s)),this.on("paste",({event:r,slice:o})=>this.options.onPaste(r,o)),this.on("delete",this.options.onDelete);const e=this.createDoc(),n=Zw(e,this.options.autofocus);this.editorState=vl.create({doc:e,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(t){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(t),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.options.autofocus!==!1&&this.options.autofocus!==null&&this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const t=this.editorView.dom;t?.editor&&delete t.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css&&!document.querySelectorAll(`.${this.className}`).length)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(t){console.warn("Failed to remove CSS element:",t)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=bB(yB,this.options.injectNonce))}setOptions(t={}){this.options={...this.options,...t},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(t,e=!0){this.setOptions({editable:t}),e&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:t=>{this.editorState=t},dispatch:t=>{this.dispatchTransaction(t)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(t,e)=>{if(this.editorView)return this.editorView[e];if(e==="state")return this.editorState;if(e in t)return Reflect.get(t,e);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${e}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(t,e){const n=iC(e)?e(t,[...this.state.plugins]):[...this.state.plugins,t],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(t){if(this.isDestroyed)return;const e=this.state.plugins;let n=e;if([].concat(t).forEach(o=>{const s=typeof o=="string"?`${o}$`:o.key;n=n.filter(l=>!l.key.startsWith(s))}),e.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var t,e;const r=[...this.options.enableCoreExtensions?[SC,vC.configure({blockSeparator:(e=(t=this.options.coreExtensionOptions)==null?void 0:t.clipboardTextSerializer)==null?void 0:e.blockSeparator}),yC,kC,TC,CC,xC,wC,bC,AC.configure({direction:this.options.textDirection})].filter(o=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[o.name]!==!1:!0):[],...this.options.extensions].filter(o=>["extension","node","mark"].includes(o?.type));this.extensionManager=new tp(r,this)}createCommandManager(){this.commandManager=new Xh({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let t;try{t=Fv(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(e){if(!(e instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(e.message))throw e;this.emit("contentError",{editor:this,error:e,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),t=Fv(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return t}createView(t){const{editorProps:e,enableExtensionDispatchTransaction:n}=this.options,r=e.dispatchTransaction||this.dispatchTransaction.bind(this),o=n?this.extensionManager.dispatchTransaction(r):r;this.editorView=new Kw(t,{...e,attributes:{role:"textbox",...e?.attributes},dispatchTransaction:o,state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const s=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(s),this.prependClass(),this.injectCSS();const l=this.view.dom;l.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`${this.className} ${this.view.dom.className}`}captureTransaction(t){this.isCapturingTransaction=!0,t(),this.isCapturingTransaction=!1;const e=this.capturedTransaction;return this.capturedTransaction=null,e}dispatchTransaction(t){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=t;return}t.steps.forEach(h=>{var p;return(p=this.capturedTransaction)==null?void 0:p.step(h)});return}const{state:e,transactions:n}=this.state.applyTransaction(t),r=!this.state.selection.eq(e.selection),o=n.includes(t),s=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:t,nextState:e}),!o)return;this.view.updateState(e),this.emit("transaction",{editor:this,transaction:t,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:t});const l=n.findLast(h=>h.getMeta("focus")||h.getMeta("blur")),u=l?.getMeta("focus"),d=l?.getMeta("blur");u&&this.emit("focus",{editor:this,event:u.event,transaction:l}),d&&this.emit("blur",{editor:this,event:d.event,transaction:l}),!(t.getMeta("preventUpdate")||!n.some(h=>h.docChanged)||s.doc.eq(e.doc))&&this.emit("update",{editor:this,transaction:t,appendedTransactions:n.slice(1)})}getAttributes(t){return cC(this.state,t)}isActive(t,e){const n=typeof t=="string"?t:null,r=typeof t=="string"?e:t;return D6(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Q0(this.state.doc.content,this.schema)}getText(t){const{blockSeparator:e=`

`,textSerializers:n={}}=t||{};return _6(this.state.doc,{blockSeparator:e,textSerializers:{...lC(this.schema),...n}})}get isEmpty(){return Zh(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var t,e;return(e=(t=this.editorView)==null?void 0:t.isDestroyed)!=null?e:!0}$node(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelector(t,e))||null}$nodes(t,e){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(t,e))||null}$pos(t){const e=this.state.doc.resolve(t);return new vB(e,this)}get $doc(){return this.$pos(0)}};function Ol(t){return new ep({find:t.find,handler:({state:e,range:n,match:r})=>{const o=Et(t.getAttributes,void 0,r);if(o===!1||o===null)return null;const{tr:s}=e,l=r[r.length-1],u=r[0];if(l){const d=u.search(/\S/),h=n.from+u.indexOf(l),p=h+l.length;if(Z0(n.from,n.to,e.doc).filter(x=>x.mark.type.excluded.find(E=>E===t.type&&E!==x.mark.type)).filter(x=>x.to>h).length)return null;p<n.to&&s.delete(p,n.to),h>n.from&&s.delete(n.from+d,h);const y=n.from+d+l.length;s.addMark(n.from+d,y,t.type.create(o||{})),s.removeStoredMark(t.type)}},undoable:t.undoable})}function SB(t){return new ep({find:t.find,handler:({state:e,range:n,match:r})=>{const o=Et(t.getAttributes,void 0,r)||{},{tr:s}=e,l=n.from;let u=n.to;const d=t.type.create(o);if(r[1]){const h=r[0].lastIndexOf(r[1]);let p=l+h;p>u?p=u:u=p+r[1].length;const g=r[0][r[0].length-1];s.insertText(g,l+r[0].length-1),s.replaceWith(p,u,d)}else if(r[0]){const h=t.type.isInline?l:l-1;s.insert(h,t.type.create(o)).delete(s.mapping.map(l),s.mapping.map(u))}s.scrollIntoView()},undoable:t.undoable})}function Gv(t){return new ep({find:t.find,handler:({state:e,range:n,match:r})=>{const o=e.doc.resolve(n.from),s=Et(t.getAttributes,void 0,r)||{};if(!o.node(-1).canReplaceWith(o.index(-1),o.indexAfter(-1),t.type))return null;e.tr.delete(n.from,n.to).setBlockType(n.from,n.from,t.type,s)},undoable:t.undoable})}function jl(t){return new ep({find:t.find,handler:({state:e,range:n,match:r,chain:o})=>{const s=Et(t.getAttributes,void 0,r)||{},l=e.tr.delete(n.from,n.to),d=l.doc.resolve(n.from).blockRange(),h=d&&R0(d,t.type,s);if(!h)return null;if(l.wrap(d,h),t.keepMarks&&t.editor){const{selection:g,storedMarks:y}=e,{splittableMarks:x}=t.editor.extensionManager,S=y||g.$to.parentOffset&&g.$from.marks();if(S){const E=S.filter(k=>x.includes(k.type.name));l.ensureMarks(E)}}if(t.keepAttributes){const g=t.type.name==="bulletList"||t.type.name==="orderedList"?"listItem":"taskList";o().updateAttributes(g,s).run()}const p=l.doc.resolve(n.from-1).nodeBefore;p&&p.type===t.type&&ms(l.doc,n.from-1)&&(!t.joinPredicate||t.joinPredicate(r,p))&&l.join(n.from-1)},undoable:t.undoable})}function EB(t,e){const{selection:n}=t,{$from:r}=n;if(n instanceof Ie){const s=r.index();return r.parent.canReplaceWith(s,s+1,e)}let o=r.depth;for(;o>=0;){const s=r.index(o);if(r.node(o).contentMatchAt(s).matchType(e))return!0;o-=1}return!1}var kB={};K0(kB,{createAtomBlockMarkdownSpec:()=>TB,createBlockMarkdownSpec:()=>wB,createInlineMarkdownSpec:()=>_B,parseAttributes:()=>ty,parseIndentedBlocks:()=>$v,renderNestedMarkdownContent:()=>ry,serializeAttributes:()=>ny});function ty(t){if(!t?.trim())return{};const e={},n=[],r=t.replace(/["']([^"']*)["']/g,h=>(n.push(h),`__QUOTED_${n.length-1}__`)),o=r.match(/(?:^|\s)\.([a-zA-Z][\w-]*)/g);if(o){const h=o.map(p=>p.trim().slice(1));e.class=h.join(" ")}const s=r.match(/(?:^|\s)#([a-zA-Z][\w-]*)/);s&&(e.id=s[1]);const l=/([a-zA-Z][\w-]*)\s*=\s*(__QUOTED_\d+__)/g;Array.from(r.matchAll(l)).forEach(([,h,p])=>{var g;const y=parseInt(((g=p.match(/__QUOTED_(\d+)__/))==null?void 0:g[1])||"0",10),x=n[y];x&&(e[h]=x.slice(1,-1))});const d=r.replace(/(?:^|\s)\.([a-zA-Z][\w-]*)/g,"").replace(/(?:^|\s)#([a-zA-Z][\w-]*)/g,"").replace(/([a-zA-Z][\w-]*)\s*=\s*__QUOTED_\d+__/g,"").trim();return d&&d.split(/\s+/).filter(Boolean).forEach(p=>{p.match(/^[a-zA-Z][\w-]*$/)&&(e[p]=!0)}),e}function ny(t){if(!t||Object.keys(t).length===0)return"";const e=[];return t.class&&String(t.class).split(/\s+/).filter(Boolean).forEach(r=>e.push(`.${r}`)),t.id&&e.push(`#${t.id}`),Object.entries(t).forEach(([n,r])=>{n==="class"||n==="id"||(r===!0?e.push(n):r!==!1&&r!=null&&e.push(`${n}="${String(r)}"`))}),e.join(" ")}function TB(t){const{nodeName:e,name:n,parseAttributes:r=ty,serializeAttributes:o=ny,defaultAttributes:s={},requiredAttributes:l=[],allowedAttributes:u}=t,d=n||e,h=p=>{if(!u)return p;const g={};return u.forEach(y=>{y in p&&(g[y]=p[y])}),g};return{parseMarkdown:(p,g)=>{const y={...s,...p.attributes};return g.createNode(e,y,[])},markdownTokenizer:{name:e,level:"block",start(p){var g;const y=new RegExp(`^:::${d}(?:\\s|$)`,"m"),x=(g=p.match(y))==null?void 0:g.index;return x!==void 0?x:-1},tokenize(p,g,y){const x=new RegExp(`^:::${d}(?:\\s+\\{([^}]*)\\})?\\s*:::(?:\\n|$)`),S=p.match(x);if(!S)return;const E=S[1]||"",k=r(E);if(!l.find(C=>!(C in k)))return{type:e,raw:S[0],attributes:k}}},renderMarkdown:p=>{const g=h(p.attrs||{}),y=o(g),x=y?` {${y}}`:"";return`:::${d}${x} :::`}}}function wB(t){const{nodeName:e,name:n,getContent:r,parseAttributes:o=ty,serializeAttributes:s=ny,defaultAttributes:l={},content:u="block",allowedAttributes:d}=t,h=n||e,p=g=>{if(!d)return g;const y={};return d.forEach(x=>{x in g&&(y[x]=g[x])}),y};return{parseMarkdown:(g,y)=>{let x;if(r){const E=r(g);x=typeof E=="string"?[{type:"text",text:E}]:E}else u==="block"?x=y.parseChildren(g.tokens||[]):x=y.parseInline(g.tokens||[]);const S={...l,...g.attributes};return y.createNode(e,S,x)},markdownTokenizer:{name:e,level:"block",start(g){var y;const x=new RegExp(`^:::${h}`,"m"),S=(y=g.match(x))==null?void 0:y.index;return S!==void 0?S:-1},tokenize(g,y,x){var S;const E=new RegExp(`^:::${h}(?:\\s+\\{([^}]*)\\})?\\s*\\n`),k=g.match(E);if(!k)return;const[w,C=""]=k,_=o(C);let R=1;const j=w.length;let z="";const B=/^:::([\w-]*)(\s.*)?/gm,K=g.slice(j);for(B.lastIndex=0;;){const W=B.exec(K);if(W===null)break;const J=W.index,Z=W[1];if(!((S=W[2])!=null&&S.endsWith(":::"))){if(Z)R+=1;else if(R-=1,R===0){const te=K.slice(0,J);z=te.trim();const je=g.slice(0,j+J+W[0].length);let ke=[];if(z)if(u==="block")for(ke=x.blockTokens(te),ke.forEach(me=>{me.text&&(!me.tokens||me.tokens.length===0)&&(me.tokens=x.inlineTokens(me.text))});ke.length>0;){const me=ke[ke.length-1];if(me.type==="paragraph"&&(!me.text||me.text.trim()===""))ke.pop();else break}else ke=x.inlineTokens(z);return{type:e,raw:je,attributes:_,content:z,tokens:ke}}}}}},renderMarkdown:(g,y)=>{const x=p(g.attrs||{}),S=s(x),E=S?` {${S}}`:"",k=y.renderChildren(g.content||[],`

`);return`:::${h}${E}

${k}

:::`}}}function CB(t){if(!t.trim())return{};const e={},n=/(\w+)=(?:"([^"]*)"|'([^']*)')/g;let r=n.exec(t);for(;r!==null;){const[,o,s,l]=r;e[o]=s||l,r=n.exec(t)}return e}function AB(t){return Object.entries(t).filter(([,e])=>e!=null).map(([e,n])=>`${e}="${n}"`).join(" ")}function _B(t){const{nodeName:e,name:n,getContent:r,parseAttributes:o=CB,serializeAttributes:s=AB,defaultAttributes:l={},selfClosing:u=!1,allowedAttributes:d}=t,h=n||e,p=y=>{if(!d)return y;const x={};return d.forEach(S=>{const E=typeof S=="string"?S:S.name,k=typeof S=="string"?void 0:S.skipIfDefault;if(E in y){const w=y[E];if(k!==void 0&&w===k)return;x[E]=w}}),x},g=h.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");return{parseMarkdown:(y,x)=>{const S={...l,...y.attributes};if(u)return x.createNode(e,S);const E=r?r(y):y.content||"";return E?x.createNode(e,S,[x.createTextNode(E)]):x.createNode(e,S,[])},markdownTokenizer:{name:e,level:"inline",start(y){const x=u?new RegExp(`\\[${g}\\s*[^\\]]*\\]`):new RegExp(`\\[${g}\\s*[^\\]]*\\][\\s\\S]*?\\[\\/${g}\\]`),S=y.match(x),E=S?.index;return E!==void 0?E:-1},tokenize(y,x,S){const E=u?new RegExp(`^\\[${g}\\s*([^\\]]*)\\]`):new RegExp(`^\\[${g}\\s*([^\\]]*)\\]([\\s\\S]*?)\\[\\/${g}\\]`),k=y.match(E);if(!k)return;let w="",C="";if(u){const[,R]=k;C=R}else{const[,R,j]=k;C=R,w=j||""}const _=o(C.trim());return{type:e,raw:k[0],content:w.trim(),attributes:_}}},renderMarkdown:y=>{let x="";r?x=r(y):y.content&&y.content.length>0&&(x=y.content.filter(w=>w.type==="text").map(w=>w.text).join(""));const S=p(y.attrs||{}),E=s(S),k=E?` ${E}`:"";return u?`[${h}${k}]`:`[${h}${k}]${x}[/${h}]`}}}function $v(t,e,n){var r,o,s,l;const u=t.split(`
`),d=[];let h="",p=0;const g=e.baseIndentSize||2;for(;p<u.length;){const y=u[p],x=y.match(e.itemPattern);if(!x){if(d.length>0)break;if(y.trim()===""){p+=1,h=`${h}${y}
`;continue}else return}const S=e.extractItemData(x),{indentLevel:E,mainContent:k}=S;h=`${h}${y}
`;const w=[k];for(p+=1;p<u.length;){const j=u[p];if(j.trim()===""){const B=u.slice(p+1).findIndex(J=>J.trim()!=="");if(B===-1)break;if((((o=(r=u[p+1+B].match(/^(\s*)/))==null?void 0:r[1])==null?void 0:o.length)||0)>E){w.push(j),h=`${h}${j}
`,p+=1;continue}else break}if((((l=(s=j.match(/^(\s*)/))==null?void 0:s[1])==null?void 0:l.length)||0)>E)w.push(j),h=`${h}${j}
`,p+=1;else break}let C;const _=w.slice(1);if(_.length>0){const j=_.map(z=>z.slice(E+g)).join(`
`);j.trim()&&(e.customNestedParser?C=e.customNestedParser(j):C=n.blockTokens(j))}const R=e.createToken(S,C);d.push(R)}if(d.length!==0)return{items:d,raw:h}}function ry(t,e,n,r){if(!t||!Array.isArray(t.content))return"";const o=typeof n=="function"?n(r):n,[s,...l]=t.content,u=e.renderChildren([s]),d=[`${o}${u}`];return l&&l.length>0&&l.forEach(h=>{const p=e.renderChildren([h]);if(p){const g=p.split(`
`).map(y=>y?e.indent(y):"").join(`
`);d.push(g)}}),d.join(`
`)}function MB(t,e,n={}){const{state:r}=e,{doc:o,tr:s}=r,l=t;o.descendants((u,d)=>{const h=s.mapping.map(d),p=s.mapping.map(d)+u.nodeSize;let g=null;if(u.marks.forEach(x=>{if(x!==l)return!1;g=x}),!g)return;let y=!1;if(Object.keys(n).forEach(x=>{n[x]!==g.attrs[x]&&(y=!0)}),y){const x=t.type.create({...t.attrs,...n});s.removeMark(h,p,t.type),s.addMark(h,p,x)}}),s.docChanged&&e.view.dispatch(s)}var kr=class _C extends ey{constructor(){super(...arguments),this.type="node"}static create(e={}){const n=typeof e=="function"?e():e;return new _C(n)}configure(e){return super.configure(e)}extend(e){const n=typeof e=="function"?e():e;return super.extend(n)}};function da(t){return new dB({find:t.find,handler:({state:e,range:n,match:r,pasteEvent:o})=>{const s=Et(t.getAttributes,void 0,r,o);if(s===!1||s===null)return null;const{tr:l}=e,u=r[r.length-1],d=r[0];let h=n.to;if(u){const p=d.search(/\S/),g=n.from+d.indexOf(u),y=g+u.length;if(Z0(n.from,n.to,e.doc).filter(S=>S.mark.type.excluded.find(k=>k===t.type&&k!==S.mark.type)).filter(S=>S.to>g).length)return null;y<n.to&&l.delete(y,n.to),g>n.from&&l.delete(n.from+p,g),h=n.from+p+u.length,l.addMark(n.from+p,h,t.type.create(s||{})),l.removeStoredMark(t.type)}}})}const OB="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",jB="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",Kv="numeric",Yv="ascii",Xv="alpha",ru="asciinumeric",Kc="alphanumeric",Jv="domain",MC="emoji",RB="scheme",NB="slashscheme",$g="whitespace";function DB(t,e){return t in e||(e[t]=[]),e[t]}function Qs(t,e,n){e[Kv]&&(e[ru]=!0,e[Kc]=!0),e[Yv]&&(e[ru]=!0,e[Xv]=!0),e[ru]&&(e[Kc]=!0),e[Xv]&&(e[Kc]=!0),e[Kc]&&(e[Jv]=!0),e[MC]&&(e[Jv]=!0);for(const r in e){const o=DB(r,n);o.indexOf(t)<0&&o.push(t)}}function LB(t,e){const n={};for(const r in e)e[r].indexOf(t)>=0&&(n[r]=!0);return n}function ur(t=null){this.j={},this.jr=[],this.jd=null,this.t=t}ur.groups={};ur.prototype={accepts(){return!!this.t},go(t){const e=this,n=e.j[t];if(n)return n;for(let r=0;r<e.jr.length;r++){const o=e.jr[r][0],s=e.jr[r][1];if(s&&o.test(t))return s}return e.jd},has(t,e=!1){return e?t in this.j:!!this.go(t)},ta(t,e,n,r){for(let o=0;o<t.length;o++)this.tt(t[o],e,n,r)},tr(t,e,n,r){r=r||ur.groups;let o;return e&&e.j?o=e:(o=new ur(e),n&&r&&Qs(e,n,r)),this.jr.push([t,o]),o},ts(t,e,n,r){let o=this;const s=t.length;if(!s)return o;for(let l=0;l<s-1;l++)o=o.tt(t[l]);return o.tt(t[s-1],e,n,r)},tt(t,e,n,r){r=r||ur.groups;const o=this;if(e&&e.j)return o.j[t]=e,e;const s=e;let l,u=o.go(t);if(u?(l=new ur,Object.assign(l.j,u.j),l.jr.push.apply(l.jr,u.jr),l.jd=u.jd,l.t=u.t):l=new ur,s){if(r)if(l.t&&typeof l.t=="string"){const d=Object.assign(LB(l.t,r),n);Qs(s,d,r)}else n&&Qs(s,n,r);l.t=s}return o.j[t]=l,l}};const Xe=(t,e,n,r,o)=>t.ta(e,n,r,o),Qt=(t,e,n,r,o)=>t.tr(e,n,r,o),Mk=(t,e,n,r,o)=>t.ts(e,n,r,o),le=(t,e,n,r,o)=>t.tt(e,n,r,o),Xi="WORD",Qv="UWORD",OC="ASCIINUMERICAL",jC="ALPHANUMERICAL",xu="LOCALHOST",Zv="TLD",e0="UTLD",Of="SCHEME",ml="SLASH_SCHEME",iy="NUM",t0="WS",oy="NL",iu="OPENBRACE",ou="CLOSEBRACE",rh="OPENBRACKET",ih="CLOSEBRACKET",oh="OPENPAREN",sh="CLOSEPAREN",ah="OPENANGLEBRACKET",lh="CLOSEANGLEBRACKET",ch="FULLWIDTHLEFTPAREN",uh="FULLWIDTHRIGHTPAREN",dh="LEFTCORNERBRACKET",fh="RIGHTCORNERBRACKET",hh="LEFTWHITECORNERBRACKET",ph="RIGHTWHITECORNERBRACKET",mh="FULLWIDTHLESSTHAN",gh="FULLWIDTHGREATERTHAN",vh="AMPERSAND",yh="APOSTROPHE",bh="ASTERISK",Ko="AT",xh="BACKSLASH",Sh="BACKTICK",Eh="CARET",Qo="COLON",sy="COMMA",kh="DOLLAR",mi="DOT",Th="EQUALS",ay="EXCLAMATION",Ir="HYPHEN",su="PERCENT",wh="PIPE",Ch="PLUS",Ah="POUND",au="QUERY",ly="QUOTE",RC="FULLWIDTHMIDDLEDOT",cy="SEMI",gi="SLASH",lu="TILDE",_h="UNDERSCORE",NC="EMOJI",Mh="SYM";var DC=Object.freeze({__proto__:null,ALPHANUMERICAL:jC,AMPERSAND:vh,APOSTROPHE:yh,ASCIINUMERICAL:OC,ASTERISK:bh,AT:Ko,BACKSLASH:xh,BACKTICK:Sh,CARET:Eh,CLOSEANGLEBRACKET:lh,CLOSEBRACE:ou,CLOSEBRACKET:ih,CLOSEPAREN:sh,COLON:Qo,COMMA:sy,DOLLAR:kh,DOT:mi,EMOJI:NC,EQUALS:Th,EXCLAMATION:ay,FULLWIDTHGREATERTHAN:gh,FULLWIDTHLEFTPAREN:ch,FULLWIDTHLESSTHAN:mh,FULLWIDTHMIDDLEDOT:RC,FULLWIDTHRIGHTPAREN:uh,HYPHEN:Ir,LEFTCORNERBRACKET:dh,LEFTWHITECORNERBRACKET:hh,LOCALHOST:xu,NL:oy,NUM:iy,OPENANGLEBRACKET:ah,OPENBRACE:iu,OPENBRACKET:rh,OPENPAREN:oh,PERCENT:su,PIPE:wh,PLUS:Ch,POUND:Ah,QUERY:au,QUOTE:ly,RIGHTCORNERBRACKET:fh,RIGHTWHITECORNERBRACKET:ph,SCHEME:Of,SEMI:cy,SLASH:gi,SLASH_SCHEME:ml,SYM:Mh,TILDE:lu,TLD:Zv,UNDERSCORE:_h,UTLD:e0,UWORD:Qv,WORD:Xi,WS:t0});const Ki=/[a-z]/,Pc=new RegExp("\\p{L}","u"),Kg=new RegExp("\\p{Emoji}","u"),Yi=/\d/,Yg=/\s/,Ok="\r",Xg=`
`,zB="",IB="",Jg="";let hf=null,pf=null;function BB(t=[]){const e={};ur.groups=e;const n=new ur;hf==null&&(hf=jk(OB)),pf==null&&(pf=jk(jB)),le(n,"'",yh),le(n,"{",iu),le(n,"}",ou),le(n,"[",rh),le(n,"]",ih),le(n,"(",oh),le(n,")",sh),le(n,"<",ah),le(n,">",lh),le(n,"",ch),le(n,"",uh),le(n,"",dh),le(n,"",fh),le(n,"",hh),le(n,"",ph),le(n,"",mh),le(n,"",gh),le(n,"&",vh),le(n,"*",bh),le(n,"@",Ko),le(n,"`",Sh),le(n,"^",Eh),le(n,":",Qo),le(n,",",sy),le(n,"$",kh),le(n,".",mi),le(n,"=",Th),le(n,"!",ay),le(n,"-",Ir),le(n,"%",su),le(n,"|",wh),le(n,"+",Ch),le(n,"#",Ah),le(n,"?",au),le(n,'"',ly),le(n,"/",gi),le(n,";",cy),le(n,"~",lu),le(n,"_",_h),le(n,"\\",xh),le(n,"",RC);const r=Qt(n,Yi,iy,{[Kv]:!0});Qt(r,Yi,r);const o=Qt(r,Ki,OC,{[ru]:!0}),s=Qt(r,Pc,jC,{[Kc]:!0}),l=Qt(n,Ki,Xi,{[Yv]:!0});Qt(l,Yi,o),Qt(l,Ki,l),Qt(o,Yi,o),Qt(o,Ki,o);const u=Qt(n,Pc,Qv,{[Xv]:!0});Qt(u,Ki),Qt(u,Yi,s),Qt(u,Pc,u),Qt(s,Yi,s),Qt(s,Ki),Qt(s,Pc,s);const d=le(n,Xg,oy,{[$g]:!0}),h=le(n,Ok,t0,{[$g]:!0}),p=Qt(n,Yg,t0,{[$g]:!0});le(n,Jg,p),le(h,Xg,d),le(h,Jg,p),Qt(h,Yg,p),le(p,Ok),le(p,Xg),Qt(p,Yg,p),le(p,Jg,p);const g=Qt(n,Kg,NC,{[MC]:!0});le(g,"#"),Qt(g,Kg,g),le(g,zB,g);const y=le(g,IB);le(y,"#"),Qt(y,Kg,g);const x=[[Ki,l],[Yi,o]],S=[[Ki,null],[Pc,u],[Yi,s]];for(let E=0;E<hf.length;E++)Ho(n,hf[E],Zv,Xi,x);for(let E=0;E<pf.length;E++)Ho(n,pf[E],e0,Qv,S);Qs(Zv,{tld:!0,ascii:!0},e),Qs(e0,{utld:!0,alpha:!0},e),Ho(n,"file",Of,Xi,x),Ho(n,"mailto",Of,Xi,x),Ho(n,"http",ml,Xi,x),Ho(n,"https",ml,Xi,x),Ho(n,"ftp",ml,Xi,x),Ho(n,"ftps",ml,Xi,x),Qs(Of,{scheme:!0,ascii:!0},e),Qs(ml,{slashscheme:!0,ascii:!0},e),t=t.sort((E,k)=>E[0]>k[0]?1:-1);for(let E=0;E<t.length;E++){const k=t[E][0],C=t[E][1]?{[RB]:!0}:{[NB]:!0};k.indexOf("-")>=0?C[Jv]=!0:Ki.test(k)?Yi.test(k)?C[ru]=!0:C[Yv]=!0:C[Kv]=!0,Mk(n,k,k,C)}return Mk(n,"localhost",xu,{ascii:!0}),n.jd=new ur(Mh),{start:n,tokens:Object.assign({groups:e},DC)}}function LC(t,e){const n=PB(e.replace(/[A-Z]/g,u=>u.toLowerCase())),r=n.length,o=[];let s=0,l=0;for(;l<r;){let u=t,d=null,h=0,p=null,g=-1,y=-1;for(;l<r&&(d=u.go(n[l]));)u=d,u.accepts()?(g=0,y=0,p=u):g>=0&&(g+=n[l].length,y++),h+=n[l].length,s+=n[l].length,l++;s-=g,l-=y,h-=g,o.push({t:p.t,v:e.slice(s-h,s),s:s-h,e:s})}return o}function PB(t){const e=[],n=t.length;let r=0;for(;r<n;){let o=t.charCodeAt(r),s,l=o<55296||o>56319||r+1===n||(s=t.charCodeAt(r+1))<56320||s>57343?t[r]:t.slice(r,r+2);e.push(l),r+=l.length}return e}function Ho(t,e,n,r,o){let s;const l=e.length;for(let u=0;u<l-1;u++){const d=e[u];t.j[d]?s=t.j[d]:(s=new ur(r),s.jr=o.slice(),t.j[d]=s),t=s}return s=new ur(n),s.jr=o.slice(),t.j[e[l-1]]=s,s}function jk(t){const e=[],n=[];let r=0,o="0123456789";for(;r<t.length;){let s=0;for(;o.indexOf(t[r+s])>=0;)s++;if(s>0){e.push(n.join(""));for(let l=parseInt(t.substring(r,r+s),10);l>0;l--)n.pop();r+=s}else n.push(t[r]),r++}return e}const Su={defaultProtocol:"http",events:null,format:Rk,formatHref:Rk,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function uy(t,e=null){let n=Object.assign({},Su);t&&(n=Object.assign(n,t instanceof uy?t.o:t));const r=n.ignoreTags,o=[];for(let s=0;s<r.length;s++)o.push(r[s].toUpperCase());this.o=n,e&&(this.defaultRender=e),this.ignoreTags=o}uy.prototype={o:Su,ignoreTags:[],defaultRender(t){return t},check(t){return this.get("validate",t.toString(),t)},get(t,e,n){const r=e!=null;let o=this.o[t];return o&&(typeof o=="object"?(o=n.t in o?o[n.t]:Su[t],typeof o=="function"&&r&&(o=o(e,n))):typeof o=="function"&&r&&(o=o(e,n.t,n)),o)},getObj(t,e,n){let r=this.o[t];return typeof r=="function"&&e!=null&&(r=r(e,n.t,n)),r},render(t){const e=t.render(this);return(this.get("render",null,t)||this.defaultRender)(e,t.t,t)}};function Rk(t){return t}function zC(t,e){this.t="token",this.v=t,this.tk=e}zC.prototype={isLink:!1,toString(){return this.v},toHref(t){return this.toString()},toFormattedString(t){const e=this.toString(),n=t.get("truncate",e,this),r=t.get("format",e,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(t){return t.get("formatHref",this.toHref(t.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(t=Su.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(t),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(t){return{type:this.t,value:this.toFormattedString(t),isLink:this.isLink,href:this.toFormattedHref(t),start:this.startIndex(),end:this.endIndex()}},validate(t){return t.get("validate",this.toString(),this)},render(t){const e=this,n=this.toHref(t.get("defaultProtocol")),r=t.get("formatHref",n,this),o=t.get("tagName",n,e),s=this.toFormattedString(t),l={},u=t.get("className",n,e),d=t.get("target",n,e),h=t.get("rel",n,e),p=t.getObj("attributes",n,e),g=t.getObj("events",n,e);return l.href=r,u&&(l.class=u),d&&(l.target=d),h&&(l.rel=h),p&&Object.assign(l,p),{tagName:o,attributes:l,content:s,eventListeners:g}}};function np(t,e){class n extends zC{constructor(o,s){super(o,s),this.t=t}}for(const r in e)n.prototype[r]=e[r];return n.t=t,n}const Nk=np("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Dk=np("text"),UB=np("nl"),mf=np("url",{isLink:!0,toHref(t=Su.defaultProtocol){return this.hasProtocol()?this.v:`${t}://${this.v}`},hasProtocol(){const t=this.tk;return t.length>=2&&t[0].t!==xu&&t[1].t===Qo}}),zr=t=>new ur(t);function HB({groups:t}){const e=t.domain.concat([vh,bh,Ko,xh,Sh,Eh,kh,Th,Ir,iy,su,wh,Ch,Ah,gi,Mh,lu,_h]),n=[yh,Qo,sy,mi,ay,su,au,ly,cy,ah,lh,iu,ou,ih,rh,oh,sh,ch,uh,dh,fh,hh,ph,mh,gh],r=[vh,yh,bh,xh,Sh,Eh,kh,Th,Ir,iu,ou,su,wh,Ch,Ah,au,gi,Mh,lu,_h],o=zr(),s=le(o,lu);Xe(s,r,s),Xe(s,t.domain,s);const l=zr(),u=zr(),d=zr();Xe(o,t.domain,l),Xe(o,t.scheme,u),Xe(o,t.slashscheme,d),Xe(l,r,s),Xe(l,t.domain,l);const h=le(l,Ko);le(s,Ko,h),le(u,Ko,h),le(d,Ko,h);const p=le(s,mi);Xe(p,r,s),Xe(p,t.domain,s);const g=zr();Xe(h,t.domain,g),Xe(g,t.domain,g);const y=le(g,mi);Xe(y,t.domain,g);const x=zr(Nk);Xe(y,t.tld,x),Xe(y,t.utld,x),le(h,xu,x);const S=le(g,Ir);le(S,Ir,S),Xe(S,t.domain,g),Xe(x,t.domain,g),le(x,mi,y),le(x,Ir,S);const E=le(x,Qo);Xe(E,t.numeric,Nk);const k=le(l,Ir),w=le(l,mi);le(k,Ir,k),Xe(k,t.domain,l),Xe(w,r,s),Xe(w,t.domain,l);const C=zr(mf);Xe(w,t.tld,C),Xe(w,t.utld,C),Xe(C,t.domain,l),Xe(C,r,s),le(C,mi,w),le(C,Ir,k),le(C,Ko,h);const _=le(C,Qo),R=zr(mf);Xe(_,t.numeric,R);const j=zr(mf),z=zr();Xe(j,e,j),Xe(j,n,z),Xe(z,e,j),Xe(z,n,z),le(C,gi,j),le(R,gi,j);const B=le(u,Qo),K=le(d,Qo),W=le(K,gi),J=le(W,gi);Xe(u,t.domain,l),le(u,mi,w),le(u,Ir,k),Xe(d,t.domain,l),le(d,mi,w),le(d,Ir,k),Xe(B,t.domain,j),le(B,gi,j),le(B,au,j),Xe(J,t.domain,j),Xe(J,e,j),le(J,gi,j);const Z=[[iu,ou],[rh,ih],[oh,sh],[ah,lh],[ch,uh],[dh,fh],[hh,ph],[mh,gh]];for(let te=0;te<Z.length;te++){const[je,ke]=Z[te],me=le(j,je);le(z,je,me),le(me,ke,j);const H=zr(mf);Xe(me,e,H);const ne=zr();Xe(me,n),Xe(H,e,H),Xe(H,n,ne),Xe(ne,e,H),Xe(ne,n,ne),le(H,ke,j),le(ne,ke,j)}return le(o,xu,C),le(o,oy,UB),{start:o,tokens:DC}}function qB(t,e,n){let r=n.length,o=0,s=[],l=[];for(;o<r;){let u=t,d=null,h=null,p=0,g=null,y=-1;for(;o<r&&!(d=u.go(n[o].t));)l.push(n[o++]);for(;o<r&&(h=d||u.go(n[o].t));)d=null,u=h,u.accepts()?(y=0,g=u):y>=0&&y++,o++,p++;if(y<0)o-=p,o<r&&(l.push(n[o]),o++);else{l.length>0&&(s.push(Qg(Dk,e,l)),l=[]),o-=y,p-=y;const x=g.t,S=n.slice(o-p,o);s.push(Qg(x,e,S))}}return l.length>0&&s.push(Qg(Dk,e,l)),s}function Qg(t,e,n){const r=n[0].s,o=n[n.length-1].e,s=e.slice(r,o);return new t(s,n)}const VB=typeof console<"u"&&console&&console.warn||(()=>{}),FB="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Lt={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function WB(){return ur.groups={},Lt.scanner=null,Lt.parser=null,Lt.tokenQueue=[],Lt.pluginQueue=[],Lt.customSchemes=[],Lt.initialized=!1,Lt}function Lk(t,e=!1){if(Lt.initialized&&VB(`linkifyjs: already initialized - will not register custom scheme "${t}" ${FB}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(t))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Lt.customSchemes.push([t,e])}function GB(){Lt.scanner=BB(Lt.customSchemes);for(let t=0;t<Lt.tokenQueue.length;t++)Lt.tokenQueue[t][1]({scanner:Lt.scanner});Lt.parser=HB(Lt.scanner.tokens);for(let t=0;t<Lt.pluginQueue.length;t++)Lt.pluginQueue[t][1]({scanner:Lt.scanner,parser:Lt.parser});return Lt.initialized=!0,Lt}function dy(t){return Lt.initialized||GB(),qB(Lt.parser.start,t,LC(Lt.scanner.start,t))}dy.scan=LC;function IC(t,e=null,n=null){if(e&&typeof e=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${e}; must be a string`);n=e,e=null}const r=new uy(n),o=dy(t),s=[];for(let l=0;l<o.length;l++){const u=o[l];u.isLink&&(!e||u.t===e)&&r.check(u)&&s.push(u.toFormattedObject(r))}return s}var fy="[\0- -\u2029]",$B=new RegExp(fy),KB=new RegExp(`${fy}$`),YB=new RegExp(fy,"g");function XB(t){return t.length===1?t[0].isLink:t.length===3&&t[1].isLink?["()","[]"].includes(t[0].value+t[2].value):!1}function JB(t){return new Kt({key:new vn("autolink"),appendTransaction:(e,n,r)=>{const o=e.some(h=>h.docChanged)&&!n.doc.eq(r.doc),s=e.some(h=>h.getMeta("preventAutolink"));if(!o||s)return;const{tr:l}=r,u=rC(n.doc,[...e]);if(uC(u).forEach(({newRange:h})=>{const p=E6(r.doc,h,x=>x.isTextblock);let g,y;if(p.length>1)g=p[0],y=r.doc.textBetween(g.pos,g.pos+g.node.nodeSize,void 0," ");else if(p.length){const x=r.doc.textBetween(h.from,h.to," "," ");if(!KB.test(x))return;g=p[0],y=r.doc.textBetween(g.pos,h.to,void 0," ")}if(g&&y){const x=y.split($B).filter(Boolean);if(x.length<=0)return!1;const S=x[x.length-1],E=g.pos+y.lastIndexOf(S);if(!S)return!1;const k=dy(S).map(w=>w.toObject(t.defaultProtocol));if(!XB(k))return!1;k.filter(w=>w.isLink).map(w=>({...w,from:E+w.start+1,to:E+w.end+1})).filter(w=>r.schema.marks.code?!r.doc.rangeHasMark(w.from,w.to,r.schema.marks.code):!0).filter(w=>t.validate(w.value)).filter(w=>t.shouldAutoLink(w.value)).forEach(w=>{Z0(w.from,w.to,r.doc).some(C=>C.mark.type===t.type)||l.addMark(w.from,w.to,t.type.create({href:w.href}))})}}),!!l.steps.length)return l}})}function QB(t){return new Kt({key:new vn("handleClickLink"),props:{handleClick:(e,n,r)=>{var o,s;if(r.button!==0||!e.editable)return!1;let l=null;if(r.target instanceof HTMLAnchorElement)l=r.target;else{const d=r.target;if(!d)return!1;const h=t.editor.view.dom;l=d.closest("a"),l&&!h.contains(l)&&(l=null)}if(!l)return!1;let u=!1;if(t.enableClickSelection&&(u=t.editor.commands.extendMarkRange(t.type.name)),t.openOnClick){const d=cC(e.state,t.type.name),h=(o=l.href)!=null?o:d.href,p=(s=l.target)!=null?s:d.target;h&&(window.open(h,p),u=!0)}return u}}})}function ZB(t){return new Kt({key:new vn("handlePasteLink"),props:{handlePaste:(e,n,r)=>{const{shouldAutoLink:o}=t,{state:s}=e,{selection:l}=s,{empty:u}=l;if(u)return!1;let d="";r.content.forEach(p=>{d+=p.textContent});const h=IC(d,{defaultProtocol:t.defaultProtocol}).find(p=>p.isLink&&p.value===d);return!d||!h||o!==void 0&&!o(h.value)?!1:t.editor.commands.setMark(t.type,{href:h.href})}}})}function Vs(t,e){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return e&&e.forEach(r=>{const o=typeof r=="string"?r:r.scheme;o&&n.push(o)}),!t||t.replace(YB,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var eP=va.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(t=>{if(typeof t=="string"){Lk(t);return}Lk(t.scheme,t.optionalSlashes)})},onDestroy(){WB()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(t,e)=>!!Vs(t,e.protocols),validate:t=>!!t,shouldAutoLink:t=>{const e=/^[a-z][a-z0-9+.-]*:\/\//i.test(t),n=/^[a-z][a-z0-9+.-]*:/i.test(t);if(e||n&&!t.includes("@"))return!0;const o=(t.includes("@")?t.split("@").pop():t).split(/[/?#:]/)[0];return!(/^\d{1,3}(\.\d{1,3}){3}$/.test(o)||!/\./.test(o))}}},addAttributes(){return{href:{default:null,parseHTML(t){return t.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:t=>{const e=t.getAttribute("href");return!e||!this.options.isAllowedUri(e,{defaultValidate:n=>!!Vs(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:t}){return this.options.isAllowedUri(t.href,{defaultValidate:e=>!!Vs(e,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",pn(this.options.HTMLAttributes,t),0]:["a",pn(this.options.HTMLAttributes,{...t,href:""}),0]},markdownTokenName:"link",parseMarkdown:(t,e)=>e.applyMark("link",e.parseInline(t.tokens||[]),{href:t.href,title:t.title||null}),renderMarkdown:(t,e)=>{var n;const r=((n=t.attrs)==null?void 0:n.href)||"";return`[${e.renderChildren(t)}](${r})`},addCommands(){return{setLink:t=>({chain:e})=>{const{href:n}=t;return this.options.isAllowedUri(n,{defaultValidate:r=>!!Vs(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?e().setMark(this.name,t).setMeta("preventAutolink",!0).run():!1},toggleLink:t=>({chain:e})=>{const{href:n}=t||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!Vs(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:e().toggleMark(this.name,t,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:t})=>t().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[da({find:t=>{const e=[];if(t){const{protocols:n,defaultProtocol:r}=this.options,o=IC(t).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:l=>!!Vs(l,n),protocols:n,defaultProtocol:r}));o.length&&o.forEach(s=>{this.options.shouldAutoLink(s.value)&&e.push({text:s.value,data:{href:s.href},index:s.start})})}return e},type:this.type,getAttributes:t=>{var e;return{href:(e=t.data)==null?void 0:e.href}}})]},addProseMirrorPlugins(){const t=[],{protocols:e,defaultProtocol:n}=this.options;return this.options.autolink&&t.push(JB({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:o=>!!Vs(o,e),protocols:e,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),t.push(QB({type:this.type,editor:this.editor,openOnClick:this.options.openOnClick==="whenNotEditable"?!0:this.options.openOnClick,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&t.push(ZB({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type,shouldAutoLink:this.options.shouldAutoLink})),t}}),ya={root:"m_dd3f7539",Typography:"m_f2016866",content:"m_c2204cc2",linkEditorDropdown:"m_8a991b4f",control:"m_c2207da6",controlIcon:"m_9cdfeb3f",controlsGroup:"m_2ab47ef2",linkEditor:"m_b67b711e",linkEditorInput:"m_296cf94c",linkEditorExternalControl:"m_cfef614",linkEditorSave:"m_3b28e7bb",toolbar:"m_4574a3c4",taskList:"m_8b44009a"};const tP={linkControlLabel:"Link",colorPickerControlLabel:"Text color",highlightControlLabel:"Highlight text",colorControlLabel:t=>`Set text color ${t}`,boldControlLabel:"Bold",italicControlLabel:"Italic",underlineControlLabel:"Underline",strikeControlLabel:"Strikethrough",clearFormattingControlLabel:"Clear formatting",unlinkControlLabel:"Remove link",bulletListControlLabel:"Bullet list",orderedListControlLabel:"Ordered list",sourceCodeControlLabel:"Switch between text/source code",h1ControlLabel:"Heading 1",h2ControlLabel:"Heading 2",h3ControlLabel:"Heading 3",h4ControlLabel:"Heading 4",h5ControlLabel:"Heading 5",h6ControlLabel:"Heading 6",blockquoteControlLabel:"Blockquote",alignLeftControlLabel:"Align text: left",alignCenterControlLabel:"Align text: center",alignRightControlLabel:"Align text: right",alignJustifyControlLabel:"Align text: justify",codeControlLabel:"Code",codeBlockControlLabel:"Code block",subscriptControlLabel:"Subscript",superscriptControlLabel:"Superscript",unsetColorControlLabel:"Unset color",hrControlLabel:"Horizontal line",undoControlLabel:"Undo",redoControlLabel:"Redo",tasksControlLabel:"Task list",tasksSinkLabel:"Decrease task level",tasksLiftLabel:"Increase task level",linkEditorInputLabel:"Enter URL",linkEditorInputPlaceholder:"https://example.com/",linkEditorExternalLink:"Open link in a new tab",linkEditorInternalLink:"Open link in the same tab",linkEditorSave:"Save",colorPickerCancel:"Cancel",colorPickerClear:"Clear color",colorPickerColorPicker:"Color picker",colorPickerPalette:"Color palette",colorPickerSave:"Save",colorPickerColorLabel:t=>`Set text color ${t}`},[nP,wi]=MM("RichTextEditor component was not found in tree");var Zg={exports:{}},ev={};var zk;function rP(){if(zk)return ev;zk=1;var t=zh();function e(g,y){return g===y&&(g!==0||1/g===1/y)||g!==g&&y!==y}var n=typeof Object.is=="function"?Object.is:e,r=t.useState,o=t.useEffect,s=t.useLayoutEffect,l=t.useDebugValue;function u(g,y){var x=y(),S=r({inst:{value:x,getSnapshot:y}}),E=S[0].inst,k=S[1];return s(function(){E.value=x,E.getSnapshot=y,d(E)&&k({inst:E})},[g,x,y]),o(function(){return d(E)&&k({inst:E}),g(function(){d(E)&&k({inst:E})})},[g]),l(x),x}function d(g){var y=g.getSnapshot;g=g.value;try{var x=y();return!n(g,x)}catch{return!0}}function h(g,y){return y()}var p=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?h:u;return ev.useSyncExternalStore=t.useSyncExternalStore!==void 0?t.useSyncExternalStore:p,ev}var Ik;function BC(){return Ik||(Ik=1,Zg.exports=rP()),Zg.exports}var PC=BC();const{getOwnPropertyNames:iP,getOwnPropertySymbols:oP}=Object,{hasOwnProperty:sP}=Object.prototype;function tv(t,e){return function(r,o,s){return t(r,o,s)&&e(r,o,s)}}function gf(t){return function(n,r,o){if(!n||!r||typeof n!="object"||typeof r!="object")return t(n,r,o);const{cache:s}=o,l=s.get(n),u=s.get(r);if(l&&u)return l===r&&u===n;s.set(n,r),s.set(r,n);const d=t(n,r,o);return s.delete(n),s.delete(r),d}}function aP(t){return t?.[Symbol.toStringTag]}function Bk(t){return iP(t).concat(oP(t))}const lP=Object.hasOwn||((t,e)=>sP.call(t,e));function ba(t,e){return t===e||!t&&!e&&t!==t&&e!==e}const cP="__v",uP="__o",dP="_owner",{getOwnPropertyDescriptor:Pk,keys:Uk}=Object;function fP(t,e){return t.byteLength===e.byteLength&&Oh(new Uint8Array(t),new Uint8Array(e))}function hP(t,e,n){let r=t.length;if(e.length!==r)return!1;for(;r-- >0;)if(!n.equals(t[r],e[r],r,r,t,e,n))return!1;return!0}function pP(t,e){return t.byteLength===e.byteLength&&Oh(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}function mP(t,e){return ba(t.getTime(),e.getTime())}function gP(t,e){return t.name===e.name&&t.message===e.message&&t.cause===e.cause&&t.stack===e.stack}function vP(t,e){return t===e}function Hk(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const o=new Array(r),s=t.entries();let l,u,d=0;for(;(l=s.next())&&!l.done;){const h=e.entries();let p=!1,g=0;for(;(u=h.next())&&!u.done;){if(o[g]){g++;continue}const y=l.value,x=u.value;if(n.equals(y[0],x[0],d,g,t,e,n)&&n.equals(y[1],x[1],y[0],x[0],t,e,n)){p=o[g]=!0;break}g++}if(!p)return!1;d++}return!0}const yP=ba;function bP(t,e,n){const r=Uk(t);let o=r.length;if(Uk(e).length!==o)return!1;for(;o-- >0;)if(!UC(t,e,n,r[o]))return!1;return!0}function Uc(t,e,n){const r=Bk(t);let o=r.length;if(Bk(e).length!==o)return!1;let s,l,u;for(;o-- >0;)if(s=r[o],!UC(t,e,n,s)||(l=Pk(t,s),u=Pk(e,s),(l||u)&&(!l||!u||l.configurable!==u.configurable||l.enumerable!==u.enumerable||l.writable!==u.writable)))return!1;return!0}function xP(t,e){return ba(t.valueOf(),e.valueOf())}function SP(t,e){return t.source===e.source&&t.flags===e.flags}function qk(t,e,n){const r=t.size;if(r!==e.size)return!1;if(!r)return!0;const o=new Array(r),s=t.values();let l,u;for(;(l=s.next())&&!l.done;){const d=e.values();let h=!1,p=0;for(;(u=d.next())&&!u.done;){if(!o[p]&&n.equals(l.value,u.value,l.value,u.value,t,e,n)){h=o[p]=!0;break}p++}if(!h)return!1}return!0}function Oh(t,e){let n=t.byteLength;if(e.byteLength!==n||t.byteOffset!==e.byteOffset)return!1;for(;n-- >0;)if(t[n]!==e[n])return!1;return!0}function EP(t,e){return t.hostname===e.hostname&&t.pathname===e.pathname&&t.protocol===e.protocol&&t.port===e.port&&t.hash===e.hash&&t.username===e.username&&t.password===e.password}function UC(t,e,n,r){return(r===dP||r===uP||r===cP)&&(t.$$typeof||e.$$typeof)?!0:lP(e,r)&&n.equals(t[r],e[r],r,r,t,e,n)}const kP="[object ArrayBuffer]",TP="[object Arguments]",wP="[object Boolean]",CP="[object DataView]",AP="[object Date]",_P="[object Error]",MP="[object Map]",OP="[object Number]",jP="[object Object]",RP="[object RegExp]",NP="[object Set]",DP="[object String]",LP={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},zP="[object URL]",IP=Object.prototype.toString;function BP({areArrayBuffersEqual:t,areArraysEqual:e,areDataViewsEqual:n,areDatesEqual:r,areErrorsEqual:o,areFunctionsEqual:s,areMapsEqual:l,areNumbersEqual:u,areObjectsEqual:d,arePrimitiveWrappersEqual:h,areRegExpsEqual:p,areSetsEqual:g,areTypedArraysEqual:y,areUrlsEqual:x,unknownTagComparators:S}){return function(k,w,C){if(k===w)return!0;if(k==null||w==null)return!1;const _=typeof k;if(_!==typeof w)return!1;if(_!=="object")return _==="number"?u(k,w,C):_==="function"?s(k,w,C):!1;const R=k.constructor;if(R!==w.constructor)return!1;if(R===Object)return d(k,w,C);if(Array.isArray(k))return e(k,w,C);if(R===Date)return r(k,w,C);if(R===RegExp)return p(k,w,C);if(R===Map)return l(k,w,C);if(R===Set)return g(k,w,C);const j=IP.call(k);if(j===AP)return r(k,w,C);if(j===RP)return p(k,w,C);if(j===MP)return l(k,w,C);if(j===NP)return g(k,w,C);if(j===jP)return typeof k.then!="function"&&typeof w.then!="function"&&d(k,w,C);if(j===zP)return x(k,w,C);if(j===_P)return o(k,w,C);if(j===TP)return d(k,w,C);if(LP[j])return y(k,w,C);if(j===kP)return t(k,w,C);if(j===CP)return n(k,w,C);if(j===wP||j===OP||j===DP)return h(k,w,C);if(S){let z=S[j];if(!z){const B=aP(k);B&&(z=S[B])}if(z)return z(k,w,C)}return!1}}function PP({circular:t,createCustomConfig:e,strict:n}){let r={areArrayBuffersEqual:fP,areArraysEqual:n?Uc:hP,areDataViewsEqual:pP,areDatesEqual:mP,areErrorsEqual:gP,areFunctionsEqual:vP,areMapsEqual:n?tv(Hk,Uc):Hk,areNumbersEqual:yP,areObjectsEqual:n?Uc:bP,arePrimitiveWrappersEqual:xP,areRegExpsEqual:SP,areSetsEqual:n?tv(qk,Uc):qk,areTypedArraysEqual:n?tv(Oh,Uc):Oh,areUrlsEqual:EP,unknownTagComparators:void 0};if(e&&(r=Object.assign({},r,e(r))),t){const o=gf(r.areArraysEqual),s=gf(r.areMapsEqual),l=gf(r.areObjectsEqual),u=gf(r.areSetsEqual);r=Object.assign({},r,{areArraysEqual:o,areMapsEqual:s,areObjectsEqual:l,areSetsEqual:u})}return r}function UP(t){return function(e,n,r,o,s,l,u){return t(e,n,u)}}function HP({circular:t,comparator:e,createState:n,equals:r,strict:o}){if(n)return function(u,d){const{cache:h=t?new WeakMap:void 0,meta:p}=n();return e(u,d,{cache:h,equals:r,meta:p,strict:o})};if(t)return function(u,d){return e(u,d,{cache:new WeakMap,equals:r,meta:void 0,strict:o})};const s={cache:void 0,equals:r,meta:void 0,strict:o};return function(u,d){return e(u,d,s)}}const qP=vs();vs({strict:!0});vs({circular:!0});vs({circular:!0,strict:!0});vs({createInternalComparator:()=>ba});vs({strict:!0,createInternalComparator:()=>ba});vs({circular:!0,createInternalComparator:()=>ba});vs({circular:!0,createInternalComparator:()=>ba,strict:!0});function vs(t={}){const{circular:e=!1,createInternalComparator:n,createState:r,strict:o=!1}=t,s=PP(t),l=BP(s),u=n?n(l):UP(l);return HP({circular:e,comparator:l,createState:r,equals:u,strict:o})}var nv={exports:{}},rv={};var Vk;function VP(){if(Vk)return rv;Vk=1;var t=zh(),e=BC();function n(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var r=typeof Object.is=="function"?Object.is:n,o=e.useSyncExternalStore,s=t.useRef,l=t.useEffect,u=t.useMemo,d=t.useDebugValue;return rv.useSyncExternalStoreWithSelector=function(h,p,g,y,x){var S=s(null);if(S.current===null){var E={hasValue:!1,value:null};S.current=E}else E=S.current;S=u(function(){function w(z){if(!C){if(C=!0,_=z,z=y(z),x!==void 0&&E.hasValue){var B=E.value;if(x(B,z))return R=B}return R=z}if(B=R,r(_,z))return B;var K=y(z);return x!==void 0&&x(B,K)?(_=z,B):(_=z,R=K)}var C=!1,_,R,j=g===void 0?null:g;return[function(){return w(p())},j===null?void 0:function(){return w(j())}]},[p,g,y,x]);var k=o(h,S[0],S[1]);return l(function(){E.hasValue=!0,E.value=k},[k]),d(k),k},rv}var Fk;function FP(){return Fk||(Fk=1,nv.exports=VP()),nv.exports}var WP=FP(),GP=(...t)=>e=>{t.forEach(n=>{typeof n=="function"?n(e):n&&(n.current=e)})},$P=({contentComponent:t})=>{const e=PC.useSyncExternalStore(t.subscribe,t.getSnapshot,t.getServerSnapshot);return m.jsx(m.Fragment,{children:Object.values(e)})};function KP(){const t=new Set;let e={};return{subscribe(n){return t.add(n),()=>{t.delete(n)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(n,r){e={...e,[n]:qc.createPortal(r.reactElement,r.element,n)},t.forEach(o=>o())},removeRenderer(n){const r={...e};delete r[n],e=r,t.forEach(o=>o())}}}var YP=class extends qn.Component{constructor(t){var e;super(t),this.editorContentRef=qn.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((e=t.editor)!=null&&e.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){var t;const e=this.props.editor;if(e&&!e.isDestroyed&&((t=e.view.dom)!=null&&t.parentNode)){if(e.contentComponent)return;const n=this.editorContentRef.current;n.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:n}),e.contentComponent=KP(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var t;const e=this.props.editor;if(e){this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null;try{if(!((t=e.view.dom)!=null&&t.parentNode))return;const n=document.createElement("div");n.append(...e.view.dom.parentNode.childNodes),e.setOptions({element:n})}catch{}}}render(){const{editor:t,innerRef:e,...n}=this.props;return m.jsxs(m.Fragment,{children:[m.jsx("div",{ref:GP(e,this.editorContentRef),...n}),t?.contentComponent&&m.jsx($P,{contentComponent:t.contentComponent})]})}},XP=D.forwardRef((t,e)=>{const n=qn.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[t.editor]);return qn.createElement(YP,{key:n,innerRef:e,...t})}),Wk=qn.memo(XP),JP=typeof window<"u"?D.useLayoutEffect:D.useEffect,QP=class{constructor(t){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=t,this.lastSnapshot={editor:t,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(t){return this.subscribers.add(t),()=>{this.subscribers.delete(t)}}watch(t){if(this.editor=t,this.editor){const e=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},n=this.editor;return n.on("transaction",e),()=>{n.off("transaction",e)}}}};function ZP(t){var e;const[n]=D.useState(()=>new QP(t.editor)),r=WP.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,t.selector,(e=t.equalityFn)!=null?e:qP);return JP(()=>n.watch(t.editor),[t.editor,n]),D.useDebugValue(r),r}var e8=!1,n0=typeof window>"u",t8=n0||!!(typeof window<"u"&&window.next),n8=class HC{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?n0||t8?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var o,s;return(s=(o=this.options.current).onBeforeCreate)==null?void 0:s.call(o,...r)},onBlur:(...r)=>{var o,s;return(s=(o=this.options.current).onBlur)==null?void 0:s.call(o,...r)},onCreate:(...r)=>{var o,s;return(s=(o=this.options.current).onCreate)==null?void 0:s.call(o,...r)},onDestroy:(...r)=>{var o,s;return(s=(o=this.options.current).onDestroy)==null?void 0:s.call(o,...r)},onFocus:(...r)=>{var o,s;return(s=(o=this.options.current).onFocus)==null?void 0:s.call(o,...r)},onSelectionUpdate:(...r)=>{var o,s;return(s=(o=this.options.current).onSelectionUpdate)==null?void 0:s.call(o,...r)},onTransaction:(...r)=>{var o,s;return(s=(o=this.options.current).onTransaction)==null?void 0:s.call(o,...r)},onUpdate:(...r)=>{var o,s;return(s=(o=this.options.current).onUpdate)==null?void 0:s.call(o,...r)},onContentError:(...r)=>{var o,s;return(s=(o=this.options.current).onContentError)==null?void 0:s.call(o,...r)},onDrop:(...r)=>{var o,s;return(s=(o=this.options.current).onDrop)==null?void 0:s.call(o,...r)},onPaste:(...r)=>{var o,s;return(s=(o=this.options.current).onPaste)==null?void 0:s.call(o,...r)},onDelete:(...r)=>{var o,s;return(s=(o=this.options.current).onDelete)==null?void 0:s.call(o,...r)}};return new xB(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,n){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&n.extensions?e.extensions.length!==n.extensions.length?!1:e.extensions.every((o,s)=>{var l;return o===((l=n.extensions)==null?void 0:l[s])}):e[r]===n[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?HC.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,o)=>r===e[o]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===e&&this.setEditor(null))},1)}};function r8(t={},e=[]){const n=D.useRef(t);n.current=t;const[r]=D.useState(()=>new n8(n)),o=PC.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return D.useDebugValue(o),D.useEffect(r.onRender(e)),ZP({editor:o,selector:({transactionNumber:s})=>t.shouldRerenderOnTransaction===!1||t.shouldRerenderOnTransaction===void 0?null:t.immediatelyRender&&s===0?0:s+1}),o}var i8=D.createContext({editor:null});i8.Consumer;var o8=D.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),s8=()=>D.useContext(o8);qn.forwardRef((t,e)=>{const{onDragStart:n}=s8(),r=t.as||"div";return m.jsx(r,{...t,ref:e,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...t.style}})});qn.createContext({markViewContentRef:()=>{}});const hy=fa((t,e)=>{const n=ki("RichTextEditorContent",null,t),{classNames:r,className:o,style:s,styles:l,vars:u,...d}=n,h=wi();return h.withTypographyStyles?m.jsx(OM,{...h.getStyles("Typography",{className:o,style:s,styles:l,classNames:r}),unstyled:h.unstyled,ref:e,children:m.jsx(pe,{component:Wk,editor:h.editor,...h.getStyles("content",{classNames:r,styles:l}),...d})}):m.jsx(pe,{component:Wk,editor:h.editor,...h.getStyles("content",{classNames:r,styles:l,className:o,style:s}),...d})});hy.classes=ya;hy.displayName="@mantine/tiptap/RichTextEditorContent";function ot(t){return m.jsx("svg",{...t,xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",strokeWidth:"1.5",stroke:"currentColor",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"})}function a8(t){return m.jsxs(ot,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M7 5h6a3.5 3.5 0 0 1 0 7h-6z"}),m.jsx("path",{d:"M13 12h1a3.5 3.5 0 0 1 0 7h-7v-7"})]})}function l8(t){return m.jsxs(ot,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M11 5l6 0"}),m.jsx("path",{d:"M7 19l6 0"}),m.jsx("path",{d:"M14 5l-4 14"})]})}function c8(t){return m.jsxs(ot,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M7 5v5a5 5 0 0 0 10 0v-5"}),m.jsx("path",{d:"M5 19h14"})]})}function u8(t){return m.jsxs(ot,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M5 12l14 0"}),m.jsx("path",{d:"M16 6.5a4 2 0 0 0 -4 -1.5h-1a3.5 3.5 0 0 0 0 7h2a3.5 3.5 0 0 1 0 7h-1.5a4 2 0 0 1 -4 -1.5"})]})}function d8(t){return m.jsxs(ot,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M17 15l4 4m0 -4l-4 4"}),m.jsx("path",{d:"M7 6v-1h11v1"}),m.jsx("path",{d:"M7 19l4 0"}),m.jsx("path",{d:"M13 5l-4 14"})]})}function f8(t){return m.jsxs(ot,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M19 18v-8l-2 2"}),m.jsx("path",{d:"M4 6v12"}),m.jsx("path",{d:"M12 6v12"}),m.jsx("path",{d:"M11 18h2"}),m.jsx("path",{d:"M3 18h2"}),m.jsx("path",{d:"M4 12h8"}),m.jsx("path",{d:"M3 6h2"}),m.jsx("path",{d:"M11 6h2"})]})}function h8(t){return m.jsxs(ot,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M17 12a2 2 0 1 1 4 0c0 .591 -.417 1.318 -.816 1.858l-3.184 4.143l4 0"}),m.jsx("path",{d:"M4 6v12"}),m.jsx("path",{d:"M12 6v12"}),m.jsx("path",{d:"M11 18h2"}),m.jsx("path",{d:"M3 18h2"}),m.jsx("path",{d:"M4 12h8"}),m.jsx("path",{d:"M3 6h2"}),m.jsx("path",{d:"M11 6h2"})]})}function p8(t){return m.jsxs(ot,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M19 14a2 2 0 1 0 -2 -2"}),m.jsx("path",{d:"M17 16a2 2 0 1 0 2 -2"}),m.jsx("path",{d:"M4 6v12"}),m.jsx("path",{d:"M12 6v12"}),m.jsx("path",{d:"M11 18h2"}),m.jsx("path",{d:"M3 18h2"}),m.jsx("path",{d:"M4 12h8"}),m.jsx("path",{d:"M3 6h2"}),m.jsx("path",{d:"M11 6h2"})]})}function m8(t){return m.jsxs(ot,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M20 18v-8l-4 6h5"}),m.jsx("path",{d:"M4 6v12"}),m.jsx("path",{d:"M12 6v12"}),m.jsx("path",{d:"M11 18h2"}),m.jsx("path",{d:"M3 18h2"}),m.jsx("path",{d:"M4 12h8"}),m.jsx("path",{d:"M3 6h2"}),m.jsx("path",{d:"M11 6h2"})]})}function g8(t){return m.jsxs(ot,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M17 18h2a2 2 0 1 0 0 -4h-2v-4h4"}),m.jsx("path",{d:"M4 6v12"}),m.jsx("path",{d:"M12 6v12"}),m.jsx("path",{d:"M11 18h2"}),m.jsx("path",{d:"M3 18h2"}),m.jsx("path",{d:"M4 12h8"}),m.jsx("path",{d:"M3 6h2"}),m.jsx("path",{d:"M11 6h2"})]})}function v8(t){return m.jsxs(ot,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M19 14a2 2 0 1 0 0 4a2 2 0 0 0 0 -4z"}),m.jsx("path",{d:"M21 12a2 2 0 1 0 -4 0v4"}),m.jsx("path",{d:"M4 6v12"}),m.jsx("path",{d:"M12 6v12"}),m.jsx("path",{d:"M11 18h2"}),m.jsx("path",{d:"M3 18h2"}),m.jsx("path",{d:"M4 12h8"}),m.jsx("path",{d:"M3 6h2"}),m.jsx("path",{d:"M11 6h2"})]})}function y8(t){return m.jsxs(ot,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M9 6l11 0"}),m.jsx("path",{d:"M9 12l11 0"}),m.jsx("path",{d:"M9 18l11 0"}),m.jsx("path",{d:"M5 6l0 .01"}),m.jsx("path",{d:"M5 12l0 .01"}),m.jsx("path",{d:"M5 18l0 .01"})]})}function b8(t){return m.jsxs(ot,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M11 6h9"}),m.jsx("path",{d:"M11 12h9"}),m.jsx("path",{d:"M12 18h8"}),m.jsx("path",{d:"M4 16a2 2 0 1 1 4 0c0 .591 -.5 1 -1 1.5l-3 2.5h4"}),m.jsx("path",{d:"M6 10v-6l-2 2"})]})}function x8(t){return m.jsxs(ot,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M17 22v-2"}),m.jsx("path",{d:"M9 15l6 -6"}),m.jsx("path",{d:"M11 6l.463 -.536a5 5 0 0 1 7.071 7.072l-.534 .464"}),m.jsx("path",{d:"M13 18l-.397 .534a5.068 5.068 0 0 1 -7.127 0a4.972 4.972 0 0 1 0 -7.071l.524 -.463"}),m.jsx("path",{d:"M20 17h2"}),m.jsx("path",{d:"M2 7h2"}),m.jsx("path",{d:"M7 2v2"})]})}function S8(t){return m.jsxs(ot,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M6 15h15"}),m.jsx("path",{d:"M21 19h-15"}),m.jsx("path",{d:"M15 11h6"}),m.jsx("path",{d:"M21 7h-6"}),m.jsx("path",{d:"M9 9h1a1 1 0 1 1 -1 1v-2.5a2 2 0 0 1 2 -2"}),m.jsx("path",{d:"M3 9h1a1 1 0 1 1 -1 1v-2.5a2 2 0 0 1 2 -2"})]})}function E8(t){return m.jsxs(ot,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M4 6l16 0"}),m.jsx("path",{d:"M4 12l10 0"}),m.jsx("path",{d:"M4 18l14 0"})]})}function k8(t){return m.jsxs(ot,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M4 6l16 0"}),m.jsx("path",{d:"M10 12l10 0"}),m.jsx("path",{d:"M6 18l14 0"})]})}function T8(t){return m.jsxs(ot,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M4 6l16 0"}),m.jsx("path",{d:"M8 12l8 0"}),m.jsx("path",{d:"M6 18l12 0"})]})}function w8(t){return m.jsxs(ot,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M4 6l16 0"}),m.jsx("path",{d:"M4 12l16 0"}),m.jsx("path",{d:"M4 18l12 0"})]})}function C8(t){return m.jsxs(ot,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M5 7l8 10m-8 0l8 -10"}),m.jsx("path",{d:"M21 20h-4l3.5 -4a1.73 1.73 0 0 0 -3.5 -2"})]})}function A8(t){return m.jsxs(ot,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M5 7l8 10m-8 0l8 -10"}),m.jsx("path",{d:"M21 11h-4l3.5 -4a1.73 1.73 0 0 0 -3.5 -2"})]})}function qC(t){return m.jsxs(ot,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M7 8l-4 4l4 4"}),m.jsx("path",{d:"M17 8l4 4l-4 4"}),m.jsx("path",{d:"M14 4l-4 16"})]})}function _8(t){return m.jsxs(ot,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M3 19h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4"}),m.jsx("path",{d:"M12.5 5.5l4 4"}),m.jsx("path",{d:"M4.5 13.5l4 4"}),m.jsx("path",{d:"M21 15v4h-8l4 -4z"})]})}function M8(t){return m.jsxs(ot,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M5 12h2"}),m.jsx("path",{d:"M17 12h2"}),m.jsx("path",{d:"M11 12h2"})]})}function VC(t){return m.jsxs(ot,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M20.042 16.045a9 9 0 0 0 -12.087 -12.087m-2.318 1.677a9 9 0 1 0 12.725 12.73"}),m.jsx("path",{d:"M3 3l18 18"})]})}function O8(t){return m.jsxs(ot,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M11 7l6 6"}),m.jsx("path",{d:"M4 16l11.7 -11.7a1 1 0 0 1 1.4 0l2.6 2.6a1 1 0 0 1 0 1.4l-11.7 11.7h-4v-4z"})]})}function j8(t){return m.jsxs(ot,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M18 6l-12 12"}),m.jsx("path",{d:"M6 6l12 12"})]})}function R8(t){return m.jsxs(ot,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M12 21a9 9 0 0 1 0 -18c4.97 0 9 3.582 9 8c0 1.06 -.474 2.078 -1.318 2.828c-.844 .75 -1.989 1.172 -3.182 1.172h-2.5a2 2 0 0 0 -1 3.75a1.3 1.3 0 0 1 -1 2.25"}),m.jsx("path",{d:"M8.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),m.jsx("path",{d:"M12.5 7.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"}),m.jsx("path",{d:"M16.5 10.5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0"})]})}function N8(t){return m.jsxs(ot,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M5 12l5 5l10 -10"})]})}function D8(t){return m.jsxs(ot,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M9 15l6 -6"}),m.jsx("path",{d:"M11 6l.463 -.536a5 5 0 0 1 7.071 7.072l-.534 .464"}),m.jsx("path",{d:"M13 18l-.397 .534a5.068 5.068 0 0 1 -7.127 0a4.972 4.972 0 0 1 0 -7.071l.524 -.463"})]})}function L8(t){return m.jsxs(ot,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M12 6h-6a2 2 0 0 0 -2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-6"}),m.jsx("path",{d:"M11 13l9 -9"}),m.jsx("path",{d:"M15 4h5v5"})]})}function z8(t){return m.jsxs(ot,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M9 14l-4 -4l4 -4"}),m.jsx("path",{d:"M5 10h11a4 4 0 1 1 0 8h-1"})]})}function I8(t){return m.jsxs(ot,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M15 14l4 -4l-4 -4"}),m.jsx("path",{d:"M19 10h-11a4 4 0 1 0 0 8h1"})]})}function B8(t){return m.jsxs(ot,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M3.5 5.5l1.5 1.5l2.5 -2.5"}),m.jsx("path",{d:"M3.5 11.5l1.5 1.5l2.5 -2.5"}),m.jsx("path",{d:"M3.5 17.5l1.5 1.5l2.5 -2.5"}),m.jsx("path",{d:"M11 6l9 0"}),m.jsx("path",{d:"M11 12l9 0"}),m.jsx("path",{d:"M11 18l9 0"})]})}function P8(t){return m.jsxs(ot,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M20 6l-11 0"}),m.jsx("path",{d:"M20 12l-7 0"}),m.jsx("path",{d:"M20 18l-11 0"}),m.jsx("path",{d:"M4 8l4 4l-4 4"})]})}function U8(t){return m.jsxs(ot,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:"M20 6l-7 0"}),m.jsx("path",{d:"M20 12l-9 0"}),m.jsx("path",{d:"M20 18l-7 0"}),m.jsx("path",{d:"M8 8l-4 4l4 4"})]})}function H8(t){return m.jsxs(ot,{...t,children:[m.jsx("path",{stroke:"none",d:"M0 0h24v24H0z",fill:"none"}),m.jsx("path",{d:`M19 3v16a1 1 0 0 1-1 1H6a1 1 0 0 1-1-1V7.914
           a1 1 0 0 1 .293-.707l3.914-3.914A1 1 0 0 1 9.914 3H18
           a1 1 0 0 1 1 1Z`}),m.jsx("path",{d:"M10 11l-2 2 2 2"}),m.jsx("path",{d:"M14 11l2 2-2 2"})]})}const q8={interactive:!0},xa=fa((t,e)=>{const n=ki("RichTextEditorControl",q8,t),{classNames:r,className:o,style:s,styles:l,vars:u,interactive:d,active:h,onMouseDown:p,disabled:g,...y}=n,x=wi();return m.jsx(fT,{...y,...x.getStyles("control",{className:o,style:s,classNames:r,styles:l}),disabled:g,"data-rich-text-editor-control":!0,tabIndex:d?0:-1,"data-interactive":d||void 0,"data-disabled":g||void 0,"data-active":h||void 0,"aria-pressed":h&&d||void 0,"aria-hidden":!d||void 0,ref:e,unstyled:x.unstyled,variant:x.variant||"default",onMouseDown:S=>{S.preventDefault(),p?.(S)}})});xa.classes=ya;xa.displayName="@mantine/tiptap/RichTextEditorControl";const py=D.forwardRef(({className:t,icon:e,...n},r)=>{const o=wi();return m.jsx(xa,{ref:r,...n,children:m.jsx(e,{...o.getStyles("controlIcon")})})});py.displayName="@mantine/tiptap/RichTextEditorControlBase";function bt({label:t,isActive:e,operation:n,icon:r,isDisabled:o}){const s=D.forwardRef((l,u)=>{const{editor:d,labels:h}=wi(),p=h[t];return m.jsx(py,{"aria-label":p,title:p,active:e?.name?d?.isActive(e.name,e.attributes):!1,ref:u,icon:l.icon||r,disabled:o?.(d)||!1,...l,onClick:()=>d?.chain().focus()[n.name](n.attributes).run()})});return s.displayName=`@mantine/tiptap/${t}`,s}const V8=bt({label:"boldControlLabel",icon:t=>m.jsx(a8,{...t}),isActive:{name:"bold"},operation:{name:"toggleBold"}}),F8=bt({label:"italicControlLabel",icon:t=>m.jsx(l8,{...t}),isActive:{name:"italic"},operation:{name:"toggleItalic"}}),W8=bt({label:"underlineControlLabel",icon:t=>m.jsx(c8,{...t}),isActive:{name:"underline"},operation:{name:"toggleUnderline"}}),G8=bt({label:"strikeControlLabel",icon:t=>m.jsx(u8,{...t}),isActive:{name:"strike"},operation:{name:"toggleStrike"}}),$8=bt({label:"clearFormattingControlLabel",icon:t=>m.jsx(d8,{...t}),operation:{name:"unsetAllMarks"}}),K8=bt({label:"unlinkControlLabel",icon:t=>m.jsx(x8,{...t}),operation:{name:"unsetLink"}}),Y8=bt({label:"bulletListControlLabel",icon:t=>m.jsx(y8,{...t}),isActive:{name:"bulletList"},operation:{name:"toggleBulletList"}}),X8=bt({label:"orderedListControlLabel",icon:t=>m.jsx(b8,{...t}),isActive:{name:"orderedList"},operation:{name:"toggleOrderedList"}}),J8=bt({label:"h1ControlLabel",icon:t=>m.jsx(f8,{...t}),isActive:{name:"heading",attributes:{level:1}},operation:{name:"toggleHeading",attributes:{level:1}}}),Q8=bt({label:"h2ControlLabel",icon:t=>m.jsx(h8,{...t}),isActive:{name:"heading",attributes:{level:2}},operation:{name:"toggleHeading",attributes:{level:2}}}),Z8=bt({label:"h3ControlLabel",icon:t=>m.jsx(p8,{...t}),isActive:{name:"heading",attributes:{level:3}},operation:{name:"toggleHeading",attributes:{level:3}}}),eU=bt({label:"h4ControlLabel",icon:t=>m.jsx(m8,{...t}),isActive:{name:"heading",attributes:{level:4}},operation:{name:"toggleHeading",attributes:{level:4}}}),tU=bt({label:"h5ControlLabel",icon:t=>m.jsx(g8,{...t}),isActive:{name:"heading",attributes:{level:5}},operation:{name:"toggleHeading",attributes:{level:5}}}),nU=bt({label:"h6ControlLabel",icon:t=>m.jsx(v8,{...t}),isActive:{name:"heading",attributes:{level:6}},operation:{name:"toggleHeading",attributes:{level:6}}}),rU=bt({label:"blockquoteControlLabel",icon:t=>m.jsx(S8,{...t}),isActive:{name:"blockquote"},operation:{name:"toggleBlockquote"}}),iU=bt({label:"alignLeftControlLabel",icon:t=>m.jsx(E8,{...t}),operation:{name:"setTextAlign",attributes:"left"}}),oU=bt({label:"alignRightControlLabel",icon:t=>m.jsx(k8,{...t}),operation:{name:"setTextAlign",attributes:"right"}}),sU=bt({label:"alignCenterControlLabel",icon:t=>m.jsx(T8,{...t}),operation:{name:"setTextAlign",attributes:"center"}}),aU=bt({label:"alignJustifyControlLabel",icon:t=>m.jsx(w8,{...t}),operation:{name:"setTextAlign",attributes:"justify"}}),lU=bt({label:"subscriptControlLabel",icon:t=>m.jsx(C8,{...t}),isActive:{name:"subscript"},operation:{name:"toggleSubscript"}}),cU=bt({label:"superscriptControlLabel",icon:t=>m.jsx(A8,{...t}),isActive:{name:"superscript"},operation:{name:"toggleSuperscript"}}),uU=bt({label:"codeControlLabel",icon:t=>m.jsx(qC,{...t}),isActive:{name:"code"},operation:{name:"toggleCode"}}),dU=bt({label:"codeBlockControlLabel",icon:t=>m.jsx(qC,{...t}),isActive:{name:"codeBlock"},operation:{name:"toggleCodeBlock"}}),fU=bt({label:"highlightControlLabel",icon:t=>m.jsx(_8,{...t}),isActive:{name:"highlight"},operation:{name:"toggleHighlight"}}),hU=bt({label:"hrControlLabel",icon:t=>m.jsx(M8,{...t}),operation:{name:"setHorizontalRule"}}),pU=bt({label:"unsetColorControlLabel",icon:t=>m.jsx(VC,{...t}),operation:{name:"unsetColor"}}),mU=bt({label:"undoControlLabel",icon:t=>m.jsx(z8,{...t}),isDisabled:t=>!t?.can().undo(),operation:{name:"undo"}}),gU=bt({label:"redoControlLabel",icon:t=>m.jsx(I8,{...t}),isDisabled:t=>!t?.can().redo(),operation:{name:"redo"}}),vU=bt({label:"tasksControlLabel",icon:t=>m.jsx(B8,{...t}),isActive:{name:"taskList"},operation:{name:"toggleTaskList"}}),yU=bt({label:"tasksSinkLabel",icon:t=>m.jsx(P8,{...t}),operation:{name:"sinkListItem",attributes:"taskItem"},isDisabled:t=>!t?.can().sinkListItem("taskItem")}),bU=bt({label:"tasksLiftLabel",icon:t=>m.jsx(U8,{...t}),operation:{name:"liftListItem",attributes:"taskItem"},isDisabled:t=>!t?.can().liftListItem("taskItem")}),xU=t=>m.jsx(D8,{...t}),my=fa((t,e)=>{const n=ki("RichTextEditorLinkControl",null,t),{classNames:r,className:o,style:s,styles:l,vars:u,icon:d,popoverProps:h,disableTooltips:p,initialExternal:g,...y}=n,x=wi(),S={classNames:r,styles:l},[E,k]=jM(""),[w,C]=D.useState(g),[_,{open:R,close:j}]=hT(!1),z=()=>{R();const te=x.editor?.getAttributes("link");k(te?.href||""),C(te?.href?te?.target==="_blank":g)},B=()=>{j(),k(""),C(g)},K=()=>{B(),E===""?x.editor?.chain().focus().extendMarkRange("link").unsetLink().run():x.editor?.chain().focus().extendMarkRange("link").setLink({href:E,target:w?"_blank":null}).run()},W=te=>{te.key==="Enter"&&(te.preventDefault(),K())};RM("edit-link",z,!1);const{resolvedClassNames:J,resolvedStyles:Z}=NM({classNames:r,styles:l,props:n});return m.jsxs(yl,{trapFocus:!0,shadow:"md",withinPortal:!0,opened:_,onChange:te=>!te&&B(),offset:-44,zIndex:1e4,...h,children:[m.jsx(yl.Target,{children:m.jsx(py,{icon:d||xU,...y,"aria-label":x.labels.linkControlLabel,title:x.labels.linkControlLabel,onClick:z,active:x.editor?.isActive("link"),ref:e,classNames:J,styles:Z,className:o,style:s,variant:x.variant})}),m.jsx(yl.Dropdown,{...x.getStyles("linkEditorDropdown",S),children:m.jsxs("div",{...x.getStyles("linkEditor",S),children:[m.jsx(o0,{placeholder:x.labels.linkEditorInputPlaceholder,"aria-label":x.labels.linkEditorInputLabel,type:"url",value:E,onChange:k,classNames:{input:x.getStyles("linkEditorInput",S).className},onKeyDown:W,rightSection:m.jsx(s0,{label:w?x.labels.linkEditorExternalLink:x.labels.linkEditorInternalLink,events:{hover:!0,focus:!0,touch:!0},withinPortal:!0,withArrow:!0,disabled:p,zIndex:1e4,children:m.jsx(fT,{onClick:()=>C(te=>!te),"data-active":w||void 0,...x.getStyles("linkEditorExternalControl",S),children:m.jsx(L8,{style:{width:Gt(14),height:Gt(14)}})})})}),m.jsx(He,{variant:"default",onClick:K,...x.getStyles("linkEditorSave",S),children:x.labels.linkEditorSave})]})})]})});my.classes=ya;my.displayName="@mantine/tiptap/RichTextEditorLinkControl";const FC=D.forwardRef((t,e)=>{const{popoverProps:n,colors:r,colorPickerProps:o,...s}=ki("RichTextEditorColorPickerControl",null,t),{editor:l,labels:u,getStyles:d,variant:h}=wi(),[p,{toggle:g,close:y}]=hT(!1),[x,S]=D.useState("palette"),E=l?.getAttributes("textStyle").color||"var(--mantine-color-text)",k=(_,R=!0)=>{(l?.chain()).focus().setColor(_).run(),R&&y()},w=()=>{(l?.chain()).focus().unsetColor().run(),y()},C=r.map((_,R)=>m.jsx(cv,{component:"button",color:_,onClick:()=>k(_),size:26,radius:"xs",style:{cursor:"pointer"},title:u.colorPickerColorLabel(_),"aria-label":u.colorPickerColorLabel(_)},R));return m.jsxs(yl,{opened:p,withinPortal:!0,trapFocus:!0,onChange:_=>!_&&y(),...n,children:[m.jsx(yl.Target,{children:m.jsx(xa,{...s,variant:h,"aria-label":u.colorPickerControlLabel,title:u.colorPickerControlLabel,ref:e,onClick:g,children:m.jsx(cv,{color:E,size:14})})}),m.jsxs(yl.Dropdown,{...d("linkEditorDropdown"),children:[x==="palette"&&m.jsx(dT,{cols:7,spacing:2,children:C}),x==="colorPicker"&&m.jsx(DM,{defaultValue:E,onChange:_=>k(_,!1),...o}),m.jsx(s0.Group,{closeDelay:200,children:m.jsxs(Re,{justify:"flex-end",gap:"xs",mt:"sm",children:[x==="palette"&&m.jsx(Xo,{variant:"default",onClick:y,title:u.colorPickerCancel,"aria-label":u.colorPickerCancel,children:m.jsx(j8,{style:{width:Gt(16),height:Gt(16)}})}),m.jsx(Xo,{variant:"default",onClick:w,title:u.colorPickerClear,"aria-label":u.colorPickerClear,children:m.jsx(VC,{style:{width:Gt(16),height:Gt(16)}})}),x==="palette"?m.jsx(Xo,{variant:"default",onClick:()=>S("colorPicker"),title:u.colorPickerColorPicker,"aria-label":u.colorPickerColorPicker,children:m.jsx(O8,{style:{width:Gt(16),height:Gt(16)}})}):m.jsx(Xo,{variant:"default",onClick:()=>S("palette"),"aria-label":u.colorPickerPalette,title:u.colorPickerPalette,children:m.jsx(R8,{style:{width:Gt(16),height:Gt(16)}})}),x==="colorPicker"&&m.jsx(Xo,{variant:"default",onClick:y,title:u.colorPickerSave,"aria-label":u.colorPickerSave,children:m.jsx(N8,{style:{width:Gt(16),height:Gt(16)}})})]})})]})]})});FC.displayName="@mantine/tiptap/ColorPickerControl";const WC=D.forwardRef((t,e)=>{const{color:n,...r}=ki("RichTextEditorColorControl",null,t),{editor:o,labels:s,variant:l}=wi(),u=o?.getAttributes("textStyle").color||null,d=s.colorControlLabel(n);return m.jsx(xa,{...r,variant:l,active:u===n,"aria-label":d,title:d,onClick:()=>(o?.chain()).focus().setColor(n).run(),ref:e,children:m.jsx(cv,{color:n,size:14})})});WC.displayName="@mantine/tiptap/RichTextEditorColorControl";const SU={},GC=D.forwardRef((t,e)=>{const{...n}=ki("RichTextEditorSourceCodeControl",SU,t),{editor:r,labels:o,variant:s,onSourceCodeTextSwitch:l}=wi(),[u,d]=D.useState(!1),h=()=>{u?r?.commands.setContent(r.getText(),{emitUpdate:!0}):r?.commands.setContent(`<textarea>${r.getHTML()}</textarea>`);const p=!u;d(p),l?.(p)};return m.jsx(xa,{...n,variant:s,active:u,"aria-label":o.sourceCodeControlLabel,title:o.sourceCodeControlLabel,onClick:()=>h(),ref:e,children:m.jsx(H8,{style:{width:Gt(16),height:Gt(16)}})})});GC.displayName="@mantine/tiptap/RichTextEditorSourceCodeControl";const gy=fa((t,e)=>{const n=ki("RichTextEditorControlsGroup",null,t),{classNames:r,className:o,style:s,styles:l,vars:u,variant:d,...h}=n,p=wi();return m.jsx(pe,{ref:e,variant:d||p.variant,...p.getStyles("controlsGroup",{className:o,style:s,styles:l,classNames:r}),...h})});gy.classes=ya;gy.displayName="@mantine/tiptap/RichTextEditorControlsGroup";const vy=fa((t,e)=>{const n=ki("RichTextEditorToolbar",null,t),{classNames:r,className:o,style:s,styles:l,vars:u,sticky:d,stickyOffset:h,mod:p,variant:g,...y}=n,x=wi();return m.jsx(pe,{ref:e,mod:[{sticky:d},p],variant:g||x.variant,...x.getStyles("toolbar",{className:o,style:s,styles:l,classNames:r}),...y,__vars:{"--rte-sticky-offset":Gt(h)}})});vy.classes=ya;vy.displayName="@mantine/tiptap/RichTextEditorToolbar";const EU={withCodeHighlightStyles:!0,withTypographyStyles:!0,variant:"default"},qe=fa((t,e)=>{const n=ki("RichTextEditor",EU,t),{classNames:r,className:o,style:s,styles:l,unstyled:u,vars:d,editor:h,withCodeHighlightStyles:p,withTypographyStyles:g,onSourceCodeTextSwitch:y,labels:x,children:S,variant:E,attributes:k,...w}=n,C=lT({name:"RichTextEditor",classes:ya,props:n,className:o,style:s,classNames:r,styles:l,unstyled:u,attributes:k,vars:d}),_=D.useMemo(()=>({...tP,...x}),[x]);return m.jsx(nP,{value:{editor:h,getStyles:C,labels:_,withCodeHighlightStyles:p,withTypographyStyles:g,onSourceCodeTextSwitch:y,unstyled:u,variant:E},children:m.jsx(pe,{...C("root"),...w,ref:e,children:S})})});qe.classes=ya;qe.displayName="@mantine/tiptap/RichTextEditor";qe.Content=hy;qe.Control=xa;qe.Toolbar=vy;qe.ControlsGroup=gy;qe.Bold=V8;qe.Italic=F8;qe.Strikethrough=G8;qe.Underline=W8;qe.ClearFormatting=$8;qe.H1=J8;qe.H2=Q8;qe.H3=Z8;qe.H4=eU;qe.H5=tU;qe.H6=nU;qe.BulletList=Y8;qe.OrderedList=X8;qe.Link=my;qe.Unlink=K8;qe.Blockquote=rU;qe.AlignLeft=iU;qe.AlignRight=oU;qe.AlignCenter=sU;qe.AlignJustify=aU;qe.Superscript=cU;qe.Subscript=lU;qe.Code=uU;qe.CodeBlock=dU;qe.ColorPicker=FC;qe.Color=WC;qe.Highlight=fU;qe.Hr=hU;qe.UnsetColor=pU;qe.Undo=mU;qe.Redo=gU;qe.TaskList=vU;qe.TaskListSink=yU;qe.TaskListLift=bU;qe.SourceCode=GC;var jh=(t,e)=>{if(t==="slot")return 0;if(t instanceof Function)return t(e);const{children:n,...r}=e??{};if(t==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[t,r,n]},kU=/^\s*>\s$/,TU=kr.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:t}){return jh("blockquote",{...pn(this.options.HTMLAttributes,t),children:jh("slot",{})})},parseMarkdown:(t,e)=>e.createNode("blockquote",void 0,e.parseChildren(t.tokens||[])),renderMarkdown:(t,e)=>{if(!t.content)return"";const n=">",r=[];return t.content.forEach(o=>{const u=e.renderChildren([o]).split(`
`).map(d=>d.trim()===""?n:`${n} ${d}`);r.push(u.join(`
`))}),r.join(`
${n}
`)},addCommands(){return{setBlockquote:()=>({commands:t})=>t.wrapIn(this.name),toggleBlockquote:()=>({commands:t})=>t.toggleWrap(this.name),unsetBlockquote:()=>({commands:t})=>t.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[jl({find:kU,type:this.type})]}}),wU=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,CU=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,AU=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,_U=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,MU=va.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:t=>t.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:t=>t.type.name===this.name},{style:"font-weight",getAttrs:t=>/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}]},renderHTML({HTMLAttributes:t}){return jh("strong",{...pn(this.options.HTMLAttributes,t),children:jh("slot",{})})},markdownTokenName:"strong",parseMarkdown:(t,e)=>e.applyMark("bold",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`**${e.renderChildren(t)}**`,addCommands(){return{setBold:()=>({commands:t})=>t.setMark(this.name),toggleBold:()=>({commands:t})=>t.toggleMark(this.name),unsetBold:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Ol({find:wU,type:this.type}),Ol({find:AU,type:this.type})]},addPasteRules(){return[da({find:CU,type:this.type}),da({find:_U,type:this.type})]}}),OU=/(^|[^`])`([^`]+)`(?!`)$/,jU=/(^|[^`])`([^`]+)`(?!`)/g,RU=va.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:t}){return["code",pn(this.options.HTMLAttributes,t),0]},markdownTokenName:"codespan",parseMarkdown:(t,e)=>e.applyMark("code",[{type:"text",text:t.text||""}]),renderMarkdown:(t,e)=>t.content?`\`${e.renderChildren(t.content)}\``:"",addCommands(){return{setCode:()=>({commands:t})=>t.setMark(this.name),toggleCode:()=>({commands:t})=>t.toggleMark(this.name),unsetCode:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Ol({find:OU,type:this.type})]},addPasteRules(){return[da({find:jU,type:this.type})]}}),iv=4,NU=/^```([a-z]+)?[\s\n]$/,DU=/^~~~([a-z]+)?[\s\n]$/,LU=kr.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:iv,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:t=>{var e;const{languageClassPrefix:n}=this.options;if(!n)return null;const s=[...((e=t.firstElementChild)==null?void 0:e.classList)||[]].filter(l=>l.startsWith(n)).map(l=>l.replace(n,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:t,HTMLAttributes:e}){return["pre",pn(this.options.HTMLAttributes,e),["code",{class:t.attrs.language?this.options.languageClassPrefix+t.attrs.language:null},0]]},markdownTokenName:"code",parseMarkdown:(t,e)=>{var n;return((n=t.raw)==null?void 0:n.startsWith("```"))===!1&&t.codeBlockStyle!=="indented"?[]:e.createNode("codeBlock",{language:t.lang||null},t.text?[e.createTextNode(t.text)]:[])},renderMarkdown:(t,e)=>{var n;let r="";const o=((n=t.attrs)==null?void 0:n.language)||"";return t.content?r=[`\`\`\`${o}`,e.renderChildren(t.content),"```"].join(`
`):r=`\`\`\`${o}

\`\`\``,r},addCommands(){return{setCodeBlock:t=>({commands:e})=>e.setNode(this.name,t),toggleCodeBlock:t=>({commands:e})=>e.toggleNode(this.name,"paragraph",t)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:t,$anchor:e}=this.editor.state.selection,n=e.pos===1;return!t||e.parent.type.name!==this.name?!1:n||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:iv,{state:r}=t,{selection:o}=r,{$from:s,empty:l}=o;if(s.parent.type!==this.type)return!1;const u=" ".repeat(n);return l?t.commands.insertContent(u):t.commands.command(({tr:d})=>{const{from:h,to:p}=o,x=r.doc.textBetween(h,p,`
`,`
`).split(`
`).map(S=>u+S).join(`
`);return d.replaceWith(h,p,r.schema.text(x)),!0})},"Shift-Tab":({editor:t})=>{var e;if(!this.options.enableTabIndentation)return!1;const n=(e=this.options.tabSize)!=null?e:iv,{state:r}=t,{selection:o}=r,{$from:s,empty:l}=o;return s.parent.type!==this.type?!1:l?t.commands.command(({tr:u})=>{var d;const{pos:h}=s,p=s.start(),g=s.end(),x=r.doc.textBetween(p,g,`
`,`
`).split(`
`);let S=0,E=0;const k=h-p;for(let z=0;z<x.length;z+=1){if(E+x[z].length>=k){S=z;break}E+=x[z].length+1}const C=((d=x[S].match(/^ */))==null?void 0:d[0])||"",_=Math.min(C.length,n);if(_===0)return!0;let R=p;for(let z=0;z<S;z+=1)R+=x[z].length+1;return u.delete(R,R+_),h-R<=_&&u.setSelection(Ve.create(u.doc,R)),!0}):t.commands.command(({tr:u})=>{const{from:d,to:h}=o,y=r.doc.textBetween(d,h,`
`,`
`).split(`
`).map(x=>{var S;const E=((S=x.match(/^ */))==null?void 0:S[0])||"",k=Math.min(E.length,n);return x.slice(k)}).join(`
`);return u.replaceWith(d,h,r.schema.text(y)),!0})},Enter:({editor:t})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=t,{selection:n}=e,{$from:r,empty:o}=n;if(!o||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,l=r.parent.textContent.endsWith(`

`);return!s||!l?!1:t.chain().command(({tr:u})=>(u.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:t})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=t,{selection:n,doc:r}=e,{$from:o,empty:s}=n;if(!s||o.parent.type!==this.type||!(o.parentOffset===o.parent.nodeSize-2))return!1;const u=o.after();return u===void 0?!1:r.nodeAt(u)?t.commands.command(({tr:h})=>(h.setSelection(Je.near(r.resolve(u))),!0)):t.commands.exitCode()}}},addInputRules(){return[Gv({find:NU,type:this.type,getAttributes:t=>({language:t[1]})}),Gv({find:DU,type:this.type,getAttributes:t=>({language:t[1]})})]},addProseMirrorPlugins(){return[new Kt({key:new vn("codeBlockVSCodeHandler"),props:{handlePaste:(t,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const n=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),o=r?JSON.parse(r):void 0,s=o?.mode;if(!n||!s)return!1;const{tr:l,schema:u}=t.state,d=u.text(n.replace(/\r\n?/g,`
`));return l.replaceSelectionWith(this.type.create({language:s},d)),l.selection.$from.parent.type!==this.type&&l.setSelection(Ve.near(l.doc.resolve(Math.max(0,l.selection.from-2)))),l.setMeta("paste",!0),t.dispatch(l),!0}}})]}}),zU=kr.create({name:"doc",topNode:!0,content:"block+",renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`

`):""}),IU=kr.create({name:"hardBreak",markdownTokenName:"br",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:t}){return["br",pn(this.options.HTMLAttributes,t)]},renderText(){return`
`},renderMarkdown:()=>`  
`,parseMarkdown:()=>({type:"hardBreak"}),addCommands(){return{setHardBreak:()=>({commands:t,chain:e,state:n,editor:r})=>t.first([()=>t.exitCode(),()=>t.command(()=>{const{selection:o,storedMarks:s}=n;if(o.$from.parent.type.spec.isolating)return!1;const{keepMarks:l}=this.options,{splittableMarks:u}=r.extensionManager,d=s||o.$to.parentOffset&&o.$from.marks();return e().insertContent({type:this.name}).command(({tr:h,dispatch:p})=>{if(p&&d&&l){const g=d.filter(y=>u.includes(y.type.name));h.ensureMarks(g)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),BU=kr.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(t=>({tag:`h${t}`,attrs:{level:t}}))},renderHTML({node:t,HTMLAttributes:e}){return[`h${this.options.levels.includes(t.attrs.level)?t.attrs.level:this.options.levels[0]}`,pn(this.options.HTMLAttributes,e),0]},parseMarkdown:(t,e)=>e.createNode("heading",{level:t.depth||1},e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>{var n;const r=(n=t.attrs)!=null&&n.level?parseInt(t.attrs.level,10):1,o="#".repeat(r);return t.content?`${o} ${e.renderChildren(t.content)}`:""},addCommands(){return{setHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.setNode(this.name,t):!1,toggleHeading:t=>({commands:e})=>this.options.levels.includes(t.level)?e.toggleNode(this.name,"paragraph",t):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((t,e)=>({...t,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(t=>Gv({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${t}})\\s$`),type:this.type,getAttributes:{level:t}}))}}),PU=kr.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{},nextNodeType:"paragraph"}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:t}){return["hr",pn(this.options.HTMLAttributes,t)]},markdownTokenName:"hr",parseMarkdown:(t,e)=>e.createNode("horizontalRule"),renderMarkdown:()=>"---",addCommands(){return{setHorizontalRule:()=>({chain:t,state:e})=>{if(!EB(e,e.schema.nodes[this.name]))return!1;const{selection:n}=e,{$to:r}=n,o=t();return dC(n)?o.insertContentAt(r.pos,{type:this.name}):o.insertContent({type:this.name}),o.command(({state:s,tr:l,dispatch:u})=>{if(u){const{$to:d}=l.selection,h=d.end();if(d.nodeAfter)d.nodeAfter.isTextblock?l.setSelection(Ve.create(l.doc,d.pos+1)):d.nodeAfter.isBlock?l.setSelection(Ie.create(l.doc,d.pos)):l.setSelection(Ve.create(l.doc,d.pos));else{const p=s.schema.nodes[this.options.nextNodeType]||d.parent.type.contentMatch.defaultType,g=p?.create();g&&(l.insert(h,g),l.setSelection(Ve.create(l.doc,h+1)))}l.scrollIntoView()}return!0}).run()}}},addInputRules(){return[SB({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),UU=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,HU=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,qU=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,VU=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,FU=va.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:t=>t.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:t=>t.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:t}){return["em",pn(this.options.HTMLAttributes,t),0]},addCommands(){return{setItalic:()=>({commands:t})=>t.setMark(this.name),toggleItalic:()=>({commands:t})=>t.toggleMark(this.name),unsetItalic:()=>({commands:t})=>t.unsetMark(this.name)}},markdownTokenName:"em",parseMarkdown:(t,e)=>e.applyMark("italic",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`*${e.renderChildren(t)}*`,addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Ol({find:UU,type:this.type}),Ol({find:qU,type:this.type})]},addPasteRules(){return[da({find:HU,type:this.type}),da({find:VU,type:this.type})]}}),WU=Object.defineProperty,GU=(t,e)=>{for(var n in e)WU(t,n,{get:e[n],enumerable:!0})},$U="listItem",Gk="textStyle",$k=/^\s*([-+*])\s$/,$C=kr.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:t}){return["ul",pn(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>t.type!=="list"||t.ordered?[]:{type:"bulletList",content:t.items?e.parseChildren(t.items):[]},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownOptions:{indentsContent:!0},addCommands(){return{toggleBulletList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes($U,this.editor.getAttributes(Gk)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let t=jl({find:$k,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(t=jl({find:$k,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Gk),editor:this.editor})),[t]}}),KC=kr.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:t}){return["li",pn(this.options.HTMLAttributes,t),0]},markdownTokenName:"list_item",parseMarkdown:(t,e)=>{if(t.type!=="list_item")return[];let n=[];if(t.tokens&&t.tokens.length>0)if(t.tokens.some(o=>o.type==="paragraph"))n=e.parseChildren(t.tokens);else{const o=t.tokens[0];if(o&&o.type==="text"&&o.tokens&&o.tokens.length>0){if(n=[{type:"paragraph",content:e.parseInline(o.tokens)}],t.tokens.length>1){const l=t.tokens.slice(1),u=e.parseChildren(l);n.push(...u)}}else n=e.parseChildren(t.tokens)}return n.length===0&&(n=[{type:"paragraph",content:[]}]),{type:"listItem",content:n}},renderMarkdown:(t,e,n)=>ry(t,e,r=>r.parentType==="bulletList"?"- ":r.parentType==="orderedList"?`${r.index+1}. `:"- ",n),addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),KU={};GU(KU,{findListItemPos:()=>Mu,getNextListDepth:()=>yy,handleBackspace:()=>r0,handleDelete:()=>i0,hasListBefore:()=>YC,hasListItemAfter:()=>YU,hasListItemBefore:()=>XC,listItemHasSubList:()=>JC,nextListIsDeeper:()=>QC,nextListIsHigher:()=>ZC});var Mu=(t,e)=>{const{$from:n}=e.selection,r=hn(t,e.schema);let o=null,s=n.depth,l=n.pos,u=null;for(;s>0&&u===null;)o=n.node(s),o.type===r?u=s:(s-=1,l-=1);return u===null?null:{$pos:e.doc.resolve(l),depth:u}},yy=(t,e)=>{const n=Mu(t,e);if(!n)return!1;const[,r]=R6(e,t,n.$pos.pos+4);return r},YC=(t,e,n)=>{const{$anchor:r}=t.selection,o=Math.max(0,r.pos-2),s=t.doc.resolve(o).node();return!(!s||!n.includes(s.type.name))},XC=(t,e)=>{var n;const{$anchor:r}=e.selection,o=e.doc.resolve(r.pos-2);return!(o.index()===0||((n=o.nodeBefore)==null?void 0:n.type.name)!==t)},JC=(t,e,n)=>{if(!n)return!1;const r=hn(t,e.schema);let o=!1;return n.descendants(s=>{s.type===r&&(o=!0)}),o},r0=(t,e,n)=>{if(t.commands.undoInputRule())return!0;if(t.state.selection.from!==t.state.selection.to)return!1;if(!ps(t.state,e)&&YC(t.state,e,n)){const{$anchor:u}=t.state.selection,d=t.state.doc.resolve(u.before()-1),h=[];d.node().descendants((y,x)=>{y.type.name===e&&h.push({node:y,pos:x})});const p=h.at(-1);if(!p)return!1;const g=t.state.doc.resolve(d.start()+p.pos+1);return t.chain().cut({from:u.start()-1,to:u.end()+1},g.end()).joinForward().run()}if(!ps(t.state,e)||!z6(t.state))return!1;const r=Mu(e,t.state);if(!r)return!1;const s=t.state.doc.resolve(r.$pos.pos-2).node(r.depth),l=JC(e,t.state,s);return XC(e,t.state)&&!l?t.commands.joinItemBackward():t.chain().liftListItem(e).run()},QC=(t,e)=>{const n=yy(t,e),r=Mu(t,e);return!r||!n?!1:n>r.depth},ZC=(t,e)=>{const n=yy(t,e),r=Mu(t,e);return!r||!n?!1:n<r.depth},i0=(t,e)=>{if(!ps(t.state,e)||!L6(t.state,e))return!1;const{selection:n}=t.state,{$from:r,$to:o}=n;return!n.empty&&r.sameParent(o)?!1:QC(e,t.state)?t.chain().focus(t.state.selection.from+4).lift(e).joinBackward().run():ZC(e,t.state)?t.chain().joinForward().joinBackward().run():t.commands.joinItemForward()},YU=(t,e)=>{var n;const{$anchor:r}=e.selection,o=e.doc.resolve(r.pos-r.parentOffset-2);return!(o.index()===o.parent.childCount-1||((n=o.nodeAfter)==null?void 0:n.type.name)!==t)},eA=rn.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&i0(t,n)&&(e=!0)}),e},"Mod-Delete":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n})=>{t.state.schema.nodes[n]!==void 0&&i0(t,n)&&(e=!0)}),e},Backspace:({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&r0(t,n,r)&&(e=!0)}),e},"Mod-Backspace":({editor:t})=>{let e=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{t.state.schema.nodes[n]!==void 0&&r0(t,n,r)&&(e=!0)}),e}}}}),Kk=/^(\s*)(\d+)\.\s+(.*)$/,XU=/^\s/;function JU(t){const e=[];let n=0,r=0;for(;n<t.length;){const o=t[n],s=o.match(Kk);if(!s)break;const[,l,u,d]=s,h=l.length;let p=d,g=n+1;const y=[o];for(;g<t.length;){const x=t[g];if(x.match(Kk))break;if(x.trim()==="")y.push(x),p+=`
`,g+=1;else if(x.match(XU))y.push(x),p+=`
${x.slice(h+2)}`,g+=1;else break}e.push({indent:h,number:parseInt(u,10),content:p.trim(),raw:y.join(`
`)}),r=g,n=g}return[e,r]}function tA(t,e,n){var r;const o=[];let s=0;for(;s<t.length;){const l=t[s];if(l.indent===e){const u=l.content.split(`
`),d=((r=u[0])==null?void 0:r.trim())||"",h=[];d&&h.push({type:"paragraph",raw:d,tokens:n.inlineTokens(d)});const p=u.slice(1).join(`
`).trim();if(p){const x=n.blockTokens(p);h.push(...x)}let g=s+1;const y=[];for(;g<t.length&&t[g].indent>e;)y.push(t[g]),g+=1;if(y.length>0){const x=Math.min(...y.map(E=>E.indent)),S=tA(y,x,n);h.push({type:"list",ordered:!0,start:y[0].number,items:S,raw:y.map(E=>E.raw).join(`
`)})}o.push({type:"list_item",raw:l.raw,tokens:h}),s=g}else s+=1}return o}function QU(t,e){return t.map(n=>{if(n.type!=="list_item")return e.parseChildren([n])[0];const r=[];return n.tokens&&n.tokens.length>0&&n.tokens.forEach(o=>{if(o.type==="paragraph"||o.type==="list"||o.type==="blockquote"||o.type==="code")r.push(...e.parseChildren([o]));else if(o.type==="text"&&o.tokens){const s=e.parseChildren([o]);r.push({type:"paragraph",content:s})}else{const s=e.parseChildren([o]);s.length>0&&r.push(...s)}}),{type:"listItem",content:r}})}var ZU="listItem",Yk="textStyle",Xk=/^(\d+)\.\s$/,nA=kr.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:t=>t.hasAttribute("start")?parseInt(t.getAttribute("start")||"",10):1},type:{default:null,parseHTML:t=>t.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:t}){const{start:e,...n}=t;return e===1?["ol",pn(this.options.HTMLAttributes,n),0]:["ol",pn(this.options.HTMLAttributes,t),0]},markdownTokenName:"list",parseMarkdown:(t,e)=>{if(t.type!=="list"||!t.ordered)return[];const n=t.start||1,r=t.items?QU(t.items,e):[];return n!==1?{type:"orderedList",attrs:{start:n},content:r}:{type:"orderedList",content:r}},renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"orderedList",level:"block",start:t=>{const e=t.match(/^(\s*)(\d+)\.\s+/),n=e?.index;return n!==void 0?n:-1},tokenize:(t,e,n)=>{var r;const o=t.split(`
`),[s,l]=JU(o);if(s.length===0)return;const u=tA(s,0,n);return u.length===0?void 0:{type:"list",ordered:!0,start:((r=s[0])==null?void 0:r.number)||1,items:u,raw:o.slice(0,l).join(`
`)}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleOrderedList:()=>({commands:t,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(ZU,this.editor.getAttributes(Yk)).run():t.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let t=jl({find:Xk,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(t=jl({find:Xk,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(Yk)}),joinPredicate:(e,n)=>n.childCount+n.attrs.start===+e[1],editor:this.editor})),[t]}}),eH=/^\s*(\[([( |x])?\])\s$/,tH=kr.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:t=>{const e=t.getAttribute("data-checked");return e===""||e==="true"},renderHTML:t=>({"data-checked":t.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:t,HTMLAttributes:e}){return["li",pn(this.options.HTMLAttributes,e,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:t.attrs.checked?"checked":null}],["span"]],["div",0]]},parseMarkdown:(t,e)=>{const n=[];if(t.tokens&&t.tokens.length>0?n.push(e.createNode("paragraph",{},e.parseInline(t.tokens))):t.text?n.push(e.createNode("paragraph",{},[e.createNode("text",{text:t.text})])):n.push(e.createNode("paragraph",{},[])),t.nestedTokens&&t.nestedTokens.length>0){const r=e.parseChildren(t.nestedTokens);n.push(...r)}return e.createNode("taskItem",{checked:t.checked||!1},n)},renderMarkdown:(t,e)=>{var n;const o=`- [${(n=t.attrs)!=null&&n.checked?"x":" "}] `;return ry(t,e,o)},addKeyboardShortcuts(){const t={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...t,Tab:()=>this.editor.commands.sinkListItem(this.name)}:t},addNodeView(){return({node:t,HTMLAttributes:e,getPos:n,editor:r})=>{const o=document.createElement("li"),s=document.createElement("label"),l=document.createElement("span"),u=document.createElement("input"),d=document.createElement("div"),h=g=>{var y,x;u.ariaLabel=((x=(y=this.options.a11y)==null?void 0:y.checkboxLabel)==null?void 0:x.call(y,g,u.checked))||`Task item checkbox for ${g.textContent||"empty task item"}`};h(t),s.contentEditable="false",u.type="checkbox",u.addEventListener("mousedown",g=>g.preventDefault()),u.addEventListener("change",g=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){u.checked=!u.checked;return}const{checked:y}=g.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:x})=>{const S=n();if(typeof S!="number")return!1;const E=x.doc.nodeAt(S);return x.setNodeMarkup(S,void 0,{...E?.attrs,checked:y}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(t,y)||(u.checked=!u.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([g,y])=>{o.setAttribute(g,y)}),o.dataset.checked=t.attrs.checked,u.checked=t.attrs.checked,s.append(u,l),o.append(s,d),Object.entries(e).forEach(([g,y])=>{o.setAttribute(g,y)});let p=new Set(Object.keys(e));return{dom:o,contentDOM:d,update:g=>{if(g.type!==this.type)return!1;o.dataset.checked=g.attrs.checked,u.checked=g.attrs.checked,h(g);const y=r.extensionManager.attributes,x=bu(g,y),S=new Set(Object.keys(x)),E=this.options.HTMLAttributes;return p.forEach(k=>{S.has(k)||(k in E?o.setAttribute(k,E[k]):o.removeAttribute(k))}),Object.entries(x).forEach(([k,w])=>{w==null?k in E?o.setAttribute(k,E[k]):o.removeAttribute(k):o.setAttribute(k,w)}),p=S,!0}}}},addInputRules(){return[jl({find:eH,type:this.type,getAttributes:t=>({checked:t[t.length-1]==="x"})})]}}),nH=kr.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:t}){return["ul",pn(this.options.HTMLAttributes,t,{"data-type":this.name}),0]},parseMarkdown:(t,e)=>e.createNode("taskList",{},e.parseChildren(t.items||[])),renderMarkdown:(t,e)=>t.content?e.renderChildren(t.content,`
`):"",markdownTokenizer:{name:"taskList",level:"block",start(t){var e;const n=(e=t.match(/^\s*[-+*]\s+\[([ xX])\]\s+/))==null?void 0:e.index;return n!==void 0?n:-1},tokenize(t,e,n){const r=s=>{const l=$v(s,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:u=>({indentLevel:u[1].length,mainContent:u[4],checked:u[3].toLowerCase()==="x"}),createToken:(u,d)=>({type:"taskItem",raw:"",mainContent:u.mainContent,indentLevel:u.indentLevel,checked:u.checked,text:u.mainContent,tokens:n.inlineTokens(u.mainContent),nestedTokens:d}),customNestedParser:r},n);return l?[{type:"taskList",raw:l.raw,items:l.items}]:n.blockTokens(s)},o=$v(t,{itemPattern:/^(\s*)([-+*])\s+\[([ xX])\]\s+(.*)$/,extractItemData:s=>({indentLevel:s[1].length,mainContent:s[4],checked:s[3].toLowerCase()==="x"}),createToken:(s,l)=>({type:"taskItem",raw:"",mainContent:s.mainContent,indentLevel:s.indentLevel,checked:s.checked,text:s.mainContent,tokens:n.inlineTokens(s.mainContent),nestedTokens:l}),customNestedParser:r},n);if(o)return{type:"taskList",raw:o.raw,items:o.items}}},markdownOptions:{indentsContent:!0},addCommands(){return{toggleTaskList:()=>({commands:t})=>t.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});rn.create({name:"listKit",addExtensions(){const t=[];return this.options.bulletList!==!1&&t.push($C.configure(this.options.bulletList)),this.options.listItem!==!1&&t.push(KC.configure(this.options.listItem)),this.options.listKeymap!==!1&&t.push(eA.configure(this.options.listKeymap)),this.options.orderedList!==!1&&t.push(nA.configure(this.options.orderedList)),this.options.taskItem!==!1&&t.push(tH.configure(this.options.taskItem)),this.options.taskList!==!1&&t.push(nH.configure(this.options.taskList)),t}});var rH=kr.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:t}){return["p",pn(this.options.HTMLAttributes,t),0]},parseMarkdown:(t,e)=>{const n=t.tokens||[];return n.length===1&&n[0].type==="image"?e.parseChildren([n[0]]):e.createNode("paragraph",void 0,e.parseInline(n))},renderMarkdown:(t,e)=>!t||!Array.isArray(t.content)?"":e.renderChildren(t.content),addCommands(){return{setParagraph:()=>({commands:t})=>t.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),iH=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,oH=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,sH=va.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["s",pn(this.options.HTMLAttributes,t),0]},markdownTokenName:"del",parseMarkdown:(t,e)=>e.applyMark("strike",e.parseInline(t.tokens||[])),renderMarkdown:(t,e)=>`~~${e.renderChildren(t)}~~`,addCommands(){return{setStrike:()=>({commands:t})=>t.setMark(this.name),toggleStrike:()=>({commands:t})=>t.toggleMark(this.name),unsetStrike:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Ol({find:iH,type:this.type})]},addPasteRules(){return[da({find:oH,type:this.type})]}}),aH=kr.create({name:"text",group:"inline",parseMarkdown:t=>({type:"text",text:t.text||""}),renderMarkdown:t=>t.text||""}),lH=va.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:t=>t.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:t}){return["u",pn(this.options.HTMLAttributes,t),0]},parseMarkdown(t,e){return e.applyMark(this.name||"underline",e.parseInline(t.tokens||[]))},renderMarkdown(t,e){return`++${e.renderChildren(t)}++`},markdownTokenizer:{name:"underline",level:"inline",start(t){return t.indexOf("++")},tokenize(t,e,n){const o=/^(\+\+)([\s\S]+?)(\+\+)/.exec(t);if(!o)return;const s=o[2].trim();return{type:"underline",raw:o[0],text:s,tokens:n.inlineTokens(s)}}},addCommands(){return{setUnderline:()=>({commands:t})=>t.setMark(this.name),toggleUnderline:()=>({commands:t})=>t.toggleMark(this.name),unsetUnderline:()=>({commands:t})=>t.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}});function cH(t={}){return new Kt({view(e){return new uH(e,t)}})}class uH{constructor(e,n){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(o=>{let s=l=>{this[o](l)};return e.dom.addEventListener(o,s),{name:o,handler:s}})}destroy(){this.handlers.forEach(({name:e,handler:n})=>this.editorView.dom.removeEventListener(e,n))}update(e,n){this.cursorPos!=null&&n.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),n=!e.parent.inlineContent,r,o=this.editorView.dom,s=o.getBoundingClientRect(),l=s.width/o.offsetWidth,u=s.height/o.offsetHeight;if(n){let g=e.nodeBefore,y=e.nodeAfter;if(g||y){let x=this.editorView.nodeDOM(this.cursorPos-(g?g.nodeSize:0));if(x){let S=x.getBoundingClientRect(),E=g?S.bottom:S.top;g&&y&&(E=(E+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let k=this.width/2*u;r={left:S.left,right:S.right,top:E-k,bottom:E+k}}}}if(!r){let g=this.editorView.coordsAtPos(this.cursorPos),y=this.width/2*l;r={left:g.left-y,right:g.left+y,top:g.top,bottom:g.bottom}}let d=this.editorView.dom.offsetParent;this.element||(this.element=d.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let h,p;if(!d||d==document.body&&getComputedStyle(d).position=="static")h=-pageXOffset,p=-pageYOffset;else{let g=d.getBoundingClientRect(),y=g.width/d.offsetWidth,x=g.height/d.offsetHeight;h=g.left-d.scrollLeft*y,p=g.top-d.scrollTop*x}this.element.style.left=(r.left-h)/l+"px",this.element.style.top=(r.top-p)/u+"px",this.element.style.width=(r.right-r.left)/l+"px",this.element.style.height=(r.bottom-r.top)/u+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),o=r&&r.type.spec.disableDropCursor,s=typeof o=="function"?o(this.editorView,n,e):o;if(n&&!s){let l=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let u=K2(this.editorView.state.doc,l,this.editorView.dragging.slice);u!=null&&(l=u)}this.setCursor(l),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}class en extends Je{constructor(e){super(e,e)}map(e,n){let r=e.resolve(n.map(this.head));return en.valid(r)?new en(r):Je.near(r)}content(){return xe.empty}eq(e){return e instanceof en&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new en(e.resolve(n.pos))}getBookmark(){return new by(this.anchor)}static valid(e){let n=e.parent;if(n.isTextblock||!dH(e)||!fH(e))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let o=n.contentMatchAt(e.index()).defaultType;return o&&o.isTextblock}static findGapCursorFrom(e,n,r=!1){e:for(;;){if(!r&&en.valid(e))return e;let o=e.pos,s=null;for(let l=e.depth;;l--){let u=e.node(l);if(n>0?e.indexAfter(l)<u.childCount:e.index(l)>0){s=u.child(n>0?e.indexAfter(l):e.index(l)-1);break}else if(l==0)return null;o+=n;let d=e.doc.resolve(o);if(en.valid(d))return d}for(;;){let l=n>0?s.firstChild:s.lastChild;if(!l){if(s.isAtom&&!s.isText&&!Ie.isSelectable(s)){e=e.doc.resolve(o+s.nodeSize*n),r=!1;continue e}break}s=l,o+=n;let u=e.doc.resolve(o);if(en.valid(u))return u}return null}}}en.prototype.visible=!1;en.findFrom=en.findGapCursorFrom;Je.jsonID("gapcursor",en);class by{constructor(e){this.pos=e}map(e){return new by(e.map(this.pos))}resolve(e){let n=e.resolve(this.pos);return en.valid(n)?new en(n):Je.near(n)}}function rA(t){return t.isAtom||t.spec.isolating||t.spec.createGapCursor}function dH(t){for(let e=t.depth;e>=0;e--){let n=t.index(e),r=t.node(e);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(n-1);;o=o.lastChild){if(o.childCount==0&&!o.inlineContent||rA(o.type))return!0;if(o.inlineContent)return!1}}return!0}function fH(t){for(let e=t.depth;e>=0;e--){let n=t.indexAfter(e),r=t.node(e);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(n);;o=o.firstChild){if(o.childCount==0&&!o.inlineContent||rA(o.type))return!0;if(o.inlineContent)return!1}}return!0}function hH(){return new Kt({props:{decorations:vH,createSelectionBetween(t,e,n){return e.pos==n.pos&&en.valid(n)?new en(n):null},handleClick:mH,handleKeyDown:pH,handleDOMEvents:{beforeinput:gH}}})}const pH=Yw({ArrowLeft:vf("horiz",-1),ArrowRight:vf("horiz",1),ArrowUp:vf("vert",-1),ArrowDown:vf("vert",1)});function vf(t,e){const n=t=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,o,s){let l=r.selection,u=e>0?l.$to:l.$from,d=l.empty;if(l instanceof Ve){if(!s.endOfTextblock(n)||u.depth==0)return!1;d=!1,u=r.doc.resolve(e>0?u.after():u.before())}let h=en.findGapCursorFrom(u,e,d);return h?(o&&o(r.tr.setSelection(new en(h))),!0):!1}}function mH(t,e,n){if(!t||!t.editable)return!1;let r=t.state.doc.resolve(e);if(!en.valid(r))return!1;let o=t.posAtCoords({left:n.clientX,top:n.clientY});return o&&o.inside>-1&&Ie.isSelectable(t.state.doc.nodeAt(o.inside))?!1:(t.dispatch(t.state.tr.setSelection(new en(r))),!0)}function gH(t,e){if(e.inputType!="insertCompositionText"||!(t.state.selection instanceof en))return!1;let{$from:n}=t.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(t.state.schema.nodes.text);if(!r)return!1;let o=oe.empty;for(let l=r.length-1;l>=0;l--)o=oe.from(r[l].createAndFill(null,o));let s=t.state.tr.replace(n.pos,n.pos,new xe(o,0,0));return s.setSelection(Ve.near(s.doc.resolve(n.pos+1))),t.dispatch(s),!1}function vH(t){if(!(t.selection instanceof en))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",$t.create(t.doc,[Jn.widget(t.selection.head,e,{key:"gapcursor"})])}var Rh=200,Tn=function(){};Tn.prototype.append=function(e){return e.length?(e=Tn.from(e),!this.length&&e||e.length<Rh&&this.leafAppend(e)||this.length<Rh&&e.leafPrepend(this)||this.appendInner(e)):this};Tn.prototype.prepend=function(e){return e.length?Tn.from(e).append(this):this};Tn.prototype.appendInner=function(e){return new yH(this,e)};Tn.prototype.slice=function(e,n){return e===void 0&&(e=0),n===void 0&&(n=this.length),e>=n?Tn.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,n))};Tn.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};Tn.prototype.forEach=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(e,n,r,0):this.forEachInvertedInner(e,n,r,0)};Tn.prototype.map=function(e,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var o=[];return this.forEach(function(s,l){return o.push(e(s,l))},n,r),o};Tn.from=function(e){return e instanceof Tn?e:e&&e.length?new iA(e):Tn.empty};var iA=(function(t){function e(r){t.call(this),this.values=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(o,s){return o==0&&s==this.length?this:new e(this.values.slice(o,s))},e.prototype.getInner=function(o){return this.values[o]},e.prototype.forEachInner=function(o,s,l,u){for(var d=s;d<l;d++)if(o(this.values[d],u+d)===!1)return!1},e.prototype.forEachInvertedInner=function(o,s,l,u){for(var d=s-1;d>=l;d--)if(o(this.values[d],u+d)===!1)return!1},e.prototype.leafAppend=function(o){if(this.length+o.length<=Rh)return new e(this.values.concat(o.flatten()))},e.prototype.leafPrepend=function(o){if(this.length+o.length<=Rh)return new e(o.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e})(Tn);Tn.empty=new iA([]);var yH=(function(t){function e(n,r){t.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,o,s,l){var u=this.left.length;if(o<u&&this.left.forEachInner(r,o,Math.min(s,u),l)===!1||s>u&&this.right.forEachInner(r,Math.max(o-u,0),Math.min(this.length,s)-u,l+u)===!1)return!1},e.prototype.forEachInvertedInner=function(r,o,s,l){var u=this.left.length;if(o>u&&this.right.forEachInvertedInner(r,o-u,Math.max(s,u)-u,l+u)===!1||s<u&&this.left.forEachInvertedInner(r,Math.min(o,u),s,l)===!1)return!1},e.prototype.sliceInner=function(r,o){if(r==0&&o==this.length)return this;var s=this.left.length;return o<=s?this.left.slice(r,o):r>=s?this.right.slice(r-s,o-s):this.left.slice(r,s).append(this.right.slice(0,o-s))},e.prototype.leafAppend=function(r){var o=this.right.leafAppend(r);if(o)return new e(this.left,o)},e.prototype.leafPrepend=function(r){var o=this.left.leafPrepend(r);if(o)return new e(o,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e})(Tn);const bH=500;class Qr{constructor(e,n){this.items=e,this.eventCount=n}popEvent(e,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let o,s;n&&(o=this.remapping(r,this.items.length),s=o.maps.length);let l=e.tr,u,d,h=[],p=[];return this.items.forEach((g,y)=>{if(!g.step){o||(o=this.remapping(r,y+1),s=o.maps.length),s--,p.push(g);return}if(o){p.push(new vi(g.map));let x=g.step.map(o.slice(s)),S;x&&l.maybeStep(x).doc&&(S=l.mapping.maps[l.mapping.maps.length-1],h.push(new vi(S,void 0,void 0,h.length+p.length))),s--,S&&o.appendMap(S,s)}else l.maybeStep(g.step);if(g.selection)return u=o?g.selection.map(o.slice(s)):g.selection,d=new Qr(this.items.slice(0,r).append(p.reverse().concat(h)),this.eventCount-1),!1},this.items.length,0),{remaining:d,transform:l,selection:u}}addTransform(e,n,r,o){let s=[],l=this.eventCount,u=this.items,d=!o&&u.length?u.get(u.length-1):null;for(let p=0;p<e.steps.length;p++){let g=e.steps[p].invert(e.docs[p]),y=new vi(e.mapping.maps[p],g,n),x;(x=d&&d.merge(y))&&(y=x,p?s.pop():u=u.slice(0,u.length-1)),s.push(y),n&&(l++,n=void 0),o||(d=y)}let h=l-r.depth;return h>SH&&(u=xH(u,h),l-=h),new Qr(u.append(s),l)}remapping(e,n){let r=new hu;return this.items.forEach((o,s)=>{let l=o.mirrorOffset!=null&&s-o.mirrorOffset>=e?r.maps.length-o.mirrorOffset:void 0;r.appendMap(o.map,l)},e,n),r}addMaps(e){return this.eventCount==0?this:new Qr(this.items.append(e.map(n=>new vi(n))),this.eventCount)}rebased(e,n){if(!this.eventCount)return this;let r=[],o=Math.max(0,this.items.length-n),s=e.mapping,l=e.steps.length,u=this.eventCount;this.items.forEach(y=>{y.selection&&u--},o);let d=n;this.items.forEach(y=>{let x=s.getMirror(--d);if(x==null)return;l=Math.min(l,x);let S=s.maps[x];if(y.step){let E=e.steps[x].invert(e.docs[x]),k=y.selection&&y.selection.map(s.slice(d+1,x));k&&u++,r.push(new vi(S,E,k))}else r.push(new vi(S))},o);let h=[];for(let y=n;y<l;y++)h.push(new vi(s.maps[y]));let p=this.items.slice(0,o).append(h).append(r),g=new Qr(p,u);return g.emptyItemCount()>bH&&(g=g.compress(this.items.length-r.length)),g}emptyItemCount(){let e=0;return this.items.forEach(n=>{n.step||e++}),e}compress(e=this.items.length){let n=this.remapping(0,e),r=n.maps.length,o=[],s=0;return this.items.forEach((l,u)=>{if(u>=e)o.push(l),l.selection&&s++;else if(l.step){let d=l.step.map(n.slice(r)),h=d&&d.getMap();if(r--,h&&n.appendMap(h,r),d){let p=l.selection&&l.selection.map(n.slice(r));p&&s++;let g=new vi(h.invert(),d,p),y,x=o.length-1;(y=o.length&&o[x].merge(g))?o[x]=y:o.push(g)}}else l.map&&r--},this.items.length,0),new Qr(Tn.from(o.reverse()),s)}}Qr.empty=new Qr(Tn.empty,0);function xH(t,e){let n;return t.forEach((r,o)=>{if(r.selection&&e--==0)return n=o,!1}),t.slice(n)}class vi{constructor(e,n,r,o){this.map=e,this.step=n,this.selection=r,this.mirrorOffset=o}merge(e){if(this.step&&e.step&&!e.selection){let n=e.step.merge(this.step);if(n)return new vi(n.getMap().invert(),n,this.selection)}}}class Yo{constructor(e,n,r,o,s){this.done=e,this.undone=n,this.prevRanges=r,this.prevTime=o,this.prevComposition=s}}const SH=20;function EH(t,e,n,r){let o=n.getMeta(oa),s;if(o)return o.historyState;n.getMeta(wH)&&(t=new Yo(t.done,t.undone,null,0,-1));let l=n.getMeta("appendedTransaction");if(n.steps.length==0)return t;if(l&&l.getMeta(oa))return l.getMeta(oa).redo?new Yo(t.done.addTransform(n,void 0,r,jf(e)),t.undone,Jk(n.mapping.maps),t.prevTime,t.prevComposition):new Yo(t.done,t.undone.addTransform(n,void 0,r,jf(e)),null,t.prevTime,t.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(l&&l.getMeta("addToHistory")===!1)){let u=n.getMeta("composition"),d=t.prevTime==0||!l&&t.prevComposition!=u&&(t.prevTime<(n.time||0)-r.newGroupDelay||!kH(n,t.prevRanges)),h=l?ov(t.prevRanges,n.mapping):Jk(n.mapping.maps);return new Yo(t.done.addTransform(n,d?e.selection.getBookmark():void 0,r,jf(e)),Qr.empty,h,n.time,u??t.prevComposition)}else return(s=n.getMeta("rebased"))?new Yo(t.done.rebased(n,s),t.undone.rebased(n,s),ov(t.prevRanges,n.mapping),t.prevTime,t.prevComposition):new Yo(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),ov(t.prevRanges,n.mapping),t.prevTime,t.prevComposition)}function kH(t,e){if(!e)return!1;if(!t.docChanged)return!0;let n=!1;return t.mapping.maps[0].forEach((r,o)=>{for(let s=0;s<e.length;s+=2)r<=e[s+1]&&o>=e[s]&&(n=!0)}),n}function Jk(t){let e=[];for(let n=t.length-1;n>=0&&e.length==0;n--)t[n].forEach((r,o,s,l)=>e.push(s,l));return e}function ov(t,e){if(!t)return null;let n=[];for(let r=0;r<t.length;r+=2){let o=e.map(t[r],1),s=e.map(t[r+1],-1);o<=s&&n.push(o,s)}return n}function TH(t,e,n){let r=jf(e),o=oa.get(e).spec.config,s=(n?t.undone:t.done).popEvent(e,r);if(!s)return null;let l=s.selection.resolve(s.transform.doc),u=(n?t.done:t.undone).addTransform(s.transform,e.selection.getBookmark(),o,r),d=new Yo(n?u:s.remaining,n?s.remaining:u,null,0,-1);return s.transform.setSelection(l).setMeta(oa,{redo:n,historyState:d})}let sv=!1,Qk=null;function jf(t){let e=t.plugins;if(Qk!=e){sv=!1,Qk=e;for(let n=0;n<e.length;n++)if(e[n].spec.historyPreserveItems){sv=!0;break}}return sv}const oa=new vn("history"),wH=new vn("closeHistory");function CH(t={}){return t={depth:t.depth||100,newGroupDelay:t.newGroupDelay||500},new Kt({key:oa,state:{init(){return new Yo(Qr.empty,Qr.empty,null,0,-1)},apply(e,n,r){return EH(n,r,e,t)}},config:t,props:{handleDOMEvents:{beforeinput(e,n){let r=n.inputType,o=r=="historyUndo"?sA:r=="historyRedo"?aA:null;return!o||!e.editable?!1:(n.preventDefault(),o(e.state,e.dispatch))}}}})}function oA(t,e){return(n,r)=>{let o=oa.getState(n);if(!o||(t?o.undone:o.done).eventCount==0)return!1;if(r){let s=TH(o,n,t);s&&r(e?s.scrollIntoView():s)}return!0}}const sA=oA(!1,!0),aA=oA(!0,!0);rn.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:t=>t.length,wordCounter:t=>t.split(" ").filter(e=>e!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=t=>{const e=t?.node||this.editor.state.doc;if((t?.mode||this.options.mode)==="textSize"){const r=e.textBetween(0,e.content.size,void 0," ");return this.options.textCounter(r)}return e.nodeSize},this.storage.words=t=>{const e=t?.node||this.editor.state.doc,n=e.textBetween(0,e.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let t=!1;return[new Kt({key:new vn("characterCount"),appendTransaction:(e,n,r)=>{if(t)return;const o=this.options.limit;if(o==null||o===0){t=!0;return}const s=this.storage.characters({node:r.doc});if(s>o){const l=s-o,u=0,d=l;console.warn(`[CharacterCount] Initial content exceeded limit of ${o} characters. Content was automatically trimmed.`);const h=r.tr.deleteRange(u,d);return t=!0,h}t=!0},filterTransaction:(e,n)=>{const r=this.options.limit;if(!e.docChanged||r===0||r===null||r===void 0)return!0;const o=this.storage.characters({node:n.doc}),s=this.storage.characters({node:e.doc});if(s<=r||o>r&&s>r&&s<=o)return!0;if(o>r&&s>r&&s>o||!e.getMeta("paste"))return!1;const u=e.selection.$head.pos,d=s-r,h=u-d,p=u;return e.deleteRange(h,p),!(this.storage.characters({node:e.doc})>r)}})]}});var AH=rn.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[cH(this.options)]}});rn.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Kt({key:new vn("focus"),props:{decorations:({doc:t,selection:e})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:o}=e,s=[];if(!n||!r)return $t.create(t,[]);let l=0;this.options.mode==="deepest"&&t.descendants((d,h)=>{if(d.isText)return;if(!(o>=h&&o<=h+d.nodeSize-1))return!1;l+=1});let u=0;return t.descendants((d,h)=>{if(d.isText||!(o>=h&&o<=h+d.nodeSize-1))return!1;if(u+=1,this.options.mode==="deepest"&&l-u>0||this.options.mode==="shallowest"&&u>1)return this.options.mode==="deepest";s.push(Jn.node(h,h+d.nodeSize,{class:this.options.className}))}),$t.create(t,s)}}})]}});var _H=rn.create({name:"gapCursor",addProseMirrorPlugins(){return[hH()]},extendNodeSchema(t){var e;const n={name:t.name,options:t.options,storage:t.storage};return{allowGapCursor:(e=Et(Ne(t,"allowGapCursor",n)))!=null?e:null}}});rn.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Kt({key:new vn("placeholder"),props:{decorations:({doc:t,selection:e})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,o=[];if(!n)return null;const s=this.editor.isEmpty;return t.descendants((l,u)=>{const d=r>=u&&r<=u+l.nodeSize,h=!l.isLeaf&&Zh(l);if((d||!this.options.showOnlyCurrent)&&h){const p=[this.options.emptyNodeClass];s&&p.push(this.options.emptyEditorClass);const g=Jn.node(u,u+l.nodeSize,{class:p.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:l,pos:u,hasAnchor:d}):this.options.placeholder});o.push(g)}return this.options.includeChildren}),$t.create(t,o)}}})]}});rn.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:t,options:e}=this;return[new Kt({key:new vn("selection"),props:{decorations(n){return n.selection.empty||t.isFocused||!t.isEditable||dC(n.selection)||t.view.dragging?null:$t.create(n.doc,[Jn.inline(n.selection.from,n.selection.to,{class:e.className})])}}})]}});function Zk({types:t,node:e}){return e&&Array.isArray(t)&&t.includes(e.type)||e?.type===t}var MH=rn.create({name:"trailingNode",addOptions(){return{node:void 0,notAfter:[]}},addProseMirrorPlugins(){var t;const e=new vn(this.name),n=this.options.node||((t=this.editor.schema.topNodeType.contentMatch.defaultType)==null?void 0:t.name)||"paragraph",r=Object.entries(this.editor.schema.nodes).map(([,o])=>o).filter(o=>(this.options.notAfter||[]).concat(n).includes(o.name));return[new Kt({key:e,appendTransaction:(o,s,l)=>{const{doc:u,tr:d,schema:h}=l,p=e.getState(l),g=u.content.size,y=h.nodes[n];if(p)return d.insert(g,y.create())},state:{init:(o,s)=>{const l=s.tr.doc.lastChild;return!Zk({node:l,types:r})},apply:(o,s)=>{if(!o.docChanged||o.getMeta("__uniqueIDTransaction"))return s;const l=o.doc.lastChild;return!Zk({node:l,types:r})}}})]}}),OH=rn.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:t,dispatch:e})=>sA(t,e),redo:()=>({state:t,dispatch:e})=>aA(t,e)}},addProseMirrorPlugins(){return[CH(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),jH=rn.create({name:"starterKit",addExtensions(){var t,e,n,r;const o=[];return this.options.bold!==!1&&o.push(MU.configure(this.options.bold)),this.options.blockquote!==!1&&o.push(TU.configure(this.options.blockquote)),this.options.bulletList!==!1&&o.push($C.configure(this.options.bulletList)),this.options.code!==!1&&o.push(RU.configure(this.options.code)),this.options.codeBlock!==!1&&o.push(LU.configure(this.options.codeBlock)),this.options.document!==!1&&o.push(zU.configure(this.options.document)),this.options.dropcursor!==!1&&o.push(AH.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&o.push(_H.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&o.push(IU.configure(this.options.hardBreak)),this.options.heading!==!1&&o.push(BU.configure(this.options.heading)),this.options.undoRedo!==!1&&o.push(OH.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&o.push(PU.configure(this.options.horizontalRule)),this.options.italic!==!1&&o.push(FU.configure(this.options.italic)),this.options.listItem!==!1&&o.push(KC.configure(this.options.listItem)),this.options.listKeymap!==!1&&o.push(eA.configure((t=this.options)==null?void 0:t.listKeymap)),this.options.link!==!1&&o.push(eP.configure((e=this.options)==null?void 0:e.link)),this.options.orderedList!==!1&&o.push(nA.configure(this.options.orderedList)),this.options.paragraph!==!1&&o.push(rH.configure(this.options.paragraph)),this.options.strike!==!1&&o.push(sH.configure(this.options.strike)),this.options.text!==!1&&o.push(aH.configure(this.options.text)),this.options.underline!==!1&&o.push(lH.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&o.push(MH.configure((r=this.options)==null?void 0:r.trailingNode)),o}}),RH=jH;const NH={name:"",description:"",is_world:!1,ai_prompt:"",greeting:"",tags:[],is_public:!0,photo:null,appearance:""},ut={name:{min:1,max:100},description:{min:30,max:500},ai_prompt:{min:30,max:1e3},greeting:{min:30,max:1e3},appearance:{min:30,max:1e3},tags:{maxCount:5}};async function DH(t){const e=new FormData;return e.append("name",t.name.trim()),e.append("description",t.description.trim()),e.append("is_world",String(t.is_world)),e.append("ai_prompt",t.ai_prompt.trim()),e.append("greeting",t.greeting.trim()),e.append("is_public",String(t.is_public)),e.append("appearance",t.appearance.trim()),t.tags.length>0&&t.tags.forEach(n=>e.append("tags",n)),t.photo&&e.append("photo",t.photo),jO("/v1/create",e)}const yf=7,Nh="create_character_draft",LH=300*1e3,eT="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;600;700&display=swap",Xn={input:{input:{backgroundColor:"rgb(41, 41, 41)",color:"white",borderColor:"rgb(55, 55, 55)"},label:{color:"white",fontSize:"15px"}},card:{backgroundColor:"rgb(41, 41, 41)"},tipCard:{backgroundColor:"rgb(35, 30, 45)",border:"1px solid rgb(88, 70, 120)",boxShadow:"0 2px 8px rgba(139, 92, 246, 0.15)"},modal:{content:{backgroundColor:"rgb(28, 28, 28)"},header:{backgroundColor:"rgb(28, 28, 28)",color:"white"},body:{backgroundColor:"rgb(28, 28, 28)"},title:{color:"white",fontWeight:600},close:{color:"white"}}};function Ou({children:t}){return m.jsx(Hn,{padding:"md",radius:"md",style:Xn.tipCard,children:m.jsxs(U,{size:"sm",c:"rgb(200, 180, 230)",children:[" ",m.jsx("b",{style:{color:"rgb(180, 140, 255)"},children:":"})," ",t]})})}function Sa({children:t}){return m.jsx(U,{size:"1.5rem",fw:700,c:"white",children:t})}function Il({children:t}){return m.jsx(U,{size:"md",c:"rgb(180, 180, 180)",children:t})}function Dh({label:t,placeholder:e,value:n,onChange:r,error:o,maxLength:s,minLength:l,minRows:u,multiline:d}){const h=d?uv:o0,p=Zo(n).length,g=l&&p<l&&p>0,y=l?`${p}/${s}  (. ${l})`:`${Zo(n).length}/${s} `;return m.jsx(h,{label:t,placeholder:e,value:n,onChange:x=>r(x.target.value),error:o,maxLength:s,description:y,...d&&{minRows:u,autosize:!0},styles:{...Xn.input,description:{color:g?"rgb(250, 128, 114)":"rgb(160, 160, 160)"}}})}function Zo(t){return t.trim().replace(/\s+/g," ")}const zH={1:t=>{const e={},n=Zo(t.name),r=Zo(t.description);return n?n.length<ut.name.min?e.name=` ${ut.name.min} `:n.length>ut.name.max&&(e.name=` ${ut.name.max} `):e.name=" ",r?r.length<ut.description.min?e.description=` ${ut.description.min} `:r.length>ut.description.max&&(e.description=` ${ut.description.max} `):e.description=" ",e},2:t=>{const e=t.appearance||"",n=Zo(e);return e.length>0&&n.length===0?{appearance:" ,    "}:n&&n.length<ut.appearance.min?{appearance:` ${ut.appearance.min} `}:n.length>ut.appearance.max?{appearance:` ${ut.appearance.max} `}:{}},3:t=>{const e=Zo(t.ai_prompt);return e?e.length<ut.ai_prompt.min?{ai_prompt:` ${ut.ai_prompt.min} `}:e.length>ut.ai_prompt.max?{ai_prompt:` ${ut.ai_prompt.max} `}:{}:{ai_prompt:" "}},4:t=>{const e=Zo(t.greeting);return e?e.length<ut.greeting.min?{greeting:` ${ut.greeting.min} `}:e.length>ut.greeting.max?{greeting:` ${ut.greeting.max} `}:{}:{greeting:" "}},5:()=>({}),6:t=>t.photo?{}:{photo:" "}};function IH(t,e){const{photo:n,...r}=t,o={form:r,step:e,timestamp:Date.now()};try{localStorage.setItem(Nh,JSON.stringify(o))}catch(s){console.error("Failed to save draft:",s)}}function BH(){try{const t=localStorage.getItem(Nh);if(!t)return null;const e=JSON.parse(t);return Date.now()-e.timestamp>LH?(localStorage.removeItem(Nh),null):{form:e.form,step:e.step}}catch(t){return console.error("Failed to load draft:",t),null}}function PH(){localStorage.removeItem(Nh)}function UH(){const t=pa(),[e,n]=D.useState(0),[r,o]=D.useState(NH),[s,l]=D.useState({}),[u,d]=D.useState(!1),[h,p]=D.useState(null),[g,y]=D.useState([]),[x,S]=D.useState(!1),[E,k]=D.useState(!1),[w,C]=D.useState(!1),[_,R]=D.useState("left"),[j,z]=D.useState(!1),B=D.useMemo(()=>r.is_world?"":"",[r.is_world]),K=D.useMemo(()=>r.is_world?"":"",[r.is_world]);D.useEffect(()=>{if(!document.querySelector(`link[href="${eT}"]`)){const ve=document.createElement("link");ve.href=eT,ve.rel="stylesheet",document.head.appendChild(ve)}},[]),D.useEffect(()=>{const ve=BH();ve&&(o(fe=>({...fe,...ve.form})),n(ve.step),z(!0))},[]),D.useEffect(()=>{(j||r.name||r.description||r.ai_prompt||r.greeting)&&IH(r,e)},[r,e,j]),D.useEffect(()=>{(async()=>{S(!0);try{const fe=await zt("/v1/characters/tags");fe&&Array.isArray(fe.tags)&&y(fe.tags)}catch(fe){console.error("   :",fe)}finally{S(!1)}})()},[]);const W=D.useCallback((ve,fe)=>{o(ue=>({...ue,[ve]:fe})),l(ue=>({...ue,[ve]:void 0}))},[]),J=D.useCallback(()=>{const ve=zH[e];if(!ve)return!0;const fe=ve(r);return l(fe),Object.keys(fe).length===0},[e,r]),Z=D.useCallback((ve,fe)=>{R(ve),C(!0),setTimeout(()=>{fe(),setTimeout(()=>{C(!1)},50)},150)},[]),te=D.useCallback(()=>{(e===0||J())&&Z("left",()=>{n(ve=>Math.min(ve+1,yf-1))})},[e,J,Z]),je=D.useCallback(()=>{Z("right",()=>{n(ve=>Math.max(ve-1,0))})},[Z]),ke=D.useCallback(ve=>{o(fe=>fe.tags.includes(ve)?{...fe,tags:fe.tags.filter(ue=>ue!==ve)}:fe.tags.length>=ut.tags.maxCount?fe:{...fe,tags:[...fe.tags,ve]})},[]),me=D.useCallback(ve=>{o(fe=>({...fe,tags:fe.tags.filter(ue=>ue!==ve)}))},[]),H=D.useCallback(async()=>{if(J()){d(!0),p(null);try{const ve={...r,tags:[r.tags.join(", ")]};await DH(ve),PH(),r.is_public?Zt.show({title:`${r.is_world?"":""}  !`,message:"    Telegram-",color:"teal",icon:m.jsx(cu,{size:18}),autoClose:5e3,withCloseButton:!0,withBorder:!0,styles:{root:{backgroundColor:"rgb(20, 83, 45)",borderColor:"rgb(34, 197, 94)"},title:{color:"white",fontWeight:600},description:{color:"rgb(187, 247, 208)"},closeButton:{color:"white","&:hover":{backgroundColor:"rgb(22, 101, 52)"}}}}):Zt.show({title:`${r.is_world?"":""}  !`,message:"    ",color:"teal",icon:m.jsx(cu,{size:18}),autoClose:5e3,withCloseButton:!0,withBorder:!0,styles:{root:{backgroundColor:"rgb(20, 83, 45)",borderColor:"rgb(34, 197, 94)"},title:{color:"white",fontWeight:600},description:{color:"rgb(187, 247, 208)"},closeButton:{color:"white","&:hover":{backgroundColor:"rgb(22, 101, 52)"}}}}),t("/?filter=created")}catch(ve){console.error("Create character error:",ve);let fe=", -    ";if(ve instanceof Error){const ue=ve.message.toLowerCase();ue.includes("401")||ue.includes("unauthorized")||ue.includes("403")||ue.includes("forbidden")?fe=`, -    
      WebApp`:ue.includes("413")||ue.includes("too large")?fe=`, -    
   `:ue.includes("422")||ue.includes("validation")?fe=`, -    
   `:ue.includes("429")||ue.includes("rate limit")?fe=`, -    
  ,  `:ue.includes("500")||ue.includes("server error")?fe=`, -    
  ,  `:(ue.includes("network")||ue.includes("fetch"))&&(fe=`, -    
   `)}p(fe),Zt.show({title:" ",message:fe,color:"red",icon:m.jsx(pv,{size:18}),autoClose:7e3,withCloseButton:!0,withBorder:!0,styles:{root:{backgroundColor:"rgb(127, 29, 29)",borderColor:"rgb(239, 68, 68)"},title:{color:"white",fontWeight:600},description:{color:"rgb(254, 202, 202)"},closeButton:{color:"white","&:hover":{backgroundColor:"rgb(153, 27, 27)"}}}})}finally{d(!1)}}},[r,J,t]),ne=(e+1)/yf*100,ce=e===yf-1,Ce={form:r,errors:s,updateField:W,entityName:B,entityNameGen:K},ae={transition:"all 0.15s ease-out",opacity:w?0:1,transform:w?`translateX(${_==="left"?"-20px":"20px"})`:"translateX(0)"};return m.jsxs(pe,{style:{backgroundColor:"rgb(18, 18, 18)",minHeight:"100vh",fontFamily:"'Roboto', sans-serif"},children:[m.jsx(wu,{}),m.jsx(pe,{p:"md",children:m.jsxs(Ee,{gap:"md",children:[m.jsxs(pe,{children:[m.jsxs(Re,{justify:"space-between",mb:4,children:[m.jsxs(U,{size:"sm",c:"rgb(160, 160, 160)",children:[" ",e+1,"  ",yf]}),m.jsxs(U,{size:"sm",c:"rgb(160, 160, 160)",children:[Math.round(ne),"%"]})]}),m.jsx(bf,{value:ne,color:"violet",size:"sm",radius:"xl"})]}),m.jsxs(pe,{style:ae,children:[e===0&&m.jsx(HH,{...Ce}),e===1&&m.jsx(qH,{...Ce}),e===2&&m.jsx(VH,{...Ce}),e===3&&m.jsx(FH,{...Ce}),e===4&&m.jsx(WH,{...Ce}),e===5&&m.jsx(GH,{...Ce,availableTags:g,loadingTags:x,tagsModalOpened:E,setTagsModalOpened:k,onToggleTag:ke,onRemoveTag:me}),e===6&&m.jsx($H,{...Ce})]}),h&&m.jsx(a0,{color:"red",variant:"light",icon:m.jsx(pv,{size:16}),children:h}),m.jsxs(Re,{justify:e===0?"flex-end":"space-between",mt:"md",children:[e!==0&&m.jsx(He,{variant:"subtle",color:"gray",onClick:je,disabled:u||w,styles:{root:{transition:"none",backgroundColor:"transparent",border:"none",outline:"none",boxShadow:"none","&:hover":{backgroundColor:"rgba(255, 255, 255, 0.1)"},"&:disabled":{backgroundColor:"transparent"},"&:focus":{outline:"none",boxShadow:"none"},"&:focus-visible":{outline:"none",boxShadow:"none"}}},children:" "}),ce?m.jsx(He,{color:"violet",onClick:H,loading:u,disabled:u,children:u?"...":""}):m.jsx(He,{color:"violet",onClick:te,disabled:w,children:" "})]})]})})]})}function HH({form:t,updateField:e}){const n=[{isWorld:!1,icon:"",title:"",desc:"AI-   ",disabled:!1},{isWorld:!0,icon:"",title:"",desc:"   ",disabled:!0}],r=t.is_world?`   
    
    `:`     
    
    `;return m.jsxs(Ee,{gap:"lg",children:[m.jsx(Sa,{children:"   ?"}),m.jsx(Il,{children:"   .    AI-    .      ,      ."}),m.jsx(Re,{gap:"md",grow:!0,style:{alignItems:"stretch"},children:n.map(({isWorld:o,icon:s,title:l,desc:u,disabled:d})=>{const h=t.is_world===o;return m.jsxs(pe,{style:{position:"relative"},children:[m.jsx(Hn,{padding:"lg",radius:"md",style:{backgroundColor:h?"rgb(88, 28, 135)":"rgb(41, 41, 41)",cursor:d?"not-allowed":"pointer",border:h?"2px solid rgb(139, 92, 246)":"2px solid transparent",minHeight:"160px",display:"flex",flexDirection:"column",justifyContent:"center",opacity:d?.5:1,filter:d?"grayscale(0.5)":"none"},onClick:()=>!d&&e("is_world",o),children:m.jsxs(Ee,{align:"center",gap:"xs",children:[m.jsx(U,{size:"2.5rem",children:s}),m.jsx(U,{fw:700,c:"white",size:"lg",children:l}),m.jsx(U,{size:"sm",c:"rgb(180, 180, 180)",ta:"center",children:u})]})}),d&&m.jsx(xn,{size:"lg",variant:"filled",style:{position:"absolute",top:"10px",right:"10px",background:"linear-gradient(135deg, rgb(234, 179, 8) 0%, rgb(245, 158, 11) 100%)",color:"black",fontWeight:600,padding:"8px 12px",boxShadow:"0 2px 8px rgba(234, 179, 8, 0.4)"},children:"  "})]},l)})}),m.jsxs(Hn,{padding:"md",radius:"md",style:Xn.card,children:[m.jsx(U,{size:"md",c:"white",fw:600,mb:"xs",children:t.is_world?"     :":"     :"}),m.jsx(U,{size:"md",c:"rgb(180, 180, 180)",style:{whiteSpace:"pre-line"},children:r})]})]})}function qH({form:t,errors:e,updateField:n,entityNameGen:r}){return m.jsxs(Ee,{gap:"md",children:[m.jsx(Sa,{children:" "}),m.jsxs(pe,{children:[m.jsx(Hn,{padding:"sm",radius:"md",style:{...Xn.tipCard,marginBottom:"8px"},children:m.jsxs(U,{size:"sm",c:"rgb(200, 180, 230)",children:[m.jsx("b",{style:{color:"rgb(180, 140, 255)"},children:":"}),"             ",r,"  ."]})}),m.jsx(Dh,{label:` ${r}`,placeholder:t.is_world?":   2084":": ",value:t.name,onChange:o=>n("name",o),error:e.name,maxLength:ut.name.max,minLength:ut.name.min})]}),m.jsxs(pe,{children:[m.jsx(Hn,{padding:"sm",radius:"md",style:{...Xn.tipCard,marginBottom:"8px"},children:m.jsxs(U,{size:"sm",c:"rgb(200, 180, 230)",children:[m.jsx("b",{style:{color:"rgb(180, 140, 255)"},children:":"}),"     (     //)   /  ."]})}),m.jsx(Dh,{label:" ",placeholder:t.is_world?"  : , , ...":"  ?  ?  ?",value:t.description,onChange:o=>n("description",o),error:e.description,maxLength:ut.description.max,minLength:ut.description.min,multiline:!0,minRows:4})]}),m.jsxs(Ou,{children:["   .   ,      ",r,"."]})]})}function VH({form:t,errors:e,updateField:n,entityNameGen:r}){return m.jsxs(Ee,{gap:"md",children:[m.jsx(Sa,{children:" "}),m.jsxs(Il,{children:["     ",r,".   AI        ."]}),m.jsxs(Hn,{padding:"sm",radius:"md",style:{...Xn.tipCard,marginBottom:"8px"},children:[m.jsx(U,{size:"sm",c:"rgb(200, 180, 230)",mb:"xs",children:m.jsx("b",{style:{color:"rgb(180, 140, 255)"},children:"   ( ):"})}),m.jsxs(Ee,{gap:6,children:[m.jsxs(U,{size:"sm",c:"rgb(200, 180, 230)",children:["1. ",m.jsx("b",{children:":"})," ,     .       ."]}),m.jsxs(U,{size:"sm",c:"rgb(200, 180, 230)",children:["2. ",m.jsx("b",{children:":"}),"    (, )    ."]}),m.jsxs(U,{size:"sm",c:"rgb(200, 180, 230)",children:["3. ",m.jsx("b",{children:":"}),"   ,    (: ",m.jsx("i",{children:" , ,  "}),")."]})]})]}),m.jsx(Dh,{label:"  ",placeholder:" ,    ...",value:t.appearance||"",onChange:o=>n("appearance",o),error:e.appearance,maxLength:ut.appearance.max,minLength:ut.appearance.min,multiline:!0,minRows:5})]})}function FH({form:t,errors:e,updateField:n,entityName:r}){const o=pa(),[s,l]=D.useState(!1),[u,d]=D.useState(!1),[h,p]=D.useState(""),[g,y]=D.useState(""),[x,S]=D.useState(null),[E,k]=D.useState(!1),[w,C]=D.useState(!1),_=D.useCallback(()=>{if(!t.ai_prompt.trim()){Zt.show({title:" ",message:"  ,   ",color:"yellow"});return}p(t.ai_prompt),y(""),S(null),k(!1),C(!1),l(!0)},[t.ai_prompt]),R=D.useCallback(async()=>{if(h.trim()){if(h.length>1e3){S("   ( 1000 )");return}d(!0),S(null),y(""),k(!1),C(!1);try{const B=await zt("/v1/prompt/improve-prompt",{method:"POST",body:JSON.stringify({prompt:h})});B&&B.improved_prompt?y(B.improved_prompt):S("    ")}catch(B){console.error("Improve Prompt API Error:",B);const K=B.message||"";K.includes("403")?k(!0):K.includes("429")?C(!0):K.includes("422")?S(" .     "):K.includes("404")?S("  "):K.includes("500")?S(" .  "):S(" .  ")}finally{d(!1)}}},[h]),j=D.useCallback(()=>{g&&(n("ai_prompt",g),l(!1),Zt.show({title:" ",message:"    ",color:"teal",icon:m.jsx(cu,{size:18})}))},[g,n]),z=D.useCallback(()=>{o("/tariffs")},[o]);return m.jsxs(Ee,{gap:"md",children:[m.jsx(Sa,{children:"  AI"}),m.jsxs(Il,{children:[",     ",r,".     AI,    ."]}),m.jsxs(pe,{children:[m.jsxs(Hn,{padding:"sm",radius:"md",style:{...Xn.tipCard,marginBottom:"8px"},children:[m.jsx(U,{size:"sm",c:"rgb(200, 180, 230)",mb:"xs",children:m.jsx("b",{style:{color:"rgb(180, 140, 255)"},children:"  ( ):"})}),m.jsxs(Ee,{gap:4,children:[m.jsxs(U,{size:"sm",c:"rgb(200, 180, 230)",children:["1. ",m.jsx("b",{children:":"})," ,     ( , , )   ."]}),m.jsxs(U,{size:"sm",c:"rgb(200, 180, 230)",children:["2. ",m.jsx("b",{children:":"}),"   ,  (/)   ."]}),m.jsxs(U,{size:"sm",c:"rgb(200, 180, 230)",children:["3. ",m.jsx("b",{children:":"}),"   ,   ."]}),m.jsxs(U,{size:"sm",c:"rgb(200, 180, 230)",children:["4. ",m.jsx("b",{children:":"})," , .  NSFW      ."]})]})]}),m.jsxs(pe,{children:[m.jsx(Dh,{label:"AI ",placeholder:"",value:t.ai_prompt,onChange:B=>n("ai_prompt",B),error:e.ai_prompt,maxLength:ut.ai_prompt.max,minLength:ut.ai_prompt.min,multiline:!0,minRows:6}),m.jsx(Re,{justify:"flex-end",mt:8,children:m.jsx(s0,{label:"    AI",position:"left",children:m.jsx(He,{variant:"filled",size:"xs",onClick:_,style:{background:"linear-gradient(135deg, rgb(139, 92, 246) 0%, rgb(236, 72, 153) 100%)",border:"none"},leftSection:m.jsx(hS,{size:14}),children:""})})})]})]}),m.jsxs(Ou,{children:["  ,   AI  ",t.is_world?" ":" ",".   , , ."]}),m.jsx(as,{opened:s,onClose:()=>l(!1),title:"  ",closeOnClickOutside:!u,centered:!0,size:"lg",styles:Xn.modal,children:m.jsxs(Ee,{gap:"md",children:[!E&&!g&&m.jsx(Hn,{padding:"md",radius:"md",style:{backgroundColor:"rgb(35, 30, 45)",border:"1px solid rgb(88, 70, 120)"},children:m.jsx(U,{size:"sm",c:"rgb(200, 180, 230)",children:"AI        :   ,  ,     ,     ."})}),!E&&m.jsxs(m.Fragment,{children:[m.jsxs(pe,{children:[m.jsx(U,{size:"sm",c:"white",fw:500,mb:6,children:" "}),m.jsx(uv,{value:h,onChange:B=>p(B.target.value),minRows:4,autosize:!0,maxRows:8,styles:Xn.input,placeholder:" ...",error:h.length>1e3?"  ":void 0}),m.jsxs(U,{size:"xs",c:h.length>1e3?"red":"dimmed",ta:"right",children:[h.length,"/1000"]})]}),u?m.jsx(Ee,{gap:"sm",children:m.jsxs(Re,{justify:"center",gap:"xs",children:[m.jsx(Rl,{size:"sm",color:"violet"}),m.jsx(U,{size:"sm",c:"dimmed",children:"    30 ..."})]})}):!g&&m.jsx(He,{style:{background:"linear-gradient(135deg, rgb(139, 92, 246) 0%, rgb(236, 72, 153) 100%)",border:"none"},onClick:R,disabled:!h.trim()||h.length>1e3,leftSection:m.jsx(hS,{size:16}),fullWidth:!0,children:"   AI"})]}),x&&m.jsx(a0,{color:"red",variant:"light",radius:"md",icon:m.jsx(pv,{size:16}),children:x}),w&&m.jsx(Hn,{padding:"lg",radius:"md",style:{backgroundColor:"rgb(45, 40, 30)",border:"1px solid rgb(234, 179, 8)"},children:m.jsxs(Ee,{gap:"md",align:"center",children:[m.jsx(U,{size:"3rem",children:""}),m.jsx(U,{size:"lg",fw:600,c:"white",ta:"center",children:"-, !"}),m.jsx(U,{size:"md",c:"rgb(230, 210, 150)",ta:"center",children:"  .  AI    ."}),m.jsx(U,{size:"sm",c:"rgb(200, 180, 120)",ta:"center",children:" 10     "})]})}),E&&m.jsx(Hn,{padding:"lg",radius:"md",style:{backgroundColor:"rgb(45, 30, 60)",border:"1px solid rgb(139, 92, 246)"},children:m.jsxs(Ee,{gap:"md",children:[m.jsxs(Re,{gap:"sm",children:[m.jsx(mv,{size:24,color:"rgb(250, 204, 21)"}),m.jsx(U,{size:"lg",fw:600,c:"white",children:" !"})]}),m.jsx(U,{size:"md",c:"rgb(200, 180, 230)",children:"   .      "}),m.jsxs(Hn,{padding:"sm",radius:"sm",style:{backgroundColor:"rgb(35, 25, 50)"},children:[m.jsx(U,{size:"sm",c:"rgb(180, 160, 210)",fw:500,mb:"xs",children:"     ?"}),m.jsx(U,{size:"sm",c:"rgb(160, 140, 190)",children:"  ,    ."})]}),m.jsx(U,{size:"sm",c:"rgb(236, 72, 153)",ta:"center",style:{fontStyle:"italic"},children:"    , )) "}),m.jsx(He,{style:{background:"linear-gradient(135deg, rgb(250, 204, 21) 0%, rgb(245, 158, 11) 100%)",border:"none",color:"black"},onClick:z,leftSection:m.jsx(mv,{size:18}),fullWidth:!0,size:"md",children:" "})]})}),g&&m.jsxs(m.Fragment,{children:[m.jsxs(pe,{children:[m.jsx(U,{size:"sm",c:"white",fw:500,mb:6,children:" "}),m.jsx(uv,{value:g,onChange:B=>y(B.target.value),minRows:4,autosize:!0,maxRows:10,styles:{...Xn.input,input:{...Xn.input.input,borderColor:"rgb(139, 92, 246)"}}})]}),m.jsxs(Re,{justify:"flex-end",gap:"sm",children:[m.jsx(He,{variant:"subtle",color:"gray",onClick:()=>l(!1),children:""}),m.jsx(He,{color:"violet",onClick:j,leftSection:m.jsx(cu,{size:16}),children:""})]})]})]})})]})}function tT(t){return t?t.replace(/<br\s*\/?>/gi,`
`).replace(/<\/p>\s*<p>/gi,`
`).replace(/<strong>/gi,"<b>").replace(/<\/strong>/gi,"</b>").replace(/<em>/gi,"<i>").replace(/<\/em>/gi,"</i>").replace(/<p>/gi,"").replace(/<\/p>/gi,"").replace(/<(?!\/?[bi]>)[^>]+>/gi,"").replace(/&nbsp;/gi," ").replace(/&amp;/gi,"&").replace(/&lt;/gi,"<").replace(/&gt;/gi,">").replace(/&quot;/gi,'"').trim():""}function nT(t){return t?"<p>"+t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/&lt;b&gt;/gi,"<strong>").replace(/&lt;\/b&gt;/gi,"</strong>").replace(/&lt;i&gt;/gi,"<em>").replace(/&lt;\/i&gt;/gi,"</em>").replace(/\n/g,"</p><p>")+"</p>":"<p></p>"}function WH({form:t,errors:e,updateField:n}){const[r,o]=D.useState(!1),[s,l]=D.useState(!1),u=r8({extensions:[RH.configure({heading:!1,bulletList:!1,orderedList:!1,listItem:!1,blockquote:!1,codeBlock:!1,code:!1,horizontalRule:!1})],content:nT(t.greeting),onUpdate:({editor:x})=>{const S=x.getHTML(),E=tT(S);n("greeting",E)},onSelectionUpdate:({editor:x})=>{o(x.isActive("bold")),l(x.isActive("italic"))},onTransaction:({editor:x})=>{const S=x.state.storedMarks;if(S){const E=S.some(w=>w.type.name==="bold"),k=S.some(w=>w.type.name==="italic");o(E),l(k)}else o(x.isActive("bold")),l(x.isActive("italic"))}});D.useEffect(()=>{u&&!u.isFocused&&tT(u.getHTML())!==t.greeting&&u.commands.setContent(nT(t.greeting))},[t.greeting,u]);const d=D.useCallback(()=>{u&&(o(x=>!x),u.chain().focus().toggleBold().run())},[u]),h=D.useCallback(()=>{u&&(l(x=>!x),u.chain().focus().toggleItalic().run())},[u]),p=Zo(t.greeting).length,g=p>ut.greeting.max,y=p<ut.greeting.min&&p>0;return m.jsxs(Ee,{gap:"md",children:[m.jsx(Sa,{children:" "}),m.jsx(Il,{children:"      .   !"}),m.jsxs(Hn,{padding:"sm",radius:"md",style:{...Xn.tipCard,marginBottom:"8px"},children:[m.jsxs(U,{size:"sm",c:"rgb(200, 180, 230)",mb:"xs",children:[m.jsx("b",{style:{color:"rgb(180, 140, 255)"},children:":"}),"       ,        ()."]}),m.jsxs(U,{size:"sm",c:"rgb(200, 180, 230)",children:[m.jsx("b",{children:":"}),"            ."]})]}),m.jsxs(pe,{className:`greeting-editor ${e.greeting?"has-error":""}`,children:[m.jsx(U,{size:"sm",c:"white",fw:500,mb:6,children:""}),m.jsxs(qe,{editor:u,children:[m.jsx(qe.Toolbar,{sticky:!0,stickyOffset:0,children:m.jsxs(qe.ControlsGroup,{children:[m.jsx(qe.Control,{onClick:d,active:r,"aria-label":"Bold",children:m.jsx(qO,{size:16})}),m.jsx(qe.Control,{onClick:h,active:s,"aria-label":"Italic",children:m.jsx(sj,{size:16})})]})}),m.jsx(qe.Content,{})]}),m.jsxs(U,{size:"xs",c:g?"red":y?"rgb(250, 128, 114)":"dimmed",mt:4,children:[p,"/",ut.greeting.max,"  (. ",ut.greeting.min,")"]}),e.greeting&&m.jsx(U,{size:"xs",c:"red",mt:4,children:e.greeting})]}),m.jsxs(Ou,{children:[" ",m.jsx("b",{children:""}),"  ",m.jsx("i",{children:""}),"    .     ,    ."]})]})}function GH({form:t,updateField:e,entityNameGen:n,availableTags:r,loadingTags:o,tagsModalOpened:s,setTagsModalOpened:l,onToggleTag:u,onRemoveTag:d}){return m.jsxs(Ee,{gap:"md",children:[m.jsx(Sa,{children:"  "}),m.jsxs(Il,{children:["  5 ,        ",n,"."]}),t.tags.length>0&&m.jsx(Re,{gap:"xs",children:t.tags.map(h=>m.jsx(xn,{color:"violet",variant:"light",size:"lg",rightSection:m.jsx(Xo,{size:"xs",color:"violet",variant:"transparent",onClick:()=>d(h),children:""}),children:h},h))}),m.jsx(He,{variant:"light",color:"violet",onClick:()=>l(!0),fullWidth:!0,styles:{root:{backgroundColor:"rgb(41, 41, 41)",border:"1px dashed rgb(139, 92, 246)"}},children:t.tags.length>0?` : ${t.tags.length}/5  `:"+  "}),m.jsxs(Ou,{children:["   ,        ",n,"  ."]}),m.jsxs(as,{opened:s,onClose:()=>l(!1),title:`  (${t.tags.length}/5)`,centered:!0,size:"lg",styles:Xn.modal,children:[o?m.jsx(pe,{style:{display:"flex",justifyContent:"center",padding:"40px"},children:m.jsx(Rl,{color:"violet"})}):m.jsx(pe,{style:{display:"flex",flexWrap:"wrap",gap:"10px"},children:r.length===0?m.jsxs(U,{c:"dimmed",ta:"center",w:"100%",children:["      .",m.jsx("br",{}),"     ."]}):r.map(h=>{const p=t.tags.includes(h),g=!p&&t.tags.length>=5;return m.jsxs(He,{onClick:()=>u(h),disabled:g,size:"sm",radius:"xl",styles:{root:{backgroundColor:p?"rgb(139, 92, 246)":"rgb(41, 41, 41)",color:g?"rgb(100, 100, 100)":"white",border:p?"1px solid rgb(139, 92, 246)":"1px solid rgb(55, 55, 55)",opacity:g?.5:1,cursor:g?"not-allowed":"pointer","&:hover":{backgroundColor:p?"rgb(124, 77, 231)":g?"rgb(41, 41, 41)":"rgb(55, 55, 55)"}}},children:[p&&" ",h]},h)})}),m.jsx(He,{color:"violet",fullWidth:!0,mt:"lg",onClick:()=>l(!1),children:""})]}),m.jsx(pe,{style:{backgroundColor:"rgb(41, 41, 41)",borderRadius:"8px",padding:"16px"},children:m.jsxs(Re,{justify:"space-between",children:[m.jsxs(pe,{children:[m.jsxs(U,{size:"sm",c:"white",fw:500,children:[" ",t.is_world?"":""]}),m.jsx(U,{size:"xs",c:"dimmed",children:t.is_public?"     ":"   "})]}),m.jsx(LM,{checked:t.is_public,onChange:h=>e("is_public",h.currentTarget.checked),color:"violet"})]})})]})}function $H({form:t,errors:e,updateField:n,entityNameGen:r}){const o=D.useMemo(()=>t.photo?URL.createObjectURL(t.photo):null,[t.photo]),[s,l]=D.useState(null);D.useEffect(()=>()=>{o&&URL.revokeObjectURL(o)},[o]);const u=D.useCallback(d=>{if(l(null),!d){n("photo",null);return}if(!["image/png","image/jpeg","image/jpg","image/webp"].includes(d.type.toLowerCase())){l(" .  PNG, JPG  WebP");return}const p=5*1024*1024;if(d.size>p){l("  .  : 5 ");return}n("photo",d)},[n]);return m.jsxs(Ee,{gap:"md",children:[m.jsx(Sa,{children:" "}),m.jsxs(Il,{children:["    ",r,".  JPG, PNG, WebP."]}),o?m.jsxs(pe,{children:[m.jsx(U,{size:"sm",c:"white",fw:500,mb:6,children:""}),m.jsx(Hn,{padding:"md",radius:"md",style:{...Xn.card,cursor:"pointer",border:"2px dashed rgb(139, 92, 246)",transition:"all 0.2s"},onClick:()=>document.getElementById("hidden-file-input")?.click(),onMouseEnter:d=>{d.currentTarget.style.borderColor="rgb(167, 139, 250)",d.currentTarget.style.backgroundColor="rgb(45, 41, 51)"},onMouseLeave:d=>{d.currentTarget.style.borderColor="rgb(139, 92, 246)",d.currentTarget.style.backgroundColor="rgb(41, 41, 41)"},children:m.jsxs(Ee,{align:"center",gap:"sm",children:[m.jsx("img",{src:o,alt:"Preview",style:{maxWidth:"200px",maxHeight:"200px",borderRadius:"8px",objectFit:"cover"}}),m.jsx(U,{size:"sm",c:"dimmed",children:t.photo?.name}),m.jsx(U,{size:"xs",c:"rgb(139, 92, 246)",fw:500,children:" ,    "})]})}),m.jsx("input",{id:"hidden-file-input",type:"file",accept:"image/png,image/jpeg,image/jpg,image/webp",style:{display:"none"},onChange:d=>{const h=d.target.files?.[0]||null;u(h),d.target.value=""}}),s&&m.jsx(U,{size:"xs",c:"red",mt:4,children:s})]}):m.jsx(zM,{label:"",placeholder:",   ",accept:"image/png,image/jpeg,image/jpg,image/webp",value:t.photo,onChange:u,error:e.photo||s,styles:Xn.input}),m.jsx(Ou,{children:"    .  : 512512 .   : 5 ."})]})}const KH={root:{backgroundColor:"rgb(20, 83, 45)",border:"1px solid rgb(34, 197, 94)"},title:{color:"white"},message:{color:"rgb(187, 247, 208)"},closeButton:{color:"white"}};D.memo(function({isWorld:e,onDismiss:n}){const r=e?"":"";return m.jsx(a0,{color:"green",variant:"light",withCloseButton:!0,onClose:n,title:`${e?"":""}  ! `,radius:"md",styles:KH,children:m.jsxs(Ee,{gap:"xs",children:[m.jsxs(U,{size:"sm",children:[" ",r,"     .        !"]}),m.jsx(U,{size:"sm",children:"        Telegram-."}),m.jsxs(U,{size:"sm",children:["     ,  "," ",m.jsx(uT,{href:"https://t.me/aiogram_tgbots",target:"_blank",c:"rgb(134, 239, 172)",underline:"hover",children:""}),"."]})]})})});function YH(t){if(!t)return{};const e=t.match(/^ref_(.+)_char_(.+)$/);return e?{referrer:e[1],characterId:e[2]}:t.startsWith("char_")?{characterId:t.slice(5)}:{referrer:t}}const XH=`
  @keyframes float {
    0%, 100% { transform: translateY(0px); }
    50% { transform: translateY(-20px); }
  }

  @keyframes pulse {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.5; }
  }

  @keyframes shimmer {
    0% { background-position: -200% 0; }
    100% { background-position: 200% 0; }
  }

  .float-animation {
    animation: float 3s ease-in-out infinite;
  }

  .pulse-animation {
    animation: pulse 2s ease-in-out infinite;
  }

  .shimmer-animation {
    animation: shimmer 3s ease-in-out infinite;
  }
`;function JH(){const t=pa(),[e,n]=D.useState(!1);return D.useEffect(()=>{const r=document.createElement("style");return r.textContent=XH,document.head.appendChild(r),(async()=>{try{const s=kt.initDataUnsafe?.start_param,{referrer:l,characterId:u}=YH(s);fD(l),u&&(MD(u,l),sessionStorage.setItem("deeplink_character_id",u));const d=new Promise((g,y)=>setTimeout(()=>y(new Error("Timeout")),3e4)),h={};l&&(h.referrer=l);const p=zt("/v1/user/register",{method:"POST",body:JSON.stringify(h)});await Promise.race([p,d]),gE(),t("/",{replace:!0})}catch(s){if(console.error("Registration error:",s),s?.status===409){gE(),t("/",{replace:!0});return}hD(s?.message||"Unknown error"),n(!0)}})(),()=>{document.head.removeChild(r)}},[t]),e?m.jsx(Yn,{size:"sm",style:{paddingTop:"100px"},children:m.jsx(lr,{shadow:"md",p:"xl",withBorder:!0,children:m.jsxs(Ee,{align:"center",gap:"md",children:[m.jsx(U,{size:"xl",fw:600,children:", -   "}),m.jsx(U,{c:"dimmed",ta:"center",children:" WebApp,    ."}),m.jsxs(U,{c:"dimmed",ta:"center",children:[" :"," ",m.jsx("a",{href:"https://t.me/aiogram_tgbots",target:"_blank",rel:"noopener noreferrer",style:{color:"inherit"},children:"https://t.me/aiogram_tgbots"})]}),m.jsx(He,{onClick:()=>window.location.reload(),variant:"filled",fullWidth:!0,children:""})]})})}):m.jsx(Zs,{style:{height:"100vh",background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"},children:m.jsxs(Ee,{align:"center",gap:"xl",children:[m.jsxs("div",{className:"float-animation",style:{position:"relative"},children:[m.jsx(Rl,{size:80,color:"white",type:"dots"}),m.jsx("div",{className:"pulse-animation",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",width:"120px",height:"120px",borderRadius:"50%",background:"rgba(255, 255, 255, 0.1)",zIndex:-1}})]}),m.jsx(U,{size:"32px",fw:700,className:"shimmer-animation",style:{background:"linear-gradient(90deg, #fff, #e0e0e0, #fff)",backgroundSize:"200% 100%",WebkitBackgroundClip:"text",WebkitTextFillColor:"transparent",textAlign:"center",letterSpacing:"2px"},children:"  "}),m.jsx(U,{size:"lg",c:"white",className:"pulse-animation",style:{opacity:.9,textAlign:"center"},children:"    ..."})]})})}function QH(){const[t]=pT(),[e,n]=D.useState("loading"),[r,o]=D.useState(""),s=D.useRef(null),l=D.useRef(null),u=D.useRef(null),d=D.useRef(!1),h=t.get("token"),p=t.get("type");D.useEffect(()=>{if(!h){n("error"),o("   ");return}u.current=setTimeout(()=>{d.current||n("timeout")},3e4);const S=()=>{if(!window.YooMoneyCheckoutWidget){setTimeout(S,100);return}d.current=!0,u.current&&clearTimeout(u.current),n("widget"),setTimeout(()=>{try{s.current=new window.YooMoneyCheckoutWidget({confirmation_token:h,error_callback:function(E){console.error("YooKassa error:",E),n("error"),o("    ")}}),s.current.on("success",()=>{s.current?.destroy(),n("success")}),s.current.on("fail",()=>{s.current?.destroy(),n("fail")}),s.current.render("yookassa-payment-container")}catch(E){console.error("Widget init error:",E),n("error"),o("  ")}},50)};return S(),()=>{s.current?.destroy(),u.current&&clearTimeout(u.current)}},[h]);const g="RolePlayTopbot",y=()=>{window.location.href=`https://t.me/${g}`},x=()=>{window.close(),setTimeout(()=>{window.location.href=`https://t.me/${g}`},100)};return e==="loading"?m.jsx(Yn,{size:"sm",py:"xl",children:m.jsxs(Ee,{align:"center",gap:"lg",children:[m.jsx(Rl,{size:"lg",color:"blue"}),m.jsx(U,{c:"dimmed",children:"  ..."})]})}):e==="timeout"?m.jsx(Yn,{size:"sm",py:"xl",children:m.jsxs(Ee,{align:"center",gap:"lg",children:[m.jsx(pe,{w:80,h:80,bg:"orange.9",style:{borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:m.jsx(Mj,{size:40,color:"white"})}),m.jsx(Qi,{order:3,ta:"center",c:"orange.4",children:"  "}),m.jsxs(Ee,{gap:4,children:[m.jsx(U,{ta:"center",c:"dimmed",children:" :"}),m.jsx(U,{ta:"center",size:"sm",c:"dimmed",children:"  -"}),m.jsx(U,{ta:"center",size:"sm",c:"dimmed",children:"  VPN,    "})]}),m.jsxs(Ee,{w:"100%",gap:"xs",children:[m.jsx(He,{fullWidth:!0,variant:"light",color:"orange",onClick:()=>window.location.reload(),children:" "}),m.jsx(He,{fullWidth:!0,variant:"subtle",color:"gray",onClick:y,leftSection:m.jsx(Fc,{size:20}),children:"  "})]})]})}):e==="error"?m.jsx(Yn,{size:"sm",py:"xl",children:m.jsxs(Ee,{align:"center",gap:"lg",children:[m.jsx(pe,{w:80,h:80,bg:"red.9",style:{borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center"},children:m.jsx(jj,{size:40,color:"white"})}),m.jsx(Qi,{order:3,ta:"center",c:"red.4",children:""}),m.jsx(U,{ta:"center",c:"dimmed",children:r}),m.jsx(He,{fullWidth:!0,variant:"light",color:"red",onClick:y,leftSection:m.jsx(Fc,{size:20}),children:"  "})]})}):e==="success"?m.jsx(Yn,{size:"sm",py:"xl",children:m.jsxs(Ee,{align:"center",gap:"lg",children:[p==="energy"?m.jsx(pe,{w:"100%",h:150,bg:"rgba(245, 159, 0, 0.2)",style:{borderRadius:12,display:"flex",alignItems:"center",justifyContent:"center"},children:m.jsx(yi,{size:80,color:"#f59f00"})}):m.jsx(to,{src:"https://img-webcalypt.ru/uploads/admin/images/meme-templates/ZTOJqQiNQt1acPkpWQevehKaauqNbvfp.jpeg",alt:"Success",radius:"md",w:"100%",h:200,fit:"cover"}),m.jsxs(Ee,{gap:4,align:"center",children:[m.jsx(Qi,{order:3,ta:"center",c:"teal.4",children:p==="energy"?" !":",  !"}),m.jsx(U,{ta:"center",size:"sm",c:"dimmed",children:p==="energy"?"   ":"   "})]}),m.jsx(He,{fullWidth:!0,variant:"light",color:"teal",onClick:y,leftSection:m.jsx(Fc,{size:20}),children:"  "})]})}):e==="fail"?m.jsx(Yn,{size:"sm",py:"xl",children:m.jsxs(Ee,{align:"center",gap:"lg",children:[m.jsx(to,{src:"https://img-webcalypt.ru/uploads/admin/images/meme-templates/ggzOBNp6OSXECHJygK0vif4kUI2LsNVy.jpeg",alt:"Fail",radius:"md",w:"100%",h:200,fit:"cover"}),m.jsxs(Ee,{gap:4,align:"center",children:[m.jsx(Qi,{order:3,ta:"center",c:"red.4",children:",    :("}),m.jsx(U,{ta:"center",size:"sm",c:"dimmed",children:"-      "})]}),m.jsx(He,{fullWidth:!0,variant:"light",color:"red",onClick:y,leftSection:m.jsx(Fc,{size:20}),children:"  "})]})}):m.jsx(Yn,{size:"sm",py:"md",children:m.jsxs(Ee,{gap:"md",children:[m.jsx(Qi,{order:4,ta:"center",children:"  Kassa"}),m.jsx(pe,{ref:l,id:"yookassa-payment-container",style:{minHeight:300,background:"#fff",borderRadius:12,padding:16}}),m.jsx(He,{variant:"subtle",color:"gray",onClick:x,children:""})]})})}function ZH(){const t=VM();return D.useEffect(()=>{window.ym&&window.ym(106082581,"hit",t.pathname)},[t]),null}function qo({children:t}){return m.jsxs(m.Fragment,{children:[m.jsx(ZH,{}),t]})}function Vo(){const t=qM();return console.error(t),m.jsxs("div",{style:{padding:"20px",textAlign:"center"},children:[m.jsx("h1",{children:" "}),m.jsx("p",{children:",   "})]})}const e9=UM([{path:"/",element:m.jsx(qo,{children:m.jsx(bE,{})}),errorElement:m.jsx(Vo,{})},{path:"/auth",element:m.jsx(qo,{children:m.jsx(JH,{})}),errorElement:m.jsx(Vo,{})},{path:"/profile",element:m.jsx(qo,{children:m.jsx(l5,{})}),errorElement:m.jsx(Vo,{})},{path:"/tariffs",element:m.jsx(qo,{children:m.jsx(v5,{})}),errorElement:m.jsx(Vo,{})},{path:"/energy",element:m.jsx(qo,{children:m.jsx(T5,{})}),errorElement:m.jsx(Vo,{})},{path:"/create",element:m.jsx(qo,{children:m.jsx(UH,{})}),errorElement:m.jsx(Vo,{})},{path:"/payment",element:m.jsx(qo,{children:m.jsx(QH,{})}),errorElement:m.jsx(Vo,{})},{path:"*",element:m.jsx(qo,{children:m.jsx(bE,{})}),errorElement:m.jsx(Vo,{})}]);function t9(){return m.jsx(HM,{router:e9})}var av={},hi={},rT;function xy(){if(rT)return hi;rT=1,Object.defineProperty(hi,"__esModule",{value:!0}),hi.callbackQueueName=n,hi.scriptPath=r,hi.trackerConstructorName=o,hi.trackerInstanceName=s,hi.trackerVersionName=l,hi.accountListName=void 0;var t="yandex_metrika_accounts";hi.accountListName=t;function e(){throw new Error("invalid Ya.Metrika version")}function n(u){if(u==="1")return"yandex_metrika_callbacks";if(u==="2")return"yandex_metrika_callbacks2";e()}function r(u){if(u==="1")return"https://mc.yandex.ru/metrika/watch.js";if(u==="2")return"https://mc.yandex.ru/metrika/tag.js";e()}function o(u){if(u==="1")return"Metrika";if(u==="2")return"Metrika2";e()}function s(u){return"yaCounter".concat(u)}function l(u){return"yaCounterVersion".concat(u)}return hi}var Hc={},lv={},iT;function n9(){return iT||(iT=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=n;var e=xy();function n(r){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"1",l=(0,e.callbackQueueName)(s);window[e.accountListName]=window[e.accountListName]||[],window[e.accountListName]=window[e.accountListName].concat(r),window[l]=window[l]||[],window[l].push(function(){r.forEach(function(u){var d={id:u};try{window[(0,e.trackerInstanceName)(u)]=new Ya[(0,e.trackerConstructorName)(s)](Object.assign(d,o))}catch(h){console.warn(h)}})}),r.forEach(function(u){window[(0,e.trackerVersionName)(u)]=s})}})(lv)),lv}var oT;function r9(){if(oT)return Hc;oT=1,Object.defineProperty(Hc,"__esModule",{value:!0}),Hc.YMInitializer=void 0;var t=l(zh()),e=o(uO()),n=o(n9()),r=xy();function o(w){return w&&w.__esModule?w:{default:w}}function s(){if(typeof WeakMap!="function")return null;var w=new WeakMap;return s=function(){return w},w}function l(w){if(w&&w.__esModule)return w;if(w===null||u(w)!=="object"&&typeof w!="function")return{default:w};var C=s();if(C&&C.has(w))return C.get(w);var _={},R=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var j in w)if(Object.prototype.hasOwnProperty.call(w,j)){var z=R?Object.getOwnPropertyDescriptor(w,j):null;z&&(z.get||z.set)?Object.defineProperty(_,j,z):_[j]=w[j]}return _.default=w,C&&C.set(w,_),_}function u(w){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?u=function(_){return typeof _}:u=function(_){return _&&typeof Symbol=="function"&&_.constructor===Symbol&&_!==Symbol.prototype?"symbol":typeof _},u(w)}function d(w,C){if(!(w instanceof C))throw new TypeError("Cannot call a class as a function")}function h(w,C){for(var _=0;_<C.length;_++){var R=C[_];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty(w,R.key,R)}}function p(w,C,_){return C&&h(w.prototype,C),w}function g(w,C){return C&&(u(C)==="object"||typeof C=="function")?C:y(w)}function y(w){if(w===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w}function x(w){return x=Object.setPrototypeOf?Object.getPrototypeOf:function(_){return _.__proto__||Object.getPrototypeOf(_)},x(w)}function S(w,C){if(typeof C!="function"&&C!==null)throw new TypeError("Super expression must either be null or a function");w.prototype=Object.create(C&&C.prototype,{constructor:{value:w,writable:!0,configurable:!0}}),C&&E(w,C)}function E(w,C){return E=Object.setPrototypeOf||function(R,j){return R.__proto__=j,R},E(w,C)}var k=(function(w){S(C,w);function C(){return d(this,C),g(this,x(C).apply(this,arguments))}return p(C,[{key:"componentDidMount",value:function(){(0,n.default)(this.props.accounts,this.props.options,this.props.version);var R=document.createElement("script"),j=this.props.attrs;R.type="text/javascript",R.async=!0,R.src=(0,r.scriptPath)(this.props.version),Object.keys(j).map(function(z){R.__proto__.hasOwnProperty(z)&&R.setAttribute(z,j[z])}),this.insertPoint.insertBefore(R,null)}},{key:"render",value:function(){var R=this,j=function(B){R.insertPoint=B};return t.default.createElement(this.props.containerElement,{ref:j},this.props.children)}}]),C})(t.Component);return Hc.YMInitializer=k,k.displayName="YMInitializer",k.propTypes={accounts:e.default.arrayOf(e.default.number).isRequired,containerElement:e.default.string,options:e.default.object,attrs:e.default.object,version:e.default.oneOf(["1","2"])},k.defaultProps={containerElement:"div",options:{},attrs:{},version:"1"},Hc}var sT;function i9(){return sT||(sT=1,(function(t){Object.defineProperty(t,"__esModule",{value:!0}),t.withId=u,t.withFilter=d,Object.defineProperty(t,"YMInitializer",{enumerable:!0,get:function(){return n.YMInitializer}}),t.default=void 0;var e=xy(),n=r9();function r(p,g){try{for(var y,x=arguments.length,S=new Array(x>2?x-2:0),E=2;E<x;E++)S[E-2]=arguments[E];(y=window[(0,e.trackerInstanceName)(p)])[g].apply(y,S)}catch(k){console.warn(k)}}function o(){return typeof window<"u"?window[e.accountListName]:[]}function s(p){return function(){for(var g=arguments.length,y=new Array(g),x=0;x<g;x++)y[x]=arguments[x];p.forEach(function(S){var E=window[(0,e.trackerVersionName)(S)],k=window[(0,e.callbackQueueName)(E)];k?k.push(function(){return r.apply(void 0,[S].concat(y))}):r.apply(void 0,[S].concat(y))})}}function l(){return s(o()).apply(void 0,arguments)}function u(p){return d(function(g){return p===g})}function d(p){return s(o().filter(p))}var h=l;t.default=h})(av)),av}var o9=i9();function s9(){return D.useEffect(()=>{kt.ready(),kt.expand()},[]),m.jsxs(IM,{children:[m.jsx(o9.YMInitializer,{accounts:[106082581],options:{webvisor:!0,clickmap:!0,trackLinks:!0,accurateTrackBounce:!0,ecommerce:"dataLayer"},version:"2"}),m.jsx(oo,{position:"top-center",autoClose:4e3}),m.jsx(t9,{})]})}dD();KM.createRoot(document.getElementById("root")).render(m.jsx(s9,{}));
